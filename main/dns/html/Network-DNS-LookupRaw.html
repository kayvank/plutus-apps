<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Network.DNS.LookupRaw</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">dns-3.0.4: DNS library in Haskell</span><ul class="links" id="page-menu"><li><a href="src/Network.DNS.LookupRaw.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Network.DNS.LookupRaw</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Looking up functions</a></li><li><a href="#g:2">Raw looking up function</a></li></ul></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:lookup">lookup</a> :: <a href="Network-DNS-Resolver.html#t:Resolver" title="Network.DNS.Resolver">Resolver</a> -&gt; <a href="Network-DNS-Types.html#t:Domain" title="Network.DNS.Types">Domain</a> -&gt; <a href="Network-DNS-Types.html#t:TYPE" title="Network.DNS.Types">TYPE</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../../ghc/html/libraries/base-4.14.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Network-DNS-Types.html#t:DNSError" title="Network.DNS.Types">DNSError</a> [<a href="Network-DNS-Types.html#t:RData" title="Network.DNS.Types">RData</a>])</li><li class="src short"><a href="#v:lookupAuth">lookupAuth</a> :: <a href="Network-DNS-Resolver.html#t:Resolver" title="Network.DNS.Resolver">Resolver</a> -&gt; <a href="Network-DNS-Types.html#t:Domain" title="Network.DNS.Types">Domain</a> -&gt; <a href="Network-DNS-Types.html#t:TYPE" title="Network.DNS.Types">TYPE</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../../ghc/html/libraries/base-4.14.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Network-DNS-Types.html#t:DNSError" title="Network.DNS.Types">DNSError</a> [<a href="Network-DNS-Types.html#t:RData" title="Network.DNS.Types">RData</a>])</li><li class="src short"><a href="#v:lookupRaw">lookupRaw</a> :: <a href="Network-DNS-Resolver.html#t:Resolver" title="Network.DNS.Resolver">Resolver</a> -&gt; <a href="Network-DNS-Types.html#t:Domain" title="Network.DNS.Types">Domain</a> -&gt; <a href="Network-DNS-Types.html#t:TYPE" title="Network.DNS.Types">TYPE</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../../ghc/html/libraries/base-4.14.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Network-DNS-Types.html#t:DNSError" title="Network.DNS.Types">DNSError</a> <a href="Network-DNS-Types.html#t:DNSMessage" title="Network.DNS.Types">DNSMessage</a>)</li><li class="src short"><a href="#v:lookupRawAD">lookupRawAD</a> :: <a href="Network-DNS-Resolver.html#t:Resolver" title="Network.DNS.Resolver">Resolver</a> -&gt; <a href="Network-DNS-Types.html#t:Domain" title="Network.DNS.Types">Domain</a> -&gt; <a href="Network-DNS-Types.html#t:TYPE" title="Network.DNS.Types">TYPE</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../../ghc/html/libraries/base-4.14.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Network-DNS-Types.html#t:DNSError" title="Network.DNS.Types">DNSError</a> <a href="Network-DNS-Types.html#t:DNSMessage" title="Network.DNS.Types">DNSMessage</a>)</li><li class="src short"><a href="#v:fromDNSMessage">fromDNSMessage</a> :: <a href="Network-DNS-Types.html#t:DNSMessage" title="Network.DNS.Types">DNSMessage</a> -&gt; (<a href="Network-DNS-Types.html#t:DNSMessage" title="Network.DNS.Types">DNSMessage</a> -&gt; a) -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Network-DNS-Types.html#t:DNSError" title="Network.DNS.Types">DNSError</a> a</li><li class="src short"><a href="#v:fromDNSFormat">fromDNSFormat</a> :: <a href="Network-DNS-Types.html#t:DNSMessage" title="Network.DNS.Types">DNSMessage</a> -&gt; (<a href="Network-DNS-Types.html#t:DNSMessage" title="Network.DNS.Types">DNSMessage</a> -&gt; a) -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Network-DNS-Types.html#t:DNSError" title="Network.DNS.Types">DNSError</a> a</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Looking up functions</h1></a><div class="top"><p class="src"><a id="v:lookup" class="def">lookup</a> :: <a href="Network-DNS-Resolver.html#t:Resolver" title="Network.DNS.Resolver">Resolver</a> -&gt; <a href="Network-DNS-Types.html#t:Domain" title="Network.DNS.Types">Domain</a> -&gt; <a href="Network-DNS-Types.html#t:TYPE" title="Network.DNS.Types">TYPE</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../../ghc/html/libraries/base-4.14.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Network-DNS-Types.html#t:DNSError" title="Network.DNS.Types">DNSError</a> [<a href="Network-DNS-Types.html#t:RData" title="Network.DNS.Types">RData</a>]) <a href="src/Network.DNS.LookupRaw.html#lookup" class="link">Source</a> <a href="#v:lookup" class="selflink">#</a></p><div class="doc"><p>Look up resource records of a specified type for a domain,
   collecting the results
   from the ANSWER section of the response.
   See manual the manual of <code><a href="Network-DNS-LookupRaw.html#v:lookupRaw" title="Network.DNS.LookupRaw">lookupRaw</a></code>
   to understand the concrete behavior.
   Cache is used if <code><a href="Network-DNS-Resolver.html#v:resolvCache" title="Network.DNS.Resolver">resolvCache</a></code> is <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-Maybe.html#v:Just" title="Data.Maybe">Just</a></code>.</p><p>Example:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>rs &lt;- makeResolvSeed defaultResolvConf
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>withResolver rs $ \resolver -&gt; lookup resolver &quot;www.example.com&quot; A
</code></strong>Right [93.184.216.34]
</pre></div></div><div class="top"><p class="src"><a id="v:lookupAuth" class="def">lookupAuth</a> :: <a href="Network-DNS-Resolver.html#t:Resolver" title="Network.DNS.Resolver">Resolver</a> -&gt; <a href="Network-DNS-Types.html#t:Domain" title="Network.DNS.Types">Domain</a> -&gt; <a href="Network-DNS-Types.html#t:TYPE" title="Network.DNS.Types">TYPE</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../../ghc/html/libraries/base-4.14.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Network-DNS-Types.html#t:DNSError" title="Network.DNS.Types">DNSError</a> [<a href="Network-DNS-Types.html#t:RData" title="Network.DNS.Types">RData</a>]) <a href="src/Network.DNS.LookupRaw.html#lookupAuth" class="link">Source</a> <a href="#v:lookupAuth" class="selflink">#</a></p><div class="doc"><p>Look up resource records of a specified type for a domain,
   collecting the results
   from the AUTHORITY section of the response.
   See manual the manual of <code><a href="Network-DNS-LookupRaw.html#v:lookupRaw" title="Network.DNS.LookupRaw">lookupRaw</a></code>
   to understand the concrete behavior.
   Cache is used even if <code><a href="Network-DNS-Resolver.html#v:resolvCache" title="Network.DNS.Resolver">resolvCache</a></code> is <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-Maybe.html#v:Just" title="Data.Maybe">Just</a></code>.</p></div></div><a href="#g:2" id="g:2"><h1>Raw looking up function</h1></a><div class="top"><p class="src"><a id="v:lookupRaw" class="def">lookupRaw</a> :: <a href="Network-DNS-Resolver.html#t:Resolver" title="Network.DNS.Resolver">Resolver</a> -&gt; <a href="Network-DNS-Types.html#t:Domain" title="Network.DNS.Types">Domain</a> -&gt; <a href="Network-DNS-Types.html#t:TYPE" title="Network.DNS.Types">TYPE</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../../ghc/html/libraries/base-4.14.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Network-DNS-Types.html#t:DNSError" title="Network.DNS.Types">DNSError</a> <a href="Network-DNS-Types.html#t:DNSMessage" title="Network.DNS.Types">DNSMessage</a>) <a href="src/Network.DNS.LookupRaw.html#lookupRaw" class="link">Source</a> <a href="#v:lookupRaw" class="selflink">#</a></p><div class="doc"><p>Look up a name and return the entire DNS Response</p><p>For a given DNS server, the queries are done:</p><ul><li>A new UDP socket bound to a new local port is created and
    a new identifier is created atomically from the cryptographically
    secure pseudo random number generator for the target DNS server.
    Then UDP queries are tried with the limitation of <code><a href="Network-DNS-Resolver.html#v:resolvRetry" title="Network.DNS.Resolver">resolvRetry</a></code>
    (use EDNS0 if specifiecd).
    If it appear that the target DNS server does not support EDNS0,
    it falls back to traditional queries.</li><li>If the response is truncated, a new TCP socket bound to a new
    locla port is created. Then exactly one TCP query is retried.</li></ul><p>If multiple DNS server are specified <code><a href="Network-DNS-Resolver.html#t:ResolvConf" title="Network.DNS.Resolver">ResolvConf</a></code> ('RCHostNames ')
 or found (<code><a href="Network-DNS-Resolver.html#v:RCFilePath" title="Network.DNS.Resolver">RCFilePath</a></code>), either sequential lookup or
 concurrent lookup is carried out:</p><ul><li>In sequential lookup (<code><a href="Network-DNS-Resolver.html#v:resolvConcurrent" title="Network.DNS.Resolver">resolvConcurrent</a></code> is False),
    the query procedure above is processed
    in the order of the DNS servers sequentially until a successful
    response is received.</li><li>In concurrent lookup (<code><a href="Network-DNS-Resolver.html#v:resolvConcurrent" title="Network.DNS.Resolver">resolvConcurrent</a></code> is True),
    the query procedure above is processed
    for each DNS server concurrently.
    The first received response is accepted even if
    it is an error.</li></ul><p>Cache is not used even if <code><a href="Network-DNS-Resolver.html#v:resolvCache" title="Network.DNS.Resolver">resolvCache</a></code> is <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-Maybe.html#v:Just" title="Data.Maybe">Just</a></code>.</p><p>The example code:</p><pre>  rs &lt;- makeResolvSeed defaultResolvConf
  withResolver rs $ \resolver -&gt; lookupRaw resolver &quot;www.example.com&quot; A
  </pre><p>And the (formatted) expected output:</p><pre>  Right (DNSMessage
          { header = DNSHeader
                       { identifier = 1,
                         flags = DNSFlags
                                   { qOrR = QR_Response,
                                     opcode = OP_STD,
                                     authAnswer = False,
                                     trunCation = False,
                                     recDesired = True,
                                     recAvailable = True,
                                     rcode = NoErr,
                                     authenData = False
                                   },
                       },
            question = [Question { qname = &quot;www.example.com.&quot;,
                                   qtype = A}],
            answer = [ResourceRecord {rrname = &quot;www.example.com.&quot;,
                                      rrtype = A,
                                      rrttl = 800,
                                      rdlen = 4,
                                      rdata = 93.184.216.119}],
            authority = [],
            additional = []})
 </pre></div></div><div class="top"><p class="src"><a id="v:lookupRawAD" class="def">lookupRawAD</a> :: <a href="Network-DNS-Resolver.html#t:Resolver" title="Network.DNS.Resolver">Resolver</a> -&gt; <a href="Network-DNS-Types.html#t:Domain" title="Network.DNS.Types">Domain</a> -&gt; <a href="Network-DNS-Types.html#t:TYPE" title="Network.DNS.Types">TYPE</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../../ghc/html/libraries/base-4.14.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Network-DNS-Types.html#t:DNSError" title="Network.DNS.Types">DNSError</a> <a href="Network-DNS-Types.html#t:DNSMessage" title="Network.DNS.Types">DNSMessage</a>) <a href="src/Network.DNS.LookupRaw.html#lookupRawAD" class="link">Source</a> <a href="#v:lookupRawAD" class="selflink">#</a></p><div class="doc"><p>Same as <code><a href="Network-DNS-LookupRaw.html#v:lookupRaw" title="Network.DNS.LookupRaw">lookupRaw</a></code> but the query sets the AD bit, which solicits the
   the authentication status in the server reply.  In most applications
   (other than diagnostic tools) that want authenticated data It is
   unwise to trust the AD bit in the responses of non-local servers, this
   interface should in most cases only be used with a loopback resolver.</p></div></div><div class="top"><p class="src"><a id="v:fromDNSMessage" class="def">fromDNSMessage</a> :: <a href="Network-DNS-Types.html#t:DNSMessage" title="Network.DNS.Types">DNSMessage</a> -&gt; (<a href="Network-DNS-Types.html#t:DNSMessage" title="Network.DNS.Types">DNSMessage</a> -&gt; a) -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Network-DNS-Types.html#t:DNSError" title="Network.DNS.Types">DNSError</a> a <a href="src/Network.DNS.LookupRaw.html#fromDNSMessage" class="link">Source</a> <a href="#v:fromDNSMessage" class="selflink">#</a></p><div class="doc"><p>Extract necessary information from <code><a href="Network-DNS-Types.html#t:DNSMessage" title="Network.DNS.Types">DNSMessage</a></code></p></div></div><div class="top"><p class="src"><a id="v:fromDNSFormat" class="def">fromDNSFormat</a> :: <a href="Network-DNS-Types.html#t:DNSMessage" title="Network.DNS.Types">DNSMessage</a> -&gt; (<a href="Network-DNS-Types.html#t:DNSMessage" title="Network.DNS.Types">DNSMessage</a> -&gt; a) -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Network-DNS-Types.html#t:DNSError" title="Network.DNS.Types">DNSError</a> a <a href="src/Network.DNS.LookupRaw.html#fromDNSFormat" class="link">Source</a> <a href="#v:fromDNSFormat" class="selflink">#</a></p><div class="doc"><div class="warning"><p>Deprecated: Use fromDNSMessage instead</p></div><p>For backward compatibility.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.2</p></div></body></html>