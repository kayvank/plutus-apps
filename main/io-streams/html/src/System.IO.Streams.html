<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP                        #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings          #-}</span><span>
</span><span id="line-4"></span><span>
</span><span id="line-5"></span><span class="hs-comment">-- | This module is a top-level convenience module which re-exports most of the</span><span>
</span><span id="line-6"></span><span class="hs-comment">-- @io-streams@ library.</span><span>
</span><span id="line-7"></span><span class="hs-comment">--</span><span>
</span><span id="line-8"></span><span class="hs-comment">-- It is recommended to import this module qualified, as follows:</span><span>
</span><span id="line-9"></span><span class="hs-comment">--</span><span>
</span><span id="line-10"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-11"></span><span class="hs-comment">-- import           &quot;System.IO.Streams&quot; ('Generator', 'InputStream', 'OutputStream')</span><span>
</span><span id="line-12"></span><span class="hs-comment">-- import qualified &quot;System.IO.Streams&quot; as Streams</span><span>
</span><span id="line-13"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-14"></span><span class="hs-comment">--</span><span>
</span><span id="line-15"></span><span class="hs-comment">-- For an in-depth tutorial on how to use @io-streams@, please see the</span><span>
</span><span id="line-16"></span><span class="hs-comment">-- &quot;System.IO.Streams.Tutorial&quot; module.</span><span>
</span><span id="line-17"></span><span class="hs-comment">--</span><span>
</span><span id="line-18"></span><span class="hs-comment">-- Is there a function missing from this library? Interested in contributing?</span><span>
</span><span id="line-19"></span><span class="hs-comment">-- Send a pull request to &lt;http://github.com/snapframework/io-streams&gt;.</span><span>
</span><span id="line-20"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">System.IO.Streams</span><span>
</span><span id="line-21"></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * Stream types</span></span><span>
</span><span id="line-22"></span><span>   </span><span class="annot"><a href="System.IO.Streams.Internal.html#InputStream"><span class="hs-identifier">InputStream</span></a></span><span>
</span><span id="line-23"></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.IO.Streams.Internal.html#OutputStream"><span class="hs-identifier">OutputStream</span></a></span><span>
</span><span id="line-24"></span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span>   </span><span class="annot"><span class="hs-comment">-- ** A note about resource acquisition\/release semantics</span></span><span>
</span><span id="line-27"></span><span>   </span><span class="annot"><span class="hs-comment">-- $resource</span></span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span>   </span><span class="annot"><span class="hs-comment">-- * Creating streams</span></span><span>
</span><span id="line-30"></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.IO.Streams.Internal.html#makeInputStream"><span class="hs-identifier">makeInputStream</span></a></span><span>
</span><span id="line-31"></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.IO.Streams.Internal.html#makeOutputStream"><span class="hs-identifier">makeOutputStream</span></a></span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span>   </span><span class="annot"><span class="hs-comment">-- * Primitive stream operations</span></span><span>
</span><span id="line-34"></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.IO.Streams.Internal.html#read"><span class="hs-identifier">read</span></a></span><span>
</span><span id="line-35"></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.IO.Streams.Internal.html#unRead"><span class="hs-identifier">unRead</span></a></span><span>
</span><span id="line-36"></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.IO.Streams.Internal.html#peek"><span class="hs-identifier">peek</span></a></span><span>
</span><span id="line-37"></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.IO.Streams.Internal.html#write"><span class="hs-identifier">write</span></a></span><span>
</span><span id="line-38"></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.IO.Streams.Internal.html#writeTo"><span class="hs-identifier">writeTo</span></a></span><span>
</span><span id="line-39"></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.IO.Streams.Internal.html#atEOF"><span class="hs-identifier">atEOF</span></a></span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span>   </span><span class="annot"><span class="hs-comment">-- * Connecting streams together</span></span><span>
</span><span id="line-42"></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.IO.Streams.Internal.html#connect"><span class="hs-identifier">connect</span></a></span><span>
</span><span id="line-43"></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.IO.Streams.Internal.html#connectTo"><span class="hs-identifier">connectTo</span></a></span><span>
</span><span id="line-44"></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.IO.Streams.Internal.html#supply"><span class="hs-identifier">supply</span></a></span><span>
</span><span id="line-45"></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.IO.Streams.Internal.html#supplyTo"><span class="hs-identifier">supplyTo</span></a></span><span>
</span><span id="line-46"></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.IO.Streams.Internal.html#appendInputStream"><span class="hs-identifier">appendInputStream</span></a></span><span>
</span><span id="line-47"></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.IO.Streams.Internal.html#concatInputStreams"><span class="hs-identifier">concatInputStreams</span></a></span><span>
</span><span id="line-48"></span><span>
</span><span id="line-49"></span><span>   </span><span class="annot"><span class="hs-comment">-- * Thread safety \/ concurrency</span></span><span>
</span><span id="line-50"></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.IO.Streams.Internal.html#lockingInputStream"><span class="hs-identifier">lockingInputStream</span></a></span><span>
</span><span id="line-51"></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.IO.Streams.Internal.html#lockingOutputStream"><span class="hs-identifier">lockingOutputStream</span></a></span><span>
</span><span id="line-52"></span><span>
</span><span id="line-53"></span><span>   </span><span class="annot"><span class="hs-comment">-- * Utility streams</span></span><span>
</span><span id="line-54"></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.IO.Streams.Internal.html#nullInput"><span class="hs-identifier">nullInput</span></a></span><span>
</span><span id="line-55"></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.IO.Streams.Internal.html#nullOutput"><span class="hs-identifier">nullOutput</span></a></span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Generator monad</span></span><span>
</span><span id="line-58"></span><span>    </span><span class="annot"><span class="hs-comment">-- $generator</span></span><span>
</span><span id="line-59"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.IO.Streams.Internal.html#Generator"><span class="hs-identifier">Generator</span></a></span><span>
</span><span id="line-60"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.IO.Streams.Internal.html#fromGenerator"><span class="hs-identifier">fromGenerator</span></a></span><span>
</span><span id="line-61"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.IO.Streams.Internal.html#yield"><span class="hs-identifier">yield</span></a></span><span>
</span><span id="line-62"></span><span>
</span><span id="line-63"></span><span>   </span><span class="annot"><span class="hs-comment">-- * Batteries included</span></span><span>
</span><span id="line-64"></span><span> </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="System.IO.Streams.Builder.html"><span class="hs-identifier">System.IO.Streams.Builder</span></a></span><span>
</span><span id="line-65"></span><span> </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="System.IO.Streams.ByteString.html"><span class="hs-identifier">System.IO.Streams.ByteString</span></a></span><span>
</span><span id="line-66"></span><span> </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="System.IO.Streams.Combinators.html"><span class="hs-identifier">System.IO.Streams.Combinators</span></a></span><span>
</span><span id="line-67"></span><span> </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="System.IO.Streams.Handle.html"><span class="hs-identifier">System.IO.Streams.Handle</span></a></span><span>
</span><span id="line-68"></span><span> </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="System.IO.Streams.File.html"><span class="hs-identifier">System.IO.Streams.File</span></a></span><span>
</span><span id="line-69"></span><span> </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="System.IO.Streams.List.html"><span class="hs-identifier">System.IO.Streams.List</span></a></span><span class="hs-cpp">
#ifdef ENABLE_NETWORK
</span><span> </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="System.IO.Streams.Network.html"><span class="hs-identifier">System.IO.Streams.Network</span></a></span><span class="hs-cpp">
#endif
</span><span> </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="System.IO.Streams.Process.html"><span class="hs-identifier">System.IO.Streams.Process</span></a></span><span>
</span><span id="line-74"></span><span> </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="System.IO.Streams.Text.html"><span class="hs-identifier">System.IO.Streams.Text</span></a></span><span>
</span><span id="line-75"></span><span> </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="System.IO.Streams.Vector.html"><span class="hs-identifier">System.IO.Streams.Vector</span></a></span><span class="hs-cpp">
#ifdef ENABLE_ZLIB
</span><span> </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="System.IO.Streams.Zlib.html"><span class="hs-identifier">System.IO.Streams.Zlib</span></a></span><span class="hs-cpp">
#endif
</span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Prelude</span></a></span><span>                       </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="System.IO.Streams.Internal.html"><span class="hs-identifier">System.IO.Streams.Internal</span></a></span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="System.IO.Streams.Builder.html"><span class="hs-identifier">System.IO.Streams.Builder</span></a></span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="System.IO.Streams.ByteString.html"><span class="hs-identifier">System.IO.Streams.ByteString</span></a></span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="System.IO.Streams.Combinators.html"><span class="hs-identifier">System.IO.Streams.Combinators</span></a></span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="System.IO.Streams.File.html"><span class="hs-identifier">System.IO.Streams.File</span></a></span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="System.IO.Streams.Handle.html"><span class="hs-identifier">System.IO.Streams.Handle</span></a></span><span>
</span><span id="line-92"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="System.IO.Streams.List.html"><span class="hs-identifier">System.IO.Streams.List</span></a></span><span class="hs-cpp">
#ifdef ENABLE_NETWORK
</span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="System.IO.Streams.Network.html"><span class="hs-identifier">System.IO.Streams.Network</span></a></span><span class="hs-cpp">
#endif
</span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="System.IO.Streams.Process.html"><span class="hs-identifier">System.IO.Streams.Process</span></a></span><span>
</span><span id="line-97"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="System.IO.Streams.Text.html"><span class="hs-identifier">System.IO.Streams.Text</span></a></span><span>
</span><span id="line-98"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="System.IO.Streams.Vector.html"><span class="hs-identifier">System.IO.Streams.Vector</span></a></span><span class="hs-cpp">
#ifdef ENABLE_ZLIB
</span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="System.IO.Streams.Zlib.html"><span class="hs-identifier">System.IO.Streams.Zlib</span></a></span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-103"></span><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><span id="line-104"></span><span class="hs-comment">-- $generator</span><span>
</span><span id="line-105"></span><span class="hs-comment">-- #generator#</span><span>
</span><span id="line-106"></span><span class="hs-comment">--</span><span>
</span><span id="line-107"></span><span class="hs-comment">-- The 'Generator' monad makes it easier for you to define more complicated</span><span>
</span><span id="line-108"></span><span class="hs-comment">-- 'InputStream's. Generators have a couple of basic features:</span><span>
</span><span id="line-109"></span><span class="hs-comment">--</span><span>
</span><span id="line-110"></span><span class="hs-comment">-- 'Generator' is a 'MonadIO', so you can run IO actions from within it using</span><span>
</span><span id="line-111"></span><span class="hs-comment">-- 'liftIO':</span><span>
</span><span id="line-112"></span><span class="hs-comment">--</span><span>
</span><span id="line-113"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-114"></span><span class="hs-comment">-- foo :: 'Generator' r a</span><span>
</span><span id="line-115"></span><span class="hs-comment">-- foo = 'liftIO' fireTheMissiles</span><span>
</span><span id="line-116"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-117"></span><span class="hs-comment">--</span><span>
</span><span id="line-118"></span><span class="hs-comment">-- 'Generator' has a 'yield' function:</span><span>
</span><span id="line-119"></span><span class="hs-comment">--</span><span>
</span><span id="line-120"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-121"></span><span class="hs-comment">-- 'yield' :: r -&gt; 'Generator' r ()</span><span>
</span><span id="line-122"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-123"></span><span class="hs-comment">--</span><span>
</span><span id="line-124"></span><span class="hs-comment">-- A call to \&quot;'yield' @x@\&quot; causes \&quot;'Just' @x@\&quot; to appear when reading the</span><span>
</span><span id="line-125"></span><span class="hs-comment">-- 'InputStream'. Finally, 'Generator' comes with a function to turn a</span><span>
</span><span id="line-126"></span><span class="hs-comment">-- 'Generator' into an 'InputStream':</span><span>
</span><span id="line-127"></span><span class="hs-comment">--</span><span>
</span><span id="line-128"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-129"></span><span class="hs-comment">-- 'fromGenerator' :: 'Generator' r a -&gt; 'IO' ('InputStream' r)</span><span>
</span><span id="line-130"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-131"></span><span class="hs-comment">--</span><span>
</span><span id="line-132"></span><span class="hs-comment">-- Once the 'Generator' action finishes, 'fromGenerator' will cause an</span><span>
</span><span id="line-133"></span><span class="hs-comment">-- end-of-stream 'Nothing' marker to appear at the output. Example:</span><span>
</span><span id="line-134"></span><span class="hs-comment">--</span><span>
</span><span id="line-135"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-136"></span><span class="hs-comment">-- ghci&gt; (Streams.'fromGenerator' $ 'Control.Monad.sequence' $ 'Prelude.map' Streams.'yield' [1..5::Int]) &gt;&gt;= Streams.'toList'</span><span>
</span><span id="line-137"></span><span class="hs-comment">-- [1,2,3,4,5]</span><span>
</span><span id="line-138"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span>
</span><span id="line-141"></span><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><span id="line-142"></span><span class="hs-comment">-- $resource</span><span>
</span><span id="line-143"></span><span class="hs-comment">-- #resource#</span><span>
</span><span id="line-144"></span><span class="hs-comment">--</span><span>
</span><span id="line-145"></span><span class="hs-comment">-- In general, the convention within this library is that input and output</span><span>
</span><span id="line-146"></span><span class="hs-comment">-- streams do not deal with resource acquisition\/release semantics, with rare</span><span>
</span><span id="line-147"></span><span class="hs-comment">-- exceptions like 'System.IO.Streams.withFileAsInput'. For example, sending</span><span>
</span><span id="line-148"></span><span class="hs-comment">-- \&quot;end-of-stream\&quot; to an 'OutputStream' wrapped around a 'System.IO.Handle'</span><span>
</span><span id="line-149"></span><span class="hs-comment">-- doesn't cause the handle to be closed. You can think of streams as little</span><span>
</span><span id="line-150"></span><span class="hs-comment">-- state machines that are attached to the underlying resources, and the</span><span>
</span><span id="line-151"></span><span class="hs-comment">-- finalization\/release of these resources is up to you.</span><span>
</span><span id="line-152"></span><span class="hs-comment">--</span><span>
</span><span id="line-153"></span><span class="hs-comment">-- This means that you can use standard Haskell idioms like</span><span>
</span><span id="line-154"></span><span class="hs-comment">-- 'Control.Exception.bracket' to handle resource acquisition and cleanup in an</span><span>
</span><span id="line-155"></span><span class="hs-comment">-- exception-safe way.</span><span>
</span><span id="line-156"></span><span class="hs-comment">--</span><span>
</span><span id="line-157"></span><span>
</span><span id="line-158"></span></pre></body></html>