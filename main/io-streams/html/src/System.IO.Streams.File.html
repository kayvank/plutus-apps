<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">-- | Input and output streams for files.</span><span>
</span><span id="line-2"></span><span class="hs-comment">--</span><span>
</span><span id="line-3"></span><span class="hs-comment">-- The functions in this file use \&quot;with*\&quot; or \&quot;bracket\&quot; semantics, i.e. they</span><span>
</span><span id="line-4"></span><span class="hs-comment">-- open the supplied 'FilePath', run a user computation, and then close the</span><span>
</span><span id="line-5"></span><span class="hs-comment">-- file handle. If you need more control over the lifecycle of the underlying</span><span>
</span><span id="line-6"></span><span class="hs-comment">-- file descriptor resources, you are encouraged to use the functions from</span><span>
</span><span id="line-7"></span><span class="hs-comment">-- &quot;System.IO.Streams.Handle&quot; instead.</span><span>
</span><span id="line-8"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">System.IO.Streams.File</span><span>
</span><span id="line-9"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * File conversions</span></span><span>
</span><span id="line-10"></span><span>    </span><span class="annot"><a href="System.IO.Streams.File.html#withFileAsInput"><span class="hs-identifier">withFileAsInput</span></a></span><span>
</span><span id="line-11"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.IO.Streams.File.html#withFileAsInputStartingAt"><span class="hs-identifier">withFileAsInputStartingAt</span></a></span><span>
</span><span id="line-12"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.IO.Streams.File.html#unsafeWithFileAsInputStartingAt"><span class="hs-identifier">unsafeWithFileAsInputStartingAt</span></a></span><span>
</span><span id="line-13"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.IO.Streams.File.html#withFileAsOutput"><span class="hs-identifier">withFileAsOutput</span></a></span><span>
</span><span id="line-14"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.IO.Streams.File.html#withFileAsOutputExt"><span class="hs-identifier">withFileAsOutputExt</span></a></span><span>
</span><span id="line-15"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-16"></span><span>
</span><span id="line-17"></span><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Monad</span></a></span><span>              </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">unless</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier">Data.ByteString</span></a></span><span>            </span><span class="hs-special">(</span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier">ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Int</span></a></span><span>                   </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Int64</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">System.IO</span></a></span><span>                  </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">BufferMode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">NoBuffering</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">IOMode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">ReadMode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">WriteMode</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">SeekMode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">AbsoluteSeek</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">hSeek</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">hSetBuffering</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">withBinaryFile</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="System.IO.Streams.Handle.html"><span class="hs-identifier">System.IO.Streams.Handle</span></a></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="System.IO.Streams.Handle.html#handleToInputStream"><span class="hs-identifier">handleToInputStream</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.IO.Streams.Handle.html#handleToOutputStream"><span class="hs-identifier">handleToOutputStream</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="System.IO.Streams.Internal.html"><span class="hs-identifier">System.IO.Streams.Internal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.IO.Streams.Internal.html#InputStream"><span class="hs-identifier">InputStream</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.IO.Streams.Internal.html#OutputStream"><span class="hs-identifier">OutputStream</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><span id="line-28"></span><span class="hs-comment">-- | @'withFileAsInput' name act@ opens the specified file in \&quot;read mode\&quot; and</span><span>
</span><span id="line-29"></span><span class="hs-comment">-- passes the resulting 'InputStream' to the computation @act@. The file will</span><span>
</span><span id="line-30"></span><span class="hs-comment">-- be closed on exit from @withFileAsInput@, whether by normal termination or</span><span>
</span><span id="line-31"></span><span class="hs-comment">-- by raising an exception.</span><span>
</span><span id="line-32"></span><span class="hs-comment">--</span><span>
</span><span id="line-33"></span><span class="hs-comment">-- If closing the file raises an exception, then /that/ exception will be</span><span>
</span><span id="line-34"></span><span class="hs-comment">-- raised by 'withFileAsInput' rather than any exception raised by @act@.</span><span>
</span><span id="line-35"></span><span id="local-6989586621679081390"><span class="annot"><a href="System.IO.Streams.File.html#withFileAsInput"><span class="hs-identifier hs-type">withFileAsInput</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span>                          </span><span class="hs-comment">-- ^ file to open</span><span>
</span><span id="line-36"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.IO.Streams.Internal.html#InputStream"><span class="hs-identifier hs-type">InputStream</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">ByteString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081390"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- ^ function to run</span><span>
</span><span id="line-37"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081390"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-38"></span><span id="withFileAsInput"><span class="annot"><span class="annottext">withFileAsInput :: FilePath -&gt; (InputStream ByteString -&gt; IO a) -&gt; IO a
</span><a href="System.IO.Streams.File.html#withFileAsInput"><span class="hs-identifier hs-var hs-var">withFileAsInput</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; FilePath -&gt; (InputStream ByteString -&gt; IO a) -&gt; IO a
forall a.
Int64 -&gt; FilePath -&gt; (InputStream ByteString -&gt; IO a) -&gt; IO a
</span><a href="System.IO.Streams.File.html#withFileAsInputStartingAt"><span class="hs-identifier hs-var">withFileAsInputStartingAt</span></a></span><span> </span><span class="annot"><span class="annottext">Int64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-39"></span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><span id="line-42"></span><span class="hs-comment">-- | Like 'withFileAsInput', but seeks to the specified byte offset before</span><span>
</span><span id="line-43"></span><span class="hs-comment">-- attaching the given file descriptor to the 'InputStream'.</span><span>
</span><span id="line-44"></span><span id="local-6989586621679081426"><span class="annot"><a href="System.IO.Streams.File.html#withFileAsInputStartingAt"><span class="hs-identifier hs-type">withFileAsInputStartingAt</span></a></span><span>
</span><span id="line-45"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Int64</span></a></span><span>                             </span><span class="hs-comment">-- ^ starting index to seek to</span><span>
</span><span id="line-46"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span>                          </span><span class="hs-comment">-- ^ file to open</span><span>
</span><span id="line-47"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.IO.Streams.Internal.html#InputStream"><span class="hs-identifier hs-type">InputStream</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">ByteString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081426"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- ^ function to run</span><span>
</span><span id="line-48"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081426"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-49"></span><span id="withFileAsInputStartingAt"><span class="annot"><span class="annottext">withFileAsInputStartingAt :: Int64 -&gt; FilePath -&gt; (InputStream ByteString -&gt; IO a) -&gt; IO a
</span><a href="System.IO.Streams.File.html#withFileAsInputStartingAt"><span class="hs-identifier hs-var hs-var">withFileAsInputStartingAt</span></a></span></span><span> </span><span id="local-6989586621679081389"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679081389"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span id="local-6989586621679081388"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679081388"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span id="local-6989586621679081387"><span class="annot"><span class="annottext">InputStream ByteString -&gt; IO a
</span><a href="#local-6989586621679081387"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IOMode -&gt; (Handle -&gt; IO a) -&gt; IO a
forall r. FilePath -&gt; IOMode -&gt; (Handle -&gt; IO r) -&gt; IO r
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">withBinaryFile</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679081388"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="annot"><span class="annottext">IOMode
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">ReadMode</span></a></span><span> </span><span class="annot"><span class="annottext">Handle -&gt; IO a
</span><a href="#local-6989586621679081386"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-50"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-51"></span><span>    </span><span id="local-6989586621679081386"><span class="annot"><span class="annottext">go :: Handle -&gt; IO a
</span><a href="#local-6989586621679081386"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679081385"><span class="annot"><span class="annottext">Handle
</span><a href="#local-6989586621679081385"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-52"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679081389"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; Int64 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Int64
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Handle -&gt; SeekMode -&gt; Integer -&gt; IO ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">hSeek</span></a></span><span> </span><span class="annot"><span class="annottext">Handle
</span><a href="#local-6989586621679081385"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">SeekMode
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">AbsoluteSeek</span></a></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; IO ()) -&gt; Integer -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; Integer
forall a. Integral a =&gt; a -&gt; Integer
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">toInteger</span></a></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679081389"><span class="hs-identifier hs-var">idx</span></a></span><span>
</span><span id="line-53"></span><span>        </span><span class="annot"><span class="annottext">Handle -&gt; IO (InputStream ByteString)
</span><a href="System.IO.Streams.Handle.html#handleToInputStream"><span class="hs-identifier hs-var">handleToInputStream</span></a></span><span> </span><span class="annot"><span class="annottext">Handle
</span><a href="#local-6989586621679081385"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">IO (InputStream ByteString)
-&gt; (InputStream ByteString -&gt; IO a) -&gt; IO a
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">InputStream ByteString -&gt; IO a
</span><a href="#local-6989586621679081387"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span>
</span><span id="line-56"></span><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><span id="line-57"></span><span class="hs-comment">-- | Like 'withFileAsInputStartingAt', except that the 'ByteString' emitted by</span><span>
</span><span id="line-58"></span><span class="hs-comment">-- the created 'InputStream' may reuse its buffer. You may only use this</span><span>
</span><span id="line-59"></span><span class="hs-comment">-- function if you do not retain references to the generated bytestrings</span><span>
</span><span id="line-60"></span><span class="hs-comment">-- emitted.</span><span>
</span><span id="line-61"></span><span id="local-6989586621679081384"><span class="annot"><a href="System.IO.Streams.File.html#unsafeWithFileAsInputStartingAt"><span class="hs-identifier hs-type">unsafeWithFileAsInputStartingAt</span></a></span><span>
</span><span id="line-62"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Int64</span></a></span><span>                             </span><span class="hs-comment">-- ^ starting index to seek to</span><span>
</span><span id="line-63"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span>                          </span><span class="hs-comment">-- ^ file to open</span><span>
</span><span id="line-64"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.IO.Streams.Internal.html#InputStream"><span class="hs-identifier hs-type">InputStream</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">ByteString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081384"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- ^ function to run</span><span>
</span><span id="line-65"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081384"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-66"></span><span id="unsafeWithFileAsInputStartingAt"><span class="annot"><span class="annottext">unsafeWithFileAsInputStartingAt :: Int64 -&gt; FilePath -&gt; (InputStream ByteString -&gt; IO a) -&gt; IO a
</span><a href="System.IO.Streams.File.html#unsafeWithFileAsInputStartingAt"><span class="hs-identifier hs-var hs-var">unsafeWithFileAsInputStartingAt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; FilePath -&gt; (InputStream ByteString -&gt; IO a) -&gt; IO a
forall a.
Int64 -&gt; FilePath -&gt; (InputStream ByteString -&gt; IO a) -&gt; IO a
</span><a href="System.IO.Streams.File.html#withFileAsInputStartingAt"><span class="hs-identifier hs-var">withFileAsInputStartingAt</span></a></span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><span id="line-70"></span><span class="hs-comment">-- | Open a file for writing and  attaches an 'OutputStream' for you to write</span><span>
</span><span id="line-71"></span><span class="hs-comment">-- to. The file will be closed on error or completion of your action.</span><span>
</span><span id="line-72"></span><span id="local-6989586621679081383"><span class="annot"><a href="System.IO.Streams.File.html#withFileAsOutput"><span class="hs-identifier hs-type">withFileAsOutput</span></a></span><span>
</span><span id="line-73"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span>                           </span><span class="hs-comment">-- ^ file to open</span><span>
</span><span id="line-74"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.IO.Streams.Internal.html#OutputStream"><span class="hs-identifier hs-type">OutputStream</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">ByteString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081383"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- ^ function to run</span><span>
</span><span id="line-75"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081383"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-76"></span><span id="withFileAsOutput"><span class="annot"><span class="annottext">withFileAsOutput :: FilePath -&gt; (OutputStream ByteString -&gt; IO a) -&gt; IO a
</span><a href="System.IO.Streams.File.html#withFileAsOutput"><span class="hs-identifier hs-var hs-var">withFileAsOutput</span></a></span></span><span> </span><span id="local-6989586621679081382"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679081382"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath
-&gt; IOMode
-&gt; BufferMode
-&gt; (OutputStream ByteString -&gt; IO a)
-&gt; IO a
forall a.
FilePath
-&gt; IOMode
-&gt; BufferMode
-&gt; (OutputStream ByteString -&gt; IO a)
-&gt; IO a
</span><a href="System.IO.Streams.File.html#withFileAsOutputExt"><span class="hs-identifier hs-var">withFileAsOutputExt</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679081382"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">IOMode
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">WriteMode</span></a></span><span> </span><span class="annot"><span class="annottext">BufferMode
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">NoBuffering</span></a></span><span>
</span><span id="line-77"></span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><span id="line-80"></span><span class="hs-comment">-- | Like 'withFileAsOutput', but allowing you control over the output file</span><span>
</span><span id="line-81"></span><span class="hs-comment">-- mode and buffering behaviour.</span><span>
</span><span id="line-82"></span><span id="local-6989586621679081407"><span class="annot"><a href="System.IO.Streams.File.html#withFileAsOutputExt"><span class="hs-identifier hs-type">withFileAsOutputExt</span></a></span><span>
</span><span id="line-83"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span>                           </span><span class="hs-comment">-- ^ file to open</span><span>
</span><span id="line-84"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">IOMode</span></a></span><span>                             </span><span class="hs-comment">-- ^ mode to write in</span><span>
</span><span id="line-85"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">BufferMode</span></a></span><span>                         </span><span class="hs-comment">-- ^ should we buffer the output?</span><span>
</span><span id="line-86"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.IO.Streams.Internal.html#OutputStream"><span class="hs-identifier hs-type">OutputStream</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">ByteString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081407"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- ^ function to run</span><span>
</span><span id="line-87"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081407"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-88"></span><span id="withFileAsOutputExt"><span class="annot"><span class="annottext">withFileAsOutputExt :: FilePath
-&gt; IOMode
-&gt; BufferMode
-&gt; (OutputStream ByteString -&gt; IO a)
-&gt; IO a
</span><a href="System.IO.Streams.File.html#withFileAsOutputExt"><span class="hs-identifier hs-var hs-var">withFileAsOutputExt</span></a></span></span><span> </span><span id="local-6989586621679081381"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679081381"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span id="local-6989586621679081380"><span class="annot"><span class="annottext">IOMode
</span><a href="#local-6989586621679081380"><span class="hs-identifier hs-var">iomode</span></a></span></span><span> </span><span id="local-6989586621679081379"><span class="annot"><span class="annottext">BufferMode
</span><a href="#local-6989586621679081379"><span class="hs-identifier hs-var">buffermode</span></a></span></span><span> </span><span id="local-6989586621679081378"><span class="annot"><span class="annottext">OutputStream ByteString -&gt; IO a
</span><a href="#local-6989586621679081378"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IOMode -&gt; (Handle -&gt; IO a) -&gt; IO a
forall r. FilePath -&gt; IOMode -&gt; (Handle -&gt; IO r) -&gt; IO r
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">withBinaryFile</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679081381"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="annot"><span class="annottext">IOMode
</span><a href="#local-6989586621679081380"><span class="hs-identifier hs-var">iomode</span></a></span><span> </span><span class="annot"><span class="annottext">((Handle -&gt; IO a) -&gt; IO a) -&gt; (Handle -&gt; IO a) -&gt; IO a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679081377"><span class="annot"><span class="annottext">Handle
</span><a href="#local-6989586621679081377"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-89"></span><span>    </span><span class="annot"><span class="annottext">Handle -&gt; BufferMode -&gt; IO ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">hSetBuffering</span></a></span><span> </span><span class="annot"><span class="annottext">Handle
</span><a href="#local-6989586621679081377"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">BufferMode
</span><a href="#local-6989586621679081379"><span class="hs-identifier hs-var">buffermode</span></a></span><span>
</span><span id="line-90"></span><span>    </span><span class="annot"><span class="annottext">Handle -&gt; IO (OutputStream ByteString)
</span><a href="System.IO.Streams.Handle.html#handleToOutputStream"><span class="hs-identifier hs-var">handleToOutputStream</span></a></span><span> </span><span class="annot"><span class="annottext">Handle
</span><a href="#local-6989586621679081377"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">IO (OutputStream ByteString)
-&gt; (OutputStream ByteString -&gt; IO a) -&gt; IO a
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">OutputStream ByteString -&gt; IO a
</span><a href="#local-6989586621679081378"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-91"></span></pre></body></html>