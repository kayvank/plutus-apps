<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Cardano.Numeric.Util</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">cardano-numeric-2020.12.8: Types and functions for performing numerical calculations.</span><ul class="links" id="page-menu"><li><a href="src/Cardano.Numeric.Util.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Cardano.Numeric.Util</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Coalescing values</a></li><li><a href="#g:2">Partitioning natural numbers</a></li><li><a href="#g:3">Partial orders</a></li><li><a href="#g:4">Monomorphic functions</a></li></ul></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:padCoalesce">padCoalesce</a> :: <span class="keyword">forall</span> m a. (<a href="../../ghc/html/libraries/base-4.14.3.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> m, <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> m) =&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> m -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> a -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> m</li><li class="src short"><a href="#v:equipartitionNatural">equipartitionNatural</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a> =&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Natural.html#t:Natural" title="GHC.Natural">Natural</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> a -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Natural.html#t:Natural" title="GHC.Natural">Natural</a></li><li class="src short"><a href="#v:partitionNatural">partitionNatural</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Natural.html#t:Natural" title="GHC.Natural">Natural</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Natural.html#t:Natural" title="GHC.Natural">Natural</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="../../ghc/html/libraries/base-4.14.3.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Natural.html#t:Natural" title="GHC.Natural">Natural</a>)</li><li class="src short"><a href="#v:unsafePartitionNatural">unsafePartitionNatural</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a> =&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Natural.html#t:Natural" title="GHC.Natural">Natural</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Natural.html#t:Natural" title="GHC.Natural">Natural</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Natural.html#t:Natural" title="GHC.Natural">Natural</a></li><li class="src short"><a href="#v:inAscendingPartialOrder">inAscendingPartialOrder</a> :: (<a href="../../ghc/html/libraries/base-4.14.3.0/Data-Foldable.html#t:Foldable" title="Data.Foldable">Foldable</a> f, <a href="../../lattices/html/Algebra-PartialOrd.html#t:PartialOrd" title="Algebra.PartialOrd">PartialOrd</a> a) =&gt; f a -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:power">power</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/Prelude.html#t:Integral" title="Prelude">Integral</a> a =&gt; a -&gt; a -&gt; a</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Coalescing values</h1></a><div class="top"><p class="src"><a id="v:padCoalesce" class="def">padCoalesce</a> <a href="src/Cardano.Numeric.Util.html#padCoalesce" class="link">Source</a> <a href="#v:padCoalesce" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <span class="keyword">forall</span> m a. (<a href="../../ghc/html/libraries/base-4.14.3.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> m, <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> m</td><td class="doc"><p>Source list</p></td></tr><tr><td class="src">-&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> a</td><td class="doc"><p>Target list</p></td></tr><tr><td class="src">-&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> m</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Adjusts the source list so that its length is the same as the target list,
   either by padding the list, or by coalescing a subset of the elements,
   while preserving the total sum.</p><p>If the source list is shorter than the target list, this function repeatedly
 inserts <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-Monoid.html#v:mempty" title="Data.Monoid">mempty</a></code> into the list until the desired length has been reached.</p><p>If the source list is longer than the target list, this function repeatedly
 coalesces the smallest pair of elements with <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-Monoid.html#v:-60--62-" title="Data.Monoid">&lt;&gt;</a></code> until the desired length
 has been reached.</p><p>The resulting list is guaranteed to be sorted into ascending order, and the
 sum of the elements is guaranteed to be the same as the sum of elements in
 the source list.</p><p>Examples (shown with ordinary list notation):</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>padCoalesce [Sum 1] (replicate 4 ())
</code></strong>[Sum 0, Sum 0, Sum 0, Sum 1]
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>padCoalesce [Sum (-1)] (replicate 4 ())
</code></strong>[Sum (-1), Sum 0, Sum 0, Sum 0]
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>padCoalesce [Sum 8, Sum 4, Sum 2, Sum 1] (replicate 3 ())
</code></strong>[Sum 3, Sum 4, Sum 8]
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>padCoalesce [Sum 8, Sum 4, Sum 2, Sum 1] (replicate 2 ())
</code></strong>[Sum 7, Sum 8]
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>padCoalesce [Sum 8, Sum 4, Sum 2, Sum 1] (replicate 1 ())
</code></strong>[Sum 15]
</pre></div></div><a href="#g:2" id="g:2"><h1>Partitioning natural numbers</h1></a><div class="top"><p class="src"><a id="v:equipartitionNatural" class="def">equipartitionNatural</a> <a href="src/Cardano.Numeric.Util.html#equipartitionNatural" class="link">Source</a> <a href="#v:equipartitionNatural" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Natural.html#t:Natural" title="GHC.Natural">Natural</a></td><td class="doc"><p>The natural number to be partitioned.</p></td></tr><tr><td class="src">-&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> a</td><td class="doc"><p>Represents the number of portions in which to partition the number.</p></td></tr><tr><td class="src">-&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Natural.html#t:Natural" title="GHC.Natural">Natural</a></td><td class="doc"><p>The partitioned numbers.</p></td></tr></table></div><div class="doc"><p>Computes the equipartition of a natural number into <code>n</code> smaller numbers.</p><p>An <em>equipartition</em> of a natural number <code>n</code> is a <em>partition</em> of that number
 into <code>n</code> smaller numbers whose values differ by no more than 1.</p><p>The resultant list is sorted in ascending order.</p></div></div><div class="top"><p class="src"><a id="v:partitionNatural" class="def">partitionNatural</a> <a href="src/Cardano.Numeric.Util.html#partitionNatural" class="link">Source</a> <a href="#v:partitionNatural" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Natural.html#t:Natural" title="GHC.Natural">Natural</a></td><td class="doc"><p>Natural number to partition</p></td></tr><tr><td class="src">-&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Natural.html#t:Natural" title="GHC.Natural">Natural</a></td><td class="doc"><p>List of weights</p></td></tr><tr><td class="src">-&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="../../ghc/html/libraries/base-4.14.3.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Natural.html#t:Natural" title="GHC.Natural">Natural</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Partitions a natural number into a number of parts, where the size of each
   part is proportional to the size of its corresponding element in the given
   list of weights, and the number of parts is equal to the number of weights.</p><p>Examples:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>partitionNatural 9 (1 :| [1, 1])
</code></strong>Just (3 :| [3, 3])
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>partitionNatural 10 (1 :| [])
</code></strong>10
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>partitionNatural 30 (1 :| [2, 4, 8])
</code></strong>Just (2 :| [4, 8, 16])
</pre><p>Pre-condition: there must be at least one non-zero weight.</p><p>If the pre-condition is not satisfied, this function returns <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code>.</p><p>If the pre-condition is satisfied, this function guarantees that:</p><ol><li><p>The length of the resulting list is identical to the length of the
      specified list:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>fmap length (partitionNatural n weights) == Just (length weights)
</code></strong></pre></li><li><p>The sum of elements in the resulting list is equal to the original
      natural number:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>fmap sum (partitionNatural n weights) == Just n
</code></strong></pre></li><li>The size of each element in the resulting list is within unity of the
      ideal proportion.</li></ol></div></div><div class="top"><p class="src"><a id="v:unsafePartitionNatural" class="def">unsafePartitionNatural</a> <a href="src/Cardano.Numeric.Util.html#unsafePartitionNatural" class="link">Source</a> <a href="#v:unsafePartitionNatural" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Natural.html#t:Natural" title="GHC.Natural">Natural</a></td><td class="doc"><p>Natural number to partition</p></td></tr><tr><td class="src">-&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Natural.html#t:Natural" title="GHC.Natural">Natural</a></td><td class="doc"><p>List of weights</p></td></tr><tr><td class="src">-&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Natural.html#t:Natural" title="GHC.Natural">Natural</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Partitions a natural number into a number of parts, where the size of each
   part is proportional to the size of its corresponding element in the given
   list of weights, and the number of parts is equal to the number of weights.</p><p>Throws a run-time error if the sum of weights is equal to zero.</p></div></div><a href="#g:3" id="g:3"><h1>Partial orders</h1></a><div class="top"><p class="src"><a id="v:inAscendingPartialOrder" class="def">inAscendingPartialOrder</a> :: (<a href="../../ghc/html/libraries/base-4.14.3.0/Data-Foldable.html#t:Foldable" title="Data.Foldable">Foldable</a> f, <a href="../../lattices/html/Algebra-PartialOrd.html#t:PartialOrd" title="Algebra.PartialOrd">PartialOrd</a> a) =&gt; f a -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Cardano.Numeric.Util.html#inAscendingPartialOrder" class="link">Source</a> <a href="#v:inAscendingPartialOrder" class="selflink">#</a></p></div><a href="#g:4" id="g:4"><h1>Monomorphic functions</h1></a><div class="top"><p class="src"><a id="v:power" class="def">power</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/Prelude.html#t:Integral" title="Prelude">Integral</a> a =&gt; a -&gt; a -&gt; a <a href="src/Cardano.Numeric.Util.html#power" class="link">Source</a> <a href="#v:power" class="selflink">#</a></p><div class="doc"><p>Power function where all arguments are of the same type.</p><p>Helps to avoid the use of boilerplate type annotations.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.2</p></div></body></html>