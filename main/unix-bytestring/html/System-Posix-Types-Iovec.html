<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>System.Posix.Types.Iovec</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">unix-bytestring-0.3.7.8: Unix/Posix-specific functions for ByteStrings.</span><ul class="links" id="page-menu"><li><a href="src/System.Posix.Types.Iovec.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>2010--2022 wren romano</td></tr><tr><th>License</th><td>BSD-3-Clause</td></tr><tr><th>Maintainer</th><td>wren@cpan.org</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>non-portable (POSIX.1, XPG4.2; hsc2hs, FFI)</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">System.Posix.Types.Iovec</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">The <code>struct iovec</code> type</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Imports the C <code>struct iovec</code> type and provides conversion between
 <code><a href="System-Posix-Types-Iovec.html#t:CIovec" title="System.Posix.Types.Iovec">CIovec</a></code>s and strict <code><a href="../../bytestring/html/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></code>s.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:CIovec">CIovec</a> = <a href="#v:CIovec">CIovec</a> {<ul class="subs"><li><a href="#v:iov_base">iov_base</a> :: !(<a href="../../ghc/html/libraries/base-4.14.3.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a>)</li><li><a href="#v:iov_len">iov_len</a> :: !<a href="../../ghc/html/libraries/base-4.14.3.0/Foreign-C-Types.html#t:CSize" title="Foreign.C.Types">CSize</a></li></ul>}</li><li class="src short"><a href="#v:unsafeByteString2CIovec">unsafeByteString2CIovec</a> :: <a href="../../bytestring/html/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="System-Posix-Types-Iovec.html#t:CIovec" title="System.Posix.Types.Iovec">CIovec</a></li><li class="src short"><a href="#v:touchByteString">touchByteString</a> :: <a href="../../bytestring/html/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> ()</li><li class="src short"><a href="#v:unsafeUseAsCIovec">unsafeUseAsCIovec</a> :: <a href="../../bytestring/html/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; (<a href="System-Posix-Types-Iovec.html#t:CIovec" title="System.Posix.Types.Iovec">CIovec</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> a) -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> a</li><li class="src short"><a href="#v:useAsCIovec">useAsCIovec</a> :: <a href="../../bytestring/html/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; (<a href="System-Posix-Types-Iovec.html#t:CIovec" title="System.Posix.Types.Iovec">CIovec</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> a) -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> a</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>The <code>struct iovec</code> type</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:CIovec" class="def">CIovec</a> <a href="src/System.Posix.Types.Iovec.html#CIovec" class="link">Source</a> <a href="#t:CIovec" class="selflink">#</a></p><div class="doc"><p>Haskell type representing the C <code>struct iovec</code> type. This is
 exactly like <code><a href="../../ghc/html/libraries/base-4.14.3.0/Foreign-C-String.html#v:CStringLen" title="Foreign.C.String">CStringLen</a></code> except there's actually
 struct definition on the C side.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:CIovec" class="def">CIovec</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:iov_base" class="def">iov_base</a> :: !(<a href="../../ghc/html/libraries/base-4.14.3.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a>)</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:iov_len" class="def">iov_len</a> :: !<a href="../../ghc/html/libraries/base-4.14.3.0/Foreign-C-Types.html#t:CSize" title="Foreign.C.Types">CSize</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:CIovec">Instances</h4><details id="i:CIovec" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:CIovec:Storable:1"></span> <a href="../../ghc/html/libraries/base-4.14.3.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> <a href="System-Posix-Types-Iovec.html#t:CIovec" title="System.Posix.Types.Iovec">CIovec</a></span> <a href="src/System.Posix.Types.Iovec.html#line-63" class="link">Source</a> <a href="#t:CIovec" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:CIovec:Storable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="System-Posix-Types-Iovec.html">System.Posix.Types.Iovec</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:sizeOf">sizeOf</a> :: <a href="System-Posix-Types-Iovec.html#t:CIovec" title="System.Posix.Types.Iovec">CIovec</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:sizeOf" class="selflink">#</a></p><p class="src"><a href="#v:alignment">alignment</a> :: <a href="System-Posix-Types-Iovec.html#t:CIovec" title="System.Posix.Types.Iovec">CIovec</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:alignment" class="selflink">#</a></p><p class="src"><a href="#v:peekElemOff">peekElemOff</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="System-Posix-Types-Iovec.html#t:CIovec" title="System.Posix.Types.Iovec">CIovec</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="System-Posix-Types-Iovec.html#t:CIovec" title="System.Posix.Types.Iovec">CIovec</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:peekElemOff" class="selflink">#</a></p><p class="src"><a href="#v:pokeElemOff">pokeElemOff</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="System-Posix-Types-Iovec.html#t:CIovec" title="System.Posix.Types.Iovec">CIovec</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="System-Posix-Types-Iovec.html#t:CIovec" title="System.Posix.Types.Iovec">CIovec</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> () <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:pokeElemOff" class="selflink">#</a></p><p class="src"><a href="#v:peekByteOff">peekByteOff</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> b -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="System-Posix-Types-Iovec.html#t:CIovec" title="System.Posix.Types.Iovec">CIovec</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:peekByteOff" class="selflink">#</a></p><p class="src"><a href="#v:pokeByteOff">pokeByteOff</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> b -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="System-Posix-Types-Iovec.html#t:CIovec" title="System.Posix.Types.Iovec">CIovec</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> () <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:pokeByteOff" class="selflink">#</a></p><p class="src"><a href="#v:peek">peek</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="System-Posix-Types-Iovec.html#t:CIovec" title="System.Posix.Types.Iovec">CIovec</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="System-Posix-Types-Iovec.html#t:CIovec" title="System.Posix.Types.Iovec">CIovec</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:peek" class="selflink">#</a></p><p class="src"><a href="#v:poke">poke</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="System-Posix-Types-Iovec.html#t:CIovec" title="System.Posix.Types.Iovec">CIovec</a> -&gt; <a href="System-Posix-Types-Iovec.html#t:CIovec" title="System.Posix.Types.Iovec">CIovec</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> () <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:poke" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:unsafeByteString2CIovec" class="def">unsafeByteString2CIovec</a> :: <a href="../../bytestring/html/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="System-Posix-Types-Iovec.html#t:CIovec" title="System.Posix.Types.Iovec">CIovec</a> <a href="src/System.Posix.Types.Iovec.html#unsafeByteString2CIovec" class="link">Source</a> <a href="#v:unsafeByteString2CIovec" class="selflink">#</a></p><div class="doc"><p><em>O(1) construction</em> Convert a <code>ByteString</code> into an <code>CIovec</code>.</p><p>This function is <em>unsafe</em> in two ways:</p><ul><li>After calling this function the <code>CIovec</code> shares the underlying
 byte buffer with the original <code>ByteString</code>. Thus, modifying the
 <code>CIovec</code> either in C or using poke will cause the contents of
 the <code>ByteString</code> to change, breaking referential transparency.
 Other <code>ByteStrings</code> created by sharing (such as those produced
 via <code><a href="../../bytestring/html/Data-ByteString.html#v:take" title="Data.ByteString">take</a></code> or <code><a href="../../bytestring/html/Data-ByteString.html#v:drop" title="Data.ByteString">drop</a></code>) will also reflect these changes.</li><li>Also, even though the <code>CIovec</code> shares the underlying byte
 buffer, it does so in a way that will not keep the original
 <code>ByteString</code> alive with respect to garbage collection. Thus, the
 byte buffer could be collected out from under the <code>CIovec</code>. To
 prevent this, you must use <code><a href="System-Posix-Types-Iovec.html#v:touchByteString" title="System.Posix.Types.Iovec">touchByteString</a></code> after the last point
 where the <code>CIovec</code> is needed.</li></ul></div></div><div class="top"><p class="src"><a id="v:touchByteString" class="def">touchByteString</a> :: <a href="../../bytestring/html/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> () <a href="src/System.Posix.Types.Iovec.html#touchByteString" class="link">Source</a> <a href="#v:touchByteString" class="selflink">#</a></p><div class="doc"><p>Keep the <code>ByteString</code> alive. See <code><a href="System-Posix-Types-Iovec.html#v:unsafeByteString2CIovec" title="System.Posix.Types.Iovec">unsafeByteString2CIovec</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:unsafeUseAsCIovec" class="def">unsafeUseAsCIovec</a> :: <a href="../../bytestring/html/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; (<a href="System-Posix-Types-Iovec.html#t:CIovec" title="System.Posix.Types.Iovec">CIovec</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> a) -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> a <a href="src/System.Posix.Types.Iovec.html#unsafeUseAsCIovec" class="link">Source</a> <a href="#v:unsafeUseAsCIovec" class="selflink">#</a></p><div class="doc"><p><em>O(1) construction</em> Use a <code>ByteString</code> with a function requiring
 a <code>CIovec</code>.</p><p>This function does zero copying, and merely unwraps a <code>ByteString</code>
 to appear as an <code>CIovec</code>. It is <em>unsafe</em> in the same way as
 <code><a href="System-Posix-Types-Iovec.html#v:unsafeByteString2CIovec" title="System.Posix.Types.Iovec">unsafeByteString2CIovec</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:useAsCIovec" class="def">useAsCIovec</a> :: <a href="../../bytestring/html/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; (<a href="System-Posix-Types-Iovec.html#t:CIovec" title="System.Posix.Types.Iovec">CIovec</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> a) -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> a <a href="src/System.Posix.Types.Iovec.html#useAsCIovec" class="link">Source</a> <a href="#v:useAsCIovec" class="selflink">#</a></p><div class="doc"><p><em>O(n) construction</em> Use a <code>ByteString</code> with a function requiring
 a <code>CIovec</code>.</p><p>As with <code><a href="../../bytestring/html/Data-ByteString.html#v:useAsCString" title="Data.ByteString">useAsCString</a></code> and <code><a href="../../bytestring/html/Data-ByteString.html#v:useAsCStringLen" title="Data.ByteString">useAsCStringLen</a></code>, this function
 makes a copy of the original <code>ByteString</code> via <code>memcpy(3)</code>. The
 copy will be freed automatically. See <code><a href="System-Posix-Types-Iovec.html#v:unsafeUseAsCIovec" title="System.Posix.Types.Iovec">unsafeUseAsCIovec</a></code> for a
 zero-copying version.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.2</p></div></body></html>