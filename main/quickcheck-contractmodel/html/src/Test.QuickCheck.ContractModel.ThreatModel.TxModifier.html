<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# OPTIONS_GHC -Wno-incomplete-uni-patterns #-}</span><span>
</span><span id="line-2"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Test.QuickCheck.ContractModel.ThreatModel.TxModifier</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier">Cardano.Api</span></a></span><span>
</span><span id="line-5"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier">Cardano.Api.Shelley</span></a></span><span>
</span><span id="line-6"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-alonzo/html/src"><span class="hs-identifier">Cardano.Ledger.Alonzo.Tx</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Ledger</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-alonzo/html/src"><span class="hs-identifier">indexOf</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-7"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-alonzo/html/src"><span class="hs-identifier">Cardano.Ledger.Alonzo.TxWitness</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Ledger</span></span><span>
</span><span id="line-8"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-babbage/html/src"><span class="hs-identifier">Cardano.Ledger.Babbage.TxBody</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Ledger</span></span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Cardano.Ledger.Serialization</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CBOR</span></span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Coerce</span></a></span><span>
</span><span id="line-11"></span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-alonzo/html/src"><span class="hs-identifier">Cardano.Ledger.Alonzo.Scripts</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Ledger</span></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier">Data.Map</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Maybe</span></a></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier">Data.Maybe.Strict</span></a></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier">Data.Sequence.Strict</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Seq</span></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-18"></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.Internal.Common.html"><span class="hs-identifier">Test.QuickCheck.ContractModel.Internal.Common</span></a></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html"><span class="hs-identifier">Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api</span></a></span><span>
</span><span id="line-21"></span><span>
</span><span id="line-22"></span><span class="hs-comment">-- | A transaction output paired with its index in the transaction.</span><span>
</span><span id="line-23"></span><span class="hs-keyword">data</span><span> </span><span id="Output"><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#Output"><span class="hs-identifier hs-var">Output</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Output"><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#Output"><span class="hs-identifier hs-var">Output</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="outputTxOut"><span class="annot"><span class="annottext">Output -&gt; TxOut CtxTx Era
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#outputTxOut"><span class="hs-identifier hs-var hs-var">outputTxOut</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxOut</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">CtxTx</span></a></span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.Internal.Common.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span>
</span><span id="line-24"></span><span>                     </span><span class="hs-special">,</span><span> </span><span id="outputIx"><span class="annot"><span class="annottext">Output -&gt; TxIx
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#outputIx"><span class="hs-identifier hs-var hs-var">outputIx</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxIx</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-25"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679483493"><span id="local-6989586621679483495"><span id="local-6989586621679483497"><span class="annot"><span class="annottext">Int -&gt; Output -&gt; ShowS
[Output] -&gt; ShowS
Output -&gt; String
(Int -&gt; Output -&gt; ShowS)
-&gt; (Output -&gt; String) -&gt; ([Output] -&gt; ShowS) -&gt; Show Output
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [Output] -&gt; ShowS
$cshowList :: [Output] -&gt; ShowS
show :: Output -&gt; String
$cshow :: Output -&gt; String
showsPrec :: Int -&gt; Output -&gt; ShowS
$cshowsPrec :: Int -&gt; Output -&gt; ShowS
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span>
</span><span id="line-28"></span><span class="hs-comment">-- | A transaction input reference togheter with the corresponding `TxOut` from the `UTxO` set.</span><span>
</span><span id="line-29"></span><span class="hs-keyword">data</span><span> </span><span id="Input"><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#Input"><span class="hs-identifier hs-var">Input</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Input"><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#Input"><span class="hs-identifier hs-var">Input</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="inputTxOut"><span class="annot"><span class="annottext">Input -&gt; TxOut CtxUTxO Era
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#inputTxOut"><span class="hs-identifier hs-var hs-var">inputTxOut</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxOut</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">CtxUTxO</span></a></span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.Internal.Common.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span>
</span><span id="line-30"></span><span>                   </span><span class="hs-special">,</span><span> </span><span id="inputTxIn"><span class="annot"><span class="annottext">Input -&gt; TxIn
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#inputTxIn"><span class="hs-identifier hs-var hs-var">inputTxIn</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-31"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679483483"><span id="local-6989586621679483485"><span id="local-6989586621679483487"><span class="annot"><span class="annottext">Int -&gt; Input -&gt; ShowS
[Input] -&gt; ShowS
Input -&gt; String
(Int -&gt; Input -&gt; ShowS)
-&gt; (Input -&gt; String) -&gt; ([Input] -&gt; ShowS) -&gt; Show Input
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [Input] -&gt; ShowS
$cshowList :: [Input] -&gt; ShowS
show :: Input -&gt; String
$cshow :: Input -&gt; String
showsPrec :: Int -&gt; Input -&gt; ShowS
$cshowsPrec :: Int -&gt; Input -&gt; ShowS
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span class="hs-comment">-- | Functions common to both `Input`s and `Output`s.</span><span>
</span><span id="line-34"></span><span class="hs-keyword">class</span><span> </span><span id="IsInputOrOutput"><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#IsInputOrOutput"><span class="hs-identifier hs-var">IsInputOrOutput</span></a></span></span><span> </span><span id="local-6989586621679483650"><span class="annot"><a href="#local-6989586621679483650"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-35"></span><span>  </span><span class="hs-comment">-- | Change the target address of an input or an output. For outputs this means redirecting an</span><span>
</span><span id="line-36"></span><span>  </span><span class="hs-comment">--   output to a different address, and for inputs it means modifying the UTxO set, changing the</span><span>
</span><span id="line-37"></span><span>  </span><span class="hs-comment">--   owner of the given input.</span><span>
</span><span id="line-38"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-39"></span><span>  </span><span class="hs-comment">--   /Note: Does not work for script inputs./</span><span>
</span><span id="line-40"></span><span>  </span><span id="changeAddressOf"><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#changeAddressOf"><span class="hs-identifier hs-type">changeAddressOf</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679483650"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">AddressAny</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxModifier"><span class="hs-identifier hs-type">TxModifier</span></a></span><span>
</span><span id="line-41"></span><span>
</span><span id="line-42"></span><span>  </span><span class="hs-comment">-- | Change the value of an input or an output.</span><span>
</span><span id="line-43"></span><span>  </span><span id="changeValueOf"><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#changeValueOf"><span class="hs-identifier hs-type">changeValueOf</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679483650"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxModifier"><span class="hs-identifier hs-type">TxModifier</span></a></span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span>  </span><span class="hs-comment">-- | Change the datum on an input or an output.</span><span>
</span><span id="line-46"></span><span>  </span><span id="changeDatumOf"><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#changeDatumOf"><span class="hs-identifier hs-type">changeDatumOf</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679483650"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#Datum"><span class="hs-identifier hs-type">Datum</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxModifier"><span class="hs-identifier hs-type">TxModifier</span></a></span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span>  </span><span class="hs-comment">-- | Get the address (pubkey or script address) of an input or an output.</span><span>
</span><span id="line-49"></span><span>  </span><span id="addressOf"><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#addressOf"><span class="hs-identifier hs-type">addressOf</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679483650"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">AddressAny</span></a></span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span>  </span><span class="hs-comment">-- | Get the value at an input or an output.</span><span>
</span><span id="line-52"></span><span>  </span><span id="valueOf"><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#valueOf"><span class="hs-identifier hs-type">valueOf</span></a></span></span><span>         </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679483650"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span>
</span><span id="line-53"></span><span>
</span><span id="line-54"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#IsInputOrOutput"><span class="hs-identifier hs-type">IsInputOrOutput</span></a></span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#Output"><span class="hs-identifier hs-type">Output</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-55"></span><span>  </span><span id="local-6989586621679483471"><span class="annot"><span class="annottext">changeAddressOf :: Output -&gt; AddressAny -&gt; TxModifier
</span><a href="#local-6989586621679483471"><span class="hs-identifier hs-var hs-var hs-var hs-var">changeAddressOf</span></a></span></span><span> </span><span id="local-6989586621679483470"><span class="annot"><span class="annottext">Output
</span><a href="#local-6989586621679483470"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span id="local-6989586621679483469"><span class="annot"><span class="annottext">AddressAny
</span><a href="#local-6989586621679483469"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxMod -&gt; TxModifier
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#txMod"><span class="hs-identifier hs-var">txMod</span></a></span><span> </span><span class="annot"><span class="annottext">(TxMod -&gt; TxModifier) -&gt; TxMod -&gt; TxModifier
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxIx -&gt; Maybe AddressAny -&gt; Maybe Value -&gt; Maybe Datum -&gt; TxMod
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#ChangeOutput"><span class="hs-identifier hs-var">ChangeOutput</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Output -&gt; TxIx
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#outputIx"><span class="hs-identifier hs-var hs-var">outputIx</span></a></span><span> </span><span class="annot"><span class="annottext">Output
</span><a href="#local-6989586621679483470"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AddressAny -&gt; Maybe AddressAny
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">AddressAny
</span><a href="#local-6989586621679483469"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Value
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Datum
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-56"></span><span>  </span><span id="local-6989586621679483466"><span class="annot"><span class="annottext">changeValueOf :: Output -&gt; Value -&gt; TxModifier
</span><a href="#local-6989586621679483466"><span class="hs-identifier hs-var hs-var hs-var hs-var">changeValueOf</span></a></span></span><span> </span><span id="local-6989586621679483465"><span class="annot"><span class="annottext">Output
</span><a href="#local-6989586621679483465"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span id="local-6989586621679483464"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679483464"><span class="hs-identifier hs-var">v</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxMod -&gt; TxModifier
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#txMod"><span class="hs-identifier hs-var">txMod</span></a></span><span> </span><span class="annot"><span class="annottext">(TxMod -&gt; TxModifier) -&gt; TxMod -&gt; TxModifier
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxIx -&gt; Maybe AddressAny -&gt; Maybe Value -&gt; Maybe Datum -&gt; TxMod
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#ChangeOutput"><span class="hs-identifier hs-var">ChangeOutput</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Output -&gt; TxIx
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#outputIx"><span class="hs-identifier hs-var hs-var">outputIx</span></a></span><span> </span><span class="annot"><span class="annottext">Output
</span><a href="#local-6989586621679483465"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe AddressAny
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value -&gt; Maybe Value
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679483464"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Datum
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-57"></span><span>  </span><span id="local-6989586621679483463"><span class="annot"><span class="annottext">changeDatumOf :: Output -&gt; Datum -&gt; TxModifier
</span><a href="#local-6989586621679483463"><span class="hs-identifier hs-var hs-var hs-var hs-var">changeDatumOf</span></a></span></span><span> </span><span id="local-6989586621679483462"><span class="annot"><span class="annottext">Output
</span><a href="#local-6989586621679483462"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span id="local-6989586621679483461"><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679483461"><span class="hs-identifier hs-var">d</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxMod -&gt; TxModifier
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#txMod"><span class="hs-identifier hs-var">txMod</span></a></span><span> </span><span class="annot"><span class="annottext">(TxMod -&gt; TxModifier) -&gt; TxMod -&gt; TxModifier
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxIx -&gt; Maybe AddressAny -&gt; Maybe Value -&gt; Maybe Datum -&gt; TxMod
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#ChangeOutput"><span class="hs-identifier hs-var">ChangeOutput</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Output -&gt; TxIx
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#outputIx"><span class="hs-identifier hs-var hs-var">outputIx</span></a></span><span> </span><span class="annot"><span class="annottext">Output
</span><a href="#local-6989586621679483462"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe AddressAny
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Value
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Datum -&gt; Maybe Datum
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679483461"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span>  </span><span id="local-6989586621679483460"><span class="annot"><span class="annottext">addressOf :: Output -&gt; AddressAny
</span><a href="#local-6989586621679483460"><span class="hs-identifier hs-var hs-var hs-var hs-var">addressOf</span></a></span></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxOut CtxTx Era -&gt; AddressAny
forall ctx. TxOut ctx Era -&gt; AddressAny
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#addressOfTxOut"><span class="hs-identifier hs-var">addressOfTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">(TxOut CtxTx Era -&gt; AddressAny)
-&gt; (Output -&gt; TxOut CtxTx Era) -&gt; Output -&gt; AddressAny
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Output -&gt; TxOut CtxTx Era
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#outputTxOut"><span class="hs-identifier hs-var hs-var">outputTxOut</span></a></span><span>
</span><span id="line-59"></span><span>  </span><span id="local-6989586621679483457"><span class="annot"><span class="annottext">valueOf :: Output -&gt; Value
</span><a href="#local-6989586621679483457"><span class="hs-identifier hs-var hs-var hs-var hs-var">valueOf</span></a></span></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxOut CtxTx Era -&gt; Value
forall ctx. TxOut ctx Era -&gt; Value
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#valueOfTxOut"><span class="hs-identifier hs-var">valueOfTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">(TxOut CtxTx Era -&gt; Value)
-&gt; (Output -&gt; TxOut CtxTx Era) -&gt; Output -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Output -&gt; TxOut CtxTx Era
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#outputTxOut"><span class="hs-identifier hs-var hs-var">outputTxOut</span></a></span><span>
</span><span id="line-60"></span><span>
</span><span id="line-61"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#IsInputOrOutput"><span class="hs-identifier hs-type">IsInputOrOutput</span></a></span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#Input"><span class="hs-identifier hs-type">Input</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-62"></span><span>  </span><span id="local-6989586621679483450"><span class="annot"><span class="annottext">changeAddressOf :: Input -&gt; AddressAny -&gt; TxModifier
</span><a href="#local-6989586621679483450"><span class="hs-identifier hs-var hs-var hs-var hs-var">changeAddressOf</span></a></span></span><span> </span><span id="local-6989586621679483449"><span class="annot"><span class="annottext">Input
</span><a href="#local-6989586621679483449"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679483448"><span class="annot"><span class="annottext">AddressAny
</span><a href="#local-6989586621679483448"><span class="hs-identifier hs-var">a</span></a></span></span><span>
</span><span id="line-63"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">AddressAny -&gt; Bool
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#isKeyAddressAny"><span class="hs-identifier hs-var">isKeyAddressAny</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Input -&gt; AddressAny
forall t. IsInputOrOutput t =&gt; t -&gt; AddressAny
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#addressOf"><span class="hs-identifier hs-var">addressOf</span></a></span><span> </span><span class="annot"><span class="annottext">Input
</span><a href="#local-6989586621679483449"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxMod -&gt; TxModifier
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#txMod"><span class="hs-identifier hs-var">txMod</span></a></span><span> </span><span class="annot"><span class="annottext">(TxMod -&gt; TxModifier) -&gt; TxMod -&gt; TxModifier
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; Maybe AddressAny -&gt; Maybe Value -&gt; Maybe Datum -&gt; TxMod
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#ChangeInput"><span class="hs-identifier hs-var">ChangeInput</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Input -&gt; TxIn
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#inputTxIn"><span class="hs-identifier hs-var hs-var">inputTxIn</span></a></span><span> </span><span class="annot"><span class="annottext">Input
</span><a href="#local-6989586621679483449"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AddressAny -&gt; Maybe AddressAny
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">AddressAny
</span><a href="#local-6989586621679483448"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Value
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Datum
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-64"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span>                     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; TxModifier
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Cannot changeAddressOf ScriptInput&quot;</span></span><span>
</span><span id="line-65"></span><span>  </span><span id="local-6989586621679483444"><span class="annot"><span class="annottext">changeValueOf :: Input -&gt; Value -&gt; TxModifier
</span><a href="#local-6989586621679483444"><span class="hs-identifier hs-var hs-var hs-var hs-var">changeValueOf</span></a></span></span><span> </span><span id="local-6989586621679483443"><span class="annot"><span class="annottext">Input
</span><a href="#local-6989586621679483443"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679483442"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679483442"><span class="hs-identifier hs-var">v</span></a></span></span><span>
</span><span id="line-66"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">AddressAny -&gt; Bool
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#isKeyAddressAny"><span class="hs-identifier hs-var">isKeyAddressAny</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Input -&gt; AddressAny
forall t. IsInputOrOutput t =&gt; t -&gt; AddressAny
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#addressOf"><span class="hs-identifier hs-var">addressOf</span></a></span><span> </span><span class="annot"><span class="annottext">Input
</span><a href="#local-6989586621679483443"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxMod -&gt; TxModifier
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#txMod"><span class="hs-identifier hs-var">txMod</span></a></span><span> </span><span class="annot"><span class="annottext">(TxMod -&gt; TxModifier) -&gt; TxMod -&gt; TxModifier
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; Maybe AddressAny -&gt; Maybe Value -&gt; Maybe Datum -&gt; TxMod
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#ChangeInput"><span class="hs-identifier hs-var">ChangeInput</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Input -&gt; TxIn
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#inputTxIn"><span class="hs-identifier hs-var hs-var">inputTxIn</span></a></span><span> </span><span class="annot"><span class="annottext">Input
</span><a href="#local-6989586621679483443"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe AddressAny
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value -&gt; Maybe Value
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679483442"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Datum
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-67"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span>                     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxMod -&gt; TxModifier
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#txMod"><span class="hs-identifier hs-var">txMod</span></a></span><span> </span><span class="annot"><span class="annottext">(TxMod -&gt; TxModifier) -&gt; TxMod -&gt; TxModifier
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; Maybe Value -&gt; Maybe Datum -&gt; Maybe Redeemer -&gt; TxMod
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#ChangeScriptInput"><span class="hs-identifier hs-var">ChangeScriptInput</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Input -&gt; TxIn
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#inputTxIn"><span class="hs-identifier hs-var hs-var">inputTxIn</span></a></span><span> </span><span class="annot"><span class="annottext">Input
</span><a href="#local-6989586621679483443"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value -&gt; Maybe Value
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679483442"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Datum
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Redeemer
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-68"></span><span>  </span><span id="local-6989586621679483440"><span class="annot"><span class="annottext">changeDatumOf :: Input -&gt; Datum -&gt; TxModifier
</span><a href="#local-6989586621679483440"><span class="hs-identifier hs-var hs-var hs-var hs-var">changeDatumOf</span></a></span></span><span> </span><span id="local-6989586621679483439"><span class="annot"><span class="annottext">Input
</span><a href="#local-6989586621679483439"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679483438"><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679483438"><span class="hs-identifier hs-var">d</span></a></span></span><span>
</span><span id="line-69"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">AddressAny -&gt; Bool
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#isKeyAddressAny"><span class="hs-identifier hs-var">isKeyAddressAny</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Input -&gt; AddressAny
forall t. IsInputOrOutput t =&gt; t -&gt; AddressAny
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#addressOf"><span class="hs-identifier hs-var">addressOf</span></a></span><span> </span><span class="annot"><span class="annottext">Input
</span><a href="#local-6989586621679483439"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxMod -&gt; TxModifier
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#txMod"><span class="hs-identifier hs-var">txMod</span></a></span><span> </span><span class="annot"><span class="annottext">(TxMod -&gt; TxModifier) -&gt; TxMod -&gt; TxModifier
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; Maybe AddressAny -&gt; Maybe Value -&gt; Maybe Datum -&gt; TxMod
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#ChangeInput"><span class="hs-identifier hs-var">ChangeInput</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Input -&gt; TxIn
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#inputTxIn"><span class="hs-identifier hs-var hs-var">inputTxIn</span></a></span><span> </span><span class="annot"><span class="annottext">Input
</span><a href="#local-6989586621679483439"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe AddressAny
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Value
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Datum -&gt; Maybe Datum
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679483438"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span>                     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxMod -&gt; TxModifier
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#txMod"><span class="hs-identifier hs-var">txMod</span></a></span><span> </span><span class="annot"><span class="annottext">(TxMod -&gt; TxModifier) -&gt; TxMod -&gt; TxModifier
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; Maybe Value -&gt; Maybe Datum -&gt; Maybe Redeemer -&gt; TxMod
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#ChangeScriptInput"><span class="hs-identifier hs-var">ChangeScriptInput</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Input -&gt; TxIn
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#inputTxIn"><span class="hs-identifier hs-var hs-var">inputTxIn</span></a></span><span> </span><span class="annot"><span class="annottext">Input
</span><a href="#local-6989586621679483439"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Value
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Datum -&gt; Maybe Datum
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679483438"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Redeemer
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-71"></span><span>  </span><span id="local-6989586621679483437"><span class="annot"><span class="annottext">addressOf :: Input -&gt; AddressAny
</span><a href="#local-6989586621679483437"><span class="hs-identifier hs-var hs-var hs-var hs-var">addressOf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxOut CtxUTxO Era -&gt; AddressAny
forall ctx. TxOut ctx Era -&gt; AddressAny
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#addressOfTxOut"><span class="hs-identifier hs-var">addressOfTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">(TxOut CtxUTxO Era -&gt; AddressAny)
-&gt; (Input -&gt; TxOut CtxUTxO Era) -&gt; Input -&gt; AddressAny
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Input -&gt; TxOut CtxUTxO Era
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#inputTxOut"><span class="hs-identifier hs-var hs-var">inputTxOut</span></a></span><span>
</span><span id="line-72"></span><span>  </span><span id="local-6989586621679483436"><span class="annot"><span class="annottext">valueOf :: Input -&gt; Value
</span><a href="#local-6989586621679483436"><span class="hs-identifier hs-var hs-var hs-var hs-var">valueOf</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxOut CtxUTxO Era -&gt; Value
forall ctx. TxOut ctx Era -&gt; Value
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#valueOfTxOut"><span class="hs-identifier hs-var">valueOfTxOut</span></a></span><span>   </span><span class="annot"><span class="annottext">(TxOut CtxUTxO Era -&gt; Value)
-&gt; (Input -&gt; TxOut CtxUTxO Era) -&gt; Input -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Input -&gt; TxOut CtxUTxO Era
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#inputTxOut"><span class="hs-identifier hs-var hs-var">inputTxOut</span></a></span><span>
</span><span id="line-73"></span><span>
</span><span id="line-74"></span><span class="hs-comment">-- | Type synonym for datums. The `CtxTx` context means that the actual datum value can be present,</span><span>
</span><span id="line-75"></span><span class="hs-comment">--   not just the hash.</span><span>
</span><span id="line-76"></span><span class="hs-keyword">type</span><span> </span><span id="Datum"><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#Datum"><span class="hs-identifier hs-var">Datum</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxOutDatum</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">CtxTx</span></a></span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.Internal.Common.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span>
</span><span id="line-77"></span><span>
</span><span id="line-78"></span><span class="hs-comment">-- | Redeemers are plain `ScriptData`.</span><span>
</span><span id="line-79"></span><span class="hs-keyword">type</span><span> </span><span id="Redeemer"><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#Redeemer"><span class="hs-identifier hs-var">Redeemer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">ScriptData</span></a></span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span class="hs-comment">-- | The type of transaction modifiers. When combined using the monoid instance, individual</span><span>
</span><span id="line-82"></span><span class="hs-comment">--   modifications are applied in left-to-right order.</span><span>
</span><span id="line-83"></span><span class="hs-keyword">newtype</span><span> </span><span id="TxModifier"><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxModifier"><span class="hs-identifier hs-var">TxModifier</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TxModifier"><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxModifier"><span class="hs-identifier hs-var">TxModifier</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxMod"><span class="hs-identifier hs-type">TxMod</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-84"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679483428"><span id="local-6989586621679483430"><span id="local-6989586621679483432"><span class="annot"><span class="annottext">b -&gt; TxModifier -&gt; TxModifier
NonEmpty TxModifier -&gt; TxModifier
TxModifier -&gt; TxModifier -&gt; TxModifier
(TxModifier -&gt; TxModifier -&gt; TxModifier)
-&gt; (NonEmpty TxModifier -&gt; TxModifier)
-&gt; (forall b. Integral b =&gt; b -&gt; TxModifier -&gt; TxModifier)
-&gt; Semigroup TxModifier
forall b. Integral b =&gt; b -&gt; TxModifier -&gt; TxModifier
forall a.
(a -&gt; a -&gt; a)
-&gt; (NonEmpty a -&gt; a)
-&gt; (forall b. Integral b =&gt; b -&gt; a -&gt; a)
-&gt; Semigroup a
stimes :: b -&gt; TxModifier -&gt; TxModifier
$cstimes :: forall b. Integral b =&gt; b -&gt; TxModifier -&gt; TxModifier
sconcat :: NonEmpty TxModifier -&gt; TxModifier
$csconcat :: NonEmpty TxModifier -&gt; TxModifier
&lt;&gt; :: TxModifier -&gt; TxModifier -&gt; TxModifier
$c&lt;&gt; :: TxModifier -&gt; TxModifier -&gt; TxModifier
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Semigroup</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679483420"><span id="local-6989586621679483422"><span id="local-6989586621679483424"><span class="annot"><span class="annottext">Semigroup TxModifier
TxModifier
Semigroup TxModifier
-&gt; TxModifier
-&gt; (TxModifier -&gt; TxModifier -&gt; TxModifier)
-&gt; ([TxModifier] -&gt; TxModifier)
-&gt; Monoid TxModifier
[TxModifier] -&gt; TxModifier
TxModifier -&gt; TxModifier -&gt; TxModifier
forall a.
Semigroup a -&gt; a -&gt; (a -&gt; a -&gt; a) -&gt; ([a] -&gt; a) -&gt; Monoid a
mconcat :: [TxModifier] -&gt; TxModifier
$cmconcat :: [TxModifier] -&gt; TxModifier
mappend :: TxModifier -&gt; TxModifier -&gt; TxModifier
$cmappend :: TxModifier -&gt; TxModifier -&gt; TxModifier
mempty :: TxModifier
$cmempty :: TxModifier
$cp1Monoid :: Semigroup TxModifier
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monoid</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-85"></span><span>
</span><span id="line-86"></span><span class="hs-keyword">data</span><span> </span><span id="TxMod"><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxMod"><span class="hs-identifier hs-var">TxMod</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span>  </span><span id="RemoveInput"><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#RemoveInput"><span class="hs-identifier hs-var">RemoveInput</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span>
</span><span id="line-89"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxMod"><span class="hs-identifier hs-type">TxMod</span></a></span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span>  </span><span id="RemoveOutput"><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#RemoveOutput"><span class="hs-identifier hs-var">RemoveOutput</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxIx</span></a></span><span>
</span><span id="line-92"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxMod"><span class="hs-identifier hs-type">TxMod</span></a></span><span>
</span><span id="line-93"></span><span>
</span><span id="line-94"></span><span>  </span><span id="ChangeOutput"><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#ChangeOutput"><span class="hs-identifier hs-var">ChangeOutput</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxIx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">AddressAny</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#Datum"><span class="hs-identifier hs-type">Datum</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxMod"><span class="hs-identifier hs-type">TxMod</span></a></span><span>
</span><span id="line-95"></span><span>  </span><span id="ChangeInput"><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#ChangeInput"><span class="hs-identifier hs-var">ChangeInput</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">AddressAny</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#Datum"><span class="hs-identifier hs-type">Datum</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxMod"><span class="hs-identifier hs-type">TxMod</span></a></span><span>
</span><span id="line-96"></span><span>
</span><span id="line-97"></span><span>  </span><span id="ChangeScriptInput"><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#ChangeScriptInput"><span class="hs-identifier hs-var">ChangeScriptInput</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span>
</span><span id="line-98"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span>
</span><span id="line-99"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#Datum"><span class="hs-identifier hs-type">Datum</span></a></span><span>
</span><span id="line-100"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#Redeemer"><span class="hs-identifier hs-type">Redeemer</span></a></span><span>
</span><span id="line-101"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxMod"><span class="hs-identifier hs-type">TxMod</span></a></span><span>
</span><span id="line-102"></span><span>
</span><span id="line-103"></span><span>  </span><span id="ChangeValidityRange"><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#ChangeValidityRange"><span class="hs-identifier hs-var">ChangeValidityRange</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxValidityLowerBound</span></a></span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.Internal.Common.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-104"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxValidityUpperBound</span></a></span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.Internal.Common.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-105"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxMod"><span class="hs-identifier hs-type">TxMod</span></a></span><span>
</span><span id="line-106"></span><span>
</span><span id="line-107"></span><span>  </span><span id="AddOutput"><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#AddOutput"><span class="hs-identifier hs-var">AddOutput</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">AddressAny</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#Datum"><span class="hs-identifier hs-type">Datum</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxMod"><span class="hs-identifier hs-type">TxMod</span></a></span><span>
</span><span id="line-108"></span><span>  </span><span id="AddInput"><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#AddInput"><span class="hs-identifier hs-var">AddInput</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">AddressAny</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#Datum"><span class="hs-identifier hs-type">Datum</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxMod"><span class="hs-identifier hs-type">TxMod</span></a></span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span>  </span><span id="AddPlutusScriptInput"><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#AddPlutusScriptInput"><span class="hs-identifier hs-var">AddPlutusScriptInput</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">PlutusScript</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">PlutusScriptV2</span></a></span><span>
</span><span id="line-111"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span>
</span><span id="line-112"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#Datum"><span class="hs-identifier hs-type">Datum</span></a></span><span>
</span><span id="line-113"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#Redeemer"><span class="hs-identifier hs-type">Redeemer</span></a></span><span>
</span><span id="line-114"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxMod"><span class="hs-identifier hs-type">TxMod</span></a></span><span>
</span><span id="line-115"></span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span>  </span><span id="AddSimpleScriptInput"><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#AddSimpleScriptInput"><span class="hs-identifier hs-var">AddSimpleScriptInput</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">SimpleScript</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">SimpleScriptV2</span></a></span><span>
</span><span id="line-118"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span>
</span><span id="line-119"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxMod"><span class="hs-identifier hs-type">TxMod</span></a></span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span>  </span><span id="ReplaceTx"><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#ReplaceTx"><span class="hs-identifier hs-var">ReplaceTx</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.Internal.Common.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">UTxO</span></a></span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.Internal.Common.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxMod"><span class="hs-identifier hs-type">TxMod</span></a></span><span>
</span><span id="line-122"></span><span>
</span><span id="line-123"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679483405"><span id="local-6989586621679483407"><span id="local-6989586621679483409"><span class="annot"><span class="annottext">Int -&gt; TxMod -&gt; ShowS
[TxMod] -&gt; ShowS
TxMod -&gt; String
(Int -&gt; TxMod -&gt; ShowS)
-&gt; (TxMod -&gt; String) -&gt; ([TxMod] -&gt; ShowS) -&gt; Show TxMod
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [TxMod] -&gt; ShowS
$cshowList :: [TxMod] -&gt; ShowS
show :: TxMod -&gt; String
$cshow :: TxMod -&gt; String
showsPrec :: Int -&gt; TxMod -&gt; ShowS
$cshowsPrec :: Int -&gt; TxMod -&gt; ShowS
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-124"></span><span>
</span><span id="line-125"></span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#txMod"><span class="hs-identifier hs-type">txMod</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxMod"><span class="hs-identifier hs-type">TxMod</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxModifier"><span class="hs-identifier hs-type">TxModifier</span></a></span><span>
</span><span id="line-126"></span><span id="txMod"><span class="annot"><span class="annottext">txMod :: TxMod -&gt; TxModifier
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#txMod"><span class="hs-identifier hs-var hs-var">txMod</span></a></span></span><span> </span><span id="local-6989586621679483404"><span class="annot"><span class="annottext">TxMod
</span><a href="#local-6989586621679483404"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TxMod] -&gt; TxModifier
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxModifier"><span class="hs-identifier hs-var">TxModifier</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TxMod
</span><a href="#local-6989586621679483404"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-127"></span><span>
</span><span id="line-128"></span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#applyTxModifier"><span class="hs-identifier hs-type">applyTxModifier</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.Internal.Common.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">UTxO</span></a></span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.Internal.Common.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxModifier"><span class="hs-identifier hs-type">TxModifier</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.Internal.Common.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">UTxO</span></a></span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.Internal.Common.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-129"></span><span id="applyTxModifier"><span class="annot"><span class="annottext">applyTxModifier :: Tx Era -&gt; UTxO Era -&gt; TxModifier -&gt; (Tx Era, UTxO Era)
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#applyTxModifier"><span class="hs-identifier hs-var hs-var">applyTxModifier</span></a></span></span><span> </span><span id="local-6989586621679483402"><span class="annot"><span class="annottext">Tx Era
</span><a href="#local-6989586621679483402"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span id="local-6989586621679483401"><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679483401"><span class="hs-identifier hs-var">utxos</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxModifier"><span class="hs-identifier hs-type">TxModifier</span></a></span><span> </span><span id="local-6989586621679483400"><span class="annot"><span class="annottext">[TxMod]
</span><a href="#local-6989586621679483400"><span class="hs-identifier hs-var">ms</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Tx Era, UTxO Era) -&gt; TxMod -&gt; (Tx Era, UTxO Era))
-&gt; (Tx Era, UTxO Era) -&gt; [TxMod] -&gt; (Tx Era, UTxO Era)
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">foldl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Tx Era -&gt; UTxO Era -&gt; TxMod -&gt; (Tx Era, UTxO Era))
-&gt; (Tx Era, UTxO Era) -&gt; TxMod -&gt; (Tx Era, UTxO Era)
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">uncurry</span></a></span><span> </span><span class="annot"><span class="annottext">Tx Era -&gt; UTxO Era -&gt; TxMod -&gt; (Tx Era, UTxO Era)
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#applyTxMod"><span class="hs-identifier hs-var">applyTxMod</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tx Era
</span><a href="#local-6989586621679483402"><span class="hs-identifier hs-var">tx</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679483401"><span class="hs-identifier hs-var">utxos</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TxMod]
</span><a href="#local-6989586621679483400"><span class="hs-identifier hs-var">ms</span></a></span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#applyTxMod"><span class="hs-identifier hs-type">applyTxMod</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.Internal.Common.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">UTxO</span></a></span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.Internal.Common.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxMod"><span class="hs-identifier hs-type">TxMod</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.Internal.Common.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">UTxO</span></a></span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.Internal.Common.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span>
</span><span id="line-133"></span><span id="applyTxMod"><span class="annot"><span class="annottext">applyTxMod :: Tx Era -&gt; UTxO Era -&gt; TxMod -&gt; (Tx Era, UTxO Era)
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#applyTxMod"><span class="hs-identifier hs-var hs-var">applyTxMod</span></a></span></span><span> </span><span id="local-6989586621679483396"><span class="annot"><span class="annottext">Tx Era
</span><a href="#local-6989586621679483396"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span id="local-6989586621679483395"><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679483395"><span class="hs-identifier hs-var">utxos</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#ChangeValidityRange"><span class="hs-identifier hs-type">ChangeValidityRange</span></a></span><span> </span><span id="local-6989586621679483394"><span class="annot"><span class="annottext">Maybe (TxValidityLowerBound Era)
</span><a href="#local-6989586621679483394"><span class="hs-identifier hs-var">mlo</span></a></span></span><span> </span><span id="local-6989586621679483393"><span class="annot"><span class="annottext">Maybe (TxValidityUpperBound Era)
</span><a href="#local-6989586621679483393"><span class="hs-identifier hs-var">mhi</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-134"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxBody Era -&gt; [KeyWitness Era] -&gt; Tx Era
forall era. TxBody era -&gt; [KeyWitness era] -&gt; Tx era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">Tx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra Era
-&gt; TxBody (ShelleyLedgerEra Era)
-&gt; [Script (ShelleyLedgerEra Era)]
-&gt; TxBodyScriptData Era
-&gt; Maybe (AuxiliaryData (ShelleyLedgerEra Era))
-&gt; TxScriptValidity Era
-&gt; TxBody Era
forall era.
ShelleyBasedEra era
-&gt; TxBody (ShelleyLedgerEra era)
-&gt; [Script (ShelleyLedgerEra era)]
-&gt; TxBodyScriptData era
-&gt; Maybe (AuxiliaryData (ShelleyLedgerEra era))
-&gt; TxScriptValidity era
-&gt; TxBody era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">ShelleyTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra Era
</span><a href="#local-6989586621679483390"><span class="hs-identifier hs-var">era</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody (BabbageEra StandardCrypto)
TxBody (ShelleyLedgerEra Era)
</span><a href="#local-6989586621679483389"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">txvldt :: ValidityInterval
</span><a href="../../../../cardano-ledger-babbage/html/src"><span class="hs-identifier hs-var">Ledger.txvldt</span></a></span><span class="hs-glyph">=</span><span class="annot"><span class="annottext">ValidityInterval
</span><a href="#local-6989586621679483387"><span class="hs-identifier hs-var">validity'</span></a></span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">[Script (ShelleyLedgerEra Era)]
</span><a href="#local-6989586621679483386"><span class="hs-identifier hs-var">scripts</span></a></span><span> </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483385"><span class="hs-identifier hs-var">scriptData</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (AuxiliaryData (ShelleyLedgerEra Era))
</span><a href="#local-6989586621679483384"><span class="hs-identifier hs-var">auxData</span></a></span><span> </span><span class="annot"><span class="annottext">TxScriptValidity Era
</span><a href="#local-6989586621679483383"><span class="hs-identifier hs-var">scriptValidity</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[KeyWitness Era]
</span><a href="#local-6989586621679483382"><span class="hs-identifier hs-var">wits</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679483395"><span class="hs-identifier hs-var">utxos</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-136"></span><span>    </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span id="local-6989586621679483381"><span class="annot"><span class="annottext">bdy :: TxBody Era
</span><a href="#local-6989586621679483381"><span class="hs-identifier hs-var">bdy</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">ShelleyTxBody</span></a></span><span> </span><span id="local-6989586621679483390"><span class="annot"><span class="annottext">ShelleyBasedEra Era
</span><a href="#local-6989586621679483390"><span class="hs-identifier hs-var">era</span></a></span></span><span> </span><span id="local-6989586621679483389"><span class="annot"><span class="annottext">TxBody (ShelleyLedgerEra Era)
</span><a href="#local-6989586621679483389"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span id="local-6989586621679483386"><span class="annot"><span class="annottext">[Script (ShelleyLedgerEra Era)]
</span><a href="#local-6989586621679483386"><span class="hs-identifier hs-var">scripts</span></a></span></span><span> </span><span id="local-6989586621679483385"><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483385"><span class="hs-identifier hs-var">scriptData</span></a></span></span><span> </span><span id="local-6989586621679483384"><span class="annot"><span class="annottext">Maybe (AuxiliaryData (ShelleyLedgerEra Era))
</span><a href="#local-6989586621679483384"><span class="hs-identifier hs-var">auxData</span></a></span></span><span> </span><span id="local-6989586621679483383"><span class="annot"><span class="annottext">TxScriptValidity Era
</span><a href="#local-6989586621679483383"><span class="hs-identifier hs-var">scriptValidity</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679483382"><span class="annot"><span class="annottext">[KeyWitness Era]
</span><a href="#local-6989586621679483382"><span class="hs-identifier hs-var">wits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tx Era
</span><a href="#local-6989586621679483396"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-137"></span><span>    </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxBody</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxBodyContent</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">txValidityRange :: forall build era.
TxBodyContent build era
-&gt; (TxValidityLowerBound era, TxValidityUpperBound era)
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">txValidityRange</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679483377"><span class="annot"><span class="annottext">TxValidityLowerBound Era
</span><a href="#local-6989586621679483377"><span class="hs-identifier hs-var">lo</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679483376"><span class="annot"><span class="annottext">TxValidityUpperBound Era
</span><a href="#local-6989586621679483376"><span class="hs-identifier hs-var">hi</span></a></span></span><span class="hs-special">)</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxBody Era
</span><a href="#local-6989586621679483381"><span class="hs-identifier hs-var">bdy</span></a></span><span>
</span><span id="line-138"></span><span>    </span><span id="local-6989586621679483387"><span class="annot"><span class="annottext">validity' :: ValidityInterval
</span><a href="#local-6989586621679483387"><span class="hs-identifier hs-var hs-var">validity'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TxValidityLowerBound Era, TxValidityUpperBound Era)
-&gt; ValidityInterval
forall era.
(TxValidityLowerBound era, TxValidityUpperBound era)
-&gt; ValidityInterval
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#convValidityInterval"><span class="hs-identifier hs-var">convValidityInterval</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxValidityLowerBound Era
-&gt; Maybe (TxValidityLowerBound Era) -&gt; TxValidityLowerBound Era
forall a. a -&gt; Maybe a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">TxValidityLowerBound Era
</span><a href="#local-6989586621679483377"><span class="hs-identifier hs-var">lo</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (TxValidityLowerBound Era)
</span><a href="#local-6989586621679483394"><span class="hs-identifier hs-var">mlo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TxValidityUpperBound Era
-&gt; Maybe (TxValidityUpperBound Era) -&gt; TxValidityUpperBound Era
forall a. a -&gt; Maybe a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">TxValidityUpperBound Era
</span><a href="#local-6989586621679483376"><span class="hs-identifier hs-var">hi</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (TxValidityUpperBound Era)
</span><a href="#local-6989586621679483393"><span class="hs-identifier hs-var">mhi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#applyTxMod"><span class="hs-identifier hs-var">applyTxMod</span></a></span><span> </span><span id="local-6989586621679483373"><span class="annot"><span class="annottext">Tx Era
</span><a href="#local-6989586621679483373"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span id="local-6989586621679483372"><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679483372"><span class="hs-identifier hs-var">utxos</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#RemoveInput"><span class="hs-identifier hs-type">RemoveInput</span></a></span><span> </span><span id="local-6989586621679483371"><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621679483371"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-141"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxBody Era -&gt; [KeyWitness Era] -&gt; Tx Era
forall era. TxBody era -&gt; [KeyWitness era] -&gt; Tx era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">Tx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra Era
-&gt; TxBody (ShelleyLedgerEra Era)
-&gt; [Script (ShelleyLedgerEra Era)]
-&gt; TxBodyScriptData Era
-&gt; Maybe (AuxiliaryData (ShelleyLedgerEra Era))
-&gt; TxScriptValidity Era
-&gt; TxBody Era
forall era.
ShelleyBasedEra era
-&gt; TxBody (ShelleyLedgerEra era)
-&gt; [Script (ShelleyLedgerEra era)]
-&gt; TxBodyScriptData era
-&gt; Maybe (AuxiliaryData (ShelleyLedgerEra era))
-&gt; TxScriptValidity era
-&gt; TxBody era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">ShelleyTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra Era
</span><a href="#local-6989586621679483370"><span class="hs-identifier hs-var">era</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody (BabbageEra StandardCrypto)
TxBody (ShelleyLedgerEra Era)
</span><a href="#local-6989586621679483369"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">inputs :: Set (TxIn (Crypto (BabbageEra StandardCrypto)))
</span><a href="../../../../cardano-ledger-babbage/html/src"><span class="hs-identifier hs-var">Ledger.inputs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set (TxIn StandardCrypto)
Set (TxIn (Crypto (BabbageEra StandardCrypto)))
</span><a href="#local-6989586621679483367"><span class="hs-identifier hs-var">inputs'</span></a></span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">[Script (ShelleyLedgerEra Era)]
</span><a href="#local-6989586621679483366"><span class="hs-identifier hs-var">scripts</span></a></span><span> </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483365"><span class="hs-identifier hs-var">scriptData'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (AuxiliaryData (ShelleyLedgerEra Era))
</span><a href="#local-6989586621679483364"><span class="hs-identifier hs-var">auxData</span></a></span><span> </span><span class="annot"><span class="annottext">TxScriptValidity Era
</span><a href="#local-6989586621679483363"><span class="hs-identifier hs-var">validity</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[KeyWitness Era]
</span><a href="#local-6989586621679483362"><span class="hs-identifier hs-var">wits</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679483372"><span class="hs-identifier hs-var">utxos</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-142"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-143"></span><span>    </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">ShelleyTxBody</span></a></span><span> </span><span id="local-6989586621679483370"><span class="annot"><span class="annottext">ShelleyBasedEra Era
</span><a href="#local-6989586621679483370"><span class="hs-identifier hs-var">era</span></a></span></span><span> </span><span id="local-6989586621679483369"><span class="annot"><span class="annottext">body :: TxBody (ShelleyLedgerEra Era)
</span><a href="#local-6989586621679483369"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="../../../../cardano-ledger-babbage/html/src"><span class="hs-identifier hs-type">Ledger.TxBody</span></a></span><span class="hs-special">{</span><span id="local-6989586621679483345"><span id="local-6989586621679483346"><span id="local-6989586621679483347"><span id="local-6989586621679483348"><span id="local-6989586621679483349"><span id="local-6989586621679483350"><span id="local-6989586621679483351"><span id="local-6989586621679483352"><span id="local-6989586621679483353"><span id="local-6989586621679483354"><span id="local-6989586621679483355"><span id="local-6989586621679483356"><span id="local-6989586621679483357"><span id="local-6989586621679483358"><span id="local-6989586621679483359"><span id="local-6989586621679483360"><span class="annot"><a href="../../../../cardano-ledger-babbage/html/src"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621679483366"><span class="annot"><span class="annottext">[Script (ShelleyLedgerEra Era)]
</span><a href="#local-6989586621679483366"><span class="hs-identifier hs-var">scripts</span></a></span></span><span> </span><span id="local-6989586621679483330"><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483330"><span class="hs-identifier hs-var">scriptData</span></a></span></span><span> </span><span id="local-6989586621679483364"><span class="annot"><span class="annottext">Maybe (AuxiliaryData (ShelleyLedgerEra Era))
</span><a href="#local-6989586621679483364"><span class="hs-identifier hs-var">auxData</span></a></span></span><span> </span><span id="local-6989586621679483363"><span class="annot"><span class="annottext">TxScriptValidity Era
</span><a href="#local-6989586621679483363"><span class="hs-identifier hs-var">validity</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679483362"><span class="annot"><span class="annottext">[KeyWitness Era]
</span><a href="#local-6989586621679483362"><span class="hs-identifier hs-var">wits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tx Era
</span><a href="#local-6989586621679483373"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-144"></span><span>    </span><span id="local-6989586621679483367"><span class="annot"><span class="annottext">inputs' :: Set (TxIn StandardCrypto)
</span><a href="#local-6989586621679483367"><span class="hs-identifier hs-var hs-var">inputs'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxIn StandardCrypto
-&gt; Set (TxIn StandardCrypto) -&gt; Set (TxIn StandardCrypto)
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Set.delete</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxIn -&gt; TxIn StandardCrypto
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">toShelleyTxIn</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621679483371"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set (TxIn StandardCrypto)
Set (TxIn (Crypto (BabbageEra StandardCrypto)))
</span><a href="#local-6989586621679483360"><span class="hs-identifier hs-var">inputs</span></a></span><span>
</span><span id="line-145"></span><span>    </span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier hs-type">SJust</span></a></span><span> </span><span id="local-6989586621679483326"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679483326"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxIn StandardCrypto
-&gt; Set (TxIn StandardCrypto) -&gt; StrictMaybe Word64
forall elem container.
Indexable elem container =&gt;
elem -&gt; container -&gt; StrictMaybe Word64
</span><a href="../../../../cardano-ledger-alonzo/html/src"><span class="hs-identifier hs-var">Ledger.indexOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxIn -&gt; TxIn StandardCrypto
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">toShelleyTxIn</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621679483371"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set (TxIn StandardCrypto)
Set (TxIn (Crypto (BabbageEra StandardCrypto)))
</span><a href="#local-6989586621679483360"><span class="hs-identifier hs-var">inputs</span></a></span><span>
</span><span id="line-146"></span><span>    </span><span id="local-6989586621679483325"><span class="annot"><span class="annottext">idxUpdate :: Word64 -&gt; Word64
</span><a href="#local-6989586621679483325"><span class="hs-identifier hs-var hs-var">idxUpdate</span></a></span></span><span> </span><span id="local-6989586621679483324"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679483324"><span class="hs-identifier hs-var">idx'</span></a></span></span><span>
</span><span id="line-147"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679483324"><span class="hs-identifier hs-var">idx'</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679483326"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679483324"><span class="hs-identifier hs-var">idx'</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; Word64
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-148"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679483324"><span class="hs-identifier hs-var">idx'</span></a></span><span>
</span><span id="line-149"></span><span>    </span><span id="local-6989586621679483365"><span class="annot"><span class="annottext">scriptData' :: TxBodyScriptData Era
</span><a href="#local-6989586621679483365"><span class="hs-identifier hs-var hs-var">scriptData'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Word64
-&gt; (Word64 -&gt; Word64)
-&gt; TxBodyScriptData Era
-&gt; TxBodyScriptData Era
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#recomputeScriptData"><span class="hs-identifier hs-var">recomputeScriptData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; Maybe Word64
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679483326"><span class="hs-identifier hs-var">idx</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64
</span><a href="#local-6989586621679483325"><span class="hs-identifier hs-var">idxUpdate</span></a></span><span> </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483330"><span class="hs-identifier hs-var">scriptData</span></a></span><span>
</span><span id="line-150"></span><span>
</span><span id="line-151"></span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#applyTxMod"><span class="hs-identifier hs-var">applyTxMod</span></a></span><span> </span><span id="local-6989586621679483321"><span class="annot"><span class="annottext">Tx Era
</span><a href="#local-6989586621679483321"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span id="local-6989586621679483320"><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679483320"><span class="hs-identifier hs-var">utxos</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#RemoveOutput"><span class="hs-identifier hs-type">RemoveOutput</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxIx</span></a></span><span> </span><span id="local-6989586621679483318"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679483318"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-152"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxBody Era -&gt; [KeyWitness Era] -&gt; Tx Era
forall era. TxBody era -&gt; [KeyWitness era] -&gt; Tx era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">Tx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra Era
-&gt; TxBody (ShelleyLedgerEra Era)
-&gt; [Script (ShelleyLedgerEra Era)]
-&gt; TxBodyScriptData Era
-&gt; Maybe (AuxiliaryData (ShelleyLedgerEra Era))
-&gt; TxScriptValidity Era
-&gt; TxBody Era
forall era.
ShelleyBasedEra era
-&gt; TxBody (ShelleyLedgerEra era)
-&gt; [Script (ShelleyLedgerEra era)]
-&gt; TxBodyScriptData era
-&gt; Maybe (AuxiliaryData (ShelleyLedgerEra era))
-&gt; TxScriptValidity era
-&gt; TxBody era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">ShelleyTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra Era
</span><a href="#local-6989586621679483317"><span class="hs-identifier hs-var">era</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody (BabbageEra StandardCrypto)
TxBody (ShelleyLedgerEra Era)
</span><a href="#local-6989586621679483316"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">outputs :: StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
</span><a href="../../../../cardano-ledger-babbage/html/src"><span class="hs-identifier hs-var">Ledger.outputs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
</span><a href="#local-6989586621679483315"><span class="hs-identifier hs-var">outputs'</span></a></span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">[Script (ShelleyLedgerEra Era)]
</span><a href="#local-6989586621679483314"><span class="hs-identifier hs-var">scripts</span></a></span><span> </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483313"><span class="hs-identifier hs-var">scriptData</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (AuxiliaryData (ShelleyLedgerEra Era))
</span><a href="#local-6989586621679483312"><span class="hs-identifier hs-var">auxData</span></a></span><span> </span><span class="annot"><span class="annottext">TxScriptValidity Era
</span><a href="#local-6989586621679483311"><span class="hs-identifier hs-var">validity</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[KeyWitness Era]
</span><a href="#local-6989586621679483310"><span class="hs-identifier hs-var">wits</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679483320"><span class="hs-identifier hs-var">utxos</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-153"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-154"></span><span>    </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">ShelleyTxBody</span></a></span><span> </span><span id="local-6989586621679483317"><span class="annot"><span class="annottext">ShelleyBasedEra Era
</span><a href="#local-6989586621679483317"><span class="hs-identifier hs-var">era</span></a></span></span><span> </span><span id="local-6989586621679483316"><span class="annot"><span class="annottext">body :: TxBody (ShelleyLedgerEra Era)
</span><a href="#local-6989586621679483316"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="../../../../cardano-ledger-babbage/html/src"><span class="hs-identifier hs-type">Ledger.TxBody</span></a></span><span class="hs-special">{</span><span id="local-6989586621679483294"><span id="local-6989586621679483295"><span id="local-6989586621679483296"><span id="local-6989586621679483297"><span id="local-6989586621679483298"><span id="local-6989586621679483299"><span id="local-6989586621679483300"><span id="local-6989586621679483301"><span id="local-6989586621679483302"><span id="local-6989586621679483303"><span id="local-6989586621679483304"><span id="local-6989586621679483305"><span id="local-6989586621679483306"><span id="local-6989586621679483307"><span id="local-6989586621679483308"><span id="local-6989586621679483309"><span class="annot"><a href="#local-6989586621679483294"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621679483314"><span class="annot"><span class="annottext">[Script (ShelleyLedgerEra Era)]
</span><a href="#local-6989586621679483314"><span class="hs-identifier hs-var">scripts</span></a></span></span><span> </span><span id="local-6989586621679483313"><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483313"><span class="hs-identifier hs-var">scriptData</span></a></span></span><span> </span><span id="local-6989586621679483312"><span class="annot"><span class="annottext">Maybe (AuxiliaryData (ShelleyLedgerEra Era))
</span><a href="#local-6989586621679483312"><span class="hs-identifier hs-var">auxData</span></a></span></span><span> </span><span id="local-6989586621679483311"><span class="annot"><span class="annottext">TxScriptValidity Era
</span><a href="#local-6989586621679483311"><span class="hs-identifier hs-var">validity</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679483310"><span class="annot"><span class="annottext">[KeyWitness Era]
</span><a href="#local-6989586621679483310"><span class="hs-identifier hs-var">wits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tx Era
</span><a href="#local-6989586621679483321"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-155"></span><span>    </span><span id="local-6989586621679483315"><span class="annot"><span class="annottext">outputs' :: StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
</span><a href="#local-6989586621679483315"><span class="hs-identifier hs-var hs-var">outputs'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
-&gt; (StrictSeq (Sized (TxOut (BabbageEra StandardCrypto))),
    StrictSeq (Sized (TxOut (BabbageEra StandardCrypto))))
forall a. Int -&gt; StrictSeq a -&gt; (StrictSeq a, StrictSeq a)
</span><a href="../../../../strict-containers/html/src"><span class="hs-identifier hs-var">Seq.splitAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679483318"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
</span><a href="#local-6989586621679483306"><span class="hs-identifier hs-var">outputs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-156"></span><span>                 </span><span class="hs-special">(</span><span id="local-6989586621679483292"><span class="annot"><span class="annottext">StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
</span><a href="#local-6989586621679483292"><span class="hs-identifier hs-var">before</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Sized (TxOut (BabbageEra StandardCrypto))
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-operator hs-type">Seq.:&lt;|</span></a></span><span> </span><span id="local-6989586621679483290"><span class="annot"><span class="annottext">StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
</span><a href="#local-6989586621679483290"><span class="hs-identifier hs-var">after</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
</span><a href="#local-6989586621679483292"><span class="hs-identifier hs-var">before</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
-&gt; StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
-&gt; StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
</span><a href="#local-6989586621679483290"><span class="hs-identifier hs-var">after</span></a></span><span>
</span><span id="line-157"></span><span>                 </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
</span><a href="../../../../strict-containers/html/src"><span class="hs-identifier hs-var">Seq.Empty</span></a></span><span class="hs-special">)</span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; StrictSeq (Sized (TxOut (BabbageEra StandardCrypto))))
-&gt; String -&gt; StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;RemoveOutput: Can't remove index &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679483318"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; from &quot;</span></span><span>
</span><span id="line-158"></span><span>                                                   </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StrictSeq (Sized (TxOut (BabbageEra StandardCrypto))) -&gt; Int
forall a. StrictSeq a -&gt; Int
</span><a href="../../../../strict-containers/html/src"><span class="hs-identifier hs-var">Seq.length</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
</span><a href="#local-6989586621679483306"><span class="hs-identifier hs-var">outputs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; outputs&quot;</span></span><span>
</span><span id="line-159"></span><span>
</span><span id="line-160"></span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#applyTxMod"><span class="hs-identifier hs-var">applyTxMod</span></a></span><span> </span><span id="local-6989586621679483286"><span class="annot"><span class="annottext">Tx Era
</span><a href="#local-6989586621679483286"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span id="local-6989586621679483285"><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679483285"><span class="hs-identifier hs-var">utxos</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#AddOutput"><span class="hs-identifier hs-type">AddOutput</span></a></span><span> </span><span id="local-6989586621679483284"><span class="annot"><span class="annottext">AddressAny
</span><a href="#local-6989586621679483284"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span id="local-6989586621679483283"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679483283"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span id="local-6989586621679483282"><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679483282"><span class="hs-identifier hs-var">datum</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-161"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxBody Era -&gt; [KeyWitness Era] -&gt; Tx Era
forall era. TxBody era -&gt; [KeyWitness era] -&gt; Tx era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">Tx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra Era
-&gt; TxBody (ShelleyLedgerEra Era)
-&gt; [Script (ShelleyLedgerEra Era)]
-&gt; TxBodyScriptData Era
-&gt; Maybe (AuxiliaryData (ShelleyLedgerEra Era))
-&gt; TxScriptValidity Era
-&gt; TxBody Era
forall era.
ShelleyBasedEra era
-&gt; TxBody (ShelleyLedgerEra era)
-&gt; [Script (ShelleyLedgerEra era)]
-&gt; TxBodyScriptData era
-&gt; Maybe (AuxiliaryData (ShelleyLedgerEra era))
-&gt; TxScriptValidity era
-&gt; TxBody era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">ShelleyTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra Era
</span><a href="#local-6989586621679483281"><span class="hs-identifier hs-var">era</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody (BabbageEra StandardCrypto)
TxBody (ShelleyLedgerEra Era)
</span><a href="#local-6989586621679483280"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">outputs :: StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
</span><a href="../../../../cardano-ledger-babbage/html/src"><span class="hs-identifier hs-var">Ledger.outputs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
</span><a href="#local-6989586621679483279"><span class="hs-identifier hs-var">outputs'</span></a></span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">[Script (ShelleyLedgerEra Era)]
</span><a href="#local-6989586621679483278"><span class="hs-identifier hs-var">scripts</span></a></span><span> </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483277"><span class="hs-identifier hs-var">scriptData'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (AuxiliaryData (ShelleyLedgerEra Era))
</span><a href="#local-6989586621679483276"><span class="hs-identifier hs-var">auxData</span></a></span><span> </span><span class="annot"><span class="annottext">TxScriptValidity Era
</span><a href="#local-6989586621679483275"><span class="hs-identifier hs-var">validity</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[KeyWitness Era]
</span><a href="#local-6989586621679483274"><span class="hs-identifier hs-var">wits</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679483285"><span class="hs-identifier hs-var">utxos</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-162"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-163"></span><span>    </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">ShelleyTxBody</span></a></span><span> </span><span id="local-6989586621679483281"><span class="annot"><span class="annottext">ShelleyBasedEra Era
</span><a href="#local-6989586621679483281"><span class="hs-identifier hs-var">era</span></a></span></span><span> </span><span id="local-6989586621679483280"><span class="annot"><span class="annottext">body :: TxBody (ShelleyLedgerEra Era)
</span><a href="#local-6989586621679483280"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="../../../../cardano-ledger-babbage/html/src"><span class="hs-identifier hs-type">Ledger.TxBody</span></a></span><span class="hs-special">{</span><span id="local-6989586621679483258"><span id="local-6989586621679483259"><span id="local-6989586621679483260"><span id="local-6989586621679483261"><span id="local-6989586621679483262"><span id="local-6989586621679483263"><span id="local-6989586621679483264"><span id="local-6989586621679483265"><span id="local-6989586621679483266"><span id="local-6989586621679483267"><span id="local-6989586621679483268"><span id="local-6989586621679483269"><span id="local-6989586621679483270"><span id="local-6989586621679483271"><span id="local-6989586621679483272"><span id="local-6989586621679483273"><span class="annot"><a href="#local-6989586621679483258"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621679483278"><span class="annot"><span class="annottext">[Script (ShelleyLedgerEra Era)]
</span><a href="#local-6989586621679483278"><span class="hs-identifier hs-var">scripts</span></a></span></span><span> </span><span id="local-6989586621679483257"><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483257"><span class="hs-identifier hs-var">scriptData</span></a></span></span><span> </span><span id="local-6989586621679483276"><span class="annot"><span class="annottext">Maybe (AuxiliaryData (ShelleyLedgerEra Era))
</span><a href="#local-6989586621679483276"><span class="hs-identifier hs-var">auxData</span></a></span></span><span> </span><span id="local-6989586621679483275"><span class="annot"><span class="annottext">TxScriptValidity Era
</span><a href="#local-6989586621679483275"><span class="hs-identifier hs-var">validity</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679483274"><span class="annot"><span class="annottext">[KeyWitness Era]
</span><a href="#local-6989586621679483274"><span class="hs-identifier hs-var">wits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tx Era
</span><a href="#local-6989586621679483286"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-164"></span><span>    </span><span id="local-6989586621679483279"><span class="annot"><span class="annottext">outputs' :: StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
</span><a href="#local-6989586621679483279"><span class="hs-identifier hs-var hs-var">outputs'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
</span><a href="#local-6989586621679483270"><span class="hs-identifier hs-var">outputs</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
-&gt; Sized (TxOut (BabbageEra StandardCrypto))
-&gt; StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
forall a. StrictSeq a -&gt; a -&gt; StrictSeq a
</span><a href="../../../../strict-containers/html/src"><span class="hs-operator hs-var">Seq.:|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut (BabbageEra StandardCrypto)
-&gt; Sized (TxOut (BabbageEra StandardCrypto))
forall a. ToCBOR a =&gt; a -&gt; Sized a
</span><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-var">CBOR.mkSized</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut (BabbageEra StandardCrypto)
TxOut (BabbageEra StandardCrypto)
</span><a href="#local-6989586621679483254"><span class="hs-identifier hs-var">out</span></a></span><span>
</span><span id="line-165"></span><span>    </span><span id="local-6989586621679483254"><span class="annot"><span class="annottext">out :: TxOut (BabbageEra StandardCrypto)
</span><a href="#local-6989586621679483254"><span class="hs-identifier hs-var hs-var">out</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra Era
-&gt; TxOut CtxUTxO Era -&gt; TxOut (BabbageEra StandardCrypto)
forall era ledgerera.
(ShelleyLedgerEra era ~ ledgerera) =&gt;
ShelleyBasedEra era -&gt; TxOut CtxUTxO era -&gt; TxOut ledgerera
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">toShelleyTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra Era
forall era. IsShelleyBasedEra era =&gt; ShelleyBasedEra era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">shelleyBasedEra</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AddressAny
-&gt; Value -&gt; Datum -&gt; ReferenceScript Era -&gt; TxOut CtxUTxO Era
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#makeTxOut"><span class="hs-identifier hs-var">makeTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">AddressAny
</span><a href="#local-6989586621679483284"><span class="hs-identifier hs-var">addr</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679483283"><span class="hs-identifier hs-var">value</span></a></span><span> </span><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679483282"><span class="hs-identifier hs-var">datum</span></a></span><span> </span><span class="annot"><span class="annottext">ReferenceScript Era
forall era. ReferenceScript era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">ReferenceScriptNone</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-166"></span><span>    </span><span id="local-6989586621679483277"><span class="annot"><span class="annottext">scriptData' :: TxBodyScriptData Era
</span><a href="#local-6989586621679483277"><span class="hs-identifier hs-var hs-var">scriptData'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679483282"><span class="hs-identifier hs-var">datum</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-167"></span><span>      </span><span class="annot"><span class="annottext">Datum
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">TxOutDatumNone</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483257"><span class="hs-identifier hs-var">scriptData</span></a></span><span>
</span><span id="line-168"></span><span>      </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxOutDatumHash</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483257"><span class="hs-identifier hs-var">scriptData</span></a></span><span>
</span><span id="line-169"></span><span>      </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxOutDatumInTx</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptDataSupportedInEra Era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679483246"><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621679483246"><span class="hs-identifier hs-var">d</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Data (ShelleyLedgerEra Era)
-&gt; TxBodyScriptData Era -&gt; TxBodyScriptData Era
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#addDatum"><span class="hs-identifier hs-var">addDatum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Redeemer -&gt; Data (BabbageEra StandardCrypto)
forall ledgerera. Redeemer -&gt; Data ledgerera
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">toAlonzoData</span></a></span><span> </span><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621679483246"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483257"><span class="hs-identifier hs-var">scriptData</span></a></span><span>
</span><span id="line-170"></span><span>      </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxOutDatumInline</span></a></span><span> </span><span class="annot"><span class="annottext">ReferenceTxInsScriptsInlineDatumsSupportedInEra Era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679483242"><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621679483242"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Data (ShelleyLedgerEra Era)
-&gt; TxBodyScriptData Era -&gt; TxBodyScriptData Era
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#addDatum"><span class="hs-identifier hs-var">addDatum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Redeemer -&gt; Data (BabbageEra StandardCrypto)
forall ledgerera. Redeemer -&gt; Data ledgerera
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">toAlonzoData</span></a></span><span> </span><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621679483242"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483257"><span class="hs-identifier hs-var">scriptData</span></a></span><span>
</span><span id="line-171"></span><span>
</span><span id="line-172"></span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#applyTxMod"><span class="hs-identifier hs-var">applyTxMod</span></a></span><span> </span><span id="local-6989586621679483241"><span class="annot"><span class="annottext">Tx Era
</span><a href="#local-6989586621679483241"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span id="local-6989586621679483240"><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679483240"><span class="hs-identifier hs-var">utxos</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#AddInput"><span class="hs-identifier hs-type">AddInput</span></a></span><span> </span><span id="local-6989586621679483239"><span class="annot"><span class="annottext">AddressAny
</span><a href="#local-6989586621679483239"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span id="local-6989586621679483238"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679483238"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span id="local-6989586621679483237"><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679483237"><span class="hs-identifier hs-var">datum</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-173"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">TxBody Era -&gt; [KeyWitness Era] -&gt; Tx Era
forall era. TxBody era -&gt; [KeyWitness era] -&gt; Tx era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">Tx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra Era
-&gt; TxBody (ShelleyLedgerEra Era)
-&gt; [Script (ShelleyLedgerEra Era)]
-&gt; TxBodyScriptData Era
-&gt; Maybe (AuxiliaryData (ShelleyLedgerEra Era))
-&gt; TxScriptValidity Era
-&gt; TxBody Era
forall era.
ShelleyBasedEra era
-&gt; TxBody (ShelleyLedgerEra era)
-&gt; [Script (ShelleyLedgerEra era)]
-&gt; TxBodyScriptData era
-&gt; Maybe (AuxiliaryData (ShelleyLedgerEra era))
-&gt; TxScriptValidity era
-&gt; TxBody era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">ShelleyTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra Era
</span><a href="#local-6989586621679483236"><span class="hs-identifier hs-var">era</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody (BabbageEra StandardCrypto)
TxBody (ShelleyLedgerEra Era)
</span><a href="#local-6989586621679483235"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">inputs :: Set (TxIn (Crypto (BabbageEra StandardCrypto)))
</span><a href="../../../../cardano-ledger-babbage/html/src"><span class="hs-identifier hs-var">Ledger.inputs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set (TxIn StandardCrypto)
Set (TxIn (Crypto (BabbageEra StandardCrypto)))
</span><a href="#local-6989586621679483234"><span class="hs-identifier hs-var">inputs'</span></a></span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">[Script (ShelleyLedgerEra Era)]
</span><a href="#local-6989586621679483233"><span class="hs-identifier hs-var">scripts</span></a></span><span> </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483232"><span class="hs-identifier hs-var">scriptData''</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (AuxiliaryData (ShelleyLedgerEra Era))
</span><a href="#local-6989586621679483231"><span class="hs-identifier hs-var">auxData</span></a></span><span> </span><span class="annot"><span class="annottext">TxScriptValidity Era
</span><a href="#local-6989586621679483230"><span class="hs-identifier hs-var">validity</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[KeyWitness Era]
</span><a href="#local-6989586621679483229"><span class="hs-identifier hs-var">wits</span></a></span><span>
</span><span id="line-174"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679483228"><span class="hs-identifier hs-var">utxos'</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-175"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-176"></span><span>    </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">ShelleyTxBody</span></a></span><span> </span><span id="local-6989586621679483236"><span class="annot"><span class="annottext">ShelleyBasedEra Era
</span><a href="#local-6989586621679483236"><span class="hs-identifier hs-var">era</span></a></span></span><span> </span><span id="local-6989586621679483235"><span class="annot"><span class="annottext">body :: TxBody (ShelleyLedgerEra Era)
</span><a href="#local-6989586621679483235"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="../../../../cardano-ledger-babbage/html/src"><span class="hs-identifier hs-type">Ledger.TxBody</span></a></span><span class="hs-special">{</span><span id="local-6989586621679483212"><span id="local-6989586621679483213"><span id="local-6989586621679483214"><span id="local-6989586621679483215"><span id="local-6989586621679483216"><span id="local-6989586621679483217"><span id="local-6989586621679483218"><span id="local-6989586621679483219"><span id="local-6989586621679483220"><span id="local-6989586621679483221"><span id="local-6989586621679483222"><span id="local-6989586621679483223"><span id="local-6989586621679483224"><span id="local-6989586621679483225"><span id="local-6989586621679483226"><span id="local-6989586621679483227"><span class="annot"><a href="#local-6989586621679483212"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621679483233"><span class="annot"><span class="annottext">[Script (ShelleyLedgerEra Era)]
</span><a href="#local-6989586621679483233"><span class="hs-identifier hs-var">scripts</span></a></span></span><span> </span><span id="local-6989586621679483211"><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483211"><span class="hs-identifier hs-var">scriptData</span></a></span></span><span> </span><span id="local-6989586621679483231"><span class="annot"><span class="annottext">Maybe (AuxiliaryData (ShelleyLedgerEra Era))
</span><a href="#local-6989586621679483231"><span class="hs-identifier hs-var">auxData</span></a></span></span><span> </span><span id="local-6989586621679483230"><span class="annot"><span class="annottext">TxScriptValidity Era
</span><a href="#local-6989586621679483230"><span class="hs-identifier hs-var">validity</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679483229"><span class="annot"><span class="annottext">[KeyWitness Era]
</span><a href="#local-6989586621679483229"><span class="hs-identifier hs-var">wits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tx Era
</span><a href="#local-6989586621679483241"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span>    </span><span id="local-6989586621679483210"><span class="annot"><span class="annottext">txIn :: TxIn
</span><a href="#local-6989586621679483210"><span class="hs-identifier hs-var hs-var">txIn</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxId -&gt; TxIx -&gt; TxIn
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">TxIn</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#dummyTxId"><span class="hs-identifier hs-var">dummyTxId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word -&gt; TxIx
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">TxIx</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679483207"><span class="hs-identifier hs-var">txIx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-179"></span><span>    </span><span id="local-6989586621679483207"><span class="annot"><span class="annottext">txIx :: Word
</span><a href="#local-6989586621679483207"><span class="hs-identifier hs-var hs-var">txIx</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Word] -&gt; Word
forall (t :: * -&gt; *) a. (Foldable t, Ord a) =&gt; t a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maximum</span></a></span><span> </span><span class="annot"><span class="annottext">([Word] -&gt; Word) -&gt; [Word] -&gt; Word
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Word -&gt; [Word] -&gt; [Word]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">(Word -&gt; Word) -&gt; [Word] -&gt; [Word]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679483204"><span class="hs-identifier hs-var">ix</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span> </span><span id="local-6989586621679483203"><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621679483203"><span class="hs-identifier hs-var">txId</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxIx</span></a></span><span> </span><span id="local-6989586621679483204"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679483204"><span class="hs-identifier hs-var">ix</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Map TxIn (TxOut CtxUTxO Era) -&gt; [TxIn]
forall k a. Map k a -&gt; [k]
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Map.keys</span></a></span><span> </span><span class="annot"><span class="annottext">(Map TxIn (TxOut CtxUTxO Era) -&gt; [TxIn])
-&gt; Map TxIn (TxOut CtxUTxO Era) -&gt; [TxIn]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO Era -&gt; Map TxIn (TxOut CtxUTxO Era)
forall era. UTxO era -&gt; Map TxIn (TxOut CtxUTxO era)
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var hs-var">unUTxO</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679483240"><span class="hs-identifier hs-var">utxos</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621679483203"><span class="hs-identifier hs-var">txId</span></a></span><span> </span><span class="annot"><span class="annottext">TxId -&gt; TxId -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#dummyTxId"><span class="hs-identifier hs-var">dummyTxId</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-180"></span><span>    </span><span id="local-6989586621679483200"><span class="annot"><span class="annottext">input :: TxIn StandardCrypto
</span><a href="#local-6989586621679483200"><span class="hs-identifier hs-var hs-var">input</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; TxIn StandardCrypto
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">toShelleyTxIn</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621679483210"><span class="hs-identifier hs-var">txIn</span></a></span><span>
</span><span id="line-181"></span><span>    </span><span id="local-6989586621679483234"><span class="annot"><span class="annottext">inputs' :: Set (TxIn StandardCrypto)
</span><a href="#local-6989586621679483234"><span class="hs-identifier hs-var hs-var">inputs'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxIn StandardCrypto
-&gt; Set (TxIn StandardCrypto) -&gt; Set (TxIn StandardCrypto)
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Set.insert</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn StandardCrypto
</span><a href="#local-6989586621679483200"><span class="hs-identifier hs-var">input</span></a></span><span> </span><span class="annot"><span class="annottext">Set (TxIn StandardCrypto)
Set (TxIn (Crypto (BabbageEra StandardCrypto)))
</span><a href="#local-6989586621679483227"><span class="hs-identifier hs-var">inputs</span></a></span><span>
</span><span id="line-182"></span><span>    </span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier hs-type">SJust</span></a></span><span> </span><span id="local-6989586621679483198"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679483198"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxIn StandardCrypto
-&gt; Set (TxIn StandardCrypto) -&gt; StrictMaybe Word64
forall elem container.
Indexable elem container =&gt;
elem -&gt; container -&gt; StrictMaybe Word64
</span><a href="../../../../cardano-ledger-alonzo/html/src"><span class="hs-identifier hs-var">Ledger.indexOf</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn StandardCrypto
</span><a href="#local-6989586621679483200"><span class="hs-identifier hs-var">input</span></a></span><span> </span><span class="annot"><span class="annottext">Set (TxIn StandardCrypto)
</span><a href="#local-6989586621679483234"><span class="hs-identifier hs-var">inputs'</span></a></span><span>
</span><span id="line-183"></span><span>
</span><span id="line-184"></span><span>    </span><span id="local-6989586621679483197"><span class="annot"><span class="annottext">txOut :: TxOut CtxUTxO Era
</span><a href="#local-6989586621679483197"><span class="hs-identifier hs-var hs-var">txOut</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AddressAny
-&gt; Value -&gt; Datum -&gt; ReferenceScript Era -&gt; TxOut CtxUTxO Era
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#makeTxOut"><span class="hs-identifier hs-var">makeTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">AddressAny
</span><a href="#local-6989586621679483239"><span class="hs-identifier hs-var">addr</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679483238"><span class="hs-identifier hs-var">value</span></a></span><span> </span><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679483237"><span class="hs-identifier hs-var">datum</span></a></span><span> </span><span class="annot"><span class="annottext">ReferenceScript Era
forall era. ReferenceScript era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">ReferenceScriptNone</span></a></span><span>
</span><span id="line-185"></span><span>    </span><span id="local-6989586621679483228"><span class="annot"><span class="annottext">utxos' :: UTxO Era
</span><a href="#local-6989586621679483228"><span class="hs-identifier hs-var hs-var">utxos'</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map TxIn (TxOut CtxUTxO Era) -&gt; UTxO Era
forall era. Map TxIn (TxOut CtxUTxO era) -&gt; UTxO era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">UTxO</span></a></span><span> </span><span class="annot"><span class="annottext">(Map TxIn (TxOut CtxUTxO Era) -&gt; UTxO Era)
-&gt; (UTxO Era -&gt; Map TxIn (TxOut CtxUTxO Era))
-&gt; UTxO Era
-&gt; UTxO Era
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn
-&gt; TxOut CtxUTxO Era
-&gt; Map TxIn (TxOut CtxUTxO Era)
-&gt; Map TxIn (TxOut CtxUTxO Era)
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Map.insert</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621679483210"><span class="hs-identifier hs-var">txIn</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut CtxUTxO Era
</span><a href="#local-6989586621679483197"><span class="hs-identifier hs-var">txOut</span></a></span><span> </span><span class="annot"><span class="annottext">(Map TxIn (TxOut CtxUTxO Era) -&gt; Map TxIn (TxOut CtxUTxO Era))
-&gt; (UTxO Era -&gt; Map TxIn (TxOut CtxUTxO Era))
-&gt; UTxO Era
-&gt; Map TxIn (TxOut CtxUTxO Era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO Era -&gt; Map TxIn (TxOut CtxUTxO Era)
forall era. UTxO era -&gt; Map TxIn (TxOut CtxUTxO era)
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var hs-var">unUTxO</span></a></span><span> </span><span class="annot"><span class="annottext">(UTxO Era -&gt; UTxO Era) -&gt; UTxO Era -&gt; UTxO Era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679483240"><span class="hs-identifier hs-var">utxos</span></a></span><span>
</span><span id="line-186"></span><span>
</span><span id="line-187"></span><span>    </span><span id="local-6989586621679483194"><span class="annot"><span class="annottext">idxUpdate :: Word64 -&gt; Word64
</span><a href="#local-6989586621679483194"><span class="hs-identifier hs-var hs-var">idxUpdate</span></a></span></span><span> </span><span id="local-6989586621679483193"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679483193"><span class="hs-identifier hs-var">idx'</span></a></span></span><span>
</span><span id="line-188"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679483193"><span class="hs-identifier hs-var">idx'</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679483198"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679483193"><span class="hs-identifier hs-var">idx'</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; Word64
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-189"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679483193"><span class="hs-identifier hs-var">idx'</span></a></span><span>
</span><span id="line-190"></span><span>
</span><span id="line-191"></span><span>    </span><span id="local-6989586621679483232"><span class="annot"><span class="annottext">scriptData'' :: TxBodyScriptData Era
</span><a href="#local-6989586621679483232"><span class="hs-identifier hs-var hs-var">scriptData''</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679483237"><span class="hs-identifier hs-var">datum</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-192"></span><span>      </span><span class="annot"><span class="annottext">Datum
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">TxOutDatumNone</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483192"><span class="hs-identifier hs-var">scriptData'</span></a></span><span>
</span><span id="line-193"></span><span>      </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxOutDatumHash</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483192"><span class="hs-identifier hs-var">scriptData'</span></a></span><span>
</span><span id="line-194"></span><span>      </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxOutDatumInTx</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptDataSupportedInEra Era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679483191"><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621679483191"><span class="hs-identifier hs-var">d</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Data (ShelleyLedgerEra Era)
-&gt; TxBodyScriptData Era -&gt; TxBodyScriptData Era
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#addDatum"><span class="hs-identifier hs-var">addDatum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Redeemer -&gt; Data (BabbageEra StandardCrypto)
forall ledgerera. Redeemer -&gt; Data ledgerera
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">toAlonzoData</span></a></span><span> </span><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621679483191"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483192"><span class="hs-identifier hs-var">scriptData'</span></a></span><span>
</span><span id="line-195"></span><span>      </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxOutDatumInline</span></a></span><span> </span><span class="annot"><span class="annottext">ReferenceTxInsScriptsInlineDatumsSupportedInEra Era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679483190"><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621679483190"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Data (ShelleyLedgerEra Era)
-&gt; TxBodyScriptData Era -&gt; TxBodyScriptData Era
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#addDatum"><span class="hs-identifier hs-var">addDatum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Redeemer -&gt; Data (BabbageEra StandardCrypto)
forall ledgerera. Redeemer -&gt; Data ledgerera
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">toAlonzoData</span></a></span><span> </span><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621679483190"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483192"><span class="hs-identifier hs-var">scriptData'</span></a></span><span>
</span><span id="line-196"></span><span>
</span><span id="line-197"></span><span>    </span><span id="local-6989586621679483192"><span class="annot"><span class="annottext">scriptData' :: TxBodyScriptData Era
</span><a href="#local-6989586621679483192"><span class="hs-identifier hs-var hs-var">scriptData'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Word64
-&gt; (Word64 -&gt; Word64)
-&gt; TxBodyScriptData Era
-&gt; TxBodyScriptData Era
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#recomputeScriptData"><span class="hs-identifier hs-var">recomputeScriptData</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Word64
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64
</span><a href="#local-6989586621679483194"><span class="hs-identifier hs-var">idxUpdate</span></a></span><span> </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483211"><span class="hs-identifier hs-var">scriptData</span></a></span><span>
</span><span id="line-198"></span><span>
</span><span id="line-199"></span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#applyTxMod"><span class="hs-identifier hs-var">applyTxMod</span></a></span><span> </span><span id="local-6989586621679483189"><span class="annot"><span class="annottext">Tx Era
</span><a href="#local-6989586621679483189"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span id="local-6989586621679483188"><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679483188"><span class="hs-identifier hs-var">utxos</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#AddPlutusScriptInput"><span class="hs-identifier hs-type">AddPlutusScriptInput</span></a></span><span> </span><span id="local-6989586621679483187"><span class="annot"><span class="annottext">PlutusScript PlutusScriptV2
</span><a href="#local-6989586621679483187"><span class="hs-identifier hs-var">script</span></a></span></span><span> </span><span id="local-6989586621679483186"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679483186"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span id="local-6989586621679483185"><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679483185"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span id="local-6989586621679483184"><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621679483184"><span class="hs-identifier hs-var">redeemer</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-200"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">TxBody Era -&gt; [KeyWitness Era] -&gt; Tx Era
forall era. TxBody era -&gt; [KeyWitness era] -&gt; Tx era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">Tx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra Era
-&gt; TxBody (ShelleyLedgerEra Era)
-&gt; [Script (ShelleyLedgerEra Era)]
-&gt; TxBodyScriptData Era
-&gt; Maybe (AuxiliaryData (ShelleyLedgerEra Era))
-&gt; TxScriptValidity Era
-&gt; TxBody Era
forall era.
ShelleyBasedEra era
-&gt; TxBody (ShelleyLedgerEra era)
-&gt; [Script (ShelleyLedgerEra era)]
-&gt; TxBodyScriptData era
-&gt; Maybe (AuxiliaryData (ShelleyLedgerEra era))
-&gt; TxScriptValidity era
-&gt; TxBody era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">ShelleyTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra Era
</span><a href="#local-6989586621679483183"><span class="hs-identifier hs-var">era</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody (BabbageEra StandardCrypto)
TxBody (ShelleyLedgerEra Era)
</span><a href="#local-6989586621679483182"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">inputs :: Set (TxIn (Crypto (BabbageEra StandardCrypto)))
</span><a href="../../../../cardano-ledger-babbage/html/src"><span class="hs-identifier hs-var">Ledger.inputs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set (TxIn StandardCrypto)
Set (TxIn (Crypto (BabbageEra StandardCrypto)))
</span><a href="#local-6989586621679483181"><span class="hs-identifier hs-var">inputs'</span></a></span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">[Script (BabbageEra StandardCrypto)]
[Script (ShelleyLedgerEra Era)]
</span><a href="#local-6989586621679483180"><span class="hs-identifier hs-var">scripts'</span></a></span><span> </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483179"><span class="hs-identifier hs-var">scriptData'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (AuxiliaryData (ShelleyLedgerEra Era))
</span><a href="#local-6989586621679483178"><span class="hs-identifier hs-var">auxData</span></a></span><span> </span><span class="annot"><span class="annottext">TxScriptValidity Era
</span><a href="#local-6989586621679483177"><span class="hs-identifier hs-var">validity</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[KeyWitness Era]
</span><a href="#local-6989586621679483176"><span class="hs-identifier hs-var">wits</span></a></span><span>
</span><span id="line-201"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679483175"><span class="hs-identifier hs-var">utxos'</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-202"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-203"></span><span>    </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">ShelleyTxBody</span></a></span><span> </span><span id="local-6989586621679483183"><span class="annot"><span class="annottext">ShelleyBasedEra Era
</span><a href="#local-6989586621679483183"><span class="hs-identifier hs-var">era</span></a></span></span><span> </span><span id="local-6989586621679483182"><span class="annot"><span class="annottext">body :: TxBody (ShelleyLedgerEra Era)
</span><a href="#local-6989586621679483182"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="../../../../cardano-ledger-babbage/html/src"><span class="hs-identifier hs-type">Ledger.TxBody</span></a></span><span class="hs-special">{</span><span id="local-6989586621679483159"><span id="local-6989586621679483160"><span id="local-6989586621679483161"><span id="local-6989586621679483162"><span id="local-6989586621679483163"><span id="local-6989586621679483164"><span id="local-6989586621679483165"><span id="local-6989586621679483166"><span id="local-6989586621679483167"><span id="local-6989586621679483168"><span id="local-6989586621679483169"><span id="local-6989586621679483170"><span id="local-6989586621679483171"><span id="local-6989586621679483172"><span id="local-6989586621679483173"><span id="local-6989586621679483174"><span class="annot"><a href="#local-6989586621679483159"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621679483158"><span class="annot"><span class="annottext">[Script (ShelleyLedgerEra Era)]
</span><a href="#local-6989586621679483158"><span class="hs-identifier hs-var">scripts</span></a></span></span><span> </span><span id="local-6989586621679483157"><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483157"><span class="hs-identifier hs-var">scriptData</span></a></span></span><span> </span><span id="local-6989586621679483178"><span class="annot"><span class="annottext">Maybe (AuxiliaryData (ShelleyLedgerEra Era))
</span><a href="#local-6989586621679483178"><span class="hs-identifier hs-var">auxData</span></a></span></span><span> </span><span id="local-6989586621679483177"><span class="annot"><span class="annottext">TxScriptValidity Era
</span><a href="#local-6989586621679483177"><span class="hs-identifier hs-var">validity</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679483176"><span class="annot"><span class="annottext">[KeyWitness Era]
</span><a href="#local-6989586621679483176"><span class="hs-identifier hs-var">wits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tx Era
</span><a href="#local-6989586621679483189"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-204"></span><span>
</span><span id="line-205"></span><span>    </span><span id="local-6989586621679483156"><span class="annot"><span class="annottext">txIx :: Word
</span><a href="#local-6989586621679483156"><span class="hs-identifier hs-var hs-var">txIx</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Word] -&gt; Word
forall (t :: * -&gt; *) a. (Foldable t, Ord a) =&gt; t a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maximum</span></a></span><span> </span><span class="annot"><span class="annottext">([Word] -&gt; Word) -&gt; [Word] -&gt; Word
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Word -&gt; [Word] -&gt; [Word]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">(Word -&gt; Word) -&gt; [Word] -&gt; [Word]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679483155"><span class="hs-identifier hs-var">ix</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span> </span><span id="local-6989586621679483154"><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621679483154"><span class="hs-identifier hs-var">txId</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxIx</span></a></span><span> </span><span id="local-6989586621679483155"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679483155"><span class="hs-identifier hs-var">ix</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Map TxIn (TxOut CtxUTxO Era) -&gt; [TxIn]
forall k a. Map k a -&gt; [k]
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Map.keys</span></a></span><span> </span><span class="annot"><span class="annottext">(Map TxIn (TxOut CtxUTxO Era) -&gt; [TxIn])
-&gt; Map TxIn (TxOut CtxUTxO Era) -&gt; [TxIn]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO Era -&gt; Map TxIn (TxOut CtxUTxO Era)
forall era. UTxO era -&gt; Map TxIn (TxOut CtxUTxO era)
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var hs-var">unUTxO</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679483188"><span class="hs-identifier hs-var">utxos</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621679483154"><span class="hs-identifier hs-var">txId</span></a></span><span> </span><span class="annot"><span class="annottext">TxId -&gt; TxId -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#dummyTxId"><span class="hs-identifier hs-var">dummyTxId</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-206"></span><span>    </span><span id="local-6989586621679483153"><span class="annot"><span class="annottext">txIn :: TxIn
</span><a href="#local-6989586621679483153"><span class="hs-identifier hs-var hs-var">txIn</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxId -&gt; TxIx -&gt; TxIn
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">TxIn</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#dummyTxId"><span class="hs-identifier hs-var">dummyTxId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word -&gt; TxIx
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">TxIx</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679483156"><span class="hs-identifier hs-var">txIx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-207"></span><span>    </span><span id="local-6989586621679483152"><span class="annot"><span class="annottext">input :: TxIn StandardCrypto
</span><a href="#local-6989586621679483152"><span class="hs-identifier hs-var hs-var">input</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; TxIn StandardCrypto
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">toShelleyTxIn</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621679483153"><span class="hs-identifier hs-var">txIn</span></a></span><span>
</span><span id="line-208"></span><span>    </span><span id="local-6989586621679483181"><span class="annot"><span class="annottext">inputs' :: Set (TxIn StandardCrypto)
</span><a href="#local-6989586621679483181"><span class="hs-identifier hs-var hs-var">inputs'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxIn StandardCrypto
-&gt; Set (TxIn StandardCrypto) -&gt; Set (TxIn StandardCrypto)
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Set.insert</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn StandardCrypto
</span><a href="#local-6989586621679483152"><span class="hs-identifier hs-var">input</span></a></span><span> </span><span class="annot"><span class="annottext">Set (TxIn StandardCrypto)
Set (TxIn (Crypto (BabbageEra StandardCrypto)))
</span><a href="#local-6989586621679483174"><span class="hs-identifier hs-var">inputs</span></a></span><span>
</span><span id="line-209"></span><span>
</span><span id="line-210"></span><span>    </span><span id="local-6989586621679483151"><span class="annot"><span class="annottext">txOut :: TxOut CtxUTxO Era
</span><a href="#local-6989586621679483151"><span class="hs-identifier hs-var hs-var">txOut</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AddressAny
-&gt; Value -&gt; Datum -&gt; ReferenceScript Era -&gt; TxOut CtxUTxO Era
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#makeTxOut"><span class="hs-identifier hs-var">makeTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">AddressAny
</span><a href="#local-6989586621679483150"><span class="hs-identifier hs-var">addr</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679483186"><span class="hs-identifier hs-var">value</span></a></span><span> </span><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679483185"><span class="hs-identifier hs-var">datum</span></a></span><span> </span><span class="annot"><span class="annottext">ReferenceScript Era
forall era. ReferenceScript era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">ReferenceScriptNone</span></a></span><span>
</span><span id="line-211"></span><span>    </span><span id="local-6989586621679483175"><span class="annot"><span class="annottext">utxos' :: UTxO Era
</span><a href="#local-6989586621679483175"><span class="hs-identifier hs-var hs-var">utxos'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map TxIn (TxOut CtxUTxO Era) -&gt; UTxO Era
forall era. Map TxIn (TxOut CtxUTxO era) -&gt; UTxO era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">UTxO</span></a></span><span> </span><span class="annot"><span class="annottext">(Map TxIn (TxOut CtxUTxO Era) -&gt; UTxO Era)
-&gt; (UTxO Era -&gt; Map TxIn (TxOut CtxUTxO Era))
-&gt; UTxO Era
-&gt; UTxO Era
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn
-&gt; TxOut CtxUTxO Era
-&gt; Map TxIn (TxOut CtxUTxO Era)
-&gt; Map TxIn (TxOut CtxUTxO Era)
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Map.insert</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621679483153"><span class="hs-identifier hs-var">txIn</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut CtxUTxO Era
</span><a href="#local-6989586621679483151"><span class="hs-identifier hs-var">txOut</span></a></span><span> </span><span class="annot"><span class="annottext">(Map TxIn (TxOut CtxUTxO Era) -&gt; Map TxIn (TxOut CtxUTxO Era))
-&gt; (UTxO Era -&gt; Map TxIn (TxOut CtxUTxO Era))
-&gt; UTxO Era
-&gt; Map TxIn (TxOut CtxUTxO Era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO Era -&gt; Map TxIn (TxOut CtxUTxO Era)
forall era. UTxO era -&gt; Map TxIn (TxOut CtxUTxO era)
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var hs-var">unUTxO</span></a></span><span> </span><span class="annot"><span class="annottext">(UTxO Era -&gt; UTxO Era) -&gt; UTxO Era -&gt; UTxO Era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679483188"><span class="hs-identifier hs-var">utxos</span></a></span><span>
</span><span id="line-212"></span><span>
</span><span id="line-213"></span><span>    </span><span id="local-6989586621679483149"><span class="annot"><span class="annottext">scriptInEra :: ScriptInEra Era
</span><a href="#local-6989586621679483149"><span class="hs-identifier hs-var hs-var">scriptInEra</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScriptLanguageInEra PlutusScriptV2 Era
-&gt; Script PlutusScriptV2 -&gt; ScriptInEra Era
forall lang era.
ScriptLanguageInEra lang era -&gt; Script lang -&gt; ScriptInEra era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">ScriptInEra</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptLanguageInEra PlutusScriptV2 Era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">PlutusScriptV2InBabbage</span></a></span><span>
</span><span id="line-214"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PlutusScriptVersion PlutusScriptV2
-&gt; PlutusScript PlutusScriptV2 -&gt; Script PlutusScriptV2
forall lang.
PlutusScriptVersion lang -&gt; PlutusScript lang -&gt; Script lang
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">PlutusScript</span></a></span><span> </span><span class="annot"><span class="annottext">PlutusScriptVersion PlutusScriptV2
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">PlutusScriptV2</span></a></span><span> </span><span class="annot"><span class="annottext">PlutusScript PlutusScriptV2
</span><a href="#local-6989586621679483187"><span class="hs-identifier hs-var">script</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-215"></span><span>    </span><span id="local-6989586621679483144"><span class="annot"><span class="annottext">newScript :: Script (ShelleyLedgerEra Era)
</span><a href="#local-6989586621679483144"><span class="hs-identifier hs-var hs-var">newScript</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScriptInEra Era -&gt; Script (ShelleyLedgerEra Era)
forall era. ScriptInEra era -&gt; Script (ShelleyLedgerEra era)
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">toShelleyScript</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Test.QuickCheck.ContractModel.Internal.Common.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptInEra Era
</span><a href="#local-6989586621679483149"><span class="hs-identifier hs-var">scriptInEra</span></a></span><span>
</span><span id="line-216"></span><span>    </span><span id="local-6989586621679483180"><span class="annot"><span class="annottext">scripts' :: [Script (BabbageEra StandardCrypto)]
</span><a href="#local-6989586621679483180"><span class="hs-identifier hs-var hs-var">scripts'</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Script (BabbageEra StandardCrypto)]
[Script (ShelleyLedgerEra Era)]
</span><a href="#local-6989586621679483158"><span class="hs-identifier hs-var">scripts</span></a></span><span> </span><span class="annot"><span class="annottext">[Script (BabbageEra StandardCrypto)]
-&gt; [Script (BabbageEra StandardCrypto)]
-&gt; [Script (BabbageEra StandardCrypto)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Script (BabbageEra StandardCrypto)
Script (ShelleyLedgerEra Era)
</span><a href="#local-6989586621679483144"><span class="hs-identifier hs-var">newScript</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-217"></span><span>
</span><span id="line-218"></span><span>    </span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier hs-type">SJust</span></a></span><span> </span><span id="local-6989586621679483142"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679483142"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxIn StandardCrypto
-&gt; Set (TxIn StandardCrypto) -&gt; StrictMaybe Word64
forall elem container.
Indexable elem container =&gt;
elem -&gt; container -&gt; StrictMaybe Word64
</span><a href="../../../../cardano-ledger-alonzo/html/src"><span class="hs-identifier hs-var">Ledger.indexOf</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn StandardCrypto
</span><a href="#local-6989586621679483152"><span class="hs-identifier hs-var">input</span></a></span><span> </span><span class="annot"><span class="annottext">Set (TxIn StandardCrypto)
</span><a href="#local-6989586621679483181"><span class="hs-identifier hs-var">inputs'</span></a></span><span>
</span><span id="line-219"></span><span>    </span><span id="local-6989586621679483141"><span class="annot"><span class="annottext">idxUpdate :: Word64 -&gt; Word64
</span><a href="#local-6989586621679483141"><span class="hs-identifier hs-var hs-var">idxUpdate</span></a></span></span><span> </span><span id="local-6989586621679483140"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679483140"><span class="hs-identifier hs-var">idx'</span></a></span></span><span>
</span><span id="line-220"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679483140"><span class="hs-identifier hs-var">idx'</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679483142"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679483140"><span class="hs-identifier hs-var">idx'</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; Word64
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-221"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679483140"><span class="hs-identifier hs-var">idx'</span></a></span><span>
</span><span id="line-222"></span><span>
</span><span id="line-223"></span><span>    </span><span id="local-6989586621679483139"><span class="annot"><span class="annottext">datum' :: Data (BabbageEra StandardCrypto)
</span><a href="#local-6989586621679483139"><span class="hs-identifier hs-var hs-var">datum'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679483185"><span class="hs-identifier hs-var">datum</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-224"></span><span>      </span><span class="annot"><span class="annottext">Datum
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">TxOutDatumNone</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Data (BabbageEra StandardCrypto)
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Bad test!&quot;</span></span><span>
</span><span id="line-225"></span><span>      </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxOutDatumHash</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Data (BabbageEra StandardCrypto)
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Bad test!&quot;</span></span><span>
</span><span id="line-226"></span><span>      </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxOutDatumInTx</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptDataSupportedInEra Era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679483138"><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621679483138"><span class="hs-identifier hs-var">d</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Redeemer -&gt; Data (BabbageEra StandardCrypto)
forall ledgerera. Redeemer -&gt; Data ledgerera
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">toAlonzoData</span></a></span><span> </span><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621679483138"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-227"></span><span>      </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxOutDatumInline</span></a></span><span> </span><span class="annot"><span class="annottext">ReferenceTxInsScriptsInlineDatumsSupportedInEra Era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679483137"><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621679483137"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Redeemer -&gt; Data (BabbageEra StandardCrypto)
forall ledgerera. Redeemer -&gt; Data ledgerera
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">toAlonzoData</span></a></span><span> </span><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621679483137"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-228"></span><span>
</span><span id="line-229"></span><span>    </span><span id="local-6989586621679483179"><span class="annot"><span class="annottext">scriptData' :: TxBodyScriptData Era
</span><a href="#local-6989586621679483179"><span class="hs-identifier hs-var hs-var">scriptData'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64
-&gt; Data (ShelleyLedgerEra Era)
-&gt; (Data (ShelleyLedgerEra Era), ExUnits)
-&gt; TxBodyScriptData Era
-&gt; TxBodyScriptData Era
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#addScriptData"><span class="hs-identifier hs-var">addScriptData</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679483142"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="annot"><span class="annottext">Data (ShelleyLedgerEra Era)
Data (BabbageEra StandardCrypto)
</span><a href="#local-6989586621679483139"><span class="hs-identifier hs-var">datum'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Redeemer -&gt; Data (BabbageEra StandardCrypto)
forall ledgerera. Redeemer -&gt; Data ledgerera
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">toAlonzoData</span></a></span><span> </span><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621679483184"><span class="hs-identifier hs-var">redeemer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ExecutionUnits -&gt; ExUnits
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">toAlonzoExUnits</span></a></span><span> </span><span class="annot"><span class="annottext">(ExecutionUnits -&gt; ExUnits) -&gt; ExecutionUnits -&gt; ExUnits
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; ExecutionUnits
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">ExecutionUnits</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-230"></span><span>                </span><span class="annot"><span class="annottext">(TxBodyScriptData Era -&gt; TxBodyScriptData Era)
-&gt; TxBodyScriptData Era -&gt; TxBodyScriptData Era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Word64
-&gt; (Word64 -&gt; Word64)
-&gt; TxBodyScriptData Era
-&gt; TxBodyScriptData Era
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#recomputeScriptData"><span class="hs-identifier hs-var">recomputeScriptData</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Word64
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64
</span><a href="#local-6989586621679483141"><span class="hs-identifier hs-var">idxUpdate</span></a></span><span> </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483157"><span class="hs-identifier hs-var">scriptData</span></a></span><span>
</span><span id="line-231"></span><span>
</span><span id="line-232"></span><span>    </span><span id="local-6989586621679483133"><span class="annot"><span class="annottext">hash :: ScriptHash
</span><a href="#local-6989586621679483133"><span class="hs-identifier hs-var hs-var">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Script PlutusScriptV2 -&gt; ScriptHash
forall lang. Script lang -&gt; ScriptHash
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">hashScript</span></a></span><span> </span><span class="annot"><span class="annottext">(Script PlutusScriptV2 -&gt; ScriptHash)
-&gt; Script PlutusScriptV2 -&gt; ScriptHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PlutusScriptVersion PlutusScriptV2
-&gt; PlutusScript PlutusScriptV2 -&gt; Script PlutusScriptV2
forall lang.
PlutusScriptVersion lang -&gt; PlutusScript lang -&gt; Script lang
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">PlutusScript</span></a></span><span> </span><span class="annot"><span class="annottext">PlutusScriptVersion PlutusScriptV2
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">PlutusScriptV2</span></a></span><span> </span><span class="annot"><span class="annottext">PlutusScript PlutusScriptV2
</span><a href="#local-6989586621679483187"><span class="hs-identifier hs-var">script</span></a></span><span>
</span><span id="line-233"></span><span>    </span><span id="local-6989586621679483150"><span class="annot"><span class="annottext">addr :: AddressAny
</span><a href="#local-6989586621679483150"><span class="hs-identifier hs-var hs-var">addr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; AddressAny
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#scriptAddressAny"><span class="hs-identifier hs-var">scriptAddressAny</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621679483133"><span class="hs-identifier hs-var">hash</span></a></span><span>
</span><span id="line-234"></span><span>
</span><span id="line-235"></span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#applyTxMod"><span class="hs-identifier hs-var">applyTxMod</span></a></span><span> </span><span id="local-6989586621679483130"><span class="annot"><span class="annottext">Tx Era
</span><a href="#local-6989586621679483130"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span id="local-6989586621679483129"><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679483129"><span class="hs-identifier hs-var">utxos</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#AddSimpleScriptInput"><span class="hs-identifier hs-type">AddSimpleScriptInput</span></a></span><span> </span><span id="local-6989586621679483128"><span class="annot"><span class="annottext">SimpleScript SimpleScriptV2
</span><a href="#local-6989586621679483128"><span class="hs-identifier hs-var">script</span></a></span></span><span> </span><span id="local-6989586621679483127"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679483127"><span class="hs-identifier hs-var">value</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-236"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">TxBody Era -&gt; [KeyWitness Era] -&gt; Tx Era
forall era. TxBody era -&gt; [KeyWitness era] -&gt; Tx era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">Tx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra Era
-&gt; TxBody (ShelleyLedgerEra Era)
-&gt; [Script (ShelleyLedgerEra Era)]
-&gt; TxBodyScriptData Era
-&gt; Maybe (AuxiliaryData (ShelleyLedgerEra Era))
-&gt; TxScriptValidity Era
-&gt; TxBody Era
forall era.
ShelleyBasedEra era
-&gt; TxBody (ShelleyLedgerEra era)
-&gt; [Script (ShelleyLedgerEra era)]
-&gt; TxBodyScriptData era
-&gt; Maybe (AuxiliaryData (ShelleyLedgerEra era))
-&gt; TxScriptValidity era
-&gt; TxBody era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">ShelleyTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra Era
</span><a href="#local-6989586621679483126"><span class="hs-identifier hs-var">era</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody (BabbageEra StandardCrypto)
TxBody (ShelleyLedgerEra Era)
</span><a href="#local-6989586621679483125"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">inputs :: Set (TxIn (Crypto (BabbageEra StandardCrypto)))
</span><a href="../../../../cardano-ledger-babbage/html/src"><span class="hs-identifier hs-var">Ledger.inputs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set (TxIn StandardCrypto)
Set (TxIn (Crypto (BabbageEra StandardCrypto)))
</span><a href="#local-6989586621679483124"><span class="hs-identifier hs-var">inputs'</span></a></span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">[Script (BabbageEra StandardCrypto)]
[Script (ShelleyLedgerEra Era)]
</span><a href="#local-6989586621679483123"><span class="hs-identifier hs-var">scripts'</span></a></span><span> </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483122"><span class="hs-identifier hs-var">scriptData'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (AuxiliaryData (ShelleyLedgerEra Era))
</span><a href="#local-6989586621679483121"><span class="hs-identifier hs-var">auxData</span></a></span><span> </span><span class="annot"><span class="annottext">TxScriptValidity Era
</span><a href="#local-6989586621679483120"><span class="hs-identifier hs-var">validity</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[KeyWitness Era]
</span><a href="#local-6989586621679483119"><span class="hs-identifier hs-var">wits</span></a></span><span>
</span><span id="line-237"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679483118"><span class="hs-identifier hs-var">utxos'</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-238"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-239"></span><span>    </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">ShelleyTxBody</span></a></span><span> </span><span id="local-6989586621679483126"><span class="annot"><span class="annottext">ShelleyBasedEra Era
</span><a href="#local-6989586621679483126"><span class="hs-identifier hs-var">era</span></a></span></span><span> </span><span id="local-6989586621679483125"><span class="annot"><span class="annottext">body :: TxBody (ShelleyLedgerEra Era)
</span><a href="#local-6989586621679483125"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="../../../../cardano-ledger-babbage/html/src"><span class="hs-identifier hs-type">Ledger.TxBody</span></a></span><span class="hs-special">{</span><span id="local-6989586621679483102"><span id="local-6989586621679483103"><span id="local-6989586621679483104"><span id="local-6989586621679483105"><span id="local-6989586621679483106"><span id="local-6989586621679483107"><span id="local-6989586621679483108"><span id="local-6989586621679483109"><span id="local-6989586621679483110"><span id="local-6989586621679483111"><span id="local-6989586621679483112"><span id="local-6989586621679483113"><span id="local-6989586621679483114"><span id="local-6989586621679483115"><span id="local-6989586621679483116"><span id="local-6989586621679483117"><span class="annot"><a href="#local-6989586621679483102"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621679483101"><span class="annot"><span class="annottext">[Script (ShelleyLedgerEra Era)]
</span><a href="#local-6989586621679483101"><span class="hs-identifier hs-var">scripts</span></a></span></span><span> </span><span id="local-6989586621679483100"><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483100"><span class="hs-identifier hs-var">scriptData</span></a></span></span><span> </span><span id="local-6989586621679483121"><span class="annot"><span class="annottext">Maybe (AuxiliaryData (ShelleyLedgerEra Era))
</span><a href="#local-6989586621679483121"><span class="hs-identifier hs-var">auxData</span></a></span></span><span> </span><span id="local-6989586621679483120"><span class="annot"><span class="annottext">TxScriptValidity Era
</span><a href="#local-6989586621679483120"><span class="hs-identifier hs-var">validity</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679483119"><span class="annot"><span class="annottext">[KeyWitness Era]
</span><a href="#local-6989586621679483119"><span class="hs-identifier hs-var">wits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tx Era
</span><a href="#local-6989586621679483130"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-240"></span><span>
</span><span id="line-241"></span><span>    </span><span id="local-6989586621679483099"><span class="annot"><span class="annottext">txIx :: Word
</span><a href="#local-6989586621679483099"><span class="hs-identifier hs-var hs-var">txIx</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Word] -&gt; Word
forall (t :: * -&gt; *) a. (Foldable t, Ord a) =&gt; t a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maximum</span></a></span><span> </span><span class="annot"><span class="annottext">([Word] -&gt; Word) -&gt; [Word] -&gt; Word
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Word -&gt; [Word] -&gt; [Word]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">(Word -&gt; Word) -&gt; [Word] -&gt; [Word]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679483098"><span class="hs-identifier hs-var">ix</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span> </span><span id="local-6989586621679483097"><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621679483097"><span class="hs-identifier hs-var">txId</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxIx</span></a></span><span> </span><span id="local-6989586621679483098"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679483098"><span class="hs-identifier hs-var">ix</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Map TxIn (TxOut CtxUTxO Era) -&gt; [TxIn]
forall k a. Map k a -&gt; [k]
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Map.keys</span></a></span><span> </span><span class="annot"><span class="annottext">(Map TxIn (TxOut CtxUTxO Era) -&gt; [TxIn])
-&gt; Map TxIn (TxOut CtxUTxO Era) -&gt; [TxIn]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO Era -&gt; Map TxIn (TxOut CtxUTxO Era)
forall era. UTxO era -&gt; Map TxIn (TxOut CtxUTxO era)
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var hs-var">unUTxO</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679483129"><span class="hs-identifier hs-var">utxos</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621679483097"><span class="hs-identifier hs-var">txId</span></a></span><span> </span><span class="annot"><span class="annottext">TxId -&gt; TxId -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#dummyTxId"><span class="hs-identifier hs-var">dummyTxId</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-242"></span><span>    </span><span id="local-6989586621679483096"><span class="annot"><span class="annottext">txIn :: TxIn
</span><a href="#local-6989586621679483096"><span class="hs-identifier hs-var hs-var">txIn</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxId -&gt; TxIx -&gt; TxIn
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">TxIn</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#dummyTxId"><span class="hs-identifier hs-var">dummyTxId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word -&gt; TxIx
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">TxIx</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679483099"><span class="hs-identifier hs-var">txIx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-243"></span><span>    </span><span id="local-6989586621679483095"><span class="annot"><span class="annottext">input :: TxIn StandardCrypto
</span><a href="#local-6989586621679483095"><span class="hs-identifier hs-var hs-var">input</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; TxIn StandardCrypto
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">toShelleyTxIn</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621679483096"><span class="hs-identifier hs-var">txIn</span></a></span><span>
</span><span id="line-244"></span><span>    </span><span id="local-6989586621679483124"><span class="annot"><span class="annottext">inputs' :: Set (TxIn StandardCrypto)
</span><a href="#local-6989586621679483124"><span class="hs-identifier hs-var hs-var">inputs'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxIn StandardCrypto
-&gt; Set (TxIn StandardCrypto) -&gt; Set (TxIn StandardCrypto)
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Set.insert</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn StandardCrypto
</span><a href="#local-6989586621679483095"><span class="hs-identifier hs-var">input</span></a></span><span> </span><span class="annot"><span class="annottext">Set (TxIn StandardCrypto)
Set (TxIn (Crypto (BabbageEra StandardCrypto)))
</span><a href="#local-6989586621679483117"><span class="hs-identifier hs-var">inputs</span></a></span><span>
</span><span id="line-245"></span><span>
</span><span id="line-246"></span><span>    </span><span id="local-6989586621679483094"><span class="annot"><span class="annottext">txOut :: TxOut CtxUTxO Era
</span><a href="#local-6989586621679483094"><span class="hs-identifier hs-var hs-var">txOut</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AddressAny
-&gt; Value -&gt; Datum -&gt; ReferenceScript Era -&gt; TxOut CtxUTxO Era
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#makeTxOut"><span class="hs-identifier hs-var">makeTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">AddressAny
</span><a href="#local-6989586621679483093"><span class="hs-identifier hs-var">addr</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679483127"><span class="hs-identifier hs-var">value</span></a></span><span> </span><span class="annot"><span class="annottext">Datum
forall ctx era. TxOutDatum ctx era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">TxOutDatumNone</span></a></span><span> </span><span class="annot"><span class="annottext">ReferenceScript Era
forall era. ReferenceScript era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">ReferenceScriptNone</span></a></span><span>
</span><span id="line-247"></span><span>    </span><span id="local-6989586621679483118"><span class="annot"><span class="annottext">utxos' :: UTxO Era
</span><a href="#local-6989586621679483118"><span class="hs-identifier hs-var hs-var">utxos'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map TxIn (TxOut CtxUTxO Era) -&gt; UTxO Era
forall era. Map TxIn (TxOut CtxUTxO era) -&gt; UTxO era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">UTxO</span></a></span><span> </span><span class="annot"><span class="annottext">(Map TxIn (TxOut CtxUTxO Era) -&gt; UTxO Era)
-&gt; (UTxO Era -&gt; Map TxIn (TxOut CtxUTxO Era))
-&gt; UTxO Era
-&gt; UTxO Era
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn
-&gt; TxOut CtxUTxO Era
-&gt; Map TxIn (TxOut CtxUTxO Era)
-&gt; Map TxIn (TxOut CtxUTxO Era)
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Map.insert</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621679483096"><span class="hs-identifier hs-var">txIn</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut CtxUTxO Era
</span><a href="#local-6989586621679483094"><span class="hs-identifier hs-var">txOut</span></a></span><span> </span><span class="annot"><span class="annottext">(Map TxIn (TxOut CtxUTxO Era) -&gt; Map TxIn (TxOut CtxUTxO Era))
-&gt; (UTxO Era -&gt; Map TxIn (TxOut CtxUTxO Era))
-&gt; UTxO Era
-&gt; Map TxIn (TxOut CtxUTxO Era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO Era -&gt; Map TxIn (TxOut CtxUTxO Era)
forall era. UTxO era -&gt; Map TxIn (TxOut CtxUTxO era)
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var hs-var">unUTxO</span></a></span><span> </span><span class="annot"><span class="annottext">(UTxO Era -&gt; UTxO Era) -&gt; UTxO Era -&gt; UTxO Era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679483129"><span class="hs-identifier hs-var">utxos</span></a></span><span>
</span><span id="line-248"></span><span>
</span><span id="line-249"></span><span>    </span><span id="local-6989586621679483092"><span class="annot"><span class="annottext">scriptInEra :: ScriptInEra Era
</span><a href="#local-6989586621679483092"><span class="hs-identifier hs-var hs-var">scriptInEra</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScriptLanguageInEra SimpleScriptV2 Era
-&gt; Script SimpleScriptV2 -&gt; ScriptInEra Era
forall lang era.
ScriptLanguageInEra lang era -&gt; Script lang -&gt; ScriptInEra era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">ScriptInEra</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptLanguageInEra SimpleScriptV2 Era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">SimpleScriptV2InBabbage</span></a></span><span>
</span><span id="line-250"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SimpleScriptVersion SimpleScriptV2
-&gt; SimpleScript SimpleScriptV2 -&gt; Script SimpleScriptV2
forall lang.
SimpleScriptVersion lang -&gt; SimpleScript lang -&gt; Script lang
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">SimpleScript</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleScriptVersion SimpleScriptV2
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">SimpleScriptV2</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleScript SimpleScriptV2
</span><a href="#local-6989586621679483128"><span class="hs-identifier hs-var">script</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-251"></span><span>    </span><span id="local-6989586621679483088"><span class="annot"><span class="annottext">newScript :: Script (ShelleyLedgerEra Era)
</span><a href="#local-6989586621679483088"><span class="hs-identifier hs-var hs-var">newScript</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScriptInEra Era -&gt; Script (ShelleyLedgerEra Era)
forall era. ScriptInEra era -&gt; Script (ShelleyLedgerEra era)
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">toShelleyScript</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Test.QuickCheck.ContractModel.Internal.Common.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptInEra Era
</span><a href="#local-6989586621679483092"><span class="hs-identifier hs-var">scriptInEra</span></a></span><span>
</span><span id="line-252"></span><span>    </span><span id="local-6989586621679483123"><span class="annot"><span class="annottext">scripts' :: [Script (BabbageEra StandardCrypto)]
</span><a href="#local-6989586621679483123"><span class="hs-identifier hs-var hs-var">scripts'</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Script (BabbageEra StandardCrypto)]
[Script (ShelleyLedgerEra Era)]
</span><a href="#local-6989586621679483101"><span class="hs-identifier hs-var">scripts</span></a></span><span> </span><span class="annot"><span class="annottext">[Script (BabbageEra StandardCrypto)]
-&gt; [Script (BabbageEra StandardCrypto)]
-&gt; [Script (BabbageEra StandardCrypto)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Script (BabbageEra StandardCrypto)
Script (ShelleyLedgerEra Era)
</span><a href="#local-6989586621679483088"><span class="hs-identifier hs-var">newScript</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span>    </span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier hs-type">SJust</span></a></span><span> </span><span id="local-6989586621679483087"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679483087"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxIn StandardCrypto
-&gt; Set (TxIn StandardCrypto) -&gt; StrictMaybe Word64
forall elem container.
Indexable elem container =&gt;
elem -&gt; container -&gt; StrictMaybe Word64
</span><a href="../../../../cardano-ledger-alonzo/html/src"><span class="hs-identifier hs-var">Ledger.indexOf</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn StandardCrypto
</span><a href="#local-6989586621679483095"><span class="hs-identifier hs-var">input</span></a></span><span> </span><span class="annot"><span class="annottext">Set (TxIn StandardCrypto)
</span><a href="#local-6989586621679483124"><span class="hs-identifier hs-var">inputs'</span></a></span><span>
</span><span id="line-255"></span><span>    </span><span id="local-6989586621679483086"><span class="annot"><span class="annottext">idxUpdate :: Word64 -&gt; Word64
</span><a href="#local-6989586621679483086"><span class="hs-identifier hs-var hs-var">idxUpdate</span></a></span></span><span> </span><span id="local-6989586621679483085"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679483085"><span class="hs-identifier hs-var">idx'</span></a></span></span><span>
</span><span id="line-256"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679483085"><span class="hs-identifier hs-var">idx'</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679483087"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679483085"><span class="hs-identifier hs-var">idx'</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; Word64
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-257"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679483085"><span class="hs-identifier hs-var">idx'</span></a></span><span>
</span><span id="line-258"></span><span>
</span><span id="line-259"></span><span>    </span><span id="local-6989586621679483122"><span class="annot"><span class="annottext">scriptData' :: TxBodyScriptData Era
</span><a href="#local-6989586621679483122"><span class="hs-identifier hs-var hs-var">scriptData'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Word64
-&gt; (Word64 -&gt; Word64)
-&gt; TxBodyScriptData Era
-&gt; TxBodyScriptData Era
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#recomputeScriptData"><span class="hs-identifier hs-var">recomputeScriptData</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Word64
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64
</span><a href="#local-6989586621679483086"><span class="hs-identifier hs-var">idxUpdate</span></a></span><span> </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483100"><span class="hs-identifier hs-var">scriptData</span></a></span><span>
</span><span id="line-260"></span><span>
</span><span id="line-261"></span><span>    </span><span id="local-6989586621679483093"><span class="annot"><span class="annottext">addr :: AddressAny
</span><a href="#local-6989586621679483093"><span class="hs-identifier hs-var hs-var">addr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; AddressAny
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#scriptAddressAny"><span class="hs-identifier hs-var">scriptAddressAny</span></a></span><span> </span><span class="annot"><span class="annottext">(ScriptHash -&gt; AddressAny) -&gt; ScriptHash -&gt; AddressAny
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Script SimpleScriptV2 -&gt; ScriptHash
forall lang. Script lang -&gt; ScriptHash
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">hashScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SimpleScriptVersion SimpleScriptV2
-&gt; SimpleScript SimpleScriptV2 -&gt; Script SimpleScriptV2
forall lang.
SimpleScriptVersion lang -&gt; SimpleScript lang -&gt; Script lang
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">SimpleScript</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleScriptVersion SimpleScriptV2
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">SimpleScriptV2</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleScript SimpleScriptV2
</span><a href="#local-6989586621679483128"><span class="hs-identifier hs-var">script</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-262"></span><span>
</span><span id="line-263"></span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#applyTxMod"><span class="hs-identifier hs-var">applyTxMod</span></a></span><span> </span><span id="local-6989586621679483084"><span class="annot"><span class="annottext">Tx Era
</span><a href="#local-6989586621679483084"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span id="local-6989586621679483083"><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679483083"><span class="hs-identifier hs-var">utxos</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#ChangeOutput"><span class="hs-identifier hs-type">ChangeOutput</span></a></span><span> </span><span id="local-6989586621679483082"><span class="annot"><span class="annottext">TxIx
</span><a href="#local-6989586621679483082"><span class="hs-identifier hs-var">ix</span></a></span></span><span> </span><span id="local-6989586621679483081"><span class="annot"><span class="annottext">Maybe AddressAny
</span><a href="#local-6989586621679483081"><span class="hs-identifier hs-var">maddr</span></a></span></span><span> </span><span id="local-6989586621679483080"><span class="annot"><span class="annottext">Maybe Value
</span><a href="#local-6989586621679483080"><span class="hs-identifier hs-var">mvalue</span></a></span></span><span> </span><span id="local-6989586621679483079"><span class="annot"><span class="annottext">Maybe Datum
</span><a href="#local-6989586621679483079"><span class="hs-identifier hs-var">mdatum</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-264"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxBody Era -&gt; [KeyWitness Era] -&gt; Tx Era
forall era. TxBody era -&gt; [KeyWitness era] -&gt; Tx era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">Tx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra Era
-&gt; TxBody (ShelleyLedgerEra Era)
-&gt; [Script (ShelleyLedgerEra Era)]
-&gt; TxBodyScriptData Era
-&gt; Maybe (AuxiliaryData (ShelleyLedgerEra Era))
-&gt; TxScriptValidity Era
-&gt; TxBody Era
forall era.
ShelleyBasedEra era
-&gt; TxBody (ShelleyLedgerEra era)
-&gt; [Script (ShelleyLedgerEra era)]
-&gt; TxBodyScriptData era
-&gt; Maybe (AuxiliaryData (ShelleyLedgerEra era))
-&gt; TxScriptValidity era
-&gt; TxBody era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">ShelleyTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra Era
</span><a href="#local-6989586621679483078"><span class="hs-identifier hs-var">era</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody (BabbageEra StandardCrypto)
TxBody (ShelleyLedgerEra Era)
</span><a href="#local-6989586621679483077"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">outputs :: StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
</span><a href="../../../../cardano-ledger-babbage/html/src"><span class="hs-identifier hs-var">Ledger.outputs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
</span><a href="#local-6989586621679483076"><span class="hs-identifier hs-var">outputs'</span></a></span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">[Script (ShelleyLedgerEra Era)]
</span><a href="#local-6989586621679483075"><span class="hs-identifier hs-var">scripts</span></a></span><span> </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483074"><span class="hs-identifier hs-var">scriptData'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (AuxiliaryData (ShelleyLedgerEra Era))
</span><a href="#local-6989586621679483073"><span class="hs-identifier hs-var">auxData</span></a></span><span> </span><span class="annot"><span class="annottext">TxScriptValidity Era
</span><a href="#local-6989586621679483072"><span class="hs-identifier hs-var">validity</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[KeyWitness Era]
</span><a href="#local-6989586621679483071"><span class="hs-identifier hs-var">wits</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679483083"><span class="hs-identifier hs-var">utxos</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-265"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-266"></span><span>    </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679483070"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679483070"><span class="hs-identifier hs-var">idx</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxIx
</span><a href="#local-6989586621679483082"><span class="hs-identifier hs-var">ix</span></a></span><span>
</span><span id="line-267"></span><span>    </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span id="local-6989586621679483069"><span class="annot"><span class="annottext">bdy :: TxBody Era
</span><a href="#local-6989586621679483069"><span class="hs-identifier hs-var">bdy</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">ShelleyTxBody</span></a></span><span> </span><span id="local-6989586621679483078"><span class="annot"><span class="annottext">ShelleyBasedEra Era
</span><a href="#local-6989586621679483078"><span class="hs-identifier hs-var">era</span></a></span></span><span> </span><span id="local-6989586621679483077"><span class="annot"><span class="annottext">body :: TxBody (ShelleyLedgerEra Era)
</span><a href="#local-6989586621679483077"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="../../../../cardano-ledger-babbage/html/src"><span class="hs-identifier hs-type">Ledger.TxBody</span></a></span><span class="hs-special">{</span><span id="local-6989586621679483053"><span id="local-6989586621679483054"><span id="local-6989586621679483055"><span id="local-6989586621679483056"><span id="local-6989586621679483057"><span id="local-6989586621679483058"><span id="local-6989586621679483059"><span id="local-6989586621679483060"><span id="local-6989586621679483061"><span id="local-6989586621679483062"><span id="local-6989586621679483063"><span id="local-6989586621679483064"><span id="local-6989586621679483065"><span id="local-6989586621679483066"><span id="local-6989586621679483067"><span id="local-6989586621679483068"><span class="annot"><a href="#local-6989586621679483053"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621679483075"><span class="annot"><span class="annottext">[Script (ShelleyLedgerEra Era)]
</span><a href="#local-6989586621679483075"><span class="hs-identifier hs-var">scripts</span></a></span></span><span> </span><span id="local-6989586621679483052"><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483052"><span class="hs-identifier hs-var">scriptData</span></a></span></span><span> </span><span id="local-6989586621679483073"><span class="annot"><span class="annottext">Maybe (AuxiliaryData (ShelleyLedgerEra Era))
</span><a href="#local-6989586621679483073"><span class="hs-identifier hs-var">auxData</span></a></span></span><span> </span><span id="local-6989586621679483072"><span class="annot"><span class="annottext">TxScriptValidity Era
</span><a href="#local-6989586621679483072"><span class="hs-identifier hs-var">validity</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679483071"><span class="annot"><span class="annottext">[KeyWitness Era]
</span><a href="#local-6989586621679483071"><span class="hs-identifier hs-var">wits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tx Era
</span><a href="#local-6989586621679483084"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-268"></span><span>    </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxBody</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxBodyContent</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">txOuts :: forall build era. TxBodyContent build era -&gt; [TxOut CtxTx era]
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">txOuts</span></a></span><span class="hs-glyph">=</span><span id="local-6989586621679483050"><span class="annot"><span class="annottext">[TxOut CtxTx Era]
</span><a href="#local-6989586621679483050"><span class="hs-identifier hs-var">txOuts</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxBody Era
</span><a href="#local-6989586621679483069"><span class="hs-identifier hs-var">bdy</span></a></span><span>
</span><span id="line-269"></span><span>    </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxOut</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">AddressInEra</span></a></span><span> </span><span class="annot"><span class="annottext">AddressTypeInEra addrtype Era
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Address addrtype -&gt; AddressAny
forall addr. Address addr -&gt; AddressAny
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">toAddressAny</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679483046"><span class="annot"><span class="annottext">AddressAny
</span><a href="#local-6989586621679483046"><span class="hs-identifier hs-var">addr</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxOutValue Era -&gt; Value
forall era. TxOutValue era -&gt; Value
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">txOutValueToValue</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679483044"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679483044"><span class="hs-identifier hs-var">value</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679483043"><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679483043"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span id="local-6989586621679483042"><span class="annot"><span class="annottext">ReferenceScript Era
</span><a href="#local-6989586621679483042"><span class="hs-identifier hs-var">rscript</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TxOut CtxTx Era]
</span><a href="#local-6989586621679483050"><span class="hs-identifier hs-var">txOuts</span></a></span><span> </span><span class="annot"><span class="annottext">[TxOut CtxTx Era] -&gt; Int -&gt; TxOut CtxTx Era
forall a. [a] -&gt; Int -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">!!</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679483070"><span class="hs-identifier hs-var">idx</span></a></span><span>
</span><span id="line-270"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679483040"><span class="annot"><span class="annottext">StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
</span><a href="#local-6989586621679483040"><span class="hs-identifier hs-var">outputsStart</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Sized (TxOut (BabbageEra StandardCrypto))
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-operator hs-type">Seq.:&lt;|</span></a></span><span> </span><span id="local-6989586621679483039"><span class="annot"><span class="annottext">StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
</span><a href="#local-6989586621679483039"><span class="hs-identifier hs-var">outputsEnd</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
-&gt; (StrictSeq (Sized (TxOut (BabbageEra StandardCrypto))),
    StrictSeq (Sized (TxOut (BabbageEra StandardCrypto))))
forall a. Int -&gt; StrictSeq a -&gt; (StrictSeq a, StrictSeq a)
</span><a href="../../../../strict-containers/html/src"><span class="hs-identifier hs-var">Seq.splitAt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679483070"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
</span><a href="#local-6989586621679483065"><span class="hs-identifier hs-var">outputs</span></a></span><span>
</span><span id="line-271"></span><span>    </span><span id="local-6989586621679483076"><span class="annot"><span class="annottext">outputs' :: StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
</span><a href="#local-6989586621679483076"><span class="hs-identifier hs-var hs-var">outputs'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
</span><a href="#local-6989586621679483040"><span class="hs-identifier hs-var">outputsStart</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
-&gt; StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
-&gt; StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
forall a. StrictSeq a -&gt; StrictSeq a -&gt; StrictSeq a
</span><a href="../../../../strict-containers/html/src"><span class="hs-operator hs-var">Seq.&gt;&lt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxOut (BabbageEra StandardCrypto)
-&gt; Sized (TxOut (BabbageEra StandardCrypto))
forall a. ToCBOR a =&gt; a -&gt; Sized a
</span><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-var">CBOR.mkSized</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut (BabbageEra StandardCrypto)
TxOut (BabbageEra StandardCrypto)
</span><a href="#local-6989586621679483037"><span class="hs-identifier hs-var">out</span></a></span><span> </span><span class="annot"><span class="annottext">Sized (TxOut (BabbageEra StandardCrypto))
-&gt; StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
-&gt; StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
forall a. a -&gt; StrictSeq a -&gt; StrictSeq a
</span><a href="../../../../strict-containers/html/src"><span class="hs-operator hs-var">Seq.:&lt;|</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
</span><a href="#local-6989586621679483039"><span class="hs-identifier hs-var">outputsEnd</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-272"></span><span>    </span><span id="local-6989586621679483037"><span class="annot"><span class="annottext">out :: TxOut (BabbageEra StandardCrypto)
</span><a href="#local-6989586621679483037"><span class="hs-identifier hs-var hs-var">out</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra Era
-&gt; TxOut CtxUTxO Era -&gt; TxOut (BabbageEra StandardCrypto)
forall era ledgerera.
(ShelleyLedgerEra era ~ ledgerera) =&gt;
ShelleyBasedEra era -&gt; TxOut CtxUTxO era -&gt; TxOut ledgerera
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">toShelleyTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra Era
forall era. IsShelleyBasedEra era =&gt; ShelleyBasedEra era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">shelleyBasedEra</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AddressAny
-&gt; Value -&gt; Datum -&gt; ReferenceScript Era -&gt; TxOut CtxUTxO Era
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#makeTxOut"><span class="hs-identifier hs-var">makeTxOut</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AddressAny -&gt; Maybe AddressAny -&gt; AddressAny
forall a. a -&gt; Maybe a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">AddressAny
</span><a href="#local-6989586621679483046"><span class="hs-identifier hs-var">addr</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe AddressAny
</span><a href="#local-6989586621679483081"><span class="hs-identifier hs-var">maddr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-273"></span><span>                                                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value -&gt; Maybe Value -&gt; Value
forall a. a -&gt; Maybe a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679483044"><span class="hs-identifier hs-var">value</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Value
</span><a href="#local-6989586621679483080"><span class="hs-identifier hs-var">mvalue</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-274"></span><span>                                                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Datum -&gt; Maybe Datum -&gt; Datum
forall a. a -&gt; Maybe a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679483043"><span class="hs-identifier hs-var">datum</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Datum
</span><a href="#local-6989586621679483079"><span class="hs-identifier hs-var">mdatum</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-275"></span><span>                                                    </span><span class="annot"><span class="annottext">ReferenceScript Era
</span><a href="#local-6989586621679483042"><span class="hs-identifier hs-var">rscript</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-276"></span><span>    </span><span id="local-6989586621679483074"><span class="annot"><span class="annottext">scriptData' :: TxBodyScriptData Era
</span><a href="#local-6989586621679483074"><span class="hs-identifier hs-var hs-var">scriptData'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Datum
</span><a href="#local-6989586621679483079"><span class="hs-identifier hs-var">mdatum</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-277"></span><span>      </span><span class="annot"><span class="annottext">Maybe Datum
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483052"><span class="hs-identifier hs-var">scriptData</span></a></span><span>
</span><span id="line-278"></span><span>      </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679483036"><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679483036"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679483036"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-279"></span><span>        </span><span class="annot"><span class="annottext">Datum
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">TxOutDatumNone</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483052"><span class="hs-identifier hs-var">scriptData</span></a></span><span>
</span><span id="line-280"></span><span>        </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxOutDatumHash</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483052"><span class="hs-identifier hs-var">scriptData</span></a></span><span>
</span><span id="line-281"></span><span>        </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxOutDatumInTx</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptDataSupportedInEra Era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679483035"><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621679483035"><span class="hs-identifier hs-var">d</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Data (ShelleyLedgerEra Era)
-&gt; TxBodyScriptData Era -&gt; TxBodyScriptData Era
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#addDatum"><span class="hs-identifier hs-var">addDatum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Redeemer -&gt; Data (BabbageEra StandardCrypto)
forall ledgerera. Redeemer -&gt; Data ledgerera
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">toAlonzoData</span></a></span><span> </span><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621679483035"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483052"><span class="hs-identifier hs-var">scriptData</span></a></span><span>
</span><span id="line-282"></span><span>        </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxOutDatumInline</span></a></span><span> </span><span class="annot"><span class="annottext">ReferenceTxInsScriptsInlineDatumsSupportedInEra Era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679483034"><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621679483034"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Data (ShelleyLedgerEra Era)
-&gt; TxBodyScriptData Era -&gt; TxBodyScriptData Era
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#addDatum"><span class="hs-identifier hs-var">addDatum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Redeemer -&gt; Data (BabbageEra StandardCrypto)
forall ledgerera. Redeemer -&gt; Data ledgerera
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">toAlonzoData</span></a></span><span> </span><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621679483034"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483052"><span class="hs-identifier hs-var">scriptData</span></a></span><span>
</span><span id="line-283"></span><span>
</span><span id="line-284"></span><span>
</span><span id="line-285"></span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#applyTxMod"><span class="hs-identifier hs-var">applyTxMod</span></a></span><span> </span><span id="local-6989586621679483033"><span class="annot"><span class="annottext">Tx Era
</span><a href="#local-6989586621679483033"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span id="local-6989586621679483032"><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679483032"><span class="hs-identifier hs-var">utxos</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#ChangeInput"><span class="hs-identifier hs-type">ChangeInput</span></a></span><span> </span><span id="local-6989586621679483031"><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621679483031"><span class="hs-identifier hs-var">txIn</span></a></span></span><span> </span><span id="local-6989586621679483030"><span class="annot"><span class="annottext">Maybe AddressAny
</span><a href="#local-6989586621679483030"><span class="hs-identifier hs-var">maddr</span></a></span></span><span> </span><span id="local-6989586621679483029"><span class="annot"><span class="annottext">Maybe Value
</span><a href="#local-6989586621679483029"><span class="hs-identifier hs-var">mvalue</span></a></span></span><span> </span><span id="local-6989586621679483028"><span class="annot"><span class="annottext">Maybe Datum
</span><a href="#local-6989586621679483028"><span class="hs-identifier hs-var">mdatum</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-286"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxBody Era -&gt; [KeyWitness Era] -&gt; Tx Era
forall era. TxBody era -&gt; [KeyWitness era] -&gt; Tx era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">Tx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra Era
-&gt; TxBody (ShelleyLedgerEra Era)
-&gt; [Script (ShelleyLedgerEra Era)]
-&gt; TxBodyScriptData Era
-&gt; Maybe (AuxiliaryData (ShelleyLedgerEra Era))
-&gt; TxScriptValidity Era
-&gt; TxBody Era
forall era.
ShelleyBasedEra era
-&gt; TxBody (ShelleyLedgerEra era)
-&gt; [Script (ShelleyLedgerEra era)]
-&gt; TxBodyScriptData era
-&gt; Maybe (AuxiliaryData (ShelleyLedgerEra era))
-&gt; TxScriptValidity era
-&gt; TxBody era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">ShelleyTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra Era
</span><a href="#local-6989586621679483027"><span class="hs-identifier hs-var">era</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody (ShelleyLedgerEra Era)
</span><a href="#local-6989586621679483026"><span class="hs-identifier hs-var">body</span></a></span><span> </span><span class="annot"><span class="annottext">[Script (ShelleyLedgerEra Era)]
</span><a href="#local-6989586621679483025"><span class="hs-identifier hs-var">scripts</span></a></span><span> </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483024"><span class="hs-identifier hs-var">scriptData'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (AuxiliaryData (ShelleyLedgerEra Era))
</span><a href="#local-6989586621679483023"><span class="hs-identifier hs-var">auxData</span></a></span><span> </span><span class="annot"><span class="annottext">TxScriptValidity Era
</span><a href="#local-6989586621679483022"><span class="hs-identifier hs-var">validity</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[KeyWitness Era]
</span><a href="#local-6989586621679483021"><span class="hs-identifier hs-var">wits</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679483020"><span class="hs-identifier hs-var">utxos'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-287"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-288"></span><span>    </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">ShelleyTxBody</span></a></span><span> </span><span id="local-6989586621679483027"><span class="annot"><span class="annottext">ShelleyBasedEra Era
</span><a href="#local-6989586621679483027"><span class="hs-identifier hs-var">era</span></a></span></span><span> </span><span id="local-6989586621679483026"><span class="annot"><span class="annottext">TxBody (ShelleyLedgerEra Era)
</span><a href="#local-6989586621679483026"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span id="local-6989586621679483025"><span class="annot"><span class="annottext">[Script (ShelleyLedgerEra Era)]
</span><a href="#local-6989586621679483025"><span class="hs-identifier hs-var">scripts</span></a></span></span><span> </span><span id="local-6989586621679483019"><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483019"><span class="hs-identifier hs-var">scriptData</span></a></span></span><span> </span><span id="local-6989586621679483023"><span class="annot"><span class="annottext">Maybe (AuxiliaryData (ShelleyLedgerEra Era))
</span><a href="#local-6989586621679483023"><span class="hs-identifier hs-var">auxData</span></a></span></span><span> </span><span id="local-6989586621679483022"><span class="annot"><span class="annottext">TxScriptValidity Era
</span><a href="#local-6989586621679483022"><span class="hs-identifier hs-var">validity</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679483021"><span class="annot"><span class="annottext">[KeyWitness Era]
</span><a href="#local-6989586621679483021"><span class="hs-identifier hs-var">wits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tx Era
</span><a href="#local-6989586621679483033"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-289"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679483018"><span class="annot"><span class="annottext">AddressAny
</span><a href="#local-6989586621679483018"><span class="hs-identifier hs-var">addr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679483017"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679483017"><span class="hs-identifier hs-var">value</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679483016"><span class="annot"><span class="annottext">TxOutDatum CtxUTxO Era
</span><a href="#local-6989586621679483016"><span class="hs-identifier hs-var">utxoDatum</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679483015"><span class="annot"><span class="annottext">ReferenceScript Era
</span><a href="#local-6989586621679483015"><span class="hs-identifier hs-var">rscript</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; Map TxIn (TxOut CtxUTxO Era) -&gt; Maybe (TxOut CtxUTxO Era)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621679483031"><span class="hs-identifier hs-var">txIn</span></a></span><span> </span><span class="annot"><span class="annottext">(Map TxIn (TxOut CtxUTxO Era) -&gt; Maybe (TxOut CtxUTxO Era))
-&gt; Map TxIn (TxOut CtxUTxO Era) -&gt; Maybe (TxOut CtxUTxO Era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO Era -&gt; Map TxIn (TxOut CtxUTxO Era)
forall era. UTxO era -&gt; Map TxIn (TxOut CtxUTxO era)
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var hs-var">unUTxO</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679483032"><span class="hs-identifier hs-var">utxos</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-290"></span><span>      </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxOut</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">AddressInEra</span></a></span><span> </span><span class="annot"><span class="annottext">AddressTypeInEra addrtype Era
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Address addrtype -&gt; AddressAny
forall addr. Address addr -&gt; AddressAny
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">toAddressAny</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679483013"><span class="annot"><span class="annottext">AddressAny
</span><a href="#local-6989586621679483013"><span class="hs-identifier hs-var">addr</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxOutValue Era -&gt; Value
forall era. TxOutValue era -&gt; Value
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">txOutValueToValue</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679483012"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679483012"><span class="hs-identifier hs-var">value</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679483011"><span class="annot"><span class="annottext">TxOutDatum CtxUTxO Era
</span><a href="#local-6989586621679483011"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span id="local-6989586621679483010"><span class="annot"><span class="annottext">ReferenceScript Era
</span><a href="#local-6989586621679483010"><span class="hs-identifier hs-var">rscript</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-291"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AddressAny
</span><a href="#local-6989586621679483013"><span class="hs-identifier hs-var">addr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679483012"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TxOutDatum CtxUTxO Era
</span><a href="#local-6989586621679483011"><span class="hs-identifier hs-var">datum</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ReferenceScript Era
</span><a href="#local-6989586621679483010"><span class="hs-identifier hs-var">rscript</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-292"></span><span>      </span><span class="annot"><span class="annottext">Maybe (TxOut CtxUTxO Era)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (AddressAny, Value, TxOutDatum CtxUTxO Era, ReferenceScript Era)
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">(String
 -&gt; (AddressAny, Value, TxOutDatum CtxUTxO Era,
     ReferenceScript Era))
-&gt; String
-&gt; (AddressAny, Value, TxOutDatum CtxUTxO Era, ReferenceScript Era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Index &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621679483031"><span class="hs-identifier hs-var">txIn</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; doesn't exist.&quot;</span></span><span>
</span><span id="line-293"></span><span>
</span><span id="line-294"></span><span>    </span><span id="local-6989586621679483009"><span class="annot"><span class="annottext">txOut :: TxOut CtxUTxO Era
</span><a href="#local-6989586621679483009"><span class="hs-identifier hs-var hs-var">txOut</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AddressInEra Era
-&gt; TxOutValue Era
-&gt; TxOutDatum CtxUTxO Era
-&gt; ReferenceScript Era
-&gt; TxOut CtxUTxO Era
forall ctx era.
AddressInEra era
-&gt; TxOutValue era
-&gt; TxOutDatum ctx era
-&gt; ReferenceScript era
-&gt; TxOut ctx era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">TxOut</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AddressAny -&gt; AddressInEra Era
forall era. IsShelleyBasedEra era =&gt; AddressAny -&gt; AddressInEra era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">anyAddressInShelleyBasedEra</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AddressAny -&gt; Maybe AddressAny -&gt; AddressAny
forall a. a -&gt; Maybe a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">AddressAny
</span><a href="#local-6989586621679483018"><span class="hs-identifier hs-var">addr</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe AddressAny
</span><a href="#local-6989586621679483030"><span class="hs-identifier hs-var">maddr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-295"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MultiAssetSupportedInEra Era -&gt; Value -&gt; TxOutValue Era
forall era. MultiAssetSupportedInEra era -&gt; Value -&gt; TxOutValue era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">TxOutValue</span></a></span><span> </span><span class="annot"><span class="annottext">MultiAssetSupportedInEra Era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">MultiAssetInBabbageEra</span></a></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; TxOutValue Era) -&gt; Value -&gt; TxOutValue Era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Maybe Value -&gt; Value
forall a. a -&gt; Maybe a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679483017"><span class="hs-identifier hs-var">value</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Value
</span><a href="#local-6989586621679483029"><span class="hs-identifier hs-var">mvalue</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-296"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxOutDatum CtxUTxO Era
-&gt; Maybe (TxOutDatum CtxUTxO Era) -&gt; TxOutDatum CtxUTxO Era
forall a. a -&gt; Maybe a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutDatum CtxUTxO Era
</span><a href="#local-6989586621679483016"><span class="hs-identifier hs-var">utxoDatum</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (TxOutDatum CtxUTxO Era) -&gt; TxOutDatum CtxUTxO Era)
-&gt; Maybe (TxOutDatum CtxUTxO Era) -&gt; TxOutDatum CtxUTxO Era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Datum -&gt; TxOutDatum CtxUTxO Era
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#toCtxUTxODatum"><span class="hs-identifier hs-var">toCtxUTxODatum</span></a></span><span> </span><span class="annot"><span class="annottext">(Datum -&gt; TxOutDatum CtxUTxO Era)
-&gt; Maybe Datum -&gt; Maybe (TxOutDatum CtxUTxO Era)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Datum
</span><a href="#local-6989586621679483028"><span class="hs-identifier hs-var">mdatum</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-297"></span><span>                  </span><span class="annot"><span class="annottext">ReferenceScript Era
</span><a href="#local-6989586621679483015"><span class="hs-identifier hs-var">rscript</span></a></span><span>
</span><span id="line-298"></span><span>    </span><span id="local-6989586621679483020"><span class="annot"><span class="annottext">utxos' :: UTxO Era
</span><a href="#local-6989586621679483020"><span class="hs-identifier hs-var hs-var">utxos'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map TxIn (TxOut CtxUTxO Era) -&gt; UTxO Era
forall era. Map TxIn (TxOut CtxUTxO era) -&gt; UTxO era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">UTxO</span></a></span><span> </span><span class="annot"><span class="annottext">(Map TxIn (TxOut CtxUTxO Era) -&gt; UTxO Era)
-&gt; (UTxO Era -&gt; Map TxIn (TxOut CtxUTxO Era))
-&gt; UTxO Era
-&gt; UTxO Era
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn
-&gt; TxOut CtxUTxO Era
-&gt; Map TxIn (TxOut CtxUTxO Era)
-&gt; Map TxIn (TxOut CtxUTxO Era)
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Map.insert</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621679483031"><span class="hs-identifier hs-var">txIn</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut CtxUTxO Era
</span><a href="#local-6989586621679483009"><span class="hs-identifier hs-var">txOut</span></a></span><span> </span><span class="annot"><span class="annottext">(Map TxIn (TxOut CtxUTxO Era) -&gt; Map TxIn (TxOut CtxUTxO Era))
-&gt; (UTxO Era -&gt; Map TxIn (TxOut CtxUTxO Era))
-&gt; UTxO Era
-&gt; Map TxIn (TxOut CtxUTxO Era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO Era -&gt; Map TxIn (TxOut CtxUTxO Era)
forall era. UTxO era -&gt; Map TxIn (TxOut CtxUTxO era)
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var hs-var">unUTxO</span></a></span><span> </span><span class="annot"><span class="annottext">(UTxO Era -&gt; UTxO Era) -&gt; UTxO Era -&gt; UTxO Era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679483032"><span class="hs-identifier hs-var">utxos</span></a></span><span>
</span><span id="line-299"></span><span>
</span><span id="line-300"></span><span>    </span><span id="local-6989586621679483024"><span class="annot"><span class="annottext">scriptData' :: TxBodyScriptData Era
</span><a href="#local-6989586621679483024"><span class="hs-identifier hs-var hs-var">scriptData'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Datum
</span><a href="#local-6989586621679483028"><span class="hs-identifier hs-var">mdatum</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-301"></span><span>      </span><span class="annot"><span class="annottext">Maybe Datum
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483019"><span class="hs-identifier hs-var">scriptData</span></a></span><span>
</span><span id="line-302"></span><span>      </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Datum
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">TxOutDatumNone</span></a></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483019"><span class="hs-identifier hs-var">scriptData</span></a></span><span>
</span><span id="line-303"></span><span>      </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxOutDatumHash</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483019"><span class="hs-identifier hs-var">scriptData</span></a></span><span>
</span><span id="line-304"></span><span>      </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxOutDatumInTx</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptDataSupportedInEra Era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679483003"><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621679483003"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Data (ShelleyLedgerEra Era)
-&gt; TxBodyScriptData Era -&gt; TxBodyScriptData Era
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#addDatum"><span class="hs-identifier hs-var">addDatum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Redeemer -&gt; Data (BabbageEra StandardCrypto)
forall ledgerera. Redeemer -&gt; Data ledgerera
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">toAlonzoData</span></a></span><span> </span><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621679483003"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483019"><span class="hs-identifier hs-var">scriptData</span></a></span><span>
</span><span id="line-305"></span><span>      </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxOutDatumInline</span></a></span><span> </span><span class="annot"><span class="annottext">ReferenceTxInsScriptsInlineDatumsSupportedInEra Era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679483002"><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621679483002"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Data (ShelleyLedgerEra Era)
-&gt; TxBodyScriptData Era -&gt; TxBodyScriptData Era
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#addDatum"><span class="hs-identifier hs-var">addDatum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Redeemer -&gt; Data (BabbageEra StandardCrypto)
forall ledgerera. Redeemer -&gt; Data ledgerera
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">toAlonzoData</span></a></span><span> </span><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621679483002"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679483019"><span class="hs-identifier hs-var">scriptData</span></a></span><span>
</span><span id="line-306"></span><span>
</span><span id="line-307"></span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#applyTxMod"><span class="hs-identifier hs-var">applyTxMod</span></a></span><span> </span><span id="local-6989586621679483001"><span class="annot"><span class="annottext">Tx Era
</span><a href="#local-6989586621679483001"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span id="local-6989586621679483000"><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679483000"><span class="hs-identifier hs-var">utxos</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#ChangeScriptInput"><span class="hs-identifier hs-type">ChangeScriptInput</span></a></span><span> </span><span id="local-6989586621679482999"><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621679482999"><span class="hs-identifier hs-var">txIn</span></a></span></span><span> </span><span id="local-6989586621679482998"><span class="annot"><span class="annottext">Maybe Value
</span><a href="#local-6989586621679482998"><span class="hs-identifier hs-var">mvalue</span></a></span></span><span> </span><span id="local-6989586621679482997"><span class="annot"><span class="annottext">Maybe Datum
</span><a href="#local-6989586621679482997"><span class="hs-identifier hs-var">mdatum</span></a></span></span><span> </span><span id="local-6989586621679482996"><span class="annot"><span class="annottext">Maybe Redeemer
</span><a href="#local-6989586621679482996"><span class="hs-identifier hs-var">mredeemer</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-308"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxBody Era -&gt; [KeyWitness Era] -&gt; Tx Era
forall era. TxBody era -&gt; [KeyWitness era] -&gt; Tx era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">Tx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShelleyBasedEra Era
-&gt; TxBody (ShelleyLedgerEra Era)
-&gt; [Script (ShelleyLedgerEra Era)]
-&gt; TxBodyScriptData Era
-&gt; Maybe (AuxiliaryData (ShelleyLedgerEra Era))
-&gt; TxScriptValidity Era
-&gt; TxBody Era
forall era.
ShelleyBasedEra era
-&gt; TxBody (ShelleyLedgerEra era)
-&gt; [Script (ShelleyLedgerEra era)]
-&gt; TxBodyScriptData era
-&gt; Maybe (AuxiliaryData (ShelleyLedgerEra era))
-&gt; TxScriptValidity era
-&gt; TxBody era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">ShelleyTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra Era
</span><a href="#local-6989586621679482995"><span class="hs-identifier hs-var">era</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody (ShelleyLedgerEra Era)
</span><a href="#local-6989586621679482994"><span class="hs-identifier hs-var">body</span></a></span><span> </span><span class="annot"><span class="annottext">[Script (ShelleyLedgerEra Era)]
</span><a href="#local-6989586621679482993"><span class="hs-identifier hs-var">scripts</span></a></span><span> </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679482992"><span class="hs-identifier hs-var">scriptData'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (AuxiliaryData (ShelleyLedgerEra Era))
</span><a href="#local-6989586621679482991"><span class="hs-identifier hs-var">auxData</span></a></span><span> </span><span class="annot"><span class="annottext">TxScriptValidity Era
</span><a href="#local-6989586621679482990"><span class="hs-identifier hs-var">validity</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[KeyWitness Era]
</span><a href="#local-6989586621679482989"><span class="hs-identifier hs-var">wits</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679482988"><span class="hs-identifier hs-var">utxos'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-309"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-310"></span><span>    </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">ShelleyTxBody</span></a></span><span> </span><span id="local-6989586621679482995"><span class="annot"><span class="annottext">ShelleyBasedEra Era
</span><a href="#local-6989586621679482995"><span class="hs-identifier hs-var">era</span></a></span></span><span> </span><span id="local-6989586621679482994"><span class="annot"><span class="annottext">body :: TxBody (ShelleyLedgerEra Era)
</span><a href="#local-6989586621679482994"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="../../../../cardano-ledger-babbage/html/src"><span class="hs-identifier hs-type">Ledger.TxBody</span></a></span><span class="hs-special">{</span><span id="local-6989586621679482972"><span id="local-6989586621679482973"><span id="local-6989586621679482974"><span id="local-6989586621679482975"><span id="local-6989586621679482976"><span id="local-6989586621679482977"><span id="local-6989586621679482978"><span id="local-6989586621679482979"><span id="local-6989586621679482980"><span id="local-6989586621679482981"><span id="local-6989586621679482982"><span id="local-6989586621679482983"><span id="local-6989586621679482984"><span id="local-6989586621679482985"><span id="local-6989586621679482986"><span id="local-6989586621679482987"><span class="annot"><a href="#local-6989586621679482972"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621679482993"><span class="annot"><span class="annottext">[Script (ShelleyLedgerEra Era)]
</span><a href="#local-6989586621679482993"><span class="hs-identifier hs-var">scripts</span></a></span></span><span> </span><span id="local-6989586621679482971"><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679482971"><span class="hs-identifier hs-var">scriptData</span></a></span></span><span> </span><span id="local-6989586621679482991"><span class="annot"><span class="annottext">Maybe (AuxiliaryData (ShelleyLedgerEra Era))
</span><a href="#local-6989586621679482991"><span class="hs-identifier hs-var">auxData</span></a></span></span><span> </span><span id="local-6989586621679482990"><span class="annot"><span class="annottext">TxScriptValidity Era
</span><a href="#local-6989586621679482990"><span class="hs-identifier hs-var">validity</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679482989"><span class="annot"><span class="annottext">[KeyWitness Era]
</span><a href="#local-6989586621679482989"><span class="hs-identifier hs-var">wits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tx Era
</span><a href="#local-6989586621679483001"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-311"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679482970"><span class="annot"><span class="annottext">AddressInEra Era
</span><a href="#local-6989586621679482970"><span class="hs-identifier hs-var">addr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679482969"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679482969"><span class="hs-identifier hs-var">value</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679482968"><span class="annot"><span class="annottext">TxOutDatum CtxUTxO Era
</span><a href="#local-6989586621679482968"><span class="hs-identifier hs-var">utxoDatum</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679482967"><span class="annot"><span class="annottext">ReferenceScript Era
</span><a href="#local-6989586621679482967"><span class="hs-identifier hs-var">rscript</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; Map TxIn (TxOut CtxUTxO Era) -&gt; Maybe (TxOut CtxUTxO Era)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621679482999"><span class="hs-identifier hs-var">txIn</span></a></span><span> </span><span class="annot"><span class="annottext">(Map TxIn (TxOut CtxUTxO Era) -&gt; Maybe (TxOut CtxUTxO Era))
-&gt; Map TxIn (TxOut CtxUTxO Era) -&gt; Maybe (TxOut CtxUTxO Era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO Era -&gt; Map TxIn (TxOut CtxUTxO Era)
forall era. UTxO era -&gt; Map TxIn (TxOut CtxUTxO era)
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var hs-var">unUTxO</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679483000"><span class="hs-identifier hs-var">utxos</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-312"></span><span>      </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxOut</span></a></span><span> </span><span id="local-6989586621679482966"><span class="annot"><span class="annottext">AddressInEra Era
</span><a href="#local-6989586621679482966"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxOutValue Era -&gt; Value
forall era. TxOutValue era -&gt; Value
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">txOutValueToValue</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679482965"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679482965"><span class="hs-identifier hs-var">value</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679482964"><span class="annot"><span class="annottext">TxOutDatum CtxUTxO Era
</span><a href="#local-6989586621679482964"><span class="hs-identifier hs-var">utxoDatum</span></a></span></span><span> </span><span id="local-6989586621679482963"><span class="annot"><span class="annottext">ReferenceScript Era
</span><a href="#local-6989586621679482963"><span class="hs-identifier hs-var">rscript</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-313"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AddressInEra Era
</span><a href="#local-6989586621679482966"><span class="hs-identifier hs-var">addr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679482965"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TxOutDatum CtxUTxO Era
</span><a href="#local-6989586621679482964"><span class="hs-identifier hs-var">utxoDatum</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ReferenceScript Era
</span><a href="#local-6989586621679482963"><span class="hs-identifier hs-var">rscript</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-314"></span><span>      </span><span class="annot"><span class="annottext">Maybe (TxOut CtxUTxO Era)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (AddressInEra Era, Value, TxOutDatum CtxUTxO Era,
    ReferenceScript Era)
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">(String
 -&gt; (AddressInEra Era, Value, TxOutDatum CtxUTxO Era,
     ReferenceScript Era))
-&gt; String
-&gt; (AddressInEra Era, Value, TxOutDatum CtxUTxO Era,
    ReferenceScript Era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;The index &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621679482999"><span class="hs-identifier hs-var">txIn</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; doesn't exist.&quot;</span></span><span>
</span><span id="line-315"></span><span>
</span><span id="line-316"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679482962"><span class="annot"><span class="annottext">Data (BabbageEra StandardCrypto)
</span><a href="#local-6989586621679482962"><span class="hs-identifier hs-var">datum</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679482961"><span class="annot"><span class="annottext">Data (BabbageEra StandardCrypto)
</span><a href="#local-6989586621679482961"><span class="hs-identifier hs-var">redeemer</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679482960"><span class="annot"><span class="annottext">ExUnits
</span><a href="#local-6989586621679482960"><span class="hs-identifier hs-var">exunits</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679482971"><span class="hs-identifier hs-var">scriptData</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-317"></span><span>      </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">TxBodyNoScriptData</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Data (BabbageEra StandardCrypto),
    (Data (BabbageEra StandardCrypto), ExUnits))
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;No script data available&quot;</span></span><span>
</span><span id="line-318"></span><span>      </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxBodyScriptData</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptDataSupportedInEra Era
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-alonzo/html/src"><span class="hs-identifier hs-type">Ledger.TxDats</span></a></span><span> </span><span id="local-6989586621679482956"><span class="annot"><a href="#local-6989586621679482956"><span class="hs-identifier hs-var">dats</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-alonzo/html/src"><span class="hs-identifier hs-type">Ledger.Redeemers</span></a></span><span> </span><span id="local-6989586621679482954"><span class="annot"><a href="#local-6989586621679482954"><span class="hs-identifier hs-var">rdmrs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-319"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (Data (BabbageEra StandardCrypto))
-&gt; Data (BabbageEra StandardCrypto)
forall a. HasCallStack =&gt; Maybe a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromJust</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (Data (BabbageEra StandardCrypto))
 -&gt; Data (BabbageEra StandardCrypto))
-&gt; Maybe (Data (BabbageEra StandardCrypto))
-&gt; Data (BabbageEra StandardCrypto)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">DataHash StandardCrypto
-&gt; Map (DataHash StandardCrypto) (Data (BabbageEra StandardCrypto))
-&gt; Maybe (Data (BabbageEra StandardCrypto))
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">DataHash StandardCrypto
</span><a href="#local-6989586621679482952"><span class="hs-identifier hs-var">utxoDatumHash</span></a></span><span> </span><span class="annot"><span class="annottext">Map (DataHash StandardCrypto) (Data (BabbageEra StandardCrypto))
Map
  (DataHash (Crypto (BabbageEra StandardCrypto)))
  (Data (BabbageEra StandardCrypto))
</span><a href="#local-6989586621679482956"><span class="hs-identifier hs-var">dats</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-320"></span><span>         </span><span class="annot"><span class="annottext">Maybe (Data (BabbageEra StandardCrypto), ExUnits)
-&gt; (Data (BabbageEra StandardCrypto), ExUnits)
forall a. HasCallStack =&gt; Maybe a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromJust</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (Data (BabbageEra StandardCrypto), ExUnits)
 -&gt; (Data (BabbageEra StandardCrypto), ExUnits))
-&gt; Maybe (Data (BabbageEra StandardCrypto), ExUnits)
-&gt; (Data (BabbageEra StandardCrypto), ExUnits)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">RdmrPtr
-&gt; Map RdmrPtr (Data (BabbageEra StandardCrypto), ExUnits)
-&gt; Maybe (Data (BabbageEra StandardCrypto), ExUnits)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tag -&gt; Word64 -&gt; RdmrPtr
</span><a href="../../../../cardano-ledger-alonzo/html/src"><span class="hs-identifier hs-var">Ledger.RdmrPtr</span></a></span><span> </span><span class="annot"><span class="annottext">Tag
</span><a href="../../../../cardano-ledger-alonzo/html/src"><span class="hs-identifier hs-var">Ledger.Spend</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679482949"><span class="hs-identifier hs-var">idx</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map RdmrPtr (Data (BabbageEra StandardCrypto), ExUnits)
</span><a href="#local-6989586621679482954"><span class="hs-identifier hs-var">rdmrs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-321"></span><span>
</span><span id="line-322"></span><span>    </span><span id="local-6989586621679482952"><span class="annot"><span class="annottext">utxoDatumHash :: DataHash StandardCrypto
</span><a href="#local-6989586621679482952"><span class="hs-identifier hs-var hs-var">utxoDatumHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxOutDatum CtxUTxO Era
</span><a href="#local-6989586621679482968"><span class="hs-identifier hs-var">utxoDatum</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-323"></span><span>      </span><span class="annot"><span class="annottext">TxOutDatum CtxUTxO Era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">TxOutDatumNone</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; DataHash StandardCrypto
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;No existing datum&quot;</span></span><span>
</span><span id="line-324"></span><span>      </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxOutDatumInline</span></a></span><span> </span><span class="annot"><span class="annottext">ReferenceTxInsScriptsInlineDatumsSupportedInEra Era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679482948"><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621679482948"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Hash Redeemer -&gt; DataHash StandardCrypto
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">coerce</span></a></span><span> </span><span class="annot"><span class="annottext">(Hash Redeemer -&gt; DataHash StandardCrypto)
-&gt; Hash Redeemer -&gt; DataHash StandardCrypto
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Redeemer -&gt; Hash Redeemer
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">hashScriptData</span></a></span><span> </span><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621679482948"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-325"></span><span>      </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxOutDatumHash</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptDataSupportedInEra Era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679482946"><span class="annot"><span class="annottext">Hash Redeemer
</span><a href="#local-6989586621679482946"><span class="hs-identifier hs-var">h</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Hash Redeemer -&gt; DataHash StandardCrypto
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">coerce</span></a></span><span> </span><span class="annot"><span class="annottext">Hash Redeemer
</span><a href="#local-6989586621679482946"><span class="hs-identifier hs-var">h</span></a></span><span>
</span><span id="line-326"></span><span>
</span><span id="line-327"></span><span>    </span><span id="local-6989586621679482945"><span class="annot"><span class="annottext">adatum :: Data (BabbageEra StandardCrypto)
</span><a href="#local-6989586621679482945"><span class="hs-identifier hs-var hs-var">adatum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Datum
</span><a href="#local-6989586621679482997"><span class="hs-identifier hs-var">mdatum</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-328"></span><span>      </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Datum
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">TxOutDatumNone</span></a></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Data (BabbageEra StandardCrypto)
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Bad test!&quot;</span></span><span>
</span><span id="line-329"></span><span>      </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxOutDatumHash</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Data (BabbageEra StandardCrypto)
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Bad test!&quot;</span></span><span>
</span><span id="line-330"></span><span>      </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxOutDatumInTx</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptDataSupportedInEra Era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679482944"><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621679482944"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Redeemer -&gt; Data (BabbageEra StandardCrypto)
forall ledgerera. Redeemer -&gt; Data ledgerera
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">toAlonzoData</span></a></span><span> </span><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621679482944"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-331"></span><span>      </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxOutDatumInline</span></a></span><span> </span><span class="annot"><span class="annottext">ReferenceTxInsScriptsInlineDatumsSupportedInEra Era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679482943"><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621679482943"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Redeemer -&gt; Data (BabbageEra StandardCrypto)
forall ledgerera. Redeemer -&gt; Data ledgerera
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">toAlonzoData</span></a></span><span> </span><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621679482943"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-332"></span><span>      </span><span class="annot"><span class="annottext">Maybe Datum
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Data (BabbageEra StandardCrypto)
</span><a href="#local-6989586621679482962"><span class="hs-identifier hs-var">datum</span></a></span><span>
</span><span id="line-333"></span><span>
</span><span id="line-334"></span><span>    </span><span id="local-6989586621679482942"><span class="annot"><span class="annottext">txOut :: TxOut CtxUTxO Era
</span><a href="#local-6989586621679482942"><span class="hs-identifier hs-var hs-var">txOut</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AddressInEra Era
-&gt; TxOutValue Era
-&gt; TxOutDatum CtxUTxO Era
-&gt; ReferenceScript Era
-&gt; TxOut CtxUTxO Era
forall ctx era.
AddressInEra era
-&gt; TxOutValue era
-&gt; TxOutDatum ctx era
-&gt; ReferenceScript era
-&gt; TxOut ctx era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">TxOut</span></a></span><span> </span><span class="annot"><span class="annottext">AddressInEra Era
</span><a href="#local-6989586621679482970"><span class="hs-identifier hs-var">addr</span></a></span><span>
</span><span id="line-335"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MultiAssetSupportedInEra Era -&gt; Value -&gt; TxOutValue Era
forall era. MultiAssetSupportedInEra era -&gt; Value -&gt; TxOutValue era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">TxOutValue</span></a></span><span> </span><span class="annot"><span class="annottext">MultiAssetSupportedInEra Era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">MultiAssetInBabbageEra</span></a></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; TxOutValue Era) -&gt; Value -&gt; TxOutValue Era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Maybe Value -&gt; Value
forall a. a -&gt; Maybe a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679482969"><span class="hs-identifier hs-var">value</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Value
</span><a href="#local-6989586621679482998"><span class="hs-identifier hs-var">mvalue</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-336"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxOutDatum CtxUTxO Era
-&gt; Maybe (TxOutDatum CtxUTxO Era) -&gt; TxOutDatum CtxUTxO Era
forall a. a -&gt; Maybe a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutDatum CtxUTxO Era
</span><a href="#local-6989586621679482968"><span class="hs-identifier hs-var">utxoDatum</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (TxOutDatum CtxUTxO Era) -&gt; TxOutDatum CtxUTxO Era)
-&gt; Maybe (TxOutDatum CtxUTxO Era) -&gt; TxOutDatum CtxUTxO Era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Datum -&gt; TxOutDatum CtxUTxO Era
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#toCtxUTxODatum"><span class="hs-identifier hs-var">toCtxUTxODatum</span></a></span><span> </span><span class="annot"><span class="annottext">(Datum -&gt; TxOutDatum CtxUTxO Era)
-&gt; Maybe Datum -&gt; Maybe (TxOutDatum CtxUTxO Era)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Datum
</span><a href="#local-6989586621679482997"><span class="hs-identifier hs-var">mdatum</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-337"></span><span>                  </span><span class="annot"><span class="annottext">ReferenceScript Era
</span><a href="#local-6989586621679482967"><span class="hs-identifier hs-var">rscript</span></a></span><span>
</span><span id="line-338"></span><span>
</span><span id="line-339"></span><span>    </span><span id="local-6989586621679482988"><span class="annot"><span class="annottext">utxos' :: UTxO Era
</span><a href="#local-6989586621679482988"><span class="hs-identifier hs-var hs-var">utxos'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map TxIn (TxOut CtxUTxO Era) -&gt; UTxO Era
forall era. Map TxIn (TxOut CtxUTxO era) -&gt; UTxO era
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">UTxO</span></a></span><span> </span><span class="annot"><span class="annottext">(Map TxIn (TxOut CtxUTxO Era) -&gt; UTxO Era)
-&gt; (UTxO Era -&gt; Map TxIn (TxOut CtxUTxO Era))
-&gt; UTxO Era
-&gt; UTxO Era
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn
-&gt; TxOut CtxUTxO Era
-&gt; Map TxIn (TxOut CtxUTxO Era)
-&gt; Map TxIn (TxOut CtxUTxO Era)
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Map.insert</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621679482999"><span class="hs-identifier hs-var">txIn</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut CtxUTxO Era
</span><a href="#local-6989586621679482942"><span class="hs-identifier hs-var">txOut</span></a></span><span> </span><span class="annot"><span class="annottext">(Map TxIn (TxOut CtxUTxO Era) -&gt; Map TxIn (TxOut CtxUTxO Era))
-&gt; (UTxO Era -&gt; Map TxIn (TxOut CtxUTxO Era))
-&gt; UTxO Era
-&gt; Map TxIn (TxOut CtxUTxO Era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO Era -&gt; Map TxIn (TxOut CtxUTxO Era)
forall era. UTxO era -&gt; Map TxIn (TxOut CtxUTxO era)
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var hs-var">unUTxO</span></a></span><span> </span><span class="annot"><span class="annottext">(UTxO Era -&gt; UTxO Era) -&gt; UTxO Era -&gt; UTxO Era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679483000"><span class="hs-identifier hs-var">utxos</span></a></span><span>
</span><span id="line-340"></span><span>
</span><span id="line-341"></span><span>    </span><span id="local-6989586621679482949"><span class="annot"><span class="annottext">idx :: Word64
</span><a href="#local-6989586621679482949"><span class="hs-identifier hs-var hs-var">idx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxIn StandardCrypto
-&gt; Set (TxIn StandardCrypto) -&gt; StrictMaybe Word64
forall elem container.
Indexable elem container =&gt;
elem -&gt; container -&gt; StrictMaybe Word64
</span><a href="../../../../cardano-ledger-alonzo/html/src"><span class="hs-identifier hs-var">Ledger.indexOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxIn -&gt; TxIn StandardCrypto
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">toShelleyTxIn</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621679482999"><span class="hs-identifier hs-var">txIn</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set (TxIn StandardCrypto)
Set (TxIn (Crypto (BabbageEra StandardCrypto)))
</span><a href="#local-6989586621679482987"><span class="hs-identifier hs-var">inputs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-342"></span><span>      </span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier hs-type">SJust</span></a></span><span> </span><span id="local-6989586621679482941"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679482941"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679482941"><span class="hs-identifier hs-var">idx</span></a></span><span>
</span><span id="line-343"></span><span>      </span><span class="annot"><span class="annottext">StrictMaybe Word64
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Word64
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;The impossible happened!&quot;</span></span><span>
</span><span id="line-344"></span><span>
</span><span id="line-345"></span><span>    </span><span id="local-6989586621679482992"><span class="annot"><span class="annottext">scriptData' :: TxBodyScriptData Era
</span><a href="#local-6989586621679482992"><span class="hs-identifier hs-var hs-var">scriptData'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64
-&gt; Data (ShelleyLedgerEra Era)
-&gt; (Data (ShelleyLedgerEra Era), ExUnits)
-&gt; TxBodyScriptData Era
-&gt; TxBodyScriptData Era
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#addScriptData"><span class="hs-identifier hs-var">addScriptData</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679482949"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="annot"><span class="annottext">Data (ShelleyLedgerEra Era)
Data (BabbageEra StandardCrypto)
</span><a href="#local-6989586621679482945"><span class="hs-identifier hs-var">adatum</span></a></span><span>
</span><span id="line-346"></span><span>                                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Data (BabbageEra StandardCrypto)
-&gt; Maybe (Data (BabbageEra StandardCrypto))
-&gt; Data (BabbageEra StandardCrypto)
forall a. a -&gt; Maybe a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Data (BabbageEra StandardCrypto)
</span><a href="#local-6989586621679482961"><span class="hs-identifier hs-var">redeemer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Redeemer -&gt; Data (BabbageEra StandardCrypto)
forall ledgerera. Redeemer -&gt; Data ledgerera
</span><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-var">toAlonzoData</span></a></span><span> </span><span class="annot"><span class="annottext">(Redeemer -&gt; Data (BabbageEra StandardCrypto))
-&gt; Maybe Redeemer -&gt; Maybe (Data (BabbageEra StandardCrypto))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Redeemer
</span><a href="#local-6989586621679482996"><span class="hs-identifier hs-var">mredeemer</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ExUnits
</span><a href="#local-6989586621679482960"><span class="hs-identifier hs-var">exunits</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-347"></span><span>                                    </span><span class="annot"><span class="annottext">TxBodyScriptData Era
</span><a href="#local-6989586621679482971"><span class="hs-identifier hs-var">scriptData</span></a></span><span>
</span><span id="line-348"></span><span>
</span><span id="line-349"></span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#applyTxMod"><span class="hs-identifier hs-var">applyTxMod</span></a></span><span> </span><span class="annot"><span class="annottext">Tx Era
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">UTxO Era
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#ReplaceTx"><span class="hs-identifier hs-type">ReplaceTx</span></a></span><span> </span><span id="local-6989586621679482940"><span class="annot"><span class="annottext">Tx Era
</span><a href="#local-6989586621679482940"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span id="local-6989586621679482939"><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679482939"><span class="hs-identifier hs-var">utxos</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tx Era
</span><a href="#local-6989586621679482940"><span class="hs-identifier hs-var">tx</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679482939"><span class="hs-identifier hs-var">utxos</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-350"></span><span>
</span><span id="line-351"></span><span class="hs-comment">-- | Add a new output of any type (public key or script)</span><span>
</span><span id="line-352"></span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#addOutput"><span class="hs-identifier hs-type">addOutput</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">AddressAny</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#Datum"><span class="hs-identifier hs-type">Datum</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxModifier"><span class="hs-identifier hs-type">TxModifier</span></a></span><span>
</span><span id="line-353"></span><span id="addOutput"><span class="annot"><span class="annottext">addOutput :: AddressAny -&gt; Value -&gt; Datum -&gt; TxModifier
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#addOutput"><span class="hs-identifier hs-var hs-var">addOutput</span></a></span></span><span> </span><span id="local-6989586621679482937"><span class="annot"><span class="annottext">AddressAny
</span><a href="#local-6989586621679482937"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span id="local-6989586621679482936"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679482936"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span id="local-6989586621679482935"><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679482935"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxMod -&gt; TxModifier
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#txMod"><span class="hs-identifier hs-var">txMod</span></a></span><span> </span><span class="annot"><span class="annottext">(TxMod -&gt; TxModifier) -&gt; TxMod -&gt; TxModifier
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">AddressAny -&gt; Value -&gt; Datum -&gt; TxMod
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#AddOutput"><span class="hs-identifier hs-var">AddOutput</span></a></span><span> </span><span class="annot"><span class="annottext">AddressAny
</span><a href="#local-6989586621679482937"><span class="hs-identifier hs-var">addr</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679482936"><span class="hs-identifier hs-var">value</span></a></span><span> </span><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679482935"><span class="hs-identifier hs-var">datum</span></a></span><span>
</span><span id="line-354"></span><span>
</span><span id="line-355"></span><span class="hs-comment">-- | Remove an output of any type.</span><span>
</span><span id="line-356"></span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#removeOutput"><span class="hs-identifier hs-type">removeOutput</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#Output"><span class="hs-identifier hs-type">Output</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxModifier"><span class="hs-identifier hs-type">TxModifier</span></a></span><span>
</span><span id="line-357"></span><span id="removeOutput"><span class="annot"><span class="annottext">removeOutput :: Output -&gt; TxModifier
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#removeOutput"><span class="hs-identifier hs-var hs-var">removeOutput</span></a></span></span><span> </span><span id="local-6989586621679482933"><span class="annot"><span class="annottext">Output
</span><a href="#local-6989586621679482933"><span class="hs-identifier hs-var">output</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxMod -&gt; TxModifier
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#txMod"><span class="hs-identifier hs-var">txMod</span></a></span><span> </span><span class="annot"><span class="annottext">(TxMod -&gt; TxModifier) -&gt; TxMod -&gt; TxModifier
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxIx -&gt; TxMod
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#RemoveOutput"><span class="hs-identifier hs-var">RemoveOutput</span></a></span><span> </span><span class="annot"><span class="annottext">(TxIx -&gt; TxMod) -&gt; TxIx -&gt; TxMod
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Output -&gt; TxIx
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#outputIx"><span class="hs-identifier hs-var hs-var">outputIx</span></a></span><span> </span><span class="annot"><span class="annottext">Output
</span><a href="#local-6989586621679482933"><span class="hs-identifier hs-var">output</span></a></span><span>
</span><span id="line-358"></span><span>
</span><span id="line-359"></span><span class="hs-comment">-- | Add a new public key input.</span><span>
</span><span id="line-360"></span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#addKeyInput"><span class="hs-identifier hs-type">addKeyInput</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">AddressAny</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#Datum"><span class="hs-identifier hs-type">Datum</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxModifier"><span class="hs-identifier hs-type">TxModifier</span></a></span><span>
</span><span id="line-361"></span><span id="addKeyInput"><span class="annot"><span class="annottext">addKeyInput :: AddressAny -&gt; Value -&gt; Datum -&gt; TxModifier
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#addKeyInput"><span class="hs-identifier hs-var hs-var">addKeyInput</span></a></span></span><span> </span><span id="local-6989586621679482931"><span class="annot"><span class="annottext">AddressAny
</span><a href="#local-6989586621679482931"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span id="local-6989586621679482930"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679482930"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span id="local-6989586621679482929"><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679482929"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxMod -&gt; TxModifier
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#txMod"><span class="hs-identifier hs-var">txMod</span></a></span><span> </span><span class="annot"><span class="annottext">(TxMod -&gt; TxModifier) -&gt; TxMod -&gt; TxModifier
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">AddressAny -&gt; Value -&gt; Datum -&gt; TxMod
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#AddInput"><span class="hs-identifier hs-var">AddInput</span></a></span><span> </span><span class="annot"><span class="annottext">AddressAny
</span><a href="#local-6989586621679482931"><span class="hs-identifier hs-var">addr</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679482930"><span class="hs-identifier hs-var">value</span></a></span><span> </span><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679482929"><span class="hs-identifier hs-var">datum</span></a></span><span>
</span><span id="line-362"></span><span>
</span><span id="line-363"></span><span class="hs-comment">-- | Remove an input of any type.</span><span>
</span><span id="line-364"></span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#removeInput"><span class="hs-identifier hs-type">removeInput</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#Input"><span class="hs-identifier hs-type">Input</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxModifier"><span class="hs-identifier hs-type">TxModifier</span></a></span><span>
</span><span id="line-365"></span><span id="removeInput"><span class="annot"><span class="annottext">removeInput :: Input -&gt; TxModifier
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#removeInput"><span class="hs-identifier hs-var hs-var">removeInput</span></a></span></span><span> </span><span id="local-6989586621679482927"><span class="annot"><span class="annottext">Input
</span><a href="#local-6989586621679482927"><span class="hs-identifier hs-var">inp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxMod -&gt; TxModifier
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#txMod"><span class="hs-identifier hs-var">txMod</span></a></span><span> </span><span class="annot"><span class="annottext">(TxMod -&gt; TxModifier) -&gt; TxMod -&gt; TxModifier
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; TxMod
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#RemoveInput"><span class="hs-identifier hs-var">RemoveInput</span></a></span><span> </span><span class="annot"><span class="annottext">(TxIn -&gt; TxMod) -&gt; TxIn -&gt; TxMod
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Input -&gt; TxIn
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#inputTxIn"><span class="hs-identifier hs-var hs-var">inputTxIn</span></a></span><span> </span><span class="annot"><span class="annottext">Input
</span><a href="#local-6989586621679482927"><span class="hs-identifier hs-var">inp</span></a></span><span>
</span><span id="line-366"></span><span>
</span><span id="line-367"></span><span class="hs-comment">-- | Add a plutus script input.</span><span>
</span><span id="line-368"></span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#addPlutusScriptInput"><span class="hs-identifier hs-type">addPlutusScriptInput</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">PlutusScript</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">PlutusScriptV2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#Datum"><span class="hs-identifier hs-type">Datum</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#Redeemer"><span class="hs-identifier hs-type">Redeemer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxModifier"><span class="hs-identifier hs-type">TxModifier</span></a></span><span>
</span><span id="line-369"></span><span id="addPlutusScriptInput"><span class="annot"><span class="annottext">addPlutusScriptInput :: PlutusScript PlutusScriptV2
-&gt; Value -&gt; Datum -&gt; Redeemer -&gt; TxModifier
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#addPlutusScriptInput"><span class="hs-identifier hs-var hs-var">addPlutusScriptInput</span></a></span></span><span> </span><span id="local-6989586621679482925"><span class="annot"><span class="annottext">PlutusScript PlutusScriptV2
</span><a href="#local-6989586621679482925"><span class="hs-identifier hs-var">script</span></a></span></span><span> </span><span id="local-6989586621679482924"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679482924"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span id="local-6989586621679482923"><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679482923"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span id="local-6989586621679482922"><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621679482922"><span class="hs-identifier hs-var">redeemer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxMod -&gt; TxModifier
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#txMod"><span class="hs-identifier hs-var">txMod</span></a></span><span> </span><span class="annot"><span class="annottext">(TxMod -&gt; TxModifier) -&gt; TxMod -&gt; TxModifier
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PlutusScript PlutusScriptV2 -&gt; Value -&gt; Datum -&gt; Redeemer -&gt; TxMod
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#AddPlutusScriptInput"><span class="hs-identifier hs-var">AddPlutusScriptInput</span></a></span><span> </span><span class="annot"><span class="annottext">PlutusScript PlutusScriptV2
</span><a href="#local-6989586621679482925"><span class="hs-identifier hs-var">script</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679482924"><span class="hs-identifier hs-var">value</span></a></span><span> </span><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679482923"><span class="hs-identifier hs-var">datum</span></a></span><span> </span><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621679482922"><span class="hs-identifier hs-var">redeemer</span></a></span><span>
</span><span id="line-370"></span><span>
</span><span id="line-371"></span><span class="hs-comment">-- | Add a simple script input.</span><span>
</span><span id="line-372"></span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#addSimpleScriptInput"><span class="hs-identifier hs-type">addSimpleScriptInput</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">SimpleScript</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">SimpleScriptV2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxModifier"><span class="hs-identifier hs-type">TxModifier</span></a></span><span>
</span><span id="line-373"></span><span id="addSimpleScriptInput"><span class="annot"><span class="annottext">addSimpleScriptInput :: SimpleScript SimpleScriptV2 -&gt; Value -&gt; TxModifier
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#addSimpleScriptInput"><span class="hs-identifier hs-var hs-var">addSimpleScriptInput</span></a></span></span><span> </span><span id="local-6989586621679482920"><span class="annot"><span class="annottext">SimpleScript SimpleScriptV2
</span><a href="#local-6989586621679482920"><span class="hs-identifier hs-var">script</span></a></span></span><span> </span><span id="local-6989586621679482919"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679482919"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxMod -&gt; TxModifier
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#txMod"><span class="hs-identifier hs-var">txMod</span></a></span><span> </span><span class="annot"><span class="annottext">(TxMod -&gt; TxModifier) -&gt; TxMod -&gt; TxModifier
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleScript SimpleScriptV2 -&gt; Value -&gt; TxMod
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#AddSimpleScriptInput"><span class="hs-identifier hs-var">AddSimpleScriptInput</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleScript SimpleScriptV2
</span><a href="#local-6989586621679482920"><span class="hs-identifier hs-var">script</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679482919"><span class="hs-identifier hs-var">value</span></a></span><span>
</span><span id="line-374"></span><span>
</span><span id="line-375"></span><span class="hs-comment">-- | Change the redeemer of a script input.</span><span>
</span><span id="line-376"></span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#changeRedeemerOf"><span class="hs-identifier hs-type">changeRedeemerOf</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#Input"><span class="hs-identifier hs-type">Input</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#Redeemer"><span class="hs-identifier hs-type">Redeemer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxModifier"><span class="hs-identifier hs-type">TxModifier</span></a></span><span>
</span><span id="line-377"></span><span id="changeRedeemerOf"><span class="annot"><span class="annottext">changeRedeemerOf :: Input -&gt; Redeemer -&gt; TxModifier
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#changeRedeemerOf"><span class="hs-identifier hs-var hs-var">changeRedeemerOf</span></a></span></span><span> </span><span id="local-6989586621679482917"><span class="annot"><span class="annottext">Input
</span><a href="#local-6989586621679482917"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679482916"><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621679482916"><span class="hs-identifier hs-var">r</span></a></span></span><span>
</span><span id="line-378"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">AddressAny -&gt; Bool
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.Cardano.Api.html#isKeyAddressAny"><span class="hs-identifier hs-var">isKeyAddressAny</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Input -&gt; AddressAny
forall t. IsInputOrOutput t =&gt; t -&gt; AddressAny
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#addressOf"><span class="hs-identifier hs-var">addressOf</span></a></span><span> </span><span class="annot"><span class="annottext">Input
</span><a href="#local-6989586621679482917"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; TxModifier
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Cannot changeRedeemerOf public key input&quot;</span></span><span>
</span><span id="line-379"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span>                     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxMod -&gt; TxModifier
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#txMod"><span class="hs-identifier hs-var">txMod</span></a></span><span> </span><span class="annot"><span class="annottext">(TxMod -&gt; TxModifier) -&gt; TxMod -&gt; TxModifier
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; Maybe Value -&gt; Maybe Datum -&gt; Maybe Redeemer -&gt; TxMod
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#ChangeScriptInput"><span class="hs-identifier hs-var">ChangeScriptInput</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Input -&gt; TxIn
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#inputTxIn"><span class="hs-identifier hs-var hs-var">inputTxIn</span></a></span><span> </span><span class="annot"><span class="annottext">Input
</span><a href="#local-6989586621679482917"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Value
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Datum
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Redeemer -&gt; Maybe Redeemer
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Redeemer
</span><a href="#local-6989586621679482916"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-380"></span><span>
</span><span id="line-381"></span><span class="hs-comment">-- | Change the validity range of the transaction.</span><span>
</span><span id="line-382"></span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#changeValidityRange"><span class="hs-identifier hs-type">changeValidityRange</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxValidityLowerBound</span></a></span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.Internal.Common.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxValidityUpperBound</span></a></span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.Internal.Common.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxModifier"><span class="hs-identifier hs-type">TxModifier</span></a></span><span>
</span><span id="line-383"></span><span id="changeValidityRange"><span class="annot"><span class="annottext">changeValidityRange :: (TxValidityLowerBound Era, TxValidityUpperBound Era) -&gt; TxModifier
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#changeValidityRange"><span class="hs-identifier hs-var hs-var">changeValidityRange</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679482914"><span class="annot"><span class="annottext">TxValidityLowerBound Era
</span><a href="#local-6989586621679482914"><span class="hs-identifier hs-var">lo</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679482913"><span class="annot"><span class="annottext">TxValidityUpperBound Era
</span><a href="#local-6989586621679482913"><span class="hs-identifier hs-var">hi</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxMod -&gt; TxModifier
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#txMod"><span class="hs-identifier hs-var">txMod</span></a></span><span> </span><span class="annot"><span class="annottext">(TxMod -&gt; TxModifier) -&gt; TxMod -&gt; TxModifier
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (TxValidityLowerBound Era)
-&gt; Maybe (TxValidityUpperBound Era) -&gt; TxMod
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#ChangeValidityRange"><span class="hs-identifier hs-var">ChangeValidityRange</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxValidityLowerBound Era -&gt; Maybe (TxValidityLowerBound Era)
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">TxValidityLowerBound Era
</span><a href="#local-6989586621679482914"><span class="hs-identifier hs-var">lo</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxValidityUpperBound Era -&gt; Maybe (TxValidityUpperBound Era)
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">TxValidityUpperBound Era
</span><a href="#local-6989586621679482913"><span class="hs-identifier hs-var">hi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-384"></span><span>
</span><span id="line-385"></span><span class="hs-comment">-- | Change the validity lower bound of the transaction.</span><span>
</span><span id="line-386"></span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#changeValidityLowerBound"><span class="hs-identifier hs-type">changeValidityLowerBound</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxValidityLowerBound</span></a></span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.Internal.Common.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxModifier"><span class="hs-identifier hs-type">TxModifier</span></a></span><span>
</span><span id="line-387"></span><span id="changeValidityLowerBound"><span class="annot"><span class="annottext">changeValidityLowerBound :: TxValidityLowerBound Era -&gt; TxModifier
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#changeValidityLowerBound"><span class="hs-identifier hs-var hs-var">changeValidityLowerBound</span></a></span></span><span> </span><span id="local-6989586621679482911"><span class="annot"><span class="annottext">TxValidityLowerBound Era
</span><a href="#local-6989586621679482911"><span class="hs-identifier hs-var">lo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxMod -&gt; TxModifier
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#txMod"><span class="hs-identifier hs-var">txMod</span></a></span><span> </span><span class="annot"><span class="annottext">(TxMod -&gt; TxModifier) -&gt; TxMod -&gt; TxModifier
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (TxValidityLowerBound Era)
-&gt; Maybe (TxValidityUpperBound Era) -&gt; TxMod
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#ChangeValidityRange"><span class="hs-identifier hs-var">ChangeValidityRange</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxValidityLowerBound Era -&gt; Maybe (TxValidityLowerBound Era)
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">TxValidityLowerBound Era
</span><a href="#local-6989586621679482911"><span class="hs-identifier hs-var">lo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (TxValidityUpperBound Era)
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-388"></span><span>
</span><span id="line-389"></span><span class="hs-comment">-- | Change the validity upper bound of the transaction.</span><span>
</span><span id="line-390"></span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#changeValidityUpperBound"><span class="hs-identifier hs-type">changeValidityUpperBound</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">TxValidityUpperBound</span></a></span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.Internal.Common.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxModifier"><span class="hs-identifier hs-type">TxModifier</span></a></span><span>
</span><span id="line-391"></span><span id="changeValidityUpperBound"><span class="annot"><span class="annottext">changeValidityUpperBound :: TxValidityUpperBound Era -&gt; TxModifier
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#changeValidityUpperBound"><span class="hs-identifier hs-var hs-var">changeValidityUpperBound</span></a></span></span><span> </span><span id="local-6989586621679482909"><span class="annot"><span class="annottext">TxValidityUpperBound Era
</span><a href="#local-6989586621679482909"><span class="hs-identifier hs-var">hi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxMod -&gt; TxModifier
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#txMod"><span class="hs-identifier hs-var">txMod</span></a></span><span> </span><span class="annot"><span class="annottext">(TxMod -&gt; TxModifier) -&gt; TxMod -&gt; TxModifier
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (TxValidityLowerBound Era)
-&gt; Maybe (TxValidityUpperBound Era) -&gt; TxMod
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#ChangeValidityRange"><span class="hs-identifier hs-var">ChangeValidityRange</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (TxValidityLowerBound Era)
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxValidityUpperBound Era -&gt; Maybe (TxValidityUpperBound Era)
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">TxValidityUpperBound Era
</span><a href="#local-6989586621679482909"><span class="hs-identifier hs-var">hi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-392"></span><span>
</span><span id="line-393"></span><span class="hs-comment">-- | The most general transaction modifier. Simply replace the original transaction and `UTxO` set</span><span>
</span><span id="line-394"></span><span class="hs-comment">--   by the given values. In most cases the modifiers above should be sufficient.</span><span>
</span><span id="line-395"></span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#replaceTx"><span class="hs-identifier hs-type">replaceTx</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.Internal.Common.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-api/html/src"><span class="hs-identifier hs-type">UTxO</span></a></span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.Internal.Common.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#TxModifier"><span class="hs-identifier hs-type">TxModifier</span></a></span><span>
</span><span id="line-396"></span><span id="replaceTx"><span class="annot"><span class="annottext">replaceTx :: Tx Era -&gt; UTxO Era -&gt; TxModifier
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#replaceTx"><span class="hs-identifier hs-var hs-var">replaceTx</span></a></span></span><span> </span><span id="local-6989586621679482907"><span class="annot"><span class="annottext">Tx Era
</span><a href="#local-6989586621679482907"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span id="local-6989586621679482906"><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679482906"><span class="hs-identifier hs-var">utxos</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxMod -&gt; TxModifier
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#txMod"><span class="hs-identifier hs-var">txMod</span></a></span><span> </span><span class="annot"><span class="annottext">(TxMod -&gt; TxModifier) -&gt; TxMod -&gt; TxModifier
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Tx Era -&gt; UTxO Era -&gt; TxMod
</span><a href="Test.QuickCheck.ContractModel.ThreatModel.TxModifier.html#ReplaceTx"><span class="hs-identifier hs-var">ReplaceTx</span></a></span><span> </span><span class="annot"><span class="annottext">Tx Era
</span><a href="#local-6989586621679482907"><span class="hs-identifier hs-var">tx</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO Era
</span><a href="#local-6989586621679482906"><span class="hs-identifier hs-var">utxos</span></a></span><span>
</span><span id="line-397"></span><span>
</span><span id="line-398"></span></pre></body></html>