<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE AllowAmbiguousTypes #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DoAndIfThenElse #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-9"></span><span>
</span><span id="line-10"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Test.Cardano.Ledger.Shelley.PropertyTests</span><span>
</span><span id="line-11"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.PropertyTests.html#propertyTests"><span class="hs-identifier">propertyTests</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.PropertyTests.html#minimalPropertyTests"><span class="hs-identifier">minimalPropertyTests</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.ClassifyTraces.html#relevantCasesAreCovered"><span class="hs-identifier">relevantCasesAreCovered</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.TestChain.html#delegProperties"><span class="hs-identifier">delegProperties</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.TestChain.html#poolProperties"><span class="hs-identifier">poolProperties</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.TestChain.html#removedAfterPoolreap"><span class="hs-identifier">removedAfterPoolreap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.TestChain.html#adaPreservationChain"><span class="hs-identifier">adaPreservationChain</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.TestChain.html#collisionFreeComplete"><span class="hs-identifier">collisionFreeComplete</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.ClassifyTraces.html#onlyValidLedgerSignalsAreGenerated"><span class="hs-identifier">onlyValidLedgerSignalsAreGenerated</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.ClassifyTraces.html#onlyValidChainSignalsAreGenerated"><span class="hs-identifier">onlyValidChainSignalsAreGenerated</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>    </span><span class="hs-comment">-- Crypto era only</span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Address.CompactAddr.html#propCompactAddrRoundTrip"><span class="hs-identifier">propCompactAddrRoundTrip</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Address.CompactAddr.html#propCompactSerializationAgree"><span class="hs-identifier">propCompactSerializationAgree</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span class="hs-keyword">where</span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Cardano.Ledger.BaseTypes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Globals</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier">StrictMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Cardano.Ledger.Core</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Core</span></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Cardano.Ledger.Crypto</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CC</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Crypto</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Cardano.Ledger.Era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Crypto</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">TxSeq</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Cardano.Ledger.Hashes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">EraIndependentTxBody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Cardano.Ledger.Keys</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">DSignable</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">KeyRole</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Witness</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Cardano.Ledger.SafeHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">SafeHash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">Cardano.Ledger.Shelley.API</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">LedgerState</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">PPUPState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">Cardano.Ledger.Shelley.Delegation.Certificates</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">DCert</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">Cardano.Ledger.Shelley.PParams</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">Update</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">Cardano.Ledger.Shelley.Rules.Ledger</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">LedgerEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">Cardano.Ledger.Shelley.Scripts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">ScriptHash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">Cardano.Ledger.Shelley.TxBody</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">Wdrl</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">WitVKey</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">Cardano.Ledger.Shelley.UTxO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">makeWitnessVKey</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Cardano.Ledger.TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">TxIn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier">Control.Monad.Trans.Reader</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier">ReaderT</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier">Control.State.Transition</span></a></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../small-steps-test/html/src"><span class="hs-identifier">Control.State.Transition.Trace.Generator.QuickCheck</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">QC</span></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Functor.Identity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Identity</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.List</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">nub</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">sort</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier">Data.Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier">Map</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier">Data.Sequence.Strict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier">StrictSeq</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier">Set</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier">fromList</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier">singleton</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">GHC.Records</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">HasField</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Address.Bootstrap.html"><span class="hs-identifier">Test.Cardano.Ledger.Shelley.Address.Bootstrap</span></a></span><span>
</span><span id="line-52"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Address.Bootstrap.html#bootstrapHashTest"><span class="hs-identifier">bootstrapHashTest</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Address.CompactAddr.html"><span class="hs-identifier">Test.Cardano.Ledger.Shelley.Address.CompactAddr</span></a></span><span>
</span><span id="line-55"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Address.CompactAddr.html#propCompactAddrRoundTrip"><span class="hs-identifier">propCompactAddrRoundTrip</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Address.CompactAddr.html#propCompactSerializationAgree"><span class="hs-identifier">propCompactSerializationAgree</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-57"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Address.CompactAddr.html#propDecompactErrors"><span class="hs-identifier">propDecompactErrors</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-58"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Address.CompactAddr.html#propDeserializeRewardAcntErrors"><span class="hs-identifier">propDeserializeRewardAcntErrors</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Address.CompactAddr.html#propValidateNewDecompact"><span class="hs-identifier">propValidateNewDecompact</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ByronTranslation.html"><span class="hs-identifier">Test.Cardano.Ledger.Shelley.ByronTranslation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ByronTranslation.html#testGroupByronTranslation"><span class="hs-identifier">testGroupByronTranslation</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.Core.html"><span class="hs-identifier">Test.Cardano.Ledger.Shelley.Generator.Core</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.Core.html#GenEnv"><span class="hs-identifier">GenEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html"><span class="hs-identifier">Test.Cardano.Ledger.Shelley.Generator.EraGen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#EraGen"><span class="hs-identifier">EraGen</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.Chain.html"><span class="hs-identifier">Test.Cardano.Ledger.Shelley.Rules.Chain</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.Chain.html#CHAIN"><span class="hs-identifier">CHAIN</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.ClassifyTraces.html"><span class="hs-identifier">Test.Cardano.Ledger.Shelley.Rules.ClassifyTraces</span></a></span><span>
</span><span id="line-66"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.ClassifyTraces.html#onlyValidChainSignalsAreGenerated"><span class="hs-identifier">onlyValidChainSignalsAreGenerated</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-67"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.ClassifyTraces.html#onlyValidLedgerSignalsAreGenerated"><span class="hs-identifier">onlyValidLedgerSignalsAreGenerated</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-68"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.ClassifyTraces.html#relevantCasesAreCovered"><span class="hs-identifier">relevantCasesAreCovered</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-69"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.TestChain.html"><span class="hs-identifier">Test.Cardano.Ledger.Shelley.Rules.TestChain</span></a></span><span>
</span><span id="line-71"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.TestChain.html#TestingLedger"><span class="hs-identifier">TestingLedger</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-72"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.TestChain.html#adaPreservationChain"><span class="hs-identifier">adaPreservationChain</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-73"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.TestChain.html#collisionFreeComplete"><span class="hs-identifier">collisionFreeComplete</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-74"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.TestChain.html#delegProperties"><span class="hs-identifier">delegProperties</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-75"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.TestChain.html#poolProperties"><span class="hs-identifier">poolProperties</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-76"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.TestChain.html#removedAfterPoolreap"><span class="hs-identifier">removedAfterPoolreap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-77"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.TestChain.html#stakeIncrTest"><span class="hs-identifier">stakeIncrTest</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Serialisation.EraIndepGenerators.html"><span class="hs-identifier">Test.Cardano.Ledger.Shelley.Serialisation.EraIndepGenerators</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ShelleyTranslation.html"><span class="hs-identifier">Test.Cardano.Ledger.Shelley.ShelleyTranslation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ShelleyTranslation.html#testGroupShelleyTranslation"><span class="hs-identifier">testGroupShelleyTranslation</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Utils.html"><span class="hs-identifier">Test.Cardano.Ledger.Shelley.Utils</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Utils.html#ChainProperty"><span class="hs-identifier">ChainProperty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Utils.html#RawSeed"><span class="hs-identifier">RawSeed</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Utils.html#mkKeyPair%27"><span class="hs-identifier">mkKeyPair'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../QuickCheck/html/src"><span class="hs-identifier">Test.QuickCheck</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../QuickCheck/html/src"><span class="hs-identifier">conjoin</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../QuickCheck/html/src"><span class="hs-operator">(===)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../QuickCheck/html/src"><span class="hs-operator">(==&gt;)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../tasty/html/src"><span class="hs-identifier">Test.Tasty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../tasty/html/src"><span class="hs-identifier">TestTree</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../tasty/html/src"><span class="hs-identifier">localOption</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../tasty/html/src"><span class="hs-identifier">testGroup</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../tasty-quickcheck/html/src"><span class="hs-identifier">Test.Tasty.QuickCheck</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TQC</span></span><span>
</span><span id="line-85"></span><span>
</span><span id="line-86"></span><span class="hs-comment">-- =====================================================================</span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.PropertyTests.html#propWitVKeys"><span class="hs-identifier hs-type">propWitVKeys</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-89"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679803867"><span class="annot"><a href="#local-6989586621679803867"><span class="hs-identifier hs-type">c</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-90"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803867"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">DSignable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803867"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Hash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803867"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">EraIndependentTxBody</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-91"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Utils.html#RawSeed"><span class="hs-identifier hs-type">RawSeed</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-92"></span><span>  </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">SafeHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803867"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">EraIndependentTxBody</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-93"></span><span>  </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">SafeHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803867"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">EraIndependentTxBody</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-94"></span><span>  </span><span class="annot"><a href="../../../../QuickCheck/html/src"><span class="hs-identifier hs-type">TQC.Property</span></a></span><span>
</span><span id="line-95"></span><span id="propWitVKeys"><span class="annot"><span class="annottext">propWitVKeys :: RawSeed
-&gt; SafeHash c EraIndependentTxBody
-&gt; SafeHash c EraIndependentTxBody
-&gt; Property
</span><a href="Test.Cardano.Ledger.Shelley.PropertyTests.html#propWitVKeys"><span class="hs-identifier hs-var hs-var">propWitVKeys</span></a></span></span><span> </span><span id="local-6989586621679803811"><span class="annot"><span class="annottext">RawSeed
</span><a href="#local-6989586621679803811"><span class="hs-identifier hs-var">seed</span></a></span></span><span> </span><span id="local-6989586621679803810"><span class="annot"><span class="annottext">SafeHash c EraIndependentTxBody
</span><a href="#local-6989586621679803810"><span class="hs-identifier hs-var">h1</span></a></span></span><span> </span><span id="local-6989586621679803809"><span class="annot"><span class="annottext">SafeHash c EraIndependentTxBody
</span><a href="#local-6989586621679803809"><span class="hs-identifier hs-var">h2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-96"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679803808"><span class="annot"><span class="annottext">kp :: KeyPair Any c
</span><a href="#local-6989586621679803808"><span class="hs-identifier hs-var hs-var">kp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RawSeed -&gt; KeyPair Any c
forall crypto (kd :: KeyRole).
DSIGNAlgorithm (DSIGN crypto) =&gt;
RawSeed -&gt; KeyPair kd crypto
</span><a href="Test.Cardano.Ledger.Shelley.Utils.html#mkKeyPair%27"><span class="hs-identifier hs-var">mkKeyPair'</span></a></span><span> </span><span class="annot"><span class="annottext">RawSeed
</span><a href="#local-6989586621679803811"><span class="hs-identifier hs-var">seed</span></a></span><span>
</span><span id="line-97"></span><span>      </span><span id="local-6989586621679803807"><span class="annot"><span class="annottext">w1 :: WitVKey 'Witness c
</span><a href="#local-6989586621679803807"><span class="hs-identifier hs-var hs-var">w1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SafeHash c EraIndependentTxBody
-&gt; KeyPair Any c -&gt; WitVKey 'Witness c
forall c (kr :: KeyRole).
(Crypto c, DSignable c (Hash (HASH c) EraIndependentTxBody)) =&gt;
SafeHash c EraIndependentTxBody
-&gt; KeyPair kr c -&gt; WitVKey 'Witness c
</span><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier hs-var">makeWitnessVKey</span></a></span><span> </span><span class="annot"><span class="annottext">SafeHash c EraIndependentTxBody
</span><a href="#local-6989586621679803810"><span class="hs-identifier hs-var">h1</span></a></span><span> </span><span class="annot"><span class="annottext">KeyPair Any c
</span><a href="#local-6989586621679803808"><span class="hs-identifier hs-var">kp</span></a></span><span>
</span><span id="line-98"></span><span>      </span><span id="local-6989586621679803806"><span class="annot"><span class="annottext">w2 :: WitVKey 'Witness c
</span><a href="#local-6989586621679803806"><span class="hs-identifier hs-var hs-var">w2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SafeHash c EraIndependentTxBody
-&gt; KeyPair Any c -&gt; WitVKey 'Witness c
forall c (kr :: KeyRole).
(Crypto c, DSignable c (Hash (HASH c) EraIndependentTxBody)) =&gt;
SafeHash c EraIndependentTxBody
-&gt; KeyPair kr c -&gt; WitVKey 'Witness c
</span><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier hs-var">makeWitnessVKey</span></a></span><span> </span><span class="annot"><span class="annottext">SafeHash c EraIndependentTxBody
</span><a href="#local-6989586621679803809"><span class="hs-identifier hs-var">h2</span></a></span><span> </span><span class="annot"><span class="annottext">KeyPair Any c
</span><a href="#local-6989586621679803808"><span class="hs-identifier hs-var">kp</span></a></span><span>
</span><span id="line-99"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">[Property] -&gt; Property
forall prop. Testable prop =&gt; [prop] -&gt; Property
</span><a href="../../../../QuickCheck/html/src"><span class="hs-identifier hs-var">conjoin</span></a></span><span>
</span><span id="line-100"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[WitVKey 'Witness c] -&gt; [WitVKey 'Witness c]
forall a. Ord a =&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">sort</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">WitVKey 'Witness c
</span><a href="#local-6989586621679803807"><span class="hs-identifier hs-var">w1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">WitVKey 'Witness c
</span><a href="#local-6989586621679803806"><span class="hs-identifier hs-var">w2</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[WitVKey 'Witness c] -&gt; [WitVKey 'Witness c] -&gt; Property
forall a. (Eq a, Show a) =&gt; a -&gt; a -&gt; Property
</span><a href="../../../../QuickCheck/html/src"><span class="hs-operator hs-var">===</span></a></span><span> </span><span class="annot"><span class="annottext">[WitVKey 'Witness c] -&gt; [WitVKey 'Witness c]
forall a. Ord a =&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">sort</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">WitVKey 'Witness c
</span><a href="#local-6989586621679803806"><span class="hs-identifier hs-var">w2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">WitVKey 'Witness c
</span><a href="#local-6989586621679803807"><span class="hs-identifier hs-var">w1</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-101"></span><span>          </span><span class="annot"><span class="annottext">[WitVKey 'Witness c] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[WitVKey 'Witness c] -&gt; [WitVKey 'Witness c]
forall a. Eq a =&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">nub</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">WitVKey 'Witness c
</span><a href="#local-6989586621679803807"><span class="hs-identifier hs-var">w1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">WitVKey 'Witness c
</span><a href="#local-6989586621679803806"><span class="hs-identifier hs-var">w2</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Property
forall a. (Eq a, Show a) =&gt; a -&gt; a -&gt; Property
</span><a href="../../../../QuickCheck/html/src"><span class="hs-operator hs-var">===</span></a></span><span> </span><span class="annot"><span class="annottext">Set (WitVKey 'Witness c) -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[WitVKey 'Witness c] -&gt; Set (WitVKey 'Witness c)
forall a. Ord a =&gt; [a] -&gt; Set a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Set.fromList</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">WitVKey 'Witness c
</span><a href="#local-6989586621679803807"><span class="hs-identifier hs-var">w1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">WitVKey 'Witness c
</span><a href="#local-6989586621679803806"><span class="hs-identifier hs-var">w2</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-102"></span><span>          </span><span class="annot"><span class="annottext">WitVKey 'Witness c
</span><a href="#local-6989586621679803807"><span class="hs-identifier hs-var">w1</span></a></span><span> </span><span class="annot"><span class="annottext">WitVKey 'Witness c -&gt; WitVKey 'Witness c -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">/=</span></a></span><span> </span><span class="annot"><span class="annottext">WitVKey 'Witness c
</span><a href="#local-6989586621679803806"><span class="hs-identifier hs-var">w2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Property -&gt; Property
forall prop. Testable prop =&gt; Bool -&gt; prop -&gt; Property
</span><a href="../../../../QuickCheck/html/src"><span class="hs-operator hs-var">==&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Set (WitVKey 'Witness c) -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WitVKey 'Witness c -&gt; Set (WitVKey 'Witness c)
forall a. a -&gt; Set a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Set.singleton</span></a></span><span> </span><span class="annot"><span class="annottext">WitVKey 'Witness c
</span><a href="#local-6989586621679803807"><span class="hs-identifier hs-var">w1</span></a></span><span> </span><span class="annot"><span class="annottext">Set (WitVKey 'Witness c)
-&gt; Set (WitVKey 'Witness c) -&gt; Set (WitVKey 'Witness c)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">WitVKey 'Witness c -&gt; Set (WitVKey 'Witness c)
forall a. a -&gt; Set a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Set.singleton</span></a></span><span> </span><span class="annot"><span class="annottext">WitVKey 'Witness c
</span><a href="#local-6989586621679803806"><span class="hs-identifier hs-var">w2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Property
forall a. (Eq a, Show a) =&gt; a -&gt; a -&gt; Property
</span><a href="../../../../QuickCheck/html/src"><span class="hs-operator hs-var">===</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span>
</span><span id="line-103"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.PropertyTests.html#minimalPropertyTests"><span class="hs-identifier hs-type">minimalPropertyTests</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-106"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679803803"><span class="annot"><a href="#local-6989586621679803803"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span id="local-6989586621679803802"><span class="annot"><a href="#local-6989586621679803802"><span class="hs-identifier hs-type">ledger</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-107"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#EraGen"><span class="hs-identifier hs-type">EraGen</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803803"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-108"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.TestChain.html#TestingLedger"><span class="hs-identifier hs-type">TestingLedger</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803803"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803802"><span class="hs-identifier hs-type">ledger</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-109"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Utils.html#ChainProperty"><span class="hs-identifier hs-type">ChainProperty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803803"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-110"></span><span>    </span><span class="annot"><a href="../../../../small-steps-test/html/src"><span class="hs-identifier hs-type">QC.HasTrace</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.Chain.html#CHAIN"><span class="hs-identifier hs-type">CHAIN</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803803"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.Core.html#GenEnv"><span class="hs-identifier hs-type">GenEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803803"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-111"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;PPUP&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679803803"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier hs-type">PPUPState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803803"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-112"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">HasField</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;inputs&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803803"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803803"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-113"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">HasField</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;certs&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803803"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier hs-type">StrictSeq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier hs-type">DCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803803"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-114"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">HasField</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;wdrls&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803803"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier hs-type">Wdrl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803803"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-115"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">HasField</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;update&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803803"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier hs-type">Update</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803803"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-116"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">TxSeq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803803"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-117"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-118"></span><span>  </span><span class="annot"><a href="../../../../tasty/html/src"><span class="hs-identifier hs-type">TestTree</span></a></span><span>
</span><span id="line-119"></span><span id="minimalPropertyTests"><span class="annot"><span class="annottext">minimalPropertyTests :: TestTree
</span><a href="Test.Cardano.Ledger.Shelley.PropertyTests.html#minimalPropertyTests"><span class="hs-identifier hs-var hs-var">minimalPropertyTests</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-120"></span><span>  </span><span class="annot"><span class="annottext">TestName -&gt; [TestTree] -&gt; TestTree
</span><a href="../../../../tasty/html/src"><span class="hs-identifier hs-var">testGroup</span></a></span><span>
</span><span id="line-121"></span><span>    </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Minimal Property Tests&quot;</span></span><span>
</span><span id="line-122"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QuickCheckMaxRatio -&gt; TestTree -&gt; TestTree
forall v. IsOption v =&gt; v -&gt; TestTree -&gt; TestTree
</span><a href="../../../../tasty/html/src"><span class="hs-identifier hs-var">localOption</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; QuickCheckMaxRatio
</span><a href="../../../../tasty-quickcheck/html/src"><span class="hs-identifier hs-var">TQC.QuickCheckMaxRatio</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">50</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TestTree -&gt; TestTree) -&gt; TestTree -&gt; TestTree
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TestName -&gt; Property -&gt; TestTree
forall a. Testable a =&gt; TestName -&gt; a -&gt; TestTree
</span><a href="../../../../tasty-quickcheck/html/src"><span class="hs-identifier hs-var">TQC.testProperty</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Chain and Ledger traces cover the relevant cases&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EraGen era, Default (State (EraRule &quot;PPUP&quot; era)),
 ChainProperty era, HasTrace (CHAIN era) (GenEnv era),
 HasField &quot;certs&quot; (TxBody era) (StrictSeq (DCert (Crypto era))),
 HasField &quot;wdrls&quot; (TxBody era) (Wdrl (Crypto era)),
 HasField &quot;update&quot; (TxBody era) (StrictMaybe (Update era))) =&gt;
Property
forall era.
(EraGen era, Default (State (EraRule &quot;PPUP&quot; era)),
 ChainProperty era, HasTrace (CHAIN era) (GenEnv era),
 HasField &quot;certs&quot; (TxBody era) (StrictSeq (DCert (Crypto era))),
 HasField &quot;wdrls&quot; (TxBody era) (Wdrl (Crypto era)),
 HasField &quot;update&quot; (TxBody era) (StrictMaybe (Update era))) =&gt;
Property
</span><a href="Test.Cardano.Ledger.Shelley.Rules.ClassifyTraces.html#relevantCasesAreCovered"><span class="hs-identifier hs-var">relevantCasesAreCovered</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679803803"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-123"></span><span>      </span><span class="annot"><span class="annottext">TestName -&gt; Property -&gt; TestTree
forall a. Testable a =&gt; TestName -&gt; a -&gt; TestTree
</span><a href="../../../../tasty-quickcheck/html/src"><span class="hs-identifier hs-var">TQC.testProperty</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;total amount of Ada is preserved (Chain)&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EraGen era, TestingLedger era ledger,
 State (EraRule &quot;PPUP&quot; era) ~ PPUPState era, ChainProperty era,
 HasTrace (CHAIN era) (GenEnv era),
 HasField &quot;inputs&quot; (TxBody era) (Set (TxIn (Crypto era))),
 HasField &quot;certs&quot; (TxBody era) (StrictSeq (DCert (Crypto era))),
 HasField &quot;wdrls&quot; (TxBody era) (Wdrl (Crypto era))) =&gt;
Property
forall era ledger.
(EraGen era, TestingLedger era ledger,
 State (EraRule &quot;PPUP&quot; era) ~ PPUPState era, ChainProperty era,
 HasTrace (CHAIN era) (GenEnv era),
 HasField &quot;inputs&quot; (TxBody era) (Set (TxIn (Crypto era))),
 HasField &quot;certs&quot; (TxBody era) (StrictSeq (DCert (Crypto era))),
 HasField &quot;wdrls&quot; (TxBody era) (Wdrl (Crypto era))) =&gt;
Property
</span><a href="Test.Cardano.Ledger.Shelley.Rules.TestChain.html#adaPreservationChain"><span class="hs-identifier hs-var">adaPreservationChain</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679803803"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679803802"><span class="hs-identifier hs-type">ledger</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-124"></span><span>      </span><span class="annot"><span class="annottext">TestName -&gt; Property -&gt; TestTree
forall a. Testable a =&gt; TestName -&gt; a -&gt; TestTree
</span><a href="../../../../tasty-quickcheck/html/src"><span class="hs-identifier hs-var">TQC.testProperty</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Only valid CHAIN STS signals are generated&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EraGen era, Default (State (EraRule &quot;PPUP&quot; era)),
 HasTrace (CHAIN era) (GenEnv era), Show (TxSeq era)) =&gt;
Property
forall era.
(EraGen era, Default (State (EraRule &quot;PPUP&quot; era)),
 HasTrace (CHAIN era) (GenEnv era), Show (TxSeq era)) =&gt;
Property
</span><a href="Test.Cardano.Ledger.Shelley.Rules.ClassifyTraces.html#onlyValidChainSignalsAreGenerated"><span class="hs-identifier hs-var">onlyValidChainSignalsAreGenerated</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679803803"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-125"></span><span>      </span><span class="annot"><span class="annottext">TestTree
</span><a href="Test.Cardano.Ledger.Shelley.Address.Bootstrap.html#bootstrapHashTest"><span class="hs-identifier hs-var">bootstrapHashTest</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-126"></span><span>      </span><span class="annot"><span class="annottext">TestName -&gt; [TestTree] -&gt; TestTree
</span><a href="../../../../tasty/html/src"><span class="hs-identifier hs-var">testGroup</span></a></span><span>
</span><span id="line-127"></span><span>        </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Compact Address Tests&quot;</span></span><span>
</span><span id="line-128"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; (Addr (Crypto era) -&gt; Bool) -&gt; TestTree
forall a. Testable a =&gt; TestName -&gt; a -&gt; TestTree
</span><a href="../../../../tasty-quickcheck/html/src"><span class="hs-identifier hs-var">TQC.testProperty</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Compact address round trip&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Crypto (Crypto era) =&gt; Addr (Crypto era) -&gt; Bool
forall crypto. Crypto crypto =&gt; Addr crypto -&gt; Bool
</span><a href="Test.Cardano.Ledger.Shelley.Address.CompactAddr.html#propCompactAddrRoundTrip"><span class="hs-identifier hs-var">propCompactAddrRoundTrip</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803803"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-129"></span><span>          </span><span class="annot"><span class="annottext">TestName -&gt; (Addr (Crypto era) -&gt; Bool) -&gt; TestTree
forall a. Testable a =&gt; TestName -&gt; a -&gt; TestTree
</span><a href="../../../../tasty-quickcheck/html/src"><span class="hs-identifier hs-var">TQC.testProperty</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Compact address binary representation&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Addr (Crypto era) -&gt; Bool
forall crypto. Addr crypto -&gt; Bool
</span><a href="Test.Cardano.Ledger.Shelley.Address.CompactAddr.html#propCompactSerializationAgree"><span class="hs-identifier hs-var">propCompactSerializationAgree</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803803"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-130"></span><span>          </span><span class="annot"><span class="annottext">TestName -&gt; (Addr (Crypto era) -&gt; Gen Property) -&gt; TestTree
forall a. Testable a =&gt; TestName -&gt; a -&gt; TestTree
</span><a href="../../../../tasty-quickcheck/html/src"><span class="hs-identifier hs-var">TQC.testProperty</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Ensure Addr failures on incorrect binary data&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Addr (Crypto era) -&gt; Gen Property) -&gt; TestTree)
-&gt; (Addr (Crypto era) -&gt; Gen Property) -&gt; TestTree
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-131"></span><span>            </span><span class="annot"><span class="annottext">Crypto (Crypto era) =&gt; Addr (Crypto era) -&gt; Gen Property
forall crypto. Crypto crypto =&gt; Addr crypto -&gt; Gen Property
</span><a href="Test.Cardano.Ledger.Shelley.Address.CompactAddr.html#propDecompactErrors"><span class="hs-identifier hs-var">propDecompactErrors</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803803"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-132"></span><span>          </span><span class="annot"><span class="annottext">TestName -&gt; (RewardAcnt (Crypto era) -&gt; Gen Property) -&gt; TestTree
forall a. Testable a =&gt; TestName -&gt; a -&gt; TestTree
</span><a href="../../../../tasty-quickcheck/html/src"><span class="hs-identifier hs-var">TQC.testProperty</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Ensure RewardAcnt failures on incorrect binary data&quot;</span></span><span> </span><span class="annot"><span class="annottext">((RewardAcnt (Crypto era) -&gt; Gen Property) -&gt; TestTree)
-&gt; (RewardAcnt (Crypto era) -&gt; Gen Property) -&gt; TestTree
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-133"></span><span>            </span><span class="annot"><span class="annottext">Crypto (Crypto era) =&gt; RewardAcnt (Crypto era) -&gt; Gen Property
forall crypto. Crypto crypto =&gt; RewardAcnt crypto -&gt; Gen Property
</span><a href="Test.Cardano.Ledger.Shelley.Address.CompactAddr.html#propDeserializeRewardAcntErrors"><span class="hs-identifier hs-var">propDeserializeRewardAcntErrors</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803803"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-134"></span><span>          </span><span class="annot"><span class="annottext">TestName -&gt; (Addr (Crypto era) -&gt; Property) -&gt; TestTree
forall a. Testable a =&gt; TestName -&gt; a -&gt; TestTree
</span><a href="../../../../tasty-quickcheck/html/src"><span class="hs-identifier hs-var">TQC.testProperty</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Decompacting an address is still valid&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Addr (Crypto era) -&gt; Property) -&gt; TestTree)
-&gt; (Addr (Crypto era) -&gt; Property) -&gt; TestTree
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-135"></span><span>            </span><span class="annot"><span class="annottext">Crypto (Crypto era) =&gt; Addr (Crypto era) -&gt; Property
forall crypto. Crypto crypto =&gt; Addr crypto -&gt; Property
</span><a href="Test.Cardano.Ledger.Shelley.Address.CompactAddr.html#propValidateNewDecompact"><span class="hs-identifier hs-var">propValidateNewDecompact</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803803"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-136"></span><span>        </span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-137"></span><span>      </span><span class="annot"><span class="annottext">TestName
-&gt; (RawSeed
    -&gt; SafeHash (Crypto era) EraIndependentTxBody
    -&gt; SafeHash (Crypto era) EraIndependentTxBody
    -&gt; Property)
-&gt; TestTree
forall a. Testable a =&gt; TestName -&gt; a -&gt; TestTree
</span><a href="../../../../tasty-quickcheck/html/src"><span class="hs-identifier hs-var">TQC.testProperty</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;WitVKey does not brake containers due to invalid Ord&quot;</span></span><span> </span><span class="annot"><span class="annottext">((RawSeed
  -&gt; SafeHash (Crypto era) EraIndependentTxBody
  -&gt; SafeHash (Crypto era) EraIndependentTxBody
  -&gt; Property)
 -&gt; TestTree)
-&gt; (RawSeed
    -&gt; SafeHash (Crypto era) EraIndependentTxBody
    -&gt; SafeHash (Crypto era) EraIndependentTxBody
    -&gt; Property)
-&gt; TestTree
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-138"></span><span>        </span><span class="annot"><span class="annottext">(Crypto (Crypto era),
 DSignable (Crypto era) (Hash (Crypto era) EraIndependentTxBody)) =&gt;
RawSeed
-&gt; SafeHash (Crypto era) EraIndependentTxBody
-&gt; SafeHash (Crypto era) EraIndependentTxBody
-&gt; Property
forall c.
(Crypto c, DSignable c (Hash c EraIndependentTxBody)) =&gt;
RawSeed
-&gt; SafeHash c EraIndependentTxBody
-&gt; SafeHash c EraIndependentTxBody
-&gt; Property
</span><a href="Test.Cardano.Ledger.Shelley.PropertyTests.html#propWitVKeys"><span class="hs-identifier hs-var">propWitVKeys</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803803"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-139"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-140"></span><span>
</span><span id="line-141"></span><span class="hs-comment">-- | 'TestTree' of property-based testing properties.</span><span>
</span><span id="line-142"></span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.PropertyTests.html#propertyTests"><span class="hs-identifier hs-type">propertyTests</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-143"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679803799"><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span id="local-6989586621679803798"><span class="annot"><a href="#local-6989586621679803798"><span class="hs-identifier hs-type">ledger</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-144"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#EraGen"><span class="hs-identifier hs-type">EraGen</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-145"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Utils.html#ChainProperty"><span class="hs-identifier hs-type">ChainProperty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-146"></span><span>    </span><span class="annot"><a href="../../../../small-steps-test/html/src"><span class="hs-identifier hs-type">QC.HasTrace</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.Chain.html#CHAIN"><span class="hs-identifier hs-type">CHAIN</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.Core.html#GenEnv"><span class="hs-identifier hs-type">GenEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-147"></span><span>    </span><span class="annot"><a href="../../../../small-steps-test/html/src"><span class="hs-identifier hs-type">QC.HasTrace</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803798"><span class="hs-identifier hs-type">ledger</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.Core.html#GenEnv"><span class="hs-identifier hs-type">GenEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-148"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">Embed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;DELEGS&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679803798"><span class="hs-identifier hs-type">ledger</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-149"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">Embed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;UTXOW&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679803798"><span class="hs-identifier hs-type">ledger</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-150"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;PPUP&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier hs-type">PPUPState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-151"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">Environment</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803798"><span class="hs-identifier hs-type">ledger</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier hs-type">LedgerEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-152"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">HasField</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;inputs&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-153"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">HasField</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;certs&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier hs-type">StrictSeq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier hs-type">DCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-154"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">HasField</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;wdrls&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier hs-type">Wdrl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-155"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">HasField</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;update&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier hs-type">Update</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-156"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">HasField</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;addrWits&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Witnesses</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier hs-type">WitVKey</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Witness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-157"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">HasField</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;scriptWits&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Witnesses</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Script</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-158"></span><span>    </span><span class="annot"><a href="../../../../small-steps-test/html/src"><span class="hs-identifier hs-type">QC.BaseEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803798"><span class="hs-identifier hs-type">ledger</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Globals</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-159"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">BaseM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803798"><span class="hs-identifier hs-type">ledger</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier hs-type">ReaderT</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Globals</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Identity</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-160"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803798"><span class="hs-identifier hs-type">ledger</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-161"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">Signal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803798"><span class="hs-identifier hs-type">ledger</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-162"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">TxSeq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-163"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-164"></span><span>  </span><span class="annot"><a href="../../../../tasty/html/src"><span class="hs-identifier hs-type">TestTree</span></a></span><span>
</span><span id="line-165"></span><span id="propertyTests"><span class="annot"><span class="annottext">propertyTests :: TestTree
</span><a href="Test.Cardano.Ledger.Shelley.PropertyTests.html#propertyTests"><span class="hs-identifier hs-var hs-var">propertyTests</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-166"></span><span>  </span><span class="annot"><span class="annottext">TestName -&gt; [TestTree] -&gt; TestTree
</span><a href="../../../../tasty/html/src"><span class="hs-identifier hs-var">testGroup</span></a></span><span>
</span><span id="line-167"></span><span>    </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Property-Based Testing&quot;</span></span><span>
</span><span id="line-168"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; [TestTree] -&gt; TestTree
</span><a href="../../../../tasty/html/src"><span class="hs-identifier hs-var">testGroup</span></a></span><span>
</span><span id="line-169"></span><span>        </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Classify Traces&quot;</span></span><span>
</span><span id="line-170"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">QuickCheckMaxRatio -&gt; TestTree -&gt; TestTree
forall v. IsOption v =&gt; v -&gt; TestTree -&gt; TestTree
</span><a href="../../../../tasty/html/src"><span class="hs-identifier hs-var">localOption</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; QuickCheckMaxRatio
</span><a href="../../../../tasty-quickcheck/html/src"><span class="hs-identifier hs-var">TQC.QuickCheckMaxRatio</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">100</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TestTree -&gt; TestTree) -&gt; TestTree -&gt; TestTree
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-171"></span><span>              </span><span class="annot"><span class="annottext">TestName -&gt; Property -&gt; TestTree
forall a. Testable a =&gt; TestName -&gt; a -&gt; TestTree
</span><a href="../../../../tasty-quickcheck/html/src"><span class="hs-identifier hs-var">TQC.testProperty</span></a></span><span>
</span><span id="line-172"></span><span>                </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Chain and Ledger traces cover the relevant cases&quot;</span></span><span>
</span><span id="line-173"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EraGen era, Default (State (EraRule &quot;PPUP&quot; era)),
 ChainProperty era, HasTrace (CHAIN era) (GenEnv era),
 HasField &quot;certs&quot; (TxBody era) (StrictSeq (DCert (Crypto era))),
 HasField &quot;wdrls&quot; (TxBody era) (Wdrl (Crypto era)),
 HasField &quot;update&quot; (TxBody era) (StrictMaybe (Update era))) =&gt;
Property
forall era.
(EraGen era, Default (State (EraRule &quot;PPUP&quot; era)),
 ChainProperty era, HasTrace (CHAIN era) (GenEnv era),
 HasField &quot;certs&quot; (TxBody era) (StrictSeq (DCert (Crypto era))),
 HasField &quot;wdrls&quot; (TxBody era) (Wdrl (Crypto era)),
 HasField &quot;update&quot; (TxBody era) (StrictMaybe (Update era))) =&gt;
Property
</span><a href="Test.Cardano.Ledger.Shelley.Rules.ClassifyTraces.html#relevantCasesAreCovered"><span class="hs-identifier hs-var">relevantCasesAreCovered</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-174"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-175"></span><span>        </span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-176"></span><span>      </span><span class="annot"><span class="annottext">TestName -&gt; [TestTree] -&gt; TestTree
</span><a href="../../../../tasty/html/src"><span class="hs-identifier hs-var">testGroup</span></a></span><span>
</span><span id="line-177"></span><span>        </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;STS Rules - Delegation Properties&quot;</span></span><span>
</span><span id="line-178"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; Property -&gt; TestTree
forall a. Testable a =&gt; TestName -&gt; a -&gt; TestTree
</span><a href="../../../../tasty-quickcheck/html/src"><span class="hs-identifier hs-var">TQC.testProperty</span></a></span><span>
</span><span id="line-179"></span><span>            </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;properties of the DELEG STS&quot;</span></span><span>
</span><span id="line-180"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EraGen era, Default (State (EraRule &quot;PPUP&quot; era)),
 HasTrace (CHAIN era) (GenEnv era), ChainProperty era,
 HasField &quot;certs&quot; (TxBody era) (StrictSeq (DCert (Crypto era)))) =&gt;
Property
forall era.
(EraGen era, Default (State (EraRule &quot;PPUP&quot; era)),
 HasTrace (CHAIN era) (GenEnv era), ChainProperty era,
 HasField &quot;certs&quot; (TxBody era) (StrictSeq (DCert (Crypto era)))) =&gt;
Property
</span><a href="Test.Cardano.Ledger.Shelley.Rules.TestChain.html#delegProperties"><span class="hs-identifier hs-var">delegProperties</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-181"></span><span>        </span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-182"></span><span>      </span><span class="annot"><span class="annottext">TestName -&gt; [TestTree] -&gt; TestTree
</span><a href="../../../../tasty/html/src"><span class="hs-identifier hs-var">testGroup</span></a></span><span>
</span><span id="line-183"></span><span>        </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;STS Rules - Pool Properties&quot;</span></span><span>
</span><span id="line-184"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; Property -&gt; TestTree
forall a. Testable a =&gt; TestName -&gt; a -&gt; TestTree
</span><a href="../../../../tasty-quickcheck/html/src"><span class="hs-identifier hs-var">TQC.testProperty</span></a></span><span>
</span><span id="line-185"></span><span>            </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;properties of the POOL STS&quot;</span></span><span>
</span><span id="line-186"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EraGen era, Default (State (EraRule &quot;PPUP&quot; era)),
 ChainProperty era, HasTrace (CHAIN era) (GenEnv era),
 HasField &quot;certs&quot; (TxBody era) (StrictSeq (DCert (Crypto era)))) =&gt;
Property
forall era.
(EraGen era, Default (State (EraRule &quot;PPUP&quot; era)),
 ChainProperty era, HasTrace (CHAIN era) (GenEnv era),
 HasField &quot;certs&quot; (TxBody era) (StrictSeq (DCert (Crypto era)))) =&gt;
Property
</span><a href="Test.Cardano.Ledger.Shelley.Rules.TestChain.html#poolProperties"><span class="hs-identifier hs-var">poolProperties</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span>        </span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-188"></span><span>      </span><span class="annot"><span class="annottext">TestName -&gt; [TestTree] -&gt; TestTree
</span><a href="../../../../tasty/html/src"><span class="hs-identifier hs-var">testGroup</span></a></span><span>
</span><span id="line-189"></span><span>        </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;STS Rules - Poolreap Properties&quot;</span></span><span>
</span><span id="line-190"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; Property -&gt; TestTree
forall a. Testable a =&gt; TestName -&gt; a -&gt; TestTree
</span><a href="../../../../tasty-quickcheck/html/src"><span class="hs-identifier hs-var">TQC.testProperty</span></a></span><span>
</span><span id="line-191"></span><span>            </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;pool is removed from stake pool and retiring maps&quot;</span></span><span>
</span><span id="line-192"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ChainProperty era, Default (State (EraRule &quot;PPUP&quot; era)),
 EraGen era, HasTrace (CHAIN era) (GenEnv era)) =&gt;
Property
forall era.
(ChainProperty era, Default (State (EraRule &quot;PPUP&quot; era)),
 EraGen era, HasTrace (CHAIN era) (GenEnv era)) =&gt;
Property
</span><a href="Test.Cardano.Ledger.Shelley.Rules.TestChain.html#removedAfterPoolreap"><span class="hs-identifier hs-var">removedAfterPoolreap</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-193"></span><span>        </span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-194"></span><span>      </span><span class="annot"><span class="annottext">TestName -&gt; [TestTree] -&gt; TestTree
</span><a href="../../../../tasty/html/src"><span class="hs-identifier hs-var">testGroup</span></a></span><span>
</span><span id="line-195"></span><span>        </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;CHAIN level Properties&quot;</span></span><span>
</span><span id="line-196"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; Property -&gt; TestTree
forall a. Testable a =&gt; TestName -&gt; a -&gt; TestTree
</span><a href="../../../../tasty-quickcheck/html/src"><span class="hs-identifier hs-var">TQC.testProperty</span></a></span><span>
</span><span id="line-197"></span><span>            </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;collection of Ada preservation properties&quot;</span></span><span>
</span><span id="line-198"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EraGen era, TestingLedger era ledger,
 State (EraRule &quot;PPUP&quot; era) ~ PPUPState era, ChainProperty era,
 HasTrace (CHAIN era) (GenEnv era),
 HasField &quot;inputs&quot; (TxBody era) (Set (TxIn (Crypto era))),
 HasField &quot;certs&quot; (TxBody era) (StrictSeq (DCert (Crypto era))),
 HasField &quot;wdrls&quot; (TxBody era) (Wdrl (Crypto era))) =&gt;
Property
forall era ledger.
(EraGen era, TestingLedger era ledger,
 State (EraRule &quot;PPUP&quot; era) ~ PPUPState era, ChainProperty era,
 HasTrace (CHAIN era) (GenEnv era),
 HasField &quot;inputs&quot; (TxBody era) (Set (TxIn (Crypto era))),
 HasField &quot;certs&quot; (TxBody era) (StrictSeq (DCert (Crypto era))),
 HasField &quot;wdrls&quot; (TxBody era) (Wdrl (Crypto era))) =&gt;
Property
</span><a href="Test.Cardano.Ledger.Shelley.Rules.TestChain.html#adaPreservationChain"><span class="hs-identifier hs-var">adaPreservationChain</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679803798"><span class="hs-identifier hs-type">ledger</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-199"></span><span>          </span><span class="annot"><span class="annottext">TestName -&gt; Property -&gt; TestTree
forall a. Testable a =&gt; TestName -&gt; a -&gt; TestTree
</span><a href="../../../../tasty-quickcheck/html/src"><span class="hs-identifier hs-var">TQC.testProperty</span></a></span><span>
</span><span id="line-200"></span><span>            </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;inputs are eliminated, outputs added to utxo and TxIds are unique&quot;</span></span><span>
</span><span id="line-201"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EraGen era, ChainProperty era, TestingLedger era ledger,
 Default (State (EraRule &quot;PPUP&quot; era)),
 HasTrace (CHAIN era) (GenEnv era),
 HasField &quot;inputs&quot; (TxBody era) (Set (TxIn (Crypto era))),
 HasField
   &quot;addrWits&quot; (Witnesses era) (Set (WitVKey 'Witness (Crypto era))),
 HasField
   &quot;scriptWits&quot;
   (Witnesses era)
   (Map (ScriptHash (Crypto era)) (Script era))) =&gt;
Property
forall era ledger.
(EraGen era, ChainProperty era, TestingLedger era ledger,
 Default (State (EraRule &quot;PPUP&quot; era)),
 HasTrace (CHAIN era) (GenEnv era),
 HasField &quot;inputs&quot; (TxBody era) (Set (TxIn (Crypto era))),
 HasField
   &quot;addrWits&quot; (Witnesses era) (Set (WitVKey 'Witness (Crypto era))),
 HasField
   &quot;scriptWits&quot;
   (Witnesses era)
   (Map (ScriptHash (Crypto era)) (Script era))) =&gt;
Property
</span><a href="Test.Cardano.Ledger.Shelley.Rules.TestChain.html#collisionFreeComplete"><span class="hs-identifier hs-var">collisionFreeComplete</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679803798"><span class="hs-identifier hs-type">ledger</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-202"></span><span>          </span><span class="annot"><span class="annottext">TestName -&gt; Property -&gt; TestTree
forall a. Testable a =&gt; TestName -&gt; a -&gt; TestTree
</span><a href="../../../../tasty-quickcheck/html/src"><span class="hs-identifier hs-var">TQC.testProperty</span></a></span><span>
</span><span id="line-203"></span><span>            </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;incremental stake calc&quot;</span></span><span>
</span><span id="line-204"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EraGen era, TestingLedger era ledger,
 State (EraRule &quot;PPUP&quot; era) ~ PPUPState era, ChainProperty era,
 HasTrace (CHAIN era) (GenEnv era)) =&gt;
Property
forall era ledger.
(EraGen era, TestingLedger era ledger,
 State (EraRule &quot;PPUP&quot; era) ~ PPUPState era, ChainProperty era,
 HasTrace (CHAIN era) (GenEnv era)) =&gt;
Property
</span><a href="Test.Cardano.Ledger.Shelley.Rules.TestChain.html#stakeIncrTest"><span class="hs-identifier hs-var">stakeIncrTest</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679803798"><span class="hs-identifier hs-type">ledger</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-205"></span><span>        </span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-206"></span><span>      </span><span class="annot"><span class="annottext">TestName -&gt; [TestTree] -&gt; TestTree
</span><a href="../../../../tasty/html/src"><span class="hs-identifier hs-var">testGroup</span></a></span><span>
</span><span id="line-207"></span><span>        </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Properties of Trace generators&quot;</span></span><span>
</span><span id="line-208"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; Property -&gt; TestTree
forall a. Testable a =&gt; TestName -&gt; a -&gt; TestTree
</span><a href="../../../../tasty-quickcheck/html/src"><span class="hs-identifier hs-var">TQC.testProperty</span></a></span><span>
</span><span id="line-209"></span><span>            </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Only valid LEDGER STS signals are generated&quot;</span></span><span>
</span><span id="line-210"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EraGen era, ChainProperty era, HasTrace ledger (GenEnv era),
 Default (State (EraRule &quot;PPUP&quot; era)), BaseEnv ledger ~ Globals,
 State ledger ~ LedgerState era, Show (Environment ledger),
 Show (Signal ledger)) =&gt;
Property
forall era ledger.
(EraGen era, ChainProperty era, HasTrace ledger (GenEnv era),
 Default (State (EraRule &quot;PPUP&quot; era)), BaseEnv ledger ~ Globals,
 State ledger ~ LedgerState era, Show (Environment ledger),
 Show (Signal ledger)) =&gt;
Property
</span><a href="Test.Cardano.Ledger.Shelley.Rules.ClassifyTraces.html#onlyValidLedgerSignalsAreGenerated"><span class="hs-identifier hs-var">onlyValidLedgerSignalsAreGenerated</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679803798"><span class="hs-identifier hs-type">ledger</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-211"></span><span>          </span><span class="annot"><span class="annottext">TestName -&gt; Property -&gt; TestTree
forall a. Testable a =&gt; TestName -&gt; a -&gt; TestTree
</span><a href="../../../../tasty-quickcheck/html/src"><span class="hs-identifier hs-var">TQC.testProperty</span></a></span><span>
</span><span id="line-212"></span><span>            </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Only valid CHAIN STS signals are generated&quot;</span></span><span>
</span><span id="line-213"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EraGen era, Default (State (EraRule &quot;PPUP&quot; era)),
 HasTrace (CHAIN era) (GenEnv era), Show (TxSeq era)) =&gt;
Property
forall era.
(EraGen era, Default (State (EraRule &quot;PPUP&quot; era)),
 HasTrace (CHAIN era) (GenEnv era), Show (TxSeq era)) =&gt;
Property
</span><a href="Test.Cardano.Ledger.Shelley.Rules.ClassifyTraces.html#onlyValidChainSignalsAreGenerated"><span class="hs-identifier hs-var">onlyValidChainSignalsAreGenerated</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-214"></span><span>        </span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-215"></span><span>      </span><span class="annot"><span class="annottext">TestTree
</span><a href="Test.Cardano.Ledger.Shelley.ByronTranslation.html#testGroupByronTranslation"><span class="hs-identifier hs-var">testGroupByronTranslation</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-216"></span><span>      </span><span class="annot"><span class="annottext">TestTree
</span><a href="Test.Cardano.Ledger.Shelley.ShelleyTranslation.html#testGroupShelleyTranslation"><span class="hs-identifier hs-var">testGroupShelleyTranslation</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-217"></span><span>      </span><span class="annot"><span class="annottext">TestName -&gt; [TestTree] -&gt; TestTree
</span><a href="../../../../tasty/html/src"><span class="hs-identifier hs-var">testGroup</span></a></span><span>
</span><span id="line-218"></span><span>        </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Compact Address Tests&quot;</span></span><span>
</span><span id="line-219"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; (Addr (Crypto era) -&gt; Bool) -&gt; TestTree
forall a. Testable a =&gt; TestName -&gt; a -&gt; TestTree
</span><a href="../../../../tasty-quickcheck/html/src"><span class="hs-identifier hs-var">TQC.testProperty</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Compact address round trip&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Crypto (Crypto era) =&gt; Addr (Crypto era) -&gt; Bool
forall crypto. Crypto crypto =&gt; Addr crypto -&gt; Bool
</span><a href="Test.Cardano.Ledger.Shelley.Address.CompactAddr.html#propCompactAddrRoundTrip"><span class="hs-identifier hs-var">propCompactAddrRoundTrip</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-220"></span><span>          </span><span class="annot"><span class="annottext">TestName -&gt; (Addr (Crypto era) -&gt; Bool) -&gt; TestTree
forall a. Testable a =&gt; TestName -&gt; a -&gt; TestTree
</span><a href="../../../../tasty-quickcheck/html/src"><span class="hs-identifier hs-var">TQC.testProperty</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Compact address binary representation&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Addr (Crypto era) -&gt; Bool
forall crypto. Addr crypto -&gt; Bool
</span><a href="Test.Cardano.Ledger.Shelley.Address.CompactAddr.html#propCompactSerializationAgree"><span class="hs-identifier hs-var">propCompactSerializationAgree</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-221"></span><span>          </span><span class="annot"><span class="annottext">TestName -&gt; (Addr (Crypto era) -&gt; Gen Property) -&gt; TestTree
forall a. Testable a =&gt; TestName -&gt; a -&gt; TestTree
</span><a href="../../../../tasty-quickcheck/html/src"><span class="hs-identifier hs-var">TQC.testProperty</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Ensure failures on incorrect binary data&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Addr (Crypto era) -&gt; Gen Property) -&gt; TestTree)
-&gt; (Addr (Crypto era) -&gt; Gen Property) -&gt; TestTree
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-222"></span><span>            </span><span class="annot"><span class="annottext">Crypto (Crypto era) =&gt; Addr (Crypto era) -&gt; Gen Property
forall crypto. Crypto crypto =&gt; Addr crypto -&gt; Gen Property
</span><a href="Test.Cardano.Ledger.Shelley.Address.CompactAddr.html#propDecompactErrors"><span class="hs-identifier hs-var">propDecompactErrors</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803799"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-223"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-224"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-225"></span></pre></body></html>