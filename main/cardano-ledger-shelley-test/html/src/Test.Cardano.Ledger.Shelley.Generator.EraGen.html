<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE AllowAmbiguousTypes #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE ConstraintKinds #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE PatternSynonyms #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE PolyKinds #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# OPTIONS_GHC -fno-warn-orphans #-}</span><span>
</span><span id="line-15"></span><span>
</span><span id="line-16"></span><span class="hs-comment">-- | Infrastructure for generating STS Traces over any Era</span><span>
</span><span id="line-17"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Test.Cardano.Ledger.Shelley.Generator.EraGen</span><span>
</span><span id="line-18"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#genUtxo0"><span class="hs-identifier">genUtxo0</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#genesisId"><span class="hs-identifier">genesisId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#EraGen"><span class="hs-identifier">EraGen</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#MinLEDGER_STS"><span class="hs-identifier">MinLEDGER_STS</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#MinCHAIN_STS"><span class="hs-identifier">MinCHAIN_STS</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#MinUTXO_STS"><span class="hs-identifier">MinUTXO_STS</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#MinGenTxBody"><span class="hs-identifier">MinGenTxBody</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#MinGenTxout"><span class="hs-identifier">MinGenTxout</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#Label"><span class="hs-identifier">Label</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#Sets"><span class="hs-identifier">Sets</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#someKeyPairs"><span class="hs-identifier">someKeyPairs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#allScripts"><span class="hs-identifier">allScripts</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#randomByHash"><span class="hs-identifier">randomByHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span class="hs-keyword">where</span><span>
</span><span id="line-33"></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier">Cardano.Binary</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier">Annotator</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier">FromCBOR</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier">ToCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier">toCBOR</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier">serializeEncoding'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../cardano-crypto-class/html/src"><span class="hs-identifier">Cardano.Crypto.Hash</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Hash</span></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Cardano.Ledger.Address</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">toAddr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Cardano.Ledger.AuxiliaryData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">AuxiliaryDataHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">ValidateAuxiliaryData</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Cardano.Ledger.BaseTypes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Network</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">ProtVer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">ShelleyBase</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier">StrictMaybe</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">UnitInterval</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Cardano.Ledger.Coin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Coin</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Cardano.Ledger.Core</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Core</span></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Cardano.Ledger.Crypto</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CC</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Crypto</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">HASH</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Cardano.Ledger.Era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Crypto</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">ValidateScript</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Cardano.Ledger.Hashes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">ScriptHash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Cardano.Ledger.Keys</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">KeyRole</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Witness</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-pretty/html/src"><span class="hs-identifier">Cardano.Ledger.Pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-pretty/html/src"><span class="hs-identifier">PrettyA</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Cardano.Ledger.SafeHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">unsafeMakeSafeHash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">Cardano.Ledger.Shelley.API</span></a></span><span>
</span><span id="line-48"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Addr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Addr</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>    </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Block</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>    </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Credential</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">ScriptHashObj</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>    </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">KeyPairs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>    </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">LedgerEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>    </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">LedgerState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>    </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">LedgersEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>    </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">StakeReference</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">StakeRefBase</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">Cardano.Ledger.Shelley.Constraints</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">UsesPParams</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">Cardano.Ledger.Shelley.LedgerState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">StashedAVVMAddresses</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">UTxOState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">Cardano.Ledger.Shelley.PParams</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">Update</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">Cardano.Ledger.Shelley.Rules.Utxo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">UtxoEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">Cardano.Ledger.Shelley.TxBody</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">DCert</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">Wdrl</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">WitVKey</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">Cardano.Ledger.Shelley.UTxO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier">UTxO</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Cardano.Ledger.Slot</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-slotting/html/src"><span class="hs-identifier">EpochNo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">Cardano.Ledger.TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">TxId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">TxId</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier">TxIn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-protocol-tpraos/html/src"><span class="hs-identifier">Cardano.Protocol.TPraos.BHeader</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-protocol-tpraos/html/src"><span class="hs-identifier">BHeader</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-slotting/html/src"><span class="hs-identifier">Cardano.Slotting.Slot</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-slotting/html/src"><span class="hs-identifier">SlotNo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier">Control.State.Transition.Extended</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier">STS</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Coerce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier">coerce</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../data-default-class/html/src"><span class="hs-identifier">Data.Default.Class</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../data-default-class/html/src"><span class="hs-identifier">Default</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../hashable/html/src"><span class="hs-identifier">Data.Hashable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../hashable/html/src"><span class="hs-identifier">Hashable</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier">Data.Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier">Map</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier">Data.Sequence</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier">Seq</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier">Data.Sequence.Strict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier">StrictSeq</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier">Set</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">GHC.Natural</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Natural</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">GHC.Records</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">HasField</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../nothunks/html/src"><span class="hs-identifier">NoThunks.Class</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../nothunks/html/src"><span class="hs-identifier">NoThunks</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.Constants.html"><span class="hs-identifier">Test.Cardano.Ledger.Shelley.Generator.Constants</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.Constants.html#Constants"><span class="hs-identifier">Constants</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.Core.html"><span class="hs-identifier">Test.Cardano.Ledger.Shelley.Generator.Core</span></a></span><span>
</span><span id="line-80"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.Core.html#GenEnv"><span class="hs-identifier">GenEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-81"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.Core.html#ScriptInfo"><span class="hs-identifier">ScriptInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-82"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.Core.html#TwoPhase2ArgInfo"><span class="hs-identifier">TwoPhase2ArgInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-83"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.Core.html#TwoPhase3ArgInfo"><span class="hs-identifier">TwoPhase3ArgInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-84"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.Core.html#genesisCoins"><span class="hs-identifier">genesisCoins</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-85"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.ScriptClass.html"><span class="hs-identifier">Test.Cardano.Ledger.Shelley.Generator.ScriptClass</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.ScriptClass.html#ScriptClass"><span class="hs-identifier">ScriptClass</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.ScriptClass.html#baseScripts"><span class="hs-identifier">baseScripts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.ScriptClass.html#combinedScripts"><span class="hs-identifier">combinedScripts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.ScriptClass.html#keyPairs"><span class="hs-identifier">keyPairs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.Chain.html"><span class="hs-identifier">Test.Cardano.Ledger.Shelley.Rules.Chain</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.Chain.html#CHAIN"><span class="hs-identifier">CHAIN</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.Chain.html#ChainState"><span class="hs-identifier">ChainState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Utils.html"><span class="hs-identifier">Test.Cardano.Ledger.Shelley.Utils</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Utils.html#Split"><span class="hs-identifier">Split</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../QuickCheck/html/src"><span class="hs-identifier">Test.QuickCheck</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../QuickCheck/html/src"><span class="hs-identifier">Gen</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../QuickCheck/html/src"><span class="hs-identifier">choose</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../QuickCheck/html/src"><span class="hs-identifier">shuffle</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span class="hs-comment">{------------------------------------------------------------------------------
 An EraGen instance makes it possible to run the Shelley property tests. The idea
 is to generate (not fully) random Transactions, i.e. with enough coherency to be
 a real transaction, but which are strung together into Traces. In each step of the trace
 one of these (not fully) random transactions is applied. The idea is that some property should
 hold on any trace. Because we want these tests to work in any Era there are two things
 to consider:
 1) A Transaction generator needs to be parametric over all Eras.
 2) Since the Internals of the STS rules differ from Era to Era, the STS instances
    must also adapt to many Eras.

 To account for the &quot;not fully&quot; random nature of tranactions we use the type GenEnv which
 holds enough information to build &quot;not fully&quot; random transactions that are still coherent.

 For Transactions, we account for these differences by using the type families found in
 Cardano.Ledger.Core and other modules, and by a set of Era specific generators encoded
 in the EraGen class. Generally there is some &quot;method&quot; in the class for each type family.

 For traces we use the &quot;class HasTrace (CHAIN era) (GenEnv era)&quot;

 The following constraints encode the minimal properties needed to build a chain for
 any Era. It should be an invariant that these properties hold for all Eras (Shelley, Allegra, Mary, Alonzo ...)
 If we introduce a new Era, where they do not hold, we must adjust these things, so they do.
 1) Add a new type family
 2) Add new methods to EraGen
 3) Change the minimal constraints, so that they now hold for all Eras
 4) Change the generators to use the new methods.

 -----------------------------------------------------------------------------}</span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span class="hs-comment">-- | Minimal requirements on the LEDGER and LEDGERS instances</span><span>
</span><span id="line-122"></span><span class="hs-keyword">type</span><span> </span><span id="MinLEDGER_STS"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#MinLEDGER_STS"><span class="hs-identifier hs-var">MinLEDGER_STS</span></a></span></span><span> </span><span id="local-6989586621679795092"><span class="annot"><a href="#local-6989586621679795092"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-123"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">Environment</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGERS&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679795092"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier hs-type">LedgersEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795092"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-124"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">BaseM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679795092"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">ShelleyBase</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-125"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">Signal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679795092"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795092"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-126"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679795092"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795092"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-127"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">Environment</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679795092"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier hs-type">LedgerEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795092"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-128"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">BaseM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGERS&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679795092"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">ShelleyBase</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-129"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGERS&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679795092"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795092"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-130"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">Signal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGERS&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679795092"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Seq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795092"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-131"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679795092"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-133"></span><span>
</span><span id="line-134"></span><span class="hs-comment">-- | Minimal requirements on the CHAIN instances</span><span>
</span><span id="line-135"></span><span class="hs-keyword">type</span><span> </span><span id="MinCHAIN_STS"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#MinCHAIN_STS"><span class="hs-identifier hs-var">MinCHAIN_STS</span></a></span></span><span> </span><span id="local-6989586621679795086"><span class="annot"><a href="#local-6989586621679795086"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-136"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.Chain.html#CHAIN"><span class="hs-identifier hs-type">CHAIN</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795086"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-137"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">BaseM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.Chain.html#CHAIN"><span class="hs-identifier hs-type">CHAIN</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795086"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">ShelleyBase</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-138"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">Environment</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.Chain.html#CHAIN"><span class="hs-identifier hs-type">CHAIN</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795086"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-139"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.Chain.html#CHAIN"><span class="hs-identifier hs-type">CHAIN</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795086"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.Chain.html#ChainState"><span class="hs-identifier hs-type">ChainState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795086"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-140"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">Signal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Rules.Chain.html#CHAIN"><span class="hs-identifier hs-type">CHAIN</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795086"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Block</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-protocol-tpraos/html/src"><span class="hs-identifier hs-type">BHeader</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795086"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679795086"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-141"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span class="hs-comment">-- | Minimal requirements on the UTxO instances</span><span>
</span><span id="line-144"></span><span class="hs-keyword">type</span><span> </span><span id="MinUTXO_STS"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#MinUTXO_STS"><span class="hs-identifier hs-var">MinUTXO_STS</span></a></span></span><span> </span><span id="local-6989586621679795085"><span class="annot"><a href="#local-6989586621679795085"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-145"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;UTXOW&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679795085"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-146"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">BaseM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;UTXOW&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679795085"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">ShelleyBase</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-147"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;UTXOW&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679795085"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier hs-type">UTxOState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795085"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-148"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">Environment</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;UTXOW&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679795085"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier hs-type">UtxoEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795085"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-149"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">Signal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;UTXOW&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679795085"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795085"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-150"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;UTXO&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679795085"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier hs-type">UTxOState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795085"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-151"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">Environment</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;UTXO&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679795085"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier hs-type">UtxoEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795085"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-152"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">Signal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;UTXO&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679795085"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795085"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-153"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span class="hs-comment">-- | Minimal requirements on Core.PParams to generate random stuff</span><span>
</span><span id="line-156"></span><span class="hs-keyword">type</span><span> </span><span id="MinGenPParams"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#MinGenPParams"><span class="hs-identifier hs-var">MinGenPParams</span></a></span></span><span> </span><span id="local-6989586621679795083"><span class="annot"><a href="#local-6989586621679795083"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-157"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier hs-type">UsesPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795083"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-158"></span><span>    </span><span class="annot"><a href="../../../../data-default-class/html/src"><span class="hs-identifier hs-type">Default</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.PParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795083"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-159"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">HasField</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;_minPoolCost&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.PParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795083"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-160"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">HasField</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;_protocolVersion&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.PParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795083"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">ProtVer</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-161"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">HasField</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;_eMax&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.PParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795083"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../cardano-slotting/html/src"><span class="hs-identifier hs-type">EpochNo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-162"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">HasField</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;_d&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.PParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795083"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">UnitInterval</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-163"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">HasField</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;_keyDeposit&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.PParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795083"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-164"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">HasField</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;_poolDeposit&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.PParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795083"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-165"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">HasField</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;_minfeeA&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.PParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795083"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Natural</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-166"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">HasField</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;_minUTxOValue&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.PParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795083"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-167"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">HasField</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;_minfeeB&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.PParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795083"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Natural</span></a></span><span>
</span><span id="line-168"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span class="hs-keyword">type</span><span> </span><span id="MinGenWitnesses"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#MinGenWitnesses"><span class="hs-identifier hs-var">MinGenWitnesses</span></a></span></span><span> </span><span id="local-6989586621679795081"><span class="annot"><a href="#local-6989586621679795081"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-171"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Witnesses</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795081"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-172"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Witnesses</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795081"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-173"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Witnesses</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795081"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-174"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-175"></span><span>
</span><span id="line-176"></span><span class="hs-keyword">type</span><span> </span><span id="MinGenAuxData"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#MinGenAuxData"><span class="hs-identifier hs-var">MinGenAuxData</span></a></span></span><span> </span><span id="local-6989586621679795078"><span class="annot"><a href="#local-6989586621679795078"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-177"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">ValidateAuxiliaryData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795078"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795078"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-178"></span><span>    </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.AuxiliaryData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795078"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- Needs to be serialized</span><span>
</span><span id="line-179"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.AuxiliaryData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795078"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-180"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.AuxiliaryData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795078"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-181"></span><span>    </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">Annotator</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.AuxiliaryData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795078"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- arises because some pattern Constructors deserialize</span><span>
</span><span id="line-182"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-183"></span><span>
</span><span id="line-184"></span><span class="hs-keyword">type</span><span> </span><span id="MinGenTxBody"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#MinGenTxBody"><span class="hs-identifier hs-var">MinGenTxBody</span></a></span></span><span> </span><span id="local-6989586621679795076"><span class="annot"><a href="#local-6989586621679795076"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-185"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795076"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-186"></span><span>    </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795076"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-187"></span><span>    </span><span class="annot"><a href="../../../../nothunks/html/src"><span class="hs-identifier hs-type">NoThunks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795076"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-188"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795076"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-189"></span><span>    </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">Annotator</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795076"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- arises because some pattern Constructors deserialize</span><span>
</span><span id="line-190"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">HasField</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;txfee&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795076"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Coin</span></a></span><span>
</span><span id="line-191"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-192"></span><span>
</span><span id="line-193"></span><span class="hs-keyword">class</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.TxOut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795226"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="MinGenTxout"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#MinGenTxout"><span class="hs-identifier hs-var">MinGenTxout</span></a></span></span><span> </span><span id="local-6989586621679795226"><span class="annot"><a href="#local-6989586621679795226"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-194"></span><span>  </span><span id="calcEraMinUTxO"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#calcEraMinUTxO"><span class="hs-identifier hs-type">calcEraMinUTxO</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.TxOut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795226"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.PParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795226"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Coin</span></a></span><span>
</span><span id="line-195"></span><span>  </span><span id="addValToTxOut"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#addValToTxOut"><span class="hs-identifier hs-type">addValToTxOut</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Value</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795226"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.TxOut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795226"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.TxOut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795226"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-196"></span><span>  </span><span id="genEraTxOut"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#genEraTxOut"><span class="hs-identifier hs-type">genEraTxOut</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.Core.html#GenEnv"><span class="hs-identifier hs-type">GenEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795226"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../QuickCheck/html/src"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Value</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795226"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Addr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795226"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../QuickCheck/html/src"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.TxOut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795226"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-197"></span><span>
</span><span id="line-198"></span><span class="hs-comment">-- ======================================================================================</span><span>
</span><span id="line-199"></span><span class="hs-comment">-- The EraGen class. Generally one method for each type family in Cardano.Ledger.Core</span><span>
</span><span id="line-200"></span><span class="hs-comment">-- ======================================================================================</span><span>
</span><span id="line-201"></span><span>
</span><span id="line-202"></span><span class="hs-keyword">class</span><span>
</span><span id="line-203"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-204"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Utils.html#Split"><span class="hs-identifier hs-type">Split</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Value</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-205"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.ScriptClass.html#ScriptClass"><span class="hs-identifier hs-type">ScriptClass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-206"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#MinGenPParams"><span class="hs-identifier hs-type">MinGenPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-207"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#MinGenWitnesses"><span class="hs-identifier hs-type">MinGenWitnesses</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-208"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#MinGenAuxData"><span class="hs-identifier hs-type">MinGenAuxData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-209"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#MinGenTxBody"><span class="hs-identifier hs-type">MinGenTxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-210"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">HasField</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;body&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-211"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#MinGenTxout"><span class="hs-identifier hs-type">MinGenTxout</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-212"></span><span>    </span><span class="annot"><a href="../../../../cardano-ledger-pretty/html/src"><span class="hs-identifier hs-type">PrettyA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-213"></span><span>    </span><span class="annot"><a href="../../../../cardano-ledger-pretty/html/src"><span class="hs-identifier hs-type">PrettyA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-214"></span><span>    </span><span class="annot"><a href="../../../../cardano-ledger-pretty/html/src"><span class="hs-identifier hs-type">PrettyA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Witnesses</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-215"></span><span>    </span><span class="annot"><a href="../../../../cardano-ledger-pretty/html/src"><span class="hs-identifier hs-type">PrettyA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Value</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-216"></span><span>    </span><span class="annot"><a href="../../../../data-default-class/html/src"><span class="hs-identifier hs-type">Default</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier hs-type">StashedAVVMAddresses</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-217"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-218"></span><span>  </span><span id="EraGen"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#EraGen"><span class="hs-identifier hs-var">EraGen</span></a></span></span><span> </span><span id="local-6989586621679795276"><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span></span><span>
</span><span id="line-219"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-220"></span><span>  </span><span class="hs-comment">-- | Generate a genesis value for the Era</span><span>
</span><span id="line-221"></span><span>  </span><span id="genGenesisValue"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#genGenesisValue"><span class="hs-identifier hs-type">genGenesisValue</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.Core.html#GenEnv"><span class="hs-identifier hs-type">GenEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../QuickCheck/html/src"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Value</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-222"></span><span>
</span><span id="line-223"></span><span>  </span><span class="hs-comment">-- | A list of three-phase scripts that can be chosen for payment when building a transaction</span><span>
</span><span id="line-224"></span><span>  </span><span id="genEraTwoPhase3Arg"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#genEraTwoPhase3Arg"><span class="hs-identifier hs-type">genEraTwoPhase3Arg</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.Core.html#TwoPhase3ArgInfo"><span class="hs-identifier hs-type">TwoPhase3ArgInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-225"></span><span>  </span><span id="local-6989586621679795070"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#genEraTwoPhase3Arg"><span class="hs-identifier hs-var hs-var">genEraTwoPhase3Arg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span></span><span>
</span><span id="line-226"></span><span>
</span><span id="line-227"></span><span>  </span><span class="hs-comment">-- | A list of two-phase scripts that can be chosen for Delegating, Minting, or Rewarding when building a transaction</span><span>
</span><span id="line-228"></span><span>  </span><span id="genEraTwoPhase2Arg"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#genEraTwoPhase2Arg"><span class="hs-identifier hs-type">genEraTwoPhase2Arg</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.Core.html#TwoPhase2ArgInfo"><span class="hs-identifier hs-type">TwoPhase2ArgInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-229"></span><span>  </span><span id="local-6989586621679795068"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#genEraTwoPhase2Arg"><span class="hs-identifier hs-var hs-var">genEraTwoPhase2Arg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span></span><span>
</span><span id="line-230"></span><span>
</span><span id="line-231"></span><span>  </span><span class="hs-comment">-- | Given some pre-generated data, generate an era-specific TxBody,</span><span>
</span><span id="line-232"></span><span>  </span><span class="hs-comment">-- and a list of additional scripts for eras that sometimes require</span><span>
</span><span id="line-233"></span><span>  </span><span class="hs-comment">-- additional script witnessing.</span><span>
</span><span id="line-234"></span><span>  </span><span id="genEraTxBody"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#genEraTxBody"><span class="hs-identifier hs-type">genEraTxBody</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-235"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.Core.html#GenEnv"><span class="hs-identifier hs-type">GenEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-236"></span><span>    </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier hs-type">UTxO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-237"></span><span>    </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.PParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-238"></span><span>    </span><span class="annot"><a href="../../../../cardano-slotting/html/src"><span class="hs-identifier hs-type">SlotNo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-239"></span><span>    </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-240"></span><span>    </span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier hs-type">StrictSeq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.TxOut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-241"></span><span>    </span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier hs-type">StrictSeq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier hs-type">DCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-242"></span><span>    </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier hs-type">Wdrl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-243"></span><span>    </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Coin</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-244"></span><span>    </span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier hs-type">Update</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-245"></span><span>    </span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">AuxiliaryDataHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-246"></span><span>    </span><span class="annot"><a href="../../../../QuickCheck/html/src"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Script</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-247"></span><span>
</span><span id="line-248"></span><span>  </span><span class="hs-comment">-- | Generate era-specific auxiliary data</span><span>
</span><span id="line-249"></span><span>  </span><span id="genEraAuxiliaryData"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#genEraAuxiliaryData"><span class="hs-identifier hs-type">genEraAuxiliaryData</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.Constants.html#Constants"><span class="hs-identifier hs-type">Constants</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../QuickCheck/html/src"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.AuxiliaryData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-250"></span><span>
</span><span id="line-251"></span><span>  </span><span class="hs-comment">-- | Update an era-specific TxBody</span><span>
</span><span id="line-252"></span><span>  </span><span id="updateEraTxBody"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#updateEraTxBody"><span class="hs-identifier hs-type">updateEraTxBody</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-253"></span><span>    </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier hs-type">UTxO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-254"></span><span>    </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.PParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-255"></span><span>    </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Witnesses</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-256"></span><span>    </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-257"></span><span>    </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Coin</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-258"></span><span>    </span><span class="hs-comment">-- | This overrides the existing TxFee</span><span>
</span><span id="line-259"></span><span>    </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-260"></span><span>    </span><span class="hs-comment">-- | This is to be Unioned with the existing TxIn</span><span>
</span><span id="line-261"></span><span>    </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.TxOut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-262"></span><span>    </span><span class="hs-comment">-- | This is to be Appended to the end of the existing TxOut</span><span>
</span><span id="line-263"></span><span>    </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-264"></span><span>
</span><span id="line-265"></span><span>  </span><span class="hs-comment">-- |  Union the TxIn with the existing TxIn in the TxBody</span><span>
</span><span id="line-266"></span><span>  </span><span id="addInputs"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#addInputs"><span class="hs-identifier hs-type">addInputs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-267"></span><span>  </span><span id="local-6989586621679795063"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#addInputs"><span class="hs-identifier hs-var hs-var">addInputs</span></a></span><span> </span><span id="local-6989586621679795062"><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621679795062"><span class="hs-identifier hs-var">txb</span></a></span></span><span> </span><span id="local-6989586621679795061"><span class="annot"><span class="annottext">Set (TxIn (Crypto era))
</span><a href="#local-6989586621679795061"><span class="hs-identifier hs-var">_ins</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621679795062"><span class="hs-identifier hs-var">txb</span></a></span></span><span>
</span><span id="line-268"></span><span>
</span><span id="line-269"></span><span>  </span><span id="genEraPParamsDelta"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#genEraPParamsDelta"><span class="hs-identifier hs-type">genEraPParamsDelta</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.Constants.html#Constants"><span class="hs-identifier hs-type">Constants</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.PParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../QuickCheck/html/src"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.PParamsDelta</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-270"></span><span>
</span><span id="line-271"></span><span>  </span><span id="genEraPParams"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#genEraPParams"><span class="hs-identifier hs-type">genEraPParams</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.Constants.html#Constants"><span class="hs-identifier hs-type">Constants</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../QuickCheck/html/src"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.PParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-272"></span><span>
</span><span id="line-273"></span><span>  </span><span class="hs-comment">-- Its is VERY IMPORTANT that the decentralisation parameter &quot;_d&quot; be non-zero and less than 1.</span><span>
</span><span id="line-274"></span><span>  </span><span class="hs-comment">-- The system will deadlock if d==0 and there are no registered stake pools.</span><span>
</span><span id="line-275"></span><span>  </span><span class="hs-comment">-- use Test.Cardano.Ledger.Shelley.Generator.Update(genDecentralisationParam) in your instance.</span><span>
</span><span id="line-276"></span><span>
</span><span id="line-277"></span><span>  </span><span id="genEraWitnesses"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#genEraWitnesses"><span class="hs-identifier hs-type">genEraWitnesses</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-278"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier hs-type">UTxO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.Core.html#ScriptInfo"><span class="hs-identifier hs-type">ScriptInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-279"></span><span>    </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier hs-type">WitVKey</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Witness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-280"></span><span>    </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Script</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-281"></span><span>    </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Witnesses</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-282"></span><span>
</span><span id="line-283"></span><span>  </span><span class="hs-comment">-- When choosing new recipeients from the UTxO, choose only those whose Outputs meet this predicate.</span><span>
</span><span id="line-284"></span><span>  </span><span id="genEraGoodTxOut"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#genEraGoodTxOut"><span class="hs-identifier hs-type">genEraGoodTxOut</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.TxOut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-285"></span><span>  </span><span id="local-6989586621679795055"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#genEraGoodTxOut"><span class="hs-identifier hs-var hs-var">genEraGoodTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut era
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span> </span><span class="hs-comment">-- The default implementation marks every TxOut as good.</span><span>
</span><span id="line-286"></span><span>
</span><span id="line-287"></span><span>  </span><span class="hs-comment">-- | Construct a transaction given its constituent parts.</span></span><span>
</span><span id="line-288"></span><span>  </span><span id="constructTx"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#constructTx"><span class="hs-identifier hs-type">constructTx</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-289"></span><span>    </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-290"></span><span>    </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Witnesses</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-291"></span><span>    </span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.AuxiliaryData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-292"></span><span>    </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-293"></span><span>
</span><span id="line-294"></span><span>  </span><span class="hs-comment">-- | compute the delta cost of an additional script on  per Era basis.</span><span>
</span><span id="line-295"></span><span>  </span><span id="genEraScriptCost"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#genEraScriptCost"><span class="hs-identifier hs-type">genEraScriptCost</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.PParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Script</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Coin</span></a></span><span>
</span><span id="line-296"></span><span>  </span><span id="local-6989586621679795052"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#genEraScriptCost"><span class="hs-identifier hs-var hs-var">genEraScriptCost</span></a></span><span> </span><span id="local-6989586621679795051"><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621679795051"><span class="hs-identifier hs-var">_pp</span></a></span></span><span> </span><span id="local-6989586621679795050"><span class="annot"><span class="annottext">Script era
</span><a href="#local-6989586621679795050"><span class="hs-identifier hs-var">_script</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span>
</span><span id="line-297"></span><span>
</span><span id="line-298"></span><span>  </span><span class="hs-comment">-- | A final opportunity to tweak things when the generator is done. Possible uses</span><span>
</span><span id="line-299"></span><span>  </span><span class="hs-comment">--   1) Add tracing when debugging on a per Era basis</span></span><span>
</span><span id="line-300"></span><span>  </span><span id="genEraDone"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#genEraDone"><span class="hs-identifier hs-type">genEraDone</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.PParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../QuickCheck/html/src"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-301"></span><span>  </span><span id="local-6989586621679795047"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#genEraDone"><span class="hs-identifier hs-var hs-var">genEraDone</span></a></span><span> </span><span id="local-6989586621679795046"><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621679795046"><span class="hs-identifier hs-var">_pp</span></a></span></span><span> </span><span id="local-6989586621679795045"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679795045"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tx era -&gt; Gen (Tx era)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679795045"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-302"></span><span>
</span><span id="line-303"></span><span>  </span><span class="hs-comment">-- | A final opportunity to tweak things at the block level. Possible uses</span><span>
</span><span id="line-304"></span><span>  </span><span class="hs-comment">--   2) Run a test that might decide to 'discard' the test, because we got unlucky, and a rare unfixible condition has occurred.</span></span><span>
</span><span id="line-305"></span><span>  </span><span id="genEraTweakBlock"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#genEraTweakBlock"><span class="hs-identifier hs-type">genEraTweakBlock</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.PParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Seq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../QuickCheck/html/src"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Seq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-306"></span><span>  </span><span id="local-6989586621679795043"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#genEraTweakBlock"><span class="hs-identifier hs-var hs-var">genEraTweakBlock</span></a></span><span> </span><span id="local-6989586621679795042"><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621679795042"><span class="hs-identifier hs-var">_pp</span></a></span></span><span> </span><span id="local-6989586621679795041"><span class="annot"><span class="annottext">Seq (Tx era)
</span><a href="#local-6989586621679795041"><span class="hs-identifier hs-var">seqTx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Seq (Tx era) -&gt; Gen (Seq (Tx era))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Seq (Tx era)
</span><a href="#local-6989586621679795041"><span class="hs-identifier hs-var">seqTx</span></a></span></span><span>
</span><span id="line-307"></span><span>
</span><span id="line-308"></span><span>  </span><span id="hasFailedScripts"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#hasFailedScripts"><span class="hs-identifier hs-type">hasFailedScripts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-309"></span><span>  </span><span id="local-6989586621679795039"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#hasFailedScripts"><span class="hs-identifier hs-var hs-var">hasFailedScripts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Tx era -&gt; Bool
forall a b. a -&gt; b -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span></span><span>
</span><span id="line-310"></span><span>
</span><span id="line-311"></span><span>  </span><span id="feeOrCollateral"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#feeOrCollateral"><span class="hs-identifier hs-type">feeOrCollateral</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier hs-type">UTxO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795276"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Coin</span></a></span><span>
</span><span id="line-312"></span><span>  </span><span id="local-6989586621679795036"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#feeOrCollateral"><span class="hs-identifier hs-var hs-var">feeOrCollateral</span></a></span><span> </span><span id="local-6989586621679795035"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679795035"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="annot"><span class="annottext">UTxO era
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k (x :: k) r a. HasField x r a =&gt; r -&gt; a
forall r a. HasField &quot;txfee&quot; r a =&gt; r -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">getField</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;txfee&quot;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Coin) -&gt; TxBody era -&gt; Coin
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era -&gt; TxBody era
forall k (x :: k) r a. HasField x r a =&gt; r -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">getField</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;body&quot;</span></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679795035"><span class="hs-identifier hs-var">tx</span></a></span></span><span>
</span><span id="line-313"></span><span>
</span><span id="line-314"></span><span class="hs-comment">{------------------------------------------------------------------------------
  Generators shared across eras
 -----------------------------------------------------------------------------}</span><span>
</span><span id="line-317"></span><span>
</span><span id="line-318"></span><span class="hs-comment">-- | Select between _lower_ and _upper_ keys from 'keyPairs'</span><span>
</span><span id="line-319"></span><span id="local-6989586621679795231"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#someKeyPairs"><span class="hs-identifier hs-type">someKeyPairs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795231"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.Constants.html#Constants"><span class="hs-identifier hs-type">Constants</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../QuickCheck/html/src"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier hs-type">KeyPairs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795231"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-320"></span><span id="someKeyPairs"><span class="annot"><span class="annottext">someKeyPairs :: Constants -&gt; Int -&gt; Int -&gt; Gen (KeyPairs crypto)
</span><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#someKeyPairs"><span class="hs-identifier hs-var hs-var">someKeyPairs</span></a></span></span><span> </span><span id="local-6989586621679795033"><span class="annot"><span class="annottext">Constants
</span><a href="#local-6989586621679795033"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621679795032"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679795032"><span class="hs-identifier hs-var">lower</span></a></span></span><span> </span><span id="local-6989586621679795031"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679795031"><span class="hs-identifier hs-var">upper</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-321"></span><span>  </span><span class="annot"><span class="annottext">Int -&gt; KeyPairs crypto -&gt; KeyPairs crypto
forall a. Int -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">take</span></a></span><span>
</span><span id="line-322"></span><span>    </span><span class="annot"><span class="annottext">(Int -&gt; KeyPairs crypto -&gt; KeyPairs crypto)
-&gt; Gen Int -&gt; Gen (KeyPairs crypto -&gt; KeyPairs crypto)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(Int, Int) -&gt; Gen Int
forall a. Random a =&gt; (a, a) -&gt; Gen a
</span><a href="../../../../QuickCheck/html/src"><span class="hs-identifier hs-var">choose</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679795032"><span class="hs-identifier hs-var">lower</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679795031"><span class="hs-identifier hs-var">upper</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-323"></span><span>    </span><span class="annot"><span class="annottext">Gen (KeyPairs crypto -&gt; KeyPairs crypto)
-&gt; Gen (KeyPairs crypto) -&gt; Gen (KeyPairs crypto)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">KeyPairs crypto -&gt; Gen (KeyPairs crypto)
forall a. [a] -&gt; Gen [a]
</span><a href="../../../../QuickCheck/html/src"><span class="hs-identifier hs-var">shuffle</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Constants -&gt; KeyPairs crypto
forall crypto. Crypto crypto =&gt; Constants -&gt; KeyPairs crypto
</span><a href="Test.Cardano.Ledger.Shelley.Generator.ScriptClass.html#keyPairs"><span class="hs-identifier hs-var">keyPairs</span></a></span><span> </span><span class="annot"><span class="annottext">Constants
</span><a href="#local-6989586621679795033"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-324"></span><span>
</span><span id="line-325"></span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#genUtxo0"><span class="hs-identifier hs-type">genUtxo0</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679795028"><span class="annot"><a href="#local-6989586621679795028"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#EraGen"><span class="hs-identifier hs-type">EraGen</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795028"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.Core.html#GenEnv"><span class="hs-identifier hs-type">GenEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795028"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../QuickCheck/html/src"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-shelley/html/src"><span class="hs-identifier hs-type">UTxO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795028"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-326"></span><span id="genUtxo0"><span class="annot"><span class="annottext">genUtxo0 :: GenEnv era -&gt; Gen (UTxO era)
</span><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#genUtxo0"><span class="hs-identifier hs-var hs-var">genUtxo0</span></a></span></span><span> </span><span id="local-6989586621679795027"><span class="annot"><span class="annottext">ge :: GenEnv era
</span><a href="#local-6989586621679795027"><span class="hs-identifier hs-var">ge</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.Core.html#GenEnv"><span class="hs-identifier hs-type">GenEnv</span></a></span><span> </span><span class="annot"><span class="annottext">KeySpace era
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ScriptSpace era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679795025"><span class="annot"><span class="annottext">c :: Constants
</span><a href="#local-6989586621679795025"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.Constants.html#Constants"><span class="hs-identifier hs-type">Constants</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679795023"><span class="annot"><span class="annottext">Int
minGenesisUTxOouts :: Constants -&gt; Int
minGenesisUTxOouts :: Int
</span><a href="Test.Cardano.Ledger.Shelley.Generator.Constants.html#minGenesisUTxOouts"><span class="hs-identifier hs-var hs-var">minGenesisUTxOouts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679795021"><span class="annot"><span class="annottext">Int
maxGenesisUTxOouts :: Constants -&gt; Int
maxGenesisUTxOouts :: Int
</span><a href="Test.Cardano.Ledger.Shelley.Generator.Constants.html#maxGenesisUTxOouts"><span class="hs-identifier hs-var hs-var">maxGenesisUTxOouts</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-327"></span><span>  </span><span id="local-6989586621679795019"><span class="annot"><span class="annottext">KeyPairs (Crypto era)
</span><a href="#local-6989586621679795019"><span class="hs-identifier hs-var">genesisKeys</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Constants -&gt; Int -&gt; Int -&gt; Gen (KeyPairs (Crypto era))
forall crypto.
Crypto crypto =&gt;
Constants -&gt; Int -&gt; Int -&gt; Gen (KeyPairs crypto)
</span><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#someKeyPairs"><span class="hs-identifier hs-var">someKeyPairs</span></a></span><span> </span><span class="annot"><span class="annottext">Constants
</span><a href="#local-6989586621679795025"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679795023"><span class="hs-identifier hs-var">minGenesisUTxOouts</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679795021"><span class="hs-identifier hs-var">maxGenesisUTxOouts</span></a></span><span>
</span><span id="line-328"></span><span>  </span><span id="local-6989586621679795018"><span class="annot"><span class="annottext">[(Script era, Script era)]
</span><a href="#local-6989586621679795018"><span class="hs-identifier hs-var">genesisScripts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Constants -&gt; Int -&gt; Int -&gt; Gen [(Script era, Script era)]
forall era.
EraGen era =&gt;
Constants -&gt; Int -&gt; Int -&gt; Gen [(Script era, Script era)]
</span><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#someScripts"><span class="hs-identifier hs-var">someScripts</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679795028"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="annottext">Constants
</span><a href="#local-6989586621679795025"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679795023"><span class="hs-identifier hs-var">minGenesisUTxOouts</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679795021"><span class="hs-identifier hs-var">maxGenesisUTxOouts</span></a></span><span>
</span><span id="line-329"></span><span>  </span><span id="local-6989586621679795016"><span class="annot"><span class="annottext">[TxOut era]
</span><a href="#local-6989586621679795016"><span class="hs-identifier hs-var">outs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-330"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenEnv era
-&gt; Gen (Value era) -&gt; [Addr (Crypto era)] -&gt; Gen [TxOut era]
forall era.
MinGenTxout era =&gt;
GenEnv era
-&gt; Gen (Value era) -&gt; [Addr (Crypto era)] -&gt; Gen [TxOut era]
</span><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#genEraTxOut"><span class="hs-identifier hs-var">genEraTxOut</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679795028"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="annottext">GenEnv era
</span><a href="#local-6989586621679795027"><span class="hs-identifier hs-var">ge</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-331"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenEnv era -&gt; Gen (Value era)
forall era. EraGen era =&gt; GenEnv era -&gt; Gen (Value era)
</span><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#genGenesisValue"><span class="hs-identifier hs-var">genGenesisValue</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679795028"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="annottext">GenEnv era
</span><a href="#local-6989586621679795027"><span class="hs-identifier hs-var">ge</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-332"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((KeyPair 'Payment (Crypto era), KeyPair 'Staking (Crypto era))
 -&gt; Addr (Crypto era))
-&gt; KeyPairs (Crypto era) -&gt; [Addr (Crypto era)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Network
-&gt; (KeyPair 'Payment (Crypto era), KeyPair 'Staking (Crypto era))
-&gt; Addr (Crypto era)
forall crypto.
Crypto crypto =&gt;
Network
-&gt; (KeyPair 'Payment crypto, KeyPair 'Staking crypto)
-&gt; Addr crypto
</span><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-var">toAddr</span></a></span><span> </span><span class="annot"><span class="annottext">Network
</span><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-var">Testnet</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">KeyPairs (Crypto era)
</span><a href="#local-6989586621679795019"><span class="hs-identifier hs-var">genesisKeys</span></a></span><span> </span><span class="annot"><span class="annottext">[Addr (Crypto era)] -&gt; [Addr (Crypto era)] -&gt; [Addr (Crypto era)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">((Script era, Script era) -&gt; Addr (Crypto era))
-&gt; [(Script era, Script era)] -&gt; [Addr (Crypto era)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Network -&gt; (Script era, Script era) -&gt; Addr (Crypto era)
</span><a href="#local-6989586621679795014"><span class="hs-identifier hs-var">scriptsToAddr'</span></a></span><span> </span><span class="annot"><span class="annottext">Network
</span><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-var">Testnet</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Script era, Script era)]
</span><a href="#local-6989586621679795018"><span class="hs-identifier hs-var">genesisScripts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-333"></span><span>  </span><span class="annot"><span class="annottext">UTxO era -&gt; Gen (UTxO era)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxId (Crypto era) -&gt; [TxOut era] -&gt; UTxO era
forall era. TxId (Crypto era) -&gt; [TxOut era] -&gt; UTxO era
</span><a href="Test.Cardano.Ledger.Shelley.Generator.Core.html#genesisCoins"><span class="hs-identifier hs-var">genesisCoins</span></a></span><span> </span><span class="annot"><span class="annottext">TxId (Crypto era)
forall crypto. HashAlgorithm (HASH crypto) =&gt; TxId crypto
</span><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#genesisId"><span class="hs-identifier hs-var">genesisId</span></a></span><span> </span><span class="annot"><span class="annottext">[TxOut era]
</span><a href="#local-6989586621679795016"><span class="hs-identifier hs-var">outs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-334"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-335"></span><span>    </span><span class="annot"><a href="#local-6989586621679795014"><span class="hs-identifier hs-type">scriptsToAddr'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Network</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Script</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795028"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Script</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795028"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Addr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795028"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-336"></span><span>    </span><span id="local-6989586621679795014"><span class="annot"><span class="annottext">scriptsToAddr' :: Network -&gt; (Script era, Script era) -&gt; Addr (Crypto era)
</span><a href="#local-6989586621679795014"><span class="hs-identifier hs-var hs-var">scriptsToAddr'</span></a></span></span><span> </span><span id="local-6989586621679795013"><span class="annot"><span class="annottext">Network
</span><a href="#local-6989586621679795013"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679795012"><span class="annot"><span class="annottext">Script era
</span><a href="#local-6989586621679795012"><span class="hs-identifier hs-var">payScript</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679795011"><span class="annot"><span class="annottext">Script era
</span><a href="#local-6989586621679795011"><span class="hs-identifier hs-var">stakeScript</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-337"></span><span>      </span><span class="annot"><span class="annottext">Network
-&gt; PaymentCredential (Crypto era)
-&gt; StakeReference (Crypto era)
-&gt; Addr (Crypto era)
forall crypto.
Network
-&gt; PaymentCredential crypto -&gt; StakeReference crypto -&gt; Addr crypto
</span><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-var">Addr</span></a></span><span> </span><span class="annot"><span class="annottext">Network
</span><a href="#local-6989586621679795013"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Script era -&gt; PaymentCredential (Crypto era)
forall (kr :: KeyRole). Script era -&gt; Credential kr (Crypto era)
</span><a href="#local-6989586621679795010"><span class="hs-identifier hs-var">scriptToCred'</span></a></span><span> </span><span class="annot"><span class="annottext">Script era
</span><a href="#local-6989586621679795012"><span class="hs-identifier hs-var">payScript</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StakeCredential (Crypto era) -&gt; StakeReference (Crypto era)
forall crypto. StakeCredential crypto -&gt; StakeReference crypto
</span><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-var">StakeRefBase</span></a></span><span> </span><span class="annot"><span class="annottext">(StakeCredential (Crypto era) -&gt; StakeReference (Crypto era))
-&gt; StakeCredential (Crypto era) -&gt; StakeReference (Crypto era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Script era -&gt; StakeCredential (Crypto era)
forall (kr :: KeyRole). Script era -&gt; Credential kr (Crypto era)
</span><a href="#local-6989586621679795010"><span class="hs-identifier hs-var">scriptToCred'</span></a></span><span> </span><span class="annot"><span class="annottext">Script era
</span><a href="#local-6989586621679795011"><span class="hs-identifier hs-var">stakeScript</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-338"></span><span>
</span><span id="line-339"></span><span>    </span><span id="local-6989586621679795204"><span class="annot"><a href="#local-6989586621679795010"><span class="hs-identifier hs-type">scriptToCred'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Script</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795028"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795204"><span class="hs-identifier hs-type">kr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795028"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-340"></span><span>    </span><span id="local-6989586621679795010"><span class="annot"><span class="annottext">scriptToCred' :: Script era -&gt; Credential kr (Crypto era)
</span><a href="#local-6989586621679795010"><span class="hs-identifier hs-var hs-var">scriptToCred'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScriptHash (Crypto era) -&gt; Credential kr (Crypto era)
forall (kr :: KeyRole) crypto.
ScriptHash crypto -&gt; Credential kr crypto
</span><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-var">ScriptHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">(ScriptHash (Crypto era) -&gt; Credential kr (Crypto era))
-&gt; (Script era -&gt; ScriptHash (Crypto era))
-&gt; Script era
-&gt; Credential kr (Crypto era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ValidateScript era =&gt; Script era -&gt; ScriptHash (Crypto era)
forall era.
ValidateScript era =&gt;
Script era -&gt; ScriptHash (Crypto era)
</span><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-var">hashScript</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679795028"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-341"></span><span>
</span><span id="line-342"></span><span class="hs-comment">-- | We share this dummy TxId as genesis transaction id across eras</span><span>
</span><span id="line-343"></span><span id="local-6989586621679795211"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#genesisId"><span class="hs-identifier hs-type">genesisId</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-344"></span><span>  </span><span class="annot"><a href="../../../../cardano-crypto-class/html/src"><span class="hs-identifier hs-type">Hash.HashAlgorithm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">CC.HASH</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795211"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-345"></span><span>  </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">TxId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795211"><span class="hs-identifier hs-type">crypto</span></a></span></span><span>
</span><span id="line-346"></span><span id="genesisId"><span class="annot"><span class="annottext">genesisId :: TxId crypto
</span><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#genesisId"><span class="hs-identifier hs-var hs-var">genesisId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SafeHash crypto EraIndependentTxBody -&gt; TxId crypto
forall crypto. SafeHash crypto EraIndependentTxBody -&gt; TxId crypto
</span><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-var">TxId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Hash (HASH crypto) EraIndependentTxBody
-&gt; SafeHash crypto EraIndependentTxBody
forall crypto index.
Hash (HASH crypto) index -&gt; SafeHash crypto index
</span><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-var">unsafeMakeSafeHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Hash (HASH crypto) EraIndependentTxBody
forall h a. HashAlgorithm h =&gt; Int -&gt; Hash h a
</span><a href="#local-6989586621679795007"><span class="hs-identifier hs-var">mkDummyHash</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-347"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-348"></span><span>    </span><span class="annot"><a href="#local-6989586621679795007"><span class="hs-identifier hs-type">mkDummyHash</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679795184"><span class="annot"><a href="#local-6989586621679795184"><span class="hs-identifier hs-type">h</span></a></span></span><span> </span><span id="local-6989586621679795183"><span class="annot"><a href="#local-6989586621679795183"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../../../../cardano-crypto-class/html/src"><span class="hs-identifier hs-type">Hash.HashAlgorithm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795184"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-crypto-class/html/src"><span class="hs-identifier hs-type">Hash.Hash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795184"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795183"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-349"></span><span>    </span><span id="local-6989586621679795007"><span class="annot"><span class="annottext">mkDummyHash :: Int -&gt; Hash h a
</span><a href="#local-6989586621679795007"><span class="hs-identifier hs-var hs-var">mkDummyHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Hash h Int -&gt; Hash h a
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">coerce</span></a></span><span> </span><span class="annot"><span class="annottext">(Hash h Int -&gt; Hash h a) -&gt; (Int -&gt; Hash h Int) -&gt; Int -&gt; Hash h a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Encoding) -&gt; Int -&gt; Hash h Int
forall h a. HashAlgorithm h =&gt; (a -&gt; Encoding) -&gt; a -&gt; Hash h a
</span><a href="../../../../cardano-crypto-class/html/src"><span class="hs-identifier hs-var">Hash.hashWithSerialiser</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679795184"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span>
</span><span id="line-350"></span><span>
</span><span id="line-351"></span><span class="hs-comment">-- ==========================================================</span><span>
</span><span id="line-352"></span><span>
</span><span id="line-353"></span><span class="hs-comment">-- | Select between _lower_ and _upper_ scripts from the possible combinations</span><span>
</span><span id="line-354"></span><span class="hs-comment">-- of the first `numBaseScripts` multi-sig scripts of `mSigScripts` (i.e compound scripts) AND</span><span>
</span><span id="line-355"></span><span class="hs-comment">-- some simple scripts (NOT compound. ie either signature or Plutus scripts).</span><span>
</span><span id="line-356"></span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#someScripts"><span class="hs-identifier hs-type">someScripts</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-357"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679795230"><span class="annot"><a href="#local-6989586621679795230"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-358"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#EraGen"><span class="hs-identifier hs-type">EraGen</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795230"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-359"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.Constants.html#Constants"><span class="hs-identifier hs-type">Constants</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-360"></span><span>  </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-361"></span><span>  </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-362"></span><span>  </span><span class="annot"><a href="../../../../QuickCheck/html/src"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Script</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795230"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Script</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795230"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-363"></span><span id="someScripts"><span class="annot"><span class="annottext">someScripts :: Constants -&gt; Int -&gt; Int -&gt; Gen [(Script era, Script era)]
</span><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#someScripts"><span class="hs-identifier hs-var hs-var">someScripts</span></a></span></span><span> </span><span id="local-6989586621679795005"><span class="annot"><span class="annottext">Constants
</span><a href="#local-6989586621679795005"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621679795004"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679795004"><span class="hs-identifier hs-var">lower</span></a></span></span><span> </span><span id="local-6989586621679795003"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679795003"><span class="hs-identifier hs-var">upper</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [(Script era, Script era)] -&gt; [(Script era, Script era)]
forall a. Int -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">take</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; [(Script era, Script era)] -&gt; [(Script era, Script era)])
-&gt; Gen Int
-&gt; Gen ([(Script era, Script era)] -&gt; [(Script era, Script era)])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(Int, Int) -&gt; Gen Int
forall a. Random a =&gt; (a, a) -&gt; Gen a
</span><a href="../../../../QuickCheck/html/src"><span class="hs-identifier hs-var">choose</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679795004"><span class="hs-identifier hs-var">lower</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679795003"><span class="hs-identifier hs-var">upper</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Gen ([(Script era, Script era)] -&gt; [(Script era, Script era)])
-&gt; Gen [(Script era, Script era)] -&gt; Gen [(Script era, Script era)]
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[(Script era, Script era)] -&gt; Gen [(Script era, Script era)]
forall a. [a] -&gt; Gen [a]
</span><a href="../../../../QuickCheck/html/src"><span class="hs-identifier hs-var">shuffle</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Constants -&gt; [(Script era, Script era)]
forall era. EraGen era =&gt; Constants -&gt; [(Script era, Script era)]
</span><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#allScripts"><span class="hs-identifier hs-var">allScripts</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679795230"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="annottext">Constants
</span><a href="#local-6989586621679795005"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-364"></span><span>
</span><span id="line-365"></span><span class="hs-comment">-- | A list of all possible kinds of scripts in the current Era.</span><span>
</span><span id="line-366"></span><span class="hs-comment">--   Might include Keylocked scripts, Start-Finish Timelock scripts, Quantified scripts (All, Any, MofN), Plutus Scripts</span><span>
</span><span id="line-367"></span><span class="hs-comment">--   Note that 'genEraTwoPhase3Arg' and 'genEraTwoPhase2Arg' may be the empty list ([]) in some Eras.</span><span>
</span><span id="line-368"></span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#allScripts"><span class="hs-identifier hs-type">allScripts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679795172"><span class="annot"><a href="#local-6989586621679795172"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#EraGen"><span class="hs-identifier hs-type">EraGen</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795172"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.Constants.html#Constants"><span class="hs-identifier hs-type">Constants</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Script</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795172"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Script</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795172"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-369"></span><span id="allScripts"><span class="annot"><span class="annottext">allScripts :: Constants -&gt; [(Script era, Script era)]
</span><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#allScripts"><span class="hs-identifier hs-var hs-var">allScripts</span></a></span></span><span> </span><span id="local-6989586621679795002"><span class="annot"><span class="annottext">Constants
</span><a href="#local-6989586621679795002"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-370"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TwoPhase3ArgInfo era]
-&gt; [TwoPhase2ArgInfo era]
-&gt; [(Script era, Script era)]
-&gt; [(Script era, Script era)]
</span><a href="#local-6989586621679795001"><span class="hs-identifier hs-var">plutusPairs</span></a></span><span> </span><span class="annot"><span class="annottext">[TwoPhase3ArgInfo era]
forall era. EraGen era =&gt; [TwoPhase3ArgInfo era]
</span><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#genEraTwoPhase3Arg"><span class="hs-identifier hs-var">genEraTwoPhase3Arg</span></a></span><span> </span><span class="annot"><span class="annottext">[TwoPhase2ArgInfo era]
forall era. EraGen era =&gt; [TwoPhase2ArgInfo era]
</span><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#genEraTwoPhase2Arg"><span class="hs-identifier hs-var">genEraTwoPhase2Arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [(Script era, Script era)] -&gt; [(Script era, Script era)]
forall a. Int -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">take</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span> </span><span class="annot"><span class="annottext">[(Script era, Script era)]
</span><a href="#local-6989586621679795000"><span class="hs-identifier hs-var">simple</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-371"></span><span>    </span><span class="annot"><span class="annottext">[(Script era, Script era)]
-&gt; [(Script era, Script era)] -&gt; [(Script era, Script era)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [(Script era, Script era)] -&gt; [(Script era, Script era)]
forall a. Int -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">take</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Constants -&gt; Int
</span><a href="Test.Cardano.Ledger.Shelley.Generator.Constants.html#numSimpleScripts"><span class="hs-identifier hs-var hs-var">numSimpleScripts</span></a></span><span> </span><span class="annot"><span class="annottext">Constants
</span><a href="#local-6989586621679795002"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Script era, Script era)]
</span><a href="#local-6989586621679795000"><span class="hs-identifier hs-var">simple</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- 10 means about 5% of allScripts are Plutus Scripts</span><span>
</span><span id="line-372"></span><span>    </span><span class="hs-comment">-- Plutus scripts in some Eras ([] in other Eras)</span><span>
</span><span id="line-373"></span><span>    </span><span class="hs-comment">-- [(payment,staking)] where the either payment or staking may be a plutus script</span><span>
</span><span id="line-374"></span><span>    </span><span class="annot"><span class="annottext">[(Script era, Script era)]
-&gt; [(Script era, Script era)] -&gt; [(Script era, Script era)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-375"></span><span>    </span><span class="hs-comment">-- Simple scripts (key locked, Start-Finish timelocks)</span><span>
</span><span id="line-376"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Constants -&gt; [(Script era, Script era)]
forall era.
ScriptClass era =&gt;
Constants -&gt; [(Script era, Script era)]
</span><a href="Test.Cardano.Ledger.Shelley.Generator.ScriptClass.html#combinedScripts"><span class="hs-identifier hs-var">combinedScripts</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679795172"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="annottext">Constants
</span><a href="#local-6989586621679795002"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-377"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-378"></span><span>    </span><span class="hs-comment">-- Quantifed scripts (All, Any, MofN)</span><span>
</span><span id="line-379"></span><span>
</span><span id="line-380"></span><span>    </span><span id="local-6989586621679795000"><span class="annot"><span class="annottext">simple :: [(Script era, Script era)]
</span><a href="#local-6989586621679795000"><span class="hs-identifier hs-var hs-var">simple</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Constants -&gt; [(Script era, Script era)]
forall era.
ScriptClass era =&gt;
Constants -&gt; [(Script era, Script era)]
</span><a href="Test.Cardano.Ledger.Shelley.Generator.ScriptClass.html#baseScripts"><span class="hs-identifier hs-var">baseScripts</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679795172"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="annottext">Constants
</span><a href="#local-6989586621679795002"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-381"></span><span>    </span><span class="annot"><a href="#local-6989586621679795001"><span class="hs-identifier hs-type">plutusPairs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.Core.html#TwoPhase3ArgInfo"><span class="hs-identifier hs-type">TwoPhase3ArgInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795172"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.Core.html#TwoPhase2ArgInfo"><span class="hs-identifier hs-type">TwoPhase2ArgInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795172"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Script</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795172"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Script</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795172"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Script</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795172"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Script</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795172"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-382"></span><span>    </span><span id="local-6989586621679795001"><span class="annot"><span class="annottext">plutusPairs :: [TwoPhase3ArgInfo era]
-&gt; [TwoPhase2ArgInfo era]
-&gt; [(Script era, Script era)]
-&gt; [(Script era, Script era)]
</span><a href="#local-6989586621679795001"><span class="hs-identifier hs-var hs-var">plutusPairs</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[TwoPhase2ArgInfo era]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[(Script era, Script era)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-383"></span><span>    </span><span class="annot"><a href="#local-6989586621679795001"><span class="hs-identifier hs-var">plutusPairs</span></a></span><span> </span><span class="annot"><span class="annottext">[TwoPhase3ArgInfo era]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[(Script era, Script era)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-384"></span><span>    </span><span class="annot"><a href="#local-6989586621679795001"><span class="hs-identifier hs-var">plutusPairs</span></a></span><span> </span><span class="annot"><span class="annottext">[TwoPhase3ArgInfo era]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[TwoPhase2ArgInfo era]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-385"></span><span>    </span><span class="annot"><a href="#local-6989586621679795001"><span class="hs-identifier hs-var">plutusPairs</span></a></span><span> </span><span id="local-6989586621679794998"><span class="annot"><span class="annottext">[TwoPhase3ArgInfo era]
</span><a href="#local-6989586621679794998"><span class="hs-identifier hs-var">args3</span></a></span></span><span> </span><span id="local-6989586621679794997"><span class="annot"><span class="annottext">[TwoPhase2ArgInfo era]
</span><a href="#local-6989586621679794997"><span class="hs-identifier hs-var">args2</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621679794996"><span class="annot"><span class="annottext">Script era
</span><a href="#local-6989586621679794996"><span class="hs-identifier hs-var">pay</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679794995"><span class="annot"><span class="annottext">Script era
</span><a href="#local-6989586621679794995"><span class="hs-identifier hs-var">stake</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">:</span></a></span><span> </span><span id="local-6989586621679794994"><span class="annot"><span class="annottext">[(Script era, Script era)]
</span><a href="#local-6989586621679794994"><span class="hs-identifier hs-var">more</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Script era, Script era)
</span><a href="#local-6989586621679794993"><span class="hs-identifier hs-var">pair</span></a></span><span> </span><span class="annot"><span class="annottext">(Script era, Script era)
-&gt; [(Script era, Script era)] -&gt; [(Script era, Script era)]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[TwoPhase3ArgInfo era]
-&gt; [TwoPhase2ArgInfo era]
-&gt; [(Script era, Script era)]
-&gt; [(Script era, Script era)]
</span><a href="#local-6989586621679795001"><span class="hs-identifier hs-var">plutusPairs</span></a></span><span> </span><span class="annot"><span class="annottext">[TwoPhase3ArgInfo era]
</span><a href="#local-6989586621679794998"><span class="hs-identifier hs-var">args3</span></a></span><span> </span><span class="annot"><span class="annottext">[TwoPhase2ArgInfo era]
</span><a href="#local-6989586621679794997"><span class="hs-identifier hs-var">args2</span></a></span><span> </span><span class="annot"><span class="annottext">[(Script era, Script era)]
</span><a href="#local-6989586621679794994"><span class="hs-identifier hs-var">more</span></a></span><span>
</span><span id="line-386"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-387"></span><span>        </span><span id="local-6989586621679794992"><span class="annot"><span class="annottext">count3 :: Int
</span><a href="#local-6989586621679794992"><span class="hs-identifier hs-var hs-var">count3</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TwoPhase3ArgInfo era] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[TwoPhase3ArgInfo era]
</span><a href="#local-6989586621679794998"><span class="hs-identifier hs-var">args3</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-388"></span><span>        </span><span id="local-6989586621679794990"><span class="annot"><span class="annottext">count2 :: Int
</span><a href="#local-6989586621679794990"><span class="hs-identifier hs-var hs-var">count2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TwoPhase2ArgInfo era] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[TwoPhase2ArgInfo era]
</span><a href="#local-6989586621679794997"><span class="hs-identifier hs-var">args2</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-389"></span><span>        </span><span id="local-6989586621679794989"><span class="annot"><span class="annottext">n :: Int
</span><a href="#local-6989586621679794989"><span class="hs-identifier hs-var hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Script era -&gt; Int
forall x. ToCBOR x =&gt; Int -&gt; Int -&gt; x -&gt; Int
</span><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#randomByHash"><span class="hs-identifier hs-var">randomByHash</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679794992"><span class="hs-identifier hs-var">count3</span></a></span><span> </span><span class="annot"><span class="annottext">Script era
</span><a href="#local-6989586621679794995"><span class="hs-identifier hs-var">stake</span></a></span><span>
</span><span id="line-390"></span><span>        </span><span id="local-6989586621679794988"><span class="annot"><span class="annottext">m :: Int
</span><a href="#local-6989586621679794988"><span class="hs-identifier hs-var hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Script era -&gt; Int
forall x. ToCBOR x =&gt; Int -&gt; Int -&gt; x -&gt; Int
</span><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#randomByHash"><span class="hs-identifier hs-var">randomByHash</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679794990"><span class="hs-identifier hs-var">count2</span></a></span><span> </span><span class="annot"><span class="annottext">Script era
</span><a href="#local-6989586621679794996"><span class="hs-identifier hs-var">pay</span></a></span><span>
</span><span id="line-391"></span><span>        </span><span id="local-6989586621679794987"><span class="annot"><span class="annottext">mode :: Int
</span><a href="#local-6989586621679794987"><span class="hs-identifier hs-var hs-var">mode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Script era -&gt; Int
forall x. ToCBOR x =&gt; Int -&gt; Int -&gt; x -&gt; Int
</span><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#randomByHash"><span class="hs-identifier hs-var">randomByHash</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span> </span><span class="annot"><span class="annottext">Script era
</span><a href="#local-6989586621679794996"><span class="hs-identifier hs-var">pay</span></a></span><span>
</span><span id="line-392"></span><span>        </span><span id="local-6989586621679794993"><span class="annot"><span class="annottext">pair :: (Script era, Script era)
</span><a href="#local-6989586621679794993"><span class="hs-identifier hs-var hs-var">pair</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679794987"><span class="hs-identifier hs-var">mode</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-393"></span><span>          </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TwoPhase3ArgInfo era -&gt; Script era
forall era. TwoPhase3ArgInfo era -&gt; Script era
</span><a href="Test.Cardano.Ledger.Shelley.Generator.Core.html#getScript3"><span class="hs-identifier hs-var hs-var">getScript3</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TwoPhase3ArgInfo era]
</span><a href="#local-6989586621679794998"><span class="hs-identifier hs-var">args3</span></a></span><span> </span><span class="annot"><span class="annottext">[TwoPhase3ArgInfo era] -&gt; Int -&gt; TwoPhase3ArgInfo era
forall a. [a] -&gt; Int -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">!!</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679794989"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Script era
</span><a href="#local-6989586621679794995"><span class="hs-identifier hs-var">stake</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-394"></span><span>          </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Script era
</span><a href="#local-6989586621679794996"><span class="hs-identifier hs-var">pay</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TwoPhase2ArgInfo era -&gt; Script era
forall era. TwoPhase2ArgInfo era -&gt; Script era
</span><a href="Test.Cardano.Ledger.Shelley.Generator.Core.html#getScript2"><span class="hs-identifier hs-var hs-var">getScript2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TwoPhase2ArgInfo era]
</span><a href="#local-6989586621679794997"><span class="hs-identifier hs-var">args2</span></a></span><span> </span><span class="annot"><span class="annottext">[TwoPhase2ArgInfo era] -&gt; Int -&gt; TwoPhase2ArgInfo era
forall a. [a] -&gt; Int -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">!!</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679794988"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-395"></span><span>          </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TwoPhase3ArgInfo era -&gt; Script era
forall era. TwoPhase3ArgInfo era -&gt; Script era
</span><a href="Test.Cardano.Ledger.Shelley.Generator.Core.html#getScript3"><span class="hs-identifier hs-var hs-var">getScript3</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TwoPhase3ArgInfo era]
</span><a href="#local-6989586621679794998"><span class="hs-identifier hs-var">args3</span></a></span><span> </span><span class="annot"><span class="annottext">[TwoPhase3ArgInfo era] -&gt; Int -&gt; TwoPhase3ArgInfo era
forall a. [a] -&gt; Int -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">!!</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679794989"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TwoPhase2ArgInfo era -&gt; Script era
forall era. TwoPhase2ArgInfo era -&gt; Script era
</span><a href="Test.Cardano.Ledger.Shelley.Generator.Core.html#getScript2"><span class="hs-identifier hs-var hs-var">getScript2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TwoPhase2ArgInfo era]
</span><a href="#local-6989586621679794997"><span class="hs-identifier hs-var">args2</span></a></span><span> </span><span class="annot"><span class="annottext">[TwoPhase2ArgInfo era] -&gt; Int -&gt; TwoPhase2ArgInfo era
forall a. [a] -&gt; Int -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">!!</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679794988"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-396"></span><span>          </span><span id="local-6989586621679794983"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679794983"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; (Script era, Script era)
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;mod function returns value out of bounds: &quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679794983"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-397"></span><span>
</span><span id="line-398"></span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#randomByHash"><span class="hs-identifier hs-type">randomByHash</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679795165"><span class="annot"><a href="#local-6989586621679795165"><span class="hs-identifier hs-type">x</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679795165"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679795165"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-399"></span><span id="randomByHash"><span class="annot"><span class="annottext">randomByHash :: Int -&gt; Int -&gt; x -&gt; Int
</span><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#randomByHash"><span class="hs-identifier hs-var hs-var">randomByHash</span></a></span></span><span> </span><span id="local-6989586621679794980"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679794980"><span class="hs-identifier hs-var">low</span></a></span></span><span> </span><span id="local-6989586621679794979"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679794979"><span class="hs-identifier hs-var">high</span></a></span></span><span> </span><span id="local-6989586621679794978"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679794978"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679794980"><span class="hs-identifier hs-var">low</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679794976"><span class="hs-identifier hs-var">remainder</span></a></span><span>
</span><span id="line-400"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-401"></span><span>    </span><span id="local-6989586621679794975"><span class="annot"><span class="annottext">n :: Int
</span><a href="#local-6989586621679794975"><span class="hs-identifier hs-var hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Int
forall a. Hashable a =&gt; a -&gt; Int
</span><a href="../../../../hashable/html/src"><span class="hs-identifier hs-var">hash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Encoding -&gt; ByteString
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">serializeEncoding'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">x -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679794978"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-402"></span><span>    </span><span class="hs-comment">-- We don't really care about the hash, we only</span><span>
</span><span id="line-403"></span><span>    </span><span class="hs-comment">-- use it to pseudo-randomly pick a number bewteen low and high</span><span>
</span><span id="line-404"></span><span>    </span><span id="local-6989586621679794973"><span class="annot"><span class="annottext">m :: Int
</span><a href="#local-6989586621679794973"><span class="hs-identifier hs-var hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679794979"><span class="hs-identifier hs-var">high</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679794980"><span class="hs-identifier hs-var">low</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-405"></span><span>    </span><span id="local-6989586621679794976"><span class="annot"><span class="annottext">remainder :: Int
</span><a href="#local-6989586621679794976"><span class="hs-identifier hs-var hs-var">remainder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679794975"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679794973"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-comment">-- mode==0 is a time leaf,  mode 1 or 2 is a signature leaf</span><span>
</span><span id="line-406"></span><span>
</span><span id="line-407"></span><span class="hs-comment">-- =========================================================</span><span>
</span><span id="line-408"></span><span>
</span><span id="line-409"></span><span class="hs-keyword">data</span><span> </span><span id="Label"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#Label"><span class="hs-identifier hs-var">Label</span></a></span></span><span> </span><span id="local-6989586621679794971"><span class="annot"><a href="#local-6989586621679794971"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-410"></span><span>  </span><span id="local-6989586621679794970"><span id="Body%27"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#Body%27"><span class="hs-identifier hs-var">Body'</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#Label"><span class="hs-identifier hs-type">Label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679794970"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-411"></span><span>  </span><span id="local-6989586621679794968"><span id="Wits%27"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#Wits%27"><span class="hs-identifier hs-var">Wits'</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#Label"><span class="hs-identifier hs-type">Label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-ledger-core/html/src"><span class="hs-identifier hs-type">Core.Witnesses</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679794968"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-412"></span><span>
</span><span id="line-413"></span><span class="hs-keyword">class</span><span> </span><span id="Sets"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#Sets"><span class="hs-identifier hs-var">Sets</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679794966"><span class="annot"><a href="#local-6989586621679794966"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#Label"><span class="hs-identifier hs-type">Label</span></a></span><span> </span><span id="local-6989586621679794965"><span class="annot"><a href="#local-6989586621679794965"><span class="hs-identifier hs-type hs-type">t</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679794964"><span class="annot"><a href="#local-6989586621679794964"><span class="hs-identifier hs-type">y</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-414"></span><span>  </span><span id="set"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#set"><span class="hs-identifier hs-type">set</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.Generator.EraGen.html#Label"><span class="hs-identifier hs-type">Label</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679794965"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679794964"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679794964"><span class="hs-identifier hs-type">y</span></a></span><span>
</span><span id="line-415"></span></pre></body></html>