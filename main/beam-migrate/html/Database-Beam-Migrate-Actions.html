<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Database.Beam.Migrate.Actions</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">beam-migrate-0.5.2.0: SQL DDL support and migrations support library for Beam</span><ul class="links" id="page-menu"><li><a href="src/Database.Beam.Migrate.Actions.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Database.Beam.Migrate.Actions</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Database state</a></li><li><a href="#g:2">Action generation</a></li><li><a href="#g:3">Solver</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Data types and functions to discover sequences of DDL commands to go from
 one database state to another. Used for migration generation.</p><p>For our purposes, a database state is fully specified by the set of
 predicates that apply to that database.</p><p>Migration generation is approached as a graph search problem over the
 infinite graph of databases <em>G</em>. The nodes of <em>G</em> are database states, which
 (as said above) are simply sets of predicates (see <code><a href="Database-Beam-Migrate-Actions.html#t:DatabaseState" title="Database.Beam.Migrate.Actions">DatabaseState</a></code> for the
 realization of this concept in code). For two vertices <em>S1</em> and <em>S2</em> in <em>G</em>,
 there is an edge between the two if and only if there is a DDL command that
 can take a database at <em>S1</em> to <em>S2</em>.</p><p>We generate migrations by exploring this graph, starting at the source state
 and ending at the destination state. By default we use an optimizing solver
 that weights each edge by the complexity of the particular command, and we
 attempt to find the shortest path using Dijkstra's algorithm, although a user
 may override this behavior and provide a custom edge selection mechanism (or
 even defer this choice to the user).</p><p>In order to conduct the breadth-first search, we must know which edges lead
 out of whichever vertex we're currently visiting. The solving algorithm thus
 takes a set of <code><a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a></code>s, which are means of discovering edges that
 are incident to the current database state.</p><p>Conceptually, an <code><a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a></code> is a function of type <code><a href="Database-Beam-Migrate-Actions.html#t:ActionProviderFn" title="Database.Beam.Migrate.Actions">ActionProviderFn</a></code>,
 which takes the current database state and produces a list of edges in the
 form of <code><a href="Database-Beam-Migrate-Actions.html#t:PotentialAction" title="Database.Beam.Migrate.Actions">PotentialAction</a></code> objects. For optimization purposes,
 <code><a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a></code>s also take in the desired destination state, which it can
 use to select only edges that make sense. This does not affect the result,
 just the amount of time it may take to get there.</p><p>Note that because the graph of database states is infinite, a breadth-first
 search may easily end up continuing to explore when there is no chance of
 reaching our goal. This would result in non-termination and is highly
 undesirable. In order to prevent this, we limit ourselves to only exploring
 edges that take us <em>closer</em> to the destination state. Here, we measure
 distance between two states as the number of elements in the symmetric
 difference of two database states. Thus, every action we take must either
 remove a predicate that doesn't exist in the destination state, or add a
 predicate that does. If a potential action only adds predicates that do not
 exist in the final state or removes predicates that do not exist in the
 first, then we never explore that edge.</p><h2>A note on speed</h2><p>There are some issues with this approach. Namely, if there is no solution, we
 can end up exploring the entire action space, which may be quite a lot. While
 <code>beam-migrate</code> can solve all databases that can be made up of predicates in
 this module, other beam backends may not make such strict guarantees
 (although in practice, all do). Nevertheless, if you're hacking on this
 module and notice what seems like an infinite loop, you may have accidentally
 removed code that exposed the edge that leads to a solution to the migration.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:DatabaseStateSource">DatabaseStateSource</a><ul class="subs"><li>= <a href="#v:DatabaseStateSourceOriginal">DatabaseStateSourceOriginal</a></li><li>| <a href="#v:DatabaseStateSourceDerived">DatabaseStateSourceDerived</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:DatabaseState">DatabaseState</a> be = <a href="#v:DatabaseState">DatabaseState</a> {<ul class="subs"><li><a href="#v:dbStateCurrentState">dbStateCurrentState</a> :: !(<a href="../../unordered-containers/html/Data-HashMap-Strict.html#t:HashMap" title="Data.HashMap.Strict">HashMap</a> <a href="Database-Beam-Migrate-Types.html#t:SomeDatabasePredicate" title="Database.Beam.Migrate.Types">SomeDatabasePredicate</a> <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a>)</li><li><a href="#v:dbStateKey">dbStateKey</a> :: !(<a href="../../unordered-containers/html/Data-HashSet.html#t:HashSet" title="Data.HashSet">HashSet</a> <a href="Database-Beam-Migrate-Types.html#t:SomeDatabasePredicate" title="Database.Beam.Migrate.Types">SomeDatabasePredicate</a>)</li><li><a href="#v:dbStateCmdSequence">dbStateCmdSequence</a> :: !(<a href="../../containers/html/Data-Sequence.html#t:Seq" title="Data.Sequence">Seq</a> (<a href="Database-Beam-Migrate-Types.html#t:MigrationCommand" title="Database.Beam.Migrate.Types">MigrationCommand</a> be))</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:PotentialAction">PotentialAction</a> be = <a href="#v:PotentialAction">PotentialAction</a> {<ul class="subs"><li><a href="#v:actionPreConditions">actionPreConditions</a> :: !(<a href="../../unordered-containers/html/Data-HashSet.html#t:HashSet" title="Data.HashSet">HashSet</a> <a href="Database-Beam-Migrate-Types.html#t:SomeDatabasePredicate" title="Database.Beam.Migrate.Types">SomeDatabasePredicate</a>)</li><li><a href="#v:actionPostConditions">actionPostConditions</a> :: !(<a href="../../unordered-containers/html/Data-HashSet.html#t:HashSet" title="Data.HashSet">HashSet</a> <a href="Database-Beam-Migrate-Types.html#t:SomeDatabasePredicate" title="Database.Beam.Migrate.Types">SomeDatabasePredicate</a>)</li><li><a href="#v:actionCommands">actionCommands</a> :: !(<a href="../../containers/html/Data-Sequence.html#t:Seq" title="Data.Sequence">Seq</a> (<a href="Database-Beam-Migrate-Types.html#t:MigrationCommand" title="Database.Beam.Migrate.Types">MigrationCommand</a> be))</li><li><a href="#v:actionEnglish">actionEnglish</a> :: !<a href="../../text/html/Data-Text.html#t:Text" title="Data.Text">Text</a></li><li><a href="#v:actionScore">actionScore</a> :: !<a href="../../ghc/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a></li></ul>}</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:ActionProvider">ActionProvider</a> be = <a href="#v:ActionProvider">ActionProvider</a> {<ul class="subs"><li><a href="#v:getPotentialActions">getPotentialActions</a> :: <a href="Database-Beam-Migrate-Actions.html#t:ActionProviderFn" title="Database.Beam.Migrate.Actions">ActionProviderFn</a> be</li></ul>}</li><li class="src short"><span class="keyword">type</span> <a href="#t:ActionProviderFn">ActionProviderFn</a> be = (<span class="keyword">forall</span> preCondition. <a href="../../ghc/html/libraries/base-4.14.3.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> preCondition =&gt; [preCondition]) -&gt; (<span class="keyword">forall</span> postCondition. <a href="../../ghc/html/libraries/base-4.14.3.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> postCondition =&gt; [postCondition]) -&gt; [<a href="Database-Beam-Migrate-Actions.html#t:PotentialAction" title="Database.Beam.Migrate.Actions">PotentialAction</a> be]</li><li class="src short"><a href="#v:ensuringNot_">ensuringNot_</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/Control-Applicative.html#t:Alternative" title="Control.Applicative">Alternative</a> m =&gt; [a] -&gt; m ()</li><li class="src short"><a href="#v:justOne_">justOne_</a> :: [a] -&gt; [a]</li><li class="src short"><a href="#v:createTableActionProvider">createTableActionProvider</a> :: <span class="keyword">forall</span> be. (<a href="../../ghc/html/libraries/base-4.14.3.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> be, <a href="Database-Beam-Migrate-SQL.html#t:BeamMigrateOnlySqlBackend" title="Database.Beam.Migrate.SQL">BeamMigrateOnlySqlBackend</a> be) =&gt; <a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a> be</li><li class="src short"><a href="#v:dropTableActionProvider">dropTableActionProvider</a> :: <span class="keyword">forall</span> be. <a href="Database-Beam-Migrate-SQL.html#t:BeamMigrateOnlySqlBackend" title="Database.Beam.Migrate.SQL">BeamMigrateOnlySqlBackend</a> be =&gt; <a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a> be</li><li class="src short"><a href="#v:addColumnProvider">addColumnProvider</a> :: <span class="keyword">forall</span> be. (<a href="../../ghc/html/libraries/base-4.14.3.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> be, <a href="Database-Beam-Migrate-SQL.html#t:BeamMigrateOnlySqlBackend" title="Database.Beam.Migrate.SQL">BeamMigrateOnlySqlBackend</a> be) =&gt; <a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a> be</li><li class="src short"><a href="#v:addColumnNullProvider">addColumnNullProvider</a> :: <span class="keyword">forall</span> be. (<a href="../../ghc/html/libraries/base-4.14.3.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> be, <a href="Database-Beam-Migrate-SQL.html#t:BeamMigrateOnlySqlBackend" title="Database.Beam.Migrate.SQL">BeamMigrateOnlySqlBackend</a> be) =&gt; <a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a> be</li><li class="src short"><a href="#v:dropColumnNullProvider">dropColumnNullProvider</a> :: <span class="keyword">forall</span> be. (<a href="../../ghc/html/libraries/base-4.14.3.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> be, <a href="Database-Beam-Migrate-SQL.html#t:BeamMigrateOnlySqlBackend" title="Database.Beam.Migrate.SQL">BeamMigrateOnlySqlBackend</a> be) =&gt; <a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a> be</li><li class="src short"><a href="#v:defaultActionProvider">defaultActionProvider</a> :: (<a href="../../ghc/html/libraries/base-4.14.3.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> be, <a href="Database-Beam-Migrate-SQL.html#t:BeamMigrateOnlySqlBackend" title="Database.Beam.Migrate.SQL">BeamMigrateOnlySqlBackend</a> be) =&gt; <a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a> be</li><li class="src short"><span class="keyword">data</span> <a href="#t:Solver">Solver</a> cmd <span class="keyword">where</span><ul class="subs"><li><a href="#v:ProvideSolution">ProvideSolution</a> :: [<a href="Database-Beam-Migrate-Types.html#t:MigrationCommand" title="Database.Beam.Migrate.Types">MigrationCommand</a> cmd] -&gt; <a href="Database-Beam-Migrate-Actions.html#t:Solver" title="Database.Beam.Migrate.Actions">Solver</a> cmd</li><li><a href="#v:SearchFailed">SearchFailed</a> :: [<a href="Database-Beam-Migrate-Actions.html#t:DatabaseState" title="Database.Beam.Migrate.Actions">DatabaseState</a> cmd] -&gt; <a href="Database-Beam-Migrate-Actions.html#t:Solver" title="Database.Beam.Migrate.Actions">Solver</a> cmd</li><li><a href="#v:ChooseActions">ChooseActions</a> :: {..} -&gt; <a href="Database-Beam-Migrate-Actions.html#t:Solver" title="Database.Beam.Migrate.Actions">Solver</a> cmd</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:FinalSolution">FinalSolution</a> be<ul class="subs"><li>= <a href="#v:Solved">Solved</a> [<a href="Database-Beam-Migrate-Types.html#t:MigrationCommand" title="Database.Beam.Migrate.Types">MigrationCommand</a> be]</li><li>| <a href="#v:Candidates">Candidates</a> [<a href="Database-Beam-Migrate-Actions.html#t:DatabaseState" title="Database.Beam.Migrate.Actions">DatabaseState</a> be]</li></ul></li><li class="src short"><a href="#v:finalSolution">finalSolution</a> :: <a href="Database-Beam-Migrate-Actions.html#t:Solver" title="Database.Beam.Migrate.Actions">Solver</a> be -&gt; <a href="Database-Beam-Migrate-Actions.html#t:FinalSolution" title="Database.Beam.Migrate.Actions">FinalSolution</a> be</li><li class="src short"><a href="#v:heuristicSolver">heuristicSolver</a> :: <a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a> be -&gt; [<a href="Database-Beam-Migrate-Types.html#t:SomeDatabasePredicate" title="Database.Beam.Migrate.Types">SomeDatabasePredicate</a>] -&gt; [<a href="Database-Beam-Migrate-Types.html#t:SomeDatabasePredicate" title="Database.Beam.Migrate.Types">SomeDatabasePredicate</a>] -&gt; <a href="Database-Beam-Migrate-Actions.html#t:Solver" title="Database.Beam.Migrate.Actions">Solver</a> be</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Database state</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DatabaseStateSource" class="def">DatabaseStateSource</a> <a href="src/Database.Beam.Migrate.Actions.html#DatabaseStateSource" class="link">Source</a> <a href="#t:DatabaseStateSource" class="selflink">#</a></p><div class="doc"><p>Used to indicate whether a particular predicate is from the initial
 database state, or due to a sequence of actions we've committed too. Used to
 prevent runaway action generation based off of derived states.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DatabaseStateSourceOriginal" class="def">DatabaseStateSourceOriginal</a></td><td class="doc"><p>Predicate is from the original set given by the user</p></td></tr><tr><td class="src"><a id="v:DatabaseStateSourceDerived" class="def">DatabaseStateSourceDerived</a></td><td class="doc"><p>Predicate is from an action we've committed to in this action chain</p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:DatabaseStateSource">Instances</h4><details id="i:DatabaseStateSource" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DatabaseStateSource:Bounded:1"></span> <a href="../../ghc/html/libraries/base-4.14.3.0/Prelude.html#t:Bounded" title="Prelude">Bounded</a> <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a></span> <a href="src/Database.Beam.Migrate.Actions.html#line-125" class="link">Source</a> <a href="#t:DatabaseStateSource" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:DatabaseStateSource:Bounded:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Database-Beam-Migrate-Actions.html">Database.Beam.Migrate.Actions</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:minBound">minBound</a> :: <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:minBound" class="selflink">#</a></p><p class="src"><a href="#v:maxBound">maxBound</a> :: <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:maxBound" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DatabaseStateSource:Enum:2"></span> <a href="../../ghc/html/libraries/base-4.14.3.0/Prelude.html#t:Enum" title="Prelude">Enum</a> <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a></span> <a href="src/Database.Beam.Migrate.Actions.html#line-125" class="link">Source</a> <a href="#t:DatabaseStateSource" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:DatabaseStateSource:Enum:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Database-Beam-Migrate-Actions.html">Database.Beam.Migrate.Actions</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:succ">succ</a> :: <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> -&gt; <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:succ" class="selflink">#</a></p><p class="src"><a href="#v:pred">pred</a> :: <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> -&gt; <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:pred" class="selflink">#</a></p><p class="src"><a href="#v:toEnum">toEnum</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:toEnum" class="selflink">#</a></p><p class="src"><a href="#v:fromEnum">fromEnum</a> :: <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:fromEnum" class="selflink">#</a></p><p class="src"><a href="#v:enumFrom">enumFrom</a> :: <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> -&gt; [<a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a>] <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:enumFrom" class="selflink">#</a></p><p class="src"><a href="#v:enumFromThen">enumFromThen</a> :: <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> -&gt; <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> -&gt; [<a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a>] <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:enumFromThen" class="selflink">#</a></p><p class="src"><a href="#v:enumFromTo">enumFromTo</a> :: <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> -&gt; <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> -&gt; [<a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a>] <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:enumFromTo" class="selflink">#</a></p><p class="src"><a href="#v:enumFromThenTo">enumFromThenTo</a> :: <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> -&gt; <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> -&gt; <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> -&gt; [<a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a>] <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:enumFromThenTo" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DatabaseStateSource:Eq:3"></span> <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a></span> <a href="src/Database.Beam.Migrate.Actions.html#line-125" class="link">Source</a> <a href="#t:DatabaseStateSource" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:DatabaseStateSource:Eq:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Database-Beam-Migrate-Actions.html">Database.Beam.Migrate.Actions</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> -&gt; <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="../../ghc/html/libraries/ghc-prim-0.6.1/src" class="link">Source</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> -&gt; <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="../../ghc/html/libraries/ghc-prim-0.6.1/src" class="link">Source</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DatabaseStateSource:Ord:4"></span> <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a></span> <a href="src/Database.Beam.Migrate.Actions.html#line-125" class="link">Source</a> <a href="#t:DatabaseStateSource" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:DatabaseStateSource:Ord:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Database-Beam-Migrate-Actions.html">Database.Beam.Migrate.Actions</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:compare">compare</a> :: <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> -&gt; <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Ord.html#t:Ordering" title="Data.Ord">Ordering</a> <a href="../../ghc/html/libraries/ghc-prim-0.6.1/src" class="link">Source</a> <a href="#v:compare" class="selflink">#</a></p><p class="src"><a href="#v:-60-">(&lt;)</a> :: <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> -&gt; <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="../../ghc/html/libraries/ghc-prim-0.6.1/src" class="link">Source</a> <a href="#v:-60-" class="selflink">#</a></p><p class="src"><a href="#v:-60--61-">(&lt;=)</a> :: <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> -&gt; <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="../../ghc/html/libraries/ghc-prim-0.6.1/src" class="link">Source</a> <a href="#v:-60--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62-">(&gt;)</a> :: <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> -&gt; <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="../../ghc/html/libraries/ghc-prim-0.6.1/src" class="link">Source</a> <a href="#v:-62-" class="selflink">#</a></p><p class="src"><a href="#v:-62--61-">(&gt;=)</a> :: <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> -&gt; <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="../../ghc/html/libraries/ghc-prim-0.6.1/src" class="link">Source</a> <a href="#v:-62--61-" class="selflink">#</a></p><p class="src"><a href="#v:max">max</a> :: <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> -&gt; <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> -&gt; <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> <a href="../../ghc/html/libraries/ghc-prim-0.6.1/src" class="link">Source</a> <a href="#v:max" class="selflink">#</a></p><p class="src"><a href="#v:min">min</a> :: <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> -&gt; <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> -&gt; <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> <a href="../../ghc/html/libraries/ghc-prim-0.6.1/src" class="link">Source</a> <a href="#v:min" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DatabaseStateSource:Show:5"></span> <a href="../../ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a></span> <a href="src/Database.Beam.Migrate.Actions.html#line-125" class="link">Source</a> <a href="#t:DatabaseStateSource" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:DatabaseStateSource:Show:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Database-Beam-Migrate-Actions.html">Database.Beam.Migrate.Actions</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a>] -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DatabaseStateSource:Generic:6"></span> <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t:Generic" title="GHC.Generics">Generic</a> <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a></span> <a href="src/Database.Beam.Migrate.Actions.html#line-125" class="link">Source</a> <a href="#t:DatabaseStateSource" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:DatabaseStateSource:Generic:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Database-Beam-Migrate-Actions.html">Database.Beam.Migrate.Actions</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#t:Rep" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:from">from</a> :: <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> x <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:from" class="selflink">#</a></p><p class="src"><a href="#v:to">to</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> x -&gt; <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:to" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DatabaseStateSource:NFData:7"></span> <a href="../../ghc/html/libraries/deepseq-1.4.4.0/Control-DeepSeq.html#t:NFData" title="Control.DeepSeq">NFData</a> <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a></span> <a href="src/Database.Beam.Migrate.Actions.html#line-126" class="link">Source</a> <a href="#t:DatabaseStateSource" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:DatabaseStateSource:NFData:7"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Database-Beam-Migrate-Actions.html">Database.Beam.Migrate.Actions</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:rnf">rnf</a> :: <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> -&gt; () <a href="../../ghc/html/libraries/deepseq-1.4.4.0/src" class="link">Source</a> <a href="#v:rnf" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DatabaseStateSource:Rep:8"></span> <span class="keyword">type</span> <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a></span> <a href="src/Database.Beam.Migrate.Actions.html#line-125" class="link">Source</a> <a href="#t:DatabaseStateSource" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:DatabaseStateSource:Rep:8"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Database-Beam-Migrate-Actions.html">Database.Beam.Migrate.Actions</a></p> <div class="src"><span class="keyword">type</span> <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a> = <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t:D1" title="GHC.Generics">D1</a> ('<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:MetaData" title="GHC.Generics">MetaData</a> &quot;DatabaseStateSource&quot; &quot;Database.Beam.Migrate.Actions&quot; &quot;beam-migrate-0.5.2.0-JlGNcDhpNiiF3Bcro6WdcQ&quot; '<a href="../../ghc/html/libraries/base-4.14.3.0/Data-Bool.html#v:False" title="Data.Bool">False</a>) (<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t:C1" title="GHC.Generics">C1</a> ('<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:MetaCons" title="GHC.Generics">MetaCons</a> &quot;DatabaseStateSourceOriginal&quot; '<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:PrefixI" title="GHC.Generics">PrefixI</a> '<a href="../../ghc/html/libraries/base-4.14.3.0/Data-Bool.html#v:False" title="Data.Bool">False</a>) (<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t:U1" title="GHC.Generics">U1</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t::-43-:" title="GHC.Generics">:+:</a> <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t:C1" title="GHC.Generics">C1</a> ('<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:MetaCons" title="GHC.Generics">MetaCons</a> &quot;DatabaseStateSourceDerived&quot; '<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:PrefixI" title="GHC.Generics">PrefixI</a> '<a href="../../ghc/html/libraries/base-4.14.3.0/Data-Bool.html#v:False" title="Data.Bool">False</a>) (<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t:U1" title="GHC.Generics">U1</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>))</div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DatabaseState" class="def">DatabaseState</a> be <a href="src/Database.Beam.Migrate.Actions.html#DatabaseState" class="link">Source</a> <a href="#t:DatabaseState" class="selflink">#</a></p><div class="doc"><p>Represents the state of a database as a migration is being generated</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DatabaseState" class="def">DatabaseState</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:dbStateCurrentState" class="def">dbStateCurrentState</a> :: !(<a href="../../unordered-containers/html/Data-HashMap-Strict.html#t:HashMap" title="Data.HashMap.Strict">HashMap</a> <a href="Database-Beam-Migrate-Types.html#t:SomeDatabasePredicate" title="Database.Beam.Migrate.Types">SomeDatabasePredicate</a> <a href="Database-Beam-Migrate-Actions.html#t:DatabaseStateSource" title="Database.Beam.Migrate.Actions">DatabaseStateSource</a>)</dfn><div class="doc"><p>The current set of predicates that apply to this database as well as
 their source (user or from previous actions)</p></div></li><li><dfn class="src"><a id="v:dbStateKey" class="def">dbStateKey</a> :: !(<a href="../../unordered-containers/html/Data-HashSet.html#t:HashSet" title="Data.HashSet">HashSet</a> <a href="Database-Beam-Migrate-Types.html#t:SomeDatabasePredicate" title="Database.Beam.Migrate.Types">SomeDatabasePredicate</a>)</dfn><div class="doc"><p>HS.fromMap of <code><a href="Database-Beam-Migrate-Actions.html#v:dbStateCurrentState" title="Database.Beam.Migrate.Actions">dbStateCurrentState</a></code>, for maximal sharing</p></div></li><li><dfn class="src"><a id="v:dbStateCmdSequence" class="def">dbStateCmdSequence</a> :: !(<a href="../../containers/html/Data-Sequence.html#t:Seq" title="Data.Sequence">Seq</a> (<a href="Database-Beam-Migrate-Types.html#t:MigrationCommand" title="Database.Beam.Migrate.Types">MigrationCommand</a> be))</dfn><div class="doc"><p>The current sequence of commands we've committed to in this state</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:DatabaseState">Instances</h4><details id="i:DatabaseState" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DatabaseState:Show:1"></span> <a href="../../ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="../../beam-core/html/Database-Beam-Backend-SQL.html#t:BeamSqlBackendSyntax" title="Database.Beam.Backend.SQL">BeamSqlBackendSyntax</a> be) =&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Database-Beam-Migrate-Actions.html#t:DatabaseState" title="Database.Beam.Migrate.Actions">DatabaseState</a> be)</span> <a href="src/Database.Beam.Migrate.Actions.html#line-139" class="link">Source</a> <a href="#t:DatabaseState" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:DatabaseState:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Database-Beam-Migrate-Actions.html">Database.Beam.Migrate.Actions</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Database-Beam-Migrate-Actions.html#t:DatabaseState" title="Database.Beam.Migrate.Actions">DatabaseState</a> be -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Database-Beam-Migrate-Actions.html#t:DatabaseState" title="Database.Beam.Migrate.Actions">DatabaseState</a> be -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Database-Beam-Migrate-Actions.html#t:DatabaseState" title="Database.Beam.Migrate.Actions">DatabaseState</a> be] -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DatabaseState:NFData:2"></span> <a href="../../ghc/html/libraries/deepseq-1.4.4.0/Control-DeepSeq.html#t:NFData" title="Control.DeepSeq">NFData</a> (<a href="Database-Beam-Migrate-Actions.html#t:DatabaseState" title="Database.Beam.Migrate.Actions">DatabaseState</a> cmd)</span> <a href="src/Database.Beam.Migrate.Actions.html#line-141" class="link">Source</a> <a href="#t:DatabaseState" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:DatabaseState:NFData:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Database-Beam-Migrate-Actions.html">Database.Beam.Migrate.Actions</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:rnf">rnf</a> :: <a href="Database-Beam-Migrate-Actions.html#t:DatabaseState" title="Database.Beam.Migrate.Actions">DatabaseState</a> cmd -&gt; () <a href="../../ghc/html/libraries/deepseq-1.4.4.0/src" class="link">Source</a> <a href="#v:rnf" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:2" id="g:2"><h1>Action generation</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:PotentialAction" class="def">PotentialAction</a> be <a href="src/Database.Beam.Migrate.Actions.html#PotentialAction" class="link">Source</a> <a href="#t:PotentialAction" class="selflink">#</a></p><div class="doc"><p>Represents an edge (or a path) in the database graph.</p><p>Given a particular starting point, the destination database is the database
 where each predicate in <code><a href="Database-Beam-Migrate-Actions.html#v:actionPreConditions" title="Database.Beam.Migrate.Actions">actionPreConditions</a></code> has been removed and each
 predicate in <code><a href="Database-Beam-Migrate-Actions.html#v:actionPostConditions" title="Database.Beam.Migrate.Actions">actionPostConditions</a></code> has been added.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:PotentialAction" class="def">PotentialAction</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:actionPreConditions" class="def">actionPreConditions</a> :: !(<a href="../../unordered-containers/html/Data-HashSet.html#t:HashSet" title="Data.HashSet">HashSet</a> <a href="Database-Beam-Migrate-Types.html#t:SomeDatabasePredicate" title="Database.Beam.Migrate.Types">SomeDatabasePredicate</a>)</dfn><div class="doc"><p>Preconditions that will no longer apply</p></div></li><li><dfn class="src"><a id="v:actionPostConditions" class="def">actionPostConditions</a> :: !(<a href="../../unordered-containers/html/Data-HashSet.html#t:HashSet" title="Data.HashSet">HashSet</a> <a href="Database-Beam-Migrate-Types.html#t:SomeDatabasePredicate" title="Database.Beam.Migrate.Types">SomeDatabasePredicate</a>)</dfn><div class="doc"><p>Conditions that will apply after we're done</p></div></li><li><dfn class="src"><a id="v:actionCommands" class="def">actionCommands</a> :: !(<a href="../../containers/html/Data-Sequence.html#t:Seq" title="Data.Sequence">Seq</a> (<a href="Database-Beam-Migrate-Types.html#t:MigrationCommand" title="Database.Beam.Migrate.Types">MigrationCommand</a> be))</dfn><div class="doc"><p>The sequence of commands that accomplish this movement in the database
 graph. For an edge, <code><a href="Database-Beam-Migrate-Actions.html#v:actionCommands" title="Database.Beam.Migrate.Actions">actionCommands</a></code> contains one command; for a path, it
 will contain more.</p></div></li><li><dfn class="src"><a id="v:actionEnglish" class="def">actionEnglish</a> :: !<a href="../../text/html/Data-Text.html#t:Text" title="Data.Text">Text</a></dfn><div class="doc"><p>An english description of the movement</p></div></li><li><dfn class="src"><a id="v:actionScore" class="def">actionScore</a> :: !<a href="../../ghc/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a></dfn><div class="doc"><p>A heuristic notion of complexity or weight; used to find the &quot;easiest&quot;
 path through the graph.</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:PotentialAction">Instances</h4><details id="i:PotentialAction" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:PotentialAction:Semigroup:1"></span> <a href="../../ghc/html/libraries/base-4.14.3.0/Prelude.html#t:Semigroup" title="Prelude">Semigroup</a> (<a href="Database-Beam-Migrate-Actions.html#t:PotentialAction" title="Database.Beam.Migrate.Actions">PotentialAction</a> be)</span> <a href="src/Database.Beam.Migrate.Actions.html#line-196" class="link">Source</a> <a href="#t:PotentialAction" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:PotentialAction:Semigroup:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Database-Beam-Migrate-Actions.html">Database.Beam.Migrate.Actions</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> :: <a href="Database-Beam-Migrate-Actions.html#t:PotentialAction" title="Database.Beam.Migrate.Actions">PotentialAction</a> be -&gt; <a href="Database-Beam-Migrate-Actions.html#t:PotentialAction" title="Database.Beam.Migrate.Actions">PotentialAction</a> be -&gt; <a href="Database-Beam-Migrate-Actions.html#t:PotentialAction" title="Database.Beam.Migrate.Actions">PotentialAction</a> be <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:-60--62-" class="selflink">#</a></p><p class="src"><a href="#v:sconcat">sconcat</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> (<a href="Database-Beam-Migrate-Actions.html#t:PotentialAction" title="Database.Beam.Migrate.Actions">PotentialAction</a> be) -&gt; <a href="Database-Beam-Migrate-Actions.html#t:PotentialAction" title="Database.Beam.Migrate.Actions">PotentialAction</a> be <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:sconcat" class="selflink">#</a></p><p class="src"><a href="#v:stimes">stimes</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/Prelude.html#t:Integral" title="Prelude">Integral</a> b =&gt; b -&gt; <a href="Database-Beam-Migrate-Actions.html#t:PotentialAction" title="Database.Beam.Migrate.Actions">PotentialAction</a> be -&gt; <a href="Database-Beam-Migrate-Actions.html#t:PotentialAction" title="Database.Beam.Migrate.Actions">PotentialAction</a> be <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:stimes" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:PotentialAction:Monoid:2"></span> <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> (<a href="Database-Beam-Migrate-Actions.html#t:PotentialAction" title="Database.Beam.Migrate.Actions">PotentialAction</a> be)</span> <a href="src/Database.Beam.Migrate.Actions.html#line-203" class="link">Source</a> <a href="#t:PotentialAction" class="selflink">#</a></td><td class="doc"><p><code><a href="Database-Beam-Migrate-Actions.html#t:PotentialAction" title="Database.Beam.Migrate.Actions">PotentialAction</a></code>s can represent edges or paths. Monadically combining two
 <code><a href="Database-Beam-Migrate-Actions.html#t:PotentialAction" title="Database.Beam.Migrate.Actions">PotentialAction</a></code>s results in the path between the source of the first and
 the destination of the second. <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-Monoid.html#v:mempty" title="Data.Monoid">mempty</a></code> here returns the action that does
 nothing (i.e., the edge going back to the same database state)</p></td></tr><tr><td colspan="2"><details id="i:id:PotentialAction:Monoid:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Database-Beam-Migrate-Actions.html">Database.Beam.Migrate.Actions</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mempty">mempty</a> :: <a href="Database-Beam-Migrate-Actions.html#t:PotentialAction" title="Database.Beam.Migrate.Actions">PotentialAction</a> be <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:mempty" class="selflink">#</a></p><p class="src"><a href="#v:mappend">mappend</a> :: <a href="Database-Beam-Migrate-Actions.html#t:PotentialAction" title="Database.Beam.Migrate.Actions">PotentialAction</a> be -&gt; <a href="Database-Beam-Migrate-Actions.html#t:PotentialAction" title="Database.Beam.Migrate.Actions">PotentialAction</a> be -&gt; <a href="Database-Beam-Migrate-Actions.html#t:PotentialAction" title="Database.Beam.Migrate.Actions">PotentialAction</a> be <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:mappend" class="selflink">#</a></p><p class="src"><a href="#v:mconcat">mconcat</a> :: [<a href="Database-Beam-Migrate-Actions.html#t:PotentialAction" title="Database.Beam.Migrate.Actions">PotentialAction</a> be] -&gt; <a href="Database-Beam-Migrate-Actions.html#t:PotentialAction" title="Database.Beam.Migrate.Actions">PotentialAction</a> be <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:mconcat" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:ActionProvider" class="def">ActionProvider</a> be <a href="src/Database.Beam.Migrate.Actions.html#ActionProvider" class="link">Source</a> <a href="#t:ActionProvider" class="selflink">#</a></p><div class="doc"><p>Edge discovery mechanism. A newtype wrapper over <code><a href="Database-Beam-Migrate-Actions.html#t:ActionProviderFn" title="Database.Beam.Migrate.Actions">ActionProviderFn</a></code>.</p><p>An <code><a href="Database-Beam-Migrate-Actions.html#t:ActionProviderFn" title="Database.Beam.Migrate.Actions">ActionProviderFn</a></code> takes two arguments. The first is the set of predicates
 that exist in the current database.</p><p>The function should a set of edges from the database specified in the first
 argument to possible destination databases. For optimization purposes, the
 second argument is the set of predicates that ought to exist in the
 destination database. This can be used to eliminate edges that will not lead
 to a solution.</p><p>This second argument is just an optimization and doesn't change the final
 result, although it can significantly impact the time it takes to get there.</p><p>Both the current database set and the destination database set are given as
 polymorphic lists of predicates. When you instantiate the type, the current
 database predicate set is queried for predicates of that type.</p><p>For example, <code><a href="Database-Beam-Migrate-Actions.html#v:dropTableActionProvider" title="Database.Beam.Migrate.Actions">dropTableActionProvider</a></code> provides a <code>DROP TABLE</code> action edge
 whenever it encounters a table that exists. In order to do this, it attempts
 to find all <code><a href="Database-Beam-Migrate-Checks.html#t:TableExistsPredicate" title="Database.Beam.Migrate.Checks">TableExistsPredicate</a></code> that do not exist in the destination
 database. Its <code><a href="Database-Beam-Migrate-Actions.html#t:ActionProviderFn" title="Database.Beam.Migrate.Actions">ActionProviderFn</a></code> may be implemented like such:</p><pre>dropTableActionProvider preConditions postConditions = do
    TableExistsPredicate srcTblNm &lt;- preConditions
    ensuringNot_ $ $
      do TableExistsPredicate destTblNm &lt;- postConditions
         guard (srcTblNm == destTblNm)</pre><p><code><a href="Database-Beam-Migrate-Actions.html#v:ensuringNot_" title="Database.Beam.Migrate.Actions">ensuringNot_</a></code> is a function that causes the action provider to return no
 results if there are any elements in the provided list. In this case, it's
 used to stop <code>DROP TABLE</code> action generation for tables which must be present
 in the final database.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ActionProvider" class="def">ActionProvider</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:getPotentialActions" class="def">getPotentialActions</a> :: <a href="Database-Beam-Migrate-Actions.html#t:ActionProviderFn" title="Database.Beam.Migrate.Actions">ActionProviderFn</a> be</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:ActionProvider">Instances</h4><details id="i:ActionProvider" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ActionProvider:Semigroup:1"></span> <a href="../../ghc/html/libraries/base-4.14.3.0/Prelude.html#t:Semigroup" title="Prelude">Semigroup</a> (<a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a> be)</span> <a href="src/Database.Beam.Migrate.Actions.html#line-256" class="link">Source</a> <a href="#t:ActionProvider" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ActionProvider:Semigroup:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Database-Beam-Migrate-Actions.html">Database.Beam.Migrate.Actions</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> :: <a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a> be -&gt; <a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a> be -&gt; <a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a> be <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:-60--62-" class="selflink">#</a></p><p class="src"><a href="#v:sconcat">sconcat</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> (<a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a> be) -&gt; <a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a> be <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:sconcat" class="selflink">#</a></p><p class="src"><a href="#v:stimes">stimes</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/Prelude.html#t:Integral" title="Prelude">Integral</a> b =&gt; b -&gt; <a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a> be -&gt; <a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a> be <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:stimes" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ActionProvider:Monoid:2"></span> <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> (<a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a> be)</span> <a href="src/Database.Beam.Migrate.Actions.html#line-259" class="link">Source</a> <a href="#t:ActionProvider" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ActionProvider:Monoid:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Database-Beam-Migrate-Actions.html">Database.Beam.Migrate.Actions</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mempty">mempty</a> :: <a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a> be <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:mempty" class="selflink">#</a></p><p class="src"><a href="#v:mappend">mappend</a> :: <a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a> be -&gt; <a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a> be -&gt; <a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a> be <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:mappend" class="selflink">#</a></p><p class="src"><a href="#v:mconcat">mconcat</a> :: [<a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a> be] -&gt; <a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a> be <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:mconcat" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:ActionProviderFn" class="def">ActionProviderFn</a> be = (<span class="keyword">forall</span> preCondition. <a href="../../ghc/html/libraries/base-4.14.3.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> preCondition =&gt; [preCondition]) -&gt; (<span class="keyword">forall</span> postCondition. <a href="../../ghc/html/libraries/base-4.14.3.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> postCondition =&gt; [postCondition]) -&gt; [<a href="Database-Beam-Migrate-Actions.html#t:PotentialAction" title="Database.Beam.Migrate.Actions">PotentialAction</a> be] <a href="src/Database.Beam.Migrate.Actions.html#ActionProviderFn" class="link">Source</a> <a href="#t:ActionProviderFn" class="selflink">#</a></p><div class="doc"><p>See <code><a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a></code></p></div></div><div class="top"><p class="src"><a id="v:ensuringNot_" class="def">ensuringNot_</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/Control-Applicative.html#t:Alternative" title="Control.Applicative">Alternative</a> m =&gt; [a] -&gt; m () <a href="src/Database.Beam.Migrate.Actions.html#ensuringNot_" class="link">Source</a> <a href="#v:ensuringNot_" class="selflink">#</a></p><div class="doc"><p>Proceeds only if no predicate matches the given pattern. See the
 implementation of <code><a href="Database-Beam-Migrate-Actions.html#v:dropTableActionProvider" title="Database.Beam.Migrate.Actions">dropTableActionProvider</a></code> for an example of usage.</p></div></div><div class="top"><p class="src"><a id="v:justOne_" class="def">justOne_</a> :: [a] -&gt; [a] <a href="src/Database.Beam.Migrate.Actions.html#justOne_" class="link">Source</a> <a href="#v:justOne_" class="selflink">#</a></p><div class="doc"><p>Used to ensure that only one predicate matches the given pattern. See the
 implementation of <code><a href="Database-Beam-Migrate-Actions.html#v:createTableActionProvider" title="Database.Beam.Migrate.Actions">createTableActionProvider</a></code> for an example of usage.</p></div></div><div class="top"><p class="src"><a id="v:createTableActionProvider" class="def">createTableActionProvider</a> :: <span class="keyword">forall</span> be. (<a href="../../ghc/html/libraries/base-4.14.3.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> be, <a href="Database-Beam-Migrate-SQL.html#t:BeamMigrateOnlySqlBackend" title="Database.Beam.Migrate.SQL">BeamMigrateOnlySqlBackend</a> be) =&gt; <a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a> be <a href="src/Database.Beam.Migrate.Actions.html#createTableActionProvider" class="link">Source</a> <a href="#v:createTableActionProvider" class="selflink">#</a></p><div class="doc"><p>Action provider for SQL92 <code>CREATE TABLE</code> actions.</p></div></div><div class="top"><p class="src"><a id="v:dropTableActionProvider" class="def">dropTableActionProvider</a> :: <span class="keyword">forall</span> be. <a href="Database-Beam-Migrate-SQL.html#t:BeamMigrateOnlySqlBackend" title="Database.Beam.Migrate.SQL">BeamMigrateOnlySqlBackend</a> be =&gt; <a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a> be <a href="src/Database.Beam.Migrate.Actions.html#dropTableActionProvider" class="link">Source</a> <a href="#v:dropTableActionProvider" class="selflink">#</a></p><div class="doc"><p>Action provider for SQL92 <code>DROP TABLE</code> actions</p></div></div><div class="top"><p class="src"><a id="v:addColumnProvider" class="def">addColumnProvider</a> :: <span class="keyword">forall</span> be. (<a href="../../ghc/html/libraries/base-4.14.3.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> be, <a href="Database-Beam-Migrate-SQL.html#t:BeamMigrateOnlySqlBackend" title="Database.Beam.Migrate.SQL">BeamMigrateOnlySqlBackend</a> be) =&gt; <a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a> be <a href="src/Database.Beam.Migrate.Actions.html#addColumnProvider" class="link">Source</a> <a href="#v:addColumnProvider" class="selflink">#</a></p><div class="doc"><p>Action provider for SQL92 <code>ALTER TABLE ... ADD COLUMN ...</code> actions</p></div></div><div class="top"><p class="src"><a id="v:addColumnNullProvider" class="def">addColumnNullProvider</a> :: <span class="keyword">forall</span> be. (<a href="../../ghc/html/libraries/base-4.14.3.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> be, <a href="Database-Beam-Migrate-SQL.html#t:BeamMigrateOnlySqlBackend" title="Database.Beam.Migrate.SQL">BeamMigrateOnlySqlBackend</a> be) =&gt; <a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a> be <a href="src/Database.Beam.Migrate.Actions.html#addColumnNullProvider" class="link">Source</a> <a href="#v:addColumnNullProvider" class="selflink">#</a></p><div class="doc"><p>Action provider for SQL92 <code>ALTER TABLE ... ALTER COLUMN ... SET NULL</code></p></div></div><div class="top"><p class="src"><a id="v:dropColumnNullProvider" class="def">dropColumnNullProvider</a> :: <span class="keyword">forall</span> be. (<a href="../../ghc/html/libraries/base-4.14.3.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> be, <a href="Database-Beam-Migrate-SQL.html#t:BeamMigrateOnlySqlBackend" title="Database.Beam.Migrate.SQL">BeamMigrateOnlySqlBackend</a> be) =&gt; <a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a> be <a href="src/Database.Beam.Migrate.Actions.html#dropColumnNullProvider" class="link">Source</a> <a href="#v:dropColumnNullProvider" class="selflink">#</a></p><div class="doc"><p>Action provider for SQL92 <code>ALTER TABLE ... ALTER COLUMN ... SET  NOT NULL</code></p></div></div><div class="top"><p class="src"><a id="v:defaultActionProvider" class="def">defaultActionProvider</a> :: (<a href="../../ghc/html/libraries/base-4.14.3.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> be, <a href="Database-Beam-Migrate-SQL.html#t:BeamMigrateOnlySqlBackend" title="Database.Beam.Migrate.SQL">BeamMigrateOnlySqlBackend</a> be) =&gt; <a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a> be <a href="src/Database.Beam.Migrate.Actions.html#defaultActionProvider" class="link">Source</a> <a href="#v:defaultActionProvider" class="selflink">#</a></p><div class="doc"><p>Default action providers for any SQL92 compliant syntax.</p><p>In particular, this provides edges consisting of the following statements:</p><ul><li>CREATE TABLE</li><li>DROP TABLE</li><li>ALTER TABLE ... ADD COLUMN ...</li><li>ALTER TABLE ... DROP COLUMN ...</li><li>ALTER TABLE ... ALTER COLUMN ... SET [NOT] NULL</li></ul></div></div><a href="#g:3" id="g:3"><h1>Solver</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Solver" class="def">Solver</a> cmd <span class="keyword">where</span> <a href="src/Database.Beam.Migrate.Actions.html#Solver" class="link">Source</a> <a href="#t:Solver" class="selflink">#</a></p><div class="doc"><p>Represents current state of a database graph search.</p><p>If <code><a href="Database-Beam-Migrate-Actions.html#v:ProvideSolution" title="Database.Beam.Migrate.Actions">ProvideSolution</a></code>, the destination database has been reached, and the
 given list of commands provides the path from the source database to the
 destination.</p><p>If <code><a href="Database-Beam-Migrate-Actions.html#v:SearchFailed" title="Database.Beam.Migrate.Actions">SearchFailed</a></code>, the search has failed. The provided <code><a href="Database-Beam-Migrate-Actions.html#t:DatabaseState" title="Database.Beam.Migrate.Actions">DatabaseState</a></code>s
 represent the closest we could make it to the destination database. By
 default, only the best 10 are kept around (to avoid unbounded memory growth).</p><p>If <code><a href="Database-Beam-Migrate-Actions.html#v:ChooseActions" title="Database.Beam.Migrate.Actions">ChooseActions</a></code>, we are still searching. The caller is provided with the
 current state as well as a list of actions, provided as an opaque type <code>f</code>.
 The <code><a href="Database-Beam-Migrate-Actions.html#v:getPotentialActionChoice" title="Database.Beam.Migrate.Actions">getPotentialActionChoice</a></code> function can be used to get the
 <code><a href="Database-Beam-Migrate-Actions.html#t:PotentialAction" title="Database.Beam.Migrate.Actions">PotentialAction</a></code> corresponding to any given <code>f</code>. The caller is free to cull
 the set of potential actions according however they'd like (for example, by
 prompting the user). The selected actions to explore should be passed to the
 <code><a href="Database-Beam-Migrate-Actions.html#v:continueSearch" title="Database.Beam.Migrate.Actions">continueSearch</a></code> function.</p><p>Use of the <code>f</code> existential type may seem obtuse, but it prevents the caller
 from injecting arbitrary actions. Instead the caller is limited to choosing
 only valid actions as provided by the suppled <code><a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a></code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ProvideSolution" class="def">ProvideSolution</a> :: [<a href="Database-Beam-Migrate-Types.html#t:MigrationCommand" title="Database.Beam.Migrate.Types">MigrationCommand</a> cmd] -&gt; <a href="Database-Beam-Migrate-Actions.html#t:Solver" title="Database.Beam.Migrate.Actions">Solver</a> cmd</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:SearchFailed" class="def">SearchFailed</a> :: [<a href="Database-Beam-Migrate-Actions.html#t:DatabaseState" title="Database.Beam.Migrate.Actions">DatabaseState</a> cmd] -&gt; <a href="Database-Beam-Migrate-Actions.html#t:Solver" title="Database.Beam.Migrate.Actions">Solver</a> cmd</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:ChooseActions" class="def">ChooseActions</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src">:: { <a id="v:choosingActionsAtState" class="def">choosingActionsAtState</a> :: !(<a href="Database-Beam-Migrate-Actions.html#t:DatabaseState" title="Database.Beam.Migrate.Actions">DatabaseState</a> cmd)</dfn><div class="doc"><p>The current node we're searching at</p></div></li><li><dfn class="src">&nbsp;&nbsp;&nbsp;, <a id="v:getPotentialActionChoice" class="def">getPotentialActionChoice</a> :: f -&gt; <a href="Database-Beam-Migrate-Actions.html#t:PotentialAction" title="Database.Beam.Migrate.Actions">PotentialAction</a> cmd</dfn><div class="doc"><p>Convert the opaque <code>f</code> type to a <code><a href="Database-Beam-Migrate-Actions.html#t:PotentialAction" title="Database.Beam.Migrate.Actions">PotentialAction</a></code>.
 This can be used to present the actions to the user or
 to inspect the action to make a more informed choice
 on exploration strategies.</p></div></li><li><dfn class="src">&nbsp;&nbsp;&nbsp;, <a id="v:potentialActionChoices" class="def">potentialActionChoices</a> :: [f]</dfn><div class="doc"><p>The possible actions that we can take, presented as
 an opaque list. Use the <code><a href="Database-Beam-Migrate-Actions.html#v:getPotentialActionChoice" title="Database.Beam.Migrate.Actions">getPotentialActionChoice</a></code>
 function to get the corresponding <code><a href="Database-Beam-Migrate-Actions.html#t:PotentialAction" title="Database.Beam.Migrate.Actions">PotentialAction</a></code>.</p></div></li><li><dfn class="src">&nbsp;&nbsp;&nbsp;, <a id="v:continueSearch" class="def">continueSearch</a> :: [f] -&gt; <a href="Database-Beam-Migrate-Actions.html#t:Solver" title="Database.Beam.Migrate.Actions">Solver</a> cmd</dfn><div class="doc"><p>Continue the search and get the next <code><a href="Database-Beam-Migrate-Actions.html#t:Solver" title="Database.Beam.Migrate.Actions">Solver</a></code></p></div></li><li><dfn class="src">&nbsp;&nbsp;&nbsp;} -&gt; <a href="Database-Beam-Migrate-Actions.html#t:Solver" title="Database.Beam.Migrate.Actions">Solver</a> cmd</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:FinalSolution" class="def">FinalSolution</a> be <a href="src/Database.Beam.Migrate.Actions.html#FinalSolution" class="link">Source</a> <a href="#t:FinalSolution" class="selflink">#</a></p><div class="doc"><p>Represents the final results of a search</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Solved" class="def">Solved</a> [<a href="Database-Beam-Migrate-Types.html#t:MigrationCommand" title="Database.Beam.Migrate.Types">MigrationCommand</a> be]</td><td class="doc"><p>The search found a path from the source to the destination database,
 and has provided a set of commands that would work</p></td></tr><tr><td class="src"><a id="v:Candidates" class="def">Candidates</a> [<a href="Database-Beam-Migrate-Actions.html#t:DatabaseState" title="Database.Beam.Migrate.Actions">DatabaseState</a> be]</td><td class="doc"><p>The search failed, but provided a set of <code>DatbaseState</code>s it encountered
 that were the closest to the destination database. By default, only 10
 candidates are provided.</p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:FinalSolution">Instances</h4><details id="i:FinalSolution" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:FinalSolution:Show:1"></span> <a href="../../ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="../../beam-core/html/Database-Beam-Backend-SQL.html#t:BeamSqlBackendSyntax" title="Database.Beam.Backend.SQL">BeamSqlBackendSyntax</a> be) =&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Database-Beam-Migrate-Actions.html#t:FinalSolution" title="Database.Beam.Migrate.Actions">FinalSolution</a> be)</span> <a href="src/Database.Beam.Migrate.Actions.html#line-541" class="link">Source</a> <a href="#t:FinalSolution" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:FinalSolution:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Database-Beam-Migrate-Actions.html">Database.Beam.Migrate.Actions</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Database-Beam-Migrate-Actions.html#t:FinalSolution" title="Database.Beam.Migrate.Actions">FinalSolution</a> be -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Database-Beam-Migrate-Actions.html#t:FinalSolution" title="Database.Beam.Migrate.Actions">FinalSolution</a> be -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Database-Beam-Migrate-Actions.html#t:FinalSolution" title="Database.Beam.Migrate.Actions">FinalSolution</a> be] -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:finalSolution" class="def">finalSolution</a> :: <a href="Database-Beam-Migrate-Actions.html#t:Solver" title="Database.Beam.Migrate.Actions">Solver</a> be -&gt; <a href="Database-Beam-Migrate-Actions.html#t:FinalSolution" title="Database.Beam.Migrate.Actions">FinalSolution</a> be <a href="src/Database.Beam.Migrate.Actions.html#finalSolution" class="link">Source</a> <a href="#v:finalSolution" class="selflink">#</a></p><div class="doc"><p>An exhaustive solving strategy that simply continues the search, while
 exploring every possible action. If there is a solution, this will find it.</p></div></div><div class="top"><p class="src"><a id="v:heuristicSolver" class="def">heuristicSolver</a> <a href="src/Database.Beam.Migrate.Actions.html#heuristicSolver" class="link">Source</a> <a href="#v:heuristicSolver" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a> be</td><td class="doc"><p>Edge discovery function</p></td></tr><tr><td class="src">-&gt; [<a href="Database-Beam-Migrate-Types.html#t:SomeDatabasePredicate" title="Database.Beam.Migrate.Types">SomeDatabasePredicate</a>]</td><td class="doc"><p>Source database state</p></td></tr><tr><td class="src">-&gt; [<a href="Database-Beam-Migrate-Types.html#t:SomeDatabasePredicate" title="Database.Beam.Migrate.Types">SomeDatabasePredicate</a>]</td><td class="doc"><p>Destination database state</p></td></tr><tr><td class="src">-&gt; <a href="Database-Beam-Migrate-Actions.html#t:Solver" title="Database.Beam.Migrate.Actions">Solver</a> be</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Conduct a breadth-first search of the database graph to find a path from
 the source database to the destination database, using the given
 <code><a href="Database-Beam-Migrate-Actions.html#t:ActionProvider" title="Database.Beam.Migrate.Actions">ActionProvider</a></code> to discovere &quot;edges&quot; (i.e., DDL commands) between the
 databases.</p><p>See the documentation on <code><a href="Database-Beam-Migrate-Actions.html#t:Solver" title="Database.Beam.Migrate.Actions">Solver</a></code> for more information on how to consume the
 result.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.2</p></div></body></html>