<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE FunctionalDependencies #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Database.Beam.Migrate.SQL.Tables</span><span>
</span><span id="line-8"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * Table manipulation</span></span><span>
</span><span id="line-9"></span><span>
</span><span id="line-10"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Creation and deletion</span></span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#createTable"><span class="hs-identifier">createTable</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#dropTable"><span class="hs-identifier">dropTable</span></a></span><span>
</span><span id="line-12"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#preserve"><span class="hs-identifier">preserve</span></a></span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** @ALTER TABLE@</span></span><span>
</span><span id="line-15"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#TableMigration"><span class="hs-identifier">TableMigration</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-16"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#ColumnMigration"><span class="hs-identifier">ColumnMigration</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-17"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#alterTable"><span class="hs-identifier">alterTable</span></a></span><span>
</span><span id="line-18"></span><span>
</span><span id="line-19"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#renameTableTo"><span class="hs-identifier">renameTableTo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#renameColumnTo"><span class="hs-identifier">renameColumnTo</span></a></span><span>
</span><span id="line-20"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#addColumn"><span class="hs-identifier">addColumn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#dropColumn"><span class="hs-identifier">dropColumn</span></a></span><span>
</span><span id="line-21"></span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Field specification</span></span><span>
</span><span id="line-23"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#DefaultValue"><span class="hs-identifier">DefaultValue</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#Constraint"><span class="hs-identifier">Constraint</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#NotNullConstraint"><span class="hs-identifier">NotNullConstraint</span></a></span><span>
</span><span id="line-24"></span><span>
</span><span id="line-25"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#field"><span class="hs-identifier">field</span></a></span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#defaultTo_"><span class="hs-identifier">defaultTo_</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#notNull"><span class="hs-identifier">notNull</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#unique"><span class="hs-identifier">unique</span></a></span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Internal classes</span></span><span>
</span><span id="line-30"></span><span>    </span><span class="hs-comment">--    Provided without documentation for use in type signatures</span><span>
</span><span id="line-31"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#FieldReturnType"><span class="hs-identifier">FieldReturnType</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#IsNotNull"><span class="hs-identifier">IsNotNull</span></a></span><span>
</span><span id="line-33"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier">Database.Beam</span></a></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier">Database.Beam.Schema.Tables</span></a></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier">Database.Beam.Backend.SQL</span></a></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier">Database.Beam.Backend.SQL.AST</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier">TableName</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier">Database.Beam.Query.Internal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier">tableNameFromEntity</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.Types.html"><span class="hs-identifier">Database.Beam.Migrate.Types</span></a></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.Checks.html"><span class="hs-identifier">Database.Beam.Migrate.Checks</span></a></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Types.html"><span class="hs-identifier">Database.Beam.Migrate.SQL.Types</span></a></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.SQL92.html"><span class="hs-identifier">Database.Beam.Migrate.SQL.SQL92</span></a></span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Applicative</span></a></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../mtl/html/src"><span class="hs-identifier">Control.Monad.Identity</span></a></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../mtl/html/src"><span class="hs-identifier">Control.Monad.Writer.Strict</span></a></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../mtl/html/src"><span class="hs-identifier">Control.Monad.State</span></a></span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier">Data.Text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier">Text</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Typeable</span></a></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Kind</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Kind</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier">Constraint</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">GHC.TypeLits</span></a></span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../microlens/html/src"><span class="hs-identifier">Lens.Micro</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../microlens/html/src"><span class="hs-operator">(^.)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span>
</span><span id="line-59"></span><span class="hs-comment">-- * Table manipulation</span><span>
</span><span id="line-60"></span><span>
</span><span id="line-61"></span><span class="hs-comment">-- | Add a @CREATE TABLE@ statement to this migration</span><span>
</span><span id="line-62"></span><span class="hs-comment">--</span><span>
</span><span id="line-63"></span><span class="hs-comment">--   The first argument is the name of the table.</span><span>
</span><span id="line-64"></span><span class="hs-comment">--</span><span>
</span><span id="line-65"></span><span class="hs-comment">--   The second argument is a table containing a 'FieldSchema' for each field.</span><span>
</span><span id="line-66"></span><span class="hs-comment">--   See documentation on the 'Field' command for more information.c</span><span>
</span><span id="line-67"></span><span id="local-6989586621679294912"><span id="local-6989586621679294913"><span id="local-6989586621679294914"><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#createTable"><span class="hs-identifier hs-type">createTable</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">Beamable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294914"><span class="hs-identifier hs-type">table</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">Table</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294914"><span class="hs-identifier hs-type">table</span></a></span><span>
</span><span id="line-68"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Types.html#BeamMigrateSqlBackend"><span class="hs-identifier hs-type">BeamMigrateSqlBackend</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294913"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span>            </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Types.html#TableSchema"><span class="hs-identifier hs-type">TableSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294913"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294914"><span class="hs-identifier hs-type">table</span></a></span><span>
</span><span id="line-70"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.Types.html#Migration"><span class="hs-identifier hs-type">Migration</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294913"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Migrate.Types.CheckedEntities.html#CheckedDatabaseEntity"><span class="hs-identifier hs-type">CheckedDatabaseEntity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294913"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294912"><span class="hs-identifier hs-type">db</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">TableEntity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294914"><span class="hs-identifier hs-type">table</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-71"></span><span id="createTable"><span class="annot"><span class="annottext">createTable :: Text
-&gt; TableSchema be table
-&gt; Migration be (CheckedDatabaseEntity be db (TableEntity table))
</span><a href="Database.Beam.Migrate.SQL.Tables.html#createTable"><span class="hs-identifier hs-var hs-var">createTable</span></a></span></span><span> </span><span id="local-6989586621679294911"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294911"><span class="hs-identifier hs-var">newTblName</span></a></span></span><span> </span><span id="local-6989586621679294910"><span class="annot"><span class="annottext">TableSchema be table
</span><a href="#local-6989586621679294910"><span class="hs-identifier hs-var">tblSettings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-72"></span><span>  </span><span class="hs-keyword">do</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679294909"><span class="annot"><span class="annottext">pkFields :: [Text]
</span><a href="#local-6989586621679294909"><span class="hs-identifier hs-var hs-var">pkFields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall a. Columnar' (TableFieldSchema be) a -&gt; Text)
-&gt; PrimaryKey table (TableFieldSchema be) -&gt; [Text]
forall (table :: (* -&gt; *) -&gt; *) (f :: * -&gt; *) b.
Beamable table =&gt;
(forall a. Columnar' f a -&gt; b) -&gt; table f -&gt; [b]
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">allBeamValues</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">Columnar'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Migrate.SQL.Types.html#TableFieldSchema"><span class="hs-identifier hs-type">TableFieldSchema</span></a></span><span> </span><span id="local-6989586621679294905"><span class="annot"><a href="#local-6989586621679294905"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294905"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TableSchema be table -&gt; PrimaryKey table (TableFieldSchema be)
forall (table :: (* -&gt; *) -&gt; *) (column :: * -&gt; *).
Table table =&gt;
table column -&gt; PrimaryKey table column
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">primaryKey</span></a></span><span> </span><span class="annot"><span class="annottext">TableSchema be table
</span><a href="#local-6989586621679294910"><span class="hs-identifier hs-var">tblSettings</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span>         </span><span id="local-6989586621679294903"><span class="annot"><span class="annottext">tblConstraints :: [Sql92CreateTableTableConstraintSyntax
   (Sql92DdlCommandCreateTableSyntax (BeamSqlBackendSyntax be))]
</span><a href="#local-6989586621679294903"><span class="hs-identifier hs-var hs-var">tblConstraints</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679294909"><span class="hs-identifier hs-var">pkFields</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[Text]
-&gt; Sql92CreateTableTableConstraintSyntax
     (Sql92DdlCommandCreateTableSyntax (BeamSqlBackendSyntax be))
forall constraint.
IsSql92TableConstraintSyntax constraint =&gt;
[Text] -&gt; constraint
</span><a href="Database.Beam.Migrate.SQL.SQL92.html#primaryKeyConstraintSyntax"><span class="hs-identifier hs-var">primaryKeyConstraintSyntax</span></a></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679294909"><span class="hs-identifier hs-var">pkFields</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-74"></span><span>         </span><span id="local-6989586621679294900"><span class="annot"><span class="annottext">createTableCommand :: Sql92DdlCommandCreateTableSyntax (BeamSqlBackendSyntax be)
</span><a href="#local-6989586621679294900"><span class="hs-identifier hs-var hs-var">createTableCommand</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-75"></span><span>           </span><span class="annot"><span class="annottext">Maybe
  (Sql92CreateTableOptionsSyntax
     (Sql92DdlCommandCreateTableSyntax (BeamSqlBackendSyntax be)))
-&gt; Sql92CreateTableTableNameSyntax
     (Sql92DdlCommandCreateTableSyntax (BeamSqlBackendSyntax be))
-&gt; [(Text,
     Sql92CreateTableColumnSchemaSyntax
       (Sql92DdlCommandCreateTableSyntax (BeamSqlBackendSyntax be)))]
-&gt; [Sql92CreateTableTableConstraintSyntax
      (Sql92DdlCommandCreateTableSyntax (BeamSqlBackendSyntax be))]
-&gt; Sql92DdlCommandCreateTableSyntax (BeamSqlBackendSyntax be)
forall syntax.
IsSql92CreateTableSyntax syntax =&gt;
Maybe (Sql92CreateTableOptionsSyntax syntax)
-&gt; Sql92CreateTableTableNameSyntax syntax
-&gt; [(Text, Sql92CreateTableColumnSchemaSyntax syntax)]
-&gt; [Sql92CreateTableTableConstraintSyntax syntax]
-&gt; syntax
</span><a href="Database.Beam.Migrate.SQL.SQL92.html#createTableSyntax"><span class="hs-identifier hs-var">createTableSyntax</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe
  (Sql92CreateTableOptionsSyntax
     (Sql92DdlCommandCreateTableSyntax (BeamSqlBackendSyntax be)))
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Text
-&gt; Text
-&gt; Sql92CreateTableTableNameSyntax
     (Sql92DdlCommandCreateTableSyntax (BeamSqlBackendSyntax be))
forall tblName.
IsSql92TableNameSyntax tblName =&gt;
Maybe Text -&gt; Text -&gt; tblName
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">tableName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294911"><span class="hs-identifier hs-var">newTblName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span>                             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall a.
 Columnar' (TableFieldSchema be) a
 -&gt; (Text,
     Sql92CreateTableColumnSchemaSyntax
       (Sql92DdlCommandCreateTableSyntax (BeamSqlBackendSyntax be))))
-&gt; TableSchema be table
-&gt; [(Text,
     Sql92CreateTableColumnSchemaSyntax
       (Sql92DdlCommandCreateTableSyntax (BeamSqlBackendSyntax be)))]
forall (table :: (* -&gt; *) -&gt; *) (f :: * -&gt; *) b.
Beamable table =&gt;
(forall a. Columnar' f a -&gt; b) -&gt; table f -&gt; [b]
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">allBeamValues</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">Columnar'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Migrate.SQL.Types.html#TableFieldSchema"><span class="hs-identifier hs-type">TableFieldSchema</span></a></span><span> </span><span id="local-6989586621679294897"><span class="annot"><a href="#local-6989586621679294897"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Migrate.SQL.Types.html#FieldSchema"><span class="hs-identifier hs-type">FieldSchema</span></a></span><span> </span><span id="local-6989586621679294895"><span class="annot"><a href="#local-6989586621679294895"><span class="hs-identifier hs-var">schema</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294897"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Sql92CreateTableColumnSchemaSyntax
  (Sql92DdlCommandCreateTableSyntax (BeamSqlBackendSyntax be))
</span><a href="#local-6989586621679294895"><span class="hs-identifier hs-var">schema</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TableSchema be table
</span><a href="#local-6989586621679294910"><span class="hs-identifier hs-var">tblSettings</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span>                             </span><span class="annot"><span class="annottext">[Sql92CreateTableTableConstraintSyntax
   (Sql92DdlCommandCreateTableSyntax (BeamSqlBackendSyntax be))]
</span><a href="#local-6989586621679294903"><span class="hs-identifier hs-var">tblConstraints</span></a></span><span>
</span><span id="line-78"></span><span>         </span><span id="local-6989586621679294894"><span class="annot"><span class="annottext">command :: BeamSqlBackendSyntax be
</span><a href="#local-6989586621679294894"><span class="hs-identifier hs-var hs-var">command</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Sql92DdlCommandCreateTableSyntax (BeamSqlBackendSyntax be)
-&gt; BeamSqlBackendSyntax be
forall syntax.
IsSql92DdlCommandSyntax syntax =&gt;
Sql92DdlCommandCreateTableSyntax syntax -&gt; syntax
</span><a href="Database.Beam.Migrate.SQL.SQL92.html#createTableCmd"><span class="hs-identifier hs-var">createTableCmd</span></a></span><span> </span><span class="annot"><span class="annottext">Sql92DdlCommandCreateTableSyntax (BeamSqlBackendSyntax be)
</span><a href="#local-6989586621679294900"><span class="hs-identifier hs-var">createTableCommand</span></a></span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span>         </span><span id="local-6989586621679294892"><span class="annot"><span class="annottext">tbl' :: table (TableField table)
</span><a href="#local-6989586621679294892"><span class="hs-identifier hs-var hs-var">tbl'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall a.
 Columnar' (TableFieldSchema be) a
 -&gt; Columnar' (TableField table) a)
-&gt; TableSchema be table -&gt; table (TableField table)
forall (table :: (* -&gt; *) -&gt; *) (f :: * -&gt; *) (g :: * -&gt; *).
Beamable table =&gt;
(forall a. Columnar' f a -&gt; Columnar' g a) -&gt; table f -&gt; table g
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">changeBeamRep</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">Columnar'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Migrate.SQL.Types.html#TableFieldSchema"><span class="hs-identifier hs-type">TableFieldSchema</span></a></span><span> </span><span id="local-6989586621679294890"><span class="annot"><a href="#local-6989586621679294890"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Columnar (TableField table) a -&gt; Columnar' (TableField table) a
forall (f :: * -&gt; *) a. Columnar f a -&gt; Columnar' f a
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">Columnar'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmpty Text -&gt; Text -&gt; TableField table a
forall (table :: (* -&gt; *) -&gt; *) ty.
NonEmpty Text -&gt; Text -&gt; TableField table ty
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">TableField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; NonEmpty Text
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294890"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294890"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TableSchema be table
</span><a href="#local-6989586621679294910"><span class="hs-identifier hs-var">tblSettings</span></a></span><span>
</span><span id="line-81"></span><span>
</span><span id="line-82"></span><span>         </span><span id="local-6989586621679294888"><span class="annot"><span class="annottext">fieldChecks :: table (Const [FieldCheck])
</span><a href="#local-6989586621679294888"><span class="hs-identifier hs-var hs-var">fieldChecks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall a.
 Columnar' (TableFieldSchema be) a
 -&gt; Columnar' (Const [FieldCheck]) a)
-&gt; TableSchema be table -&gt; table (Const [FieldCheck])
forall (table :: (* -&gt; *) -&gt; *) (f :: * -&gt; *) (g :: * -&gt; *).
Beamable table =&gt;
(forall a. Columnar' f a -&gt; Columnar' g a) -&gt; table f -&gt; table g
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">changeBeamRep</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">Columnar'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Migrate.SQL.Types.html#TableFieldSchema"><span class="hs-identifier hs-type">TableFieldSchema</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679294887"><span class="annot"><a href="#local-6989586621679294887"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Columnar (Const [FieldCheck]) a -&gt; Columnar' (Const [FieldCheck]) a
forall (f :: * -&gt; *) a. Columnar f a -&gt; Columnar' f a
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">Columnar'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[FieldCheck] -&gt; Const [FieldCheck] a
forall k a (b :: k). a -&gt; Const a b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Const</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldCheck]
</span><a href="#local-6989586621679294887"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TableSchema be table
</span><a href="#local-6989586621679294910"><span class="hs-identifier hs-var">tblSettings</span></a></span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span>         </span><span id="local-6989586621679294885"><span class="annot"><span class="annottext">tblChecks :: [TableCheck]
</span><a href="#local-6989586621679294885"><span class="hs-identifier hs-var hs-var">tblChecks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">(forall (tbl :: (* -&gt; *) -&gt; *).
 Table tbl =&gt;
 QualifiedName
 -&gt; tbl (TableField tbl) -&gt; Maybe SomeDatabasePredicate)
-&gt; TableCheck
</span><a href="Database.Beam.Migrate.Types.Predicates.html#TableCheck"><span class="hs-identifier hs-var">TableCheck</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679294883"><span class="annot"><span class="annottext">QualifiedName
</span><a href="#local-6989586621679294883"><span class="hs-identifier hs-var">tblName</span></a></span></span><span> </span><span class="annot"><span class="annottext">tbl (TableField tbl)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SomeDatabasePredicate -&gt; Maybe SomeDatabasePredicate
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TableExistsPredicate -&gt; SomeDatabasePredicate
forall p. DatabasePredicate p =&gt; p -&gt; SomeDatabasePredicate
</span><a href="Database.Beam.Migrate.Types.Predicates.html#SomeDatabasePredicate"><span class="hs-identifier hs-var">SomeDatabasePredicate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QualifiedName -&gt; TableExistsPredicate
</span><a href="Database.Beam.Migrate.Checks.html#TableExistsPredicate"><span class="hs-identifier hs-var">TableExistsPredicate</span></a></span><span> </span><span class="annot"><span class="annottext">QualifiedName
</span><a href="#local-6989586621679294883"><span class="hs-identifier hs-var">tblName</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[TableCheck] -&gt; [TableCheck] -&gt; [TableCheck]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-85"></span><span>                     </span><span class="annot"><span class="annottext">[TableCheck]
</span><a href="#local-6989586621679294880"><span class="hs-identifier hs-var">primaryKeyCheck</span></a></span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span>         </span><span id="local-6989586621679294880"><span class="annot"><span class="annottext">primaryKeyCheck :: [TableCheck]
</span><a href="#local-6989586621679294880"><span class="hs-identifier hs-var hs-var">primaryKeyCheck</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-88"></span><span>           </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">(forall a. Columnar' (TableFieldSchema be) a -&gt; Text)
-&gt; PrimaryKey table (TableFieldSchema be) -&gt; [Text]
forall (table :: (* -&gt; *) -&gt; *) (f :: * -&gt; *) b.
Beamable table =&gt;
(forall a. Columnar' f a -&gt; b) -&gt; table f -&gt; [b]
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">allBeamValues</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">Columnar'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Migrate.SQL.Types.html#TableFieldSchema"><span class="hs-identifier hs-type">TableFieldSchema</span></a></span><span> </span><span id="local-6989586621679294879"><span class="annot"><a href="#local-6989586621679294879"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294879"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TableSchema be table -&gt; PrimaryKey table (TableFieldSchema be)
forall (table :: (* -&gt; *) -&gt; *) (column :: * -&gt; *).
Table table =&gt;
table column -&gt; PrimaryKey table column
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">primaryKey</span></a></span><span> </span><span class="annot"><span class="annottext">TableSchema be table
</span><a href="#local-6989586621679294910"><span class="hs-identifier hs-var">tblSettings</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-89"></span><span>             </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-90"></span><span>             </span><span id="local-6989586621679294878"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679294878"><span class="hs-identifier hs-var">cols</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">(forall (tbl :: (* -&gt; *) -&gt; *).
 Table tbl =&gt;
 QualifiedName
 -&gt; tbl (TableField tbl) -&gt; Maybe SomeDatabasePredicate)
-&gt; TableCheck
</span><a href="Database.Beam.Migrate.Types.Predicates.html#TableCheck"><span class="hs-identifier hs-var">TableCheck</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679294877"><span class="annot"><span class="annottext">QualifiedName
</span><a href="#local-6989586621679294877"><span class="hs-identifier hs-var">tblName</span></a></span></span><span> </span><span class="annot"><span class="annottext">tbl (TableField tbl)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SomeDatabasePredicate -&gt; Maybe SomeDatabasePredicate
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TableHasPrimaryKey -&gt; SomeDatabasePredicate
forall p. DatabasePredicate p =&gt; p -&gt; SomeDatabasePredicate
</span><a href="Database.Beam.Migrate.Types.Predicates.html#SomeDatabasePredicate"><span class="hs-identifier hs-var">SomeDatabasePredicate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QualifiedName -&gt; [Text] -&gt; TableHasPrimaryKey
</span><a href="Database.Beam.Migrate.Checks.html#TableHasPrimaryKey"><span class="hs-identifier hs-var">TableHasPrimaryKey</span></a></span><span> </span><span class="annot"><span class="annottext">QualifiedName
</span><a href="#local-6989586621679294877"><span class="hs-identifier hs-var">tblName</span></a></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679294878"><span class="hs-identifier hs-var">cols</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span>     </span><span class="annot"><span class="annottext">BeamSqlBackendSyntax be
-&gt; Maybe (BeamSqlBackendSyntax be) -&gt; Migration be ()
forall be.
BeamSqlBackendSyntax be
-&gt; Maybe (BeamSqlBackendSyntax be) -&gt; Migration be ()
</span><a href="Database.Beam.Migrate.Types.html#upDown"><span class="hs-identifier hs-var">upDown</span></a></span><span> </span><span class="annot"><span class="annottext">BeamSqlBackendSyntax be
</span><a href="#local-6989586621679294894"><span class="hs-identifier hs-var">command</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (BeamSqlBackendSyntax be)
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-93"></span><span>     </span><span class="annot"><span class="annottext">CheckedDatabaseEntity be db (TableEntity table)
-&gt; Migration be (CheckedDatabaseEntity be db (TableEntity table))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CheckedDatabaseEntityDescriptor be (TableEntity table)
-&gt; [SomeDatabasePredicate]
-&gt; CheckedDatabaseEntity be db (TableEntity table)
forall be entityType (db :: (* -&gt; *) -&gt; *).
IsCheckedDatabaseEntity be entityType =&gt;
CheckedDatabaseEntityDescriptor be entityType
-&gt; [SomeDatabasePredicate]
-&gt; CheckedDatabaseEntity be db entityType
</span><a href="Database.Beam.Migrate.Types.CheckedEntities.html#CheckedDatabaseEntity"><span class="hs-identifier hs-var">CheckedDatabaseEntity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DatabaseEntityDescriptor be (TableEntity table)
-&gt; [TableCheck]
-&gt; table (Const [FieldCheck])
-&gt; CheckedDatabaseEntityDescriptor be (TableEntity table)
forall (tbl :: (* -&gt; *) -&gt; *) be.
Table tbl =&gt;
DatabaseEntityDescriptor be (TableEntity tbl)
-&gt; [TableCheck]
-&gt; tbl (Const [FieldCheck])
-&gt; CheckedDatabaseEntityDescriptor be (TableEntity tbl)
</span><a href="Database.Beam.Migrate.Types.CheckedEntities.html#CheckedDatabaseTable"><span class="hs-identifier hs-var">CheckedDatabaseTable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Text
-&gt; Text
-&gt; Text
-&gt; table (TableField table)
-&gt; DatabaseEntityDescriptor be (TableEntity table)
forall (tbl :: (* -&gt; *) -&gt; *) be.
Table tbl =&gt;
Maybe Text
-&gt; Text
-&gt; Text
-&gt; TableSettings tbl
-&gt; DatabaseEntityDescriptor be (TableEntity tbl)
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">DatabaseTable</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294911"><span class="hs-identifier hs-var">newTblName</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294911"><span class="hs-identifier hs-var">newTblName</span></a></span><span> </span><span class="annot"><span class="annottext">table (TableField table)
</span><a href="#local-6989586621679294892"><span class="hs-identifier hs-var">tbl'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TableCheck]
</span><a href="#local-6989586621679294885"><span class="hs-identifier hs-var">tblChecks</span></a></span><span> </span><span class="annot"><span class="annottext">table (Const [FieldCheck])
</span><a href="#local-6989586621679294888"><span class="hs-identifier hs-var">fieldChecks</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span class="hs-comment">-- | Add a @DROP TABLE@ statement to this migration.</span><span>
</span><span id="line-96"></span><span id="local-6989586621679294869"><span id="local-6989586621679294870"><span id="local-6989586621679294871"><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#dropTable"><span class="hs-identifier hs-type">dropTable</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Types.html#BeamMigrateSqlBackend"><span class="hs-identifier hs-type">BeamMigrateSqlBackend</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294871"><span class="hs-identifier hs-type">be</span></a></span><span>
</span><span id="line-97"></span><span>          </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.Types.CheckedEntities.html#CheckedDatabaseEntity"><span class="hs-identifier hs-type">CheckedDatabaseEntity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294871"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294870"><span class="hs-identifier hs-type">db</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">TableEntity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294869"><span class="hs-identifier hs-type">table</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-98"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.Types.html#Migration"><span class="hs-identifier hs-type">Migration</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294871"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-99"></span><span id="dropTable"><span class="annot"><span class="annottext">dropTable :: CheckedDatabaseEntity be db (TableEntity table) -&gt; Migration be ()
</span><a href="Database.Beam.Migrate.SQL.Tables.html#dropTable"><span class="hs-identifier hs-var hs-var">dropTable</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Migrate.Types.CheckedEntities.html#CheckedDatabaseEntity"><span class="hs-identifier hs-type">CheckedDatabaseEntity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Migrate.Types.CheckedEntities.html#CheckedDatabaseTable"><span class="hs-identifier hs-type">CheckedDatabaseTable</span></a></span><span> </span><span id="local-6989586621679294868"><span class="annot"><a href="#local-6989586621679294868"><span class="hs-identifier hs-var">dt</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[SomeDatabasePredicate]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-100"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679294867"><span class="annot"><span class="annottext">command :: BeamSqlBackendSyntax be
</span><a href="#local-6989586621679294867"><span class="hs-identifier hs-var hs-var">command</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Sql92DdlCommandDropTableSyntax (BeamSqlBackendSyntax be)
-&gt; BeamSqlBackendSyntax be
forall syntax.
IsSql92DdlCommandSyntax syntax =&gt;
Sql92DdlCommandDropTableSyntax syntax -&gt; syntax
</span><a href="Database.Beam.Migrate.SQL.SQL92.html#dropTableCmd"><span class="hs-identifier hs-var">dropTableCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Sql92DropTableTableNameSyntax
  (Sql92DdlCommandDropTableSyntax (BeamSqlBackendSyntax be))
-&gt; Sql92DdlCommandDropTableSyntax (BeamSqlBackendSyntax be)
forall syntax.
IsSql92DropTableSyntax syntax =&gt;
Sql92DropTableTableNameSyntax syntax -&gt; syntax
</span><a href="Database.Beam.Migrate.SQL.SQL92.html#dropTableSyntax"><span class="hs-identifier hs-var">dropTableSyntax</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DatabaseEntityDescriptor be (TableEntity table)
-&gt; Sql92DropTableTableNameSyntax
     (Sql92DdlCommandDropTableSyntax (BeamSqlBackendSyntax be))
forall name be (tbl :: (* -&gt; *) -&gt; *).
IsSql92TableNameSyntax name =&gt;
DatabaseEntityDescriptor be (TableEntity tbl) -&gt; name
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">tableNameFromEntity</span></a></span><span> </span><span class="annot"><span class="annottext">DatabaseEntityDescriptor be (TableEntity table)
</span><a href="#local-6989586621679294868"><span class="hs-identifier hs-var">dt</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span>  </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">BeamSqlBackendSyntax be
-&gt; Maybe (BeamSqlBackendSyntax be) -&gt; Migration be ()
forall be.
BeamSqlBackendSyntax be
-&gt; Maybe (BeamSqlBackendSyntax be) -&gt; Migration be ()
</span><a href="Database.Beam.Migrate.Types.html#upDown"><span class="hs-identifier hs-var">upDown</span></a></span><span> </span><span class="annot"><span class="annottext">BeamSqlBackendSyntax be
</span><a href="#local-6989586621679294867"><span class="hs-identifier hs-var">command</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (BeamSqlBackendSyntax be)
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-102"></span><span>
</span><span id="line-103"></span><span class="hs-comment">-- | Copy a table schema from one database to another</span><span>
</span><span id="line-104"></span><span id="local-6989586621679294861"><span id="local-6989586621679294862"><span id="local-6989586621679294863"><span id="local-6989586621679294864"><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#preserve"><span class="hs-identifier hs-type">preserve</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.Types.CheckedEntities.html#CheckedDatabaseEntity"><span class="hs-identifier hs-type">CheckedDatabaseEntity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294864"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294863"><span class="hs-identifier hs-type">db</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294862"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-105"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.Types.html#Migration"><span class="hs-identifier hs-type">Migration</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294864"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Migrate.Types.CheckedEntities.html#CheckedDatabaseEntity"><span class="hs-identifier hs-type">CheckedDatabaseEntity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294864"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294861"><span class="hs-identifier hs-type">db'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294862"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-106"></span><span id="preserve"><span class="annot"><span class="annottext">preserve :: CheckedDatabaseEntity be db e
-&gt; Migration be (CheckedDatabaseEntity be db' e)
</span><a href="Database.Beam.Migrate.SQL.Tables.html#preserve"><span class="hs-identifier hs-var hs-var">preserve</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Migrate.Types.CheckedEntities.html#CheckedDatabaseEntity"><span class="hs-identifier hs-type">CheckedDatabaseEntity</span></a></span><span> </span><span id="local-6989586621679294860"><span class="annot"><span class="annottext">CheckedDatabaseEntityDescriptor be e
</span><a href="#local-6989586621679294860"><span class="hs-identifier hs-var">desc</span></a></span></span><span> </span><span id="local-6989586621679294859"><span class="annot"><span class="annottext">[SomeDatabasePredicate]
</span><a href="#local-6989586621679294859"><span class="hs-identifier hs-var">checks</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CheckedDatabaseEntity be db' e
-&gt; Migration be (CheckedDatabaseEntity be db' e)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CheckedDatabaseEntityDescriptor be e
-&gt; [SomeDatabasePredicate] -&gt; CheckedDatabaseEntity be db' e
forall be entityType (db :: (* -&gt; *) -&gt; *).
IsCheckedDatabaseEntity be entityType =&gt;
CheckedDatabaseEntityDescriptor be entityType
-&gt; [SomeDatabasePredicate]
-&gt; CheckedDatabaseEntity be db entityType
</span><a href="Database.Beam.Migrate.Types.CheckedEntities.html#CheckedDatabaseEntity"><span class="hs-identifier hs-var">CheckedDatabaseEntity</span></a></span><span> </span><span class="annot"><span class="annottext">CheckedDatabaseEntityDescriptor be e
</span><a href="#local-6989586621679294860"><span class="hs-identifier hs-var">desc</span></a></span><span> </span><span class="annot"><span class="annottext">[SomeDatabasePredicate]
</span><a href="#local-6989586621679294859"><span class="hs-identifier hs-var">checks</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-107"></span><span>
</span><span id="line-108"></span><span class="hs-comment">-- * Alter table</span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span class="hs-comment">-- | A column in the process of being altered</span><span>
</span><span id="line-111"></span><span class="hs-keyword">data</span><span> </span><span id="ColumnMigration"><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#ColumnMigration"><span class="hs-identifier hs-var">ColumnMigration</span></a></span></span><span> </span><span id="local-6989586621679295065"><span class="annot"><a href="#local-6989586621679295065"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-112"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="ColumnMigration"><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#ColumnMigration"><span class="hs-identifier hs-var">ColumnMigration</span></a></span></span><span>
</span><span id="line-113"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="columnMigrationFieldName"><span class="annot"><span class="annottext">ColumnMigration a -&gt; Text
</span><a href="Database.Beam.Migrate.SQL.Tables.html#columnMigrationFieldName"><span class="hs-identifier hs-var hs-var">columnMigrationFieldName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-114"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="columnMigrationFieldChecks"><span class="annot"><span class="annottext">ColumnMigration a -&gt; [FieldCheck]
</span><a href="Database.Beam.Migrate.SQL.Tables.html#columnMigrationFieldChecks"><span class="hs-identifier hs-var hs-var">columnMigrationFieldChecks</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Beam.Migrate.Types.Predicates.html#FieldCheck"><span class="hs-identifier hs-type">FieldCheck</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-115"></span><span>
</span><span id="line-116"></span><span class="hs-comment">-- | Monad representing a series of @ALTER TABLE@ statements</span><span>
</span><span id="line-117"></span><span class="hs-keyword">newtype</span><span> </span><span id="TableMigration"><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#TableMigration"><span class="hs-identifier hs-var">TableMigration</span></a></span></span><span> </span><span id="local-6989586621679295084"><span class="annot"><a href="#local-6989586621679295084"><span class="hs-identifier hs-type">be</span></a></span></span><span> </span><span id="local-6989586621679295083"><span class="annot"><a href="#local-6989586621679295083"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-118"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="TableMigration"><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#TableMigration"><span class="hs-identifier hs-var">TableMigration</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier hs-type">WriterT</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Beam.Migrate.SQL.Types.html#BeamSqlBackendAlterTableSyntax"><span class="hs-identifier hs-type">BeamSqlBackendAlterTableSyntax</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679295084"><span class="hs-identifier hs-type">be</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">TableName</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Beam.Migrate.Types.Predicates.html#TableCheck"><span class="hs-identifier hs-type">TableCheck</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679295083"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-119"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679294848"><span id="local-6989586621679294850"><span id="local-6989586621679294852"><span class="annot"><span class="annottext">Applicative (TableMigration be)
a -&gt; TableMigration be a
Applicative (TableMigration be)
-&gt; (forall a b.
    TableMigration be a
    -&gt; (a -&gt; TableMigration be b) -&gt; TableMigration be b)
-&gt; (forall a b.
    TableMigration be a -&gt; TableMigration be b -&gt; TableMigration be b)
-&gt; (forall a. a -&gt; TableMigration be a)
-&gt; Monad (TableMigration be)
TableMigration be a
-&gt; (a -&gt; TableMigration be b) -&gt; TableMigration be b
TableMigration be a -&gt; TableMigration be b -&gt; TableMigration be b
forall be. Applicative (TableMigration be)
forall a. a -&gt; TableMigration be a
forall be a. a -&gt; TableMigration be a
forall a b.
TableMigration be a -&gt; TableMigration be b -&gt; TableMigration be b
forall a b.
TableMigration be a
-&gt; (a -&gt; TableMigration be b) -&gt; TableMigration be b
forall be a b.
TableMigration be a -&gt; TableMigration be b -&gt; TableMigration be b
forall be a b.
TableMigration be a
-&gt; (a -&gt; TableMigration be b) -&gt; TableMigration be b
forall (m :: * -&gt; *).
Applicative m
-&gt; (forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
return :: a -&gt; TableMigration be a
$creturn :: forall be a. a -&gt; TableMigration be a
&gt;&gt; :: TableMigration be a -&gt; TableMigration be b -&gt; TableMigration be b
$c&gt;&gt; :: forall be a b.
TableMigration be a -&gt; TableMigration be b -&gt; TableMigration be b
&gt;&gt;= :: TableMigration be a
-&gt; (a -&gt; TableMigration be b) -&gt; TableMigration be b
$c&gt;&gt;= :: forall be a b.
TableMigration be a
-&gt; (a -&gt; TableMigration be b) -&gt; TableMigration be b
$cp1Monad :: forall be. Applicative (TableMigration be)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679294836"><span id="local-6989586621679294838"><span id="local-6989586621679294840"><span id="local-6989586621679294842"><span id="local-6989586621679294844"><span class="annot"><span class="annottext">Functor (TableMigration be)
a -&gt; TableMigration be a
Functor (TableMigration be)
-&gt; (forall a. a -&gt; TableMigration be a)
-&gt; (forall a b.
    TableMigration be (a -&gt; b)
    -&gt; TableMigration be a -&gt; TableMigration be b)
-&gt; (forall a b c.
    (a -&gt; b -&gt; c)
    -&gt; TableMigration be a
    -&gt; TableMigration be b
    -&gt; TableMigration be c)
-&gt; (forall a b.
    TableMigration be a -&gt; TableMigration be b -&gt; TableMigration be b)
-&gt; (forall a b.
    TableMigration be a -&gt; TableMigration be b -&gt; TableMigration be a)
-&gt; Applicative (TableMigration be)
TableMigration be a -&gt; TableMigration be b -&gt; TableMigration be b
TableMigration be a -&gt; TableMigration be b -&gt; TableMigration be a
TableMigration be (a -&gt; b)
-&gt; TableMigration be a -&gt; TableMigration be b
(a -&gt; b -&gt; c)
-&gt; TableMigration be a
-&gt; TableMigration be b
-&gt; TableMigration be c
forall be. Functor (TableMigration be)
forall a. a -&gt; TableMigration be a
forall be a. a -&gt; TableMigration be a
forall a b.
TableMigration be a -&gt; TableMigration be b -&gt; TableMigration be a
forall a b.
TableMigration be a -&gt; TableMigration be b -&gt; TableMigration be b
forall a b.
TableMigration be (a -&gt; b)
-&gt; TableMigration be a -&gt; TableMigration be b
forall be a b.
TableMigration be a -&gt; TableMigration be b -&gt; TableMigration be a
forall be a b.
TableMigration be a -&gt; TableMigration be b -&gt; TableMigration be b
forall be a b.
TableMigration be (a -&gt; b)
-&gt; TableMigration be a -&gt; TableMigration be b
forall a b c.
(a -&gt; b -&gt; c)
-&gt; TableMigration be a
-&gt; TableMigration be b
-&gt; TableMigration be c
forall be a b c.
(a -&gt; b -&gt; c)
-&gt; TableMigration be a
-&gt; TableMigration be b
-&gt; TableMigration be c
forall (f :: * -&gt; *).
Functor f
-&gt; (forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
&lt;* :: TableMigration be a -&gt; TableMigration be b -&gt; TableMigration be a
$c&lt;* :: forall be a b.
TableMigration be a -&gt; TableMigration be b -&gt; TableMigration be a
*&gt; :: TableMigration be a -&gt; TableMigration be b -&gt; TableMigration be b
$c*&gt; :: forall be a b.
TableMigration be a -&gt; TableMigration be b -&gt; TableMigration be b
liftA2 :: (a -&gt; b -&gt; c)
-&gt; TableMigration be a
-&gt; TableMigration be b
-&gt; TableMigration be c
$cliftA2 :: forall be a b c.
(a -&gt; b -&gt; c)
-&gt; TableMigration be a
-&gt; TableMigration be b
-&gt; TableMigration be c
&lt;*&gt; :: TableMigration be (a -&gt; b)
-&gt; TableMigration be a -&gt; TableMigration be b
$c&lt;*&gt; :: forall be a b.
TableMigration be (a -&gt; b)
-&gt; TableMigration be a -&gt; TableMigration be b
pure :: a -&gt; TableMigration be a
$cpure :: forall be a. a -&gt; TableMigration be a
$cp1Applicative :: forall be. Functor (TableMigration be)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></a></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679294831"><span id="local-6989586621679294833"><span class="annot"><span class="annottext">a -&gt; TableMigration be b -&gt; TableMigration be a
(a -&gt; b) -&gt; TableMigration be a -&gt; TableMigration be b
(forall a b.
 (a -&gt; b) -&gt; TableMigration be a -&gt; TableMigration be b)
-&gt; (forall a b. a -&gt; TableMigration be b -&gt; TableMigration be a)
-&gt; Functor (TableMigration be)
forall a b. a -&gt; TableMigration be b -&gt; TableMigration be a
forall a b. (a -&gt; b) -&gt; TableMigration be a -&gt; TableMigration be b
forall be a b. a -&gt; TableMigration be b -&gt; TableMigration be a
forall be a b.
(a -&gt; b) -&gt; TableMigration be a -&gt; TableMigration be b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
&lt;$ :: a -&gt; TableMigration be b -&gt; TableMigration be a
$c&lt;$ :: forall be a b. a -&gt; TableMigration be b -&gt; TableMigration be a
fmap :: (a -&gt; b) -&gt; TableMigration be a -&gt; TableMigration be b
$cfmap :: forall be a b.
(a -&gt; b) -&gt; TableMigration be a -&gt; TableMigration be b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span class="hs-comment">-- | @ALTER TABLE ... RENAME TO@ command</span><span>
</span><span id="line-122"></span><span id="local-6989586621679294828"><span id="local-6989586621679294829"><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#renameTableTo"><span class="hs-identifier hs-type">renameTableTo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Types.html#BeamMigrateSqlBackend"><span class="hs-identifier hs-type">BeamMigrateSqlBackend</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294829"><span class="hs-identifier hs-type">be</span></a></span><span>
</span><span id="line-123"></span><span>              </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679294828"><span class="hs-identifier hs-type">table</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#ColumnMigration"><span class="hs-identifier hs-type">ColumnMigration</span></a></span><span>
</span><span id="line-124"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#TableMigration"><span class="hs-identifier hs-type">TableMigration</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294829"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679294828"><span class="hs-identifier hs-type">table</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#ColumnMigration"><span class="hs-identifier hs-type">ColumnMigration</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-125"></span><span id="renameTableTo"><span class="annot"><span class="annottext">renameTableTo :: Text
-&gt; table ColumnMigration
-&gt; TableMigration be (table ColumnMigration)
</span><a href="Database.Beam.Migrate.SQL.Tables.html#renameTableTo"><span class="hs-identifier hs-var hs-var">renameTableTo</span></a></span></span><span> </span><span id="local-6989586621679294827"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294827"><span class="hs-identifier hs-var">newName</span></a></span></span><span> </span><span id="local-6989586621679294826"><span class="annot"><span class="annottext">table ColumnMigration
</span><a href="#local-6989586621679294826"><span class="hs-identifier hs-var">oldTbl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WriterT
  [BeamSqlBackendAlterTableSyntax be]
  (State (TableName, [TableCheck]))
  (table ColumnMigration)
-&gt; TableMigration be (table ColumnMigration)
forall be a.
WriterT
  [BeamSqlBackendAlterTableSyntax be]
  (State (TableName, [TableCheck]))
  a
-&gt; TableMigration be a
</span><a href="Database.Beam.Migrate.SQL.Tables.html#TableMigration"><span class="hs-identifier hs-var">TableMigration</span></a></span><span> </span><span class="annot"><span class="annottext">(WriterT
   [BeamSqlBackendAlterTableSyntax be]
   (State (TableName, [TableCheck]))
   (table ColumnMigration)
 -&gt; TableMigration be (table ColumnMigration))
-&gt; WriterT
     [BeamSqlBackendAlterTableSyntax be]
     (State (TableName, [TableCheck]))
     (table ColumnMigration)
-&gt; TableMigration be (table ColumnMigration)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-126"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">TableName</span></a></span><span> </span><span id="local-6989586621679294824"><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679294824"><span class="hs-identifier hs-var">curSchema</span></a></span></span><span> </span><span id="local-6989586621679294823"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294823"><span class="hs-identifier hs-var">curNm</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679294822"><span class="annot"><span class="annottext">[TableCheck]
</span><a href="#local-6989586621679294822"><span class="hs-identifier hs-var">chks</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">WriterT
  [BeamSqlBackendAlterTableSyntax be]
  (State (TableName, [TableCheck]))
  (TableName, [TableCheck])
forall s (m :: * -&gt; *). MonadState s m =&gt; m s
</span><a href="../../../../mtl/html/src"><span class="hs-identifier hs-var">get</span></a></span><span>
</span><span id="line-127"></span><span>  </span><span class="annot"><span class="annottext">[BeamSqlBackendAlterTableSyntax be]
-&gt; WriterT
     [BeamSqlBackendAlterTableSyntax be]
     (State (TableName, [TableCheck]))
     ()
forall w (m :: * -&gt; *). MonadWriter w m =&gt; w -&gt; m ()
</span><a href="../../../../mtl/html/src"><span class="hs-identifier hs-var">tell</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Sql92AlterTableTableNameSyntax (BeamSqlBackendAlterTableSyntax be)
-&gt; Sql92AlterTableAlterTableActionSyntax
     (BeamSqlBackendAlterTableSyntax be)
-&gt; BeamSqlBackendAlterTableSyntax be
forall syntax.
IsSql92AlterTableSyntax syntax =&gt;
Sql92AlterTableTableNameSyntax syntax
-&gt; Sql92AlterTableAlterTableActionSyntax syntax -&gt; syntax
</span><a href="Database.Beam.Migrate.SQL.SQL92.html#alterTableSyntax"><span class="hs-identifier hs-var">alterTableSyntax</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Text
-&gt; Text
-&gt; Sql92AlterTableTableNameSyntax
     (BeamSqlBackendAlterTableSyntax be)
forall tblName.
IsSql92TableNameSyntax tblName =&gt;
Maybe Text -&gt; Text -&gt; tblName
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">tableName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679294824"><span class="hs-identifier hs-var">curSchema</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294823"><span class="hs-identifier hs-var">curNm</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
-&gt; Sql92AlterTableAlterTableActionSyntax
     (BeamSqlBackendAlterTableSyntax be)
forall syntax.
IsSql92AlterTableActionSyntax syntax =&gt;
Text -&gt; syntax
</span><a href="Database.Beam.Migrate.SQL.SQL92.html#renameTableToSyntax"><span class="hs-identifier hs-var">renameTableToSyntax</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294827"><span class="hs-identifier hs-var">newName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-128"></span><span>  </span><span class="annot"><span class="annottext">(TableName, [TableCheck])
-&gt; WriterT
     [BeamSqlBackendAlterTableSyntax be]
     (State (TableName, [TableCheck]))
     ()
forall s (m :: * -&gt; *). MonadState s m =&gt; s -&gt; m ()
</span><a href="../../../../mtl/html/src"><span class="hs-identifier hs-var">put</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Text -&gt; Text -&gt; TableName
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">TableName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679294824"><span class="hs-identifier hs-var">curSchema</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294823"><span class="hs-identifier hs-var">curNm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[TableCheck]
</span><a href="#local-6989586621679294822"><span class="hs-identifier hs-var">chks</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-129"></span><span>  </span><span class="annot"><span class="annottext">table ColumnMigration
-&gt; WriterT
     [BeamSqlBackendAlterTableSyntax be]
     (State (TableName, [TableCheck]))
     (table ColumnMigration)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">table ColumnMigration
</span><a href="#local-6989586621679294826"><span class="hs-identifier hs-var">oldTbl</span></a></span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span class="hs-comment">-- | @ALTER TABLE ... RENAME COLUMN ... TO ...@ command</span><span>
</span><span id="line-132"></span><span id="local-6989586621679294815"><span id="local-6989586621679294816"><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#renameColumnTo"><span class="hs-identifier hs-type">renameColumnTo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Types.html#BeamMigrateSqlBackend"><span class="hs-identifier hs-type">BeamMigrateSqlBackend</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294816"><span class="hs-identifier hs-type">be</span></a></span><span>
</span><span id="line-133"></span><span>               </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#ColumnMigration"><span class="hs-identifier hs-type">ColumnMigration</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294815"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-134"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#TableMigration"><span class="hs-identifier hs-type">TableMigration</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294816"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#ColumnMigration"><span class="hs-identifier hs-type">ColumnMigration</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294815"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-135"></span><span id="renameColumnTo"><span class="annot"><span class="annottext">renameColumnTo :: Text -&gt; ColumnMigration a -&gt; TableMigration be (ColumnMigration a)
</span><a href="Database.Beam.Migrate.SQL.Tables.html#renameColumnTo"><span class="hs-identifier hs-var hs-var">renameColumnTo</span></a></span></span><span> </span><span id="local-6989586621679294814"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294814"><span class="hs-identifier hs-var">newName</span></a></span></span><span> </span><span id="local-6989586621679294813"><span class="annot"><span class="annottext">ColumnMigration a
</span><a href="#local-6989586621679294813"><span class="hs-identifier hs-var">column</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WriterT
  [BeamSqlBackendAlterTableSyntax be]
  (State (TableName, [TableCheck]))
  (ColumnMigration a)
-&gt; TableMigration be (ColumnMigration a)
forall be a.
WriterT
  [BeamSqlBackendAlterTableSyntax be]
  (State (TableName, [TableCheck]))
  a
-&gt; TableMigration be a
</span><a href="Database.Beam.Migrate.SQL.Tables.html#TableMigration"><span class="hs-identifier hs-var">TableMigration</span></a></span><span> </span><span class="annot"><span class="annottext">(WriterT
   [BeamSqlBackendAlterTableSyntax be]
   (State (TableName, [TableCheck]))
   (ColumnMigration a)
 -&gt; TableMigration be (ColumnMigration a))
-&gt; WriterT
     [BeamSqlBackendAlterTableSyntax be]
     (State (TableName, [TableCheck]))
     (ColumnMigration a)
-&gt; TableMigration be (ColumnMigration a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-136"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">TableName</span></a></span><span> </span><span id="local-6989586621679294812"><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679294812"><span class="hs-identifier hs-var">curSchema</span></a></span></span><span> </span><span id="local-6989586621679294811"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294811"><span class="hs-identifier hs-var">curNm</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[TableCheck]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">WriterT
  [BeamSqlBackendAlterTableSyntax be]
  (State (TableName, [TableCheck]))
  (TableName, [TableCheck])
forall s (m :: * -&gt; *). MonadState s m =&gt; m s
</span><a href="../../../../mtl/html/src"><span class="hs-identifier hs-var">get</span></a></span><span>
</span><span id="line-137"></span><span>  </span><span class="annot"><span class="annottext">[BeamSqlBackendAlterTableSyntax be]
-&gt; WriterT
     [BeamSqlBackendAlterTableSyntax be]
     (State (TableName, [TableCheck]))
     ()
forall w (m :: * -&gt; *). MonadWriter w m =&gt; w -&gt; m ()
</span><a href="../../../../mtl/html/src"><span class="hs-identifier hs-var">tell</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Sql92AlterTableTableNameSyntax (BeamSqlBackendAlterTableSyntax be)
-&gt; Sql92AlterTableAlterTableActionSyntax
     (BeamSqlBackendAlterTableSyntax be)
-&gt; BeamSqlBackendAlterTableSyntax be
forall syntax.
IsSql92AlterTableSyntax syntax =&gt;
Sql92AlterTableTableNameSyntax syntax
-&gt; Sql92AlterTableAlterTableActionSyntax syntax -&gt; syntax
</span><a href="Database.Beam.Migrate.SQL.SQL92.html#alterTableSyntax"><span class="hs-identifier hs-var">alterTableSyntax</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Text
-&gt; Text
-&gt; Sql92AlterTableTableNameSyntax
     (BeamSqlBackendAlterTableSyntax be)
forall tblName.
IsSql92TableNameSyntax tblName =&gt;
Maybe Text -&gt; Text -&gt; tblName
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">tableName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679294812"><span class="hs-identifier hs-var">curSchema</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294811"><span class="hs-identifier hs-var">curNm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span>           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
-&gt; Text
-&gt; Sql92AlterTableAlterTableActionSyntax
     (BeamSqlBackendAlterTableSyntax be)
forall syntax.
IsSql92AlterTableActionSyntax syntax =&gt;
Text -&gt; Text -&gt; syntax
</span><a href="Database.Beam.Migrate.SQL.SQL92.html#renameColumnToSyntax"><span class="hs-identifier hs-var">renameColumnToSyntax</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnMigration a -&gt; Text
forall a. ColumnMigration a -&gt; Text
</span><a href="Database.Beam.Migrate.SQL.Tables.html#columnMigrationFieldName"><span class="hs-identifier hs-var hs-var">columnMigrationFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnMigration a
</span><a href="#local-6989586621679294813"><span class="hs-identifier hs-var">column</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294814"><span class="hs-identifier hs-var">newName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-139"></span><span>  </span><span class="annot"><span class="annottext">ColumnMigration a
-&gt; WriterT
     [BeamSqlBackendAlterTableSyntax be]
     (State (TableName, [TableCheck]))
     (ColumnMigration a)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnMigration a
</span><a href="#local-6989586621679294813"><span class="hs-identifier hs-var">column</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">columnMigrationFieldName :: Text
</span><a href="Database.Beam.Migrate.SQL.Tables.html#columnMigrationFieldName"><span class="hs-identifier hs-var">columnMigrationFieldName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294814"><span class="hs-identifier hs-var">newName</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-140"></span><span>
</span><span id="line-141"></span><span class="hs-comment">-- | @ALTER TABLE ... DROP COLUMN ...@ command</span><span>
</span><span id="line-142"></span><span id="local-6989586621679294808"><span id="local-6989586621679294809"><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#dropColumn"><span class="hs-identifier hs-type">dropColumn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Types.html#BeamMigrateSqlBackend"><span class="hs-identifier hs-type">BeamMigrateSqlBackend</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294809"><span class="hs-identifier hs-type">be</span></a></span><span>
</span><span id="line-143"></span><span>           </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#ColumnMigration"><span class="hs-identifier hs-type">ColumnMigration</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294808"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#TableMigration"><span class="hs-identifier hs-type">TableMigration</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294809"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-144"></span><span id="dropColumn"><span class="annot"><span class="annottext">dropColumn :: ColumnMigration a -&gt; TableMigration be ()
</span><a href="Database.Beam.Migrate.SQL.Tables.html#dropColumn"><span class="hs-identifier hs-var hs-var">dropColumn</span></a></span></span><span> </span><span id="local-6989586621679294807"><span class="annot"><span class="annottext">ColumnMigration a
</span><a href="#local-6989586621679294807"><span class="hs-identifier hs-var">column</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WriterT
  [BeamSqlBackendAlterTableSyntax be]
  (State (TableName, [TableCheck]))
  ()
-&gt; TableMigration be ()
forall be a.
WriterT
  [BeamSqlBackendAlterTableSyntax be]
  (State (TableName, [TableCheck]))
  a
-&gt; TableMigration be a
</span><a href="Database.Beam.Migrate.SQL.Tables.html#TableMigration"><span class="hs-identifier hs-var">TableMigration</span></a></span><span> </span><span class="annot"><span class="annottext">(WriterT
   [BeamSqlBackendAlterTableSyntax be]
   (State (TableName, [TableCheck]))
   ()
 -&gt; TableMigration be ())
-&gt; WriterT
     [BeamSqlBackendAlterTableSyntax be]
     (State (TableName, [TableCheck]))
     ()
-&gt; TableMigration be ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-145"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">TableName</span></a></span><span> </span><span id="local-6989586621679294806"><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679294806"><span class="hs-identifier hs-var">curSchema</span></a></span></span><span> </span><span id="local-6989586621679294805"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294805"><span class="hs-identifier hs-var">curNm</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[TableCheck]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">WriterT
  [BeamSqlBackendAlterTableSyntax be]
  (State (TableName, [TableCheck]))
  (TableName, [TableCheck])
forall s (m :: * -&gt; *). MonadState s m =&gt; m s
</span><a href="../../../../mtl/html/src"><span class="hs-identifier hs-var">get</span></a></span><span>
</span><span id="line-146"></span><span>  </span><span class="annot"><span class="annottext">[BeamSqlBackendAlterTableSyntax be]
-&gt; WriterT
     [BeamSqlBackendAlterTableSyntax be]
     (State (TableName, [TableCheck]))
     ()
forall w (m :: * -&gt; *). MonadWriter w m =&gt; w -&gt; m ()
</span><a href="../../../../mtl/html/src"><span class="hs-identifier hs-var">tell</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Sql92AlterTableTableNameSyntax (BeamSqlBackendAlterTableSyntax be)
-&gt; Sql92AlterTableAlterTableActionSyntax
     (BeamSqlBackendAlterTableSyntax be)
-&gt; BeamSqlBackendAlterTableSyntax be
forall syntax.
IsSql92AlterTableSyntax syntax =&gt;
Sql92AlterTableTableNameSyntax syntax
-&gt; Sql92AlterTableAlterTableActionSyntax syntax -&gt; syntax
</span><a href="Database.Beam.Migrate.SQL.SQL92.html#alterTableSyntax"><span class="hs-identifier hs-var">alterTableSyntax</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Text
-&gt; Text
-&gt; Sql92AlterTableTableNameSyntax
     (BeamSqlBackendAlterTableSyntax be)
forall tblName.
IsSql92TableNameSyntax tblName =&gt;
Maybe Text -&gt; Text -&gt; tblName
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">tableName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679294806"><span class="hs-identifier hs-var">curSchema</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294805"><span class="hs-identifier hs-var">curNm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span>           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
-&gt; Sql92AlterTableAlterTableActionSyntax
     (BeamSqlBackendAlterTableSyntax be)
forall syntax.
IsSql92AlterTableActionSyntax syntax =&gt;
Text -&gt; syntax
</span><a href="Database.Beam.Migrate.SQL.SQL92.html#dropColumnSyntax"><span class="hs-identifier hs-var">dropColumnSyntax</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnMigration a -&gt; Text
forall a. ColumnMigration a -&gt; Text
</span><a href="Database.Beam.Migrate.SQL.Tables.html#columnMigrationFieldName"><span class="hs-identifier hs-var hs-var">columnMigrationFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnMigration a
</span><a href="#local-6989586621679294807"><span class="hs-identifier hs-var">column</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-148"></span><span>
</span><span id="line-149"></span><span class="hs-comment">-- | @ALTER TABLE ... ADD COLUMN ...@ command</span><span>
</span><span id="line-150"></span><span id="local-6989586621679294802"><span id="local-6989586621679294803"><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#addColumn"><span class="hs-identifier hs-type">addColumn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Types.html#BeamMigrateSqlBackend"><span class="hs-identifier hs-type">BeamMigrateSqlBackend</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294803"><span class="hs-identifier hs-type">be</span></a></span><span>
</span><span id="line-151"></span><span>          </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Types.html#TableFieldSchema"><span class="hs-identifier hs-type">TableFieldSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294803"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294802"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-152"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#TableMigration"><span class="hs-identifier hs-type">TableMigration</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294803"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#ColumnMigration"><span class="hs-identifier hs-type">ColumnMigration</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294802"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-153"></span><span id="addColumn"><span class="annot"><span class="annottext">addColumn :: TableFieldSchema be a -&gt; TableMigration be (ColumnMigration a)
</span><a href="Database.Beam.Migrate.SQL.Tables.html#addColumn"><span class="hs-identifier hs-var hs-var">addColumn</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Migrate.SQL.Types.html#TableFieldSchema"><span class="hs-identifier hs-type">TableFieldSchema</span></a></span><span> </span><span id="local-6989586621679294801"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294801"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Migrate.SQL.Types.html#FieldSchema"><span class="hs-identifier hs-type">FieldSchema</span></a></span><span> </span><span id="local-6989586621679294800"><span class="annot"><span class="annottext">BeamSqlBackendColumnSchemaSyntax be
</span><a href="#local-6989586621679294800"><span class="hs-identifier hs-var">fieldSchemaSyntax</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679294799"><span class="annot"><span class="annottext">[FieldCheck]
</span><a href="#local-6989586621679294799"><span class="hs-identifier hs-var">checks</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-154"></span><span>  </span><span class="annot"><span class="annottext">WriterT
  [BeamSqlBackendAlterTableSyntax be]
  (State (TableName, [TableCheck]))
  (ColumnMigration a)
-&gt; TableMigration be (ColumnMigration a)
forall be a.
WriterT
  [BeamSqlBackendAlterTableSyntax be]
  (State (TableName, [TableCheck]))
  a
-&gt; TableMigration be a
</span><a href="Database.Beam.Migrate.SQL.Tables.html#TableMigration"><span class="hs-identifier hs-var">TableMigration</span></a></span><span> </span><span class="annot"><span class="annottext">(WriterT
   [BeamSqlBackendAlterTableSyntax be]
   (State (TableName, [TableCheck]))
   (ColumnMigration a)
 -&gt; TableMigration be (ColumnMigration a))
-&gt; WriterT
     [BeamSqlBackendAlterTableSyntax be]
     (State (TableName, [TableCheck]))
     (ColumnMigration a)
-&gt; TableMigration be (ColumnMigration a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-155"></span><span>  </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">TableName</span></a></span><span> </span><span id="local-6989586621679294798"><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679294798"><span class="hs-identifier hs-var">curSchema</span></a></span></span><span> </span><span id="local-6989586621679294797"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294797"><span class="hs-identifier hs-var">curNm</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[TableCheck]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">WriterT
  [BeamSqlBackendAlterTableSyntax be]
  (State (TableName, [TableCheck]))
  (TableName, [TableCheck])
forall s (m :: * -&gt; *). MonadState s m =&gt; m s
</span><a href="../../../../mtl/html/src"><span class="hs-identifier hs-var">get</span></a></span><span>
</span><span id="line-156"></span><span>     </span><span class="annot"><span class="annottext">[BeamSqlBackendAlterTableSyntax be]
-&gt; WriterT
     [BeamSqlBackendAlterTableSyntax be]
     (State (TableName, [TableCheck]))
     ()
forall w (m :: * -&gt; *). MonadWriter w m =&gt; w -&gt; m ()
</span><a href="../../../../mtl/html/src"><span class="hs-identifier hs-var">tell</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Sql92AlterTableTableNameSyntax (BeamSqlBackendAlterTableSyntax be)
-&gt; Sql92AlterTableAlterTableActionSyntax
     (BeamSqlBackendAlterTableSyntax be)
-&gt; BeamSqlBackendAlterTableSyntax be
forall syntax.
IsSql92AlterTableSyntax syntax =&gt;
Sql92AlterTableTableNameSyntax syntax
-&gt; Sql92AlterTableAlterTableActionSyntax syntax -&gt; syntax
</span><a href="Database.Beam.Migrate.SQL.SQL92.html#alterTableSyntax"><span class="hs-identifier hs-var">alterTableSyntax</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Text
-&gt; Text
-&gt; Sql92AlterTableTableNameSyntax
     (BeamSqlBackendAlterTableSyntax be)
forall tblName.
IsSql92TableNameSyntax tblName =&gt;
Maybe Text -&gt; Text -&gt; tblName
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">tableName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679294798"><span class="hs-identifier hs-var">curSchema</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294797"><span class="hs-identifier hs-var">curNm</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
-&gt; Sql92AlterTableColumnSchemaSyntax
     (Sql92AlterTableAlterTableActionSyntax
        (BeamSqlBackendAlterTableSyntax be))
-&gt; Sql92AlterTableAlterTableActionSyntax
     (BeamSqlBackendAlterTableSyntax be)
forall syntax.
IsSql92AlterTableActionSyntax syntax =&gt;
Text -&gt; Sql92AlterTableColumnSchemaSyntax syntax -&gt; syntax
</span><a href="Database.Beam.Migrate.SQL.SQL92.html#addColumnSyntax"><span class="hs-identifier hs-var">addColumnSyntax</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294801"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="annot"><span class="annottext">Sql92AlterTableColumnSchemaSyntax
  (Sql92AlterTableAlterTableActionSyntax
     (BeamSqlBackendAlterTableSyntax be))
BeamSqlBackendColumnSchemaSyntax be
</span><a href="#local-6989586621679294800"><span class="hs-identifier hs-var">fieldSchemaSyntax</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-157"></span><span>     </span><span class="annot"><span class="annottext">ColumnMigration a
-&gt; WriterT
     [BeamSqlBackendAlterTableSyntax be]
     (State (TableName, [TableCheck]))
     (ColumnMigration a)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; [FieldCheck] -&gt; ColumnMigration a
forall a. Text -&gt; [FieldCheck] -&gt; ColumnMigration a
</span><a href="Database.Beam.Migrate.SQL.Tables.html#ColumnMigration"><span class="hs-identifier hs-var">ColumnMigration</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294801"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldCheck]
</span><a href="#local-6989586621679294799"><span class="hs-identifier hs-var">checks</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span class="hs-comment">-- | Compose a series of @ALTER TABLE@ commands</span><span>
</span><span id="line-160"></span><span class="hs-comment">--</span><span>
</span><span id="line-161"></span><span class="hs-comment">--   Example usage</span><span>
</span><span id="line-162"></span><span class="hs-comment">--</span><span>
</span><span id="line-163"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-164"></span><span class="hs-comment">-- migrate (OldDb oldTbl) = do</span><span>
</span><span id="line-165"></span><span class="hs-comment">--   alterTable oldTbl $ \oldTbl' -&gt;</span><span>
</span><span id="line-166"></span><span class="hs-comment">--     field2 &lt;- renameColumnTo &quot;NewNameForField2&quot; (_field2 oldTbl')</span><span>
</span><span id="line-167"></span><span class="hs-comment">--     dropColumn (_field3 oldTbl')</span><span>
</span><span id="line-168"></span><span class="hs-comment">--     renameTableTo &quot;NewTableName&quot;</span><span>
</span><span id="line-169"></span><span class="hs-comment">--     field4 &lt;- addColumn (field &quot;ANewColumn&quot; smallint notNull (defaultTo_ (val_ 0)))</span><span>
</span><span id="line-170"></span><span class="hs-comment">--     return (NewTable (_field1 oldTbl') field2 field4)</span><span>
</span><span id="line-171"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-172"></span><span class="hs-comment">--</span><span>
</span><span id="line-173"></span><span class="hs-comment">--   The above would result in commands like:</span><span>
</span><span id="line-174"></span><span class="hs-comment">--</span><span>
</span><span id="line-175"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-176"></span><span class="hs-comment">-- ALTER TABLE &lt;oldtable&gt; RENAME COLUMN &lt;field2&gt; TO &quot;NewNameForField2&quot;;</span><span>
</span><span id="line-177"></span><span class="hs-comment">-- ALTER TABLE &lt;oldtable&gt; DROP COLUMN &lt;field3&gt;;</span><span>
</span><span id="line-178"></span><span class="hs-comment">-- ALTER TABLE &lt;oldtable&gt; RENAME TO &quot;NewTableName&quot;;</span><span>
</span><span id="line-179"></span><span class="hs-comment">-- ALTER TABLE &quot;NewTableName&quot; ADD COLUMN &quot;ANewColumn&quot; SMALLINT NOT NULL DEFAULT 0;</span><span>
</span><span id="line-180"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-181"></span><span class="hs-comment">--</span><span>
</span><span id="line-182"></span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#alterTable"><span class="hs-identifier hs-type">alterTable</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679294795"><span class="annot"><a href="#local-6989586621679294795"><span class="hs-identifier hs-type">be</span></a></span></span><span> </span><span id="local-6989586621679294794"><span class="annot"><a href="#local-6989586621679294794"><span class="hs-identifier hs-type">db</span></a></span></span><span> </span><span id="local-6989586621679294793"><span class="annot"><a href="#local-6989586621679294793"><span class="hs-identifier hs-type">db'</span></a></span></span><span> </span><span id="local-6989586621679294792"><span class="annot"><a href="#local-6989586621679294792"><span class="hs-identifier hs-type">table</span></a></span></span><span> </span><span id="local-6989586621679294791"><span class="annot"><a href="#local-6989586621679294791"><span class="hs-identifier hs-type">table'</span></a></span></span><span>
</span><span id="line-183"></span><span>            </span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">Table</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294791"><span class="hs-identifier hs-type">table'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Types.html#BeamMigrateSqlBackend"><span class="hs-identifier hs-type">BeamMigrateSqlBackend</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294795"><span class="hs-identifier hs-type">be</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-184"></span><span>           </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.Types.CheckedEntities.html#CheckedDatabaseEntity"><span class="hs-identifier hs-type">CheckedDatabaseEntity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294795"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294794"><span class="hs-identifier hs-type">db</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">TableEntity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294792"><span class="hs-identifier hs-type">table</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-185"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679294792"><span class="hs-identifier hs-type">table</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#ColumnMigration"><span class="hs-identifier hs-type">ColumnMigration</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#TableMigration"><span class="hs-identifier hs-type">TableMigration</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294795"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679294791"><span class="hs-identifier hs-type">table'</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#ColumnMigration"><span class="hs-identifier hs-type">ColumnMigration</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-186"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.Types.html#Migration"><span class="hs-identifier hs-type">Migration</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294795"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Migrate.Types.CheckedEntities.html#CheckedDatabaseEntity"><span class="hs-identifier hs-type">CheckedDatabaseEntity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294795"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294793"><span class="hs-identifier hs-type">db'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">TableEntity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294791"><span class="hs-identifier hs-type">table'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span id="alterTable"><span class="annot"><span class="annottext">alterTable :: CheckedDatabaseEntity be db (TableEntity table)
-&gt; (table ColumnMigration
    -&gt; TableMigration be (table' ColumnMigration))
-&gt; Migration be (CheckedDatabaseEntity be db' (TableEntity table'))
</span><a href="Database.Beam.Migrate.SQL.Tables.html#alterTable"><span class="hs-identifier hs-var hs-var">alterTable</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Migrate.Types.CheckedEntities.html#CheckedDatabaseEntity"><span class="hs-identifier hs-type">CheckedDatabaseEntity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Migrate.Types.CheckedEntities.html#CheckedDatabaseTable"><span class="hs-identifier hs-type">CheckedDatabaseTable</span></a></span><span> </span><span id="local-6989586621679294790"><span class="annot"><a href="#local-6989586621679294790"><span class="hs-identifier hs-var">dt</span></a></span></span><span> </span><span id="local-6989586621679294789"><span class="annot"><a href="#local-6989586621679294789"><span class="hs-identifier hs-var">tblChecks</span></a></span></span><span> </span><span id="local-6989586621679294788"><span class="annot"><a href="#local-6989586621679294788"><span class="hs-identifier hs-var">tblFieldChecks</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679294787"><span class="annot"><span class="annottext">[SomeDatabasePredicate]
</span><a href="#local-6989586621679294787"><span class="hs-identifier hs-var">entityChecks</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679294786"><span class="annot"><span class="annottext">table ColumnMigration -&gt; TableMigration be (table' ColumnMigration)
</span><a href="#local-6989586621679294786"><span class="hs-identifier hs-var">alterColumns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-188"></span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679294785"><span class="annot"><span class="annottext">initialTbl :: table ColumnMigration
</span><a href="#local-6989586621679294785"><span class="hs-identifier hs-var hs-var">initialTbl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Identity (table ColumnMigration) -&gt; table ColumnMigration
forall a. Identity a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var">runIdentity</span></a></span><span> </span><span class="annot"><span class="annottext">(Identity (table ColumnMigration) -&gt; table ColumnMigration)
-&gt; Identity (table ColumnMigration) -&gt; table ColumnMigration
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-189"></span><span>                  </span><span class="annot"><span class="annottext">(forall a.
 Columnar' (TableField table) a
 -&gt; Columnar' (Const [FieldCheck]) a
 -&gt; Identity (Columnar' ColumnMigration a))
-&gt; table (TableField table)
-&gt; table (Const [FieldCheck])
-&gt; Identity (table ColumnMigration)
forall (table :: (* -&gt; *) -&gt; *) (m :: * -&gt; *) (f :: * -&gt; *)
       (g :: * -&gt; *) (h :: * -&gt; *).
(Beamable table, Applicative m) =&gt;
(forall a. Columnar' f a -&gt; Columnar' g a -&gt; m (Columnar' h a))
-&gt; table f -&gt; table g -&gt; m (table h)
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">zipBeamFieldsM</span></a></span><span>
</span><span id="line-190"></span><span>                      </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679294782"><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">Columnar'</span></a></span><span> </span><span id="local-6989586621679294781"><span class="annot"><a href="#local-6989586621679294781"><span class="hs-identifier hs-var">fd</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">Columnar'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">TableField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294792"><span class="hs-identifier hs-type">table</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679294782"><span class="hs-identifier hs-type">x</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-191"></span><span>                        </span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">Columnar'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Const</span></a></span><span> </span><span id="local-6989586621679294780"><span class="annot"><a href="#local-6989586621679294780"><span class="hs-identifier hs-var">checks</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">Columnar'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Const</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Beam.Migrate.Types.Predicates.html#FieldCheck"><span class="hs-identifier hs-type">FieldCheck</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679294782"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-192"></span><span>                         </span><span class="annot"><span class="annottext">Columnar' ColumnMigration a
-&gt; Identity (Columnar' ColumnMigration a)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Columnar ColumnMigration a -&gt; Columnar' ColumnMigration a
forall (f :: * -&gt; *) a. Columnar f a -&gt; Columnar' f a
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">Columnar'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; [FieldCheck] -&gt; ColumnMigration a
forall a. Text -&gt; [FieldCheck] -&gt; ColumnMigration a
</span><a href="Database.Beam.Migrate.SQL.Tables.html#ColumnMigration"><span class="hs-identifier hs-var">ColumnMigration</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Columnar (TableField table) a
TableField table a
</span><a href="#local-6989586621679294781"><span class="hs-identifier hs-var">fd</span></a></span><span> </span><span class="annot"><span class="annottext">TableField table a
-&gt; Getting Text (TableField table a) Text -&gt; Text
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting Text (TableField table a) Text
forall (table :: (* -&gt; *) -&gt; *) ty.
Lens' (TableField table ty) Text
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">fieldName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[FieldCheck]
</span><a href="#local-6989586621679294780"><span class="hs-identifier hs-var">checks</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-193"></span><span>                               </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">Columnar'</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#ColumnMigration"><span class="hs-identifier hs-type">ColumnMigration</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294782"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-194"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DatabaseEntityDescriptor be (TableEntity table)
-&gt; table (TableField table)
forall be (tbl :: (* -&gt; *) -&gt; *).
DatabaseEntityDescriptor be (TableEntity tbl) -&gt; TableSettings tbl
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var hs-var">dbTableSettings</span></a></span><span> </span><span class="annot"><span class="annottext">DatabaseEntityDescriptor be (TableEntity table)
</span><a href="#local-6989586621679294790"><span class="hs-identifier hs-var">dt</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">table (Const [FieldCheck])
</span><a href="#local-6989586621679294788"><span class="hs-identifier hs-var">tblFieldChecks</span></a></span><span>
</span><span id="line-195"></span><span>
</span><span id="line-196"></span><span>     </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#TableMigration"><span class="hs-identifier hs-type">TableMigration</span></a></span><span> </span><span id="local-6989586621679294777"><span class="annot"><span class="annottext">WriterT
  [BeamSqlBackendAlterTableSyntax be]
  (State (TableName, [TableCheck]))
  (table' ColumnMigration)
</span><a href="#local-6989586621679294777"><span class="hs-identifier hs-var">alterColumns'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">table ColumnMigration -&gt; TableMigration be (table' ColumnMigration)
</span><a href="#local-6989586621679294786"><span class="hs-identifier hs-var">alterColumns</span></a></span><span> </span><span class="annot"><span class="annottext">table ColumnMigration
</span><a href="#local-6989586621679294785"><span class="hs-identifier hs-var">initialTbl</span></a></span><span>
</span><span id="line-197"></span><span>     </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621679294776"><span class="annot"><span class="annottext">table' ColumnMigration
</span><a href="#local-6989586621679294776"><span class="hs-identifier hs-var">newTbl</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679294775"><span class="annot"><span class="annottext">[BeamSqlBackendAlterTableSyntax be]
</span><a href="#local-6989586621679294775"><span class="hs-identifier hs-var">cmds</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">TableName</span></a></span><span> </span><span id="local-6989586621679294774"><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679294774"><span class="hs-identifier hs-var">tblSchema'</span></a></span></span><span> </span><span id="local-6989586621679294773"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294773"><span class="hs-identifier hs-var">tblNm'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679294772"><span class="annot"><span class="annottext">[TableCheck]
</span><a href="#local-6989586621679294772"><span class="hs-identifier hs-var">tblChecks'</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-198"></span><span>       </span><span class="annot"><span class="annottext">State
  (TableName, [TableCheck])
  (table' ColumnMigration, [BeamSqlBackendAlterTableSyntax be])
-&gt; (TableName, [TableCheck])
-&gt; ((table' ColumnMigration, [BeamSqlBackendAlterTableSyntax be]),
    (TableName, [TableCheck]))
forall s a. State s a -&gt; s -&gt; (a, s)
</span><a href="../../../../transformers/html/src"><span class="hs-identifier hs-var">runState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WriterT
  [BeamSqlBackendAlterTableSyntax be]
  (State (TableName, [TableCheck]))
  (table' ColumnMigration)
-&gt; State
     (TableName, [TableCheck])
     (table' ColumnMigration, [BeamSqlBackendAlterTableSyntax be])
forall w (m :: * -&gt; *) a. WriterT w m a -&gt; m (a, w)
</span><a href="../../../../transformers/html/src"><span class="hs-identifier hs-var hs-var">runWriterT</span></a></span><span> </span><span class="annot"><span class="annottext">WriterT
  [BeamSqlBackendAlterTableSyntax be]
  (State (TableName, [TableCheck]))
  (table' ColumnMigration)
</span><a href="#local-6989586621679294777"><span class="hs-identifier hs-var">alterColumns'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-199"></span><span>                </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Maybe Text -&gt; Text -&gt; TableName
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">TableName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DatabaseEntityDescriptor be (TableEntity table) -&gt; Maybe Text
forall be (tbl :: (* -&gt; *) -&gt; *).
DatabaseEntityDescriptor be (TableEntity tbl) -&gt; Maybe Text
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var hs-var">dbTableSchema</span></a></span><span> </span><span class="annot"><span class="annottext">DatabaseEntityDescriptor be (TableEntity table)
</span><a href="#local-6989586621679294790"><span class="hs-identifier hs-var">dt</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DatabaseEntityDescriptor be (TableEntity table) -&gt; Text
forall be (tbl :: (* -&gt; *) -&gt; *).
DatabaseEntityDescriptor be (TableEntity tbl) -&gt; Text
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var hs-var">dbTableCurrentName</span></a></span><span> </span><span class="annot"><span class="annottext">DatabaseEntityDescriptor be (TableEntity table)
</span><a href="#local-6989586621679294790"><span class="hs-identifier hs-var">dt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-200"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[TableCheck]
</span><a href="#local-6989586621679294789"><span class="hs-identifier hs-var">tblChecks</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-201"></span><span>
</span><span id="line-202"></span><span>     </span><span id="local-6989586621679294767"><span class="annot"><span class="annottext">fieldChecks' :: table' (Const [FieldCheck])
</span><a href="#local-6989586621679294767"><span class="hs-identifier hs-var hs-var">fieldChecks'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall a.
 Columnar' ColumnMigration a -&gt; Columnar' (Const [FieldCheck]) a)
-&gt; table' ColumnMigration -&gt; table' (Const [FieldCheck])
forall (table :: (* -&gt; *) -&gt; *) (f :: * -&gt; *) (g :: * -&gt; *).
Beamable table =&gt;
(forall a. Columnar' f a -&gt; Columnar' g a) -&gt; table f -&gt; table g
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">changeBeamRep</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679294766"><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">Columnar'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#ColumnMigration"><span class="hs-identifier hs-type">ColumnMigration</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679294765"><span class="annot"><a href="#local-6989586621679294765"><span class="hs-identifier hs-var">checks</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">Columnar'</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#ColumnMigration"><span class="hs-identifier hs-type">ColumnMigration</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294766"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-203"></span><span>                                     </span><span class="annot"><span class="annottext">Columnar (Const [FieldCheck]) a -&gt; Columnar' (Const [FieldCheck]) a
forall (f :: * -&gt; *) a. Columnar f a -&gt; Columnar' f a
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">Columnar'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[FieldCheck] -&gt; Const [FieldCheck] a
forall k a (b :: k). a -&gt; Const a b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Const</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldCheck]
</span><a href="#local-6989586621679294765"><span class="hs-identifier hs-var">checks</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">Columnar'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Const</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Beam.Migrate.Types.Predicates.html#FieldCheck"><span class="hs-identifier hs-type">FieldCheck</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679294766"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-204"></span><span>                                  </span><span class="annot"><span class="annottext">table' ColumnMigration
</span><a href="#local-6989586621679294776"><span class="hs-identifier hs-var">newTbl</span></a></span><span>
</span><span id="line-205"></span><span>
</span><span id="line-206"></span><span>     </span><span class="annot"><a href="#local-6989586621679294764"><span class="hs-identifier hs-type">tbl'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">TableSettings</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294791"><span class="hs-identifier hs-type">table'</span></a></span><span>
</span><span id="line-207"></span><span>     </span><span id="local-6989586621679294764"><span class="annot"><span class="annottext">tbl' :: TableSettings table'
</span><a href="#local-6989586621679294764"><span class="hs-identifier hs-var hs-var">tbl'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall a.
 Columnar' ColumnMigration a -&gt; Columnar' (TableField table') a)
-&gt; table' ColumnMigration -&gt; TableSettings table'
forall (table :: (* -&gt; *) -&gt; *) (f :: * -&gt; *) (g :: * -&gt; *).
Beamable table =&gt;
(forall a. Columnar' f a -&gt; Columnar' g a) -&gt; table f -&gt; table g
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">changeBeamRep</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679294763"><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">Columnar'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#ColumnMigration"><span class="hs-identifier hs-type">ColumnMigration</span></a></span><span> </span><span id="local-6989586621679294762"><span class="annot"><a href="#local-6989586621679294762"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">Columnar'</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#ColumnMigration"><span class="hs-identifier hs-type">ColumnMigration</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294763"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-208"></span><span>                              </span><span class="annot"><span class="annottext">Columnar (TableField table') a -&gt; Columnar' (TableField table') a
forall (f :: * -&gt; *) a. Columnar f a -&gt; Columnar' f a
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">Columnar'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmpty Text -&gt; Text -&gt; TableField table' a
forall (table :: (* -&gt; *) -&gt; *) ty.
NonEmpty Text -&gt; Text -&gt; TableField table ty
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">TableField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; NonEmpty Text
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294762"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294762"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">Columnar'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">TableField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294791"><span class="hs-identifier hs-type">table'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679294763"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-209"></span><span>                          </span><span class="annot"><span class="annottext">table' ColumnMigration
</span><a href="#local-6989586621679294776"><span class="hs-identifier hs-var">newTbl</span></a></span><span>
</span><span id="line-210"></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">[BeamSqlBackendAlterTableSyntax be]
-&gt; (BeamSqlBackendAlterTableSyntax be -&gt; F (MigrationF be) ())
-&gt; F (MigrationF be) ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">forM_</span></a></span><span> </span><span class="annot"><span class="annottext">[BeamSqlBackendAlterTableSyntax be]
</span><a href="#local-6989586621679294775"><span class="hs-identifier hs-var">cmds</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679294760"><span class="annot"><span class="annottext">BeamSqlBackendAlterTableSyntax be
</span><a href="#local-6989586621679294760"><span class="hs-identifier hs-var">cmd</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BeamSqlBackendSyntax be
-&gt; Maybe (BeamSqlBackendSyntax be) -&gt; F (MigrationF be) ()
forall be.
BeamSqlBackendSyntax be
-&gt; Maybe (BeamSqlBackendSyntax be) -&gt; Migration be ()
</span><a href="Database.Beam.Migrate.Types.html#upDown"><span class="hs-identifier hs-var">upDown</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BeamSqlBackendAlterTableSyntax be -&gt; BeamSqlBackendSyntax be
forall syntax.
IsSql92DdlCommandSyntax syntax =&gt;
Sql92DdlCommandAlterTableSyntax syntax -&gt; syntax
</span><a href="Database.Beam.Migrate.SQL.SQL92.html#alterTableCmd"><span class="hs-identifier hs-var">alterTableCmd</span></a></span><span> </span><span class="annot"><span class="annottext">BeamSqlBackendAlterTableSyntax be
</span><a href="#local-6989586621679294760"><span class="hs-identifier hs-var">cmd</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (BeamSqlBackendSyntax be)
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">F (MigrationF be) ()
-&gt; Migration be (CheckedDatabaseEntity be db' (TableEntity table'))
-&gt; Migration be (CheckedDatabaseEntity be db' (TableEntity table'))
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;</span></a></span><span>
</span><span id="line-211"></span><span>    </span><span class="annot"><span class="annottext">CheckedDatabaseEntity be db' (TableEntity table')
-&gt; Migration be (CheckedDatabaseEntity be db' (TableEntity table'))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CheckedDatabaseEntityDescriptor be (TableEntity table')
-&gt; [SomeDatabasePredicate]
-&gt; CheckedDatabaseEntity be db' (TableEntity table')
forall be entityType (db :: (* -&gt; *) -&gt; *).
IsCheckedDatabaseEntity be entityType =&gt;
CheckedDatabaseEntityDescriptor be entityType
-&gt; [SomeDatabasePredicate]
-&gt; CheckedDatabaseEntity be db entityType
</span><a href="Database.Beam.Migrate.Types.CheckedEntities.html#CheckedDatabaseEntity"><span class="hs-identifier hs-var">CheckedDatabaseEntity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DatabaseEntityDescriptor be (TableEntity table')
-&gt; [TableCheck]
-&gt; table' (Const [FieldCheck])
-&gt; CheckedDatabaseEntityDescriptor be (TableEntity table')
forall (tbl :: (* -&gt; *) -&gt; *) be.
Table tbl =&gt;
DatabaseEntityDescriptor be (TableEntity tbl)
-&gt; [TableCheck]
-&gt; tbl (Const [FieldCheck])
-&gt; CheckedDatabaseEntityDescriptor be (TableEntity tbl)
</span><a href="Database.Beam.Migrate.Types.CheckedEntities.html#CheckedDatabaseTable"><span class="hs-identifier hs-var">CheckedDatabaseTable</span></a></span><span>
</span><span id="line-212"></span><span>                                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Text
-&gt; Text
-&gt; Text
-&gt; TableSettings table'
-&gt; DatabaseEntityDescriptor be (TableEntity table')
forall (tbl :: (* -&gt; *) -&gt; *) be.
Table tbl =&gt;
Maybe Text
-&gt; Text
-&gt; Text
-&gt; TableSettings tbl
-&gt; DatabaseEntityDescriptor be (TableEntity tbl)
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">DatabaseTable</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679294774"><span class="hs-identifier hs-var">tblSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DatabaseEntityDescriptor be (TableEntity table) -&gt; Text
forall be (tbl :: (* -&gt; *) -&gt; *).
DatabaseEntityDescriptor be (TableEntity tbl) -&gt; Text
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var hs-var">dbTableOrigName</span></a></span><span> </span><span class="annot"><span class="annottext">DatabaseEntityDescriptor be (TableEntity table)
</span><a href="#local-6989586621679294790"><span class="hs-identifier hs-var">dt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-213"></span><span>                                     </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294773"><span class="hs-identifier hs-var">tblNm'</span></a></span><span> </span><span class="annot"><span class="annottext">TableSettings table'
</span><a href="#local-6989586621679294764"><span class="hs-identifier hs-var">tbl'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-214"></span><span>                                   </span><span class="annot"><span class="annottext">[TableCheck]
</span><a href="#local-6989586621679294772"><span class="hs-identifier hs-var">tblChecks'</span></a></span><span> </span><span class="annot"><span class="annottext">table' (Const [FieldCheck])
</span><a href="#local-6989586621679294767"><span class="hs-identifier hs-var">fieldChecks'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[SomeDatabasePredicate]
</span><a href="#local-6989586621679294787"><span class="hs-identifier hs-var">entityChecks</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-215"></span><span>
</span><span id="line-216"></span><span class="hs-comment">-- * Fields</span><span>
</span><span id="line-217"></span><span>
</span><span id="line-218"></span><span class="hs-comment">-- | Build a schema for a field. This function takes the name and type of the</span><span>
</span><span id="line-219"></span><span class="hs-comment">-- field and a variable number of modifiers, such as constraints and default</span><span>
</span><span id="line-220"></span><span class="hs-comment">-- values. GHC will complain at you if the modifiers do not make sense. For</span><span>
</span><span id="line-221"></span><span class="hs-comment">-- example, you cannot apply the 'notNull' constraint to a column with a 'Maybe'</span><span>
</span><span id="line-222"></span><span class="hs-comment">-- type.</span><span>
</span><span id="line-223"></span><span class="hs-comment">--</span><span>
</span><span id="line-224"></span><span class="hs-comment">-- Example of creating a table named &quot;Employee&quot; with three columns: &quot;FirstName&quot;,</span><span>
</span><span id="line-225"></span><span class="hs-comment">-- &quot;LastName&quot;, and &quot;HireDate&quot;</span><span>
</span><span id="line-226"></span><span class="hs-comment">--</span><span>
</span><span id="line-227"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-228"></span><span class="hs-comment">-- data Employee f =</span><span>
</span><span id="line-229"></span><span class="hs-comment">--   Employee { _firstName :: C f Text</span><span>
</span><span id="line-230"></span><span class="hs-comment">--            , _lastName  :: C f Text</span><span>
</span><span id="line-231"></span><span class="hs-comment">--            , _hireDate  :: C f (Maybe LocalTime)</span><span>
</span><span id="line-232"></span><span class="hs-comment">--            } deriving Generic</span><span>
</span><span id="line-233"></span><span class="hs-comment">-- instance Beamable Employee</span><span>
</span><span id="line-234"></span><span class="hs-comment">--</span><span>
</span><span id="line-235"></span><span class="hs-comment">-- instance Table Employee where</span><span>
</span><span id="line-236"></span><span class="hs-comment">--    data PrimaryKey Employee f = EmployeeKey (C f Text) (C f Text) deriving Generic</span><span>
</span><span id="line-237"></span><span class="hs-comment">--    primaryKey = EmployeeKey \&lt;$\&gt; _firstName \&lt;*\&gt; _lastName</span><span>
</span><span id="line-238"></span><span class="hs-comment">--</span><span>
</span><span id="line-239"></span><span class="hs-comment">-- instance Beamable PrimaryKey Employee f</span><span>
</span><span id="line-240"></span><span class="hs-comment">--</span><span>
</span><span id="line-241"></span><span class="hs-comment">-- data EmployeeDb entity</span><span>
</span><span id="line-242"></span><span class="hs-comment">--     = EmployeeDb { _employees :: entity (TableEntity Employee) }</span><span>
</span><span id="line-243"></span><span class="hs-comment">--     deriving Generic</span><span>
</span><span id="line-244"></span><span class="hs-comment">-- instance Database EmployeeDb</span><span>
</span><span id="line-245"></span><span class="hs-comment">--</span><span>
</span><span id="line-246"></span><span class="hs-comment">-- migration :: IsSql92DdlCommandSyntax syntax =&gt; Migration syntax () EmployeeDb</span><span>
</span><span id="line-247"></span><span class="hs-comment">-- migration = do</span><span>
</span><span id="line-248"></span><span class="hs-comment">--   employees &lt;- createTable &quot;EmployeesTable&quot;</span><span>
</span><span id="line-249"></span><span class="hs-comment">--                  (Employee (field &quot;FirstNameField&quot; (varchar (Just 15)) notNull)</span><span>
</span><span id="line-250"></span><span class="hs-comment">--                            (field &quot;last_name&quot; (varchar Nothing) notNull (defaultTo_ (val_ &quot;Smith&quot;)))</span><span>
</span><span id="line-251"></span><span class="hs-comment">--                            (field &quot;hiredDate&quot; (maybeType timestamp)))</span><span>
</span><span id="line-252"></span><span class="hs-comment">--   return (EmployeeDb employees)</span><span>
</span><span id="line-253"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-254"></span><span id="local-6989586621679294755"><span id="local-6989586621679294756"><span id="local-6989586621679294757"><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#field"><span class="hs-identifier hs-type">field</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Types.html#BeamMigrateSqlBackend"><span class="hs-identifier hs-type">BeamMigrateSqlBackend</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294757"><span class="hs-identifier hs-type">be</span></a></span><span>
</span><span id="line-255"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#FieldReturnType"><span class="hs-identifier hs-type">FieldReturnType</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">False</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">False</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294757"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294756"><span class="hs-identifier hs-type">resTy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294755"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-256"></span><span>      </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">DataType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294757"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294756"><span class="hs-identifier hs-type">resTy</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679294755"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-257"></span><span id="field"><span class="annot"><span class="annottext">field :: Text -&gt; DataType be resTy -&gt; a
</span><a href="Database.Beam.Migrate.SQL.Tables.html#field"><span class="hs-identifier hs-var hs-var">field</span></a></span></span><span> </span><span id="local-6989586621679294754"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294754"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">DataType</span></a></span><span> </span><span id="local-6989586621679294752"><span class="annot"><span class="annottext">BeamSqlBackendCastTargetSyntax be
</span><a href="#local-6989586621679294752"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy 'False
-&gt; Proxy 'False
-&gt; Text
-&gt; BeamMigrateSqlBackendDataTypeSyntax be
-&gt; Maybe (BeamSqlBackendExpressionSyntax be)
-&gt; Maybe Text
-&gt; [BeamSqlBackendColumnConstraintDefinitionSyntax be]
-&gt; a
forall (defaultGiven :: Bool) (collationGiven :: Bool) be resTy a.
(FieldReturnType defaultGiven collationGiven be resTy a,
 BeamMigrateSqlBackend be) =&gt;
Proxy defaultGiven
-&gt; Proxy collationGiven
-&gt; Text
-&gt; BeamMigrateSqlBackendDataTypeSyntax be
-&gt; Maybe (BeamSqlBackendExpressionSyntax be)
-&gt; Maybe Text
-&gt; [BeamSqlBackendColumnConstraintDefinitionSyntax be]
-&gt; a
</span><a href="Database.Beam.Migrate.SQL.Tables.html#field%27"><span class="hs-identifier hs-var">field'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy 'False
forall k (t :: k). Proxy t
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">False</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy 'False
forall k (t :: k). Proxy t
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">False</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294754"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">BeamSqlBackendCastTargetSyntax be
BeamMigrateSqlBackendDataTypeSyntax be
</span><a href="#local-6989586621679294752"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (BeamSqlBackendExpressionSyntax be)
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-258"></span><span>
</span><span id="line-259"></span><span class="hs-comment">-- ** Default values</span><span>
</span><span id="line-260"></span><span>
</span><span id="line-261"></span><span class="hs-comment">-- | Represents the default value of a field with a given column schema syntax and type</span><span>
</span><span id="line-262"></span><span class="hs-keyword">newtype</span><span> </span><span id="DefaultValue"><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#DefaultValue"><span class="hs-identifier hs-var">DefaultValue</span></a></span></span><span> </span><span id="local-6989586621679294994"><span class="annot"><a href="#local-6989586621679294994"><span class="hs-identifier hs-type">be</span></a></span></span><span> </span><span id="local-6989586621679294993"><span class="annot"><a href="#local-6989586621679294993"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DefaultValue"><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#DefaultValue"><span class="hs-identifier hs-var">DefaultValue</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">BeamSqlBackendExpressionSyntax</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294994"><span class="hs-identifier hs-type">be</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-263"></span><span>
</span><span id="line-264"></span><span class="hs-comment">-- | Build a 'DefaultValue' from a 'QExpr'. GHC will complain if you supply more</span><span>
</span><span id="line-265"></span><span class="hs-comment">-- than one default value.</span><span>
</span><span id="line-266"></span><span id="local-6989586621679294747"><span id="local-6989586621679294748"><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#defaultTo_"><span class="hs-identifier hs-type">defaultTo_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Types.html#BeamMigrateSqlBackend"><span class="hs-identifier hs-type">BeamMigrateSqlBackend</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294748"><span class="hs-identifier hs-type">be</span></a></span><span>
</span><span id="line-267"></span><span>           </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679294998"><span class="annot"><a href="#local-6989586621679294998"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">QExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294748"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294998"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294747"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-268"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#DefaultValue"><span class="hs-identifier hs-type">DefaultValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294748"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294747"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-269"></span><span id="defaultTo_"><span class="annot"><span class="annottext">defaultTo_ :: (forall s. QExpr be s a) -&gt; DefaultValue be a
</span><a href="Database.Beam.Migrate.SQL.Tables.html#defaultTo_"><span class="hs-identifier hs-var hs-var">defaultTo_</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">QExpr</span></a></span><span> </span><span id="local-6989586621679294745"><span class="annot"><a href="#local-6989586621679294745"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-270"></span><span>  </span><span class="annot"><span class="annottext">BeamSqlBackendExpressionSyntax be -&gt; DefaultValue be a
forall be a. BeamSqlBackendExpressionSyntax be -&gt; DefaultValue be a
</span><a href="Database.Beam.Migrate.SQL.Tables.html#DefaultValue"><span class="hs-identifier hs-var">DefaultValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; BeamSqlBackendExpressionSyntax be
</span><a href="#local-6989586621679294745"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;t&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-271"></span><span>
</span><span id="line-272"></span><span class="hs-comment">-- ** Constraints</span><span>
</span><span id="line-273"></span><span>
</span><span id="line-274"></span><span class="hs-comment">-- | Represents a constraint in the given column schema syntax</span><span>
</span><span id="line-275"></span><span class="hs-keyword">newtype</span><span> </span><span id="Constraint"><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#Constraint"><span class="hs-identifier hs-var">Constraint</span></a></span></span><span> </span><span id="local-6989586621679294987"><span class="annot"><a href="#local-6989586621679294987"><span class="hs-identifier hs-type">be</span></a></span></span><span>
</span><span id="line-276"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="Constraint"><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#Constraint"><span class="hs-identifier hs-var">Constraint</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Migrate.SQL.Types.html#BeamSqlBackendConstraintSyntax"><span class="hs-identifier hs-type">BeamSqlBackendConstraintSyntax</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294987"><span class="hs-identifier hs-type">be</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-277"></span><span>
</span><span id="line-278"></span><span class="hs-keyword">newtype</span><span> </span><span id="NotNullConstraint"><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#NotNullConstraint"><span class="hs-identifier hs-var">NotNullConstraint</span></a></span></span><span> </span><span id="local-6989586621679294989"><span class="annot"><a href="#local-6989586621679294989"><span class="hs-identifier hs-type">be</span></a></span></span><span>
</span><span id="line-279"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="NotNullConstraint"><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#NotNullConstraint"><span class="hs-identifier hs-var">NotNullConstraint</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#Constraint"><span class="hs-identifier hs-type">Constraint</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294989"><span class="hs-identifier hs-type">be</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-280"></span><span>
</span><span id="line-281"></span><span class="hs-comment">-- | The SQL92 @NOT NULL@ constraint</span><span>
</span><span id="line-282"></span><span id="local-6989586621679294742"><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#notNull"><span class="hs-identifier hs-type">notNull</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Types.html#BeamMigrateSqlBackend"><span class="hs-identifier hs-type">BeamMigrateSqlBackend</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294742"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#NotNullConstraint"><span class="hs-identifier hs-type">NotNullConstraint</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294742"><span class="hs-identifier hs-type">be</span></a></span></span><span>
</span><span id="line-283"></span><span id="notNull"><span class="annot"><span class="annottext">notNull :: NotNullConstraint be
</span><a href="Database.Beam.Migrate.SQL.Tables.html#notNull"><span class="hs-identifier hs-var hs-var">notNull</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Constraint be -&gt; NotNullConstraint be
forall be. Constraint be -&gt; NotNullConstraint be
</span><a href="Database.Beam.Migrate.SQL.Tables.html#NotNullConstraint"><span class="hs-identifier hs-var">NotNullConstraint</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BeamSqlBackendConstraintSyntax be -&gt; Constraint be
forall be. BeamSqlBackendConstraintSyntax be -&gt; Constraint be
</span><a href="Database.Beam.Migrate.SQL.Tables.html#Constraint"><span class="hs-identifier hs-var">Constraint</span></a></span><span> </span><span class="annot"><span class="annottext">BeamSqlBackendConstraintSyntax be
forall constraint.
IsSql92ColumnConstraintSyntax constraint =&gt;
constraint
</span><a href="Database.Beam.Migrate.SQL.SQL92.html#notNullConstraintSyntax"><span class="hs-identifier hs-var">notNullConstraintSyntax</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-284"></span><span>
</span><span id="line-285"></span><span class="hs-comment">-- | SQL @UNIQUE@ constraint</span><span>
</span><span id="line-286"></span><span id="local-6989586621679294740"><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#unique"><span class="hs-identifier hs-type">unique</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Types.html#BeamMigrateSqlBackend"><span class="hs-identifier hs-type">BeamMigrateSqlBackend</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294740"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#Constraint"><span class="hs-identifier hs-type">Constraint</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294740"><span class="hs-identifier hs-type">be</span></a></span></span><span>
</span><span id="line-287"></span><span id="unique"><span class="annot"><span class="annottext">unique :: Constraint be
</span><a href="Database.Beam.Migrate.SQL.Tables.html#unique"><span class="hs-identifier hs-var hs-var">unique</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BeamSqlBackendConstraintSyntax be -&gt; Constraint be
forall be. BeamSqlBackendConstraintSyntax be -&gt; Constraint be
</span><a href="Database.Beam.Migrate.SQL.Tables.html#Constraint"><span class="hs-identifier hs-var">Constraint</span></a></span><span> </span><span class="annot"><span class="annottext">BeamSqlBackendConstraintSyntax be
forall constraint.
IsSql92ColumnConstraintSyntax constraint =&gt;
constraint
</span><a href="Database.Beam.Migrate.SQL.SQL92.html#uniqueColumnConstraintSyntax"><span class="hs-identifier hs-var">uniqueColumnConstraintSyntax</span></a></span><span>
</span><span id="line-288"></span><span>
</span><span id="line-289"></span><span class="hs-comment">-- ** 'field' variable arity classes</span><span>
</span><span id="line-290"></span><span>
</span><span id="line-291"></span><span class="hs-keyword">class</span><span> </span><span id="FieldReturnType"><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#FieldReturnType"><span class="hs-identifier hs-var">FieldReturnType</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679295008"><span class="annot"><a href="#local-6989586621679295008"><span class="hs-identifier hs-type">defaultGiven</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679295007"><span class="annot"><a href="#local-6989586621679295007"><span class="hs-identifier hs-type">collationGiven</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679295006"><span class="annot"><a href="#local-6989586621679295006"><span class="hs-identifier hs-type">be</span></a></span></span><span> </span><span id="local-6989586621679295005"><span class="annot"><a href="#local-6989586621679295005"><span class="hs-identifier hs-type">resTy</span></a></span></span><span> </span><span id="local-6989586621679295004"><span class="annot"><a href="#local-6989586621679295004"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="#local-6989586621679295004"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679295006"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679295005"><span class="hs-identifier hs-type">resTy</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-292"></span><span>  </span><span id="field%27"><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#field%27"><span class="hs-identifier hs-type">field'</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Types.html#BeamMigrateSqlBackend"><span class="hs-identifier hs-type">BeamMigrateSqlBackend</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679295006"><span class="hs-identifier hs-type">be</span></a></span><span>
</span><span id="line-293"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679295008"><span class="hs-identifier hs-type">defaultGiven</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679295007"><span class="hs-identifier hs-type">collationGiven</span></a></span><span>
</span><span id="line-294"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-295"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Types.html#BeamMigrateSqlBackendDataTypeSyntax"><span class="hs-identifier hs-type">BeamMigrateSqlBackendDataTypeSyntax</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679295006"><span class="hs-identifier hs-type">be</span></a></span><span>
</span><span id="line-296"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">BeamSqlBackendExpressionSyntax</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679295006"><span class="hs-identifier hs-type">be</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-297"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Types.html#BeamSqlBackendColumnConstraintDefinitionSyntax"><span class="hs-identifier hs-type">BeamSqlBackendColumnConstraintDefinitionSyntax</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679295006"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-298"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679295004"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-299"></span><span>
</span><span id="line-300"></span><span id="local-6989586621679294735"><span id="local-6989586621679294736"><span id="local-6989586621679294737"><span id="local-6989586621679294738"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#FieldReturnType"><span class="hs-identifier hs-type">FieldReturnType</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">True</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294738"><span class="hs-identifier hs-type">collationGiven</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294737"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294736"><span class="hs-identifier hs-type">resTy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294735"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-301"></span><span>  </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#FieldReturnType"><span class="hs-identifier hs-type">FieldReturnType</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">False</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294738"><span class="hs-identifier hs-type">collationGiven</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294737"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294736"><span class="hs-identifier hs-type">resTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#DefaultValue"><span class="hs-identifier hs-type">DefaultValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294737"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294736"><span class="hs-identifier hs-type">resTy</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679294735"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-302"></span><span>  </span><span id="local-6989586621679294732"><span class="annot"><span class="annottext">field' :: Proxy 'False
-&gt; Proxy collationGiven
-&gt; Text
-&gt; BeamMigrateSqlBackendDataTypeSyntax be
-&gt; Maybe (BeamSqlBackendExpressionSyntax be)
-&gt; Maybe Text
-&gt; [BeamSqlBackendColumnConstraintDefinitionSyntax be]
-&gt; DefaultValue be resTy
-&gt; a
</span><a href="#local-6989586621679294732"><span class="hs-identifier hs-var hs-var hs-var hs-var">field'</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy 'False
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679294731"><span class="annot"><span class="annottext">Proxy collationGiven
</span><a href="#local-6989586621679294731"><span class="hs-identifier hs-var">collationGiven</span></a></span></span><span> </span><span id="local-6989586621679294730"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294730"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span id="local-6989586621679294729"><span class="annot"><span class="annottext">BeamMigrateSqlBackendDataTypeSyntax be
</span><a href="#local-6989586621679294729"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe (BeamSqlBackendExpressionSyntax be)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679294728"><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679294728"><span class="hs-identifier hs-var">collation</span></a></span></span><span> </span><span id="local-6989586621679294727"><span class="annot"><span class="annottext">[BeamSqlBackendColumnConstraintDefinitionSyntax be]
</span><a href="#local-6989586621679294727"><span class="hs-identifier hs-var">constraints</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#DefaultValue"><span class="hs-identifier hs-type">DefaultValue</span></a></span><span> </span><span id="local-6989586621679294726"><span class="annot"><span class="annottext">BeamSqlBackendExpressionSyntax be
</span><a href="#local-6989586621679294726"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-303"></span><span>    </span><span class="annot"><span class="annottext">Proxy 'True
-&gt; Proxy collationGiven
-&gt; Text
-&gt; BeamMigrateSqlBackendDataTypeSyntax be
-&gt; Maybe (BeamSqlBackendExpressionSyntax be)
-&gt; Maybe Text
-&gt; [BeamSqlBackendColumnConstraintDefinitionSyntax be]
-&gt; a
forall (defaultGiven :: Bool) (collationGiven :: Bool) be resTy a.
(FieldReturnType defaultGiven collationGiven be resTy a,
 BeamMigrateSqlBackend be) =&gt;
Proxy defaultGiven
-&gt; Proxy collationGiven
-&gt; Text
-&gt; BeamMigrateSqlBackendDataTypeSyntax be
-&gt; Maybe (BeamSqlBackendExpressionSyntax be)
-&gt; Maybe Text
-&gt; [BeamSqlBackendColumnConstraintDefinitionSyntax be]
-&gt; a
</span><a href="Database.Beam.Migrate.SQL.Tables.html#field%27"><span class="hs-identifier hs-var">field'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy 'True
forall k (t :: k). Proxy t
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">True</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Proxy collationGiven
</span><a href="#local-6989586621679294731"><span class="hs-identifier hs-var">collationGiven</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294730"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="annot"><span class="annottext">BeamMigrateSqlBackendDataTypeSyntax be
</span><a href="#local-6989586621679294729"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Sql92UpdateExpressionSyntax
  (Sql92UpdateSyntax (BeamSqlBackendSyntax be))
-&gt; Maybe
     (Sql92UpdateExpressionSyntax
        (Sql92UpdateSyntax (BeamSqlBackendSyntax be)))
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">BeamSqlBackendExpressionSyntax be
Sql92UpdateExpressionSyntax
  (Sql92UpdateSyntax (BeamSqlBackendSyntax be))
</span><a href="#local-6989586621679294726"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679294728"><span class="hs-identifier hs-var">collation</span></a></span><span> </span><span class="annot"><span class="annottext">[BeamSqlBackendColumnConstraintDefinitionSyntax be]
</span><a href="#local-6989586621679294727"><span class="hs-identifier hs-var">constraints</span></a></span></span></span></span></span><span>
</span><span id="line-304"></span><span>
</span><span id="line-305"></span><span id="local-6989586621679294721"><span id="local-6989586621679294722"><span id="local-6989586621679294723"><span id="local-6989586621679294724"><span id="local-6989586621679294725"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#FieldReturnType"><span class="hs-identifier hs-type">FieldReturnType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294725"><span class="hs-identifier hs-type">defaultGiven</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294724"><span class="hs-identifier hs-type">collationGiven</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294723"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294722"><span class="hs-identifier hs-type">resTy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294721"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-306"></span><span>  </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#FieldReturnType"><span class="hs-identifier hs-type">FieldReturnType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294725"><span class="hs-identifier hs-type">defaultGiven</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294724"><span class="hs-identifier hs-type">collationGiven</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294723"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294722"><span class="hs-identifier hs-type">resTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#Constraint"><span class="hs-identifier hs-type">Constraint</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294723"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679294721"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-307"></span><span>  </span><span id="local-6989586621679294719"><span class="annot"><span class="annottext">field' :: Proxy defaultGiven
-&gt; Proxy collationGiven
-&gt; Text
-&gt; BeamMigrateSqlBackendDataTypeSyntax be
-&gt; Maybe (BeamSqlBackendExpressionSyntax be)
-&gt; Maybe Text
-&gt; [BeamSqlBackendColumnConstraintDefinitionSyntax be]
-&gt; Constraint be
-&gt; a
</span><a href="#local-6989586621679294719"><span class="hs-identifier hs-var hs-var hs-var hs-var">field'</span></a></span></span><span> </span><span id="local-6989586621679294718"><span class="annot"><span class="annottext">Proxy defaultGiven
</span><a href="#local-6989586621679294718"><span class="hs-identifier hs-var">defaultGiven</span></a></span></span><span> </span><span id="local-6989586621679294717"><span class="annot"><span class="annottext">Proxy collationGiven
</span><a href="#local-6989586621679294717"><span class="hs-identifier hs-var">collationGiven</span></a></span></span><span> </span><span id="local-6989586621679294716"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294716"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span id="local-6989586621679294715"><span class="annot"><span class="annottext">BeamMigrateSqlBackendDataTypeSyntax be
</span><a href="#local-6989586621679294715"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621679294714"><span class="annot"><span class="annottext">Maybe (BeamSqlBackendExpressionSyntax be)
</span><a href="#local-6989586621679294714"><span class="hs-identifier hs-var">default_'</span></a></span></span><span> </span><span id="local-6989586621679294713"><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679294713"><span class="hs-identifier hs-var">collation</span></a></span></span><span> </span><span id="local-6989586621679294712"><span class="annot"><span class="annottext">[BeamSqlBackendColumnConstraintDefinitionSyntax be]
</span><a href="#local-6989586621679294712"><span class="hs-identifier hs-var">constraints</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#Constraint"><span class="hs-identifier hs-type">Constraint</span></a></span><span> </span><span id="local-6989586621679294711"><span class="annot"><span class="annottext">BeamSqlBackendConstraintSyntax be
</span><a href="#local-6989586621679294711"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-308"></span><span>    </span><span class="annot"><span class="annottext">Proxy defaultGiven
-&gt; Proxy collationGiven
-&gt; Text
-&gt; BeamMigrateSqlBackendDataTypeSyntax be
-&gt; Maybe (BeamSqlBackendExpressionSyntax be)
-&gt; Maybe Text
-&gt; [BeamSqlBackendColumnConstraintDefinitionSyntax be]
-&gt; a
forall (defaultGiven :: Bool) (collationGiven :: Bool) be resTy a.
(FieldReturnType defaultGiven collationGiven be resTy a,
 BeamMigrateSqlBackend be) =&gt;
Proxy defaultGiven
-&gt; Proxy collationGiven
-&gt; Text
-&gt; BeamMigrateSqlBackendDataTypeSyntax be
-&gt; Maybe (BeamSqlBackendExpressionSyntax be)
-&gt; Maybe Text
-&gt; [BeamSqlBackendColumnConstraintDefinitionSyntax be]
-&gt; a
</span><a href="Database.Beam.Migrate.SQL.Tables.html#field%27"><span class="hs-identifier hs-var">field'</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy defaultGiven
</span><a href="#local-6989586621679294718"><span class="hs-identifier hs-var">defaultGiven</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy collationGiven
</span><a href="#local-6989586621679294717"><span class="hs-identifier hs-var">collationGiven</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294716"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="annot"><span class="annottext">BeamMigrateSqlBackendDataTypeSyntax be
</span><a href="#local-6989586621679294715"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (BeamSqlBackendExpressionSyntax be)
</span><a href="#local-6989586621679294714"><span class="hs-identifier hs-var">default_'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679294713"><span class="hs-identifier hs-var">collation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[BeamSqlBackendColumnConstraintDefinitionSyntax be]
</span><a href="#local-6989586621679294712"><span class="hs-identifier hs-var">constraints</span></a></span><span> </span><span class="annot"><span class="annottext">[BeamSqlBackendColumnConstraintDefinitionSyntax be]
-&gt; [BeamSqlBackendColumnConstraintDefinitionSyntax be]
-&gt; [BeamSqlBackendColumnConstraintDefinitionSyntax be]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Maybe Text
-&gt; BeamSqlBackendConstraintSyntax be
-&gt; Maybe
     (Sql92ColumnConstraintDefinitionAttributesSyntax
        (BeamSqlBackendColumnConstraintDefinitionSyntax be))
-&gt; BeamSqlBackendColumnConstraintDefinitionSyntax be
forall constraint.
IsSql92ColumnConstraintDefinitionSyntax constraint =&gt;
Maybe Text
-&gt; Sql92ColumnConstraintDefinitionConstraintSyntax constraint
-&gt; Maybe
     (Sql92ColumnConstraintDefinitionAttributesSyntax constraint)
-&gt; constraint
</span><a href="Database.Beam.Migrate.SQL.SQL92.html#constraintDefinitionSyntax"><span class="hs-identifier hs-var">constraintDefinitionSyntax</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">BeamSqlBackendConstraintSyntax be
</span><a href="#local-6989586621679294711"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe
  (Sql92ColumnConstraintDefinitionAttributesSyntax
     (BeamSqlBackendColumnConstraintDefinitionSyntax be))
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-309"></span><span>
</span><span id="line-310"></span><span id="local-6989586621679294705"><span id="local-6989586621679294706"><span id="local-6989586621679294707"><span id="local-6989586621679294708"><span id="local-6989586621679294709"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#FieldReturnType"><span class="hs-identifier hs-type">FieldReturnType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294709"><span class="hs-identifier hs-type">defaultGiven</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294708"><span class="hs-identifier hs-type">collationGiven</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294707"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294706"><span class="hs-identifier hs-type">resTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#Constraint"><span class="hs-identifier hs-type">Constraint</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294707"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679294705"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-311"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#IsNotNull"><span class="hs-identifier hs-type">IsNotNull</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294706"><span class="hs-identifier hs-type">resTy</span></a></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-312"></span><span>  </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#FieldReturnType"><span class="hs-identifier hs-type">FieldReturnType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294709"><span class="hs-identifier hs-type">defaultGiven</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294708"><span class="hs-identifier hs-type">collationGiven</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294707"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294706"><span class="hs-identifier hs-type">resTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#NotNullConstraint"><span class="hs-identifier hs-type">NotNullConstraint</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294707"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679294705"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-313"></span><span>  </span><span id="local-6989586621679294703"><span class="annot"><span class="annottext">field' :: Proxy defaultGiven
-&gt; Proxy collationGiven
-&gt; Text
-&gt; BeamMigrateSqlBackendDataTypeSyntax be
-&gt; Maybe (BeamSqlBackendExpressionSyntax be)
-&gt; Maybe Text
-&gt; [BeamSqlBackendColumnConstraintDefinitionSyntax be]
-&gt; NotNullConstraint be
-&gt; a
</span><a href="#local-6989586621679294703"><span class="hs-identifier hs-var hs-var hs-var hs-var">field'</span></a></span></span><span> </span><span id="local-6989586621679294702"><span class="annot"><span class="annottext">Proxy defaultGiven
</span><a href="#local-6989586621679294702"><span class="hs-identifier hs-var">defaultGiven</span></a></span></span><span> </span><span id="local-6989586621679294701"><span class="annot"><span class="annottext">Proxy collationGiven
</span><a href="#local-6989586621679294701"><span class="hs-identifier hs-var">collationGiven</span></a></span></span><span> </span><span id="local-6989586621679294700"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294700"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span id="local-6989586621679294699"><span class="annot"><span class="annottext">BeamMigrateSqlBackendDataTypeSyntax be
</span><a href="#local-6989586621679294699"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621679294698"><span class="annot"><span class="annottext">Maybe (BeamSqlBackendExpressionSyntax be)
</span><a href="#local-6989586621679294698"><span class="hs-identifier hs-var">default_'</span></a></span></span><span> </span><span id="local-6989586621679294697"><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679294697"><span class="hs-identifier hs-var">collation</span></a></span></span><span> </span><span id="local-6989586621679294696"><span class="annot"><span class="annottext">[BeamSqlBackendColumnConstraintDefinitionSyntax be]
</span><a href="#local-6989586621679294696"><span class="hs-identifier hs-var">constraints</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#NotNullConstraint"><span class="hs-identifier hs-type">NotNullConstraint</span></a></span><span> </span><span id="local-6989586621679294695"><span class="annot"><span class="annottext">Constraint be
</span><a href="#local-6989586621679294695"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-314"></span><span>    </span><span class="annot"><span class="annottext">Proxy defaultGiven
-&gt; Proxy collationGiven
-&gt; Text
-&gt; BeamMigrateSqlBackendDataTypeSyntax be
-&gt; Maybe (BeamSqlBackendExpressionSyntax be)
-&gt; Maybe Text
-&gt; [BeamSqlBackendColumnConstraintDefinitionSyntax be]
-&gt; Constraint be
-&gt; a
forall (defaultGiven :: Bool) (collationGiven :: Bool) be resTy a.
(FieldReturnType defaultGiven collationGiven be resTy a,
 BeamMigrateSqlBackend be) =&gt;
Proxy defaultGiven
-&gt; Proxy collationGiven
-&gt; Text
-&gt; BeamMigrateSqlBackendDataTypeSyntax be
-&gt; Maybe (BeamSqlBackendExpressionSyntax be)
-&gt; Maybe Text
-&gt; [BeamSqlBackendColumnConstraintDefinitionSyntax be]
-&gt; a
</span><a href="Database.Beam.Migrate.SQL.Tables.html#field%27"><span class="hs-identifier hs-var">field'</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy defaultGiven
</span><a href="#local-6989586621679294702"><span class="hs-identifier hs-var">defaultGiven</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy collationGiven
</span><a href="#local-6989586621679294701"><span class="hs-identifier hs-var">collationGiven</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294700"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="annot"><span class="annottext">BeamMigrateSqlBackendDataTypeSyntax be
</span><a href="#local-6989586621679294699"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (BeamSqlBackendExpressionSyntax be)
</span><a href="#local-6989586621679294698"><span class="hs-identifier hs-var">default_'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679294697"><span class="hs-identifier hs-var">collation</span></a></span><span> </span><span class="annot"><span class="annottext">[BeamSqlBackendColumnConstraintDefinitionSyntax be]
</span><a href="#local-6989586621679294696"><span class="hs-identifier hs-var">constraints</span></a></span><span> </span><span class="annot"><span class="annottext">Constraint be
</span><a href="#local-6989586621679294695"><span class="hs-identifier hs-var">c</span></a></span></span></span></span></span></span><span>
</span><span id="line-315"></span><span>
</span><span id="line-316"></span><span id="local-6989586621679294691"><span id="local-6989586621679294692"><span id="local-6989586621679294693"><span id="local-6989586621679294694"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#FieldReturnType"><span class="hs-identifier hs-type">FieldReturnType</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">True</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294694"><span class="hs-identifier hs-type">collationGiven</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294693"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294692"><span class="hs-identifier hs-type">resTy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294691"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-317"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">TypeError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Only one DEFAULT clause can be given per 'field' invocation&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-318"></span><span>  </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#FieldReturnType"><span class="hs-identifier hs-type">FieldReturnType</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">True</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294694"><span class="hs-identifier hs-type">collationGiven</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294693"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294692"><span class="hs-identifier hs-type">resTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#DefaultValue"><span class="hs-identifier hs-type">DefaultValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294693"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294692"><span class="hs-identifier hs-type">resTy</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679294691"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-319"></span><span>
</span><span id="line-320"></span><span>  </span><span id="local-6989586621679294689"><span class="annot"><span class="annottext">field' :: Proxy 'True
-&gt; Proxy collationGiven
-&gt; Text
-&gt; BeamMigrateSqlBackendDataTypeSyntax be
-&gt; Maybe (BeamSqlBackendExpressionSyntax be)
-&gt; Maybe Text
-&gt; [BeamSqlBackendColumnConstraintDefinitionSyntax be]
-&gt; DefaultValue be resTy
-&gt; a
</span><a href="#local-6989586621679294689"><span class="hs-identifier hs-var hs-var hs-var hs-var">field'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char]
-&gt; Proxy 'True
-&gt; Proxy collationGiven
-&gt; Text
-&gt; BeamMigrateSqlBackendDataTypeSyntax be
-&gt; Maybe
     (Sql92UpdateExpressionSyntax
        (Sql92UpdateSyntax (BeamSqlBackendSyntax be)))
-&gt; Maybe Text
-&gt; [BeamSqlBackendColumnConstraintDefinitionSyntax be]
-&gt; DefaultValue be resTy
-&gt; a
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Unreachable because of GHC Custom Type Errors&quot;</span></span></span></span></span></span><span>
</span><span id="line-321"></span><span>
</span><span id="line-322"></span><span id="local-6989586621679294681"><span id="local-6989586621679294682"><span id="local-6989586621679294683"><span id="local-6989586621679294684"><span id="local-6989586621679294685"><span id="local-6989586621679294686"><span id="local-6989586621679294687"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#FieldReturnType"><span class="hs-identifier hs-type">FieldReturnType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294687"><span class="hs-identifier hs-type">defaultGiven</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294686"><span class="hs-identifier hs-type">collationGiven</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294685"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294684"><span class="hs-identifier hs-type">resTy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294683"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-323"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">TypeError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Only one type declaration allowed per 'field' invocation&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-324"></span><span>  </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#FieldReturnType"><span class="hs-identifier hs-type">FieldReturnType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294687"><span class="hs-identifier hs-type">defaultGiven</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294686"><span class="hs-identifier hs-type">collationGiven</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294685"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294684"><span class="hs-identifier hs-type">resTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">DataType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294682"><span class="hs-identifier hs-type">be'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294681"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679294683"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-325"></span><span>  </span><span id="local-6989586621679294679"><span class="annot"><span class="annottext">field' :: Proxy defaultGiven
-&gt; Proxy collationGiven
-&gt; Text
-&gt; BeamMigrateSqlBackendDataTypeSyntax be
-&gt; Maybe (BeamSqlBackendExpressionSyntax be)
-&gt; Maybe Text
-&gt; [BeamSqlBackendColumnConstraintDefinitionSyntax be]
-&gt; DataType be' x
-&gt; a
</span><a href="#local-6989586621679294679"><span class="hs-identifier hs-var hs-var hs-var hs-var">field'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char]
-&gt; Proxy defaultGiven
-&gt; Proxy collationGiven
-&gt; Text
-&gt; BeamMigrateSqlBackendDataTypeSyntax be
-&gt; Maybe
     (Sql92UpdateExpressionSyntax
        (Sql92UpdateSyntax (BeamSqlBackendSyntax be)))
-&gt; Maybe Text
-&gt; [BeamSqlBackendColumnConstraintDefinitionSyntax be]
-&gt; DataType be' x
-&gt; a
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Unreachable because of GHC Custom Type Errors&quot;</span></span></span></span></span></span></span></span></span><span>
</span><span id="line-326"></span><span>
</span><span id="line-327"></span><span id="local-6989586621679294675"><span id="local-6989586621679294676"><span id="local-6989586621679294677"><span id="local-6989586621679294678"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Types.html#BeamMigrateSqlBackend"><span class="hs-identifier hs-type">BeamMigrateSqlBackend</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294678"><span class="hs-identifier hs-type">be</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.Checks.html#HasDataTypeCreatedCheck"><span class="hs-identifier hs-type">HasDataTypeCreatedCheck</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Migrate.SQL.Types.html#BeamMigrateSqlBackendDataTypeSyntax"><span class="hs-identifier hs-type">BeamMigrateSqlBackendDataTypeSyntax</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294678"><span class="hs-identifier hs-type">be</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-328"></span><span>  </span><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#FieldReturnType"><span class="hs-identifier hs-type">FieldReturnType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294677"><span class="hs-identifier hs-type">defaultGiven</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294676"><span class="hs-identifier hs-type">collationGiven</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294678"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294675"><span class="hs-identifier hs-type">resTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Migrate.SQL.Types.html#TableFieldSchema"><span class="hs-identifier hs-type">TableFieldSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294678"><span class="hs-identifier hs-type">be</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294675"><span class="hs-identifier hs-type">resTy</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-329"></span><span>  </span><span id="local-6989586621679294673"><span class="annot"><span class="annottext">field' :: Proxy defaultGiven
-&gt; Proxy collationGiven
-&gt; Text
-&gt; BeamMigrateSqlBackendDataTypeSyntax be
-&gt; Maybe (BeamSqlBackendExpressionSyntax be)
-&gt; Maybe Text
-&gt; [BeamSqlBackendColumnConstraintDefinitionSyntax be]
-&gt; TableFieldSchema be resTy
</span><a href="#local-6989586621679294673"><span class="hs-identifier hs-var hs-var hs-var hs-var">field'</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy defaultGiven
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Proxy collationGiven
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679294672"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294672"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span id="local-6989586621679294671"><span class="annot"><span class="annottext">BeamMigrateSqlBackendDataTypeSyntax be
</span><a href="#local-6989586621679294671"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621679294670"><span class="annot"><span class="annottext">Maybe (BeamSqlBackendExpressionSyntax be)
</span><a href="#local-6989586621679294670"><span class="hs-identifier hs-var">default_'</span></a></span></span><span> </span><span id="local-6989586621679294669"><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679294669"><span class="hs-identifier hs-var">collation</span></a></span></span><span> </span><span id="local-6989586621679294668"><span class="annot"><span class="annottext">[BeamSqlBackendColumnConstraintDefinitionSyntax be]
</span><a href="#local-6989586621679294668"><span class="hs-identifier hs-var">constraints</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-330"></span><span>    </span><span class="annot"><span class="annottext">Text
-&gt; FieldSchema be resTy
-&gt; [FieldCheck]
-&gt; TableFieldSchema be resTy
forall be a.
Text -&gt; FieldSchema be a -&gt; [FieldCheck] -&gt; TableFieldSchema be a
</span><a href="Database.Beam.Migrate.SQL.Types.html#TableFieldSchema"><span class="hs-identifier hs-var">TableFieldSchema</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294672"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BeamSqlBackendColumnSchemaSyntax be -&gt; FieldSchema be resTy
forall be a.
BeamSqlBackendColumnSchemaSyntax be -&gt; FieldSchema be a
</span><a href="Database.Beam.Migrate.SQL.Types.html#FieldSchema"><span class="hs-identifier hs-var">FieldSchema</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BeamMigrateSqlBackendDataTypeSyntax be
-&gt; Maybe
     (Sql92ColumnSchemaExpressionSyntax
        (BeamSqlBackendColumnSchemaSyntax be))
-&gt; [BeamSqlBackendColumnConstraintDefinitionSyntax be]
-&gt; Maybe Text
-&gt; BeamSqlBackendColumnSchemaSyntax be
forall columnSchema.
IsSql92ColumnSchemaSyntax columnSchema =&gt;
Sql92ColumnSchemaColumnTypeSyntax columnSchema
-&gt; Maybe (Sql92ColumnSchemaExpressionSyntax columnSchema)
-&gt; [Sql92ColumnSchemaColumnConstraintDefinitionSyntax columnSchema]
-&gt; Maybe Text
-&gt; columnSchema
</span><a href="Database.Beam.Migrate.SQL.SQL92.html#columnSchemaSyntax"><span class="hs-identifier hs-var">columnSchemaSyntax</span></a></span><span> </span><span class="annot"><span class="annottext">BeamMigrateSqlBackendDataTypeSyntax be
</span><a href="#local-6989586621679294671"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (BeamSqlBackendExpressionSyntax be)
Maybe
  (Sql92ColumnSchemaExpressionSyntax
     (BeamSqlBackendColumnSchemaSyntax be))
</span><a href="#local-6989586621679294670"><span class="hs-identifier hs-var">default_'</span></a></span><span> </span><span class="annot"><span class="annottext">[BeamSqlBackendColumnConstraintDefinitionSyntax be]
</span><a href="#local-6989586621679294668"><span class="hs-identifier hs-var">constraints</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679294669"><span class="hs-identifier hs-var">collation</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[FieldCheck]
</span><a href="#local-6989586621679294666"><span class="hs-identifier hs-var">checks</span></a></span><span>
</span><span id="line-331"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679294666"><span class="annot"><span class="annottext">checks :: [FieldCheck]
</span><a href="#local-6989586621679294666"><span class="hs-identifier hs-var hs-var">checks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">(QualifiedName -&gt; Text -&gt; SomeDatabasePredicate) -&gt; FieldCheck
</span><a href="Database.Beam.Migrate.Types.Predicates.html#FieldCheck"><span class="hs-identifier hs-var">FieldCheck</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679294664"><span class="annot"><span class="annottext">QualifiedName
</span><a href="#local-6989586621679294664"><span class="hs-identifier hs-var">tbl</span></a></span></span><span> </span><span id="local-6989586621679294663"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294663"><span class="hs-identifier hs-var">field''</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TableHasColumn be -&gt; SomeDatabasePredicate
forall p. DatabasePredicate p =&gt; p -&gt; SomeDatabasePredicate
</span><a href="Database.Beam.Migrate.Types.Predicates.html#SomeDatabasePredicate"><span class="hs-identifier hs-var">SomeDatabasePredicate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QualifiedName
-&gt; Text
-&gt; BeamMigrateSqlBackendDataTypeSyntax be
-&gt; TableHasColumn be
forall be.
HasDataTypeCreatedCheck (BeamMigrateSqlBackendDataTypeSyntax be) =&gt;
QualifiedName
-&gt; Text
-&gt; BeamMigrateSqlBackendDataTypeSyntax be
-&gt; TableHasColumn be
</span><a href="Database.Beam.Migrate.Checks.html#TableHasColumn"><span class="hs-identifier hs-var">TableHasColumn</span></a></span><span> </span><span class="annot"><span class="annottext">QualifiedName
</span><a href="#local-6989586621679294664"><span class="hs-identifier hs-var">tbl</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294663"><span class="hs-identifier hs-var">field''</span></a></span><span> </span><span class="annot"><span class="annottext">BeamMigrateSqlBackendDataTypeSyntax be
</span><a href="#local-6989586621679294671"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.Checks.html#TableHasColumn"><span class="hs-identifier hs-type">TableHasColumn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294678"><span class="hs-identifier hs-type">be</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[FieldCheck] -&gt; [FieldCheck] -&gt; [FieldCheck]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-332"></span><span>                   </span><span class="annot"><span class="annottext">(BeamSqlBackendColumnConstraintDefinitionSyntax be -&gt; FieldCheck)
-&gt; [BeamSqlBackendColumnConstraintDefinitionSyntax be]
-&gt; [FieldCheck]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679294661"><span class="annot"><span class="annottext">BeamSqlBackendColumnConstraintDefinitionSyntax be
</span><a href="#local-6989586621679294661"><span class="hs-identifier hs-var">cns</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(QualifiedName -&gt; Text -&gt; SomeDatabasePredicate) -&gt; FieldCheck
</span><a href="Database.Beam.Migrate.Types.Predicates.html#FieldCheck"><span class="hs-identifier hs-var">FieldCheck</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679294660"><span class="annot"><span class="annottext">QualifiedName
</span><a href="#local-6989586621679294660"><span class="hs-identifier hs-var">tbl</span></a></span></span><span> </span><span id="local-6989586621679294659"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294659"><span class="hs-identifier hs-var">field''</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TableColumnHasConstraint be -&gt; SomeDatabasePredicate
forall p. DatabasePredicate p =&gt; p -&gt; SomeDatabasePredicate
</span><a href="Database.Beam.Migrate.Types.Predicates.html#SomeDatabasePredicate"><span class="hs-identifier hs-var">SomeDatabasePredicate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QualifiedName
-&gt; Text
-&gt; BeamSqlBackendColumnConstraintDefinitionSyntax be
-&gt; TableColumnHasConstraint be
forall be.
QualifiedName
-&gt; Text
-&gt; BeamSqlBackendColumnConstraintDefinitionSyntax be
-&gt; TableColumnHasConstraint be
</span><a href="Database.Beam.Migrate.Checks.html#TableColumnHasConstraint"><span class="hs-identifier hs-var">TableColumnHasConstraint</span></a></span><span> </span><span class="annot"><span class="annottext">QualifiedName
</span><a href="#local-6989586621679294660"><span class="hs-identifier hs-var">tbl</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679294659"><span class="hs-identifier hs-var">field''</span></a></span><span> </span><span class="annot"><span class="annottext">BeamSqlBackendColumnConstraintDefinitionSyntax be
</span><a href="#local-6989586621679294661"><span class="hs-identifier hs-var">cns</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Beam.Migrate.Checks.html#TableColumnHasConstraint"><span class="hs-identifier hs-type">TableColumnHasConstraint</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294678"><span class="hs-identifier hs-type">be</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[BeamSqlBackendColumnConstraintDefinitionSyntax be]
</span><a href="#local-6989586621679294668"><span class="hs-identifier hs-var">constraints</span></a></span></span></span></span></span><span>
</span><span id="line-333"></span><span>
</span><span id="line-334"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="IsNotNull"><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#IsNotNull"><span class="hs-identifier hs-var">IsNotNull</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679294657"><span class="annot"><a href="#local-6989586621679294657"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-operator">*</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Kind.Constraint</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-335"></span><span>  </span><span id="IsNotNull"><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#IsNotNull"><span class="hs-identifier hs-var">IsNotNull</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span id="local-6989586621679294656"><span class="annot"><a href="#local-6989586621679294656"><span class="hs-identifier hs-type hs-type">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">TypeError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;You used Database.Beam.Migrate.notNull on a column with type&quot;</span></span><span> </span><span class="hs-special">'</span><span class="hs-operator">:$$:</span><span>
</span><span id="line-336"></span><span>                                   </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">ShowType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679294656"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">'</span><span class="hs-operator">:$$:</span><span>
</span><span id="line-337"></span><span>                                   </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Either remove 'notNull' from your migration or 'Maybe' from your table&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-338"></span><span>  </span><span id="IsNotNull"><span class="annot"><a href="Database.Beam.Migrate.SQL.Tables.html#IsNotNull"><span class="hs-identifier hs-var">IsNotNull</span></a></span></span><span> </span><span id="local-6989586621679294655"><span class="annot"><a href="#local-6989586621679294655"><span class="hs-identifier hs-type hs-type">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-339"></span></pre></body></html>