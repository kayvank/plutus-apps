<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Database.Beam.Migrate</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">beam-migrate-0.5.2.0: SQL DDL support and migrations support library for Beam</span><ul class="links" id="page-menu"><li><a href="src/Database.Beam.Migrate.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Database.Beam.Migrate</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Top-level module import for <code>beam-migrate</code>.</p><p>This is most often the only module you want to import, unless you're
 extending <code>beam-migrate</code>, implementing migrations support in a backend, or
 writing tooling. If you are doing any of these things, please see the
 Advanced features section below.</p><p>The key abstractions in <code>beam-migrate</code> are the <em>checked database</em> and the
 <em>migration</em>.</p><h2>Checked databases</h2><p>A checked database is similar to the <code>DatabaseSettings</code> type from
 <code>beam-core</code> except it comes with a set of <em>predicates</em>.
 Whereas a <code>DatabaseSettings</code> object consists of a set of
 database entities, a checked database (represented by the
 <code><a href="Database-Beam-Migrate-Types.html#t:CheckedDatabaseSettings" title="Database.Beam.Migrate.Types">CheckedDatabaseSettings</a></code> type) consists of a set of database entities along
 with a set of <em>predicates</em> (represented by types implementing
 <code><a href="Database-Beam-Migrate-Types.html#t:DatabasePredicate" title="Database.Beam.Migrate.Types">DatabasePredicate</a></code>). The <em>predicates</em> are facts about a given
 database schema. For example, a checked database with a table named
 <a href="Customers.html">Customers</a>, would have a <code><a href="Database-Beam-Migrate-Checks.html#t:TableExistsPredicate" title="Database.Beam.Migrate.Checks">TableExistsPredicate</a></code> in its predicate set.</p><p>Predicates can be used to verify that a given beam schema is compatible with
 a backend database or to generate migrations from a schema satisfying one set
 of predicates to a schema satisfying another. Beam migrate provides a solver
 for figuring out the exact sequence of steps needed to accomplish this. Beam
 backends can provide additional predicates and solvers to implement
 backend-specific migrations. For example, the <code>beam-postgres</code> backend
 provides predicates to assert that extensions have been loaded, and solvers
 for emitting proper <code>CREATE EXTENSION</code> statements where appropriate.</p><p>Predicates may also be serialized to disk in JSON format, providing an easy
 means to detect significant changes in a beam schema.</p><p>As one final point, <code>beam-migrate</code> can generate schemas in any beam-supported
 SQL DDL syntax. The <code>beam-migrate</code> module provides a DDL syntax for Haskell
 in <a href="Database-Beam-Haskell-Syntax.html">Database.Beam.Haskell.Syntax</a>. This allows <code>beam-migrate</code> to translate
 predicate sets into the corresponding Haskell schema and the corresponding
 Haskell migration script. This reflection allows tools based off of
 <code>beam-migrate</code> to support schema generation from an existing database.</p><p>For more information on checked databases, see the
 <a href="Database-Beam-Migrate-Checks.html">Database.Beam.Migrate.Checks</a> module.</p><h2>Migrations</h2><p>A migration is a value of type 'MigrationSteps a b', where <code>a</code> and <code>b</code> are
 database types. Conceptually, a value of this type is a list of DDL commands
 which can be used to bring a database of type <code>a</code> to a database of type <code>b</code>.
 For example, if <code>b</code> is a database type containing all the tables as <code>a</code>, but
 with a new table added, a migration with type 'MigrationSteps a b' may
 represent a SQL <code>CREATE TABLE</code> statement. Migrations can sometimes be
 reversed to produce a value of type 'MigrationSteps b a'. In our example, the
 corresponding reversed migration may be the appropriate <code>DROP TABLE</code>
 statement.</p><p>Migration steps can used to modify a database schema, generate a migration
 script in a given backend syntax, or generate an appropriate
 <code>DatabaseSettings</code> object for use with the rest of the beam ecosystem.</p><p>For more information in migrations see <a href="Database-Beam-Migrate-Types.html">Database.Beam.Migrate.Types</a></p><h2>Syntax</h2><p>For low-level access to the underlying SQL syntax builders, see
 <a href="Database-Beam-Migrate-SQL-SQL92.html">Database.Beam.Migrate.SQL.SQL92</a></p><h2>Advanced features</h2><p>If you are writing a new beam backend, you will need to construct a value of
 type <code>BeamBackend</code>. See that module for more information.</p><p>If you are writing tooling, you will likely need to consume <code>BeamBackend</code>.
 You will likely also be interested in the migration generation. See the
 documentation on <code><a href="Database-Beam-Migrate-Actions.html#v:heuristicSolver" title="Database.Beam.Migrate.Actions">heuristicSolver</a></code>.</p></div></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src">module <a href="Database-Beam-Migrate-Actions.html">Database.Beam.Migrate.Actions</a></p></div><div class="top"><p class="src">module <a href="Database-Beam-Migrate-Checks.html">Database.Beam.Migrate.Checks</a></p></div><div class="top"><p class="src">module <a href="Database-Beam-Migrate-Generics.html">Database.Beam.Migrate.Generics</a></p></div><div class="top"><p class="src">module <a href="Database-Beam-Migrate-SQL.html">Database.Beam.Migrate.SQL</a></p></div><div class="top"><p class="src">module <a href="Database-Beam-Migrate-Types.html">Database.Beam.Migrate.Types</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.2</p></div></body></html>