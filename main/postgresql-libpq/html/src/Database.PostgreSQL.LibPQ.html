<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><span id="line-2"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-3"></span><span class="hs-comment">-- Module      :  Database.PostgreSQL.LibPQ</span><span>
</span><span id="line-4"></span><span class="hs-comment">-- Copyright   :  (c) 2010 Grant Monroe,</span><span>
</span><span id="line-5"></span><span class="hs-comment">--                (c) 2011 Leon P Smith</span><span>
</span><span id="line-6"></span><span class="hs-comment">-- License     :  BSD3</span><span>
</span><span id="line-7"></span><span class="hs-comment">--</span><span>
</span><span id="line-8"></span><span class="hs-comment">-- Maintainer  :  leon@melding-monads.com</span><span>
</span><span id="line-9"></span><span class="hs-comment">-- Stability   :  experimental</span><span>
</span><span id="line-10"></span><span class="hs-comment">--</span><span>
</span><span id="line-11"></span><span class="hs-comment">-- This is a binding to libpq: the C application programmer's</span><span>
</span><span id="line-12"></span><span class="hs-comment">-- interface to PostgreSQL. libpq is a set of library functions that</span><span>
</span><span id="line-13"></span><span class="hs-comment">-- allow client programs to pass queries to the PostgreSQL backend</span><span>
</span><span id="line-14"></span><span class="hs-comment">-- server and to receive the results of these queries.</span><span>
</span><span id="line-15"></span><span class="hs-comment">--</span><span>
</span><span id="line-16"></span><span class="hs-comment">-- This is intended to be a very low-level interface to libpq.  It</span><span>
</span><span id="line-17"></span><span class="hs-comment">-- provides memory management and a somewhat more consistent interface</span><span>
</span><span id="line-18"></span><span class="hs-comment">-- to error conditions.  Application code should typically use a</span><span>
</span><span id="line-19"></span><span class="hs-comment">-- higher-level PostgreSQL binding.</span><span>
</span><span id="line-20"></span><span class="hs-comment">--</span><span>
</span><span id="line-21"></span><span class="hs-comment">-- This interface is not safe,  because libpq unfortunately conflates</span><span>
</span><span id="line-22"></span><span class="hs-comment">-- explicit disconnects with memory management.   A use-after-free memory</span><span>
</span><span id="line-23"></span><span class="hs-comment">-- fault will result if a connection is used in any way after 'finish' is</span><span>
</span><span id="line-24"></span><span class="hs-comment">-- called.  This will likely cause a segfault,  or return an error if memory</span><span>
</span><span id="line-25"></span><span class="hs-comment">-- has not yet been reused.  Other more bizarre behaviors are possible,</span><span>
</span><span id="line-26"></span><span class="hs-comment">-- though unlikely by chance.  Higher-level bindings need to be aware of</span><span>
</span><span id="line-27"></span><span class="hs-comment">-- this issue and need to ensure that application code cannot cause the</span><span>
</span><span id="line-28"></span><span class="hs-comment">-- functions in this module to be called on an 'finish'ed connection.</span><span>
</span><span id="line-29"></span><span class="hs-comment">--</span><span>
</span><span id="line-30"></span><span class="hs-comment">-- One possibility is to represent a connection in a higher-level interface</span><span>
</span><span id="line-31"></span><span class="hs-comment">-- as @MVar (Maybe Connection)@, using @Nothing@ to represent an explicitly</span><span>
</span><span id="line-32"></span><span class="hs-comment">-- disconnected state.  This was done in an earlier incarnation of this</span><span>
</span><span id="line-33"></span><span class="hs-comment">-- library,  however this was removed because a higher level binding is</span><span>
</span><span id="line-34"></span><span class="hs-comment">-- likely to use a similar construct to deal with other issues.  Thus</span><span>
</span><span id="line-35"></span><span class="hs-comment">-- incorporating that in this module results in extra layers of indirection</span><span>
</span><span id="line-36"></span><span class="hs-comment">-- for relatively little functionality.</span><span>
</span><span id="line-37"></span><span class="hs-comment">--</span><span>
</span><span id="line-38"></span><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><span id="line-39"></span><span>
</span><span id="line-40"></span><span class="hs-pragma">{-# LANGUAGE BangPatterns               #-}</span><span>
</span><span id="line-41"></span><span class="hs-pragma">{-# LANGUAGE DerivingStrategies         #-}</span><span>
</span><span id="line-42"></span><span class="hs-pragma">{-# LANGUAGE GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-43"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings          #-}</span><span>
</span><span id="line-44"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables        #-}</span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span class="hs-comment">-- The FFI imports are in .FFI module</span><span>
</span><span id="line-47"></span><span class="hs-pragma">{-# LANGUAGE NoForeignFunctionInterface #-}</span><span>
</span><span id="line-48"></span><span>
</span><span id="line-49"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Database.PostgreSQL.LibPQ</span><span>
</span><span id="line-50"></span><span>    </span><span class="hs-special">(</span><span>
</span><span id="line-51"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Database Connection Control Functions</span></span><span>
</span><span id="line-52"></span><span>    </span><span class="annot"><span class="hs-comment">-- $dbconn</span></span><span>
</span><span id="line-53"></span><span>      </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier">Connection</span></a></span><span>
</span><span id="line-54"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#connectdb"><span class="hs-identifier">connectdb</span></a></span><span>
</span><span id="line-55"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#connectStart"><span class="hs-identifier">connectStart</span></a></span><span>
</span><span id="line-56"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#connectPoll"><span class="hs-identifier">connectPoll</span></a></span><span>
</span><span id="line-57"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#newNullConnection"><span class="hs-identifier">newNullConnection</span></a></span><span>
</span><span id="line-58"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#isNullConnection"><span class="hs-identifier">isNullConnection</span></a></span><span>
</span><span id="line-59"></span><span>    </span><span class="hs-comment">--, conndefaults</span><span>
</span><span id="line-60"></span><span>    </span><span class="hs-comment">--, conninfoParse</span><span>
</span><span id="line-61"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#reset"><span class="hs-identifier">reset</span></a></span><span>
</span><span id="line-62"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#resetStart"><span class="hs-identifier">resetStart</span></a></span><span>
</span><span id="line-63"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#resetPoll"><span class="hs-identifier">resetPoll</span></a></span><span>
</span><span id="line-64"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Enums.html#PollingStatus"><span class="hs-identifier">PollingStatus</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#finish"><span class="hs-identifier">finish</span></a></span><span>
</span><span id="line-66"></span><span>
</span><span id="line-67"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Connection Status Functions</span></span><span>
</span><span id="line-68"></span><span>    </span><span class="annot"><span class="hs-comment">-- $connstatus</span></span><span>
</span><span id="line-69"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#db"><span class="hs-identifier">db</span></a></span><span>
</span><span id="line-70"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#user"><span class="hs-identifier">user</span></a></span><span>
</span><span id="line-71"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#pass"><span class="hs-identifier">pass</span></a></span><span>
</span><span id="line-72"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#host"><span class="hs-identifier">host</span></a></span><span>
</span><span id="line-73"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#port"><span class="hs-identifier">port</span></a></span><span>
</span><span id="line-74"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#options"><span class="hs-identifier">options</span></a></span><span>
</span><span id="line-75"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Enums.html#ConnStatus"><span class="hs-identifier">ConnStatus</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#status"><span class="hs-identifier">status</span></a></span><span>
</span><span id="line-77"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Enums.html#TransactionStatus"><span class="hs-identifier">TransactionStatus</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#transactionStatus"><span class="hs-identifier">transactionStatus</span></a></span><span>
</span><span id="line-79"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#parameterStatus"><span class="hs-identifier">parameterStatus</span></a></span><span>
</span><span id="line-80"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#protocolVersion"><span class="hs-identifier">protocolVersion</span></a></span><span>
</span><span id="line-81"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#serverVersion"><span class="hs-identifier">serverVersion</span></a></span><span>
</span><span id="line-82"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#libpqVersion"><span class="hs-identifier">libpqVersion</span></a></span><span>
</span><span id="line-83"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#errorMessage"><span class="hs-identifier">errorMessage</span></a></span><span>
</span><span id="line-84"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#socket"><span class="hs-identifier">socket</span></a></span><span>
</span><span id="line-85"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#backendPID"><span class="hs-identifier">backendPID</span></a></span><span>
</span><span id="line-86"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#connectionNeedsPassword"><span class="hs-identifier">connectionNeedsPassword</span></a></span><span>
</span><span id="line-87"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#connectionUsedPassword"><span class="hs-identifier">connectionUsedPassword</span></a></span><span>
</span><span id="line-88"></span><span>    </span><span class="hs-comment">--, getssl</span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Command Execution Functions</span></span><span>
</span><span id="line-92"></span><span>    </span><span class="annot"><span class="hs-comment">-- $commandexec</span></span><span>
</span><span id="line-93"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier">Result</span></a></span><span>
</span><span id="line-94"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#exec"><span class="hs-identifier">exec</span></a></span><span>
</span><span id="line-95"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Enums.html#Format"><span class="hs-identifier">Format</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Oid.html#Oid"><span class="hs-identifier">Oid</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Oid.html#invalidOid"><span class="hs-identifier">invalidOid</span></a></span><span>
</span><span id="line-98"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#execParams"><span class="hs-identifier">execParams</span></a></span><span>
</span><span id="line-99"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#prepare"><span class="hs-identifier">prepare</span></a></span><span>
</span><span id="line-100"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#execPrepared"><span class="hs-identifier">execPrepared</span></a></span><span>
</span><span id="line-101"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#describePrepared"><span class="hs-identifier">describePrepared</span></a></span><span>
</span><span id="line-102"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#describePortal"><span class="hs-identifier">describePortal</span></a></span><span>
</span><span id="line-103"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Enums.html#ExecStatus"><span class="hs-identifier">ExecStatus</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-104"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#resultStatus"><span class="hs-identifier">resultStatus</span></a></span><span>
</span><span id="line-105"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#resStatus"><span class="hs-identifier">resStatus</span></a></span><span>
</span><span id="line-106"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#resultErrorMessage"><span class="hs-identifier">resultErrorMessage</span></a></span><span>
</span><span id="line-107"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Enums.html#FieldCode"><span class="hs-identifier">FieldCode</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#resultErrorField"><span class="hs-identifier">resultErrorField</span></a></span><span>
</span><span id="line-109"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#unsafeFreeResult"><span class="hs-identifier">unsafeFreeResult</span></a></span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Retrieving Query Result Information</span></span><span>
</span><span id="line-112"></span><span>    </span><span class="annot"><span class="hs-comment">-- $queryresultinfo</span></span><span>
</span><span id="line-113"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#ntuples"><span class="hs-identifier">ntuples</span></a></span><span>
</span><span id="line-114"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#nfields"><span class="hs-identifier">nfields</span></a></span><span>
</span><span id="line-115"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Row"><span class="hs-identifier">Row</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Column"><span class="hs-identifier">Column</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-117"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#toRow"><span class="hs-identifier">toRow</span></a></span><span>
</span><span id="line-118"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#toColumn"><span class="hs-identifier">toColumn</span></a></span><span>
</span><span id="line-119"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#fname"><span class="hs-identifier">fname</span></a></span><span>
</span><span id="line-120"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#fnumber"><span class="hs-identifier">fnumber</span></a></span><span>
</span><span id="line-121"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#ftable"><span class="hs-identifier">ftable</span></a></span><span>
</span><span id="line-122"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#ftablecol"><span class="hs-identifier">ftablecol</span></a></span><span>
</span><span id="line-123"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#fformat"><span class="hs-identifier">fformat</span></a></span><span>
</span><span id="line-124"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#ftype"><span class="hs-identifier">ftype</span></a></span><span>
</span><span id="line-125"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#fmod"><span class="hs-identifier">fmod</span></a></span><span>
</span><span id="line-126"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#fsize"><span class="hs-identifier">fsize</span></a></span><span>
</span><span id="line-127"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#getvalue"><span class="hs-identifier">getvalue</span></a></span><span>
</span><span id="line-128"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#getvalue%27"><span class="hs-identifier">getvalue'</span></a></span><span>
</span><span id="line-129"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#getisnull"><span class="hs-identifier">getisnull</span></a></span><span>
</span><span id="line-130"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#getlength"><span class="hs-identifier">getlength</span></a></span><span>
</span><span id="line-131"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#nparams"><span class="hs-identifier">nparams</span></a></span><span>
</span><span id="line-132"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#paramtype"><span class="hs-identifier">paramtype</span></a></span><span>
</span><span id="line-133"></span><span>
</span><span id="line-134"></span><span>    </span><span class="hs-comment">-- Retrieving Result Information for Other Commands</span><span>
</span><span id="line-135"></span><span>    </span><span class="annot"><span class="hs-comment">-- $othercommands</span></span><span>
</span><span id="line-136"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#cmdStatus"><span class="hs-identifier">cmdStatus</span></a></span><span>
</span><span id="line-137"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#cmdTuples"><span class="hs-identifier">cmdTuples</span></a></span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Escaping Strings for Inclusion in SQL Commands</span></span><span>
</span><span id="line-140"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#escapeStringConn"><span class="hs-identifier">escapeStringConn</span></a></span><span>
</span><span id="line-141"></span><span>
</span><span id="line-142"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Escaping Binary Strings for Inclusion in SQL Commands</span></span><span>
</span><span id="line-143"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#escapeByteaConn"><span class="hs-identifier">escapeByteaConn</span></a></span><span>
</span><span id="line-144"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#unescapeBytea"><span class="hs-identifier">unescapeBytea</span></a></span><span>
</span><span id="line-145"></span><span>
</span><span id="line-146"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Escaping Identifiers for Inclusion in SQL Commands</span></span><span>
</span><span id="line-147"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#escapeIdentifier"><span class="hs-identifier">escapeIdentifier</span></a></span><span>
</span><span id="line-148"></span><span>
</span><span id="line-149"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Using COPY</span></span><span>
</span><span id="line-150"></span><span>    </span><span class="annot"><span class="hs-comment">-- $copy</span></span><span>
</span><span id="line-151"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#CopyInResult"><span class="hs-identifier">CopyInResult</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-152"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#putCopyData"><span class="hs-identifier">putCopyData</span></a></span><span>
</span><span id="line-153"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#putCopyEnd"><span class="hs-identifier">putCopyEnd</span></a></span><span>
</span><span id="line-154"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#CopyOutResult"><span class="hs-identifier">CopyOutResult</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#getCopyData"><span class="hs-identifier">getCopyData</span></a></span><span>
</span><span id="line-156"></span><span>
</span><span id="line-157"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Asynchronous Command Processing</span></span><span>
</span><span id="line-158"></span><span>    </span><span class="annot"><span class="hs-comment">-- $asynccommand</span></span><span>
</span><span id="line-159"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#sendQuery"><span class="hs-identifier">sendQuery</span></a></span><span>
</span><span id="line-160"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#sendQueryParams"><span class="hs-identifier">sendQueryParams</span></a></span><span>
</span><span id="line-161"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#sendPrepare"><span class="hs-identifier">sendPrepare</span></a></span><span>
</span><span id="line-162"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#sendQueryPrepared"><span class="hs-identifier">sendQueryPrepared</span></a></span><span>
</span><span id="line-163"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#sendDescribePrepared"><span class="hs-identifier">sendDescribePrepared</span></a></span><span>
</span><span id="line-164"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#sendDescribePortal"><span class="hs-identifier">sendDescribePortal</span></a></span><span>
</span><span id="line-165"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#getResult"><span class="hs-identifier">getResult</span></a></span><span>
</span><span id="line-166"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#consumeInput"><span class="hs-identifier">consumeInput</span></a></span><span>
</span><span id="line-167"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#isBusy"><span class="hs-identifier">isBusy</span></a></span><span>
</span><span id="line-168"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#setnonblocking"><span class="hs-identifier">setnonblocking</span></a></span><span>
</span><span id="line-169"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#isnonblocking"><span class="hs-identifier">isnonblocking</span></a></span><span>
</span><span id="line-170"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#setSingleRowMode"><span class="hs-identifier">setSingleRowMode</span></a></span><span>
</span><span id="line-171"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#FlushStatus"><span class="hs-identifier">FlushStatus</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-172"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#flush"><span class="hs-identifier">flush</span></a></span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Cancelling Queries in Progress</span></span><span>
</span><span id="line-175"></span><span>    </span><span class="annot"><span class="hs-comment">-- $cancel</span></span><span>
</span><span id="line-176"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Cancel"><span class="hs-identifier">Cancel</span></a></span><span>
</span><span id="line-177"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#getCancel"><span class="hs-identifier">getCancel</span></a></span><span>
</span><span id="line-178"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#cancel"><span class="hs-identifier">cancel</span></a></span><span>
</span><span id="line-179"></span><span>
</span><span id="line-180"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Asynchronous Notification</span></span><span>
</span><span id="line-181"></span><span>    </span><span class="annot"><span class="hs-comment">-- $asyncnotification</span></span><span>
</span><span id="line-182"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Notify.html#Notify"><span class="hs-identifier">Notify</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-183"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#notifies"><span class="hs-identifier">notifies</span></a></span><span>
</span><span id="line-184"></span><span>
</span><span id="line-185"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Control Functions</span></span><span>
</span><span id="line-186"></span><span>    </span><span class="annot"><span class="hs-comment">-- $control</span></span><span>
</span><span id="line-187"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#clientEncoding"><span class="hs-identifier">clientEncoding</span></a></span><span>
</span><span id="line-188"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#setClientEncoding"><span class="hs-identifier">setClientEncoding</span></a></span><span>
</span><span id="line-189"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Enums.html#Verbosity"><span class="hs-identifier">Verbosity</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-190"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#setErrorVerbosity"><span class="hs-identifier">setErrorVerbosity</span></a></span><span>
</span><span id="line-191"></span><span>
</span><span id="line-192"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Nonfatal Error Reporting</span></span><span>
</span><span id="line-193"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#disableNoticeReporting"><span class="hs-identifier">disableNoticeReporting</span></a></span><span>
</span><span id="line-194"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#enableNoticeReporting"><span class="hs-identifier">enableNoticeReporting</span></a></span><span>
</span><span id="line-195"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#getNotice"><span class="hs-identifier">getNotice</span></a></span><span>
</span><span id="line-196"></span><span>
</span><span id="line-197"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Large Objects</span></span><span>
</span><span id="line-198"></span><span>    </span><span class="annot"><span class="hs-comment">-- $largeobjects</span></span><span>
</span><span id="line-199"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#LoFd"><span class="hs-identifier">LoFd</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-200"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#loCreat"><span class="hs-identifier">loCreat</span></a></span><span>
</span><span id="line-201"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#loCreate"><span class="hs-identifier">loCreate</span></a></span><span>
</span><span id="line-202"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#loImport"><span class="hs-identifier">loImport</span></a></span><span>
</span><span id="line-203"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#loImportWithOid"><span class="hs-identifier">loImportWithOid</span></a></span><span>
</span><span id="line-204"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#loExport"><span class="hs-identifier">loExport</span></a></span><span>
</span><span id="line-205"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#loOpen"><span class="hs-identifier">loOpen</span></a></span><span>
</span><span id="line-206"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#loWrite"><span class="hs-identifier">loWrite</span></a></span><span>
</span><span id="line-207"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#loRead"><span class="hs-identifier">loRead</span></a></span><span>
</span><span id="line-208"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#loSeek"><span class="hs-identifier">loSeek</span></a></span><span>
</span><span id="line-209"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#loTell"><span class="hs-identifier">loTell</span></a></span><span>
</span><span id="line-210"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#loTruncate"><span class="hs-identifier">loTruncate</span></a></span><span>
</span><span id="line-211"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#loClose"><span class="hs-identifier">loClose</span></a></span><span>
</span><span id="line-212"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#loUnlink"><span class="hs-identifier">loUnlink</span></a></span><span>
</span><span id="line-213"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-214"></span><span class="hs-keyword">where</span><span>
</span><span id="line-215"></span><span>
</span><span id="line-216"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Concurrent.MVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">MVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">newMVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">swapMVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">tryTakeMVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">withMVar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-217"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Exception</span></a></span><span>       </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">mask_</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-218"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Foreign.C.String</span></a></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">CString</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">CStringLen</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">withCString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-219"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Foreign.C.Types</span></a></span><span>         </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">CInt</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-220"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Foreign.ForeignPtr</span></a></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">ForeignPtr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">finalizeForeignPtr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">newForeignPtr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">newForeignPtr_</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">touchForeignPtr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">withForeignPtr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-221"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Foreign.Marshal</span></a></span><span>         </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">alloca</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">allocaBytes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">finalizerFree</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">free</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">mallocBytes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">maybeWith</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">reallocBytes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">withArrayLen</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">withMany</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-222"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Foreign.Ptr</span></a></span><span>             </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Ptr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">castPtr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">nullPtr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-223"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Foreign.Storable</span></a></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Storable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">peek</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-224"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">GHC.Conc</span></a></span><span>                </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">closeFdWith</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-225"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">System.IO</span></a></span><span>               </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">IOMode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">SeekMode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-226"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">System.Posix.Types</span></a></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">CPid</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Fd</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier">Data.ByteString</span></a></span><span>           </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">B</span></span><span>
</span><span id="line-229"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier">Data.ByteString.Internal</span></a></span><span>  </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">B</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier">c_strlen</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier">createAndTrim</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier">fromForeignPtr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-230"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier">Data.ByteString.Unsafe</span></a></span><span>    </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">B</span></span><span>
</span><span id="line-231"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Foreign.Concurrent</span></a></span><span>        </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">FC</span></span><span>
</span><span id="line-232"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Foreign.ForeignPtr.Unsafe</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Unsafe</span></span><span>
</span><span id="line-233"></span><span>
</span><span id="line-234"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Compat.html"><span class="hs-identifier">Database.PostgreSQL.LibPQ.Compat</span></a></span><span>
</span><span id="line-235"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Enums.html"><span class="hs-identifier">Database.PostgreSQL.LibPQ.Enums</span></a></span><span>
</span><span id="line-236"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.FFI.html"><span class="hs-identifier">Database.PostgreSQL.LibPQ.FFI</span></a></span><span>
</span><span id="line-237"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html"><span class="hs-identifier">Database.PostgreSQL.LibPQ.Internal</span></a></span><span>
</span><span id="line-238"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Marshal.html"><span class="hs-identifier">Database.PostgreSQL.LibPQ.Marshal</span></a></span><span>
</span><span id="line-239"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Notify.html"><span class="hs-identifier">Database.PostgreSQL.LibPQ.Notify</span></a></span><span>
</span><span id="line-240"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Oid.html"><span class="hs-identifier">Database.PostgreSQL.LibPQ.Oid</span></a></span><span>
</span><span id="line-241"></span><span>
</span><span id="line-242"></span><span class="hs-comment">-- $dbconn</span><span>
</span><span id="line-243"></span><span class="hs-comment">-- The following functions deal with making a connection to a</span><span>
</span><span id="line-244"></span><span class="hs-comment">-- PostgreSQL backend server. An application program can have several</span><span>
</span><span id="line-245"></span><span class="hs-comment">-- backend connections open at one time. (One reason to do that is to</span><span>
</span><span id="line-246"></span><span class="hs-comment">-- access more than one database.) Each connection is represented by a</span><span>
</span><span id="line-247"></span><span class="hs-comment">-- 'Connection', which is obtained from the function 'connectdb', or</span><span>
</span><span id="line-248"></span><span class="hs-comment">-- 'connectStart'. The 'status' function should be called to check</span><span>
</span><span id="line-249"></span><span class="hs-comment">-- whether a connection was successfully made before queries are sent</span><span>
</span><span id="line-250"></span><span class="hs-comment">-- via the connection object.</span><span>
</span><span id="line-251"></span><span>
</span><span id="line-252"></span><span class="hs-comment">-- | Makes a new connection to the database server.</span><span>
</span><span id="line-253"></span><span class="hs-comment">--</span><span>
</span><span id="line-254"></span><span class="hs-comment">-- This function opens a new database connection using the parameters</span><span>
</span><span id="line-255"></span><span class="hs-comment">--  taken from the string conninfo. Its nonblocking analogues are</span><span>
</span><span id="line-256"></span><span class="hs-comment">--  'connectStart' and 'connectPoll'.</span><span>
</span><span id="line-257"></span><span class="hs-comment">--</span><span>
</span><span id="line-258"></span><span class="hs-comment">-- The passed string can be empty to use all default parameters, or it</span><span>
</span><span id="line-259"></span><span class="hs-comment">-- can contain one or more parameter settings separated by</span><span>
</span><span id="line-260"></span><span class="hs-comment">-- whitespace. Each parameter setting is in the form keyword =</span><span>
</span><span id="line-261"></span><span class="hs-comment">-- value. Spaces around the equal sign are optional. To write an empty</span><span>
</span><span id="line-262"></span><span class="hs-comment">-- value or a value containing spaces, surround it with single quotes,</span><span>
</span><span id="line-263"></span><span class="hs-comment">-- e.g., keyword = 'a value'. Single quotes and backslashes within the</span><span>
</span><span id="line-264"></span><span class="hs-comment">-- value must be escaped with a backslash, i.e., \' and \\.</span><span>
</span><span id="line-265"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#connectdb"><span class="hs-identifier hs-type">connectdb</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span> </span><span class="hs-comment">-- ^ Connection Info</span><span>
</span><span id="line-266"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-267"></span><span id="connectdb"><span class="annot"><span class="annottext">connectdb :: ByteString -&gt; IO Connection
</span><a href="Database.PostgreSQL.LibPQ.html#connectdb"><span class="hs-identifier hs-var hs-var">connectdb</span></a></span></span><span> </span><span id="local-6989586621679047159"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679047159"><span class="hs-identifier hs-var">conninfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-268"></span><span>    </span><span class="annot"><span class="annottext">IO Connection -&gt; IO Connection
forall a. IO a -&gt; IO a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mask_</span></a></span><span> </span><span class="annot"><span class="annottext">(IO Connection -&gt; IO Connection) -&gt; IO Connection -&gt; IO Connection
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-269"></span><span>       </span><span id="local-6989586621679047158"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679047158"><span class="hs-identifier hs-var">connPtr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; (CString -&gt; IO (Ptr PGconn)) -&gt; IO (Ptr PGconn)
forall a. ByteString -&gt; (CString -&gt; IO a) -&gt; IO a
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.useAsCString</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679047159"><span class="hs-identifier hs-var">conninfo</span></a></span><span> </span><span class="annot"><span class="annottext">CString -&gt; IO (Ptr PGconn)
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQconnectdb"><span class="hs-identifier hs-var">c_PQconnectdb</span></a></span><span>
</span><span id="line-270"></span><span>       </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679047158"><span class="hs-identifier hs-var">connPtr</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; Ptr PGconn -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
forall a. Ptr a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">nullPtr</span></a></span><span>
</span><span id="line-271"></span><span>           </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO Connection
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fail</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;libpq failed to allocate a PGconn structure&quot;</span></span><span>
</span><span id="line-272"></span><span>           </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-273"></span><span>             </span><span id="local-6989586621679047155"><span class="annot"><span class="annottext">MVar (Ptr CNoticeBuffer)
</span><a href="#local-6989586621679047155"><span class="hs-identifier hs-var">noticeBuffer</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr CNoticeBuffer -&gt; IO (MVar (Ptr CNoticeBuffer))
forall a. a -&gt; IO (MVar a)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">newMVar</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr CNoticeBuffer
forall a. Ptr a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">nullPtr</span></a></span><span>
</span><span id="line-274"></span><span>             </span><span id="local-6989586621679047154"><span class="annot"><span class="annottext">ForeignPtr PGconn
</span><a href="#local-6989586621679047154"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO () -&gt; IO (ForeignPtr PGconn)
forall a. Ptr a -&gt; IO () -&gt; IO (ForeignPtr a)
</span><a href="Database.PostgreSQL.LibPQ.html#newForeignPtrOnce"><span class="hs-identifier hs-var">newForeignPtrOnce</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679047158"><span class="hs-identifier hs-var">connPtr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ptr PGconn -&gt; MVar (Ptr CNoticeBuffer) -&gt; IO ()
</span><a href="Database.PostgreSQL.LibPQ.html#pqfinish"><span class="hs-identifier hs-var">pqfinish</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679047158"><span class="hs-identifier hs-var">connPtr</span></a></span><span> </span><span class="annot"><span class="annottext">MVar (Ptr CNoticeBuffer)
</span><a href="#local-6989586621679047155"><span class="hs-identifier hs-var">noticeBuffer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-275"></span><span>             </span><span class="annot"><span class="annottext">Connection -&gt; IO Connection
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Connection -&gt; IO Connection) -&gt; Connection -&gt; IO Connection
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr PGconn -&gt; MVar (Ptr CNoticeBuffer) -&gt; Connection
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#Conn"><span class="hs-identifier hs-var">Conn</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr PGconn
</span><a href="#local-6989586621679047154"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">MVar (Ptr CNoticeBuffer)
</span><a href="#local-6989586621679047155"><span class="hs-identifier hs-var">noticeBuffer</span></a></span><span>
</span><span id="line-276"></span><span>
</span><span id="line-277"></span><span class="hs-comment">-- | Make a connection to the database server in a nonblocking manner.</span><span>
</span><span id="line-278"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#connectStart"><span class="hs-identifier hs-type">connectStart</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span> </span><span class="hs-comment">-- ^ Connection Info</span><span>
</span><span id="line-279"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-280"></span><span id="connectStart"><span class="annot"><span class="annottext">connectStart :: ByteString -&gt; IO Connection
</span><a href="Database.PostgreSQL.LibPQ.html#connectStart"><span class="hs-identifier hs-var hs-var">connectStart</span></a></span></span><span> </span><span id="local-6989586621679047149"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679047149"><span class="hs-identifier hs-var">connStr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-281"></span><span>    </span><span class="annot"><span class="annottext">IO Connection -&gt; IO Connection
forall a. IO a -&gt; IO a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mask_</span></a></span><span> </span><span class="annot"><span class="annottext">(IO Connection -&gt; IO Connection) -&gt; IO Connection -&gt; IO Connection
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-282"></span><span>       </span><span id="local-6989586621679047148"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679047148"><span class="hs-identifier hs-var">connPtr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; (CString -&gt; IO (Ptr PGconn)) -&gt; IO (Ptr PGconn)
forall a. ByteString -&gt; (CString -&gt; IO a) -&gt; IO a
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.useAsCString</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679047149"><span class="hs-identifier hs-var">connStr</span></a></span><span> </span><span class="annot"><span class="annottext">CString -&gt; IO (Ptr PGconn)
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQconnectStart"><span class="hs-identifier hs-var">c_PQconnectStart</span></a></span><span>
</span><span id="line-283"></span><span>       </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679047148"><span class="hs-identifier hs-var">connPtr</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; Ptr PGconn -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
forall a. Ptr a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">nullPtr</span></a></span><span>
</span><span id="line-284"></span><span>           </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO Connection
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fail</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;libpq failed to allocate a PGconn structure&quot;</span></span><span>
</span><span id="line-285"></span><span>           </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-286"></span><span>             </span><span id="local-6989586621679047146"><span class="annot"><span class="annottext">MVar (Ptr CNoticeBuffer)
</span><a href="#local-6989586621679047146"><span class="hs-identifier hs-var">noticeBuffer</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr CNoticeBuffer -&gt; IO (MVar (Ptr CNoticeBuffer))
forall a. a -&gt; IO (MVar a)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">newMVar</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr CNoticeBuffer
forall a. Ptr a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">nullPtr</span></a></span><span>
</span><span id="line-287"></span><span>             </span><span id="local-6989586621679047145"><span class="annot"><span class="annottext">ForeignPtr PGconn
</span><a href="#local-6989586621679047145"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO () -&gt; IO (ForeignPtr PGconn)
forall a. Ptr a -&gt; IO () -&gt; IO (ForeignPtr a)
</span><a href="Database.PostgreSQL.LibPQ.html#newForeignPtrOnce"><span class="hs-identifier hs-var">newForeignPtrOnce</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679047148"><span class="hs-identifier hs-var">connPtr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ptr PGconn -&gt; MVar (Ptr CNoticeBuffer) -&gt; IO ()
</span><a href="Database.PostgreSQL.LibPQ.html#pqfinish"><span class="hs-identifier hs-var">pqfinish</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679047148"><span class="hs-identifier hs-var">connPtr</span></a></span><span> </span><span class="annot"><span class="annottext">MVar (Ptr CNoticeBuffer)
</span><a href="#local-6989586621679047146"><span class="hs-identifier hs-var">noticeBuffer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-288"></span><span>             </span><span class="annot"><span class="annottext">Connection -&gt; IO Connection
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Connection -&gt; IO Connection) -&gt; Connection -&gt; IO Connection
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr PGconn -&gt; MVar (Ptr CNoticeBuffer) -&gt; Connection
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#Conn"><span class="hs-identifier hs-var">Conn</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr PGconn
</span><a href="#local-6989586621679047145"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">MVar (Ptr CNoticeBuffer)
</span><a href="#local-6989586621679047146"><span class="hs-identifier hs-var">noticeBuffer</span></a></span><span>
</span><span id="line-289"></span><span>
</span><span id="line-290"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#pqfinish"><span class="hs-identifier hs-type">pqfinish</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Ptr</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#PGconn"><span class="hs-identifier hs-type">PGconn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MVar</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#NoticeBuffer"><span class="hs-identifier hs-type">NoticeBuffer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-291"></span><span id="pqfinish"><span class="annot"><span class="annottext">pqfinish :: Ptr PGconn -&gt; MVar (Ptr CNoticeBuffer) -&gt; IO ()
</span><a href="Database.PostgreSQL.LibPQ.html#pqfinish"><span class="hs-identifier hs-var hs-var">pqfinish</span></a></span></span><span> </span><span id="local-6989586621679047143"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679047143"><span class="hs-identifier hs-var">conn</span></a></span></span><span> </span><span id="local-6989586621679047142"><span class="annot"><span class="annottext">MVar (Ptr CNoticeBuffer)
</span><a href="#local-6989586621679047142"><span class="hs-identifier hs-var">noticeBuffer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-292"></span><span class="hs-comment">--   This covers the case when a connection is closed while other Haskell</span><span>
</span><span id="line-293"></span><span class="hs-comment">--   threads are using GHC's IO manager to wait on the descriptor.  This is</span><span>
</span><span id="line-294"></span><span class="hs-comment">--   commonly the case with asynchronous notifications, for example.  Since</span><span>
</span><span id="line-295"></span><span class="hs-comment">--   libpq is responsible for opening and closing the file descriptor, GHC's</span><span>
</span><span id="line-296"></span><span class="hs-comment">--   IO manager needs to be informed that the file descriptor has been</span><span>
</span><span id="line-297"></span><span class="hs-comment">--   closed.  The IO manager will then raise an exception in those threads.</span><span>
</span><span id="line-298"></span><span>   </span><span id="local-6989586621679047141"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679047141"><span class="hs-identifier hs-var">mfd</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQsocket"><span class="hs-identifier hs-var">c_PQsocket</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679047143"><span class="hs-identifier hs-var">conn</span></a></span><span>
</span><span id="line-299"></span><span>   </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679047141"><span class="hs-identifier hs-var">mfd</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-300"></span><span>     </span><span class="hs-glyph">-</span><span class="hs-number">1</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-comment">-- This can happen if the connection is bad/lost</span><span>
</span><span id="line-301"></span><span>           </span><span class="hs-comment">-- This case may be worth investigating further</span><span>
</span><span id="line-302"></span><span>           </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO ()
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQfinish"><span class="hs-identifier hs-var">c_PQfinish</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679047143"><span class="hs-identifier hs-var">conn</span></a></span><span>
</span><span id="line-303"></span><span>     </span><span id="local-6989586621679047138"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679047138"><span class="hs-identifier hs-var">fd</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Fd -&gt; IO ()) -&gt; Fd -&gt; IO ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">closeFdWith</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Fd
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO ()
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQfinish"><span class="hs-identifier hs-var">c_PQfinish</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679047143"><span class="hs-identifier hs-var">conn</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CInt -&gt; Fd
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Fd</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679047138"><span class="hs-identifier hs-var">fd</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-304"></span><span>
</span><span id="line-305"></span><span>   </span><span id="local-6989586621679047136"><span class="annot"><span class="annottext">Ptr CNoticeBuffer
</span><a href="#local-6989586621679047136"><span class="hs-identifier hs-var">nb</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MVar (Ptr CNoticeBuffer)
-&gt; Ptr CNoticeBuffer -&gt; IO (Ptr CNoticeBuffer)
forall a. MVar a -&gt; a -&gt; IO a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">swapMVar</span></a></span><span> </span><span class="annot"><span class="annottext">MVar (Ptr CNoticeBuffer)
</span><a href="#local-6989586621679047142"><span class="hs-identifier hs-var">noticeBuffer</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr CNoticeBuffer
forall a. Ptr a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">nullPtr</span></a></span><span>
</span><span id="line-306"></span><span>   </span><span class="annot"><span class="annottext">Ptr CNoticeBuffer -&gt; IO ()
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_free_noticebuffer"><span class="hs-identifier hs-var">c_free_noticebuffer</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr CNoticeBuffer
</span><a href="#local-6989586621679047136"><span class="hs-identifier hs-var">nb</span></a></span><span>
</span><span id="line-307"></span><span>
</span><span id="line-308"></span><span class="hs-comment">-- | Workaround for bug in 'FC.newForeignPtr' before base 4.6.  Ensure the</span><span>
</span><span id="line-309"></span><span class="hs-comment">-- finalizer is only run once, to prevent a segfault.  See GHC ticket #7170</span><span>
</span><span id="line-310"></span><span class="hs-comment">--</span><span>
</span><span id="line-311"></span><span class="hs-comment">-- Note that 'getvalue' and 'maybeBsFromForeignPtr' do not need this</span><span>
</span><span id="line-312"></span><span class="hs-comment">-- workaround, since their finalizers are just 'touchForeignPtr' calls.</span><span>
</span><span id="line-313"></span><span id="local-6989586621679047413"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#newForeignPtrOnce"><span class="hs-identifier hs-type">newForeignPtrOnce</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Ptr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679047413"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">ForeignPtr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679047413"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-314"></span><span id="newForeignPtrOnce"><span class="annot"><span class="annottext">newForeignPtrOnce :: Ptr a -&gt; IO () -&gt; IO (ForeignPtr a)
</span><a href="Database.PostgreSQL.LibPQ.html#newForeignPtrOnce"><span class="hs-identifier hs-var hs-var">newForeignPtrOnce</span></a></span></span><span> </span><span id="local-6989586621679047134"><span class="annot"><span class="annottext">Ptr a
</span><a href="#local-6989586621679047134"><span class="hs-identifier hs-var">ptr</span></a></span></span><span> </span><span id="local-6989586621679047133"><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679047133"><span class="hs-identifier hs-var">fin</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-315"></span><span>    </span><span id="local-6989586621679047132"><span class="annot"><span class="annottext">MVar (IO ())
</span><a href="#local-6989586621679047132"><span class="hs-identifier hs-var">mv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IO (MVar (IO ()))
forall a. a -&gt; IO (MVar a)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">newMVar</span></a></span><span> </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679047133"><span class="hs-identifier hs-var">fin</span></a></span><span>
</span><span id="line-316"></span><span>    </span><span class="annot"><span class="annottext">Ptr a -&gt; IO () -&gt; IO (ForeignPtr a)
forall a. Ptr a -&gt; IO () -&gt; IO (ForeignPtr a)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">FC.newForeignPtr</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr a
</span><a href="#local-6989586621679047134"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO (ForeignPtr a)) -&gt; IO () -&gt; IO (ForeignPtr a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">MVar (IO ()) -&gt; IO (Maybe (IO ()))
forall a. MVar a -&gt; IO (Maybe a)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">tryTakeMVar</span></a></span><span> </span><span class="annot"><span class="annottext">MVar (IO ())
</span><a href="#local-6989586621679047132"><span class="hs-identifier hs-var">mv</span></a></span><span> </span><span class="annot"><span class="annottext">IO (Maybe (IO ())) -&gt; (Maybe (IO ()) -&gt; IO ()) -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; (IO () -&gt; IO ()) -&gt; Maybe (IO ()) -&gt; IO ()
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IO ()
forall a. a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-317"></span><span>
</span><span id="line-318"></span><span class="hs-comment">-- | Allocate a Null Connection,  which all libpq functions</span><span>
</span><span id="line-319"></span><span class="hs-comment">-- should safely fail on.</span><span>
</span><span id="line-320"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#newNullConnection"><span class="hs-identifier hs-type">newNullConnection</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-321"></span><span id="newNullConnection"><span class="annot"><span class="annottext">newNullConnection :: IO Connection
</span><a href="Database.PostgreSQL.LibPQ.html#newNullConnection"><span class="hs-identifier hs-var hs-var">newNullConnection</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-322"></span><span>  </span><span id="local-6989586621679047128"><span class="annot"><span class="annottext">ForeignPtr PGconn
</span><a href="#local-6989586621679047128"><span class="hs-identifier hs-var">connection</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO (ForeignPtr PGconn)
forall a. Ptr a -&gt; IO (ForeignPtr a)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">newForeignPtr_</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
forall a. Ptr a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">nullPtr</span></a></span><span>
</span><span id="line-323"></span><span>  </span><span id="local-6989586621679047127"><span class="annot"><span class="annottext">MVar (Ptr CNoticeBuffer)
</span><a href="#local-6989586621679047127"><span class="hs-identifier hs-var">noticeBuffer</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr CNoticeBuffer -&gt; IO (MVar (Ptr CNoticeBuffer))
forall a. a -&gt; IO (MVar a)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">newMVar</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr CNoticeBuffer
forall a. Ptr a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">nullPtr</span></a></span><span>
</span><span id="line-324"></span><span>  </span><span class="annot"><span class="annottext">Connection -&gt; IO Connection
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Connection -&gt; IO Connection) -&gt; Connection -&gt; IO Connection
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr PGconn -&gt; MVar (Ptr CNoticeBuffer) -&gt; Connection
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#Conn"><span class="hs-identifier hs-var">Conn</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr PGconn
</span><a href="#local-6989586621679047128"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">MVar (Ptr CNoticeBuffer)
</span><a href="#local-6989586621679047127"><span class="hs-identifier hs-var">noticeBuffer</span></a></span><span>
</span><span id="line-325"></span><span>
</span><span id="line-326"></span><span class="hs-comment">-- | Test if a connection is the Null Connection.</span><span>
</span><span id="line-327"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#isNullConnection"><span class="hs-identifier hs-type">isNullConnection</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-328"></span><span id="isNullConnection"><span class="annot"><span class="annottext">isNullConnection :: Connection -&gt; Bool
</span><a href="Database.PostgreSQL.LibPQ.html#isNullConnection"><span class="hs-identifier hs-var hs-var">isNullConnection</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Conn"><span class="hs-identifier hs-type">Conn</span></a></span><span> </span><span id="local-6989586621679047126"><span class="annot"><span class="annottext">ForeignPtr PGconn
</span><a href="#local-6989586621679047126"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">MVar (Ptr CNoticeBuffer)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignPtr PGconn -&gt; Ptr PGconn
forall a. ForeignPtr a -&gt; Ptr a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Unsafe.unsafeForeignPtrToPtr</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr PGconn
</span><a href="#local-6989586621679047126"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; Ptr PGconn -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
forall a. Ptr a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">nullPtr</span></a></span><span>
</span><span id="line-329"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#isNullConnection"><span class="hs-pragma hs-type">isNullConnection</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-330"></span><span>
</span><span id="line-331"></span><span class="hs-comment">-- | If 'connectStart' succeeds, the next stage is to poll libpq so</span><span>
</span><span id="line-332"></span><span class="hs-comment">-- that it can proceed with the connection sequence. Use 'socket' to</span><span>
</span><span id="line-333"></span><span class="hs-comment">-- obtain the 'Fd' of the socket underlying the database</span><span>
</span><span id="line-334"></span><span class="hs-comment">-- connection. Loop thus: If 'connectPoll' last returned</span><span>
</span><span id="line-335"></span><span class="hs-comment">-- 'PollingReading', wait until the socket is ready to read (as</span><span>
</span><span id="line-336"></span><span class="hs-comment">-- indicated by select(), poll(), or similar system function). Then</span><span>
</span><span id="line-337"></span><span class="hs-comment">-- call 'connectPoll' again. Conversely, if 'connectPoll' last</span><span>
</span><span id="line-338"></span><span class="hs-comment">-- returned 'PollingWriting', wait until the socket is ready to write,</span><span>
</span><span id="line-339"></span><span class="hs-comment">-- then call 'connectPoll' again. If you have yet to call</span><span>
</span><span id="line-340"></span><span class="hs-comment">-- 'connectPoll', i.e., just after the call to 'connectStart', behave</span><span>
</span><span id="line-341"></span><span class="hs-comment">-- as if it last returned 'PollingWriting'. Continue this loop until</span><span>
</span><span id="line-342"></span><span class="hs-comment">-- 'connectPoll' returns 'PollingFailed', indicating the connection</span><span>
</span><span id="line-343"></span><span class="hs-comment">-- procedure has failed, or 'PollingOk', indicating the connection has</span><span>
</span><span id="line-344"></span><span class="hs-comment">-- been successfully made.</span><span>
</span><span id="line-345"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#connectPoll"><span class="hs-identifier hs-type">connectPoll</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-346"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Enums.html#PollingStatus"><span class="hs-identifier hs-type">PollingStatus</span></a></span><span>
</span><span id="line-347"></span><span id="connectPoll"><span class="annot"><span class="annottext">connectPoll :: Connection -&gt; IO PollingStatus
</span><a href="Database.PostgreSQL.LibPQ.html#connectPoll"><span class="hs-identifier hs-var hs-var">connectPoll</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Ptr PGconn -&gt; IO CInt) -&gt; Connection -&gt; IO PollingStatus
</span><a href="Database.PostgreSQL.LibPQ.html#pollHelper"><span class="hs-identifier hs-var">pollHelper</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQconnectPoll"><span class="hs-identifier hs-var">c_PQconnectPoll</span></a></span><span>
</span><span id="line-348"></span><span>
</span><span id="line-349"></span><span>
</span><span id="line-350"></span><span class="hs-comment">-- PQconndefaults</span><span>
</span><span id="line-351"></span><span class="hs-comment">-- Returns the default connection options.</span><span>
</span><span id="line-352"></span><span>
</span><span id="line-353"></span><span class="hs-comment">-- PQconninfoOption *PQconndefaults(void);</span><span>
</span><span id="line-354"></span><span>
</span><span id="line-355"></span><span class="hs-comment">-- typedef struct</span><span>
</span><span id="line-356"></span><span class="hs-comment">-- {</span><span>
</span><span id="line-357"></span><span class="hs-comment">--     char   *keyword;   /* The keyword of the option */</span><span>
</span><span id="line-358"></span><span class="hs-comment">--     char   *envvar;    /* Fallback environment variable name */</span><span>
</span><span id="line-359"></span><span class="hs-comment">--     char   *compiled;  /* Fallback compiled in default value */</span><span>
</span><span id="line-360"></span><span class="hs-comment">--     char   *val;       /* Option's current value, or NULL */</span><span>
</span><span id="line-361"></span><span class="hs-comment">--     char   *label;     /* Label for field in connect dialog */</span><span>
</span><span id="line-362"></span><span class="hs-comment">--     char   *dispchar;  /* Indicates how to display this field</span><span>
</span><span id="line-363"></span><span class="hs-comment">--                           in a connect dialog. Values are:</span><span>
</span><span id="line-364"></span><span class="hs-comment">--                           &quot;&quot;        Display entered value as is</span><span>
</span><span id="line-365"></span><span class="hs-comment">--                           &quot;*&quot;       Password field - hide value</span><span>
</span><span id="line-366"></span><span class="hs-comment">--                           &quot;D&quot;       Debug option - don't show by default */</span><span>
</span><span id="line-367"></span><span class="hs-comment">--     int     dispsize;  /* Field size in characters for dialog */</span><span>
</span><span id="line-368"></span><span class="hs-comment">-- } PQconninfoOption;</span><span>
</span><span id="line-369"></span><span class="hs-comment">-- Returns a connection options array. This can be used to determine all possible PQconnectdb options and their current default values. The return value points to an array of PQconninfoOption structures, which ends with an entry having a null keyword pointer. The null pointer is returned if memory could not be allocated. Note that the current default values (val fields) will depend on environment variables and other context. Callers must treat the connection options data as read-only.</span><span>
</span><span id="line-370"></span><span>
</span><span id="line-371"></span><span class="hs-comment">-- After processing the options array, free it by passing it to PQconninfoFree. If this is not done, a small amount of memory is leaked for each call to PQconndefaults.</span><span>
</span><span id="line-372"></span><span>
</span><span id="line-373"></span><span class="hs-comment">-- PQconninfoParse</span><span>
</span><span id="line-374"></span><span class="hs-comment">-- Returns parsed connection options from the provided connection string.</span><span>
</span><span id="line-375"></span><span>
</span><span id="line-376"></span><span class="hs-comment">-- PQconninfoOption *PQconninfoParse(const char *conninfo, char **errmsg);</span><span>
</span><span id="line-377"></span><span class="hs-comment">-- Parses a connection string and returns the resulting options as an array; or returns NULL if there is a problem with the connection string. This can be used to determine the PQconnectdb options in the provided connection string. The return value points to an array of PQconninfoOption structures, which ends with an entry having a null keyword pointer.</span><span>
</span><span id="line-378"></span><span>
</span><span id="line-379"></span><span class="hs-comment">-- Note that only options explicitly specified in the string will have values set in the result array; no defaults are inserted.</span><span>
</span><span id="line-380"></span><span>
</span><span id="line-381"></span><span class="hs-comment">-- If errmsg is not NULL, then *errmsg is set to NULL on success, else to a malloc'd error string explaining the problem. (It is also possible for *errmsg to be set to NULL even when NULL is returned; this indicates an out-of-memory situation.)</span><span>
</span><span id="line-382"></span><span>
</span><span id="line-383"></span><span class="hs-comment">-- After processing the options array, free it by passing it to PQconninfoFree. If this is not done, some memory is leaked for each call to PQconninfoParse. Conversely, if an error occurs and errmsg is not NULL, be sure to free the error string using PQfreemem.</span><span>
</span><span id="line-384"></span><span>
</span><span id="line-385"></span><span>
</span><span id="line-386"></span><span class="hs-comment">-- | Resets the communication channel to the server.</span><span>
</span><span id="line-387"></span><span class="hs-comment">--</span><span>
</span><span id="line-388"></span><span class="hs-comment">-- This function will close the connection to the server and attempt</span><span>
</span><span id="line-389"></span><span class="hs-comment">-- to reestablish a new connection to the same server, using all the</span><span>
</span><span id="line-390"></span><span class="hs-comment">-- same parameters previously used. This might be useful for error</span><span>
</span><span id="line-391"></span><span class="hs-comment">-- recovery if a working connection is lost.</span><span>
</span><span id="line-392"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#reset"><span class="hs-identifier hs-type">reset</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-393"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-394"></span><span id="reset"><span class="annot"><span class="annottext">reset :: Connection -&gt; IO ()
</span><a href="Database.PostgreSQL.LibPQ.html#reset"><span class="hs-identifier hs-var hs-var">reset</span></a></span></span><span> </span><span id="local-6989586621679047122"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679047122"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO ()) -&gt; IO ()
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679047122"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO ()
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQreset"><span class="hs-identifier hs-var">c_PQreset</span></a></span><span>
</span><span id="line-395"></span><span>
</span><span id="line-396"></span><span>
</span><span id="line-397"></span><span class="hs-comment">-- | Reset the communication channel to the server, in a nonblocking manner.</span><span>
</span><span id="line-398"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#resetStart"><span class="hs-identifier hs-type">resetStart</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-399"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-400"></span><span id="resetStart"><span class="annot"><span class="annottext">resetStart :: Connection -&gt; IO Bool
</span><a href="Database.PostgreSQL.LibPQ.html#resetStart"><span class="hs-identifier hs-var hs-var">resetStart</span></a></span></span><span> </span><span id="local-6989586621679047119"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679047119"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-401"></span><span>    </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO Bool
forall b.
FromCInt b =&gt;
Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#enumFromConn"><span class="hs-identifier hs-var">enumFromConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679047119"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQresetStart"><span class="hs-identifier hs-var">c_PQresetStart</span></a></span><span>
</span><span id="line-402"></span><span>
</span><span id="line-403"></span><span class="hs-comment">-- | To initiate a connection reset, call 'resetStart'. If it returns</span><span>
</span><span id="line-404"></span><span class="hs-comment">-- 'False', the reset has failed. If it returns 'True', poll the reset</span><span>
</span><span id="line-405"></span><span class="hs-comment">-- using 'resetPoll' in exactly the same way as you would create the</span><span>
</span><span id="line-406"></span><span class="hs-comment">-- connection using 'connectPoll'.</span><span>
</span><span id="line-407"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#resetPoll"><span class="hs-identifier hs-type">resetPoll</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-408"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Enums.html#PollingStatus"><span class="hs-identifier hs-type">PollingStatus</span></a></span><span>
</span><span id="line-409"></span><span id="resetPoll"><span class="annot"><span class="annottext">resetPoll :: Connection -&gt; IO PollingStatus
</span><a href="Database.PostgreSQL.LibPQ.html#resetPoll"><span class="hs-identifier hs-var hs-var">resetPoll</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Ptr PGconn -&gt; IO CInt) -&gt; Connection -&gt; IO PollingStatus
</span><a href="Database.PostgreSQL.LibPQ.html#pollHelper"><span class="hs-identifier hs-var">pollHelper</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQresetPoll"><span class="hs-identifier hs-var">c_PQresetPoll</span></a></span><span>
</span><span id="line-410"></span><span>
</span><span id="line-411"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#pollHelper"><span class="hs-identifier hs-type">pollHelper</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Ptr</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#PGconn"><span class="hs-identifier hs-type">PGconn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">CInt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-412"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-413"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Enums.html#PollingStatus"><span class="hs-identifier hs-type">PollingStatus</span></a></span><span>
</span><span id="line-414"></span><span id="pollHelper"><span class="annot"><span class="annottext">pollHelper :: (Ptr PGconn -&gt; IO CInt) -&gt; Connection -&gt; IO PollingStatus
</span><a href="Database.PostgreSQL.LibPQ.html#pollHelper"><span class="hs-identifier hs-var hs-var">pollHelper</span></a></span></span><span> </span><span id="local-6989586621679047115"><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO CInt
</span><a href="#local-6989586621679047115"><span class="hs-identifier hs-var">poller</span></a></span></span><span> </span><span id="local-6989586621679047114"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679047114"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-415"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679047113"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679047113"><span class="hs-identifier hs-var">code</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO CInt
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679047114"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO CInt
</span><a href="#local-6989586621679047115"><span class="hs-identifier hs-var">poller</span></a></span><span>
</span><span id="line-416"></span><span>       </span><span class="annot"><span class="annottext">IO PollingStatus
-&gt; (PollingStatus -&gt; IO PollingStatus)
-&gt; Maybe PollingStatus
-&gt; IO PollingStatus
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maybe</span></a></span><span>
</span><span id="line-417"></span><span>         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; IO PollingStatus
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fail</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO PollingStatus) -&gt; String -&gt; IO PollingStatus
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;unexpected polling status &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679047113"><span class="hs-identifier hs-var">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-418"></span><span>         </span><span class="annot"><span class="annottext">PollingStatus -&gt; IO PollingStatus
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span>
</span><span id="line-419"></span><span>         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CInt -&gt; Maybe PollingStatus
forall a. FromCInt a =&gt; CInt -&gt; Maybe a
</span><a href="Database.PostgreSQL.LibPQ.Enums.html#fromCInt"><span class="hs-identifier hs-var">fromCInt</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679047113"><span class="hs-identifier hs-var">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-420"></span><span>
</span><span id="line-421"></span><span class="hs-comment">-- | Closes the connection to the server.</span><span>
</span><span id="line-422"></span><span class="hs-comment">--</span><span>
</span><span id="line-423"></span><span class="hs-comment">-- Note that the 'Connection' must not be used again after 'finish'</span><span>
</span><span id="line-424"></span><span class="hs-comment">-- has been called.</span><span>
</span><span id="line-425"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#finish"><span class="hs-identifier hs-type">finish</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-426"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-427"></span><span id="finish"><span class="annot"><span class="annottext">finish :: Connection -&gt; IO ()
</span><a href="Database.PostgreSQL.LibPQ.html#finish"><span class="hs-identifier hs-var hs-var">finish</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Conn"><span class="hs-identifier hs-type">Conn</span></a></span><span> </span><span id="local-6989586621679047110"><span class="annot"><span class="annottext">ForeignPtr PGconn
</span><a href="#local-6989586621679047110"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="annot"><span class="annottext">MVar (Ptr CNoticeBuffer)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-428"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">ForeignPtr PGconn -&gt; IO ()
forall a. ForeignPtr a -&gt; IO ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">finalizeForeignPtr</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr PGconn
</span><a href="#local-6989586621679047110"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-429"></span><span>
</span><span id="line-430"></span><span>
</span><span id="line-431"></span><span class="hs-comment">-- $connstatus</span><span>
</span><span id="line-432"></span><span class="hs-comment">-- These functions can be used to interrogate the status of an</span><span>
</span><span id="line-433"></span><span class="hs-comment">-- existing database connection object.</span><span>
</span><span id="line-434"></span><span>
</span><span id="line-435"></span><span>
</span><span id="line-436"></span><span class="hs-comment">-- | Returns the database name of the connection.</span><span>
</span><span id="line-437"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#db"><span class="hs-identifier hs-type">db</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-438"></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-439"></span><span id="db"><span class="annot"><span class="annottext">db :: Connection -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#db"><span class="hs-identifier hs-var hs-var">db</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Ptr PGconn -&gt; IO CString) -&gt; Connection -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#statusString"><span class="hs-identifier hs-var">statusString</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO CString
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQdb"><span class="hs-identifier hs-var">c_PQdb</span></a></span><span>
</span><span id="line-440"></span><span>
</span><span id="line-441"></span><span>
</span><span id="line-442"></span><span class="hs-comment">-- | Returns the user name of the connection.</span><span>
</span><span id="line-443"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#user"><span class="hs-identifier hs-type">user</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-444"></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-445"></span><span id="user"><span class="annot"><span class="annottext">user :: Connection -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#user"><span class="hs-identifier hs-var hs-var">user</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Ptr PGconn -&gt; IO CString) -&gt; Connection -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#statusString"><span class="hs-identifier hs-var">statusString</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO CString
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQuser"><span class="hs-identifier hs-var">c_PQuser</span></a></span><span>
</span><span id="line-446"></span><span>
</span><span id="line-447"></span><span>
</span><span id="line-448"></span><span class="hs-comment">-- | Returns the password of the connection.</span><span>
</span><span id="line-449"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#pass"><span class="hs-identifier hs-type">pass</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-450"></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-451"></span><span id="pass"><span class="annot"><span class="annottext">pass :: Connection -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#pass"><span class="hs-identifier hs-var hs-var">pass</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Ptr PGconn -&gt; IO CString) -&gt; Connection -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#statusString"><span class="hs-identifier hs-var">statusString</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO CString
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQpass"><span class="hs-identifier hs-var">c_PQpass</span></a></span><span>
</span><span id="line-452"></span><span>
</span><span id="line-453"></span><span>
</span><span id="line-454"></span><span class="hs-comment">-- | Returns the server host name of the connection.</span><span>
</span><span id="line-455"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#host"><span class="hs-identifier hs-type">host</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-456"></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-457"></span><span id="host"><span class="annot"><span class="annottext">host :: Connection -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#host"><span class="hs-identifier hs-var hs-var">host</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Ptr PGconn -&gt; IO CString) -&gt; Connection -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#statusString"><span class="hs-identifier hs-var">statusString</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO CString
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQhost"><span class="hs-identifier hs-var">c_PQhost</span></a></span><span>
</span><span id="line-458"></span><span>
</span><span id="line-459"></span><span>
</span><span id="line-460"></span><span class="hs-comment">-- | Returns the port of the connection.</span><span>
</span><span id="line-461"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#port"><span class="hs-identifier hs-type">port</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-462"></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-463"></span><span id="port"><span class="annot"><span class="annottext">port :: Connection -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#port"><span class="hs-identifier hs-var hs-var">port</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Ptr PGconn -&gt; IO CString) -&gt; Connection -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#statusString"><span class="hs-identifier hs-var">statusString</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO CString
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQport"><span class="hs-identifier hs-var">c_PQport</span></a></span><span>
</span><span id="line-464"></span><span>
</span><span id="line-465"></span><span>
</span><span id="line-466"></span><span class="hs-comment">-- | Returns the command-line options passed in the connection request.</span><span>
</span><span id="line-467"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#options"><span class="hs-identifier hs-type">options</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-468"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-469"></span><span id="options"><span class="annot"><span class="annottext">options :: Connection -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#options"><span class="hs-identifier hs-var hs-var">options</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Ptr PGconn -&gt; IO CString) -&gt; Connection -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#statusString"><span class="hs-identifier hs-var">statusString</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO CString
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQoptions"><span class="hs-identifier hs-var">c_PQoptions</span></a></span><span>
</span><span id="line-470"></span><span>
</span><span id="line-471"></span><span>
</span><span id="line-472"></span><span class="hs-comment">-- | Helper function that checks for nullPtrs and returns the empty</span><span>
</span><span id="line-473"></span><span class="hs-comment">-- string.</span><span>
</span><span id="line-474"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#statusString"><span class="hs-identifier hs-type">statusString</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Ptr</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#PGconn"><span class="hs-identifier hs-type">PGconn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">CString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-475"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-476"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-477"></span><span id="statusString"><span class="annot"><span class="annottext">statusString :: (Ptr PGconn -&gt; IO CString) -&gt; Connection -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#statusString"><span class="hs-identifier hs-var hs-var">statusString</span></a></span></span><span> </span><span id="local-6989586621679047102"><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO CString
</span><a href="#local-6989586621679047102"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679047101"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679047101"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-478"></span><span>    </span><span class="annot"><span class="annottext">Connection
-&gt; (Ptr PGconn -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679047101"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString))
-&gt; (Ptr PGconn -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679047100"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679047100"><span class="hs-identifier hs-var">ptr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-479"></span><span>        </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679047099"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679047099"><span class="hs-identifier hs-var">cstr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO CString
</span><a href="#local-6989586621679047102"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679047100"><span class="hs-identifier hs-var">ptr</span></a></span><span>
</span><span id="line-480"></span><span>           </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679047099"><span class="hs-identifier hs-var">cstr</span></a></span><span> </span><span class="annot"><span class="annottext">CString -&gt; CString -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">CString
forall a. Ptr a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">nullPtr</span></a></span><span>
</span><span id="line-481"></span><span>             </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Maybe ByteString -&gt; IO (Maybe ByteString)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ByteString
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-482"></span><span>             </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Maybe ByteString
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Maybe ByteString)
-&gt; IO ByteString -&gt; IO (Maybe ByteString)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`fmap`</span></a></span><span> </span><span class="annot"><span class="annottext">CString -&gt; IO ByteString
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.packCString</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679047099"><span class="hs-identifier hs-var">cstr</span></a></span><span>
</span><span id="line-483"></span><span>
</span><span id="line-484"></span><span>
</span><span id="line-485"></span><span>
</span><span id="line-486"></span><span class="hs-comment">-- | Returns the status of the connection.</span><span>
</span><span id="line-487"></span><span class="hs-comment">--</span><span>
</span><span id="line-488"></span><span class="hs-comment">-- The status can be one of a number of values. However, only two of</span><span>
</span><span id="line-489"></span><span class="hs-comment">-- these are seen outside of an asynchronous connection procedure:</span><span>
</span><span id="line-490"></span><span class="hs-comment">-- 'ConnectionOk' and 'ConnectionBad'. A good connection to the</span><span>
</span><span id="line-491"></span><span class="hs-comment">-- database has the status 'ConnectionOk'. A failed connection attempt</span><span>
</span><span id="line-492"></span><span class="hs-comment">-- is signaled by status 'ConnectionBad'. Ordinarily, an OK status</span><span>
</span><span id="line-493"></span><span class="hs-comment">-- will remain so until 'finish', but a communications failure might</span><span>
</span><span id="line-494"></span><span class="hs-comment">-- result in the status changing to 'ConnectionBad' prematurely. In</span><span>
</span><span id="line-495"></span><span class="hs-comment">-- that case the application could try to recover by calling 'reset'.</span><span>
</span><span id="line-496"></span><span class="hs-comment">--</span><span>
</span><span id="line-497"></span><span class="hs-comment">-- See the entry for 'connectStart' and 'connectPoll' with regards to</span><span>
</span><span id="line-498"></span><span class="hs-comment">-- other status codes that might be seen.</span><span>
</span><span id="line-499"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#status"><span class="hs-identifier hs-type">status</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-500"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Enums.html#ConnStatus"><span class="hs-identifier hs-type">ConnStatus</span></a></span><span>
</span><span id="line-501"></span><span id="status"><span class="annot"><span class="annottext">status :: Connection -&gt; IO ConnStatus
</span><a href="Database.PostgreSQL.LibPQ.html#status"><span class="hs-identifier hs-var hs-var">status</span></a></span></span><span> </span><span id="local-6989586621679047097"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679047097"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-502"></span><span>  </span><span id="local-6989586621679047096"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679047096"><span class="hs-identifier hs-var">stat</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO CInt
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679047097"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQstatus"><span class="hs-identifier hs-var">c_PQstatus</span></a></span><span>
</span><span id="line-503"></span><span>  </span><span class="annot"><span class="annottext">IO ConnStatus
-&gt; (ConnStatus -&gt; IO ConnStatus)
-&gt; Maybe ConnStatus
-&gt; IO ConnStatus
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maybe</span></a></span><span>
</span><span id="line-504"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; IO ConnStatus
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fail</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO ConnStatus) -&gt; String -&gt; IO ConnStatus
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unknown connection status &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679047096"><span class="hs-identifier hs-var">stat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-505"></span><span>    </span><span class="annot"><span class="annottext">ConnStatus -&gt; IO ConnStatus
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span>
</span><span id="line-506"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CInt -&gt; Maybe ConnStatus
forall a. FromCInt a =&gt; CInt -&gt; Maybe a
</span><a href="Database.PostgreSQL.LibPQ.Enums.html#fromCInt"><span class="hs-identifier hs-var">fromCInt</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679047096"><span class="hs-identifier hs-var">stat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-507"></span><span>
</span><span id="line-508"></span><span>
</span><span id="line-509"></span><span class="hs-comment">-- | Returns the current in-transaction status of the server.</span><span>
</span><span id="line-510"></span><span class="hs-comment">--</span><span>
</span><span id="line-511"></span><span class="hs-comment">-- 'TransActive' is reported only when a query has been sent to the</span><span>
</span><span id="line-512"></span><span class="hs-comment">-- server and not yet completed.</span><span>
</span><span id="line-513"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#transactionStatus"><span class="hs-identifier hs-type">transactionStatus</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-514"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Enums.html#TransactionStatus"><span class="hs-identifier hs-type">TransactionStatus</span></a></span><span>
</span><span id="line-515"></span><span id="transactionStatus"><span class="annot"><span class="annottext">transactionStatus :: Connection -&gt; IO TransactionStatus
</span><a href="Database.PostgreSQL.LibPQ.html#transactionStatus"><span class="hs-identifier hs-var hs-var">transactionStatus</span></a></span></span><span> </span><span id="local-6989586621679047094"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679047094"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-516"></span><span>  </span><span id="local-6989586621679047093"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679047093"><span class="hs-identifier hs-var">stat</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO CInt
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679047094"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQtransactionStatus"><span class="hs-identifier hs-var">c_PQtransactionStatus</span></a></span><span>
</span><span id="line-517"></span><span>  </span><span class="annot"><span class="annottext">IO TransactionStatus
-&gt; (TransactionStatus -&gt; IO TransactionStatus)
-&gt; Maybe TransactionStatus
-&gt; IO TransactionStatus
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maybe</span></a></span><span>
</span><span id="line-518"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; IO TransactionStatus
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fail</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO TransactionStatus) -&gt; String -&gt; IO TransactionStatus
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unknown transaction status &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679047093"><span class="hs-identifier hs-var">stat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-519"></span><span>    </span><span class="annot"><span class="annottext">TransactionStatus -&gt; IO TransactionStatus
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span>
</span><span id="line-520"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CInt -&gt; Maybe TransactionStatus
forall a. FromCInt a =&gt; CInt -&gt; Maybe a
</span><a href="Database.PostgreSQL.LibPQ.Enums.html#fromCInt"><span class="hs-identifier hs-var">fromCInt</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679047093"><span class="hs-identifier hs-var">stat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-521"></span><span>
</span><span id="line-522"></span><span>
</span><span id="line-523"></span><span class="hs-comment">-- | Looks up a current parameter setting of the server.</span><span>
</span><span id="line-524"></span><span class="hs-comment">--</span><span>
</span><span id="line-525"></span><span class="hs-comment">-- Certain parameter values are reported by the server automatically</span><span>
</span><span id="line-526"></span><span class="hs-comment">-- at connection startup or whenever their values</span><span>
</span><span id="line-527"></span><span class="hs-comment">-- change. 'parameterStatus' can be used to interrogate these</span><span>
</span><span id="line-528"></span><span class="hs-comment">-- settings. It returns the current value of a parameter if known, or</span><span>
</span><span id="line-529"></span><span class="hs-comment">-- 'Nothing' if the parameter is not known.</span><span>
</span><span id="line-530"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#parameterStatus"><span class="hs-identifier hs-type">parameterStatus</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-531"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span> </span><span class="hs-comment">-- ^ paramName</span><span>
</span><span id="line-532"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-533"></span><span id="parameterStatus"><span class="annot"><span class="annottext">parameterStatus :: Connection -&gt; ByteString -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#parameterStatus"><span class="hs-identifier hs-var hs-var">parameterStatus</span></a></span></span><span> </span><span id="local-6989586621679047091"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679047091"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span id="local-6989586621679047090"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679047090"><span class="hs-identifier hs-var">paramName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-534"></span><span>    </span><span class="annot"><span class="annottext">Connection
-&gt; (Ptr PGconn -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679047091"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString))
-&gt; (Ptr PGconn -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679047089"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679047089"><span class="hs-identifier hs-var">connPtr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-535"></span><span>        </span><span class="annot"><span class="annottext">ByteString
-&gt; (CString -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall a. ByteString -&gt; (CString -&gt; IO a) -&gt; IO a
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.useAsCString</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679047090"><span class="hs-identifier hs-var">paramName</span></a></span><span> </span><span class="annot"><span class="annottext">((CString -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString))
-&gt; (CString -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679047088"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679047088"><span class="hs-identifier hs-var">paramNamePtr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-536"></span><span>        </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679047087"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679047087"><span class="hs-identifier hs-var">cstr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; CString -&gt; IO CString
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQparameterStatus"><span class="hs-identifier hs-var">c_PQparameterStatus</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679047089"><span class="hs-identifier hs-var">connPtr</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679047088"><span class="hs-identifier hs-var">paramNamePtr</span></a></span><span>
</span><span id="line-537"></span><span>           </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679047087"><span class="hs-identifier hs-var">cstr</span></a></span><span> </span><span class="annot"><span class="annottext">CString -&gt; CString -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">CString
forall a. Ptr a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">nullPtr</span></a></span><span>
</span><span id="line-538"></span><span>             </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Maybe ByteString -&gt; IO (Maybe ByteString)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ByteString
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-539"></span><span>             </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Maybe ByteString
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Maybe ByteString)
-&gt; IO ByteString -&gt; IO (Maybe ByteString)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`fmap`</span></a></span><span> </span><span class="annot"><span class="annottext">CString -&gt; IO ByteString
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.packCString</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679047087"><span class="hs-identifier hs-var">cstr</span></a></span><span>
</span><span id="line-540"></span><span>
</span><span id="line-541"></span><span>
</span><span id="line-542"></span><span class="hs-comment">-- | Interrogates the frontend/backend protocol being used.</span><span>
</span><span id="line-543"></span><span class="hs-comment">--</span><span>
</span><span id="line-544"></span><span class="hs-comment">-- Applications might wish to use this to determine whether certain</span><span>
</span><span id="line-545"></span><span class="hs-comment">-- features are supported. Currently, the possible values are 2 (2.0</span><span>
</span><span id="line-546"></span><span class="hs-comment">-- protocol), 3 (3.0 protocol), or zero (connection bad). This will</span><span>
</span><span id="line-547"></span><span class="hs-comment">-- not change after connection startup is complete, but it could</span><span>
</span><span id="line-548"></span><span class="hs-comment">-- theoretically change during a connection reset. The 3.0 protocol</span><span>
</span><span id="line-549"></span><span class="hs-comment">-- will normally be used when communicating with PostgreSQL 7.4 or</span><span>
</span><span id="line-550"></span><span class="hs-comment">-- later servers; pre-7.4 servers support only protocol 2.0. (Protocol</span><span>
</span><span id="line-551"></span><span class="hs-comment">-- 1.0 is obsolete and not supported by libpq.)</span><span>
</span><span id="line-552"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#protocolVersion"><span class="hs-identifier hs-type">protocolVersion</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-553"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-554"></span><span id="protocolVersion"><span class="annot"><span class="annottext">protocolVersion :: Connection -&gt; IO Int
</span><a href="Database.PostgreSQL.LibPQ.html#protocolVersion"><span class="hs-identifier hs-var hs-var">protocolVersion</span></a></span></span><span> </span><span id="local-6989586621679047085"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679047085"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-555"></span><span>    </span><span class="annot"><span class="annottext">(CInt -&gt; Int) -&gt; IO CInt -&gt; IO Int
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(IO CInt -&gt; IO Int) -&gt; IO CInt -&gt; IO Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO CInt
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679047085"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQprotocolVersion"><span class="hs-identifier hs-var">c_PQprotocolVersion</span></a></span><span>
</span><span id="line-556"></span><span>
</span><span id="line-557"></span><span>
</span><span id="line-558"></span><span class="hs-comment">-- | Returns an integer representing the backend version.</span><span>
</span><span id="line-559"></span><span class="hs-comment">--</span><span>
</span><span id="line-560"></span><span class="hs-comment">-- Applications might use this to determine the version of the</span><span>
</span><span id="line-561"></span><span class="hs-comment">-- database server they are connected to. The number is formed by</span><span>
</span><span id="line-562"></span><span class="hs-comment">-- converting the major, minor, and revision numbers into</span><span>
</span><span id="line-563"></span><span class="hs-comment">-- two-decimal-digit numbers and appending them together. For example,</span><span>
</span><span id="line-564"></span><span class="hs-comment">-- version 8.1.5 will be returned as 80105, and version 8.2 will be</span><span>
</span><span id="line-565"></span><span class="hs-comment">-- returned as 80200 (leading zeroes are not shown). Zero is returned</span><span>
</span><span id="line-566"></span><span class="hs-comment">-- if the connection is bad.</span><span>
</span><span id="line-567"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#serverVersion"><span class="hs-identifier hs-type">serverVersion</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-568"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-569"></span><span id="serverVersion"><span class="annot"><span class="annottext">serverVersion :: Connection -&gt; IO Int
</span><a href="Database.PostgreSQL.LibPQ.html#serverVersion"><span class="hs-identifier hs-var hs-var">serverVersion</span></a></span></span><span> </span><span id="local-6989586621679047083"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679047083"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-570"></span><span>    </span><span class="annot"><span class="annottext">(CInt -&gt; Int) -&gt; IO CInt -&gt; IO Int
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(IO CInt -&gt; IO Int) -&gt; IO CInt -&gt; IO Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO CInt
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679047083"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQserverVersion"><span class="hs-identifier hs-var">c_PQserverVersion</span></a></span><span>
</span><span id="line-571"></span><span>
</span><span id="line-572"></span><span class="hs-comment">-- | Return the version of libpq that is being used.</span><span>
</span><span id="line-573"></span><span class="hs-comment">--</span><span>
</span><span id="line-574"></span><span class="hs-comment">-- The result of this function can be used to determine, at</span><span>
</span><span id="line-575"></span><span class="hs-comment">-- run time, if specific functionality is available in the currently</span><span>
</span><span id="line-576"></span><span class="hs-comment">-- loaded version of libpq. The function can be used, for example,</span><span>
</span><span id="line-577"></span><span class="hs-comment">-- to determine which connection options are available for</span><span>
</span><span id="line-578"></span><span class="hs-comment">-- PQconnectdb or if the hex bytea output added in PostgreSQL 9.0 is supported.</span><span>
</span><span id="line-579"></span><span class="hs-comment">--</span><span>
</span><span id="line-580"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#libpqVersion"><span class="hs-identifier hs-type">libpqVersion</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-581"></span><span id="libpqVersion"><span class="annot"><span class="annottext">libpqVersion :: IO Int
</span><a href="Database.PostgreSQL.LibPQ.html#libpqVersion"><span class="hs-identifier hs-var hs-var">libpqVersion</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CInt -&gt; Int) -&gt; IO CInt -&gt; IO Int
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQlibVersion"><span class="hs-identifier hs-var">c_PQlibVersion</span></a></span><span>
</span><span id="line-582"></span><span>
</span><span id="line-583"></span><span class="hs-comment">-- | Returns the error message most recently generated by an operation</span><span>
</span><span id="line-584"></span><span class="hs-comment">-- on the connection.</span><span>
</span><span id="line-585"></span><span class="hs-comment">--</span><span>
</span><span id="line-586"></span><span class="hs-comment">-- Nearly all libpq functions will set a message for 'errorMessage' if</span><span>
</span><span id="line-587"></span><span class="hs-comment">-- they fail. Note that by libpq convention, a nonempty 'errorMessage'</span><span>
</span><span id="line-588"></span><span class="hs-comment">-- result can be multiple lines, and will include a trailing</span><span>
</span><span id="line-589"></span><span class="hs-comment">-- newline. The result string should not be expected to remain the</span><span>
</span><span id="line-590"></span><span class="hs-comment">-- same across operations on the 'Connection'.</span><span>
</span><span id="line-591"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#errorMessage"><span class="hs-identifier hs-type">errorMessage</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-592"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-593"></span><span id="errorMessage"><span class="annot"><span class="annottext">errorMessage :: Connection -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#errorMessage"><span class="hs-identifier hs-var hs-var">errorMessage</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Ptr PGconn -&gt; IO CString) -&gt; Connection -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#statusString"><span class="hs-identifier hs-var">statusString</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO CString
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQerrorMessage"><span class="hs-identifier hs-var">c_PQerrorMessage</span></a></span><span>
</span><span id="line-594"></span><span>
</span><span id="line-595"></span><span class="hs-comment">-- | Obtains the file descriptor number of the connection socket to</span><span>
</span><span id="line-596"></span><span class="hs-comment">-- the server. (This will not change during normal operation, but</span><span>
</span><span id="line-597"></span><span class="hs-comment">-- could change during connection setup or reset.)</span><span>
</span><span id="line-598"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#socket"><span class="hs-identifier hs-type">socket</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-599"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Fd</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-600"></span><span id="socket"><span class="annot"><span class="annottext">socket :: Connection -&gt; IO (Maybe Fd)
</span><a href="Database.PostgreSQL.LibPQ.html#socket"><span class="hs-identifier hs-var hs-var">socket</span></a></span></span><span> </span><span id="local-6989586621679047079"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679047079"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-601"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679047078"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679047078"><span class="hs-identifier hs-var">cFd</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO CInt
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679047079"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQsocket"><span class="hs-identifier hs-var">c_PQsocket</span></a></span><span>
</span><span id="line-602"></span><span>       </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679047078"><span class="hs-identifier hs-var">cFd</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-603"></span><span>         </span><span class="hs-glyph">-</span><span class="hs-number">1</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Fd -&gt; IO (Maybe Fd)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Fd
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-604"></span><span>         </span><span class="annot"><span class="annottext">CInt
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Fd -&gt; IO (Maybe Fd)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Fd -&gt; IO (Maybe Fd)) -&gt; Maybe Fd -&gt; IO (Maybe Fd)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Fd -&gt; Maybe Fd
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(Fd -&gt; Maybe Fd) -&gt; Fd -&gt; Maybe Fd
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; Fd
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Fd</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679047078"><span class="hs-identifier hs-var">cFd</span></a></span><span>
</span><span id="line-605"></span><span>
</span><span id="line-606"></span><span>
</span><span id="line-607"></span><span class="hs-comment">-- | Returns the process 'CPid' of the backend server process</span><span>
</span><span id="line-608"></span><span class="hs-comment">-- handling this connection.</span><span>
</span><span id="line-609"></span><span class="hs-comment">--</span><span>
</span><span id="line-610"></span><span class="hs-comment">-- The backend PID is useful for debugging purposes and for comparison</span><span>
</span><span id="line-611"></span><span class="hs-comment">-- to NOTIFY messages (which include the PID of the notifying backend</span><span>
</span><span id="line-612"></span><span class="hs-comment">-- process). Note that the PID belongs to a process executing on the</span><span>
</span><span id="line-613"></span><span class="hs-comment">-- database server host, not the local host!</span><span>
</span><span id="line-614"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#backendPID"><span class="hs-identifier hs-type">backendPID</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-615"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">CPid</span></a></span><span>
</span><span id="line-616"></span><span id="backendPID"><span class="annot"><span class="annottext">backendPID :: Connection -&gt; IO CPid
</span><a href="Database.PostgreSQL.LibPQ.html#backendPID"><span class="hs-identifier hs-var hs-var">backendPID</span></a></span></span><span> </span><span id="local-6989586621679047077"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679047077"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-617"></span><span>    </span><span class="annot"><span class="annottext">(CInt -&gt; CPid) -&gt; IO CInt -&gt; IO CPid
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; CPid
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(IO CInt -&gt; IO CPid) -&gt; IO CInt -&gt; IO CPid
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO CInt
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679047077"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQbackendPID"><span class="hs-identifier hs-var">c_PQbackendPID</span></a></span><span>
</span><span id="line-618"></span><span>
</span><span id="line-619"></span><span>
</span><span id="line-620"></span><span class="hs-comment">-- | Returns 'True' if the connection authentication method required a</span><span>
</span><span id="line-621"></span><span class="hs-comment">-- password, but none was available. Returns 'False' if not.</span><span>
</span><span id="line-622"></span><span class="hs-comment">--</span><span>
</span><span id="line-623"></span><span class="hs-comment">-- This function can be applied after a failed connection attempt to</span><span>
</span><span id="line-624"></span><span class="hs-comment">-- decide whether to prompt the user for a password.</span><span>
</span><span id="line-625"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#connectionNeedsPassword"><span class="hs-identifier hs-type">connectionNeedsPassword</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-626"></span><span>                        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-627"></span><span id="connectionNeedsPassword"><span class="annot"><span class="annottext">connectionNeedsPassword :: Connection -&gt; IO Bool
</span><a href="Database.PostgreSQL.LibPQ.html#connectionNeedsPassword"><span class="hs-identifier hs-var hs-var">connectionNeedsPassword</span></a></span></span><span> </span><span id="local-6989586621679047075"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679047075"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-628"></span><span>    </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO Bool
forall b.
FromCInt b =&gt;
Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#enumFromConn"><span class="hs-identifier hs-var">enumFromConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679047075"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQconnectionNeedsPassword"><span class="hs-identifier hs-var">c_PQconnectionNeedsPassword</span></a></span><span>
</span><span id="line-629"></span><span>
</span><span id="line-630"></span><span>
</span><span id="line-631"></span><span class="hs-comment">-- | Returns 'True' if the connection authentication method used a</span><span>
</span><span id="line-632"></span><span class="hs-comment">-- password. Returns 'False' if not.</span><span>
</span><span id="line-633"></span><span class="hs-comment">--</span><span>
</span><span id="line-634"></span><span class="hs-comment">-- This function can be applied after either a failed or successful</span><span>
</span><span id="line-635"></span><span class="hs-comment">-- connection attempt to detect whether the server demanded a</span><span>
</span><span id="line-636"></span><span class="hs-comment">-- password.</span><span>
</span><span id="line-637"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#connectionUsedPassword"><span class="hs-identifier hs-type">connectionUsedPassword</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-638"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-639"></span><span id="connectionUsedPassword"><span class="annot"><span class="annottext">connectionUsedPassword :: Connection -&gt; IO Bool
</span><a href="Database.PostgreSQL.LibPQ.html#connectionUsedPassword"><span class="hs-identifier hs-var hs-var">connectionUsedPassword</span></a></span></span><span> </span><span id="local-6989586621679047073"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679047073"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-640"></span><span>    </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO Bool
forall b.
FromCInt b =&gt;
Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#enumFromConn"><span class="hs-identifier hs-var">enumFromConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679047073"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQconnectionUsedPassword"><span class="hs-identifier hs-var">c_PQconnectionUsedPassword</span></a></span><span>
</span><span id="line-641"></span><span>
</span><span id="line-642"></span><span>
</span><span id="line-643"></span><span class="hs-comment">-- TODO: getSSL :: Connection -&gt; IO SSL</span><span>
</span><span id="line-644"></span><span>
</span><span id="line-645"></span><span>
</span><span id="line-646"></span><span class="hs-comment">-- $commandexec</span><span>
</span><span id="line-647"></span><span class="hs-comment">-- Once a connection to a database server has been successfully</span><span>
</span><span id="line-648"></span><span class="hs-comment">-- established, the functions described here are used to perform SQL</span><span>
</span><span id="line-649"></span><span class="hs-comment">-- queries and commands.</span><span>
</span><span id="line-650"></span><span>
</span><span id="line-651"></span><span class="hs-comment">-- | 'Result' encapsulates the result of a query (or more precisely,</span><span>
</span><span id="line-652"></span><span class="hs-comment">-- of a single SQL command --- a query string given to 'sendQuery' can</span><span>
</span><span id="line-653"></span><span class="hs-comment">-- contain multiple commands and thus return multiple instances of</span><span>
</span><span id="line-654"></span><span class="hs-comment">-- 'Result'.</span><span>
</span><span id="line-655"></span><span class="hs-keyword">newtype</span><span> </span><span id="Result"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-var">Result</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Result"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-var">Result</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">ForeignPtr</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.FFI.html#PGresult"><span class="hs-identifier hs-type">PGresult</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679047067"><span id="local-6989586621679047069"><span class="annot"><span class="annottext">Result -&gt; Result -&gt; Bool
(Result -&gt; Result -&gt; Bool)
-&gt; (Result -&gt; Result -&gt; Bool) -&gt; Eq Result
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Result -&gt; Result -&gt; Bool
$c/= :: Result -&gt; Result -&gt; Bool
== :: Result -&gt; Result -&gt; Bool
$c== :: Result -&gt; Result -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679047060"><span id="local-6989586621679047062"><span id="local-6989586621679047064"><span class="annot"><span class="annottext">Int -&gt; Result -&gt; String -&gt; String
[Result] -&gt; String -&gt; String
Result -&gt; String
(Int -&gt; Result -&gt; String -&gt; String)
-&gt; (Result -&gt; String)
-&gt; ([Result] -&gt; String -&gt; String)
-&gt; Show Result
forall a.
(Int -&gt; a -&gt; String -&gt; String)
-&gt; (a -&gt; String) -&gt; ([a] -&gt; String -&gt; String) -&gt; Show a
showList :: [Result] -&gt; String -&gt; String
$cshowList :: [Result] -&gt; String -&gt; String
show :: Result -&gt; String
$cshow :: Result -&gt; String
showsPrec :: Int -&gt; Result -&gt; String -&gt; String
$cshowsPrec :: Int -&gt; Result -&gt; String -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-656"></span><span>
</span><span id="line-657"></span><span class="hs-comment">-- | Convert a list of parameters to the format expected by libpq FFI calls.</span><span>
</span><span id="line-658"></span><span id="local-6989586621679047357"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#withParams"><span class="hs-identifier hs-type">withParams</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Oid.html#Oid"><span class="hs-identifier hs-type">Oid</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Enums.html#Format"><span class="hs-identifier hs-type">Format</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-659"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">CInt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Ptr</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Oid.html#Oid"><span class="hs-identifier hs-type">Oid</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Ptr</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">CString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Ptr</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">CInt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Ptr</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">CInt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679047357"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-660"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679047357"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-661"></span><span id="withParams"><span class="annot"><span class="annottext">withParams :: [Maybe (Oid, ByteString, Format)]
-&gt; (CInt -&gt; Ptr Oid -&gt; Ptr CString -&gt; Ptr CInt -&gt; Ptr CInt -&gt; IO a)
-&gt; IO a
</span><a href="Database.PostgreSQL.LibPQ.html#withParams"><span class="hs-identifier hs-var hs-var">withParams</span></a></span></span><span> </span><span id="local-6989586621679047057"><span class="annot"><span class="annottext">[Maybe (Oid, ByteString, Format)]
</span><a href="#local-6989586621679047057"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span id="local-6989586621679047056"><span class="annot"><span class="annottext">CInt -&gt; Ptr Oid -&gt; Ptr CString -&gt; Ptr CInt -&gt; Ptr CInt -&gt; IO a
</span><a href="#local-6989586621679047056"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-662"></span><span>    </span><span class="annot"><span class="annottext">Int -&gt; [Oid] -&gt; (Ptr Oid -&gt; IO a) -&gt; IO a
forall a b. Storable a =&gt; Int -&gt; [a] -&gt; (Ptr a -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Marshal.html#unsafeWithArray"><span class="hs-identifier hs-var">unsafeWithArray</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679047054"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">[Oid]
</span><a href="#local-6989586621679047053"><span class="hs-identifier hs-var">oids</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr Oid -&gt; IO a) -&gt; IO a) -&gt; (Ptr Oid -&gt; IO a) -&gt; IO a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679047052"><span class="annot"><span class="annottext">Ptr Oid
</span><a href="#local-6989586621679047052"><span class="hs-identifier hs-var">ts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-663"></span><span>        </span><span class="annot"><span class="annottext">(Maybe ByteString -&gt; (CString -&gt; IO a) -&gt; IO a)
-&gt; [Maybe ByteString] -&gt; ([CString] -&gt; IO a) -&gt; IO a
forall a b res.
(a -&gt; (b -&gt; res) -&gt; res) -&gt; [a] -&gt; ([b] -&gt; res) -&gt; res
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">withMany</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ByteString -&gt; (CString -&gt; IO a) -&gt; IO a)
-&gt; Maybe ByteString -&gt; (CString -&gt; IO a) -&gt; IO a
forall a b c.
(a -&gt; (Ptr b -&gt; IO c) -&gt; IO c)
-&gt; Maybe a -&gt; (Ptr b -&gt; IO c) -&gt; IO c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maybeWith</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; (CString -&gt; IO a) -&gt; IO a
forall a. ByteString -&gt; (CString -&gt; IO a) -&gt; IO a
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.useAsCString</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Maybe ByteString]
</span><a href="#local-6989586621679047051"><span class="hs-identifier hs-var">values</span></a></span><span> </span><span class="annot"><span class="annottext">(([CString] -&gt; IO a) -&gt; IO a) -&gt; ([CString] -&gt; IO a) -&gt; IO a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679047050"><span class="annot"><span class="annottext">[CString]
</span><a href="#local-6989586621679047050"><span class="hs-identifier hs-var">c_values</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-664"></span><span>            </span><span class="annot"><span class="annottext">Int -&gt; [CString] -&gt; (Ptr CString -&gt; IO a) -&gt; IO a
forall a b. Storable a =&gt; Int -&gt; [a] -&gt; (Ptr a -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Marshal.html#unsafeWithArray"><span class="hs-identifier hs-var">unsafeWithArray</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679047054"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">[CString]
</span><a href="#local-6989586621679047050"><span class="hs-identifier hs-var">c_values</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr CString -&gt; IO a) -&gt; IO a) -&gt; (Ptr CString -&gt; IO a) -&gt; IO a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679047049"><span class="annot"><span class="annottext">Ptr CString
</span><a href="#local-6989586621679047049"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-665"></span><span>                </span><span class="annot"><span class="annottext">Int -&gt; [CInt] -&gt; (Ptr CInt -&gt; IO a) -&gt; IO a
forall a b. Storable a =&gt; Int -&gt; [a] -&gt; (Ptr a -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Marshal.html#unsafeWithArray"><span class="hs-identifier hs-var">unsafeWithArray</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679047054"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">[CInt]
</span><a href="#local-6989586621679047048"><span class="hs-identifier hs-var">c_lengths</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr CInt -&gt; IO a) -&gt; IO a) -&gt; (Ptr CInt -&gt; IO a) -&gt; IO a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679047047"><span class="annot"><span class="annottext">Ptr CInt
</span><a href="#local-6989586621679047047"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-666"></span><span>                    </span><span class="annot"><span class="annottext">Int -&gt; [CInt] -&gt; (Ptr CInt -&gt; IO a) -&gt; IO a
forall a b. Storable a =&gt; Int -&gt; [a] -&gt; (Ptr a -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Marshal.html#unsafeWithArray"><span class="hs-identifier hs-var">unsafeWithArray</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679047054"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">[CInt]
</span><a href="#local-6989586621679047046"><span class="hs-identifier hs-var">formats</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr CInt -&gt; IO a) -&gt; IO a) -&gt; (Ptr CInt -&gt; IO a) -&gt; IO a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679047045"><span class="annot"><span class="annottext">Ptr CInt
</span><a href="#local-6989586621679047045"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-667"></span><span>                        </span><span class="annot"><span class="annottext">CInt -&gt; Ptr Oid -&gt; Ptr CString -&gt; Ptr CInt -&gt; Ptr CInt -&gt; IO a
</span><a href="#local-6989586621679047056"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; CInt
</span><a href="Database.PostgreSQL.LibPQ.html#intToCInt"><span class="hs-identifier hs-var">intToCInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679047054"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Ptr Oid
</span><a href="#local-6989586621679047052"><span class="hs-identifier hs-var">ts</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr CString
</span><a href="#local-6989586621679047049"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr CInt
</span><a href="#local-6989586621679047047"><span class="hs-identifier hs-var">ls</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr CInt
</span><a href="#local-6989586621679047045"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-668"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-669"></span><span>    </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#AccumParams"><span class="hs-identifier hs-type">AccumParams</span></a></span><span> </span><span id="local-6989586621679047054"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679047054"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679047053"><span class="annot"><span class="annottext">[Oid]
</span><a href="#local-6989586621679047053"><span class="hs-identifier hs-var">oids</span></a></span></span><span> </span><span id="local-6989586621679047051"><span class="annot"><span class="annottext">[Maybe ByteString]
</span><a href="#local-6989586621679047051"><span class="hs-identifier hs-var">values</span></a></span></span><span> </span><span id="local-6989586621679047048"><span class="annot"><span class="annottext">[CInt]
</span><a href="#local-6989586621679047048"><span class="hs-identifier hs-var">c_lengths</span></a></span></span><span> </span><span id="local-6989586621679047046"><span class="annot"><span class="annottext">[CInt]
</span><a href="#local-6989586621679047046"><span class="hs-identifier hs-var">formats</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-670"></span><span>        </span><span class="annot"><span class="annottext">(Maybe (Oid, ByteString, Format) -&gt; AccumParams -&gt; AccumParams)
-&gt; AccumParams -&gt; [Maybe (Oid, ByteString, Format)] -&gt; AccumParams
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Oid, ByteString, Format) -&gt; AccumParams -&gt; AccumParams
</span><a href="#local-6989586621679047041"><span class="hs-identifier hs-var">accum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; [Oid] -&gt; [Maybe ByteString] -&gt; [CInt] -&gt; [CInt] -&gt; AccumParams
</span><a href="Database.PostgreSQL.LibPQ.html#AccumParams"><span class="hs-identifier hs-var">AccumParams</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Maybe (Oid, ByteString, Format)]
</span><a href="#local-6989586621679047057"><span class="hs-identifier hs-var">params</span></a></span><span>
</span><span id="line-671"></span><span>
</span><span id="line-672"></span><span>    </span><span class="annot"><a href="#local-6989586621679047041"><span class="hs-identifier hs-type">accum</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Oid.html#Oid"><span class="hs-identifier hs-type">Oid</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Enums.html#Format"><span class="hs-identifier hs-type">Format</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#AccumParams"><span class="hs-identifier hs-type">AccumParams</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#AccumParams"><span class="hs-identifier hs-type">AccumParams</span></a></span><span>
</span><span id="line-673"></span><span>    </span><span id="local-6989586621679047041"><span class="annot"><span class="annottext">accum :: Maybe (Oid, ByteString, Format) -&gt; AccumParams -&gt; AccumParams
</span><a href="#local-6989586621679047041"><span class="hs-identifier hs-var hs-var">accum</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe (Oid, ByteString, Format)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">~</span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#AccumParams"><span class="hs-identifier hs-type">AccumParams</span></a></span><span> </span><span id="local-6989586621679047040"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679047040"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679047039"><span class="annot"><span class="annottext">[Oid]
</span><a href="#local-6989586621679047039"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679047038"><span class="annot"><span class="annottext">[Maybe ByteString]
</span><a href="#local-6989586621679047038"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621679047037"><span class="annot"><span class="annottext">[CInt]
</span><a href="#local-6989586621679047037"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621679047036"><span class="annot"><span class="annottext">[CInt]
</span><a href="#local-6989586621679047036"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-674"></span><span>        </span><span class="annot"><span class="annottext">Int
-&gt; [Oid] -&gt; [Maybe ByteString] -&gt; [CInt] -&gt; [CInt] -&gt; AccumParams
</span><a href="Database.PostgreSQL.LibPQ.html#AccumParams"><span class="hs-identifier hs-var">AccumParams</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679047040"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Oid
</span><a href="Database.PostgreSQL.LibPQ.Oid.html#invalidOid"><span class="hs-identifier hs-var">invalidOid</span></a></span><span> </span><span class="annot"><span class="annottext">Oid -&gt; [Oid] -&gt; [Oid]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[Oid]
</span><a href="#local-6989586621679047039"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe ByteString
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ByteString -&gt; [Maybe ByteString] -&gt; [Maybe ByteString]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe ByteString]
</span><a href="#local-6989586621679047038"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CInt
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; [CInt] -&gt; [CInt]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[CInt]
</span><a href="#local-6989586621679047037"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CInt
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; [CInt] -&gt; [CInt]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[CInt]
</span><a href="#local-6989586621679047036"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-675"></span><span>
</span><span id="line-676"></span><span>    </span><span class="annot"><a href="#local-6989586621679047041"><span class="hs-identifier hs-var">accum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679047034"><span class="annot"><span class="annottext">Oid
</span><a href="#local-6989586621679047034"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679047033"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679047033"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679047032"><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621679047032"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">~</span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#AccumParams"><span class="hs-identifier hs-type">AccumParams</span></a></span><span> </span><span id="local-6989586621679047031"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679047031"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679047030"><span class="annot"><span class="annottext">[Oid]
</span><a href="#local-6989586621679047030"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span id="local-6989586621679047029"><span class="annot"><span class="annottext">[Maybe ByteString]
</span><a href="#local-6989586621679047029"><span class="hs-identifier hs-var">ys</span></a></span></span><span> </span><span id="local-6989586621679047028"><span class="annot"><span class="annottext">[CInt]
</span><a href="#local-6989586621679047028"><span class="hs-identifier hs-var">zs</span></a></span></span><span> </span><span id="local-6989586621679047027"><span class="annot"><span class="annottext">[CInt]
</span><a href="#local-6989586621679047027"><span class="hs-identifier hs-var">ws</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span>
</span><span id="line-677"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679047026"><span class="annot"><span class="annottext">z :: CInt
</span><a href="#local-6989586621679047026"><span class="hs-identifier hs-var hs-var">z</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; CInt
</span><a href="Database.PostgreSQL.LibPQ.html#intToCInt"><span class="hs-identifier hs-var">intToCInt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; Int
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.length</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679047033"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-678"></span><span>            </span><span class="hs-glyph">!</span><span id="local-6989586621679047024"><span class="annot"><span class="annottext">w :: CInt
</span><a href="#local-6989586621679047024"><span class="hs-identifier hs-var hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Format -&gt; CInt
forall a. ToCInt a =&gt; a -&gt; CInt
</span><a href="Database.PostgreSQL.LibPQ.Enums.html#toCInt"><span class="hs-identifier hs-var">toCInt</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621679047032"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-679"></span><span>        </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; [Oid] -&gt; [Maybe ByteString] -&gt; [CInt] -&gt; [CInt] -&gt; AccumParams
</span><a href="Database.PostgreSQL.LibPQ.html#AccumParams"><span class="hs-identifier hs-var">AccumParams</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679047031"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Oid
</span><a href="#local-6989586621679047034"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Oid -&gt; [Oid] -&gt; [Oid]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[Oid]
</span><a href="#local-6989586621679047030"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; Maybe ByteString
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679047033"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ByteString -&gt; [Maybe ByteString] -&gt; [Maybe ByteString]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe ByteString]
</span><a href="#local-6989586621679047029"><span class="hs-identifier hs-var">ys</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679047026"><span class="hs-identifier hs-var">z</span></a></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; [CInt] -&gt; [CInt]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[CInt]
</span><a href="#local-6989586621679047028"><span class="hs-identifier hs-var">zs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679047024"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; [CInt] -&gt; [CInt]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[CInt]
</span><a href="#local-6989586621679047027"><span class="hs-identifier hs-var">ws</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-680"></span><span>
</span><span id="line-681"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#intToCInt"><span class="hs-identifier hs-type">intToCInt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">CInt</span></a></span><span>
</span><span id="line-682"></span><span id="intToCInt"><span class="annot"><span class="annottext">intToCInt :: Int -&gt; CInt
</span><a href="Database.PostgreSQL.LibPQ.html#intToCInt"><span class="hs-identifier hs-var hs-var">intToCInt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; CInt
forall a. Enum a =&gt; Int -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">toEnum</span></a></span><span>
</span><span id="line-683"></span><span>
</span><span id="line-684"></span><span class="hs-keyword">data</span><span> </span><span id="AccumParams"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#AccumParams"><span class="hs-identifier hs-var">AccumParams</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="AccumParams"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#AccumParams"><span class="hs-identifier hs-var">AccumParams</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Oid.html#Oid"><span class="hs-identifier hs-type">Oid</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">CInt</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">CInt</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-685"></span><span>
</span><span id="line-686"></span><span class="hs-comment">-- | Convert a list of parameters to the format expected by libpq FFI calls,</span><span>
</span><span id="line-687"></span><span class="hs-comment">-- prepared statement variant.</span><span>
</span><span id="line-688"></span><span id="local-6989586621679047351"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#withParamsPrepared"><span class="hs-identifier hs-type">withParamsPrepared</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Enums.html#Format"><span class="hs-identifier hs-type">Format</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-689"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">CInt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Ptr</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">CString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Ptr</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">CInt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Ptr</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">CInt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679047351"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-690"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679047351"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-691"></span><span id="withParamsPrepared"><span class="annot"><span class="annottext">withParamsPrepared :: [Maybe (ByteString, Format)]
-&gt; (CInt -&gt; Ptr CString -&gt; Ptr CInt -&gt; Ptr CInt -&gt; IO a) -&gt; IO a
</span><a href="Database.PostgreSQL.LibPQ.html#withParamsPrepared"><span class="hs-identifier hs-var hs-var">withParamsPrepared</span></a></span></span><span> </span><span id="local-6989586621679047020"><span class="annot"><span class="annottext">[Maybe (ByteString, Format)]
</span><a href="#local-6989586621679047020"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span id="local-6989586621679047019"><span class="annot"><span class="annottext">CInt -&gt; Ptr CString -&gt; Ptr CInt -&gt; Ptr CInt -&gt; IO a
</span><a href="#local-6989586621679047019"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-692"></span><span>    </span><span class="annot"><span class="annottext">(Maybe ByteString -&gt; (CString -&gt; IO a) -&gt; IO a)
-&gt; [Maybe ByteString] -&gt; ([CString] -&gt; IO a) -&gt; IO a
forall a b res.
(a -&gt; (b -&gt; res) -&gt; res) -&gt; [a] -&gt; ([b] -&gt; res) -&gt; res
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">withMany</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ByteString -&gt; (CString -&gt; IO a) -&gt; IO a)
-&gt; Maybe ByteString -&gt; (CString -&gt; IO a) -&gt; IO a
forall a b c.
(a -&gt; (Ptr b -&gt; IO c) -&gt; IO c)
-&gt; Maybe a -&gt; (Ptr b -&gt; IO c) -&gt; IO c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maybeWith</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; (CString -&gt; IO a) -&gt; IO a
forall a. ByteString -&gt; (CString -&gt; IO a) -&gt; IO a
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.useAsCString</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Maybe ByteString]
</span><a href="#local-6989586621679047018"><span class="hs-identifier hs-var">values</span></a></span><span> </span><span class="annot"><span class="annottext">(([CString] -&gt; IO a) -&gt; IO a) -&gt; ([CString] -&gt; IO a) -&gt; IO a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679047017"><span class="annot"><span class="annottext">[CString]
</span><a href="#local-6989586621679047017"><span class="hs-identifier hs-var">c_values</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-693"></span><span>        </span><span class="annot"><span class="annottext">Int -&gt; [CString] -&gt; (Ptr CString -&gt; IO a) -&gt; IO a
forall a b. Storable a =&gt; Int -&gt; [a] -&gt; (Ptr a -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Marshal.html#unsafeWithArray"><span class="hs-identifier hs-var">unsafeWithArray</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679047016"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">[CString]
</span><a href="#local-6989586621679047017"><span class="hs-identifier hs-var">c_values</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr CString -&gt; IO a) -&gt; IO a) -&gt; (Ptr CString -&gt; IO a) -&gt; IO a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679047015"><span class="annot"><span class="annottext">Ptr CString
</span><a href="#local-6989586621679047015"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-694"></span><span>            </span><span class="annot"><span class="annottext">Int -&gt; [CInt] -&gt; (Ptr CInt -&gt; IO a) -&gt; IO a
forall a b. Storable a =&gt; Int -&gt; [a] -&gt; (Ptr a -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Marshal.html#unsafeWithArray"><span class="hs-identifier hs-var">unsafeWithArray</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679047016"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">[CInt]
</span><a href="#local-6989586621679047014"><span class="hs-identifier hs-var">c_lengths</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr CInt -&gt; IO a) -&gt; IO a) -&gt; (Ptr CInt -&gt; IO a) -&gt; IO a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679047013"><span class="annot"><span class="annottext">Ptr CInt
</span><a href="#local-6989586621679047013"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-695"></span><span>                </span><span class="annot"><span class="annottext">Int -&gt; [CInt] -&gt; (Ptr CInt -&gt; IO a) -&gt; IO a
forall a b. Storable a =&gt; Int -&gt; [a] -&gt; (Ptr a -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Marshal.html#unsafeWithArray"><span class="hs-identifier hs-var">unsafeWithArray</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679047016"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">[CInt]
</span><a href="#local-6989586621679047012"><span class="hs-identifier hs-var">formats</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr CInt -&gt; IO a) -&gt; IO a) -&gt; (Ptr CInt -&gt; IO a) -&gt; IO a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679047011"><span class="annot"><span class="annottext">Ptr CInt
</span><a href="#local-6989586621679047011"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-696"></span><span>                    </span><span class="annot"><span class="annottext">CInt -&gt; Ptr CString -&gt; Ptr CInt -&gt; Ptr CInt -&gt; IO a
</span><a href="#local-6989586621679047019"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; CInt
</span><a href="Database.PostgreSQL.LibPQ.html#intToCInt"><span class="hs-identifier hs-var">intToCInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679047016"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Ptr CString
</span><a href="#local-6989586621679047015"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr CInt
</span><a href="#local-6989586621679047013"><span class="hs-identifier hs-var">ls</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr CInt
</span><a href="#local-6989586621679047011"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-697"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-698"></span><span>    </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#AccumPrepParams"><span class="hs-identifier hs-type">AccumPrepParams</span></a></span><span> </span><span id="local-6989586621679047016"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679047016"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679047018"><span class="annot"><span class="annottext">[Maybe ByteString]
</span><a href="#local-6989586621679047018"><span class="hs-identifier hs-var">values</span></a></span></span><span> </span><span id="local-6989586621679047014"><span class="annot"><span class="annottext">[CInt]
</span><a href="#local-6989586621679047014"><span class="hs-identifier hs-var">c_lengths</span></a></span></span><span> </span><span id="local-6989586621679047012"><span class="annot"><span class="annottext">[CInt]
</span><a href="#local-6989586621679047012"><span class="hs-identifier hs-var">formats</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-699"></span><span>        </span><span class="annot"><span class="annottext">(Maybe (ByteString, Format) -&gt; AccumPrepParams -&gt; AccumPrepParams)
-&gt; AccumPrepParams
-&gt; [Maybe (ByteString, Format)]
-&gt; AccumPrepParams
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (ByteString, Format) -&gt; AccumPrepParams -&gt; AccumPrepParams
</span><a href="#local-6989586621679047009"><span class="hs-identifier hs-var">accum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [Maybe ByteString] -&gt; [CInt] -&gt; [CInt] -&gt; AccumPrepParams
</span><a href="Database.PostgreSQL.LibPQ.html#AccumPrepParams"><span class="hs-identifier hs-var">AccumPrepParams</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Maybe (ByteString, Format)]
</span><a href="#local-6989586621679047020"><span class="hs-identifier hs-var">params</span></a></span><span>
</span><span id="line-700"></span><span>
</span><span id="line-701"></span><span>    </span><span class="annot"><a href="#local-6989586621679047009"><span class="hs-identifier hs-type">accum</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span> </span><span class="hs-special">,</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Enums.html#Format"><span class="hs-identifier hs-type">Format</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#AccumPrepParams"><span class="hs-identifier hs-type">AccumPrepParams</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#AccumPrepParams"><span class="hs-identifier hs-type">AccumPrepParams</span></a></span><span>
</span><span id="line-702"></span><span>    </span><span id="local-6989586621679047009"><span class="annot"><span class="annottext">accum :: Maybe (ByteString, Format) -&gt; AccumPrepParams -&gt; AccumPrepParams
</span><a href="#local-6989586621679047009"><span class="hs-identifier hs-var hs-var">accum</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe (ByteString, Format)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">~</span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#AccumPrepParams"><span class="hs-identifier hs-type">AccumPrepParams</span></a></span><span> </span><span id="local-6989586621679047008"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679047008"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679047007"><span class="annot"><span class="annottext">[Maybe ByteString]
</span><a href="#local-6989586621679047007"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679047006"><span class="annot"><span class="annottext">[CInt]
</span><a href="#local-6989586621679047006"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621679047005"><span class="annot"><span class="annottext">[CInt]
</span><a href="#local-6989586621679047005"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-703"></span><span>        </span><span class="annot"><span class="annottext">Int -&gt; [Maybe ByteString] -&gt; [CInt] -&gt; [CInt] -&gt; AccumPrepParams
</span><a href="Database.PostgreSQL.LibPQ.html#AccumPrepParams"><span class="hs-identifier hs-var">AccumPrepParams</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679047008"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe ByteString
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ByteString -&gt; [Maybe ByteString] -&gt; [Maybe ByteString]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe ByteString]
</span><a href="#local-6989586621679047007"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CInt
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; [CInt] -&gt; [CInt]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[CInt]
</span><a href="#local-6989586621679047006"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CInt
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; [CInt] -&gt; [CInt]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[CInt]
</span><a href="#local-6989586621679047005"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-704"></span><span>
</span><span id="line-705"></span><span>    </span><span class="annot"><a href="#local-6989586621679047009"><span class="hs-identifier hs-var">accum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679047004"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679047004"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679047003"><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621679047003"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">~</span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#AccumPrepParams"><span class="hs-identifier hs-type">AccumPrepParams</span></a></span><span> </span><span id="local-6989586621679047002"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679047002"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679047001"><span class="annot"><span class="annottext">[Maybe ByteString]
</span><a href="#local-6989586621679047001"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span id="local-6989586621679047000"><span class="annot"><span class="annottext">[CInt]
</span><a href="#local-6989586621679047000"><span class="hs-identifier hs-var">ys</span></a></span></span><span> </span><span id="local-6989586621679046999"><span class="annot"><span class="annottext">[CInt]
</span><a href="#local-6989586621679046999"><span class="hs-identifier hs-var">zs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-706"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679046998"><span class="annot"><span class="annottext">y :: CInt
</span><a href="#local-6989586621679046998"><span class="hs-identifier hs-var hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; CInt
</span><a href="Database.PostgreSQL.LibPQ.html#intToCInt"><span class="hs-identifier hs-var">intToCInt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; Int
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.length</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679047004"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-707"></span><span>            </span><span class="hs-glyph">!</span><span id="local-6989586621679046997"><span class="annot"><span class="annottext">z :: CInt
</span><a href="#local-6989586621679046997"><span class="hs-identifier hs-var hs-var">z</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Format -&gt; CInt
forall a. ToCInt a =&gt; a -&gt; CInt
</span><a href="Database.PostgreSQL.LibPQ.Enums.html#toCInt"><span class="hs-identifier hs-var">toCInt</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621679047003"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-708"></span><span>        </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Maybe ByteString] -&gt; [CInt] -&gt; [CInt] -&gt; AccumPrepParams
</span><a href="Database.PostgreSQL.LibPQ.html#AccumPrepParams"><span class="hs-identifier hs-var">AccumPrepParams</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679047002"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; Maybe ByteString
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679047004"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ByteString -&gt; [Maybe ByteString] -&gt; [Maybe ByteString]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe ByteString]
</span><a href="#local-6989586621679047001"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046998"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; [CInt] -&gt; [CInt]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[CInt]
</span><a href="#local-6989586621679047000"><span class="hs-identifier hs-var">ys</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046997"><span class="hs-identifier hs-var">z</span></a></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; [CInt] -&gt; [CInt]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[CInt]
</span><a href="#local-6989586621679046999"><span class="hs-identifier hs-var">zs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-709"></span><span>
</span><span id="line-710"></span><span class="hs-keyword">data</span><span> </span><span id="AccumPrepParams"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#AccumPrepParams"><span class="hs-identifier hs-var">AccumPrepParams</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="AccumPrepParams"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#AccumPrepParams"><span class="hs-identifier hs-var">AccumPrepParams</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">CInt</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">CInt</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-711"></span><span>
</span><span id="line-712"></span><span class="hs-comment">-- | Submits a command to the server and waits for the result.</span><span>
</span><span id="line-713"></span><span class="hs-comment">--</span><span>
</span><span id="line-714"></span><span class="hs-comment">-- Returns a 'Result' or possibly 'Nothing'. A 'Result' will generally</span><span>
</span><span id="line-715"></span><span class="hs-comment">-- be returned except in out-of-memory conditions or serious errors</span><span>
</span><span id="line-716"></span><span class="hs-comment">-- such as inability to send the command to the server. If a 'Nothing'</span><span>
</span><span id="line-717"></span><span class="hs-comment">-- is returned, it should be treated like a 'FatalError' result. Use</span><span>
</span><span id="line-718"></span><span class="hs-comment">-- 'errorMessage' to get more information about such errors.</span><span>
</span><span id="line-719"></span><span class="hs-comment">--</span><span>
</span><span id="line-720"></span><span class="hs-comment">-- It is allowed to include multiple SQL commands (separated by</span><span>
</span><span id="line-721"></span><span class="hs-comment">-- semicolons) in the command string. Multiple queries sent in a</span><span>
</span><span id="line-722"></span><span class="hs-comment">-- single 'exec' call are processed in a single transaction, unless</span><span>
</span><span id="line-723"></span><span class="hs-comment">-- there are explicit BEGIN/COMMIT commands included in the query</span><span>
</span><span id="line-724"></span><span class="hs-comment">-- string to divide it into multiple transactions. Note however that</span><span>
</span><span id="line-725"></span><span class="hs-comment">-- the returned 'Result' structure describes only the result of the</span><span>
</span><span id="line-726"></span><span class="hs-comment">-- last command executed from the string. Should one of the commands</span><span>
</span><span id="line-727"></span><span class="hs-comment">-- fail, processing of the string stops with it and the returned</span><span>
</span><span id="line-728"></span><span class="hs-comment">-- 'Result' describes the error condition.</span><span>
</span><span id="line-729"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#exec"><span class="hs-identifier hs-type">exec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>        </span><span class="hs-comment">-- ^ connection</span><span>
</span><span id="line-730"></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span>      </span><span class="hs-comment">-- ^ statement</span><span>
</span><span id="line-731"></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ result</span><span>
</span><span id="line-732"></span><span id="exec"><span class="annot"><span class="annottext">exec :: Connection -&gt; ByteString -&gt; IO (Maybe Result)
</span><a href="Database.PostgreSQL.LibPQ.html#exec"><span class="hs-identifier hs-var hs-var">exec</span></a></span></span><span> </span><span id="local-6989586621679046996"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046996"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span id="local-6989586621679046995"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046995"><span class="hs-identifier hs-var">query</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-733"></span><span>    </span><span class="annot"><span class="annottext">Connection
-&gt; (Ptr PGconn -&gt; IO (Ptr PGresult)) -&gt; IO (Maybe Result)
</span><a href="Database.PostgreSQL.LibPQ.html#resultFromConn"><span class="hs-identifier hs-var">resultFromConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046996"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO (Ptr PGresult)) -&gt; IO (Maybe Result))
-&gt; (Ptr PGconn -&gt; IO (Ptr PGresult)) -&gt; IO (Maybe Result)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046993"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046993"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-734"></span><span>        </span><span class="annot"><span class="annottext">ByteString -&gt; (CString -&gt; IO (Ptr PGresult)) -&gt; IO (Ptr PGresult)
forall a. ByteString -&gt; (CString -&gt; IO a) -&gt; IO a
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.useAsCString</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046995"><span class="hs-identifier hs-var">query</span></a></span><span> </span><span class="annot"><span class="annottext">((CString -&gt; IO (Ptr PGresult)) -&gt; IO (Ptr PGresult))
-&gt; (CString -&gt; IO (Ptr PGresult)) -&gt; IO (Ptr PGresult)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; CString -&gt; IO (Ptr PGresult)
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQexec"><span class="hs-identifier hs-var">c_PQexec</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046993"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-735"></span><span>
</span><span id="line-736"></span><span>
</span><span id="line-737"></span><span class="hs-comment">-- | Submits a command to the server and waits for the result, with</span><span>
</span><span id="line-738"></span><span class="hs-comment">-- the ability to pass parameters separately from the SQL command</span><span>
</span><span id="line-739"></span><span class="hs-comment">-- text.</span><span>
</span><span id="line-740"></span><span class="hs-comment">--</span><span>
</span><span id="line-741"></span><span class="hs-comment">-- 'execParams' is like 'exec', but offers additional functionality:</span><span>
</span><span id="line-742"></span><span class="hs-comment">-- parameter values can be specified separately from the command</span><span>
</span><span id="line-743"></span><span class="hs-comment">-- string proper, and query results can be requested in either text or</span><span>
</span><span id="line-744"></span><span class="hs-comment">-- binary format. 'execParams' is supported only in protocol 3.0 and</span><span>
</span><span id="line-745"></span><span class="hs-comment">-- later connections; it will fail when using protocol 2.0.</span><span>
</span><span id="line-746"></span><span class="hs-comment">--</span><span>
</span><span id="line-747"></span><span class="hs-comment">-- The primary advantage of 'execParams' over 'exec' is that parameter</span><span>
</span><span id="line-748"></span><span class="hs-comment">-- values can be separated from the command string, thus avoiding the</span><span>
</span><span id="line-749"></span><span class="hs-comment">-- need for tedious and error-prone quoting and escaping.</span><span>
</span><span id="line-750"></span><span class="hs-comment">--</span><span>
</span><span id="line-751"></span><span class="hs-comment">-- Unlike 'exec', 'execParams' allows at most one SQL command in the</span><span>
</span><span id="line-752"></span><span class="hs-comment">-- given string. (There can be semicolons in it, but not more than one</span><span>
</span><span id="line-753"></span><span class="hs-comment">-- nonempty command.) This is a limitation of the underlying protocol,</span><span>
</span><span id="line-754"></span><span class="hs-comment">-- but has some usefulness as an extra defense against SQL-injection</span><span>
</span><span id="line-755"></span><span class="hs-comment">-- attacks.</span><span>
</span><span id="line-756"></span><span class="hs-comment">--</span><span>
</span><span id="line-757"></span><span class="hs-comment">-- Tip: Specifying parameter types via OIDs is tedious, particularly</span><span>
</span><span id="line-758"></span><span class="hs-comment">-- if you prefer not to hard-wire particular OID values into your</span><span>
</span><span id="line-759"></span><span class="hs-comment">-- program. However, you can avoid doing so even in cases where the</span><span>
</span><span id="line-760"></span><span class="hs-comment">-- server by itself cannot determine the type of the parameter, or</span><span>
</span><span id="line-761"></span><span class="hs-comment">-- chooses a different type than you want. In the SQL command text,</span><span>
</span><span id="line-762"></span><span class="hs-comment">-- attach an explicit cast to the parameter symbol to show what data</span><span>
</span><span id="line-763"></span><span class="hs-comment">-- type you will send. For example:</span><span>
</span><span id="line-764"></span><span class="hs-comment">-- SELECT * FROM mytable WHERE x = $1::bigint;</span><span>
</span><span id="line-765"></span><span class="hs-comment">-- This forces parameter $1 to be treated as bigint, whereas by</span><span>
</span><span id="line-766"></span><span class="hs-comment">-- default it would be assigned the same type as x. Forcing the</span><span>
</span><span id="line-767"></span><span class="hs-comment">-- parameter type decision, either this way or by specifying a numeric</span><span>
</span><span id="line-768"></span><span class="hs-comment">-- type OID, is strongly recommended when sending parameter values in</span><span>
</span><span id="line-769"></span><span class="hs-comment">-- binary format, because binary format has less redundancy than text</span><span>
</span><span id="line-770"></span><span class="hs-comment">-- format and so there is less chance that the server will detect a</span><span>
</span><span id="line-771"></span><span class="hs-comment">-- type mismatch mistake for you.</span><span>
</span><span id="line-772"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#execParams"><span class="hs-identifier hs-type">execParams</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>                          </span><span class="hs-comment">-- ^ connection</span><span>
</span><span id="line-773"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span>                        </span><span class="hs-comment">-- ^ statement</span><span>
</span><span id="line-774"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Oid.html#Oid"><span class="hs-identifier hs-type">Oid</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Enums.html#Format"><span class="hs-identifier hs-type">Format</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- ^ parameters</span><span>
</span><span id="line-775"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Enums.html#Format"><span class="hs-identifier hs-type">Format</span></a></span><span>                              </span><span class="hs-comment">-- ^ result format</span><span>
</span><span id="line-776"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span class="hs-special">)</span><span>                   </span><span class="hs-comment">-- ^ result</span><span>
</span><span id="line-777"></span><span id="execParams"><span class="annot"><span class="annottext">execParams :: Connection
-&gt; ByteString
-&gt; [Maybe (Oid, ByteString, Format)]
-&gt; Format
-&gt; IO (Maybe Result)
</span><a href="Database.PostgreSQL.LibPQ.html#execParams"><span class="hs-identifier hs-var hs-var">execParams</span></a></span></span><span> </span><span id="local-6989586621679046991"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046991"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span id="local-6989586621679046990"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046990"><span class="hs-identifier hs-var">statement</span></a></span></span><span> </span><span id="local-6989586621679046989"><span class="annot"><span class="annottext">[Maybe (Oid, ByteString, Format)]
</span><a href="#local-6989586621679046989"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span id="local-6989586621679046988"><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621679046988"><span class="hs-identifier hs-var">rFmt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-778"></span><span>    </span><span class="annot"><span class="annottext">Connection
-&gt; (Ptr PGconn -&gt; IO (Ptr PGresult)) -&gt; IO (Maybe Result)
</span><a href="Database.PostgreSQL.LibPQ.html#resultFromConn"><span class="hs-identifier hs-var">resultFromConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046991"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO (Ptr PGresult)) -&gt; IO (Maybe Result))
-&gt; (Ptr PGconn -&gt; IO (Ptr PGresult)) -&gt; IO (Maybe Result)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046987"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046987"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-779"></span><span>        </span><span class="annot"><span class="annottext">ByteString -&gt; (CString -&gt; IO (Ptr PGresult)) -&gt; IO (Ptr PGresult)
forall a. ByteString -&gt; (CString -&gt; IO a) -&gt; IO a
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.useAsCString</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046990"><span class="hs-identifier hs-var">statement</span></a></span><span> </span><span class="annot"><span class="annottext">((CString -&gt; IO (Ptr PGresult)) -&gt; IO (Ptr PGresult))
-&gt; (CString -&gt; IO (Ptr PGresult)) -&gt; IO (Ptr PGresult)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046986"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046986"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-780"></span><span>            </span><span class="annot"><span class="annottext">[Maybe (Oid, ByteString, Format)]
-&gt; (CInt
    -&gt; Ptr Oid
    -&gt; Ptr CString
    -&gt; Ptr CInt
    -&gt; Ptr CInt
    -&gt; IO (Ptr PGresult))
-&gt; IO (Ptr PGresult)
forall a.
[Maybe (Oid, ByteString, Format)]
-&gt; (CInt -&gt; Ptr Oid -&gt; Ptr CString -&gt; Ptr CInt -&gt; Ptr CInt -&gt; IO a)
-&gt; IO a
</span><a href="Database.PostgreSQL.LibPQ.html#withParams"><span class="hs-identifier hs-var">withParams</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe (Oid, ByteString, Format)]
</span><a href="#local-6989586621679046989"><span class="hs-identifier hs-var">params</span></a></span><span> </span><span class="annot"><span class="annottext">((CInt
  -&gt; Ptr Oid
  -&gt; Ptr CString
  -&gt; Ptr CInt
  -&gt; Ptr CInt
  -&gt; IO (Ptr PGresult))
 -&gt; IO (Ptr PGresult))
-&gt; (CInt
    -&gt; Ptr Oid
    -&gt; Ptr CString
    -&gt; Ptr CInt
    -&gt; Ptr CInt
    -&gt; IO (Ptr PGresult))
-&gt; IO (Ptr PGresult)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046985"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046985"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679046984"><span class="annot"><span class="annottext">Ptr Oid
</span><a href="#local-6989586621679046984"><span class="hs-identifier hs-var">ts</span></a></span></span><span> </span><span id="local-6989586621679046983"><span class="annot"><span class="annottext">Ptr CString
</span><a href="#local-6989586621679046983"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span id="local-6989586621679046982"><span class="annot"><span class="annottext">Ptr CInt
</span><a href="#local-6989586621679046982"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span id="local-6989586621679046981"><span class="annot"><span class="annottext">Ptr CInt
</span><a href="#local-6989586621679046981"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-781"></span><span>                </span><span class="annot"><span class="annottext">Ptr PGconn
-&gt; CString
-&gt; CInt
-&gt; Ptr Oid
-&gt; Ptr CString
-&gt; Ptr CInt
-&gt; Ptr CInt
-&gt; CInt
-&gt; IO (Ptr PGresult)
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQexecParams"><span class="hs-identifier hs-var">c_PQexecParams</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046987"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046986"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046985"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Oid
</span><a href="#local-6989586621679046984"><span class="hs-identifier hs-var">ts</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr CString
</span><a href="#local-6989586621679046983"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr CInt
</span><a href="#local-6989586621679046982"><span class="hs-identifier hs-var">ls</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr CInt
</span><a href="#local-6989586621679046981"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046979"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-782"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-783"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621679046979"><span class="annot"><span class="annottext">f :: CInt
</span><a href="#local-6989586621679046979"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Format -&gt; CInt
forall a. ToCInt a =&gt; a -&gt; CInt
</span><a href="Database.PostgreSQL.LibPQ.Enums.html#toCInt"><span class="hs-identifier hs-var">toCInt</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621679046988"><span class="hs-identifier hs-var">rFmt</span></a></span><span>
</span><span id="line-784"></span><span>
</span><span id="line-785"></span><span>
</span><span id="line-786"></span><span class="hs-comment">-- | Submits a request to create a prepared statement with the given</span><span>
</span><span id="line-787"></span><span class="hs-comment">-- parameters, and waits for completion.</span><span>
</span><span id="line-788"></span><span class="hs-comment">--</span><span>
</span><span id="line-789"></span><span class="hs-comment">-- 'prepare' creates a prepared statement for later execution with</span><span>
</span><span id="line-790"></span><span class="hs-comment">-- 'execPrepared'. This feature allows commands that will be used</span><span>
</span><span id="line-791"></span><span class="hs-comment">-- repeatedly to be parsed and planned just once, rather than each</span><span>
</span><span id="line-792"></span><span class="hs-comment">-- time they are executed. 'prepare' is supported only in protocol 3.0</span><span>
</span><span id="line-793"></span><span class="hs-comment">-- and later connections; it will fail when using protocol 2.0.</span><span>
</span><span id="line-794"></span><span class="hs-comment">--</span><span>
</span><span id="line-795"></span><span class="hs-comment">-- The function creates a prepared statement named stmtName from the</span><span>
</span><span id="line-796"></span><span class="hs-comment">-- query string, which must contain a single SQL command. stmtName can</span><span>
</span><span id="line-797"></span><span class="hs-comment">-- be \&quot;\&quot; to create an unnamed statement, in which case any</span><span>
</span><span id="line-798"></span><span class="hs-comment">-- pre-existing unnamed statement is automatically replaced; otherwise</span><span>
</span><span id="line-799"></span><span class="hs-comment">-- it is an error if the statement name is already defined in the</span><span>
</span><span id="line-800"></span><span class="hs-comment">-- current session. If any parameters are used, they are referred to</span><span>
</span><span id="line-801"></span><span class="hs-comment">-- in the query as $1, $2, etc. paramTypes specifies, by 'Oid', the</span><span>
</span><span id="line-802"></span><span class="hs-comment">-- data types to be assigned to the parameter symbols. If paramTypes</span><span>
</span><span id="line-803"></span><span class="hs-comment">-- is 'Nothing', or any particular element in the array is zero, the</span><span>
</span><span id="line-804"></span><span class="hs-comment">-- server assigns a data type to the parameter symbol in the same way</span><span>
</span><span id="line-805"></span><span class="hs-comment">-- it would do for an untyped literal string. Also, the query can use</span><span>
</span><span id="line-806"></span><span class="hs-comment">-- parameter symbols with numbers higher than the length of</span><span>
</span><span id="line-807"></span><span class="hs-comment">-- paramTypes; data types will be inferred for these symbols as</span><span>
</span><span id="line-808"></span><span class="hs-comment">-- well. (See 'describePrepared' for a means to find out what data</span><span>
</span><span id="line-809"></span><span class="hs-comment">-- types were inferred.)</span><span>
</span><span id="line-810"></span><span class="hs-comment">--</span><span>
</span><span id="line-811"></span><span class="hs-comment">-- As with 'exec', the result is normally a 'Result' whose contents</span><span>
</span><span id="line-812"></span><span class="hs-comment">-- indicate server-side success or failure. A 'Nothing' result</span><span>
</span><span id="line-813"></span><span class="hs-comment">-- indicates out-of-memory or inability to send the command at</span><span>
</span><span id="line-814"></span><span class="hs-comment">-- all. Use 'errorMessage' to get more information about such errors.</span><span>
</span><span id="line-815"></span><span class="hs-comment">--</span><span>
</span><span id="line-816"></span><span class="hs-comment">-- Prepared statements for use with 'execPrepared' can also be created</span><span>
</span><span id="line-817"></span><span class="hs-comment">-- by executing SQL PREPARE statements. (But 'prepare' is more</span><span>
</span><span id="line-818"></span><span class="hs-comment">-- flexible since it does not require parameter types to be</span><span>
</span><span id="line-819"></span><span class="hs-comment">-- pre-specified.) Also, although there is no libpq function for</span><span>
</span><span id="line-820"></span><span class="hs-comment">-- deleting a prepared statement, the SQL DEALLOCATE statement can be</span><span>
</span><span id="line-821"></span><span class="hs-comment">-- used for that purpose.</span><span>
</span><span id="line-822"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#prepare"><span class="hs-identifier hs-type">prepare</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>        </span><span class="hs-comment">-- ^ connection</span><span>
</span><span id="line-823"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span>      </span><span class="hs-comment">-- ^ stmtName</span><span>
</span><span id="line-824"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span>      </span><span class="hs-comment">-- ^ query</span><span>
</span><span id="line-825"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Oid.html#Oid"><span class="hs-identifier hs-type">Oid</span></a></span><span class="hs-special">]</span><span>       </span><span class="hs-comment">-- ^ paramTypes</span><span>
</span><span id="line-826"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ result</span><span>
</span><span id="line-827"></span><span id="prepare"><span class="annot"><span class="annottext">prepare :: Connection
-&gt; ByteString -&gt; ByteString -&gt; Maybe [Oid] -&gt; IO (Maybe Result)
</span><a href="Database.PostgreSQL.LibPQ.html#prepare"><span class="hs-identifier hs-var hs-var">prepare</span></a></span></span><span> </span><span id="local-6989586621679046978"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046978"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span id="local-6989586621679046977"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046977"><span class="hs-identifier hs-var">stmtName</span></a></span></span><span> </span><span id="local-6989586621679046976"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046976"><span class="hs-identifier hs-var">query</span></a></span></span><span> </span><span id="local-6989586621679046975"><span class="annot"><span class="annottext">Maybe [Oid]
</span><a href="#local-6989586621679046975"><span class="hs-identifier hs-var">mParamTypes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-828"></span><span>    </span><span class="annot"><span class="annottext">Connection
-&gt; (Ptr PGconn -&gt; IO (Ptr PGresult)) -&gt; IO (Maybe Result)
</span><a href="Database.PostgreSQL.LibPQ.html#resultFromConn"><span class="hs-identifier hs-var">resultFromConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046978"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO (Ptr PGresult)) -&gt; IO (Maybe Result))
-&gt; (Ptr PGconn -&gt; IO (Ptr PGresult)) -&gt; IO (Maybe Result)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046974"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046974"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-829"></span><span>        </span><span class="annot"><span class="annottext">ByteString -&gt; (CString -&gt; IO (Ptr PGresult)) -&gt; IO (Ptr PGresult)
forall a. ByteString -&gt; (CString -&gt; IO a) -&gt; IO a
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.useAsCString</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046977"><span class="hs-identifier hs-var">stmtName</span></a></span><span> </span><span class="annot"><span class="annottext">((CString -&gt; IO (Ptr PGresult)) -&gt; IO (Ptr PGresult))
-&gt; (CString -&gt; IO (Ptr PGresult)) -&gt; IO (Ptr PGresult)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046973"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046973"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-830"></span><span>            </span><span class="annot"><span class="annottext">ByteString -&gt; (CString -&gt; IO (Ptr PGresult)) -&gt; IO (Ptr PGresult)
forall a. ByteString -&gt; (CString -&gt; IO a) -&gt; IO a
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.useAsCString</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046976"><span class="hs-identifier hs-var">query</span></a></span><span> </span><span class="annot"><span class="annottext">((CString -&gt; IO (Ptr PGresult)) -&gt; IO (Ptr PGresult))
-&gt; (CString -&gt; IO (Ptr PGresult)) -&gt; IO (Ptr PGresult)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046972"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046972"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-831"></span><span>                </span><span class="annot"><span class="annottext">([Oid]
 -&gt; (Int -&gt; Ptr Oid -&gt; IO (Ptr PGresult)) -&gt; IO (Ptr PGresult))
-&gt; Maybe [Oid]
-&gt; (Int -&gt; Ptr Oid -&gt; IO (Ptr PGresult))
-&gt; IO (Ptr PGresult)
forall a b c.
(a -&gt; (Int -&gt; Ptr b -&gt; IO c) -&gt; IO c)
-&gt; Maybe a -&gt; (Int -&gt; Ptr b -&gt; IO c) -&gt; IO c
</span><a href="Database.PostgreSQL.LibPQ.Marshal.html#maybeWithInt"><span class="hs-identifier hs-var">maybeWithInt</span></a></span><span> </span><span class="annot"><span class="annottext">[Oid] -&gt; (Int -&gt; Ptr Oid -&gt; IO (Ptr PGresult)) -&gt; IO (Ptr PGresult)
forall a b. Storable a =&gt; [a] -&gt; (Int -&gt; Ptr a -&gt; IO b) -&gt; IO b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">withArrayLen</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [Oid]
</span><a href="#local-6989586621679046975"><span class="hs-identifier hs-var">mParamTypes</span></a></span><span> </span><span class="annot"><span class="annottext">((Int -&gt; Ptr Oid -&gt; IO (Ptr PGresult)) -&gt; IO (Ptr PGresult))
-&gt; (Int -&gt; Ptr Oid -&gt; IO (Ptr PGresult)) -&gt; IO (Ptr PGresult)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046970"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679046970"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679046969"><span class="annot"><span class="annottext">Ptr Oid
</span><a href="#local-6989586621679046969"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-832"></span><span>                    </span><span class="annot"><span class="annottext">Ptr PGconn
-&gt; CString -&gt; CString -&gt; CInt -&gt; Ptr Oid -&gt; IO (Ptr PGresult)
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQprepare"><span class="hs-identifier hs-var">c_PQprepare</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046974"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046973"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046972"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; CInt
</span><a href="Database.PostgreSQL.LibPQ.html#intToCInt"><span class="hs-identifier hs-var">intToCInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679046970"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Ptr Oid
</span><a href="#local-6989586621679046969"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-833"></span><span>
</span><span id="line-834"></span><span>
</span><span id="line-835"></span><span class="hs-comment">-- | Sends a request to execute a prepared statement with given</span><span>
</span><span id="line-836"></span><span class="hs-comment">-- parameters, and waits for the result.</span><span>
</span><span id="line-837"></span><span class="hs-comment">--</span><span>
</span><span id="line-838"></span><span class="hs-comment">-- 'execPrepared' is like 'execParams', but the command to be executed</span><span>
</span><span id="line-839"></span><span class="hs-comment">-- is specified by naming a previously-prepared statement, instead of</span><span>
</span><span id="line-840"></span><span class="hs-comment">-- giving a query string. This feature allows commands that will be</span><span>
</span><span id="line-841"></span><span class="hs-comment">-- used repeatedly to be parsed and planned just once, rather than</span><span>
</span><span id="line-842"></span><span class="hs-comment">-- each time they are executed. The statement must have been prepared</span><span>
</span><span id="line-843"></span><span class="hs-comment">-- previously in the current session. 'execPrepared' is supported only</span><span>
</span><span id="line-844"></span><span class="hs-comment">-- in protocol 3.0 and later connections; it will fail when using</span><span>
</span><span id="line-845"></span><span class="hs-comment">-- protocol 2.0.</span><span>
</span><span id="line-846"></span><span class="hs-comment">--</span><span>
</span><span id="line-847"></span><span class="hs-comment">-- The parameters are identical to 'execParams', except that the name</span><span>
</span><span id="line-848"></span><span class="hs-comment">-- of a prepared statement is given instead of a query string, and the</span><span>
</span><span id="line-849"></span><span class="hs-comment">-- paramTypes parameter is not present (it is not needed since the</span><span>
</span><span id="line-850"></span><span class="hs-comment">-- prepared statement's parameter types were determined when it was</span><span>
</span><span id="line-851"></span><span class="hs-comment">-- created).</span><span>
</span><span id="line-852"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#execPrepared"><span class="hs-identifier hs-type">execPrepared</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>                     </span><span class="hs-comment">-- ^ connection</span><span>
</span><span id="line-853"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span>                   </span><span class="hs-comment">-- ^ stmtName</span><span>
</span><span id="line-854"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Enums.html#Format"><span class="hs-identifier hs-type">Format</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- ^ parameters</span><span>
</span><span id="line-855"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Enums.html#Format"><span class="hs-identifier hs-type">Format</span></a></span><span>                         </span><span class="hs-comment">-- ^ result format</span><span>
</span><span id="line-856"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span class="hs-special">)</span><span>              </span><span class="hs-comment">-- ^ result</span><span>
</span><span id="line-857"></span><span id="execPrepared"><span class="annot"><span class="annottext">execPrepared :: Connection
-&gt; ByteString
-&gt; [Maybe (ByteString, Format)]
-&gt; Format
-&gt; IO (Maybe Result)
</span><a href="Database.PostgreSQL.LibPQ.html#execPrepared"><span class="hs-identifier hs-var hs-var">execPrepared</span></a></span></span><span> </span><span id="local-6989586621679046967"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046967"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span id="local-6989586621679046966"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046966"><span class="hs-identifier hs-var">stmtName</span></a></span></span><span> </span><span id="local-6989586621679046965"><span class="annot"><span class="annottext">[Maybe (ByteString, Format)]
</span><a href="#local-6989586621679046965"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span id="local-6989586621679046964"><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621679046964"><span class="hs-identifier hs-var">rFmt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-858"></span><span>    </span><span class="annot"><span class="annottext">Connection
-&gt; (Ptr PGconn -&gt; IO (Ptr PGresult)) -&gt; IO (Maybe Result)
</span><a href="Database.PostgreSQL.LibPQ.html#resultFromConn"><span class="hs-identifier hs-var">resultFromConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046967"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO (Ptr PGresult)) -&gt; IO (Maybe Result))
-&gt; (Ptr PGconn -&gt; IO (Ptr PGresult)) -&gt; IO (Maybe Result)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046963"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046963"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-859"></span><span>        </span><span class="annot"><span class="annottext">ByteString -&gt; (CString -&gt; IO (Ptr PGresult)) -&gt; IO (Ptr PGresult)
forall a. ByteString -&gt; (CString -&gt; IO a) -&gt; IO a
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.useAsCString</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046966"><span class="hs-identifier hs-var">stmtName</span></a></span><span> </span><span class="annot"><span class="annottext">((CString -&gt; IO (Ptr PGresult)) -&gt; IO (Ptr PGresult))
-&gt; (CString -&gt; IO (Ptr PGresult)) -&gt; IO (Ptr PGresult)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046962"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046962"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-860"></span><span>            </span><span class="annot"><span class="annottext">[Maybe (ByteString, Format)]
-&gt; (CInt
    -&gt; Ptr CString -&gt; Ptr CInt -&gt; Ptr CInt -&gt; IO (Ptr PGresult))
-&gt; IO (Ptr PGresult)
forall a.
[Maybe (ByteString, Format)]
-&gt; (CInt -&gt; Ptr CString -&gt; Ptr CInt -&gt; Ptr CInt -&gt; IO a) -&gt; IO a
</span><a href="Database.PostgreSQL.LibPQ.html#withParamsPrepared"><span class="hs-identifier hs-var">withParamsPrepared</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe (ByteString, Format)]
</span><a href="#local-6989586621679046965"><span class="hs-identifier hs-var">params</span></a></span><span> </span><span class="annot"><span class="annottext">((CInt -&gt; Ptr CString -&gt; Ptr CInt -&gt; Ptr CInt -&gt; IO (Ptr PGresult))
 -&gt; IO (Ptr PGresult))
-&gt; (CInt
    -&gt; Ptr CString -&gt; Ptr CInt -&gt; Ptr CInt -&gt; IO (Ptr PGresult))
-&gt; IO (Ptr PGresult)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046961"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046961"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679046960"><span class="annot"><span class="annottext">Ptr CString
</span><a href="#local-6989586621679046960"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span id="local-6989586621679046959"><span class="annot"><span class="annottext">Ptr CInt
</span><a href="#local-6989586621679046959"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span id="local-6989586621679046958"><span class="annot"><span class="annottext">Ptr CInt
</span><a href="#local-6989586621679046958"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-861"></span><span>                </span><span class="annot"><span class="annottext">Ptr PGconn
-&gt; CString
-&gt; CInt
-&gt; Ptr CString
-&gt; Ptr CInt
-&gt; Ptr CInt
-&gt; CInt
-&gt; IO (Ptr PGresult)
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQexecPrepared"><span class="hs-identifier hs-var">c_PQexecPrepared</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046963"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046962"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046961"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr CString
</span><a href="#local-6989586621679046960"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr CInt
</span><a href="#local-6989586621679046959"><span class="hs-identifier hs-var">ls</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr CInt
</span><a href="#local-6989586621679046958"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046956"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-862"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-863"></span><span>      </span><span class="hs-glyph">!</span><span id="local-6989586621679046956"><span class="annot"><span class="annottext">f :: CInt
</span><a href="#local-6989586621679046956"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Format -&gt; CInt
forall a. ToCInt a =&gt; a -&gt; CInt
</span><a href="Database.PostgreSQL.LibPQ.Enums.html#toCInt"><span class="hs-identifier hs-var">toCInt</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621679046964"><span class="hs-identifier hs-var">rFmt</span></a></span><span>
</span><span id="line-864"></span><span>
</span><span id="line-865"></span><span>
</span><span id="line-866"></span><span class="hs-comment">-- | Submits a request to obtain information about the specified</span><span>
</span><span id="line-867"></span><span class="hs-comment">-- prepared statement, and waits for completion.</span><span>
</span><span id="line-868"></span><span class="hs-comment">--</span><span>
</span><span id="line-869"></span><span class="hs-comment">-- 'describePrepared' allows an application to obtain information</span><span>
</span><span id="line-870"></span><span class="hs-comment">-- about a previously prepared statement. 'describePrepared' is</span><span>
</span><span id="line-871"></span><span class="hs-comment">-- supported only in protocol 3.0 and later connections; it will fail</span><span>
</span><span id="line-872"></span><span class="hs-comment">-- when using protocol 2.0.</span><span>
</span><span id="line-873"></span><span class="hs-comment">--</span><span>
</span><span id="line-874"></span><span class="hs-comment">-- stmtName can be empty to reference the unnamed statement, otherwise</span><span>
</span><span id="line-875"></span><span class="hs-comment">-- it must be the name of an existing prepared statement. On success,</span><span>
</span><span id="line-876"></span><span class="hs-comment">-- a 'Result' with status 'CommandOk' is returned. The functions</span><span>
</span><span id="line-877"></span><span class="hs-comment">-- 'nparams' and 'paramtype' can be applied to this 'Result' to obtain</span><span>
</span><span id="line-878"></span><span class="hs-comment">-- information about the parameters of the prepared statement, and the</span><span>
</span><span id="line-879"></span><span class="hs-comment">-- functions 'nfields', 'fname', 'ftype', etc provide information</span><span>
</span><span id="line-880"></span><span class="hs-comment">-- about the result columns (if any) of the statement.</span><span>
</span><span id="line-881"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#describePrepared"><span class="hs-identifier hs-type">describePrepared</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-882"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span> </span><span class="hs-comment">-- ^ stmtName</span><span>
</span><span id="line-883"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-884"></span><span id="describePrepared"><span class="annot"><span class="annottext">describePrepared :: Connection -&gt; ByteString -&gt; IO (Maybe Result)
</span><a href="Database.PostgreSQL.LibPQ.html#describePrepared"><span class="hs-identifier hs-var hs-var">describePrepared</span></a></span></span><span> </span><span id="local-6989586621679046955"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046955"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span id="local-6989586621679046954"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046954"><span class="hs-identifier hs-var">stmtName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-885"></span><span>    </span><span class="annot"><span class="annottext">Connection
-&gt; (Ptr PGconn -&gt; IO (Ptr PGresult)) -&gt; IO (Maybe Result)
</span><a href="Database.PostgreSQL.LibPQ.html#resultFromConn"><span class="hs-identifier hs-var">resultFromConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046955"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO (Ptr PGresult)) -&gt; IO (Maybe Result))
-&gt; (Ptr PGconn -&gt; IO (Ptr PGresult)) -&gt; IO (Maybe Result)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046953"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046953"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-886"></span><span>        </span><span class="annot"><span class="annottext">ByteString -&gt; (CString -&gt; IO (Ptr PGresult)) -&gt; IO (Ptr PGresult)
forall a. ByteString -&gt; (CString -&gt; IO a) -&gt; IO a
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.useAsCString</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046954"><span class="hs-identifier hs-var">stmtName</span></a></span><span> </span><span class="annot"><span class="annottext">((CString -&gt; IO (Ptr PGresult)) -&gt; IO (Ptr PGresult))
-&gt; (CString -&gt; IO (Ptr PGresult)) -&gt; IO (Ptr PGresult)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046952"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046952"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; CString -&gt; IO (Ptr PGresult)
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQdescribePrepared"><span class="hs-identifier hs-var">c_PQdescribePrepared</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046953"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046952"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-887"></span><span>
</span><span id="line-888"></span><span>
</span><span id="line-889"></span><span class="hs-comment">-- | Submits a request to obtain information about the specified</span><span>
</span><span id="line-890"></span><span class="hs-comment">-- portal, and waits for completion.</span><span>
</span><span id="line-891"></span><span class="hs-comment">--</span><span>
</span><span id="line-892"></span><span class="hs-comment">-- 'describePortal' allows an application to obtain information about</span><span>
</span><span id="line-893"></span><span class="hs-comment">-- a previously created portal. (libpq does not provide any direct</span><span>
</span><span id="line-894"></span><span class="hs-comment">-- access to portals, but you can use this function to inspect the</span><span>
</span><span id="line-895"></span><span class="hs-comment">-- properties of a cursor created with a DECLARE CURSOR SQL command.)</span><span>
</span><span id="line-896"></span><span class="hs-comment">-- 'describePortal' is supported only in protocol 3.0 and later</span><span>
</span><span id="line-897"></span><span class="hs-comment">-- connections; it will fail when using protocol 2.0.</span><span>
</span><span id="line-898"></span><span class="hs-comment">--</span><span>
</span><span id="line-899"></span><span class="hs-comment">-- portalName can be empty to reference the unnamed portal, otherwise</span><span>
</span><span id="line-900"></span><span class="hs-comment">-- it must be the name of an existing portal. On success, a 'Result'</span><span>
</span><span id="line-901"></span><span class="hs-comment">-- with status 'CommandOk' is returned. The functions 'nfields',</span><span>
</span><span id="line-902"></span><span class="hs-comment">-- 'fname', 'ftype', etc can be applied to the 'Result' to obtain</span><span>
</span><span id="line-903"></span><span class="hs-comment">-- information about the result columns (if any) of the portal.</span><span>
</span><span id="line-904"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#describePortal"><span class="hs-identifier hs-type">describePortal</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-905"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span> </span><span class="hs-comment">-- ^ portalName</span><span>
</span><span id="line-906"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-907"></span><span id="describePortal"><span class="annot"><span class="annottext">describePortal :: Connection -&gt; ByteString -&gt; IO (Maybe Result)
</span><a href="Database.PostgreSQL.LibPQ.html#describePortal"><span class="hs-identifier hs-var hs-var">describePortal</span></a></span></span><span> </span><span id="local-6989586621679046950"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046950"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span id="local-6989586621679046949"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046949"><span class="hs-identifier hs-var">portalName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-908"></span><span>    </span><span class="annot"><span class="annottext">Connection
-&gt; (Ptr PGconn -&gt; IO (Ptr PGresult)) -&gt; IO (Maybe Result)
</span><a href="Database.PostgreSQL.LibPQ.html#resultFromConn"><span class="hs-identifier hs-var">resultFromConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046950"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO (Ptr PGresult)) -&gt; IO (Maybe Result))
-&gt; (Ptr PGconn -&gt; IO (Ptr PGresult)) -&gt; IO (Maybe Result)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046948"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046948"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-909"></span><span>        </span><span class="annot"><span class="annottext">ByteString -&gt; (CString -&gt; IO (Ptr PGresult)) -&gt; IO (Ptr PGresult)
forall a. ByteString -&gt; (CString -&gt; IO a) -&gt; IO a
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.useAsCString</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046949"><span class="hs-identifier hs-var">portalName</span></a></span><span> </span><span class="annot"><span class="annottext">((CString -&gt; IO (Ptr PGresult)) -&gt; IO (Ptr PGresult))
-&gt; (CString -&gt; IO (Ptr PGresult)) -&gt; IO (Ptr PGresult)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046947"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046947"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-910"></span><span>            </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; CString -&gt; IO (Ptr PGresult)
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQdescribePortal"><span class="hs-identifier hs-var">c_PQdescribePortal</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046948"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046947"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-911"></span><span>
</span><span id="line-912"></span><span class="hs-comment">-- | Returns the result status of the command.</span><span>
</span><span id="line-913"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#resultStatus"><span class="hs-identifier hs-type">resultStatus</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span>
</span><span id="line-914"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Enums.html#ExecStatus"><span class="hs-identifier hs-type">ExecStatus</span></a></span><span>
</span><span id="line-915"></span><span id="resultStatus"><span class="annot"><span class="annottext">resultStatus :: Result -&gt; IO ExecStatus
</span><a href="Database.PostgreSQL.LibPQ.html#resultStatus"><span class="hs-identifier hs-var hs-var">resultStatus</span></a></span></span><span> </span><span id="local-6989586621679046945"><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046945"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Result -&gt; (Ptr PGresult -&gt; IO CInt) -&gt; IO ExecStatus
forall b. FromCInt b =&gt; Result -&gt; (Ptr PGresult -&gt; IO CInt) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#enumFromResult"><span class="hs-identifier hs-var">enumFromResult</span></a></span><span> </span><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046945"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQresultStatus"><span class="hs-identifier hs-var">c_PQresultStatus</span></a></span><span>
</span><span id="line-916"></span><span>
</span><span id="line-917"></span><span>
</span><span id="line-918"></span><span class="hs-comment">-- | Converts the 'ExecStatus' returned by 'resultStatus' into a</span><span>
</span><span id="line-919"></span><span class="hs-comment">-- string describing the status code. The caller should not</span><span>
</span><span id="line-920"></span><span class="hs-comment">-- free the result.</span><span>
</span><span id="line-921"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#resStatus"><span class="hs-identifier hs-type">resStatus</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Enums.html#ExecStatus"><span class="hs-identifier hs-type">ExecStatus</span></a></span><span>
</span><span id="line-922"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span>
</span><span id="line-923"></span><span id="resStatus"><span class="annot"><span class="annottext">resStatus :: ExecStatus -&gt; IO ByteString
</span><a href="Database.PostgreSQL.LibPQ.html#resStatus"><span class="hs-identifier hs-var hs-var">resStatus</span></a></span></span><span> </span><span id="local-6989586621679046942"><span class="annot"><span class="annottext">ExecStatus
</span><a href="#local-6989586621679046942"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-924"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679046941"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046941"><span class="hs-identifier hs-var">cstr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CInt -&gt; IO CString
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQresStatus"><span class="hs-identifier hs-var">c_PQresStatus</span></a></span><span> </span><span class="annot"><span class="annottext">(CInt -&gt; IO CString) -&gt; CInt -&gt; IO CString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ExecStatus -&gt; CInt
forall a. ToCInt a =&gt; a -&gt; CInt
</span><a href="Database.PostgreSQL.LibPQ.Enums.html#toCInt"><span class="hs-identifier hs-var">toCInt</span></a></span><span> </span><span class="annot"><span class="annottext">ExecStatus
</span><a href="#local-6989586621679046942"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-925"></span><span>       </span><span id="local-6989586621679046939"><span class="annot"><span class="annottext">CSize
</span><a href="#local-6989586621679046939"><span class="hs-identifier hs-var">len</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CString -&gt; IO CSize
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.c_strlen</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046941"><span class="hs-identifier hs-var">cstr</span></a></span><span>
</span><span id="line-926"></span><span>       </span><span id="local-6989586621679046938"><span class="annot"><span class="annottext">ForeignPtr Word8
</span><a href="#local-6989586621679046938"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr Word8 -&gt; IO (ForeignPtr Word8)
forall a. Ptr a -&gt; IO (ForeignPtr a)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">newForeignPtr_</span></a></span><span> </span><span class="annot"><span class="annottext">(Ptr Word8 -&gt; IO (ForeignPtr Word8))
-&gt; Ptr Word8 -&gt; IO (ForeignPtr Word8)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CString -&gt; Ptr Word8
forall a b. Ptr a -&gt; Ptr b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">castPtr</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046941"><span class="hs-identifier hs-var">cstr</span></a></span><span>
</span><span id="line-927"></span><span>       </span><span class="annot"><span class="annottext">ByteString -&gt; IO ByteString
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; IO ByteString) -&gt; ByteString -&gt; IO ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr Word8 -&gt; Int -&gt; Int -&gt; ByteString
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.fromForeignPtr</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr Word8
</span><a href="#local-6989586621679046938"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; ByteString) -&gt; Int -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CSize -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">CSize
</span><a href="#local-6989586621679046939"><span class="hs-identifier hs-var">len</span></a></span><span>
</span><span id="line-928"></span><span>
</span><span id="line-929"></span><span>
</span><span id="line-930"></span><span class="hs-comment">-- | Returns the error message associated with the command, or an</span><span>
</span><span id="line-931"></span><span class="hs-comment">-- empty string if there was no error.</span><span>
</span><span id="line-932"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#resultErrorMessage"><span class="hs-identifier hs-type">resultErrorMessage</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span>
</span><span id="line-933"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-934"></span><span id="resultErrorMessage"><span class="annot"><span class="annottext">resultErrorMessage :: Result -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#resultErrorMessage"><span class="hs-identifier hs-var hs-var">resultErrorMessage</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Result -&gt; (Ptr PGresult -&gt; IO CString) -&gt; IO (Maybe ByteString))
-&gt; (Ptr PGresult -&gt; IO CString) -&gt; Result -&gt; IO (Maybe ByteString)
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">Result -&gt; (Ptr PGresult -&gt; IO CString) -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#maybeBsFromResult"><span class="hs-identifier hs-var">maybeBsFromResult</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult -&gt; IO CString
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQresultErrorMessage"><span class="hs-identifier hs-var">c_PQresultErrorMessage</span></a></span><span>
</span><span id="line-935"></span><span>
</span><span id="line-936"></span><span class="hs-comment">-- | Frees the memory associated with a result.  Note that using this</span><span>
</span><span id="line-937"></span><span class="hs-comment">-- function correctly is especially tricky;  you need to ensure that</span><span>
</span><span id="line-938"></span><span class="hs-comment">-- no references to the result.   This means no references to a value</span><span>
</span><span id="line-939"></span><span class="hs-comment">-- returned by 'getvalue',  no references hiding inside an unevaluated</span><span>
</span><span id="line-940"></span><span class="hs-comment">-- thunk,  etc.    Improper use of this function is likely to cause a</span><span>
</span><span id="line-941"></span><span class="hs-comment">-- segfault.   Also,  the use of this function is not strictly necessary;</span><span>
</span><span id="line-942"></span><span class="hs-comment">-- the memory will get freed by the garbage collector when there are no</span><span>
</span><span id="line-943"></span><span class="hs-comment">-- more references to the result.</span><span>
</span><span id="line-944"></span><span>
</span><span id="line-945"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#unsafeFreeResult"><span class="hs-identifier hs-type">unsafeFreeResult</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-946"></span><span id="unsafeFreeResult"><span class="annot"><span class="annottext">unsafeFreeResult :: Result -&gt; IO ()
</span><a href="Database.PostgreSQL.LibPQ.html#unsafeFreeResult"><span class="hs-identifier hs-var hs-var">unsafeFreeResult</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span> </span><span id="local-6989586621679046934"><span class="annot"><span class="annottext">ForeignPtr PGresult
</span><a href="#local-6989586621679046934"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignPtr PGresult -&gt; IO ()
forall a. ForeignPtr a -&gt; IO ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">finalizeForeignPtr</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr PGresult
</span><a href="#local-6989586621679046934"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-947"></span><span>
</span><span id="line-948"></span><span class="hs-comment">-- | Returns an individual field of an error report.</span><span>
</span><span id="line-949"></span><span class="hs-comment">--</span><span>
</span><span id="line-950"></span><span class="hs-comment">-- fieldcode is an error field identifier; see the symbols listed</span><span>
</span><span id="line-951"></span><span class="hs-comment">-- below. 'Nothing' is returned if the PGresult is not an error or</span><span>
</span><span id="line-952"></span><span class="hs-comment">-- warning result, or does not include the specified field. Field</span><span>
</span><span id="line-953"></span><span class="hs-comment">-- values will normally not include a trailing newline.</span><span>
</span><span id="line-954"></span><span class="hs-comment">--</span><span>
</span><span id="line-955"></span><span class="hs-comment">-- The client is responsible for formatting displayed information to</span><span>
</span><span id="line-956"></span><span class="hs-comment">-- meet its needs; in particular it should break long lines as</span><span>
</span><span id="line-957"></span><span class="hs-comment">-- needed. Newline characters appearing in the error message fields</span><span>
</span><span id="line-958"></span><span class="hs-comment">-- should be treated as paragraph breaks, not line breaks.</span><span>
</span><span id="line-959"></span><span class="hs-comment">--</span><span>
</span><span id="line-960"></span><span class="hs-comment">-- Errors generated internally by libpq will have severity and primary</span><span>
</span><span id="line-961"></span><span class="hs-comment">-- message, but typically no other fields. Errors returned by a</span><span>
</span><span id="line-962"></span><span class="hs-comment">-- pre-3.0-protocol server will include severity and primary message,</span><span>
</span><span id="line-963"></span><span class="hs-comment">-- and sometimes a detail message, but no other fields.</span><span>
</span><span id="line-964"></span><span class="hs-comment">--</span><span>
</span><span id="line-965"></span><span class="hs-comment">-- Note that error fields are only available from 'Result' objects,</span><span>
</span><span id="line-966"></span><span class="hs-comment">-- not 'Connection' objects; there is no errorField function.</span><span>
</span><span id="line-967"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#resultErrorField"><span class="hs-identifier hs-type">resultErrorField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span>
</span><span id="line-968"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Enums.html#FieldCode"><span class="hs-identifier hs-type">FieldCode</span></a></span><span>
</span><span id="line-969"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-970"></span><span id="resultErrorField"><span class="annot"><span class="annottext">resultErrorField :: Result -&gt; FieldCode -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#resultErrorField"><span class="hs-identifier hs-var hs-var">resultErrorField</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span> </span><span id="local-6989586621679046933"><span class="annot"><span class="annottext">ForeignPtr PGresult
</span><a href="#local-6989586621679046933"><span class="hs-identifier hs-var">fp</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679046932"><span class="annot"><span class="annottext">FieldCode
</span><a href="#local-6989586621679046932"><span class="hs-identifier hs-var">fieldcode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-971"></span><span>    </span><span class="annot"><span class="annottext">ForeignPtr PGresult
-&gt; (Ptr PGresult -&gt; IO CString) -&gt; IO (Maybe ByteString)
forall a.
ForeignPtr a -&gt; (Ptr a -&gt; IO CString) -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#maybeBsFromForeignPtr"><span class="hs-identifier hs-var">maybeBsFromForeignPtr</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr PGresult
</span><a href="#local-6989586621679046933"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGresult -&gt; IO CString) -&gt; IO (Maybe ByteString))
-&gt; (Ptr PGresult -&gt; IO CString) -&gt; IO (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046930"><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046930"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-972"></span><span>        </span><span class="annot"><span class="annottext">Ptr PGresult -&gt; CInt -&gt; IO CString
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQresultErrorField"><span class="hs-identifier hs-var">c_PQresultErrorField</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046930"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="annot"><span class="annottext">(CInt -&gt; IO CString) -&gt; CInt -&gt; IO CString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FieldCode -&gt; CInt
forall a. ToCInt a =&gt; a -&gt; CInt
</span><a href="Database.PostgreSQL.LibPQ.Enums.html#toCInt"><span class="hs-identifier hs-var">toCInt</span></a></span><span> </span><span class="annot"><span class="annottext">FieldCode
</span><a href="#local-6989586621679046932"><span class="hs-identifier hs-var">fieldcode</span></a></span><span>
</span><span id="line-973"></span><span>
</span><span id="line-974"></span><span>
</span><span id="line-975"></span><span class="hs-comment">-- $queryresultinfo</span><span>
</span><span id="line-976"></span><span class="hs-comment">-- These functions are used to extract information from a 'Result'</span><span>
</span><span id="line-977"></span><span class="hs-comment">-- that represents a successful query result (that is, one that has</span><span>
</span><span id="line-978"></span><span class="hs-comment">-- status 'TuplesOk'). They can also be used to extract information</span><span>
</span><span id="line-979"></span><span class="hs-comment">-- from a successful Describe operation: a Describe's result has all</span><span>
</span><span id="line-980"></span><span class="hs-comment">-- the same column information that actual execution of the query</span><span>
</span><span id="line-981"></span><span class="hs-comment">-- would provide, but it has zero rows. For objects with other status</span><span>
</span><span id="line-982"></span><span class="hs-comment">-- values, these functions will act as though the result has zero rows</span><span>
</span><span id="line-983"></span><span class="hs-comment">-- and zero columns.</span><span>
</span><span id="line-984"></span><span>
</span><span id="line-985"></span><span class="hs-comment">-- | Returns the number of rows (tuples) in the query result.  (Note</span><span>
</span><span id="line-986"></span><span class="hs-comment">-- that PGresult objects are limited to no more than INT_MAX rows, so</span><span>
</span><span id="line-987"></span><span class="hs-comment">-- an int result is sufficient.)</span><span>
</span><span id="line-988"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#ntuples"><span class="hs-identifier hs-type">ntuples</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span>
</span><span id="line-989"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Row"><span class="hs-identifier hs-type">Row</span></a></span><span>
</span><span id="line-990"></span><span id="ntuples"><span class="annot"><span class="annottext">ntuples :: Result -&gt; IO Row
</span><a href="Database.PostgreSQL.LibPQ.html#ntuples"><span class="hs-identifier hs-var hs-var">ntuples</span></a></span></span><span> </span><span id="local-6989586621679046928"><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046928"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Result -&gt; (Ptr PGresult -&gt; IO Row) -&gt; IO Row
forall b. Result -&gt; (Ptr PGresult -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#withResult"><span class="hs-identifier hs-var">withResult</span></a></span><span> </span><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046928"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Row -&gt; IO Row
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Row -&gt; IO Row) -&gt; (Ptr PGresult -&gt; Row) -&gt; Ptr PGresult -&gt; IO Row
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; Row
forall a. Integral a =&gt; a -&gt; Row
</span><a href="Database.PostgreSQL.LibPQ.html#toRow"><span class="hs-identifier hs-var">toRow</span></a></span><span> </span><span class="annot"><span class="annottext">(CInt -&gt; Row) -&gt; (Ptr PGresult -&gt; CInt) -&gt; Ptr PGresult -&gt; Row
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult -&gt; CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQntuples"><span class="hs-identifier hs-var">c_PQntuples</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-991"></span><span>
</span><span id="line-992"></span><span>
</span><span id="line-993"></span><span class="hs-comment">-- | Returns the number of columns (fields) in each row of the query</span><span>
</span><span id="line-994"></span><span class="hs-comment">-- result.</span><span>
</span><span id="line-995"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#nfields"><span class="hs-identifier hs-type">nfields</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span>
</span><span id="line-996"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Column"><span class="hs-identifier hs-type">Column</span></a></span><span>
</span><span id="line-997"></span><span id="nfields"><span class="annot"><span class="annottext">nfields :: Result -&gt; IO Column
</span><a href="Database.PostgreSQL.LibPQ.html#nfields"><span class="hs-identifier hs-var hs-var">nfields</span></a></span></span><span> </span><span id="local-6989586621679046924"><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046924"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Result -&gt; (Ptr PGresult -&gt; IO Column) -&gt; IO Column
forall b. Result -&gt; (Ptr PGresult -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#withResult"><span class="hs-identifier hs-var">withResult</span></a></span><span> </span><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046924"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Column -&gt; IO Column
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Column -&gt; IO Column)
-&gt; (Ptr PGresult -&gt; Column) -&gt; Ptr PGresult -&gt; IO Column
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; Column
forall a. Integral a =&gt; a -&gt; Column
</span><a href="Database.PostgreSQL.LibPQ.html#toColumn"><span class="hs-identifier hs-var">toColumn</span></a></span><span> </span><span class="annot"><span class="annottext">(CInt -&gt; Column)
-&gt; (Ptr PGresult -&gt; CInt) -&gt; Ptr PGresult -&gt; Column
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult -&gt; CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQnfields"><span class="hs-identifier hs-var">c_PQnfields</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-998"></span><span>
</span><span id="line-999"></span><span>
</span><span id="line-1000"></span><span class="hs-keyword">newtype</span><span> </span><span id="Column"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Column"><span class="hs-identifier hs-var">Column</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Col"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Col"><span class="hs-identifier hs-var">Col</span></a></span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">CInt</span></a></span><span>
</span><span id="line-1001"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679046918"><span id="local-6989586621679046920"><span class="annot"><span class="annottext">Column -&gt; Column -&gt; Bool
(Column -&gt; Column -&gt; Bool)
-&gt; (Column -&gt; Column -&gt; Bool) -&gt; Eq Column
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Column -&gt; Column -&gt; Bool
$c/= :: Column -&gt; Column -&gt; Bool
== :: Column -&gt; Column -&gt; Bool
$c== :: Column -&gt; Column -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679046903"><span id="local-6989586621679046905"><span id="local-6989586621679046907"><span id="local-6989586621679046909"><span id="local-6989586621679046911"><span id="local-6989586621679046913"><span id="local-6989586621679046915"><span class="annot"><span class="annottext">Eq Column
Eq Column
-&gt; (Column -&gt; Column -&gt; Ordering)
-&gt; (Column -&gt; Column -&gt; Bool)
-&gt; (Column -&gt; Column -&gt; Bool)
-&gt; (Column -&gt; Column -&gt; Bool)
-&gt; (Column -&gt; Column -&gt; Bool)
-&gt; (Column -&gt; Column -&gt; Column)
-&gt; (Column -&gt; Column -&gt; Column)
-&gt; Ord Column
Column -&gt; Column -&gt; Bool
Column -&gt; Column -&gt; Ordering
Column -&gt; Column -&gt; Column
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: Column -&gt; Column -&gt; Column
$cmin :: Column -&gt; Column -&gt; Column
max :: Column -&gt; Column -&gt; Column
$cmax :: Column -&gt; Column -&gt; Column
&gt;= :: Column -&gt; Column -&gt; Bool
$c&gt;= :: Column -&gt; Column -&gt; Bool
&gt; :: Column -&gt; Column -&gt; Bool
$c&gt; :: Column -&gt; Column -&gt; Bool
&lt;= :: Column -&gt; Column -&gt; Bool
$c&lt;= :: Column -&gt; Column -&gt; Bool
&lt; :: Column -&gt; Column -&gt; Bool
$c&lt; :: Column -&gt; Column -&gt; Bool
compare :: Column -&gt; Column -&gt; Ordering
$ccompare :: Column -&gt; Column -&gt; Ordering
$cp1Ord :: Eq Column
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679046896"><span id="local-6989586621679046898"><span id="local-6989586621679046900"><span class="annot"><span class="annottext">Int -&gt; Column -&gt; String -&gt; String
[Column] -&gt; String -&gt; String
Column -&gt; String
(Int -&gt; Column -&gt; String -&gt; String)
-&gt; (Column -&gt; String)
-&gt; ([Column] -&gt; String -&gt; String)
-&gt; Show Column
forall a.
(Int -&gt; a -&gt; String -&gt; String)
-&gt; (a -&gt; String) -&gt; ([a] -&gt; String -&gt; String) -&gt; Show a
showList :: [Column] -&gt; String -&gt; String
$cshowList :: [Column] -&gt; String -&gt; String
show :: Column -&gt; String
$cshow :: Column -&gt; String
showsPrec :: Int -&gt; Column -&gt; String -&gt; String
$cshowsPrec :: Int -&gt; Column -&gt; String -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1002"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679046880"><span id="local-6989586621679046882"><span id="local-6989586621679046884"><span id="local-6989586621679046886"><span id="local-6989586621679046888"><span id="local-6989586621679046890"><span id="local-6989586621679046892"><span id="local-6989586621679046894"><span class="annot"><span class="annottext">Int -&gt; Column
Column -&gt; Int
Column -&gt; [Column]
Column -&gt; Column
Column -&gt; Column -&gt; [Column]
Column -&gt; Column -&gt; Column -&gt; [Column]
(Column -&gt; Column)
-&gt; (Column -&gt; Column)
-&gt; (Int -&gt; Column)
-&gt; (Column -&gt; Int)
-&gt; (Column -&gt; [Column])
-&gt; (Column -&gt; Column -&gt; [Column])
-&gt; (Column -&gt; Column -&gt; [Column])
-&gt; (Column -&gt; Column -&gt; Column -&gt; [Column])
-&gt; Enum Column
forall a.
(a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (Int -&gt; a)
-&gt; (a -&gt; Int)
-&gt; (a -&gt; [a])
-&gt; (a -&gt; a -&gt; [a])
-&gt; (a -&gt; a -&gt; [a])
-&gt; (a -&gt; a -&gt; a -&gt; [a])
-&gt; Enum a
enumFromThenTo :: Column -&gt; Column -&gt; Column -&gt; [Column]
$cenumFromThenTo :: Column -&gt; Column -&gt; Column -&gt; [Column]
enumFromTo :: Column -&gt; Column -&gt; [Column]
$cenumFromTo :: Column -&gt; Column -&gt; [Column]
enumFromThen :: Column -&gt; Column -&gt; [Column]
$cenumFromThen :: Column -&gt; Column -&gt; [Column]
enumFrom :: Column -&gt; [Column]
$cenumFrom :: Column -&gt; [Column]
fromEnum :: Column -&gt; Int
$cfromEnum :: Column -&gt; Int
toEnum :: Int -&gt; Column
$ctoEnum :: Int -&gt; Column
pred :: Column -&gt; Column
$cpred :: Column -&gt; Column
succ :: Column -&gt; Column
$csucc :: Column -&gt; Column
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Enum</span></a></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679046865"><span id="local-6989586621679046867"><span id="local-6989586621679046869"><span id="local-6989586621679046871"><span id="local-6989586621679046873"><span id="local-6989586621679046875"><span id="local-6989586621679046877"><span class="annot"><span class="annottext">Integer -&gt; Column
Column -&gt; Column
Column -&gt; Column -&gt; Column
(Column -&gt; Column -&gt; Column)
-&gt; (Column -&gt; Column -&gt; Column)
-&gt; (Column -&gt; Column -&gt; Column)
-&gt; (Column -&gt; Column)
-&gt; (Column -&gt; Column)
-&gt; (Column -&gt; Column)
-&gt; (Integer -&gt; Column)
-&gt; Num Column
forall a.
(a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (Integer -&gt; a)
-&gt; Num a
fromInteger :: Integer -&gt; Column
$cfromInteger :: Integer -&gt; Column
signum :: Column -&gt; Column
$csignum :: Column -&gt; Column
abs :: Column -&gt; Column
$cabs :: Column -&gt; Column
negate :: Column -&gt; Column
$cnegate :: Column -&gt; Column
* :: Column -&gt; Column -&gt; Column
$c* :: Column -&gt; Column -&gt; Column
- :: Column -&gt; Column -&gt; Column
$c- :: Column -&gt; Column -&gt; Column
+ :: Column -&gt; Column -&gt; Column
$c+ :: Column -&gt; Column -&gt; Column
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Num</span></a></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1003"></span><span class="hs-keyword">newtype</span><span> </span><span id="Row"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Row"><span class="hs-identifier hs-var">Row</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="Row"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Row"><span class="hs-identifier hs-var">Row</span></a></span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">CInt</span></a></span><span>
</span><span id="line-1004"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679046859"><span id="local-6989586621679046861"><span class="annot"><span class="annottext">Row -&gt; Row -&gt; Bool
(Row -&gt; Row -&gt; Bool) -&gt; (Row -&gt; Row -&gt; Bool) -&gt; Eq Row
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Row -&gt; Row -&gt; Bool
$c/= :: Row -&gt; Row -&gt; Bool
== :: Row -&gt; Row -&gt; Bool
$c== :: Row -&gt; Row -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679046844"><span id="local-6989586621679046846"><span id="local-6989586621679046848"><span id="local-6989586621679046850"><span id="local-6989586621679046852"><span id="local-6989586621679046854"><span id="local-6989586621679046856"><span class="annot"><span class="annottext">Eq Row
Eq Row
-&gt; (Row -&gt; Row -&gt; Ordering)
-&gt; (Row -&gt; Row -&gt; Bool)
-&gt; (Row -&gt; Row -&gt; Bool)
-&gt; (Row -&gt; Row -&gt; Bool)
-&gt; (Row -&gt; Row -&gt; Bool)
-&gt; (Row -&gt; Row -&gt; Row)
-&gt; (Row -&gt; Row -&gt; Row)
-&gt; Ord Row
Row -&gt; Row -&gt; Bool
Row -&gt; Row -&gt; Ordering
Row -&gt; Row -&gt; Row
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: Row -&gt; Row -&gt; Row
$cmin :: Row -&gt; Row -&gt; Row
max :: Row -&gt; Row -&gt; Row
$cmax :: Row -&gt; Row -&gt; Row
&gt;= :: Row -&gt; Row -&gt; Bool
$c&gt;= :: Row -&gt; Row -&gt; Bool
&gt; :: Row -&gt; Row -&gt; Bool
$c&gt; :: Row -&gt; Row -&gt; Bool
&lt;= :: Row -&gt; Row -&gt; Bool
$c&lt;= :: Row -&gt; Row -&gt; Bool
&lt; :: Row -&gt; Row -&gt; Bool
$c&lt; :: Row -&gt; Row -&gt; Bool
compare :: Row -&gt; Row -&gt; Ordering
$ccompare :: Row -&gt; Row -&gt; Ordering
$cp1Ord :: Eq Row
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679046838"><span id="local-6989586621679046840"><span id="local-6989586621679046842"><span class="annot"><span class="annottext">Int -&gt; Row -&gt; String -&gt; String
[Row] -&gt; String -&gt; String
Row -&gt; String
(Int -&gt; Row -&gt; String -&gt; String)
-&gt; (Row -&gt; String) -&gt; ([Row] -&gt; String -&gt; String) -&gt; Show Row
forall a.
(Int -&gt; a -&gt; String -&gt; String)
-&gt; (a -&gt; String) -&gt; ([a] -&gt; String -&gt; String) -&gt; Show a
showList :: [Row] -&gt; String -&gt; String
$cshowList :: [Row] -&gt; String -&gt; String
show :: Row -&gt; String
$cshow :: Row -&gt; String
showsPrec :: Int -&gt; Row -&gt; String -&gt; String
$cshowsPrec :: Int -&gt; Row -&gt; String -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1005"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679046822"><span id="local-6989586621679046824"><span id="local-6989586621679046826"><span id="local-6989586621679046828"><span id="local-6989586621679046830"><span id="local-6989586621679046832"><span id="local-6989586621679046834"><span id="local-6989586621679046836"><span class="annot"><span class="annottext">Int -&gt; Row
Row -&gt; Int
Row -&gt; [Row]
Row -&gt; Row
Row -&gt; Row -&gt; [Row]
Row -&gt; Row -&gt; Row -&gt; [Row]
(Row -&gt; Row)
-&gt; (Row -&gt; Row)
-&gt; (Int -&gt; Row)
-&gt; (Row -&gt; Int)
-&gt; (Row -&gt; [Row])
-&gt; (Row -&gt; Row -&gt; [Row])
-&gt; (Row -&gt; Row -&gt; [Row])
-&gt; (Row -&gt; Row -&gt; Row -&gt; [Row])
-&gt; Enum Row
forall a.
(a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (Int -&gt; a)
-&gt; (a -&gt; Int)
-&gt; (a -&gt; [a])
-&gt; (a -&gt; a -&gt; [a])
-&gt; (a -&gt; a -&gt; [a])
-&gt; (a -&gt; a -&gt; a -&gt; [a])
-&gt; Enum a
enumFromThenTo :: Row -&gt; Row -&gt; Row -&gt; [Row]
$cenumFromThenTo :: Row -&gt; Row -&gt; Row -&gt; [Row]
enumFromTo :: Row -&gt; Row -&gt; [Row]
$cenumFromTo :: Row -&gt; Row -&gt; [Row]
enumFromThen :: Row -&gt; Row -&gt; [Row]
$cenumFromThen :: Row -&gt; Row -&gt; [Row]
enumFrom :: Row -&gt; [Row]
$cenumFrom :: Row -&gt; [Row]
fromEnum :: Row -&gt; Int
$cfromEnum :: Row -&gt; Int
toEnum :: Int -&gt; Row
$ctoEnum :: Int -&gt; Row
pred :: Row -&gt; Row
$cpred :: Row -&gt; Row
succ :: Row -&gt; Row
$csucc :: Row -&gt; Row
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Enum</span></a></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679046808"><span id="local-6989586621679046810"><span id="local-6989586621679046812"><span id="local-6989586621679046814"><span id="local-6989586621679046816"><span id="local-6989586621679046818"><span id="local-6989586621679046820"><span class="annot"><span class="annottext">Integer -&gt; Row
Row -&gt; Row
Row -&gt; Row -&gt; Row
(Row -&gt; Row -&gt; Row)
-&gt; (Row -&gt; Row -&gt; Row)
-&gt; (Row -&gt; Row -&gt; Row)
-&gt; (Row -&gt; Row)
-&gt; (Row -&gt; Row)
-&gt; (Row -&gt; Row)
-&gt; (Integer -&gt; Row)
-&gt; Num Row
forall a.
(a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (Integer -&gt; a)
-&gt; Num a
fromInteger :: Integer -&gt; Row
$cfromInteger :: Integer -&gt; Row
signum :: Row -&gt; Row
$csignum :: Row -&gt; Row
abs :: Row -&gt; Row
$cabs :: Row -&gt; Row
negate :: Row -&gt; Row
$cnegate :: Row -&gt; Row
* :: Row -&gt; Row -&gt; Row
$c* :: Row -&gt; Row -&gt; Row
- :: Row -&gt; Row -&gt; Row
$c- :: Row -&gt; Row -&gt; Row
+ :: Row -&gt; Row -&gt; Row
$c+ :: Row -&gt; Row -&gt; Row
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Num</span></a></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1006"></span><span>
</span><span id="line-1007"></span><span id="local-6989586621679047333"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#toColumn"><span class="hs-identifier hs-type">toColumn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Integral</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679047333"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679047333"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Column"><span class="hs-identifier hs-type">Column</span></a></span></span><span>
</span><span id="line-1008"></span><span id="toColumn"><span class="annot"><span class="annottext">toColumn :: a -&gt; Column
</span><a href="Database.PostgreSQL.LibPQ.html#toColumn"><span class="hs-identifier hs-var hs-var">toColumn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CInt -&gt; Column
</span><a href="Database.PostgreSQL.LibPQ.html#Col"><span class="hs-identifier hs-var">Col</span></a></span><span> </span><span class="annot"><span class="annottext">(CInt -&gt; Column) -&gt; (a -&gt; CInt) -&gt; a -&gt; Column
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; CInt
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span>
</span><span id="line-1009"></span><span>
</span><span id="line-1010"></span><span id="local-6989586621679047335"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#toRow"><span class="hs-identifier hs-type">toRow</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Integral</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679047335"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679047335"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Row"><span class="hs-identifier hs-type">Row</span></a></span></span><span>
</span><span id="line-1011"></span><span id="toRow"><span class="annot"><span class="annottext">toRow :: a -&gt; Row
</span><a href="Database.PostgreSQL.LibPQ.html#toRow"><span class="hs-identifier hs-var hs-var">toRow</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CInt -&gt; Row
</span><a href="Database.PostgreSQL.LibPQ.html#Row"><span class="hs-identifier hs-var">Row</span></a></span><span> </span><span class="annot"><span class="annottext">(CInt -&gt; Row) -&gt; (a -&gt; CInt) -&gt; a -&gt; Row
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; CInt
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span>
</span><span id="line-1012"></span><span>
</span><span id="line-1013"></span><span>
</span><span id="line-1014"></span><span class="hs-comment">-- | Returns the column name associated with the given 'Column'</span><span>
</span><span id="line-1015"></span><span class="hs-comment">-- number. Column numbers start at 0.</span><span>
</span><span id="line-1016"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#fname"><span class="hs-identifier hs-type">fname</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span>
</span><span id="line-1017"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Column"><span class="hs-identifier hs-type">Column</span></a></span><span>
</span><span id="line-1018"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1019"></span><span id="fname"><span class="annot"><span class="annottext">fname :: Result -&gt; Column -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#fname"><span class="hs-identifier hs-var hs-var">fname</span></a></span></span><span> </span><span id="local-6989586621679046807"><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046807"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Col"><span class="hs-identifier hs-type">Col</span></a></span><span> </span><span id="local-6989586621679046806"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046806"><span class="hs-identifier hs-var">colNum</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1020"></span><span>    </span><span class="annot"><span class="annottext">Result -&gt; (Ptr PGresult -&gt; IO CString) -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#maybeBsFromResult"><span class="hs-identifier hs-var">maybeBsFromResult</span></a></span><span> </span><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046807"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGresult -&gt; IO CString) -&gt; IO (Maybe ByteString))
-&gt; (Ptr PGresult -&gt; IO CString) -&gt; IO (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046805"><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046805"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1021"></span><span>        </span><span class="annot"><span class="annottext">Ptr PGresult -&gt; CInt -&gt; IO CString
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQfname"><span class="hs-identifier hs-var">c_PQfname</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046805"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046806"><span class="hs-identifier hs-var">colNum</span></a></span><span>
</span><span id="line-1022"></span><span>
</span><span id="line-1023"></span><span>
</span><span id="line-1024"></span><span class="hs-comment">-- | Returns the column number associated with the given column name.</span><span>
</span><span id="line-1025"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#fnumber"><span class="hs-identifier hs-type">fnumber</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span>
</span><span id="line-1026"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span>
</span><span id="line-1027"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Column"><span class="hs-identifier hs-type">Column</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1028"></span><span id="fnumber"><span class="annot"><span class="annottext">fnumber :: Result -&gt; ByteString -&gt; IO (Maybe Column)
</span><a href="Database.PostgreSQL.LibPQ.html#fnumber"><span class="hs-identifier hs-var hs-var">fnumber</span></a></span></span><span> </span><span id="local-6989586621679046803"><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046803"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span id="local-6989586621679046802"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046802"><span class="hs-identifier hs-var">columnName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1029"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679046801"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046801"><span class="hs-identifier hs-var">num</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Result -&gt; (Ptr PGresult -&gt; IO CInt) -&gt; IO CInt
forall b. Result -&gt; (Ptr PGresult -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#withResult"><span class="hs-identifier hs-var">withResult</span></a></span><span> </span><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046803"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGresult -&gt; IO CInt) -&gt; IO CInt)
-&gt; (Ptr PGresult -&gt; IO CInt) -&gt; IO CInt
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046800"><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046800"><span class="hs-identifier hs-var">resPtr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1030"></span><span>              </span><span class="annot"><span class="annottext">ByteString -&gt; (CString -&gt; IO CInt) -&gt; IO CInt
forall a. ByteString -&gt; (CString -&gt; IO a) -&gt; IO a
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.useAsCString</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046802"><span class="hs-identifier hs-var">columnName</span></a></span><span> </span><span class="annot"><span class="annottext">((CString -&gt; IO CInt) -&gt; IO CInt)
-&gt; (CString -&gt; IO CInt) -&gt; IO CInt
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046799"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046799"><span class="hs-identifier hs-var">columnNamePtr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1031"></span><span>                  </span><span class="annot"><span class="annottext">Ptr PGresult -&gt; CString -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQfnumber"><span class="hs-identifier hs-var">c_PQfnumber</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046800"><span class="hs-identifier hs-var">resPtr</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046799"><span class="hs-identifier hs-var">columnNamePtr</span></a></span><span>
</span><span id="line-1032"></span><span>       </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046801"><span class="hs-identifier hs-var">num</span></a></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; CInt -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">CInt
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1033"></span><span>         </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Maybe Column -&gt; IO (Maybe Column)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Column
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1034"></span><span>         </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Maybe Column -&gt; IO (Maybe Column)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Column -&gt; IO (Maybe Column))
-&gt; Maybe Column -&gt; IO (Maybe Column)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Column -&gt; Maybe Column
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(Column -&gt; Maybe Column) -&gt; Column -&gt; Maybe Column
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; Column
forall a. Integral a =&gt; a -&gt; Column
</span><a href="Database.PostgreSQL.LibPQ.html#toColumn"><span class="hs-identifier hs-var">toColumn</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046801"><span class="hs-identifier hs-var">num</span></a></span><span>
</span><span id="line-1035"></span><span>
</span><span id="line-1036"></span><span>
</span><span id="line-1037"></span><span class="hs-comment">-- | Returns the OID of the table from which the given column was</span><span>
</span><span id="line-1038"></span><span class="hs-comment">-- fetched. Column numbers start at 0.</span><span>
</span><span id="line-1039"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#ftable"><span class="hs-identifier hs-type">ftable</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span>
</span><span id="line-1040"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Column"><span class="hs-identifier hs-type">Column</span></a></span><span>
</span><span id="line-1041"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Oid.html#Oid"><span class="hs-identifier hs-type">Oid</span></a></span><span>
</span><span id="line-1042"></span><span id="ftable"><span class="annot"><span class="annottext">ftable :: Result -&gt; Column -&gt; IO Oid
</span><a href="Database.PostgreSQL.LibPQ.html#ftable"><span class="hs-identifier hs-var hs-var">ftable</span></a></span></span><span> </span><span id="local-6989586621679046797"><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046797"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Col"><span class="hs-identifier hs-type">Col</span></a></span><span> </span><span id="local-6989586621679046796"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046796"><span class="hs-identifier hs-var">colNum</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Result -&gt; (Ptr PGresult -&gt; IO Oid) -&gt; IO Oid
forall b. Result -&gt; (Ptr PGresult -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#withResult"><span class="hs-identifier hs-var">withResult</span></a></span><span> </span><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046797"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGresult -&gt; IO Oid) -&gt; IO Oid)
-&gt; (Ptr PGresult -&gt; IO Oid) -&gt; IO Oid
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046795"><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046795"><span class="hs-identifier hs-var">ptr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ptr PGresult -&gt; CInt -&gt; IO Oid
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQftable"><span class="hs-identifier hs-var">c_PQftable</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046795"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046796"><span class="hs-identifier hs-var">colNum</span></a></span><span>
</span><span id="line-1043"></span><span>
</span><span id="line-1044"></span><span>
</span><span id="line-1045"></span><span class="hs-comment">-- | Returns the column number (within its table) of the column making</span><span>
</span><span id="line-1046"></span><span class="hs-comment">-- up the specified query result column. Query-result column numbers</span><span>
</span><span id="line-1047"></span><span class="hs-comment">-- start at 0, but table columns have nonzero numbers.</span><span>
</span><span id="line-1048"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#ftablecol"><span class="hs-identifier hs-type">ftablecol</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span>
</span><span id="line-1049"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Column"><span class="hs-identifier hs-type">Column</span></a></span><span>
</span><span id="line-1050"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Column"><span class="hs-identifier hs-type">Column</span></a></span><span>
</span><span id="line-1051"></span><span id="ftablecol"><span class="annot"><span class="annottext">ftablecol :: Result -&gt; Column -&gt; IO Column
</span><a href="Database.PostgreSQL.LibPQ.html#ftablecol"><span class="hs-identifier hs-var hs-var">ftablecol</span></a></span></span><span> </span><span id="local-6989586621679046793"><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046793"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Col"><span class="hs-identifier hs-type">Col</span></a></span><span> </span><span id="local-6989586621679046792"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046792"><span class="hs-identifier hs-var">colNum</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1052"></span><span>    </span><span class="annot"><span class="annottext">(CInt -&gt; Column) -&gt; IO CInt -&gt; IO Column
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; Column
</span><a href="Database.PostgreSQL.LibPQ.html#Col"><span class="hs-identifier hs-var">Col</span></a></span><span> </span><span class="annot"><span class="annottext">(IO CInt -&gt; IO Column) -&gt; IO CInt -&gt; IO Column
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Result -&gt; (Ptr PGresult -&gt; IO CInt) -&gt; IO CInt
forall b. Result -&gt; (Ptr PGresult -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#withResult"><span class="hs-identifier hs-var">withResult</span></a></span><span> </span><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046793"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGresult -&gt; IO CInt) -&gt; IO CInt)
-&gt; (Ptr PGresult -&gt; IO CInt) -&gt; IO CInt
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046791"><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046791"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ptr PGresult -&gt; CInt -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQftablecol"><span class="hs-identifier hs-var">c_PQftablecol</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046791"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046792"><span class="hs-identifier hs-var">colNum</span></a></span><span>
</span><span id="line-1053"></span><span>
</span><span id="line-1054"></span><span>
</span><span id="line-1055"></span><span class="hs-comment">-- | Returns the 'Format' of the given column. Column numbers start at</span><span>
</span><span id="line-1056"></span><span class="hs-comment">-- 0.</span><span>
</span><span id="line-1057"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#fformat"><span class="hs-identifier hs-type">fformat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span>
</span><span id="line-1058"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Column"><span class="hs-identifier hs-type">Column</span></a></span><span>
</span><span id="line-1059"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Enums.html#Format"><span class="hs-identifier hs-type">Format</span></a></span><span>
</span><span id="line-1060"></span><span id="fformat"><span class="annot"><span class="annottext">fformat :: Result -&gt; Column -&gt; IO Format
</span><a href="Database.PostgreSQL.LibPQ.html#fformat"><span class="hs-identifier hs-var hs-var">fformat</span></a></span></span><span> </span><span id="local-6989586621679046789"><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046789"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Col"><span class="hs-identifier hs-type">Col</span></a></span><span> </span><span id="local-6989586621679046788"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046788"><span class="hs-identifier hs-var">colNum</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1061"></span><span>    </span><span class="annot"><span class="annottext">Result -&gt; (Ptr PGresult -&gt; IO CInt) -&gt; IO Format
forall b. FromCInt b =&gt; Result -&gt; (Ptr PGresult -&gt; IO CInt) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#enumFromResult"><span class="hs-identifier hs-var">enumFromResult</span></a></span><span> </span><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046789"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGresult -&gt; IO CInt) -&gt; IO Format)
-&gt; (Ptr PGresult -&gt; IO CInt) -&gt; IO Format
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046787"><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046787"><span class="hs-identifier hs-var">ptr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ptr PGresult -&gt; CInt -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQfformat"><span class="hs-identifier hs-var">c_PQfformat</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046787"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046788"><span class="hs-identifier hs-var">colNum</span></a></span><span>
</span><span id="line-1062"></span><span>
</span><span id="line-1063"></span><span>
</span><span id="line-1064"></span><span class="hs-comment">-- | Returns the data type associated with the given column</span><span>
</span><span id="line-1065"></span><span class="hs-comment">-- number. The 'Oid' returned is the internal OID number of the</span><span>
</span><span id="line-1066"></span><span class="hs-comment">-- type. Column numbers start at 0.</span><span>
</span><span id="line-1067"></span><span class="hs-comment">--</span><span>
</span><span id="line-1068"></span><span class="hs-comment">-- You can query the system table pg_type to obtain the names and</span><span>
</span><span id="line-1069"></span><span class="hs-comment">-- properties of the various data types. The OIDs of the built-in data</span><span>
</span><span id="line-1070"></span><span class="hs-comment">-- types are defined in the file src/include/catalog/pg_type.h in the</span><span>
</span><span id="line-1071"></span><span class="hs-comment">-- source tree.</span><span>
</span><span id="line-1072"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#ftype"><span class="hs-identifier hs-type">ftype</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span>
</span><span id="line-1073"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Column"><span class="hs-identifier hs-type">Column</span></a></span><span>
</span><span id="line-1074"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Oid.html#Oid"><span class="hs-identifier hs-type">Oid</span></a></span><span>
</span><span id="line-1075"></span><span id="ftype"><span class="annot"><span class="annottext">ftype :: Result -&gt; Column -&gt; IO Oid
</span><a href="Database.PostgreSQL.LibPQ.html#ftype"><span class="hs-identifier hs-var hs-var">ftype</span></a></span></span><span> </span><span id="local-6989586621679046785"><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046785"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Col"><span class="hs-identifier hs-type">Col</span></a></span><span> </span><span id="local-6989586621679046784"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046784"><span class="hs-identifier hs-var">colNum</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Result -&gt; (Ptr PGresult -&gt; IO Oid) -&gt; IO Oid
forall b. Result -&gt; (Ptr PGresult -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#withResult"><span class="hs-identifier hs-var">withResult</span></a></span><span> </span><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046785"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGresult -&gt; IO Oid) -&gt; IO Oid)
-&gt; (Ptr PGresult -&gt; IO Oid) -&gt; IO Oid
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046783"><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046783"><span class="hs-identifier hs-var">ptr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ptr PGresult -&gt; CInt -&gt; IO Oid
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQftype"><span class="hs-identifier hs-var">c_PQftype</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046783"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046784"><span class="hs-identifier hs-var">colNum</span></a></span><span>
</span><span id="line-1076"></span><span>
</span><span id="line-1077"></span><span>
</span><span id="line-1078"></span><span class="hs-comment">-- | Returns the type modifier of the column associated with the given</span><span>
</span><span id="line-1079"></span><span class="hs-comment">-- column number. Column numbers start at 0.</span><span>
</span><span id="line-1080"></span><span class="hs-comment">--</span><span>
</span><span id="line-1081"></span><span class="hs-comment">-- The interpretation of modifier values is type-specific; they</span><span>
</span><span id="line-1082"></span><span class="hs-comment">-- typically indicate precision or size limits. The value -1 is used</span><span>
</span><span id="line-1083"></span><span class="hs-comment">-- to indicate &quot;no information available&quot;. Most data types do not use</span><span>
</span><span id="line-1084"></span><span class="hs-comment">-- modifiers, in which case the value is always -1.</span><span>
</span><span id="line-1085"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#fmod"><span class="hs-identifier hs-type">fmod</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span>
</span><span id="line-1086"></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Column"><span class="hs-identifier hs-type">Column</span></a></span><span>
</span><span id="line-1087"></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-1088"></span><span id="fmod"><span class="annot"><span class="annottext">fmod :: Result -&gt; Column -&gt; IO Int
</span><a href="Database.PostgreSQL.LibPQ.html#fmod"><span class="hs-identifier hs-var hs-var">fmod</span></a></span></span><span> </span><span id="local-6989586621679046781"><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046781"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Col"><span class="hs-identifier hs-type">Col</span></a></span><span> </span><span id="local-6989586621679046780"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046780"><span class="hs-identifier hs-var">colNum</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Result -&gt; (Ptr PGresult -&gt; IO CInt) -&gt; IO Int
forall a b.
(Integral a, Num b) =&gt;
Result -&gt; (Ptr PGresult -&gt; IO a) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#numFromResult"><span class="hs-identifier hs-var">numFromResult</span></a></span><span> </span><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046781"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGresult -&gt; IO CInt) -&gt; IO Int)
-&gt; (Ptr PGresult -&gt; IO CInt) -&gt; IO Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046778"><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046778"><span class="hs-identifier hs-var">ptr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ptr PGresult -&gt; CInt -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQfmod"><span class="hs-identifier hs-var">c_PQfmod</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046778"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046780"><span class="hs-identifier hs-var">colNum</span></a></span><span>
</span><span id="line-1089"></span><span>
</span><span id="line-1090"></span><span>
</span><span id="line-1091"></span><span class="hs-comment">-- | Returns the size in bytes of the column associated with the given</span><span>
</span><span id="line-1092"></span><span class="hs-comment">-- column number. Column numbers start at 0.</span><span>
</span><span id="line-1093"></span><span class="hs-comment">--</span><span>
</span><span id="line-1094"></span><span class="hs-comment">-- 'fsize' returns the space allocated for this column in a database</span><span>
</span><span id="line-1095"></span><span class="hs-comment">-- row, in other words the size of the server's internal</span><span>
</span><span id="line-1096"></span><span class="hs-comment">-- representation of the data type. (Accordingly, it is not really</span><span>
</span><span id="line-1097"></span><span class="hs-comment">-- very useful to clients.) A negative value indicates the data type</span><span>
</span><span id="line-1098"></span><span class="hs-comment">-- is variable-length.</span><span>
</span><span id="line-1099"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#fsize"><span class="hs-identifier hs-type">fsize</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span>
</span><span id="line-1100"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Column"><span class="hs-identifier hs-type">Column</span></a></span><span>
</span><span id="line-1101"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-1102"></span><span id="fsize"><span class="annot"><span class="annottext">fsize :: Result -&gt; Column -&gt; IO Int
</span><a href="Database.PostgreSQL.LibPQ.html#fsize"><span class="hs-identifier hs-var hs-var">fsize</span></a></span></span><span> </span><span id="local-6989586621679046776"><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046776"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Col"><span class="hs-identifier hs-type">Col</span></a></span><span> </span><span id="local-6989586621679046775"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046775"><span class="hs-identifier hs-var">colNum</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Result -&gt; (Ptr PGresult -&gt; IO CInt) -&gt; IO Int
forall a b.
(Integral a, Num b) =&gt;
Result -&gt; (Ptr PGresult -&gt; IO a) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#numFromResult"><span class="hs-identifier hs-var">numFromResult</span></a></span><span> </span><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046776"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGresult -&gt; IO CInt) -&gt; IO Int)
-&gt; (Ptr PGresult -&gt; IO CInt) -&gt; IO Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046774"><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046774"><span class="hs-identifier hs-var">ptr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ptr PGresult -&gt; CInt -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQfsize"><span class="hs-identifier hs-var">c_PQfsize</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046774"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046775"><span class="hs-identifier hs-var">colNum</span></a></span><span>
</span><span id="line-1103"></span><span>
</span><span id="line-1104"></span><span>
</span><span id="line-1105"></span><span class="hs-comment">-- | Returns a single field value of one row of a PGresult. Row and</span><span>
</span><span id="line-1106"></span><span class="hs-comment">-- column numbers start at 0.</span><span>
</span><span id="line-1107"></span><span class="hs-comment">--</span><span>
</span><span id="line-1108"></span><span class="hs-comment">-- For convenience, this binding uses 'getisnull' and 'getlength' to</span><span>
</span><span id="line-1109"></span><span class="hs-comment">-- help construct the result.</span><span>
</span><span id="line-1110"></span><span class="hs-comment">--</span><span>
</span><span id="line-1111"></span><span class="hs-comment">-- Note: The 'ByteString' returned holds a reference to the Result. As</span><span>
</span><span id="line-1112"></span><span class="hs-comment">-- long as ByteString is live, the Result will not be garbage</span><span>
</span><span id="line-1113"></span><span class="hs-comment">-- collected. 'getvalue'' returns a copy of the data.</span><span>
</span><span id="line-1114"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#getvalue"><span class="hs-identifier hs-type">getvalue</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span>
</span><span id="line-1115"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Row"><span class="hs-identifier hs-type">Row</span></a></span><span>
</span><span id="line-1116"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Column"><span class="hs-identifier hs-type">Column</span></a></span><span>
</span><span id="line-1117"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1118"></span><span id="getvalue"><span class="annot"><span class="annottext">getvalue :: Result -&gt; Row -&gt; Column -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#getvalue"><span class="hs-identifier hs-var hs-var">getvalue</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span> </span><span id="local-6989586621679046772"><span class="annot"><span class="annottext">ForeignPtr PGresult
</span><a href="#local-6989586621679046772"><span class="hs-identifier hs-var">fp</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Row"><span class="hs-identifier hs-type">Row</span></a></span><span> </span><span id="local-6989586621679046771"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046771"><span class="hs-identifier hs-var">rowNum</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Col"><span class="hs-identifier hs-type">Col</span></a></span><span> </span><span id="local-6989586621679046770"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046770"><span class="hs-identifier hs-var">colNum</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1119"></span><span>    </span><span class="annot"><span class="annottext">ForeignPtr PGresult
-&gt; (Ptr PGresult -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall a b. ForeignPtr a -&gt; (Ptr a -&gt; IO b) -&gt; IO b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">withForeignPtr</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr PGresult
</span><a href="#local-6989586621679046772"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGresult -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString))
-&gt; (Ptr PGresult -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046769"><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046769"><span class="hs-identifier hs-var">ptr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1120"></span><span>      </span><span id="local-6989586621679046768"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046768"><span class="hs-identifier hs-var">isnull</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr PGresult -&gt; CInt -&gt; CInt -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQgetisnull"><span class="hs-identifier hs-var">c_PQgetisnull</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046769"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046771"><span class="hs-identifier hs-var">rowNum</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046770"><span class="hs-identifier hs-var">colNum</span></a></span><span>
</span><span id="line-1121"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CInt -&gt; Maybe Bool
forall a. FromCInt a =&gt; CInt -&gt; Maybe a
</span><a href="Database.PostgreSQL.LibPQ.Enums.html#fromCInt"><span class="hs-identifier hs-var">fromCInt</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046768"><span class="hs-identifier hs-var">isnull</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1122"></span><span>        </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ByteString -&gt; IO (Maybe ByteString)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ByteString
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1123"></span><span>        </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1124"></span><span>          </span><span id="local-6989586621679046766"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046766"><span class="hs-identifier hs-var">cstr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr PGresult -&gt; CInt -&gt; CInt -&gt; IO CString
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQgetvalue"><span class="hs-identifier hs-var">c_PQgetvalue</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046769"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046771"><span class="hs-identifier hs-var">rowNum</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046770"><span class="hs-identifier hs-var">colNum</span></a></span><span>
</span><span id="line-1125"></span><span>          </span><span id="local-6989586621679046764"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046764"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr PGresult -&gt; CInt -&gt; CInt -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQgetlength"><span class="hs-identifier hs-var">c_PQgetlength</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046769"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046771"><span class="hs-identifier hs-var">rowNum</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046770"><span class="hs-identifier hs-var">colNum</span></a></span><span>
</span><span id="line-1126"></span><span>          </span><span id="local-6989586621679046762"><span class="annot"><span class="annottext">ForeignPtr Word8
</span><a href="#local-6989586621679046762"><span class="hs-identifier hs-var">fp'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr Word8 -&gt; IO () -&gt; IO (ForeignPtr Word8)
forall a. Ptr a -&gt; IO () -&gt; IO (ForeignPtr a)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">FC.newForeignPtr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CString -&gt; Ptr Word8
forall a b. Ptr a -&gt; Ptr b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">castPtr</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046766"><span class="hs-identifier hs-var">cstr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679046761"><span class="hs-identifier hs-var">finalizer</span></a></span><span>
</span><span id="line-1127"></span><span>          </span><span class="annot"><span class="annottext">Maybe ByteString -&gt; IO (Maybe ByteString)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe ByteString -&gt; IO (Maybe ByteString))
-&gt; Maybe ByteString -&gt; IO (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Maybe ByteString
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Maybe ByteString) -&gt; ByteString -&gt; Maybe ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr Word8 -&gt; Int -&gt; Int -&gt; ByteString
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.fromForeignPtr</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr Word8
</span><a href="#local-6989586621679046762"><span class="hs-identifier hs-var">fp'</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; ByteString) -&gt; Int -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046764"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1128"></span><span>        </span><span class="annot"><span class="annottext">Maybe Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO (Maybe ByteString)
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fail</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO (Maybe ByteString))
-&gt; String -&gt; IO (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;fromCInt @Bool &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046768"><span class="hs-identifier hs-var">isnull</span></a></span><span>
</span><span id="line-1129"></span><span>
</span><span id="line-1130"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-1131"></span><span>      </span><span id="local-6989586621679046761"><span class="annot"><span class="annottext">finalizer :: IO ()
</span><a href="#local-6989586621679046761"><span class="hs-identifier hs-var hs-var">finalizer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignPtr PGresult -&gt; IO ()
forall a. ForeignPtr a -&gt; IO ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">touchForeignPtr</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr PGresult
</span><a href="#local-6989586621679046772"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-1132"></span><span>
</span><span id="line-1133"></span><span>
</span><span id="line-1134"></span><span class="hs-comment">-- | Returns a copy of a single field value of one row of a</span><span>
</span><span id="line-1135"></span><span class="hs-comment">-- PGresult. Row and column numbers start at 0.</span><span>
</span><span id="line-1136"></span><span class="hs-comment">--</span><span>
</span><span id="line-1137"></span><span class="hs-comment">-- For convenience, this binding uses 'getisnull' and 'getlength' to</span><span>
</span><span id="line-1138"></span><span class="hs-comment">-- help construct the result.</span><span>
</span><span id="line-1139"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#getvalue%27"><span class="hs-identifier hs-type">getvalue'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span>
</span><span id="line-1140"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Row"><span class="hs-identifier hs-type">Row</span></a></span><span>
</span><span id="line-1141"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Column"><span class="hs-identifier hs-type">Column</span></a></span><span>
</span><span id="line-1142"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1143"></span><span id="getvalue%27"><span class="annot"><span class="annottext">getvalue' :: Result -&gt; Row -&gt; Column -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#getvalue%27"><span class="hs-identifier hs-var hs-var">getvalue'</span></a></span></span><span> </span><span id="local-6989586621679046760"><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046760"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Row"><span class="hs-identifier hs-type">Row</span></a></span><span> </span><span id="local-6989586621679046759"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046759"><span class="hs-identifier hs-var">rowNum</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Col"><span class="hs-identifier hs-type">Col</span></a></span><span> </span><span id="local-6989586621679046758"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046758"><span class="hs-identifier hs-var">colNum</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1144"></span><span>    </span><span class="annot"><span class="annottext">Result
-&gt; (Ptr PGresult -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall b. Result -&gt; (Ptr PGresult -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#withResult"><span class="hs-identifier hs-var">withResult</span></a></span><span> </span><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046760"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGresult -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString))
-&gt; (Ptr PGresult -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046757"><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046757"><span class="hs-identifier hs-var">ptr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1145"></span><span>      </span><span id="local-6989586621679046756"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046756"><span class="hs-identifier hs-var">isnull</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr PGresult -&gt; CInt -&gt; CInt -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQgetisnull"><span class="hs-identifier hs-var">c_PQgetisnull</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046757"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046759"><span class="hs-identifier hs-var">rowNum</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046758"><span class="hs-identifier hs-var">colNum</span></a></span><span>
</span><span id="line-1146"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CInt -&gt; Maybe Bool
forall a. FromCInt a =&gt; CInt -&gt; Maybe a
</span><a href="Database.PostgreSQL.LibPQ.Enums.html#fromCInt"><span class="hs-identifier hs-var">fromCInt</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046756"><span class="hs-identifier hs-var">isnull</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1147"></span><span>        </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ByteString -&gt; IO (Maybe ByteString)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ByteString
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1148"></span><span>        </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1149"></span><span>          </span><span id="local-6989586621679046755"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046755"><span class="hs-identifier hs-var">cstr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr PGresult -&gt; CInt -&gt; CInt -&gt; IO CString
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQgetvalue"><span class="hs-identifier hs-var">c_PQgetvalue</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046757"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046759"><span class="hs-identifier hs-var">rowNum</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046758"><span class="hs-identifier hs-var">colNum</span></a></span><span>
</span><span id="line-1150"></span><span>          </span><span id="local-6989586621679046754"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679046754"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CInt -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(CInt -&gt; Int) -&gt; IO CInt -&gt; IO Int
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`fmap`</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult -&gt; CInt -&gt; CInt -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQgetlength"><span class="hs-identifier hs-var">c_PQgetlength</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046757"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046759"><span class="hs-identifier hs-var">rowNum</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046758"><span class="hs-identifier hs-var">colNum</span></a></span><span>
</span><span id="line-1151"></span><span>          </span><span class="annot"><span class="annottext">ByteString -&gt; Maybe ByteString
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Maybe ByteString)
-&gt; IO ByteString -&gt; IO (Maybe ByteString)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`fmap`</span></a></span><span> </span><span class="annot"><span class="annottext">CStringLen -&gt; IO ByteString
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.packCStringLen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046755"><span class="hs-identifier hs-var">cstr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679046754"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1152"></span><span>        </span><span class="annot"><span class="annottext">Maybe Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO (Maybe ByteString)
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fail</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO (Maybe ByteString))
-&gt; String -&gt; IO (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;fromCInt @Bool &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046756"><span class="hs-identifier hs-var">isnull</span></a></span><span>
</span><span id="line-1153"></span><span>
</span><span id="line-1154"></span><span>
</span><span id="line-1155"></span><span class="hs-comment">-- | Tests a field for a null value. Row and column numbers start at</span><span>
</span><span id="line-1156"></span><span class="hs-comment">-- 0.</span><span>
</span><span id="line-1157"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#getisnull"><span class="hs-identifier hs-type">getisnull</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span>
</span><span id="line-1158"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Row"><span class="hs-identifier hs-type">Row</span></a></span><span>
</span><span id="line-1159"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Column"><span class="hs-identifier hs-type">Column</span></a></span><span>
</span><span id="line-1160"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-1161"></span><span id="getisnull"><span class="annot"><span class="annottext">getisnull :: Result -&gt; Row -&gt; Column -&gt; IO Bool
</span><a href="Database.PostgreSQL.LibPQ.html#getisnull"><span class="hs-identifier hs-var hs-var">getisnull</span></a></span></span><span> </span><span id="local-6989586621679046752"><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046752"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Row"><span class="hs-identifier hs-type">Row</span></a></span><span> </span><span id="local-6989586621679046751"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046751"><span class="hs-identifier hs-var">rowNum</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Col"><span class="hs-identifier hs-type">Col</span></a></span><span> </span><span id="local-6989586621679046750"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046750"><span class="hs-identifier hs-var">colNum</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1162"></span><span>    </span><span class="annot"><span class="annottext">Result -&gt; (Ptr PGresult -&gt; IO CInt) -&gt; IO Bool
forall b. FromCInt b =&gt; Result -&gt; (Ptr PGresult -&gt; IO CInt) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#enumFromResult"><span class="hs-identifier hs-var">enumFromResult</span></a></span><span> </span><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046752"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGresult -&gt; IO CInt) -&gt; IO Bool)
-&gt; (Ptr PGresult -&gt; IO CInt) -&gt; IO Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046749"><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046749"><span class="hs-identifier hs-var">ptr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1163"></span><span>        </span><span class="annot"><span class="annottext">Ptr PGresult -&gt; CInt -&gt; CInt -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQgetisnull"><span class="hs-identifier hs-var">c_PQgetisnull</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046749"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046751"><span class="hs-identifier hs-var">rowNum</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046750"><span class="hs-identifier hs-var">colNum</span></a></span><span>
</span><span id="line-1164"></span><span>
</span><span id="line-1165"></span><span>
</span><span id="line-1166"></span><span class="hs-comment">-- | Returns the actual length of a field value in bytes. Row and</span><span>
</span><span id="line-1167"></span><span class="hs-comment">-- column numbers start at 0.</span><span>
</span><span id="line-1168"></span><span class="hs-comment">--</span><span>
</span><span id="line-1169"></span><span class="hs-comment">-- This is the actual data length for the particular data value, that</span><span>
</span><span id="line-1170"></span><span class="hs-comment">-- is, the size of the object pointed to by 'getvalue'. For text data</span><span>
</span><span id="line-1171"></span><span class="hs-comment">-- format this is the same as strlen(). For binary format this is</span><span>
</span><span id="line-1172"></span><span class="hs-comment">-- essential information. Note that one should not rely on 'fsize' to</span><span>
</span><span id="line-1173"></span><span class="hs-comment">-- obtain the actual data length.</span><span>
</span><span id="line-1174"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#getlength"><span class="hs-identifier hs-type">getlength</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span>
</span><span id="line-1175"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Row"><span class="hs-identifier hs-type">Row</span></a></span><span>
</span><span id="line-1176"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Column"><span class="hs-identifier hs-type">Column</span></a></span><span>
</span><span id="line-1177"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-1178"></span><span id="getlength"><span class="annot"><span class="annottext">getlength :: Result -&gt; Row -&gt; Column -&gt; IO Int
</span><a href="Database.PostgreSQL.LibPQ.html#getlength"><span class="hs-identifier hs-var hs-var">getlength</span></a></span></span><span> </span><span id="local-6989586621679046748"><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046748"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Row"><span class="hs-identifier hs-type">Row</span></a></span><span> </span><span id="local-6989586621679046747"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046747"><span class="hs-identifier hs-var">rowNum</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Col"><span class="hs-identifier hs-type">Col</span></a></span><span> </span><span id="local-6989586621679046746"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046746"><span class="hs-identifier hs-var">colNum</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1179"></span><span>    </span><span class="annot"><span class="annottext">Result -&gt; (Ptr PGresult -&gt; IO CInt) -&gt; IO Int
forall a b.
(Integral a, Num b) =&gt;
Result -&gt; (Ptr PGresult -&gt; IO a) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#numFromResult"><span class="hs-identifier hs-var">numFromResult</span></a></span><span> </span><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046748"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGresult -&gt; IO CInt) -&gt; IO Int)
-&gt; (Ptr PGresult -&gt; IO CInt) -&gt; IO Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046745"><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046745"><span class="hs-identifier hs-var">ptr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1180"></span><span>      </span><span class="annot"><span class="annottext">Ptr PGresult -&gt; CInt -&gt; CInt -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQgetlength"><span class="hs-identifier hs-var">c_PQgetlength</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046745"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046747"><span class="hs-identifier hs-var">rowNum</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046746"><span class="hs-identifier hs-var">colNum</span></a></span><span>
</span><span id="line-1181"></span><span>
</span><span id="line-1182"></span><span>
</span><span id="line-1183"></span><span class="hs-comment">-- | Returns the number of parameters of a prepared statement.</span><span>
</span><span id="line-1184"></span><span class="hs-comment">--</span><span>
</span><span id="line-1185"></span><span class="hs-comment">-- This function is only useful when inspecting the result of</span><span>
</span><span id="line-1186"></span><span class="hs-comment">-- PQdescribePrepared. For other types of queries it will return zero.</span><span>
</span><span id="line-1187"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#nparams"><span class="hs-identifier hs-type">nparams</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span>
</span><span id="line-1188"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-1189"></span><span id="nparams"><span class="annot"><span class="annottext">nparams :: Result -&gt; IO Int
</span><a href="Database.PostgreSQL.LibPQ.html#nparams"><span class="hs-identifier hs-var hs-var">nparams</span></a></span></span><span> </span><span id="local-6989586621679046744"><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046744"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Result -&gt; (Ptr PGresult -&gt; IO CInt) -&gt; IO Int
forall a b.
(Integral a, Num b) =&gt;
Result -&gt; (Ptr PGresult -&gt; IO a) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#numFromResult"><span class="hs-identifier hs-var">numFromResult</span></a></span><span> </span><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046744"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQnparams"><span class="hs-identifier hs-var">c_PQnparams</span></a></span><span>
</span><span id="line-1190"></span><span>
</span><span id="line-1191"></span><span>
</span><span id="line-1192"></span><span class="hs-comment">-- | Returns the data type of the indicated statement</span><span>
</span><span id="line-1193"></span><span class="hs-comment">-- parameter. Parameter numbers start at 0.</span><span>
</span><span id="line-1194"></span><span class="hs-comment">--</span><span>
</span><span id="line-1195"></span><span class="hs-comment">-- This function is only useful when inspecting the result of</span><span>
</span><span id="line-1196"></span><span class="hs-comment">-- 'describePrepared'. For other types of queries it will return zero.</span><span>
</span><span id="line-1197"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#paramtype"><span class="hs-identifier hs-type">paramtype</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span>
</span><span id="line-1198"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-comment">-- ^ param_number</span><span>
</span><span id="line-1199"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Oid.html#Oid"><span class="hs-identifier hs-type">Oid</span></a></span><span>
</span><span id="line-1200"></span><span id="paramtype"><span class="annot"><span class="annottext">paramtype :: Result -&gt; Int -&gt; IO Oid
</span><a href="Database.PostgreSQL.LibPQ.html#paramtype"><span class="hs-identifier hs-var hs-var">paramtype</span></a></span></span><span> </span><span id="local-6989586621679046742"><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046742"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span id="local-6989586621679046741"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679046741"><span class="hs-identifier hs-var">param_number</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1201"></span><span>    </span><span class="annot"><span class="annottext">Result -&gt; (Ptr PGresult -&gt; IO Oid) -&gt; IO Oid
forall b. Result -&gt; (Ptr PGresult -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#withResult"><span class="hs-identifier hs-var">withResult</span></a></span><span> </span><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046742"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGresult -&gt; IO Oid) -&gt; IO Oid)
-&gt; (Ptr PGresult -&gt; IO Oid) -&gt; IO Oid
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046740"><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046740"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ptr PGresult -&gt; CInt -&gt; IO Oid
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQparamtype"><span class="hs-identifier hs-var">c_PQparamtype</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046740"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">(CInt -&gt; IO Oid) -&gt; CInt -&gt; IO Oid
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; CInt
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679046741"><span class="hs-identifier hs-var">param_number</span></a></span><span>
</span><span id="line-1202"></span><span>
</span><span id="line-1203"></span><span>
</span><span id="line-1204"></span><span class="hs-comment">-- $othercommands</span><span>
</span><span id="line-1205"></span><span class="hs-comment">-- These functions are used to extract other information from PGresult</span><span>
</span><span id="line-1206"></span><span class="hs-comment">-- objects.</span><span>
</span><span id="line-1207"></span><span>
</span><span id="line-1208"></span><span class="hs-comment">-- | Returns the command status tag from the SQL command that</span><span>
</span><span id="line-1209"></span><span class="hs-comment">-- generated the PGresult.</span><span>
</span><span id="line-1210"></span><span class="hs-comment">--</span><span>
</span><span id="line-1211"></span><span class="hs-comment">-- Commonly this is just the name of the command, but it might include</span><span>
</span><span id="line-1212"></span><span class="hs-comment">-- additional data such as the number of rows processed.</span><span>
</span><span id="line-1213"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#cmdStatus"><span class="hs-identifier hs-type">cmdStatus</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span>
</span><span id="line-1214"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1215"></span><span id="cmdStatus"><span class="annot"><span class="annottext">cmdStatus :: Result -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#cmdStatus"><span class="hs-identifier hs-var hs-var">cmdStatus</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Result -&gt; (Ptr PGresult -&gt; IO CString) -&gt; IO (Maybe ByteString))
-&gt; (Ptr PGresult -&gt; IO CString) -&gt; Result -&gt; IO (Maybe ByteString)
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">Result -&gt; (Ptr PGresult -&gt; IO CString) -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#maybeBsFromResult"><span class="hs-identifier hs-var">maybeBsFromResult</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult -&gt; IO CString
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQcmdStatus"><span class="hs-identifier hs-var">c_PQcmdStatus</span></a></span><span>
</span><span id="line-1216"></span><span>
</span><span id="line-1217"></span><span>
</span><span id="line-1218"></span><span class="hs-comment">-- | Returns the number of rows affected by the SQL command.</span><span>
</span><span id="line-1219"></span><span class="hs-comment">--</span><span>
</span><span id="line-1220"></span><span class="hs-comment">-- This function returns a string containing the number of rows</span><span>
</span><span id="line-1221"></span><span class="hs-comment">-- affected by the SQL statement that generated the 'Result'. This</span><span>
</span><span id="line-1222"></span><span class="hs-comment">-- function can only be used following the execution of a SELECT,</span><span>
</span><span id="line-1223"></span><span class="hs-comment">-- CREATE TABLE AS, INSERT, UPDATE, DELETE, MOVE, FETCH, or COPY</span><span>
</span><span id="line-1224"></span><span class="hs-comment">-- statement, or an EXECUTE of a prepared query that contains an</span><span>
</span><span id="line-1225"></span><span class="hs-comment">-- INSERT, UPDATE, or DELETE statement. If the command that generated</span><span>
</span><span id="line-1226"></span><span class="hs-comment">-- the 'Result' was anything else, 'cmdTuples' returns an empty</span><span>
</span><span id="line-1227"></span><span class="hs-comment">-- string.</span><span>
</span><span id="line-1228"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#cmdTuples"><span class="hs-identifier hs-type">cmdTuples</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span>
</span><span id="line-1229"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1230"></span><span id="cmdTuples"><span class="annot"><span class="annottext">cmdTuples :: Result -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#cmdTuples"><span class="hs-identifier hs-var hs-var">cmdTuples</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Result -&gt; (Ptr PGresult -&gt; IO CString) -&gt; IO (Maybe ByteString))
-&gt; (Ptr PGresult -&gt; IO CString) -&gt; Result -&gt; IO (Maybe ByteString)
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">Result -&gt; (Ptr PGresult -&gt; IO CString) -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#maybeBsFromResult"><span class="hs-identifier hs-var">maybeBsFromResult</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult -&gt; IO CString
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQcmdTuples"><span class="hs-identifier hs-var">c_PQcmdTuples</span></a></span><span>
</span><span id="line-1231"></span><span>
</span><span id="line-1232"></span><span class="hs-comment">-- | Escapes a string for use within an SQL command. This is useful</span><span>
</span><span id="line-1233"></span><span class="hs-comment">-- when inserting data values as literal constants in SQL</span><span>
</span><span id="line-1234"></span><span class="hs-comment">-- commands. Certain characters (such as quotes and backslashes) must</span><span>
</span><span id="line-1235"></span><span class="hs-comment">-- be escaped to prevent them from being interpreted specially by the</span><span>
</span><span id="line-1236"></span><span class="hs-comment">-- SQL parser.</span><span>
</span><span id="line-1237"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#escapeStringConn"><span class="hs-identifier hs-type">escapeStringConn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-1238"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span>
</span><span id="line-1239"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1240"></span><span id="escapeStringConn"><span class="annot"><span class="annottext">escapeStringConn :: Connection -&gt; ByteString -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#escapeStringConn"><span class="hs-identifier hs-var hs-var">escapeStringConn</span></a></span></span><span> </span><span id="local-6989586621679046736"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046736"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span id="local-6989586621679046735"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046735"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1241"></span><span>  </span><span class="annot"><span class="annottext">Connection
-&gt; (Ptr PGconn -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046736"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString))
-&gt; (Ptr PGconn -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046734"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046734"><span class="hs-identifier hs-var">conn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1242"></span><span>    </span><span class="annot"><span class="annottext">ByteString
-&gt; (CStringLen -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall a. ByteString -&gt; (CStringLen -&gt; IO a) -&gt; IO a
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.unsafeUseAsCStringLen</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046735"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">((CStringLen -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString))
-&gt; (CStringLen -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679046732"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046732"><span class="hs-identifier hs-var">from</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679046731"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679046731"><span class="hs-identifier hs-var">bslen</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1243"></span><span>      </span><span class="annot"><span class="annottext">(Ptr CInt -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall a b. Storable a =&gt; (Ptr a -&gt; IO b) -&gt; IO b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">alloca</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr CInt -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString))
-&gt; (Ptr CInt -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046730"><span class="annot"><span class="annottext">Ptr CInt
</span><a href="#local-6989586621679046730"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1244"></span><span>        </span><span id="local-6989586621679046729"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046729"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; (Ptr Word8 -&gt; IO Int) -&gt; IO ByteString
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.createAndTrim</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679046731"><span class="hs-identifier hs-var">bslen</span></a></span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">*</span></a></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Ptr Word8 -&gt; IO Int) -&gt; IO ByteString)
-&gt; (Ptr Word8 -&gt; IO Int) -&gt; IO ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046727"><span class="annot"><span class="annottext">Ptr Word8
</span><a href="#local-6989586621679046727"><span class="hs-identifier hs-var">to</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1245"></span><span>                 </span><span class="annot"><span class="annottext">CSize -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(CSize -&gt; Int) -&gt; IO CSize -&gt; IO Int
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`fmap`</span></a></span><span>
</span><span id="line-1246"></span><span>                   </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; Ptr Word8 -&gt; CString -&gt; CSize -&gt; Ptr CInt -&gt; IO CSize
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQescapeStringConn"><span class="hs-identifier hs-var">c_PQescapeStringConn</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046734"><span class="hs-identifier hs-var">conn</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Word8
</span><a href="#local-6989586621679046727"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046732"><span class="hs-identifier hs-var">from</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; CSize
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679046731"><span class="hs-identifier hs-var">bslen</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Ptr CInt
</span><a href="#local-6989586621679046730"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-1247"></span><span>        </span><span id="local-6989586621679046725"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046725"><span class="hs-identifier hs-var">stat</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr CInt -&gt; IO CInt
forall a. Storable a =&gt; Ptr a -&gt; IO a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">peek</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr CInt
</span><a href="#local-6989586621679046730"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-1248"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046725"><span class="hs-identifier hs-var">stat</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1249"></span><span>          </span><span class="annot"><span class="annottext">CInt
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ByteString -&gt; IO (Maybe ByteString)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe ByteString -&gt; IO (Maybe ByteString))
-&gt; Maybe ByteString -&gt; IO (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Maybe ByteString
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046729"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-1250"></span><span>          </span><span class="annot"><span class="annottext">CInt
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ByteString -&gt; IO (Maybe ByteString)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ByteString
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1251"></span><span>
</span><span id="line-1252"></span><span>
</span><span id="line-1253"></span><span class="hs-comment">-- | Escapes binary data for use within an SQL command with the type</span><span>
</span><span id="line-1254"></span><span class="hs-comment">-- bytea. As with 'escapeStringConn', this is only used when inserting</span><span>
</span><span id="line-1255"></span><span class="hs-comment">-- data directly into an SQL command string.</span><span>
</span><span id="line-1256"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#escapeByteaConn"><span class="hs-identifier hs-type">escapeByteaConn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-1257"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span>
</span><span id="line-1258"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1259"></span><span id="escapeByteaConn"><span class="annot"><span class="annottext">escapeByteaConn :: Connection -&gt; ByteString -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#escapeByteaConn"><span class="hs-identifier hs-var hs-var">escapeByteaConn</span></a></span></span><span> </span><span id="local-6989586621679046724"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046724"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span id="local-6989586621679046723"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046723"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1260"></span><span>    </span><span class="annot"><span class="annottext">Connection
-&gt; (Ptr PGconn -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046724"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString))
-&gt; (Ptr PGconn -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046722"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046722"><span class="hs-identifier hs-var">conn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1261"></span><span>        </span><span class="annot"><span class="annottext">ByteString
-&gt; (CStringLen -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall a. ByteString -&gt; (CStringLen -&gt; IO a) -&gt; IO a
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.unsafeUseAsCStringLen</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046723"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">((CStringLen -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString))
-&gt; (CStringLen -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679046721"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046721"><span class="hs-identifier hs-var">from</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679046720"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679046720"><span class="hs-identifier hs-var">bslen</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1262"></span><span>            </span><span class="annot"><span class="annottext">(Ptr CSize -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall a b. Storable a =&gt; (Ptr a -&gt; IO b) -&gt; IO b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">alloca</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr CSize -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString))
-&gt; (Ptr CSize -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046719"><span class="annot"><span class="annottext">Ptr CSize
</span><a href="#local-6989586621679046719"><span class="hs-identifier hs-var">to_length</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1263"></span><span>              </span><span id="local-6989586621679046718"><span class="annot"><span class="annottext">Ptr Word8
</span><a href="#local-6989586621679046718"><span class="hs-identifier hs-var">to</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; CString -&gt; CSize -&gt; Ptr CSize -&gt; IO (Ptr Word8)
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQescapeByteaConn"><span class="hs-identifier hs-var">c_PQescapeByteaConn</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046722"><span class="hs-identifier hs-var">conn</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046721"><span class="hs-identifier hs-var">from</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; CSize
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679046720"><span class="hs-identifier hs-var">bslen</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Ptr CSize
</span><a href="#local-6989586621679046719"><span class="hs-identifier hs-var">to_length</span></a></span><span>
</span><span id="line-1264"></span><span>              </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Ptr Word8
</span><a href="#local-6989586621679046718"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Word8 -&gt; Ptr Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Word8
forall a. Ptr a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">nullPtr</span></a></span><span>
</span><span id="line-1265"></span><span>                </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Maybe ByteString -&gt; IO (Maybe ByteString)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ByteString
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1266"></span><span>                </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679046716"><span class="annot"><span class="annottext">ForeignPtr Word8
</span><a href="#local-6989586621679046716"><span class="hs-identifier hs-var">tofp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FinalizerPtr Word8 -&gt; Ptr Word8 -&gt; IO (ForeignPtr Word8)
forall a. FinalizerPtr a -&gt; Ptr a -&gt; IO (ForeignPtr a)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">newForeignPtr</span></a></span><span> </span><span class="annot"><span class="annottext">FinalizerPtr Word8
forall a. FunPtr (Ptr a -&gt; IO ())
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#p_PQfreemem"><span class="hs-identifier hs-var">p_PQfreemem</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Word8
</span><a href="#local-6989586621679046718"><span class="hs-identifier hs-var">to</span></a></span><span>
</span><span id="line-1267"></span><span>                        </span><span id="local-6989586621679046714"><span class="annot"><span class="annottext">CSize
</span><a href="#local-6989586621679046714"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr CSize -&gt; IO CSize
forall a. Storable a =&gt; Ptr a -&gt; IO a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">peek</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr CSize
</span><a href="#local-6989586621679046719"><span class="hs-identifier hs-var">to_length</span></a></span><span>
</span><span id="line-1268"></span><span>                        </span><span class="annot"><span class="annottext">Maybe ByteString -&gt; IO (Maybe ByteString)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe ByteString -&gt; IO (Maybe ByteString))
-&gt; Maybe ByteString -&gt; IO (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Maybe ByteString
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Maybe ByteString) -&gt; ByteString -&gt; Maybe ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr Word8 -&gt; Int -&gt; Int -&gt; ByteString
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.fromForeignPtr</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr Word8
</span><a href="#local-6989586621679046716"><span class="hs-identifier hs-var">tofp</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">CSize -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">CSize
</span><a href="#local-6989586621679046714"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-1269"></span><span>
</span><span id="line-1270"></span><span>
</span><span id="line-1271"></span><span class="hs-comment">-- | Converts a 'ByteString' representation of binary data into binary</span><span>
</span><span id="line-1272"></span><span class="hs-comment">-- data - the reverse of 'PQescapeByteaConn'. This is needed when</span><span>
</span><span id="line-1273"></span><span class="hs-comment">-- retrieving bytea data in text format, but not when retrieving it in</span><span>
</span><span id="line-1274"></span><span class="hs-comment">-- binary format.</span><span>
</span><span id="line-1275"></span><span class="hs-comment">--</span><span>
</span><span id="line-1276"></span><span class="hs-comment">-- The parameter points to a string such as might be returned by</span><span>
</span><span id="line-1277"></span><span class="hs-comment">-- 'getvalue' when applied to a bytea column. 'unescapeBytea' converts</span><span>
</span><span id="line-1278"></span><span class="hs-comment">-- this string representation into its binary representation. It</span><span>
</span><span id="line-1279"></span><span class="hs-comment">-- returns a 'ByteString', or 'Nothing' on error.</span><span>
</span><span id="line-1280"></span><span class="hs-comment">--</span><span>
</span><span id="line-1281"></span><span class="hs-comment">-- This conversion is not exactly the inverse of 'escapeByteaConn',</span><span>
</span><span id="line-1282"></span><span class="hs-comment">-- because the string is not expected to be &quot;escaped&quot; when received</span><span>
</span><span id="line-1283"></span><span class="hs-comment">-- from 'getvalue'. In particular this means there is no need for</span><span>
</span><span id="line-1284"></span><span class="hs-comment">-- string quoting considerations, and so no need for a 'Connection'</span><span>
</span><span id="line-1285"></span><span class="hs-comment">-- parameter.</span><span>
</span><span id="line-1286"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#unescapeBytea"><span class="hs-identifier hs-type">unescapeBytea</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span>
</span><span id="line-1287"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1288"></span><span id="unescapeBytea"><span class="annot"><span class="annottext">unescapeBytea :: ByteString -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#unescapeBytea"><span class="hs-identifier hs-var hs-var">unescapeBytea</span></a></span></span><span> </span><span id="local-6989586621679046713"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046713"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1289"></span><span>    </span><span class="annot"><span class="annottext">ByteString
-&gt; (CString -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall a. ByteString -&gt; (CString -&gt; IO a) -&gt; IO a
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.useAsCString</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046713"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">((CString -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString))
-&gt; (CString -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046712"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046712"><span class="hs-identifier hs-var">from</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1290"></span><span>        </span><span class="annot"><span class="annottext">(Ptr CSize -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall a b. Storable a =&gt; (Ptr a -&gt; IO b) -&gt; IO b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">alloca</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr CSize -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString))
-&gt; (Ptr CSize -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046711"><span class="annot"><span class="annottext">Ptr CSize
</span><a href="#local-6989586621679046711"><span class="hs-identifier hs-var">to_length</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1291"></span><span>          </span><span id="local-6989586621679046710"><span class="annot"><span class="annottext">Ptr Word8
</span><a href="#local-6989586621679046710"><span class="hs-identifier hs-var">to</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CString -&gt; Ptr CSize -&gt; IO (Ptr Word8)
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQunescapeBytea"><span class="hs-identifier hs-var">c_PQunescapeBytea</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046712"><span class="hs-identifier hs-var">from</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr CSize
</span><a href="#local-6989586621679046711"><span class="hs-identifier hs-var">to_length</span></a></span><span>
</span><span id="line-1292"></span><span>          </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Ptr Word8
</span><a href="#local-6989586621679046710"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Word8 -&gt; Ptr Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Word8
forall a. Ptr a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">nullPtr</span></a></span><span>
</span><span id="line-1293"></span><span>            </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Maybe ByteString -&gt; IO (Maybe ByteString)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ByteString
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1294"></span><span>            </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679046708"><span class="annot"><span class="annottext">ForeignPtr Word8
</span><a href="#local-6989586621679046708"><span class="hs-identifier hs-var">tofp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FinalizerPtr Word8 -&gt; Ptr Word8 -&gt; IO (ForeignPtr Word8)
forall a. FinalizerPtr a -&gt; Ptr a -&gt; IO (ForeignPtr a)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">newForeignPtr</span></a></span><span> </span><span class="annot"><span class="annottext">FinalizerPtr Word8
forall a. FunPtr (Ptr a -&gt; IO ())
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#p_PQfreemem"><span class="hs-identifier hs-var">p_PQfreemem</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Word8
</span><a href="#local-6989586621679046710"><span class="hs-identifier hs-var">to</span></a></span><span>
</span><span id="line-1295"></span><span>                    </span><span id="local-6989586621679046707"><span class="annot"><span class="annottext">CSize
</span><a href="#local-6989586621679046707"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr CSize -&gt; IO CSize
forall a. Storable a =&gt; Ptr a -&gt; IO a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">peek</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr CSize
</span><a href="#local-6989586621679046711"><span class="hs-identifier hs-var">to_length</span></a></span><span>
</span><span id="line-1296"></span><span>                    </span><span class="annot"><span class="annottext">Maybe ByteString -&gt; IO (Maybe ByteString)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe ByteString -&gt; IO (Maybe ByteString))
-&gt; Maybe ByteString -&gt; IO (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Maybe ByteString
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Maybe ByteString) -&gt; ByteString -&gt; Maybe ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr Word8 -&gt; Int -&gt; Int -&gt; ByteString
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.fromForeignPtr</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr Word8
</span><a href="#local-6989586621679046708"><span class="hs-identifier hs-var">tofp</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; ByteString) -&gt; Int -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CSize -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">CSize
</span><a href="#local-6989586621679046707"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1297"></span><span>
</span><span id="line-1298"></span><span class="hs-comment">-- | @escapeIdentifier@ escapes a string for use as an SQL identifier, such</span><span>
</span><span id="line-1299"></span><span class="hs-comment">--   as a table, column, or function name. This is useful when a user-supplied</span><span>
</span><span id="line-1300"></span><span class="hs-comment">--   identifier might contain special characters that would otherwise not be</span><span>
</span><span id="line-1301"></span><span class="hs-comment">--   interpreted as part of the identifier by the SQL parser, or when the</span><span>
</span><span id="line-1302"></span><span class="hs-comment">--   identifier might contain upper case characters whose case should be</span><span>
</span><span id="line-1303"></span><span class="hs-comment">--   preserved.</span><span>
</span><span id="line-1304"></span><span class="hs-comment">--</span><span>
</span><span id="line-1305"></span><span class="hs-comment">--   The return string has all special characters replaced so that it will</span><span>
</span><span id="line-1306"></span><span class="hs-comment">--   be properly processed as an SQL identifier. The return string will also</span><span>
</span><span id="line-1307"></span><span class="hs-comment">--   be surrounded by double quotes.</span><span>
</span><span id="line-1308"></span><span class="hs-comment">--</span><span>
</span><span id="line-1309"></span><span class="hs-comment">--   On error, @escapeIdentifier@ returns 'Nothing' and a suitable message</span><span>
</span><span id="line-1310"></span><span class="hs-comment">--   is stored in the conn object.</span><span>
</span><span id="line-1311"></span><span>
</span><span id="line-1312"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#escapeIdentifier"><span class="hs-identifier hs-type">escapeIdentifier</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-1313"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span>
</span><span id="line-1314"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1315"></span><span id="escapeIdentifier"><span class="annot"><span class="annottext">escapeIdentifier :: Connection -&gt; ByteString -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#escapeIdentifier"><span class="hs-identifier hs-var hs-var">escapeIdentifier</span></a></span></span><span> </span><span id="local-6989586621679046706"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046706"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span id="local-6989586621679046705"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046705"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1316"></span><span>  </span><span class="annot"><span class="annottext">Connection
-&gt; (Ptr PGconn -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046706"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString))
-&gt; (Ptr PGconn -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046704"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046704"><span class="hs-identifier hs-var">conn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1317"></span><span>    </span><span class="annot"><span class="annottext">ByteString
-&gt; (CStringLen -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall a. ByteString -&gt; (CStringLen -&gt; IO a) -&gt; IO a
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.unsafeUseAsCStringLen</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046705"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">((CStringLen -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString))
-&gt; (CStringLen -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679046703"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046703"><span class="hs-identifier hs-var">from</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679046702"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679046702"><span class="hs-identifier hs-var">bslen</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO (Maybe ByteString) -&gt; IO (Maybe ByteString)
forall a. IO a -&gt; IO a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mask_</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Maybe ByteString) -&gt; IO (Maybe ByteString))
-&gt; IO (Maybe ByteString) -&gt; IO (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1318"></span><span>      </span><span id="local-6989586621679046701"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046701"><span class="hs-identifier hs-var">bs'ptr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; CString -&gt; CSize -&gt; IO CString
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQescapeIdentifier"><span class="hs-identifier hs-var">c_PQescapeIdentifier</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046704"><span class="hs-identifier hs-var">conn</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046703"><span class="hs-identifier hs-var">from</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; CSize
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679046702"><span class="hs-identifier hs-var">bslen</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1319"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046701"><span class="hs-identifier hs-var">bs'ptr</span></a></span><span> </span><span class="annot"><span class="annottext">CString -&gt; CString -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">CString
forall a. Ptr a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">nullPtr</span></a></span><span>
</span><span id="line-1320"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Maybe ByteString -&gt; IO (Maybe ByteString)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ByteString
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1321"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1322"></span><span>            </span><span id="local-6989586621679046699"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046699"><span class="hs-identifier hs-var">bs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CString -&gt; IO ByteString
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.packCString</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046701"><span class="hs-identifier hs-var">bs'ptr</span></a></span><span>
</span><span id="line-1323"></span><span>            </span><span class="annot"><span class="annottext">CString -&gt; IO ()
forall a. Ptr a -&gt; IO ()
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQfreemem"><span class="hs-identifier hs-var">c_PQfreemem</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046701"><span class="hs-identifier hs-var">bs'ptr</span></a></span><span>
</span><span id="line-1324"></span><span>            </span><span class="annot"><span class="annottext">Maybe ByteString -&gt; IO (Maybe ByteString)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe ByteString -&gt; IO (Maybe ByteString))
-&gt; Maybe ByteString -&gt; IO (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Maybe ByteString
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046699"><span class="hs-identifier hs-var">bs'</span></a></span><span>
</span><span id="line-1325"></span><span>
</span><span id="line-1326"></span><span class="hs-comment">-- $copy</span><span>
</span><span id="line-1327"></span><span class="hs-comment">--</span><span>
</span><span id="line-1328"></span><span class="hs-comment">-- This provides support for PostgreSQL's @COPY FROM@ facility.</span><span>
</span><span id="line-1329"></span><span class="hs-comment">--</span><span>
</span><span id="line-1330"></span><span class="hs-comment">-- For more information, see:</span><span>
</span><span id="line-1331"></span><span class="hs-comment">--</span><span>
</span><span id="line-1332"></span><span class="hs-comment">--  * &lt;http://www.postgresql.org/docs/current/static/sql-copy.html&gt;</span><span>
</span><span id="line-1333"></span><span class="hs-comment">--</span><span>
</span><span id="line-1334"></span><span class="hs-comment">--  * &lt;http://www.postgresql.org/docs/current/static/libpq-copy.html&gt;</span><span>
</span><span id="line-1335"></span><span class="hs-comment">--</span><span>
</span><span id="line-1336"></span><span>
</span><span id="line-1337"></span><span class="hs-keyword">data</span><span> </span><span id="CopyInResult"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#CopyInResult"><span class="hs-identifier hs-var">CopyInResult</span></a></span></span><span>
</span><span id="line-1338"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="CopyInOk"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#CopyInOk"><span class="hs-identifier hs-var">CopyInOk</span></a></span></span><span>          </span><span class="hs-comment">-- ^ The data was sent.</span><span>
</span><span id="line-1339"></span><span>   </span><span class="hs-glyph">|</span><span> </span><span id="CopyInError"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#CopyInError"><span class="hs-identifier hs-var">CopyInError</span></a></span></span><span>       </span><span class="hs-comment">-- ^ An error occurred (use 'errorMessage'</span><span>
</span><span id="line-1340"></span><span>                       </span><span class="hs-comment">--   to retrieve details).</span><span>
</span><span id="line-1341"></span><span>   </span><span class="hs-glyph">|</span><span> </span><span id="CopyInWouldBlock"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#CopyInWouldBlock"><span class="hs-identifier hs-var">CopyInWouldBlock</span></a></span></span><span>  </span><span class="hs-comment">-- ^ The data was not sent because the</span><span>
</span><span id="line-1342"></span><span>                       </span><span class="hs-comment">--   attempt would block (this case is only</span><span>
</span><span id="line-1343"></span><span>                       </span><span class="hs-comment">--   possible if the connection is in</span><span>
</span><span id="line-1344"></span><span>                       </span><span class="hs-comment">--   nonblocking mode)  Wait for</span><span>
</span><span id="line-1345"></span><span>                       </span><span class="hs-comment">--   write-ready (e.g. by using</span><span>
</span><span id="line-1346"></span><span>                       </span><span class="hs-comment">--   'Control.Concurrent.threadWaitWrite'</span><span>
</span><span id="line-1347"></span><span>                       </span><span class="hs-comment">--   on the 'socket') and try again.</span><span>
</span><span id="line-1348"></span><span>     </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679046691"><span id="local-6989586621679046693"><span class="annot"><span class="annottext">CopyInResult -&gt; CopyInResult -&gt; Bool
(CopyInResult -&gt; CopyInResult -&gt; Bool)
-&gt; (CopyInResult -&gt; CopyInResult -&gt; Bool) -&gt; Eq CopyInResult
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: CopyInResult -&gt; CopyInResult -&gt; Bool
$c/= :: CopyInResult -&gt; CopyInResult -&gt; Bool
== :: CopyInResult -&gt; CopyInResult -&gt; Bool
$c== :: CopyInResult -&gt; CopyInResult -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679046685"><span id="local-6989586621679046687"><span id="local-6989586621679046689"><span class="annot"><span class="annottext">Int -&gt; CopyInResult -&gt; String -&gt; String
[CopyInResult] -&gt; String -&gt; String
CopyInResult -&gt; String
(Int -&gt; CopyInResult -&gt; String -&gt; String)
-&gt; (CopyInResult -&gt; String)
-&gt; ([CopyInResult] -&gt; String -&gt; String)
-&gt; Show CopyInResult
forall a.
(Int -&gt; a -&gt; String -&gt; String)
-&gt; (a -&gt; String) -&gt; ([a] -&gt; String -&gt; String) -&gt; Show a
showList :: [CopyInResult] -&gt; String -&gt; String
$cshowList :: [CopyInResult] -&gt; String -&gt; String
show :: CopyInResult -&gt; String
$cshow :: CopyInResult -&gt; String
showsPrec :: Int -&gt; CopyInResult -&gt; String -&gt; String
$cshowsPrec :: Int -&gt; CopyInResult -&gt; String -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1349"></span><span>
</span><span id="line-1350"></span><span>
</span><span id="line-1351"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#toCopyInResult"><span class="hs-identifier hs-type">toCopyInResult</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">CInt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#CopyInResult"><span class="hs-identifier hs-type">CopyInResult</span></a></span><span>
</span><span id="line-1352"></span><span id="toCopyInResult"><span class="annot"><span class="annottext">toCopyInResult :: CInt -&gt; IO CopyInResult
</span><a href="Database.PostgreSQL.LibPQ.html#toCopyInResult"><span class="hs-identifier hs-var hs-var">toCopyInResult</span></a></span></span><span> </span><span id="local-6989586621679046683"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046683"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046683"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; CInt -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><span class="hs-number">0</span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CopyInResult -&gt; IO CopyInResult
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">CopyInResult
</span><a href="Database.PostgreSQL.LibPQ.html#CopyInError"><span class="hs-identifier hs-var">CopyInError</span></a></span><span>
</span><span id="line-1353"></span><span>                 </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046683"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; CInt -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><span class="hs-number">0</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CopyInResult -&gt; IO CopyInResult
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">CopyInResult
</span><a href="Database.PostgreSQL.LibPQ.html#CopyInWouldBlock"><span class="hs-identifier hs-var">CopyInWouldBlock</span></a></span><span>
</span><span id="line-1354"></span><span>                 </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CopyInResult -&gt; IO CopyInResult
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">CopyInResult
</span><a href="Database.PostgreSQL.LibPQ.html#CopyInOk"><span class="hs-identifier hs-var">CopyInOk</span></a></span><span>
</span><span id="line-1355"></span><span>
</span><span id="line-1356"></span><span>
</span><span id="line-1357"></span><span class="hs-comment">-- | Send raw @COPY@ data to the server during the 'CopyIn' state.</span><span>
</span><span id="line-1358"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#putCopyData"><span class="hs-identifier hs-type">putCopyData</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#CopyInResult"><span class="hs-identifier hs-type">CopyInResult</span></a></span><span>
</span><span id="line-1359"></span><span id="putCopyData"><span class="annot"><span class="annottext">putCopyData :: Connection -&gt; ByteString -&gt; IO CopyInResult
</span><a href="Database.PostgreSQL.LibPQ.html#putCopyData"><span class="hs-identifier hs-var hs-var">putCopyData</span></a></span></span><span> </span><span id="local-6989586621679046681"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046681"><span class="hs-identifier hs-var">conn</span></a></span></span><span> </span><span id="local-6989586621679046680"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046680"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1360"></span><span>    </span><span class="annot"><span class="annottext">ByteString -&gt; (CStringLen -&gt; IO CopyInResult) -&gt; IO CopyInResult
forall a. ByteString -&gt; (CStringLen -&gt; IO a) -&gt; IO a
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.unsafeUseAsCStringLen</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046680"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">((CStringLen -&gt; IO CopyInResult) -&gt; IO CopyInResult)
-&gt; (CStringLen -&gt; IO CopyInResult) -&gt; IO CopyInResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Connection -&gt; CStringLen -&gt; IO CopyInResult
</span><a href="Database.PostgreSQL.LibPQ.html#putCopyCString"><span class="hs-identifier hs-var">putCopyCString</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046681"><span class="hs-identifier hs-var">conn</span></a></span><span>
</span><span id="line-1361"></span><span>
</span><span id="line-1362"></span><span>
</span><span id="line-1363"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#putCopyCString"><span class="hs-identifier hs-type">putCopyCString</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">CStringLen</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#CopyInResult"><span class="hs-identifier hs-type">CopyInResult</span></a></span><span>
</span><span id="line-1364"></span><span id="putCopyCString"><span class="annot"><span class="annottext">putCopyCString :: Connection -&gt; CStringLen -&gt; IO CopyInResult
</span><a href="Database.PostgreSQL.LibPQ.html#putCopyCString"><span class="hs-identifier hs-var hs-var">putCopyCString</span></a></span></span><span> </span><span id="local-6989586621679046678"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046678"><span class="hs-identifier hs-var">conn</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679046677"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046677"><span class="hs-identifier hs-var">str</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679046676"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679046676"><span class="hs-identifier hs-var">len</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1365"></span><span>    </span><span class="annot"><span class="annottext">CInt -&gt; IO CopyInResult
</span><a href="Database.PostgreSQL.LibPQ.html#toCopyInResult"><span class="hs-identifier hs-var">toCopyInResult</span></a></span><span> </span><span class="annot"><span class="annottext">(CInt -&gt; IO CopyInResult) -&gt; IO CInt -&gt; IO CopyInResult
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span>
</span><span id="line-1366"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO CInt
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046678"><span class="hs-identifier hs-var">conn</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO CInt) -&gt; IO CInt)
-&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO CInt
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046674"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046674"><span class="hs-identifier hs-var">ptr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; CString -&gt; CInt -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQputCopyData"><span class="hs-identifier hs-var">c_PQputCopyData</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046674"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046677"><span class="hs-identifier hs-var">str</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; CInt
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679046676"><span class="hs-identifier hs-var">len</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1367"></span><span>
</span><span id="line-1368"></span><span>
</span><span id="line-1369"></span><span class="hs-comment">-- | Send end-of-data indication to the server during the 'CopyIn' state.</span><span>
</span><span id="line-1370"></span><span class="hs-comment">--</span><span>
</span><span id="line-1371"></span><span class="hs-comment">--  * @putCopyEnd conn Nothing@ ends the 'CopyIn' operation successfully.</span><span>
</span><span id="line-1372"></span><span class="hs-comment">--</span><span>
</span><span id="line-1373"></span><span class="hs-comment">--  * @putCopyEnd conn (Just errormsg)@ forces the @COPY@ to fail, with</span><span>
</span><span id="line-1374"></span><span class="hs-comment">--    @errormsg@ used as the error message.</span><span>
</span><span id="line-1375"></span><span class="hs-comment">--</span><span>
</span><span id="line-1376"></span><span class="hs-comment">-- After 'putCopyEnd' returns 'CopyOk', call 'getResult' to obtain the final</span><span>
</span><span id="line-1377"></span><span class="hs-comment">-- result status of the @COPY@ command.  Then return to normal operation.</span><span>
</span><span id="line-1378"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#putCopyEnd"><span class="hs-identifier hs-type">putCopyEnd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#CopyInResult"><span class="hs-identifier hs-type">CopyInResult</span></a></span><span>
</span><span id="line-1379"></span><span id="putCopyEnd"><span class="annot"><span class="annottext">putCopyEnd :: Connection -&gt; Maybe ByteString -&gt; IO CopyInResult
</span><a href="Database.PostgreSQL.LibPQ.html#putCopyEnd"><span class="hs-identifier hs-var hs-var">putCopyEnd</span></a></span></span><span> </span><span id="local-6989586621679046672"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046672"><span class="hs-identifier hs-var">conn</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe ByteString
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1380"></span><span>    </span><span class="annot"><span class="annottext">CInt -&gt; IO CopyInResult
</span><a href="Database.PostgreSQL.LibPQ.html#toCopyInResult"><span class="hs-identifier hs-var">toCopyInResult</span></a></span><span> </span><span class="annot"><span class="annottext">(CInt -&gt; IO CopyInResult) -&gt; IO CInt -&gt; IO CopyInResult
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span>
</span><span id="line-1381"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO CInt
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046672"><span class="hs-identifier hs-var">conn</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO CInt) -&gt; IO CInt)
-&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO CInt
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046671"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046671"><span class="hs-identifier hs-var">ptr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; CString -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQputCopyEnd"><span class="hs-identifier hs-var">c_PQputCopyEnd</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046671"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">CString
forall a. Ptr a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">nullPtr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1382"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#putCopyEnd"><span class="hs-identifier hs-var">putCopyEnd</span></a></span><span> </span><span id="local-6989586621679046669"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046669"><span class="hs-identifier hs-var">conn</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679046668"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046668"><span class="hs-identifier hs-var">errormsg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1383"></span><span>    </span><span class="annot"><span class="annottext">CInt -&gt; IO CopyInResult
</span><a href="Database.PostgreSQL.LibPQ.html#toCopyInResult"><span class="hs-identifier hs-var">toCopyInResult</span></a></span><span> </span><span class="annot"><span class="annottext">(CInt -&gt; IO CopyInResult) -&gt; IO CInt -&gt; IO CopyInResult
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span>
</span><span id="line-1384"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; (CString -&gt; IO CInt) -&gt; IO CInt
forall a. ByteString -&gt; (CString -&gt; IO a) -&gt; IO a
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.useAsCString</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046668"><span class="hs-identifier hs-var">errormsg</span></a></span><span> </span><span class="annot"><span class="annottext">((CString -&gt; IO CInt) -&gt; IO CInt)
-&gt; (CString -&gt; IO CInt) -&gt; IO CInt
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046667"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046667"><span class="hs-identifier hs-var">errormsg_cstr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1385"></span><span>            </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO CInt
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046669"><span class="hs-identifier hs-var">conn</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO CInt) -&gt; IO CInt)
-&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO CInt
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046666"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046666"><span class="hs-identifier hs-var">ptr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; CString -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQputCopyEnd"><span class="hs-identifier hs-var">c_PQputCopyEnd</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046666"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046667"><span class="hs-identifier hs-var">errormsg_cstr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1386"></span><span>
</span><span id="line-1387"></span><span>
</span><span id="line-1388"></span><span class="hs-keyword">data</span><span> </span><span id="CopyOutResult"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#CopyOutResult"><span class="hs-identifier hs-var">CopyOutResult</span></a></span></span><span>
</span><span id="line-1389"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="CopyOutRow"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#CopyOutRow"><span class="hs-identifier hs-var">CopyOutRow</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span> </span><span class="hs-comment">-- ^ Data representing a single row of the result</span><span>
</span><span id="line-1390"></span><span>   </span><span class="hs-glyph">|</span><span> </span><span id="CopyOutWouldBlock"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#CopyOutWouldBlock"><span class="hs-identifier hs-var">CopyOutWouldBlock</span></a></span></span><span>        </span><span class="hs-comment">-- ^ A complete row is not yet available.  This</span><span>
</span><span id="line-1391"></span><span>                              </span><span class="hs-comment">--   case is only possible when 'getCopyData' is</span><span>
</span><span id="line-1392"></span><span>                              </span><span class="hs-comment">--   has the async parameter set to 'True'.</span><span>
</span><span id="line-1393"></span><span>   </span><span class="hs-glyph">|</span><span> </span><span id="CopyOutDone"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#CopyOutDone"><span class="hs-identifier hs-var">CopyOutDone</span></a></span></span><span>              </span><span class="hs-comment">-- ^ No more rows are available</span><span>
</span><span id="line-1394"></span><span>   </span><span class="hs-glyph">|</span><span> </span><span id="CopyOutError"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#CopyOutError"><span class="hs-identifier hs-var">CopyOutError</span></a></span></span><span>             </span><span class="hs-comment">-- ^ An error occurred (e.g. the connection is</span><span>
</span><span id="line-1395"></span><span>                              </span><span class="hs-comment">--   not in the 'CopyOut' state).  Call</span><span>
</span><span id="line-1396"></span><span>                              </span><span class="hs-comment">--   'errorMessage' for more information.</span><span>
</span><span id="line-1397"></span><span>     </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679046656"><span id="local-6989586621679046658"><span id="local-6989586621679046660"><span class="annot"><span class="annottext">Int -&gt; CopyOutResult -&gt; String -&gt; String
[CopyOutResult] -&gt; String -&gt; String
CopyOutResult -&gt; String
(Int -&gt; CopyOutResult -&gt; String -&gt; String)
-&gt; (CopyOutResult -&gt; String)
-&gt; ([CopyOutResult] -&gt; String -&gt; String)
-&gt; Show CopyOutResult
forall a.
(Int -&gt; a -&gt; String -&gt; String)
-&gt; (a -&gt; String) -&gt; ([a] -&gt; String -&gt; String) -&gt; Show a
showList :: [CopyOutResult] -&gt; String -&gt; String
$cshowList :: [CopyOutResult] -&gt; String -&gt; String
show :: CopyOutResult -&gt; String
$cshow :: CopyOutResult -&gt; String
showsPrec :: Int -&gt; CopyOutResult -&gt; String -&gt; String
$cshowsPrec :: Int -&gt; CopyOutResult -&gt; String -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span>
</span><span id="line-1398"></span><span>
</span><span id="line-1399"></span><span class="hs-comment">-- | Receive raw @COPY@ data from the server during the 'CopyOut' state.</span><span>
</span><span id="line-1400"></span><span class="hs-comment">--   The boolean parameter determines whether or not the call will block</span><span>
</span><span id="line-1401"></span><span class="hs-comment">--   while waiting for data.</span><span>
</span><span id="line-1402"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#getCopyData"><span class="hs-identifier hs-type">getCopyData</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#CopyOutResult"><span class="hs-identifier hs-type">CopyOutResult</span></a></span><span>
</span><span id="line-1403"></span><span id="getCopyData"><span class="annot"><span class="annottext">getCopyData :: Connection -&gt; Bool -&gt; IO CopyOutResult
</span><a href="Database.PostgreSQL.LibPQ.html#getCopyData"><span class="hs-identifier hs-var hs-var">getCopyData</span></a></span></span><span> </span><span id="local-6989586621679046655"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046655"><span class="hs-identifier hs-var">conn</span></a></span></span><span> </span><span id="local-6989586621679046654"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679046654"><span class="hs-identifier hs-var">async</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Ptr (Ptr Word8) -&gt; IO CopyOutResult) -&gt; IO CopyOutResult
forall a b. Storable a =&gt; (Ptr a -&gt; IO b) -&gt; IO b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">alloca</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr (Ptr Word8) -&gt; IO CopyOutResult) -&gt; IO CopyOutResult)
-&gt; (Ptr (Ptr Word8) -&gt; IO CopyOutResult) -&gt; IO CopyOutResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046653"><span class="annot"><span class="annottext">Ptr (Ptr Word8)
</span><a href="#local-6989586621679046653"><span class="hs-identifier hs-var">strp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO CopyOutResult) -&gt; IO CopyOutResult
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046655"><span class="hs-identifier hs-var">conn</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO CopyOutResult) -&gt; IO CopyOutResult)
-&gt; (Ptr PGconn -&gt; IO CopyOutResult) -&gt; IO CopyOutResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046652"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046652"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1404"></span><span>    </span><span id="local-6989586621679046651"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046651"><span class="hs-identifier hs-var">len</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; Ptr (Ptr Word8) -&gt; CInt -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQgetCopyData"><span class="hs-identifier hs-var">c_PQgetCopyData</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046652"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr (Ptr Word8)
</span><a href="#local-6989586621679046653"><span class="hs-identifier hs-var">strp</span></a></span><span> </span><span class="annot"><span class="annottext">(CInt -&gt; IO CInt) -&gt; CInt -&gt; IO CInt
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; CInt
forall a. ToCInt a =&gt; a -&gt; CInt
</span><a href="Database.PostgreSQL.LibPQ.Enums.html#toCInt"><span class="hs-identifier hs-var">toCInt</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679046654"><span class="hs-identifier hs-var">async</span></a></span><span>
</span><span id="line-1405"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046651"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; CInt -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><span class="hs-number">0</span></span><span>
</span><span id="line-1406"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CInt -&gt; CInt -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">compare</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046651"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">CInt
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1407"></span><span>             </span><span class="annot"><span class="annottext">Ordering
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">LT</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CopyOutResult -&gt; IO CopyOutResult
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">CopyOutResult
</span><a href="Database.PostgreSQL.LibPQ.html#CopyOutError"><span class="hs-identifier hs-var">CopyOutError</span></a></span><span>
</span><span id="line-1408"></span><span>             </span><span class="annot"><span class="annottext">Ordering
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">EQ</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CopyOutResult -&gt; IO CopyOutResult
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">CopyOutResult
</span><a href="Database.PostgreSQL.LibPQ.html#CopyOutDone"><span class="hs-identifier hs-var">CopyOutDone</span></a></span><span>
</span><span id="line-1409"></span><span>             </span><span class="annot"><span class="annottext">Ordering
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">GT</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CopyOutResult -&gt; IO CopyOutResult
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">CopyOutResult
</span><a href="Database.PostgreSQL.LibPQ.html#CopyOutWouldBlock"><span class="hs-identifier hs-var">CopyOutWouldBlock</span></a></span><span>
</span><span id="line-1410"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1411"></span><span>        </span><span id="local-6989586621679046647"><span class="annot"><span class="annottext">ForeignPtr Word8
</span><a href="#local-6989586621679046647"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FinalizerPtr Word8 -&gt; Ptr Word8 -&gt; IO (ForeignPtr Word8)
forall a. FinalizerPtr a -&gt; Ptr a -&gt; IO (ForeignPtr a)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">newForeignPtr</span></a></span><span> </span><span class="annot"><span class="annottext">FinalizerPtr Word8
forall a. FunPtr (Ptr a -&gt; IO ())
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#p_PQfreemem"><span class="hs-identifier hs-var">p_PQfreemem</span></a></span><span> </span><span class="annot"><span class="annottext">(Ptr Word8 -&gt; IO (ForeignPtr Word8))
-&gt; IO (Ptr Word8) -&gt; IO (ForeignPtr Word8)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr (Ptr Word8) -&gt; IO (Ptr Word8)
forall a. Storable a =&gt; Ptr a -&gt; IO a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">peek</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr (Ptr Word8)
</span><a href="#local-6989586621679046653"><span class="hs-identifier hs-var">strp</span></a></span><span>
</span><span id="line-1412"></span><span>        </span><span class="annot"><span class="annottext">CopyOutResult -&gt; IO CopyOutResult
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(CopyOutResult -&gt; IO CopyOutResult)
-&gt; CopyOutResult -&gt; IO CopyOutResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; CopyOutResult
</span><a href="Database.PostgreSQL.LibPQ.html#CopyOutRow"><span class="hs-identifier hs-var">CopyOutRow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForeignPtr Word8 -&gt; Int -&gt; Int -&gt; ByteString
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.fromForeignPtr</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr Word8
</span><a href="#local-6989586621679046647"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CInt -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046651"><span class="hs-identifier hs-var">len</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1413"></span><span>
</span><span id="line-1414"></span><span>
</span><span id="line-1415"></span><span class="hs-comment">-- $asynccommand</span><span>
</span><span id="line-1416"></span><span class="hs-comment">-- The 'exec' function is adequate for submitting commands in normal,</span><span>
</span><span id="line-1417"></span><span class="hs-comment">-- synchronous applications. It has a couple of deficiencies, however,</span><span>
</span><span id="line-1418"></span><span class="hs-comment">-- that can be of importance to some users:</span><span>
</span><span id="line-1419"></span><span class="hs-comment">--</span><span>
</span><span id="line-1420"></span><span class="hs-comment">--   * 'exec' waits for the command to be completed. The application</span><span>
</span><span id="line-1421"></span><span class="hs-comment">--   might have other work to do (such as maintaining a user</span><span>
</span><span id="line-1422"></span><span class="hs-comment">--   interface), in which case it won't want to block waiting for the</span><span>
</span><span id="line-1423"></span><span class="hs-comment">--   response.</span><span>
</span><span id="line-1424"></span><span class="hs-comment">--</span><span>
</span><span id="line-1425"></span><span class="hs-comment">--   * Since the execution of the client application is suspended</span><span>
</span><span id="line-1426"></span><span class="hs-comment">--   while it waits for the result, it is hard for the application to</span><span>
</span><span id="line-1427"></span><span class="hs-comment">--   decide that it would like to try to cancel the ongoing</span><span>
</span><span id="line-1428"></span><span class="hs-comment">--   command. (It can be done from a signal handler, but not</span><span>
</span><span id="line-1429"></span><span class="hs-comment">--   otherwise.)</span><span>
</span><span id="line-1430"></span><span class="hs-comment">--</span><span>
</span><span id="line-1431"></span><span class="hs-comment">--   * 'exec' can return only one 'Result'. If the submitted command</span><span>
</span><span id="line-1432"></span><span class="hs-comment">--   string contains multiple SQL commands, all but the last 'Result'</span><span>
</span><span id="line-1433"></span><span class="hs-comment">--   are discarded by 'exec'.</span><span>
</span><span id="line-1434"></span><span class="hs-comment">--</span><span>
</span><span id="line-1435"></span><span class="hs-comment">-- Applications that do not like these limitations can instead use the</span><span>
</span><span id="line-1436"></span><span class="hs-comment">-- underlying functions that 'exec' is built from: 'sendQuery' and</span><span>
</span><span id="line-1437"></span><span class="hs-comment">-- 'getResult'. There are also 'sendQueryParams', 'sendPrepare',</span><span>
</span><span id="line-1438"></span><span class="hs-comment">-- 'sendQueryPrepared', 'sendDescribePrepared', and</span><span>
</span><span id="line-1439"></span><span class="hs-comment">-- 'sendDescribePortal', which can be used with 'getResult' to</span><span>
</span><span id="line-1440"></span><span class="hs-comment">-- duplicate the functionality of 'execParams', 'prepare',</span><span>
</span><span id="line-1441"></span><span class="hs-comment">-- 'execPrepared', 'describePrepared', and 'describePortal'</span><span>
</span><span id="line-1442"></span><span class="hs-comment">-- respectively.</span><span>
</span><span id="line-1443"></span><span>
</span><span id="line-1444"></span><span class="hs-comment">-- | Submits a command to the server without waiting for the</span><span>
</span><span id="line-1445"></span><span class="hs-comment">-- result(s). 'True' is returned if the command was successfully</span><span>
</span><span id="line-1446"></span><span class="hs-comment">-- dispatched and 'False' if not (in which case, use 'errorMessage' to</span><span>
</span><span id="line-1447"></span><span class="hs-comment">-- get more information about the failure).</span><span>
</span><span id="line-1448"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#sendQuery"><span class="hs-identifier hs-type">sendQuery</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-1449"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span>
</span><span id="line-1450"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-1451"></span><span id="sendQuery"><span class="annot"><span class="annottext">sendQuery :: Connection -&gt; ByteString -&gt; IO Bool
</span><a href="Database.PostgreSQL.LibPQ.html#sendQuery"><span class="hs-identifier hs-var hs-var">sendQuery</span></a></span></span><span> </span><span id="local-6989586621679046646"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046646"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span id="local-6989586621679046645"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046645"><span class="hs-identifier hs-var">query</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1452"></span><span>    </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO Bool
forall b.
FromCInt b =&gt;
Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#enumFromConn"><span class="hs-identifier hs-var">enumFromConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046646"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO CInt) -&gt; IO Bool)
-&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046644"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046644"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1453"></span><span>        </span><span class="annot"><span class="annottext">ByteString -&gt; (CString -&gt; IO CInt) -&gt; IO CInt
forall a. ByteString -&gt; (CString -&gt; IO a) -&gt; IO a
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.useAsCString</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046645"><span class="hs-identifier hs-var">query</span></a></span><span> </span><span class="annot"><span class="annottext">((CString -&gt; IO CInt) -&gt; IO CInt)
-&gt; (CString -&gt; IO CInt) -&gt; IO CInt
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; CString -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQsendQuery"><span class="hs-identifier hs-var">c_PQsendQuery</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046644"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1454"></span><span>
</span><span id="line-1455"></span><span>
</span><span id="line-1456"></span><span class="hs-comment">-- | Submits a command and separate parameters to the server without</span><span>
</span><span id="line-1457"></span><span class="hs-comment">-- waiting for the result(s).</span><span>
</span><span id="line-1458"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#sendQueryParams"><span class="hs-identifier hs-type">sendQueryParams</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-1459"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span>
</span><span id="line-1460"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Oid.html#Oid"><span class="hs-identifier hs-type">Oid</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Enums.html#Format"><span class="hs-identifier hs-type">Format</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1461"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Enums.html#Format"><span class="hs-identifier hs-type">Format</span></a></span><span>
</span><span id="line-1462"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-1463"></span><span id="sendQueryParams"><span class="annot"><span class="annottext">sendQueryParams :: Connection
-&gt; ByteString
-&gt; [Maybe (Oid, ByteString, Format)]
-&gt; Format
-&gt; IO Bool
</span><a href="Database.PostgreSQL.LibPQ.html#sendQueryParams"><span class="hs-identifier hs-var hs-var">sendQueryParams</span></a></span></span><span> </span><span id="local-6989586621679046642"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046642"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span id="local-6989586621679046641"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046641"><span class="hs-identifier hs-var">statement</span></a></span></span><span> </span><span id="local-6989586621679046640"><span class="annot"><span class="annottext">[Maybe (Oid, ByteString, Format)]
</span><a href="#local-6989586621679046640"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span id="local-6989586621679046639"><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621679046639"><span class="hs-identifier hs-var">rFmt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1464"></span><span>    </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO Bool
forall b.
FromCInt b =&gt;
Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#enumFromConn"><span class="hs-identifier hs-var">enumFromConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046642"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO CInt) -&gt; IO Bool)
-&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046638"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046638"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1465"></span><span>        </span><span class="annot"><span class="annottext">ByteString -&gt; (CString -&gt; IO CInt) -&gt; IO CInt
forall a. ByteString -&gt; (CString -&gt; IO a) -&gt; IO a
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.useAsCString</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046641"><span class="hs-identifier hs-var">statement</span></a></span><span> </span><span class="annot"><span class="annottext">((CString -&gt; IO CInt) -&gt; IO CInt)
-&gt; (CString -&gt; IO CInt) -&gt; IO CInt
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046637"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046637"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1466"></span><span>            </span><span class="annot"><span class="annottext">[Maybe (Oid, ByteString, Format)]
-&gt; (CInt
    -&gt; Ptr Oid -&gt; Ptr CString -&gt; Ptr CInt -&gt; Ptr CInt -&gt; IO CInt)
-&gt; IO CInt
forall a.
[Maybe (Oid, ByteString, Format)]
-&gt; (CInt -&gt; Ptr Oid -&gt; Ptr CString -&gt; Ptr CInt -&gt; Ptr CInt -&gt; IO a)
-&gt; IO a
</span><a href="Database.PostgreSQL.LibPQ.html#withParams"><span class="hs-identifier hs-var">withParams</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe (Oid, ByteString, Format)]
</span><a href="#local-6989586621679046640"><span class="hs-identifier hs-var">params</span></a></span><span> </span><span class="annot"><span class="annottext">((CInt
  -&gt; Ptr Oid -&gt; Ptr CString -&gt; Ptr CInt -&gt; Ptr CInt -&gt; IO CInt)
 -&gt; IO CInt)
-&gt; (CInt
    -&gt; Ptr Oid -&gt; Ptr CString -&gt; Ptr CInt -&gt; Ptr CInt -&gt; IO CInt)
-&gt; IO CInt
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046636"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046636"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679046635"><span class="annot"><span class="annottext">Ptr Oid
</span><a href="#local-6989586621679046635"><span class="hs-identifier hs-var">ts</span></a></span></span><span> </span><span id="local-6989586621679046634"><span class="annot"><span class="annottext">Ptr CString
</span><a href="#local-6989586621679046634"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span id="local-6989586621679046633"><span class="annot"><span class="annottext">Ptr CInt
</span><a href="#local-6989586621679046633"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span id="local-6989586621679046632"><span class="annot"><span class="annottext">Ptr CInt
</span><a href="#local-6989586621679046632"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1467"></span><span>                </span><span class="annot"><span class="annottext">Ptr PGconn
-&gt; CString
-&gt; CInt
-&gt; Ptr Oid
-&gt; Ptr CString
-&gt; Ptr CInt
-&gt; Ptr CInt
-&gt; CInt
-&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQsendQueryParams"><span class="hs-identifier hs-var">c_PQsendQueryParams</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046638"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046637"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046636"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Oid
</span><a href="#local-6989586621679046635"><span class="hs-identifier hs-var">ts</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr CString
</span><a href="#local-6989586621679046634"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr CInt
</span><a href="#local-6989586621679046633"><span class="hs-identifier hs-var">ls</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr CInt
</span><a href="#local-6989586621679046632"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046630"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-1468"></span><span>
</span><span id="line-1469"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-1470"></span><span>      </span><span class="hs-glyph">!</span><span id="local-6989586621679046630"><span class="annot"><span class="annottext">f :: CInt
</span><a href="#local-6989586621679046630"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Format -&gt; CInt
forall a. ToCInt a =&gt; a -&gt; CInt
</span><a href="Database.PostgreSQL.LibPQ.Enums.html#toCInt"><span class="hs-identifier hs-var">toCInt</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621679046639"><span class="hs-identifier hs-var">rFmt</span></a></span><span>
</span><span id="line-1471"></span><span>
</span><span id="line-1472"></span><span>
</span><span id="line-1473"></span><span class="hs-comment">-- | Sends a request to create a prepared statement with the given</span><span>
</span><span id="line-1474"></span><span class="hs-comment">-- parameters, without waiting for completion.</span><span>
</span><span id="line-1475"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#sendPrepare"><span class="hs-identifier hs-type">sendPrepare</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-1476"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span>
</span><span id="line-1477"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span>
</span><span id="line-1478"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Oid.html#Oid"><span class="hs-identifier hs-type">Oid</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1479"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-1480"></span><span id="sendPrepare"><span class="annot"><span class="annottext">sendPrepare :: Connection -&gt; ByteString -&gt; ByteString -&gt; Maybe [Oid] -&gt; IO Bool
</span><a href="Database.PostgreSQL.LibPQ.html#sendPrepare"><span class="hs-identifier hs-var hs-var">sendPrepare</span></a></span></span><span> </span><span id="local-6989586621679046629"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046629"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span id="local-6989586621679046628"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046628"><span class="hs-identifier hs-var">stmtName</span></a></span></span><span> </span><span id="local-6989586621679046627"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046627"><span class="hs-identifier hs-var">query</span></a></span></span><span> </span><span id="local-6989586621679046626"><span class="annot"><span class="annottext">Maybe [Oid]
</span><a href="#local-6989586621679046626"><span class="hs-identifier hs-var">mParamTypes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1481"></span><span>    </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO Bool
forall b.
FromCInt b =&gt;
Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#enumFromConn"><span class="hs-identifier hs-var">enumFromConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046629"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO CInt) -&gt; IO Bool)
-&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046625"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046625"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1482"></span><span>        </span><span class="annot"><span class="annottext">ByteString -&gt; (CString -&gt; IO CInt) -&gt; IO CInt
forall a. ByteString -&gt; (CString -&gt; IO a) -&gt; IO a
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.useAsCString</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046628"><span class="hs-identifier hs-var">stmtName</span></a></span><span> </span><span class="annot"><span class="annottext">((CString -&gt; IO CInt) -&gt; IO CInt)
-&gt; (CString -&gt; IO CInt) -&gt; IO CInt
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046624"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046624"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1483"></span><span>            </span><span class="annot"><span class="annottext">ByteString -&gt; (CString -&gt; IO CInt) -&gt; IO CInt
forall a. ByteString -&gt; (CString -&gt; IO a) -&gt; IO a
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.useAsCString</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046627"><span class="hs-identifier hs-var">query</span></a></span><span> </span><span class="annot"><span class="annottext">((CString -&gt; IO CInt) -&gt; IO CInt)
-&gt; (CString -&gt; IO CInt) -&gt; IO CInt
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046623"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046623"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1484"></span><span>                </span><span class="annot"><span class="annottext">([Oid] -&gt; (Int -&gt; Ptr Oid -&gt; IO CInt) -&gt; IO CInt)
-&gt; Maybe [Oid] -&gt; (Int -&gt; Ptr Oid -&gt; IO CInt) -&gt; IO CInt
forall a b c.
(a -&gt; (Int -&gt; Ptr b -&gt; IO c) -&gt; IO c)
-&gt; Maybe a -&gt; (Int -&gt; Ptr b -&gt; IO c) -&gt; IO c
</span><a href="Database.PostgreSQL.LibPQ.Marshal.html#maybeWithInt"><span class="hs-identifier hs-var">maybeWithInt</span></a></span><span> </span><span class="annot"><span class="annottext">[Oid] -&gt; (Int -&gt; Ptr Oid -&gt; IO CInt) -&gt; IO CInt
forall a b. Storable a =&gt; [a] -&gt; (Int -&gt; Ptr a -&gt; IO b) -&gt; IO b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">withArrayLen</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [Oid]
</span><a href="#local-6989586621679046626"><span class="hs-identifier hs-var">mParamTypes</span></a></span><span> </span><span class="annot"><span class="annottext">((Int -&gt; Ptr Oid -&gt; IO CInt) -&gt; IO CInt)
-&gt; (Int -&gt; Ptr Oid -&gt; IO CInt) -&gt; IO CInt
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046622"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679046622"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679046621"><span class="annot"><span class="annottext">Ptr Oid
</span><a href="#local-6989586621679046621"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1485"></span><span>                    </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; CString -&gt; CString -&gt; CInt -&gt; Ptr Oid -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQsendPrepare"><span class="hs-identifier hs-var">c_PQsendPrepare</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046625"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046624"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046623"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; CInt
</span><a href="Database.PostgreSQL.LibPQ.html#intToCInt"><span class="hs-identifier hs-var">intToCInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679046622"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Ptr Oid
</span><a href="#local-6989586621679046621"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-1486"></span><span>
</span><span id="line-1487"></span><span>
</span><span id="line-1488"></span><span class="hs-comment">-- | Sends a request to execute a prepared statement with given</span><span>
</span><span id="line-1489"></span><span class="hs-comment">-- parameters, without waiting for the result(s).</span><span>
</span><span id="line-1490"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#sendQueryPrepared"><span class="hs-identifier hs-type">sendQueryPrepared</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-1491"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span>
</span><span id="line-1492"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Enums.html#Format"><span class="hs-identifier hs-type">Format</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1493"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Enums.html#Format"><span class="hs-identifier hs-type">Format</span></a></span><span>
</span><span id="line-1494"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-1495"></span><span id="sendQueryPrepared"><span class="annot"><span class="annottext">sendQueryPrepared :: Connection
-&gt; ByteString -&gt; [Maybe (ByteString, Format)] -&gt; Format -&gt; IO Bool
</span><a href="Database.PostgreSQL.LibPQ.html#sendQueryPrepared"><span class="hs-identifier hs-var hs-var">sendQueryPrepared</span></a></span></span><span> </span><span id="local-6989586621679046619"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046619"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span id="local-6989586621679046618"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046618"><span class="hs-identifier hs-var">stmtName</span></a></span></span><span> </span><span id="local-6989586621679046617"><span class="annot"><span class="annottext">[Maybe (ByteString, Format)]
</span><a href="#local-6989586621679046617"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span id="local-6989586621679046616"><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621679046616"><span class="hs-identifier hs-var">rFmt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1496"></span><span>    </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO Bool
forall b.
FromCInt b =&gt;
Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#enumFromConn"><span class="hs-identifier hs-var">enumFromConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046619"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO CInt) -&gt; IO Bool)
-&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046615"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046615"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1497"></span><span>        </span><span class="annot"><span class="annottext">ByteString -&gt; (CString -&gt; IO CInt) -&gt; IO CInt
forall a. ByteString -&gt; (CString -&gt; IO a) -&gt; IO a
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.useAsCString</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046618"><span class="hs-identifier hs-var">stmtName</span></a></span><span> </span><span class="annot"><span class="annottext">((CString -&gt; IO CInt) -&gt; IO CInt)
-&gt; (CString -&gt; IO CInt) -&gt; IO CInt
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046614"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046614"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1498"></span><span>            </span><span class="annot"><span class="annottext">[Maybe (ByteString, Format)]
-&gt; (CInt -&gt; Ptr CString -&gt; Ptr CInt -&gt; Ptr CInt -&gt; IO CInt)
-&gt; IO CInt
forall a.
[Maybe (ByteString, Format)]
-&gt; (CInt -&gt; Ptr CString -&gt; Ptr CInt -&gt; Ptr CInt -&gt; IO a) -&gt; IO a
</span><a href="Database.PostgreSQL.LibPQ.html#withParamsPrepared"><span class="hs-identifier hs-var">withParamsPrepared</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe (ByteString, Format)]
</span><a href="#local-6989586621679046617"><span class="hs-identifier hs-var">params</span></a></span><span> </span><span class="annot"><span class="annottext">((CInt -&gt; Ptr CString -&gt; Ptr CInt -&gt; Ptr CInt -&gt; IO CInt)
 -&gt; IO CInt)
-&gt; (CInt -&gt; Ptr CString -&gt; Ptr CInt -&gt; Ptr CInt -&gt; IO CInt)
-&gt; IO CInt
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046613"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046613"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679046612"><span class="annot"><span class="annottext">Ptr CString
</span><a href="#local-6989586621679046612"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span id="local-6989586621679046611"><span class="annot"><span class="annottext">Ptr CInt
</span><a href="#local-6989586621679046611"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span id="local-6989586621679046610"><span class="annot"><span class="annottext">Ptr CInt
</span><a href="#local-6989586621679046610"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1499"></span><span>                </span><span class="annot"><span class="annottext">Ptr PGconn
-&gt; CString
-&gt; CInt
-&gt; Ptr CString
-&gt; Ptr CInt
-&gt; Ptr CInt
-&gt; CInt
-&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQsendQueryPrepared"><span class="hs-identifier hs-var">c_PQsendQueryPrepared</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046615"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046614"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046613"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr CString
</span><a href="#local-6989586621679046612"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr CInt
</span><a href="#local-6989586621679046611"><span class="hs-identifier hs-var">ls</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr CInt
</span><a href="#local-6989586621679046610"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046608"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-1500"></span><span>
</span><span id="line-1501"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-1502"></span><span>      </span><span class="hs-glyph">!</span><span id="local-6989586621679046608"><span class="annot"><span class="annottext">f :: CInt
</span><a href="#local-6989586621679046608"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Format -&gt; CInt
forall a. ToCInt a =&gt; a -&gt; CInt
</span><a href="Database.PostgreSQL.LibPQ.Enums.html#toCInt"><span class="hs-identifier hs-var">toCInt</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621679046616"><span class="hs-identifier hs-var">rFmt</span></a></span><span>
</span><span id="line-1503"></span><span>
</span><span id="line-1504"></span><span>
</span><span id="line-1505"></span><span class="hs-comment">-- | Submits a request to obtain information about the specified</span><span>
</span><span id="line-1506"></span><span class="hs-comment">-- prepared statement, without waiting for completion.</span><span>
</span><span id="line-1507"></span><span class="hs-comment">--</span><span>
</span><span id="line-1508"></span><span class="hs-comment">-- This is an asynchronous version of 'describePrepared': it returns</span><span>
</span><span id="line-1509"></span><span class="hs-comment">-- 'True' if it was able to dispatch the request, and 'False' if</span><span>
</span><span id="line-1510"></span><span class="hs-comment">-- not. After a successful call, call 'getResult' to obtain the</span><span>
</span><span id="line-1511"></span><span class="hs-comment">-- results. The function's parameters are handled identically to</span><span>
</span><span id="line-1512"></span><span class="hs-comment">-- 'describePrepared'. Like 'describePrepared', it will not work on</span><span>
</span><span id="line-1513"></span><span class="hs-comment">-- 2.0-protocol connections.</span><span>
</span><span id="line-1514"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#sendDescribePrepared"><span class="hs-identifier hs-type">sendDescribePrepared</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-1515"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span> </span><span class="hs-comment">-- ^ stmtName</span><span>
</span><span id="line-1516"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-1517"></span><span id="sendDescribePrepared"><span class="annot"><span class="annottext">sendDescribePrepared :: Connection -&gt; ByteString -&gt; IO Bool
</span><a href="Database.PostgreSQL.LibPQ.html#sendDescribePrepared"><span class="hs-identifier hs-var hs-var">sendDescribePrepared</span></a></span></span><span> </span><span id="local-6989586621679046607"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046607"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span id="local-6989586621679046606"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046606"><span class="hs-identifier hs-var">stmtName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1518"></span><span>    </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO Bool
forall b.
FromCInt b =&gt;
Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#enumFromConn"><span class="hs-identifier hs-var">enumFromConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046607"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO CInt) -&gt; IO Bool)
-&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046605"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046605"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1519"></span><span>        </span><span class="annot"><span class="annottext">ByteString -&gt; (CString -&gt; IO CInt) -&gt; IO CInt
forall a. ByteString -&gt; (CString -&gt; IO a) -&gt; IO a
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.useAsCString</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046606"><span class="hs-identifier hs-var">stmtName</span></a></span><span> </span><span class="annot"><span class="annottext">((CString -&gt; IO CInt) -&gt; IO CInt)
-&gt; (CString -&gt; IO CInt) -&gt; IO CInt
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046604"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046604"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1520"></span><span>            </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; CString -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQsendDescribePrepared"><span class="hs-identifier hs-var">c_PQsendDescribePrepared</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046605"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046604"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-1521"></span><span>
</span><span id="line-1522"></span><span>
</span><span id="line-1523"></span><span class="hs-comment">-- | Submits a request to obtain information about the specified</span><span>
</span><span id="line-1524"></span><span class="hs-comment">-- portal, without waiting for completion.</span><span>
</span><span id="line-1525"></span><span class="hs-comment">--</span><span>
</span><span id="line-1526"></span><span class="hs-comment">-- This is an asynchronous version of 'describePortal': it returns</span><span>
</span><span id="line-1527"></span><span class="hs-comment">-- 'True' if it was able to dispatch the request, and 'False' if</span><span>
</span><span id="line-1528"></span><span class="hs-comment">-- not. After a successful call, call 'getResult' to obtain the</span><span>
</span><span id="line-1529"></span><span class="hs-comment">-- results. The function's parameters are handled identically to</span><span>
</span><span id="line-1530"></span><span class="hs-comment">-- 'describePortal'. Like 'describePortal', it will not work on</span><span>
</span><span id="line-1531"></span><span class="hs-comment">-- 2.0-protocol connections.</span><span>
</span><span id="line-1532"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#sendDescribePortal"><span class="hs-identifier hs-type">sendDescribePortal</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-1533"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span> </span><span class="hs-comment">-- ^ portalName</span><span>
</span><span id="line-1534"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-1535"></span><span id="sendDescribePortal"><span class="annot"><span class="annottext">sendDescribePortal :: Connection -&gt; ByteString -&gt; IO Bool
</span><a href="Database.PostgreSQL.LibPQ.html#sendDescribePortal"><span class="hs-identifier hs-var hs-var">sendDescribePortal</span></a></span></span><span> </span><span id="local-6989586621679046602"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046602"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span id="local-6989586621679046601"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046601"><span class="hs-identifier hs-var">portalName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1536"></span><span>    </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO Bool
forall b.
FromCInt b =&gt;
Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#enumFromConn"><span class="hs-identifier hs-var">enumFromConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046602"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO CInt) -&gt; IO Bool)
-&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046600"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046600"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1537"></span><span>        </span><span class="annot"><span class="annottext">ByteString -&gt; (CString -&gt; IO CInt) -&gt; IO CInt
forall a. ByteString -&gt; (CString -&gt; IO a) -&gt; IO a
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.useAsCString</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046601"><span class="hs-identifier hs-var">portalName</span></a></span><span> </span><span class="annot"><span class="annottext">((CString -&gt; IO CInt) -&gt; IO CInt)
-&gt; (CString -&gt; IO CInt) -&gt; IO CInt
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046599"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046599"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1538"></span><span>            </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; CString -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQsendDescribePortal"><span class="hs-identifier hs-var">c_PQsendDescribePortal</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046600"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046599"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1539"></span><span>
</span><span id="line-1540"></span><span>
</span><span id="line-1541"></span><span class="hs-comment">-- | Waits for the next result from a prior 'sendQuery',</span><span>
</span><span id="line-1542"></span><span class="hs-comment">-- 'sendQueryParams', 'sendPrepare', or 'sendQueryPrepared' call, and</span><span>
</span><span id="line-1543"></span><span class="hs-comment">-- returns it. A null pointer is returned when the command is complete</span><span>
</span><span id="line-1544"></span><span class="hs-comment">-- and there will be no more results.</span><span>
</span><span id="line-1545"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#getResult"><span class="hs-identifier hs-type">getResult</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-1546"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1547"></span><span id="getResult"><span class="annot"><span class="annottext">getResult :: Connection -&gt; IO (Maybe Result)
</span><a href="Database.PostgreSQL.LibPQ.html#getResult"><span class="hs-identifier hs-var hs-var">getResult</span></a></span></span><span> </span><span id="local-6989586621679046597"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046597"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1548"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679046596"><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046596"><span class="hs-identifier hs-var">resPtr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Connection
-&gt; (Ptr PGconn -&gt; IO (Ptr PGresult)) -&gt; IO (Ptr PGresult)
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046597"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO (Ptr PGresult)
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQgetResult"><span class="hs-identifier hs-var">c_PQgetResult</span></a></span><span>
</span><span id="line-1549"></span><span>       </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046596"><span class="hs-identifier hs-var">resPtr</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult -&gt; Ptr PGresult -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult
forall a. Ptr a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">nullPtr</span></a></span><span>
</span><span id="line-1550"></span><span>           </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Maybe Result -&gt; IO (Maybe Result)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Result
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1551"></span><span>           </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Result -&gt; Maybe Result
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(Result -&gt; Maybe Result)
-&gt; (ForeignPtr PGresult -&gt; Result)
-&gt; ForeignPtr PGresult
-&gt; Maybe Result
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr PGresult -&gt; Result
</span><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-var">Result</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ForeignPtr PGresult -&gt; Maybe Result)
-&gt; IO (ForeignPtr PGresult) -&gt; IO (Maybe Result)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`fmap`</span></a></span><span> </span><span class="annot"><span class="annottext">FinalizerPtr PGresult -&gt; Ptr PGresult -&gt; IO (ForeignPtr PGresult)
forall a. FinalizerPtr a -&gt; Ptr a -&gt; IO (ForeignPtr a)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">newForeignPtr</span></a></span><span> </span><span class="annot"><span class="annottext">FinalizerPtr PGresult
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#p_PQclear"><span class="hs-identifier hs-var">p_PQclear</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046596"><span class="hs-identifier hs-var">resPtr</span></a></span><span>
</span><span id="line-1552"></span><span>
</span><span id="line-1553"></span><span>
</span><span id="line-1554"></span><span class="hs-comment">-- | If input is available from the server, consume it.</span><span>
</span><span id="line-1555"></span><span class="hs-comment">--</span><span>
</span><span id="line-1556"></span><span class="hs-comment">-- 'consumeInput' normally returns 'True' indicating &quot;no error&quot;, but</span><span>
</span><span id="line-1557"></span><span class="hs-comment">-- returns 'False' if there was some kind of trouble (in which case</span><span>
</span><span id="line-1558"></span><span class="hs-comment">-- 'errorMessage' can be consulted). Note that the result does not say</span><span>
</span><span id="line-1559"></span><span class="hs-comment">-- whether any input data was actually collected. After calling</span><span>
</span><span id="line-1560"></span><span class="hs-comment">-- 'consumeInput', the application can check 'isBusy' and/or</span><span>
</span><span id="line-1561"></span><span class="hs-comment">-- 'notifies' to see if their state has changed.</span><span>
</span><span id="line-1562"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#consumeInput"><span class="hs-identifier hs-type">consumeInput</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-1563"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-1564"></span><span id="consumeInput"><span class="annot"><span class="annottext">consumeInput :: Connection -&gt; IO Bool
</span><a href="Database.PostgreSQL.LibPQ.html#consumeInput"><span class="hs-identifier hs-var hs-var">consumeInput</span></a></span></span><span> </span><span id="local-6989586621679046593"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046593"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO Bool
forall b.
FromCInt b =&gt;
Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#enumFromConn"><span class="hs-identifier hs-var">enumFromConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046593"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQconsumeInput"><span class="hs-identifier hs-var">c_PQconsumeInput</span></a></span><span>
</span><span id="line-1565"></span><span>
</span><span id="line-1566"></span><span>
</span><span id="line-1567"></span><span class="hs-comment">-- | Returns True if a command is busy, that is, getResult would block</span><span>
</span><span id="line-1568"></span><span class="hs-comment">-- waiting for input. A False return indicates that getResult can be</span><span>
</span><span id="line-1569"></span><span class="hs-comment">-- called with assurance of not blocking.</span><span>
</span><span id="line-1570"></span><span class="hs-comment">--</span><span>
</span><span id="line-1571"></span><span class="hs-comment">-- 'isBusy' will not itself attempt to read data from the server;</span><span>
</span><span id="line-1572"></span><span class="hs-comment">-- therefore 'consumeInput' must be invoked first, or the busy state</span><span>
</span><span id="line-1573"></span><span class="hs-comment">-- will never end.</span><span>
</span><span id="line-1574"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#isBusy"><span class="hs-identifier hs-type">isBusy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-1575"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-1576"></span><span id="isBusy"><span class="annot"><span class="annottext">isBusy :: Connection -&gt; IO Bool
</span><a href="Database.PostgreSQL.LibPQ.html#isBusy"><span class="hs-identifier hs-var hs-var">isBusy</span></a></span></span><span> </span><span id="local-6989586621679046591"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046591"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO Bool
forall b.
FromCInt b =&gt;
Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#enumFromConn"><span class="hs-identifier hs-var">enumFromConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046591"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQisBusy"><span class="hs-identifier hs-var">c_PQisBusy</span></a></span><span>
</span><span id="line-1577"></span><span>
</span><span id="line-1578"></span><span>
</span><span id="line-1579"></span><span class="hs-comment">-- | Sets the nonblocking status of the connection.</span><span>
</span><span id="line-1580"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#setnonblocking"><span class="hs-identifier hs-type">setnonblocking</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-1581"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-1582"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-1583"></span><span id="setnonblocking"><span class="annot"><span class="annottext">setnonblocking :: Connection -&gt; Bool -&gt; IO Bool
</span><a href="Database.PostgreSQL.LibPQ.html#setnonblocking"><span class="hs-identifier hs-var hs-var">setnonblocking</span></a></span></span><span> </span><span id="local-6989586621679046589"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046589"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span id="local-6989586621679046588"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679046588"><span class="hs-identifier hs-var">blocking</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1584"></span><span>       </span><span id="local-6989586621679046587"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046587"><span class="hs-identifier hs-var">stat</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO CInt
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046589"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO CInt) -&gt; IO CInt)
-&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO CInt
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046586"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046586"><span class="hs-identifier hs-var">ptr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; CInt -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQsetnonblocking"><span class="hs-identifier hs-var">c_PQsetnonblocking</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046586"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; CInt
forall a. ToCInt a =&gt; a -&gt; CInt
</span><a href="Database.PostgreSQL.LibPQ.Enums.html#toCInt"><span class="hs-identifier hs-var">toCInt</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679046588"><span class="hs-identifier hs-var">blocking</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1585"></span><span>       </span><span class="annot"><span class="annottext">Bool -&gt; IO Bool
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; IO Bool) -&gt; Bool -&gt; IO Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046587"><span class="hs-identifier hs-var">stat</span></a></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; CInt -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><span class="hs-number">0</span></span><span>
</span><span id="line-1586"></span><span>
</span><span id="line-1587"></span><span>
</span><span id="line-1588"></span><span class="hs-comment">-- | Returns the blocking status of the database connection.</span><span>
</span><span id="line-1589"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#isnonblocking"><span class="hs-identifier hs-type">isnonblocking</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-1590"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-1591"></span><span id="isnonblocking"><span class="annot"><span class="annottext">isnonblocking :: Connection -&gt; IO Bool
</span><a href="Database.PostgreSQL.LibPQ.html#isnonblocking"><span class="hs-identifier hs-var hs-var">isnonblocking</span></a></span></span><span> </span><span id="local-6989586621679046584"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046584"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO Bool
forall b.
FromCInt b =&gt;
Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#enumFromConn"><span class="hs-identifier hs-var">enumFromConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046584"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQisnonblocking"><span class="hs-identifier hs-var">c_PQisnonblocking</span></a></span><span>
</span><span id="line-1592"></span><span>
</span><span id="line-1593"></span><span>
</span><span id="line-1594"></span><span class="hs-comment">-- | Select single-row mode for the currently-executing query.</span><span>
</span><span id="line-1595"></span><span class="hs-comment">--</span><span>
</span><span id="line-1596"></span><span class="hs-comment">-- This function can only be called immediately after PQsendQuery or one of its</span><span>
</span><span id="line-1597"></span><span class="hs-comment">-- sibling functions, before any other operation on the connection such as</span><span>
</span><span id="line-1598"></span><span class="hs-comment">-- PQconsumeInput or PQgetResult. If called at the correct time, the function</span><span>
</span><span id="line-1599"></span><span class="hs-comment">-- activates single-row mode for the current query and returns 1. Otherwise the</span><span>
</span><span id="line-1600"></span><span class="hs-comment">-- mode stays unchanged and the function returns 0. In any case, the mode</span><span>
</span><span id="line-1601"></span><span class="hs-comment">-- reverts to normal after completion of the current query.</span><span>
</span><span id="line-1602"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#setSingleRowMode"><span class="hs-identifier hs-type">setSingleRowMode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-1603"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-1604"></span><span id="setSingleRowMode"><span class="annot"><span class="annottext">setSingleRowMode :: Connection -&gt; IO Bool
</span><a href="Database.PostgreSQL.LibPQ.html#setSingleRowMode"><span class="hs-identifier hs-var hs-var">setSingleRowMode</span></a></span></span><span> </span><span id="local-6989586621679046582"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046582"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO Bool
forall b.
FromCInt b =&gt;
Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#enumFromConn"><span class="hs-identifier hs-var">enumFromConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046582"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQsetSingleRowMode"><span class="hs-identifier hs-var">c_PQsetSingleRowMode</span></a></span><span>
</span><span id="line-1605"></span><span>
</span><span id="line-1606"></span><span>
</span><span id="line-1607"></span><span class="hs-keyword">data</span><span> </span><span id="FlushStatus"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#FlushStatus"><span class="hs-identifier hs-var">FlushStatus</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="FlushOk"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#FlushOk"><span class="hs-identifier hs-var">FlushOk</span></a></span></span><span>
</span><span id="line-1608"></span><span>                 </span><span class="hs-glyph">|</span><span> </span><span id="FlushFailed"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#FlushFailed"><span class="hs-identifier hs-var">FlushFailed</span></a></span></span><span>
</span><span id="line-1609"></span><span>                 </span><span class="hs-glyph">|</span><span> </span><span id="FlushWriting"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#FlushWriting"><span class="hs-identifier hs-var">FlushWriting</span></a></span></span><span>
</span><span id="line-1610"></span><span>                   </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679046574"><span id="local-6989586621679046576"><span class="annot"><span class="annottext">FlushStatus -&gt; FlushStatus -&gt; Bool
(FlushStatus -&gt; FlushStatus -&gt; Bool)
-&gt; (FlushStatus -&gt; FlushStatus -&gt; Bool) -&gt; Eq FlushStatus
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: FlushStatus -&gt; FlushStatus -&gt; Bool
$c/= :: FlushStatus -&gt; FlushStatus -&gt; Bool
== :: FlushStatus -&gt; FlushStatus -&gt; Bool
$c== :: FlushStatus -&gt; FlushStatus -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679046568"><span id="local-6989586621679046570"><span id="local-6989586621679046572"><span class="annot"><span class="annottext">Int -&gt; FlushStatus -&gt; String -&gt; String
[FlushStatus] -&gt; String -&gt; String
FlushStatus -&gt; String
(Int -&gt; FlushStatus -&gt; String -&gt; String)
-&gt; (FlushStatus -&gt; String)
-&gt; ([FlushStatus] -&gt; String -&gt; String)
-&gt; Show FlushStatus
forall a.
(Int -&gt; a -&gt; String -&gt; String)
-&gt; (a -&gt; String) -&gt; ([a] -&gt; String -&gt; String) -&gt; Show a
showList :: [FlushStatus] -&gt; String -&gt; String
$cshowList :: [FlushStatus] -&gt; String -&gt; String
show :: FlushStatus -&gt; String
$cshow :: FlushStatus -&gt; String
showsPrec :: Int -&gt; FlushStatus -&gt; String -&gt; String
$cshowsPrec :: Int -&gt; FlushStatus -&gt; String -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1611"></span><span>
</span><span id="line-1612"></span><span class="hs-comment">-- | Attempts to flush any queued output data to the server. Returns</span><span>
</span><span id="line-1613"></span><span class="hs-comment">-- 'FlushOk' if successful (or if the send queue is empty),</span><span>
</span><span id="line-1614"></span><span class="hs-comment">-- 'FlushFailed' if it failed for some reason, or 'FlushWriting' if it</span><span>
</span><span id="line-1615"></span><span class="hs-comment">-- was unable to send all the data in the send queue yet (this case</span><span>
</span><span id="line-1616"></span><span class="hs-comment">-- can only occur if the connection is nonblocking).</span><span>
</span><span id="line-1617"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#flush"><span class="hs-identifier hs-type">flush</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-1618"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#FlushStatus"><span class="hs-identifier hs-type">FlushStatus</span></a></span><span>
</span><span id="line-1619"></span><span id="flush"><span class="annot"><span class="annottext">flush :: Connection -&gt; IO FlushStatus
</span><a href="Database.PostgreSQL.LibPQ.html#flush"><span class="hs-identifier hs-var hs-var">flush</span></a></span></span><span> </span><span id="local-6989586621679046567"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046567"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1620"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679046566"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046566"><span class="hs-identifier hs-var">stat</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO CInt
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046567"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQflush"><span class="hs-identifier hs-var">c_PQflush</span></a></span><span>
</span><span id="line-1621"></span><span>       </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046566"><span class="hs-identifier hs-var">stat</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1622"></span><span>         </span><span class="annot"><span class="annottext">CInt
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FlushStatus -&gt; IO FlushStatus
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">FlushStatus
</span><a href="Database.PostgreSQL.LibPQ.html#FlushOk"><span class="hs-identifier hs-var">FlushOk</span></a></span><span>
</span><span id="line-1623"></span><span>         </span><span class="annot"><span class="annottext">CInt
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FlushStatus -&gt; IO FlushStatus
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">FlushStatus
</span><a href="Database.PostgreSQL.LibPQ.html#FlushWriting"><span class="hs-identifier hs-var">FlushWriting</span></a></span><span>
</span><span id="line-1624"></span><span>         </span><span class="annot"><span class="annottext">CInt
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FlushStatus -&gt; IO FlushStatus
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">FlushStatus
</span><a href="Database.PostgreSQL.LibPQ.html#FlushFailed"><span class="hs-identifier hs-var">FlushFailed</span></a></span><span>
</span><span id="line-1625"></span><span>
</span><span id="line-1626"></span><span>
</span><span id="line-1627"></span><span class="hs-comment">-- $cancel</span><span>
</span><span id="line-1628"></span><span class="hs-comment">-- A client application can request cancellation of a command that is</span><span>
</span><span id="line-1629"></span><span class="hs-comment">-- still being processed by the server, using the functions described</span><span>
</span><span id="line-1630"></span><span class="hs-comment">-- in this section.</span><span>
</span><span id="line-1631"></span><span>
</span><span id="line-1632"></span><span class="hs-comment">-- | Contains the information needed to cancel a command issued</span><span>
</span><span id="line-1633"></span><span class="hs-comment">-- through a particular database connection.</span><span>
</span><span id="line-1634"></span><span class="hs-keyword">newtype</span><span> </span><span id="Cancel"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Cancel"><span class="hs-identifier hs-var">Cancel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Cancel"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Cancel"><span class="hs-identifier hs-var">Cancel</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">ForeignPtr</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.FFI.html#PGcancel"><span class="hs-identifier hs-type">PGcancel</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679046560"><span id="local-6989586621679046562"><span class="annot"><span class="annottext">Cancel -&gt; Cancel -&gt; Bool
(Cancel -&gt; Cancel -&gt; Bool)
-&gt; (Cancel -&gt; Cancel -&gt; Bool) -&gt; Eq Cancel
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Cancel -&gt; Cancel -&gt; Bool
$c/= :: Cancel -&gt; Cancel -&gt; Bool
== :: Cancel -&gt; Cancel -&gt; Bool
$c== :: Cancel -&gt; Cancel -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679046554"><span id="local-6989586621679046556"><span id="local-6989586621679046558"><span class="annot"><span class="annottext">Int -&gt; Cancel -&gt; String -&gt; String
[Cancel] -&gt; String -&gt; String
Cancel -&gt; String
(Int -&gt; Cancel -&gt; String -&gt; String)
-&gt; (Cancel -&gt; String)
-&gt; ([Cancel] -&gt; String -&gt; String)
-&gt; Show Cancel
forall a.
(Int -&gt; a -&gt; String -&gt; String)
-&gt; (a -&gt; String) -&gt; ([a] -&gt; String -&gt; String) -&gt; Show a
showList :: [Cancel] -&gt; String -&gt; String
$cshowList :: [Cancel] -&gt; String -&gt; String
show :: Cancel -&gt; String
$cshow :: Cancel -&gt; String
showsPrec :: Int -&gt; Cancel -&gt; String -&gt; String
$cshowsPrec :: Int -&gt; Cancel -&gt; String -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1635"></span><span>
</span><span id="line-1636"></span><span>
</span><span id="line-1637"></span><span class="hs-comment">-- | Creates a data structure containing the information needed to</span><span>
</span><span id="line-1638"></span><span class="hs-comment">-- cancel a command issued through a particular database connection.</span><span>
</span><span id="line-1639"></span><span class="hs-comment">--</span><span>
</span><span id="line-1640"></span><span class="hs-comment">-- 'getCancel' creates a 'Cancel' object given a 'Connection'. It will</span><span>
</span><span id="line-1641"></span><span class="hs-comment">-- return 'Nothing' if the given conn is an invalid connection.</span><span>
</span><span id="line-1642"></span><span>
</span><span id="line-1643"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#getCancel"><span class="hs-identifier hs-type">getCancel</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-1644"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Cancel"><span class="hs-identifier hs-type">Cancel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1645"></span><span id="getCancel"><span class="annot"><span class="annottext">getCancel :: Connection -&gt; IO (Maybe Cancel)
</span><a href="Database.PostgreSQL.LibPQ.html#getCancel"><span class="hs-identifier hs-var hs-var">getCancel</span></a></span></span><span> </span><span id="local-6989586621679046553"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046553"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1646"></span><span>    </span><span class="annot"><span class="annottext">IO (Maybe Cancel) -&gt; IO (Maybe Cancel)
forall a. IO a -&gt; IO a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mask_</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Maybe Cancel) -&gt; IO (Maybe Cancel))
-&gt; IO (Maybe Cancel) -&gt; IO (Maybe Cancel)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
-&gt; (Ptr PGconn -&gt; IO (Maybe Cancel)) -&gt; IO (Maybe Cancel)
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046553"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO (Maybe Cancel)) -&gt; IO (Maybe Cancel))
-&gt; (Ptr PGconn -&gt; IO (Maybe Cancel)) -&gt; IO (Maybe Cancel)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046552"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046552"><span class="hs-identifier hs-var">conn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1647"></span><span>        </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679046551"><span class="annot"><span class="annottext">Ptr PGcancel
</span><a href="#local-6989586621679046551"><span class="hs-identifier hs-var">ptr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO (Ptr PGcancel)
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQgetCancel"><span class="hs-identifier hs-var">c_PQgetCancel</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046552"><span class="hs-identifier hs-var">conn</span></a></span><span>
</span><span id="line-1648"></span><span>           </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Ptr PGcancel
</span><a href="#local-6989586621679046551"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGcancel -&gt; Ptr PGcancel -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGcancel
forall a. Ptr a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">nullPtr</span></a></span><span>
</span><span id="line-1649"></span><span>             </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Maybe Cancel -&gt; IO (Maybe Cancel)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Cancel
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1650"></span><span>             </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679046549"><span class="annot"><span class="annottext">ForeignPtr PGcancel
</span><a href="#local-6989586621679046549"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FinalizerPtr PGcancel -&gt; Ptr PGcancel -&gt; IO (ForeignPtr PGcancel)
forall a. FinalizerPtr a -&gt; Ptr a -&gt; IO (ForeignPtr a)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">newForeignPtr</span></a></span><span> </span><span class="annot"><span class="annottext">FinalizerPtr PGcancel
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#p_PQfreeCancel"><span class="hs-identifier hs-var">p_PQfreeCancel</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGcancel
</span><a href="#local-6989586621679046551"><span class="hs-identifier hs-var">ptr</span></a></span><span>
</span><span id="line-1651"></span><span>                     </span><span class="annot"><span class="annottext">Maybe Cancel -&gt; IO (Maybe Cancel)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Cancel -&gt; IO (Maybe Cancel))
-&gt; Maybe Cancel -&gt; IO (Maybe Cancel)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Cancel -&gt; Maybe Cancel
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(Cancel -&gt; Maybe Cancel) -&gt; Cancel -&gt; Maybe Cancel
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr PGcancel -&gt; Cancel
</span><a href="Database.PostgreSQL.LibPQ.html#Cancel"><span class="hs-identifier hs-var">Cancel</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr PGcancel
</span><a href="#local-6989586621679046549"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-1652"></span><span>
</span><span id="line-1653"></span><span>
</span><span id="line-1654"></span><span class="hs-comment">-- | Requests that the server abandon processing of the current</span><span>
</span><span id="line-1655"></span><span class="hs-comment">-- command.</span><span>
</span><span id="line-1656"></span><span class="hs-comment">--</span><span>
</span><span id="line-1657"></span><span class="hs-comment">-- The return value is 'Right ()' if the cancel request was</span><span>
</span><span id="line-1658"></span><span class="hs-comment">-- successfully dispatched and if not, 'Left B.ByteString' containing</span><span>
</span><span id="line-1659"></span><span class="hs-comment">-- an error message explaining why not.</span><span>
</span><span id="line-1660"></span><span class="hs-comment">--</span><span>
</span><span id="line-1661"></span><span class="hs-comment">-- Successful dispatch is no guarantee that the request will have any</span><span>
</span><span id="line-1662"></span><span class="hs-comment">-- effect, however. If the cancellation is effective, the current</span><span>
</span><span id="line-1663"></span><span class="hs-comment">-- command will terminate early and return an error result. If the</span><span>
</span><span id="line-1664"></span><span class="hs-comment">-- cancellation fails (say, because the server was already done</span><span>
</span><span id="line-1665"></span><span class="hs-comment">-- processing the command), then there will be no visible result at</span><span>
</span><span id="line-1666"></span><span class="hs-comment">-- all.</span><span>
</span><span id="line-1667"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#cancel"><span class="hs-identifier hs-type">cancel</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Cancel"><span class="hs-identifier hs-type">Cancel</span></a></span><span>
</span><span id="line-1668"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1669"></span><span id="cancel"><span class="annot"><span class="annottext">cancel :: Cancel -&gt; IO (Either ByteString ())
</span><a href="Database.PostgreSQL.LibPQ.html#cancel"><span class="hs-identifier hs-var hs-var">cancel</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Cancel"><span class="hs-identifier hs-type">Cancel</span></a></span><span> </span><span id="local-6989586621679046547"><span class="annot"><span class="annottext">ForeignPtr PGcancel
</span><a href="#local-6989586621679046547"><span class="hs-identifier hs-var">fp</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1670"></span><span>    </span><span class="annot"><span class="annottext">ForeignPtr PGcancel
-&gt; (Ptr PGcancel -&gt; IO (Either ByteString ()))
-&gt; IO (Either ByteString ())
forall a b. ForeignPtr a -&gt; (Ptr a -&gt; IO b) -&gt; IO b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">withForeignPtr</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr PGcancel
</span><a href="#local-6989586621679046547"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGcancel -&gt; IO (Either ByteString ()))
 -&gt; IO (Either ByteString ()))
-&gt; (Ptr PGcancel -&gt; IO (Either ByteString ()))
-&gt; IO (Either ByteString ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046546"><span class="annot"><span class="annottext">Ptr PGcancel
</span><a href="#local-6989586621679046546"><span class="hs-identifier hs-var">ptr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1671"></span><span>        </span><span class="annot"><span class="annottext">Int
-&gt; (CString -&gt; IO (Either ByteString ()))
-&gt; IO (Either ByteString ())
forall a b. Int -&gt; (Ptr a -&gt; IO b) -&gt; IO b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">allocaBytes</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679046545"><span class="hs-identifier hs-var">errbufsize</span></a></span><span> </span><span class="annot"><span class="annottext">((CString -&gt; IO (Either ByteString ()))
 -&gt; IO (Either ByteString ()))
-&gt; (CString -&gt; IO (Either ByteString ()))
-&gt; IO (Either ByteString ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046544"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046544"><span class="hs-identifier hs-var">errbuf</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1672"></span><span>            </span><span id="local-6989586621679046543"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046543"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr PGcancel -&gt; CString -&gt; CInt -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQcancel"><span class="hs-identifier hs-var">c_PQcancel</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGcancel
</span><a href="#local-6989586621679046546"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046544"><span class="hs-identifier hs-var">errbuf</span></a></span><span> </span><span class="annot"><span class="annottext">(CInt -&gt; IO CInt) -&gt; CInt -&gt; IO CInt
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; CInt
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679046545"><span class="hs-identifier hs-var">errbufsize</span></a></span><span>
</span><span id="line-1673"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046543"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1674"></span><span>              </span><span class="annot"><span class="annottext">CInt
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Either ByteString () -&gt; IO (Either ByteString ())
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Either ByteString () -&gt; IO (Either ByteString ()))
-&gt; Either ByteString () -&gt; IO (Either ByteString ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; Either ByteString ()
forall a b. b -&gt; Either a b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1675"></span><span>              </span><span class="annot"><span class="annottext">CInt
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either ByteString ()
forall a b. a -&gt; Either a b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Either ByteString ())
-&gt; IO ByteString -&gt; IO (Either ByteString ())
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`fmap`</span></a></span><span> </span><span class="annot"><span class="annottext">CString -&gt; IO ByteString
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.packCString</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046544"><span class="hs-identifier hs-var">errbuf</span></a></span><span>
</span><span id="line-1676"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-1677"></span><span>      </span><span id="local-6989586621679046545"><span class="annot"><span class="annottext">errbufsize :: Int
</span><a href="#local-6989586621679046545"><span class="hs-identifier hs-var hs-var">errbufsize</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">256</span></span><span>
</span><span id="line-1678"></span><span>
</span><span id="line-1679"></span><span>
</span><span id="line-1680"></span><span class="hs-comment">-- $asyncnotification</span><span>
</span><span id="line-1681"></span><span class="hs-comment">-- PostgreSQL offers asynchronous notification via the LISTEN and</span><span>
</span><span id="line-1682"></span><span class="hs-comment">-- NOTIFY commands. A client session registers its interest in a</span><span>
</span><span id="line-1683"></span><span class="hs-comment">-- particular notification channel with the LISTEN command (and can</span><span>
</span><span id="line-1684"></span><span class="hs-comment">-- stop listening with the UNLISTEN command). All sessions listening</span><span>
</span><span id="line-1685"></span><span class="hs-comment">-- on a particular channel will be notified asynchronously when a</span><span>
</span><span id="line-1686"></span><span class="hs-comment">-- NOTIFY command with that channel name is executed by any session. A</span><span>
</span><span id="line-1687"></span><span class="hs-comment">-- \&quot;payload\&quot; string can be passed to communicate additional data to</span><span>
</span><span id="line-1688"></span><span class="hs-comment">-- the listeners.</span><span>
</span><span id="line-1689"></span><span class="hs-comment">--</span><span>
</span><span id="line-1690"></span><span class="hs-comment">-- libpq applications submit LISTEN, UNLISTEN, and NOTIFY commands as</span><span>
</span><span id="line-1691"></span><span class="hs-comment">-- ordinary SQL commands. The arrival of NOTIFY messages can</span><span>
</span><span id="line-1692"></span><span class="hs-comment">-- subsequently be detected by calling 'notifies'.</span><span>
</span><span id="line-1693"></span><span>
</span><span id="line-1694"></span><span>
</span><span id="line-1695"></span><span>
</span><span id="line-1696"></span><span>
</span><span id="line-1697"></span><span class="hs-comment">-- | Returns the next notification from a list of unhandled</span><span>
</span><span id="line-1698"></span><span class="hs-comment">-- notification messages received from the server. It returns a</span><span>
</span><span id="line-1699"></span><span class="hs-comment">-- 'Nothing' if there are no pending notifications. Once a</span><span>
</span><span id="line-1700"></span><span class="hs-comment">-- notification is returned from notifies, it is considered handled</span><span>
</span><span id="line-1701"></span><span class="hs-comment">-- and will be removed from the list of notifications.</span><span>
</span><span id="line-1702"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#notifies"><span class="hs-identifier hs-type">notifies</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-1703"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Notify.html#Notify"><span class="hs-identifier hs-type">Notify</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1704"></span><span id="notifies"><span class="annot"><span class="annottext">notifies :: Connection -&gt; IO (Maybe Notify)
</span><a href="Database.PostgreSQL.LibPQ.html#notifies"><span class="hs-identifier hs-var hs-var">notifies</span></a></span></span><span> </span><span id="local-6989586621679046541"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046541"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1705"></span><span>    </span><span class="annot"><span class="annottext">Connection
-&gt; (Ptr PGconn -&gt; IO (Maybe Notify)) -&gt; IO (Maybe Notify)
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046541"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO (Maybe Notify)) -&gt; IO (Maybe Notify))
-&gt; (Ptr PGconn -&gt; IO (Maybe Notify)) -&gt; IO (Maybe Notify)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046540"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046540"><span class="hs-identifier hs-var">ptr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1706"></span><span>        </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679046539"><span class="annot"><span class="annottext">Ptr Notify
</span><a href="#local-6989586621679046539"><span class="hs-identifier hs-var">mn</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO (Ptr Notify)
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQnotifies"><span class="hs-identifier hs-var">c_PQnotifies</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046540"><span class="hs-identifier hs-var">ptr</span></a></span><span>
</span><span id="line-1707"></span><span>           </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Ptr Notify
</span><a href="#local-6989586621679046539"><span class="hs-identifier hs-var">mn</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Notify -&gt; Ptr Notify -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Notify
forall a. Ptr a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">nullPtr</span></a></span><span>
</span><span id="line-1708"></span><span>             </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Maybe Notify -&gt; IO (Maybe Notify)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Notify
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1709"></span><span>             </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1710"></span><span>                     </span><span id="local-6989586621679046537"><span class="annot"><span class="annottext">Maybe Notify
</span><a href="#local-6989586621679046537"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Notify -&gt; Maybe Notify
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(Notify -&gt; Maybe Notify) -&gt; IO Notify -&gt; IO (Maybe Notify)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`fmap`</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Notify -&gt; IO Notify
forall a. Storable a =&gt; Ptr a -&gt; IO a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">peek</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Notify
</span><a href="#local-6989586621679046539"><span class="hs-identifier hs-var">mn</span></a></span><span>
</span><span id="line-1711"></span><span>                     </span><span class="annot"><span class="annottext">Ptr Notify -&gt; IO ()
forall a. Ptr a -&gt; IO ()
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQfreemem"><span class="hs-identifier hs-var">c_PQfreemem</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Notify
</span><a href="#local-6989586621679046539"><span class="hs-identifier hs-var">mn</span></a></span><span>
</span><span id="line-1712"></span><span>                     </span><span class="annot"><span class="annottext">Maybe Notify -&gt; IO (Maybe Notify)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Notify
</span><a href="#local-6989586621679046537"><span class="hs-identifier hs-var">result</span></a></span><span>
</span><span id="line-1713"></span><span>
</span><span id="line-1714"></span><span>
</span><span id="line-1715"></span><span class="hs-comment">-- $control</span><span>
</span><span id="line-1716"></span><span class="hs-comment">-- These functions control miscellaneous details of libpq's behavior.</span><span>
</span><span id="line-1717"></span><span>
</span><span id="line-1718"></span><span class="hs-comment">-- | Returns the client encoding.</span><span>
</span><span id="line-1719"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#clientEncoding"><span class="hs-identifier hs-type">clientEncoding</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-1720"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span>
</span><span id="line-1721"></span><span id="clientEncoding"><span class="annot"><span class="annottext">clientEncoding :: Connection -&gt; IO ByteString
</span><a href="Database.PostgreSQL.LibPQ.html#clientEncoding"><span class="hs-identifier hs-var hs-var">clientEncoding</span></a></span></span><span> </span><span id="local-6989586621679046536"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046536"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1722"></span><span>    </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO ByteString) -&gt; IO ByteString
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046536"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO ByteString) -&gt; IO ByteString)
-&gt; (Ptr PGconn -&gt; IO ByteString) -&gt; IO ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046535"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046535"><span class="hs-identifier hs-var">ptr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1723"></span><span>        </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679046534"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046534"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQclientEncoding"><span class="hs-identifier hs-var">c_PQclientEncoding</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046535"><span class="hs-identifier hs-var">ptr</span></a></span><span>
</span><span id="line-1724"></span><span>           </span><span id="local-6989586621679046532"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046532"><span class="hs-identifier hs-var">cstr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CInt -&gt; IO CString
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_pg_encoding_to_char"><span class="hs-identifier hs-var">c_pg_encoding_to_char</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046534"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-1725"></span><span>           </span><span id="local-6989586621679046530"><span class="annot"><span class="annottext">CSize
</span><a href="#local-6989586621679046530"><span class="hs-identifier hs-var">len</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CString -&gt; IO CSize
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.c_strlen</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046532"><span class="hs-identifier hs-var">cstr</span></a></span><span>
</span><span id="line-1726"></span><span>           </span><span id="local-6989586621679046529"><span class="annot"><span class="annottext">ForeignPtr Word8
</span><a href="#local-6989586621679046529"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr Word8 -&gt; IO (ForeignPtr Word8)
forall a. Ptr a -&gt; IO (ForeignPtr a)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">newForeignPtr_</span></a></span><span> </span><span class="annot"><span class="annottext">(Ptr Word8 -&gt; IO (ForeignPtr Word8))
-&gt; Ptr Word8 -&gt; IO (ForeignPtr Word8)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CString -&gt; Ptr Word8
forall a b. Ptr a -&gt; Ptr b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">castPtr</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046532"><span class="hs-identifier hs-var">cstr</span></a></span><span>
</span><span id="line-1727"></span><span>           </span><span class="annot"><span class="annottext">ByteString -&gt; IO ByteString
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; IO ByteString) -&gt; ByteString -&gt; IO ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr Word8 -&gt; Int -&gt; Int -&gt; ByteString
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.fromForeignPtr</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr Word8
</span><a href="#local-6989586621679046529"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; ByteString) -&gt; Int -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CSize -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">CSize
</span><a href="#local-6989586621679046530"><span class="hs-identifier hs-var">len</span></a></span><span>
</span><span id="line-1728"></span><span>
</span><span id="line-1729"></span><span>
</span><span id="line-1730"></span><span class="hs-comment">-- | Sets the client encoding.</span><span>
</span><span id="line-1731"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#setClientEncoding"><span class="hs-identifier hs-type">setClientEncoding</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-1732"></span><span id="setClientEncoding"><span class="annot"><span class="annottext">setClientEncoding :: Connection -&gt; ByteString -&gt; IO Bool
</span><a href="Database.PostgreSQL.LibPQ.html#setClientEncoding"><span class="hs-identifier hs-var hs-var">setClientEncoding</span></a></span></span><span> </span><span id="local-6989586621679046528"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046528"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span id="local-6989586621679046527"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046527"><span class="hs-identifier hs-var">enc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1733"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679046526"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046526"><span class="hs-identifier hs-var">stat</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO CInt
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046528"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO CInt) -&gt; IO CInt)
-&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO CInt
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046525"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046525"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1734"></span><span>               </span><span class="annot"><span class="annottext">ByteString -&gt; (CString -&gt; IO CInt) -&gt; IO CInt
forall a. ByteString -&gt; (CString -&gt; IO a) -&gt; IO a
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.useAsCString</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046527"><span class="hs-identifier hs-var">enc</span></a></span><span> </span><span class="annot"><span class="annottext">((CString -&gt; IO CInt) -&gt; IO CInt)
-&gt; (CString -&gt; IO CInt) -&gt; IO CInt
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046524"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046524"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1735"></span><span>                   </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; CString -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQsetClientEncoding"><span class="hs-identifier hs-var">c_PQsetClientEncoding</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046525"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046524"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-1736"></span><span>
</span><span id="line-1737"></span><span>       </span><span class="annot"><span class="annottext">Bool -&gt; IO Bool
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; IO Bool) -&gt; Bool -&gt; IO Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046526"><span class="hs-identifier hs-var">stat</span></a></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; CInt -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><span class="hs-number">0</span></span><span>
</span><span id="line-1738"></span><span>
</span><span id="line-1739"></span><span>
</span><span id="line-1740"></span><span class="hs-comment">-- | Determines the verbosity of messages returned by 'errorMessage'</span><span>
</span><span id="line-1741"></span><span class="hs-comment">-- and 'resultErrorMessage'.</span><span>
</span><span id="line-1742"></span><span class="hs-comment">--</span><span>
</span><span id="line-1743"></span><span class="hs-comment">-- 'setErrorVerbosity' sets the verbosity mode, returning the</span><span>
</span><span id="line-1744"></span><span class="hs-comment">-- connection's previous setting. In 'ErrorsTerse' mode, returned</span><span>
</span><span id="line-1745"></span><span class="hs-comment">-- messages include severity, primary text, and position only; this</span><span>
</span><span id="line-1746"></span><span class="hs-comment">-- will normally fit on a single line. The default mode produces</span><span>
</span><span id="line-1747"></span><span class="hs-comment">-- messages that include the above plus any detail, hint, or context</span><span>
</span><span id="line-1748"></span><span class="hs-comment">-- fields (these might span multiple lines). The 'ErrorsVerbose' mode</span><span>
</span><span id="line-1749"></span><span class="hs-comment">-- includes all available fields. Changing the verbosity does not</span><span>
</span><span id="line-1750"></span><span class="hs-comment">-- affect the messages available from already-existing 'Result'</span><span>
</span><span id="line-1751"></span><span class="hs-comment">-- objects, only subsequently-created ones.</span><span>
</span><span id="line-1752"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#setErrorVerbosity"><span class="hs-identifier hs-type">setErrorVerbosity</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-1753"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Enums.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span>
</span><span id="line-1754"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Enums.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span>
</span><span id="line-1755"></span><span id="setErrorVerbosity"><span class="annot"><span class="annottext">setErrorVerbosity :: Connection -&gt; Verbosity -&gt; IO Verbosity
</span><a href="Database.PostgreSQL.LibPQ.html#setErrorVerbosity"><span class="hs-identifier hs-var hs-var">setErrorVerbosity</span></a></span></span><span> </span><span id="local-6989586621679046522"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046522"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span id="local-6989586621679046521"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679046521"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1756"></span><span>    </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO Verbosity
forall b.
FromCInt b =&gt;
Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#enumFromConn"><span class="hs-identifier hs-var">enumFromConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046522"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO CInt) -&gt; IO Verbosity)
-&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO Verbosity
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046520"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046520"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1757"></span><span>        </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; CInt -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQsetErrorVerbosity"><span class="hs-identifier hs-var">c_PQsetErrorVerbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046520"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">(CInt -&gt; IO CInt) -&gt; CInt -&gt; IO CInt
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; CInt
forall a. ToCInt a =&gt; a -&gt; CInt
</span><a href="Database.PostgreSQL.LibPQ.Enums.html#toCInt"><span class="hs-identifier hs-var">toCInt</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679046521"><span class="hs-identifier hs-var">verbosity</span></a></span><span>
</span><span id="line-1758"></span><span>
</span><span id="line-1759"></span><span id="local-6989586621679047396"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#enumFromConn"><span class="hs-identifier hs-type">enumFromConn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Enums.html#FromCInt"><span class="hs-identifier hs-type">FromCInt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679047396"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-1760"></span><span>             </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-1761"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Ptr</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#PGconn"><span class="hs-identifier hs-type">PGconn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">CInt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1762"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679047396"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1763"></span><span id="enumFromConn"><span class="annot"><span class="annottext">enumFromConn :: Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#enumFromConn"><span class="hs-identifier hs-var hs-var">enumFromConn</span></a></span></span><span> </span><span id="local-6989586621679046518"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046518"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span id="local-6989586621679046517"><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO CInt
</span><a href="#local-6989586621679046517"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO CInt) -&gt; IO CInt
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046518"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO CInt
</span><a href="#local-6989586621679046517"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">IO CInt -&gt; (CInt -&gt; IO b) -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">IO b -&gt; (b -&gt; IO b) -&gt; Maybe b -&gt; IO b
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; IO b
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fail</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;enumFromConn&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">b -&gt; IO b
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe b -&gt; IO b) -&gt; (CInt -&gt; Maybe b) -&gt; CInt -&gt; IO b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; Maybe b
forall a. FromCInt a =&gt; CInt -&gt; Maybe a
</span><a href="Database.PostgreSQL.LibPQ.Enums.html#fromCInt"><span class="hs-identifier hs-var">fromCInt</span></a></span><span>
</span><span id="line-1764"></span><span>
</span><span id="line-1765"></span><span>
</span><span id="line-1766"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#resultFromConn"><span class="hs-identifier hs-type">resultFromConn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span>
</span><span id="line-1767"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Ptr</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#PGconn"><span class="hs-identifier hs-type">PGconn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Ptr</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.FFI.html#PGresult"><span class="hs-identifier hs-type">PGresult</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1768"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1769"></span><span id="resultFromConn"><span class="annot"><span class="annottext">resultFromConn :: Connection
-&gt; (Ptr PGconn -&gt; IO (Ptr PGresult)) -&gt; IO (Maybe Result)
</span><a href="Database.PostgreSQL.LibPQ.html#resultFromConn"><span class="hs-identifier hs-var hs-var">resultFromConn</span></a></span></span><span> </span><span id="local-6989586621679046516"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046516"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span id="local-6989586621679046515"><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO (Ptr PGresult)
</span><a href="#local-6989586621679046515"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1770"></span><span>    </span><span class="annot"><span class="annottext">IO (Maybe Result) -&gt; IO (Maybe Result)
forall a. IO a -&gt; IO a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mask_</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Maybe Result) -&gt; IO (Maybe Result))
-&gt; IO (Maybe Result) -&gt; IO (Maybe Result)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1771"></span><span>       </span><span id="local-6989586621679046514"><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046514"><span class="hs-identifier hs-var">resPtr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Connection
-&gt; (Ptr PGconn -&gt; IO (Ptr PGresult)) -&gt; IO (Ptr PGresult)
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046516"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; IO (Ptr PGresult)
</span><a href="#local-6989586621679046515"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-1772"></span><span>       </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046514"><span class="hs-identifier hs-var">resPtr</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult -&gt; Ptr PGresult -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult
forall a. Ptr a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">nullPtr</span></a></span><span>
</span><span id="line-1773"></span><span>           </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Maybe Result -&gt; IO (Maybe Result)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Result
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1774"></span><span>           </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Result -&gt; Maybe Result
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(Result -&gt; Maybe Result)
-&gt; (ForeignPtr PGresult -&gt; Result)
-&gt; ForeignPtr PGresult
-&gt; Maybe Result
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr PGresult -&gt; Result
</span><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-var">Result</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ForeignPtr PGresult -&gt; Maybe Result)
-&gt; IO (ForeignPtr PGresult) -&gt; IO (Maybe Result)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`fmap`</span></a></span><span> </span><span class="annot"><span class="annottext">FinalizerPtr PGresult -&gt; Ptr PGresult -&gt; IO (ForeignPtr PGresult)
forall a. FinalizerPtr a -&gt; Ptr a -&gt; IO (ForeignPtr a)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">newForeignPtr</span></a></span><span> </span><span class="annot"><span class="annottext">FinalizerPtr PGresult
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#p_PQclear"><span class="hs-identifier hs-var">p_PQclear</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult
</span><a href="#local-6989586621679046514"><span class="hs-identifier hs-var">resPtr</span></a></span><span>
</span><span id="line-1775"></span><span>
</span><span id="line-1776"></span><span>
</span><span id="line-1777"></span><span id="local-6989586621679047339"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#withResult"><span class="hs-identifier hs-type">withResult</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span>
</span><span id="line-1778"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Ptr</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.FFI.html#PGresult"><span class="hs-identifier hs-type">PGresult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679047339"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1779"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679047339"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1780"></span><span id="withResult"><span class="annot"><span class="annottext">withResult :: Result -&gt; (Ptr PGresult -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#withResult"><span class="hs-identifier hs-var hs-var">withResult</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span> </span><span id="local-6989586621679046513"><span class="annot"><span class="annottext">ForeignPtr PGresult
</span><a href="#local-6989586621679046513"><span class="hs-identifier hs-var">fp</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679046512"><span class="annot"><span class="annottext">Ptr PGresult -&gt; IO b
</span><a href="#local-6989586621679046512"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignPtr PGresult -&gt; (Ptr PGresult -&gt; IO b) -&gt; IO b
forall a b. ForeignPtr a -&gt; (Ptr a -&gt; IO b) -&gt; IO b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">withForeignPtr</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr PGresult
</span><a href="#local-6989586621679046513"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult -&gt; IO b
</span><a href="#local-6989586621679046512"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-1781"></span><span>
</span><span id="line-1782"></span><span>
</span><span id="line-1783"></span><span id="local-6989586621679047328"><span id="local-6989586621679047329"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#numFromResult"><span class="hs-identifier hs-type">numFromResult</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Integral</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679047329"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Num</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679047328"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span>
</span><span id="line-1784"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Ptr</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.FFI.html#PGresult"><span class="hs-identifier hs-type">PGresult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679047329"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1785"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679047328"><span class="hs-identifier hs-type">b</span></a></span></span></span><span>
</span><span id="line-1786"></span><span id="numFromResult"><span class="annot"><span class="annottext">numFromResult :: Result -&gt; (Ptr PGresult -&gt; IO a) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#numFromResult"><span class="hs-identifier hs-var hs-var">numFromResult</span></a></span></span><span> </span><span id="local-6989586621679046511"><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046511"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span id="local-6989586621679046510"><span class="annot"><span class="annottext">Ptr PGresult -&gt; IO a
</span><a href="#local-6989586621679046510"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; IO a -&gt; IO b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(IO a -&gt; IO b) -&gt; IO a -&gt; IO b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Result -&gt; (Ptr PGresult -&gt; IO a) -&gt; IO a
forall b. Result -&gt; (Ptr PGresult -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#withResult"><span class="hs-identifier hs-var">withResult</span></a></span><span> </span><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046511"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult -&gt; IO a
</span><a href="#local-6989586621679046510"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-1787"></span><span>
</span><span id="line-1788"></span><span>
</span><span id="line-1789"></span><span id="local-6989586621679047349"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#enumFromResult"><span class="hs-identifier hs-type">enumFromResult</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Enums.html#FromCInt"><span class="hs-identifier hs-type">FromCInt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679047349"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-1790"></span><span>               </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span>
</span><span id="line-1791"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Ptr</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.FFI.html#PGresult"><span class="hs-identifier hs-type">PGresult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">CInt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1792"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679047349"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1793"></span><span id="enumFromResult"><span class="annot"><span class="annottext">enumFromResult :: Result -&gt; (Ptr PGresult -&gt; IO CInt) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#enumFromResult"><span class="hs-identifier hs-var hs-var">enumFromResult</span></a></span></span><span> </span><span id="local-6989586621679046509"><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046509"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span id="local-6989586621679046508"><span class="annot"><span class="annottext">Ptr PGresult -&gt; IO CInt
</span><a href="#local-6989586621679046508"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Result -&gt; (Ptr PGresult -&gt; IO CInt) -&gt; IO CInt
forall b. Result -&gt; (Ptr PGresult -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.html#withResult"><span class="hs-identifier hs-var">withResult</span></a></span><span> </span><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679046509"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult -&gt; IO CInt
</span><a href="#local-6989586621679046508"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">IO CInt -&gt; (CInt -&gt; IO b) -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">IO b -&gt; (b -&gt; IO b) -&gt; Maybe b -&gt; IO b
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; IO b
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fail</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;enumFromResult&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">b -&gt; IO b
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe b -&gt; IO b) -&gt; (CInt -&gt; Maybe b) -&gt; CInt -&gt; IO b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; Maybe b
forall a. FromCInt a =&gt; CInt -&gt; Maybe a
</span><a href="Database.PostgreSQL.LibPQ.Enums.html#fromCInt"><span class="hs-identifier hs-var">fromCInt</span></a></span><span>
</span><span id="line-1794"></span><span>
</span><span id="line-1795"></span><span>
</span><span id="line-1796"></span><span class="hs-comment">-- | Returns a ByteString with a finalizer that touches the ForeignPtr</span><span>
</span><span id="line-1797"></span><span class="hs-comment">-- PGresult that \&quot;owns\&quot; the CString to keep it alive.</span><span>
</span><span id="line-1798"></span><span class="hs-comment">--</span><span>
</span><span id="line-1799"></span><span class="hs-comment">-- The CString must be a null terminated c string. nullPtrs are</span><span>
</span><span id="line-1800"></span><span class="hs-comment">-- treated as 'Nothing'.</span><span>
</span><span id="line-1801"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#maybeBsFromResult"><span class="hs-identifier hs-type">maybeBsFromResult</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span>
</span><span id="line-1802"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Ptr</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.FFI.html#PGresult"><span class="hs-identifier hs-type">PGresult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">CString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1803"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1804"></span><span id="maybeBsFromResult"><span class="annot"><span class="annottext">maybeBsFromResult :: Result -&gt; (Ptr PGresult -&gt; IO CString) -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#maybeBsFromResult"><span class="hs-identifier hs-var hs-var">maybeBsFromResult</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span> </span><span id="local-6989586621679046507"><span class="annot"><span class="annottext">ForeignPtr PGresult
</span><a href="#local-6989586621679046507"><span class="hs-identifier hs-var">res</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679046506"><span class="annot"><span class="annottext">Ptr PGresult -&gt; IO CString
</span><a href="#local-6989586621679046506"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignPtr PGresult
-&gt; (Ptr PGresult -&gt; IO CString) -&gt; IO (Maybe ByteString)
forall a.
ForeignPtr a -&gt; (Ptr a -&gt; IO CString) -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#maybeBsFromForeignPtr"><span class="hs-identifier hs-var">maybeBsFromForeignPtr</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr PGresult
</span><a href="#local-6989586621679046507"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGresult -&gt; IO CString
</span><a href="#local-6989586621679046506"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-1805"></span><span>
</span><span id="line-1806"></span><span class="hs-comment">-- | Returns a ByteString with a finalizer that touches the ForeignPtr</span><span>
</span><span id="line-1807"></span><span class="hs-comment">-- that \&quot;owns\&quot; the CString to keep it alive.</span><span>
</span><span id="line-1808"></span><span class="hs-comment">--</span><span>
</span><span id="line-1809"></span><span class="hs-comment">-- The CString must be a null terminated c string. nullPtrs are</span><span>
</span><span id="line-1810"></span><span class="hs-comment">-- treated as 'Nothing'.</span><span>
</span><span id="line-1811"></span><span id="local-6989586621679047341"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#maybeBsFromForeignPtr"><span class="hs-identifier hs-type">maybeBsFromForeignPtr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">ForeignPtr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679047341"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1812"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Ptr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679047341"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">CString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1813"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1814"></span><span id="maybeBsFromForeignPtr"><span class="annot"><span class="annottext">maybeBsFromForeignPtr :: ForeignPtr a -&gt; (Ptr a -&gt; IO CString) -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#maybeBsFromForeignPtr"><span class="hs-identifier hs-var hs-var">maybeBsFromForeignPtr</span></a></span></span><span> </span><span id="local-6989586621679046505"><span class="annot"><span class="annottext">ForeignPtr a
</span><a href="#local-6989586621679046505"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span id="local-6989586621679046504"><span class="annot"><span class="annottext">Ptr a -&gt; IO CString
</span><a href="#local-6989586621679046504"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1815"></span><span>    </span><span class="annot"><span class="annottext">ForeignPtr a
-&gt; (Ptr a -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall a b. ForeignPtr a -&gt; (Ptr a -&gt; IO b) -&gt; IO b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">withForeignPtr</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr a
</span><a href="#local-6989586621679046505"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr a -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString))
-&gt; (Ptr a -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046503"><span class="annot"><span class="annottext">Ptr a
</span><a href="#local-6989586621679046503"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1816"></span><span>        </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679046502"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046502"><span class="hs-identifier hs-var">cstr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr a -&gt; IO CString
</span><a href="#local-6989586621679046504"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr a
</span><a href="#local-6989586621679046503"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1817"></span><span>           </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046502"><span class="hs-identifier hs-var">cstr</span></a></span><span> </span><span class="annot"><span class="annottext">CString -&gt; CString -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">CString
forall a. Ptr a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">nullPtr</span></a></span><span>
</span><span id="line-1818"></span><span>             </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Maybe ByteString -&gt; IO (Maybe ByteString)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ByteString
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1819"></span><span>             </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679046501"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679046501"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CSize -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(CSize -&gt; Int) -&gt; IO CSize -&gt; IO Int
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`fmap`</span></a></span><span> </span><span class="annot"><span class="annottext">CString -&gt; IO CSize
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.c_strlen</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046502"><span class="hs-identifier hs-var">cstr</span></a></span><span>
</span><span id="line-1820"></span><span>                     </span><span id="local-6989586621679046500"><span class="annot"><span class="annottext">ForeignPtr Word8
</span><a href="#local-6989586621679046500"><span class="hs-identifier hs-var">fp'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr Word8 -&gt; IO () -&gt; IO (ForeignPtr Word8)
forall a. Ptr a -&gt; IO () -&gt; IO (ForeignPtr a)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">FC.newForeignPtr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CString -&gt; Ptr Word8
forall a b. Ptr a -&gt; Ptr b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">castPtr</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046502"><span class="hs-identifier hs-var">cstr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679046499"><span class="hs-identifier hs-var">finalizer</span></a></span><span>
</span><span id="line-1821"></span><span>                     </span><span class="annot"><span class="annottext">Maybe ByteString -&gt; IO (Maybe ByteString)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe ByteString -&gt; IO (Maybe ByteString))
-&gt; Maybe ByteString -&gt; IO (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Maybe ByteString
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Maybe ByteString) -&gt; ByteString -&gt; Maybe ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr Word8 -&gt; Int -&gt; Int -&gt; ByteString
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.fromForeignPtr</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr Word8
</span><a href="#local-6989586621679046500"><span class="hs-identifier hs-var">fp'</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679046501"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1822"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-1823"></span><span>      </span><span id="local-6989586621679046499"><span class="annot"><span class="annottext">finalizer :: IO ()
</span><a href="#local-6989586621679046499"><span class="hs-identifier hs-var hs-var">finalizer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignPtr a -&gt; IO ()
forall a. ForeignPtr a -&gt; IO ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">touchForeignPtr</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr a
</span><a href="#local-6989586621679046505"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-1824"></span><span>
</span><span id="line-1825"></span><span class="hs-comment">-- -- | Returns a ByteString with a finalizer that touches the ForeignPtr</span><span>
</span><span id="line-1826"></span><span class="hs-comment">-- -- that \&quot;owns\&quot; the CStringLen to keep it alive.</span><span>
</span><span id="line-1827"></span><span class="hs-comment">-- bsFromForeignPtrLen :: ForeignPtr a</span><span>
</span><span id="line-1828"></span><span class="hs-comment">--                     -&gt; (Ptr a -&gt; IO CStringLen)</span><span>
</span><span id="line-1829"></span><span class="hs-comment">--                     -&gt; IO B.ByteString</span><span>
</span><span id="line-1830"></span><span class="hs-comment">-- bsFromForeignPtrLen fp f =</span><span>
</span><span id="line-1831"></span><span class="hs-comment">--     withForeignPtr fp $ \p -&gt;</span><span>
</span><span id="line-1832"></span><span class="hs-comment">--         do (cstr, l) &lt;- f p</span><span>
</span><span id="line-1833"></span><span class="hs-comment">--            if cstr == nullPtr</span><span>
</span><span id="line-1834"></span><span class="hs-comment">--              then return &quot;&quot;</span><span>
</span><span id="line-1835"></span><span class="hs-comment">--              else do fp' &lt;- FC.newForeignPtr (castPtr cstr) finalizer</span><span>
</span><span id="line-1836"></span><span class="hs-comment">--                      return $ B.fromForeignPtr fp' 0 l</span><span>
</span><span id="line-1837"></span><span class="hs-comment">--     where</span><span>
</span><span id="line-1838"></span><span class="hs-comment">--       finalizer = touchForeignPtr fp</span><span>
</span><span id="line-1839"></span><span>
</span><span id="line-1840"></span><span>
</span><span id="line-1841"></span><span class="hs-comment">-- | Upon connection initialization, any notices received from the server are</span><span>
</span><span id="line-1842"></span><span class="hs-comment">--   normally written to the console.  Notices are akin to warnings, and</span><span>
</span><span id="line-1843"></span><span class="hs-comment">--   are distinct from notifications.  This function suppresses notices.</span><span>
</span><span id="line-1844"></span><span class="hs-comment">--   You may later call 'enableNoticeReporting' after calling this function.</span><span>
</span><span id="line-1845"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#disableNoticeReporting"><span class="hs-identifier hs-type">disableNoticeReporting</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1846"></span><span id="disableNoticeReporting"><span class="annot"><span class="annottext">disableNoticeReporting :: Connection -&gt; IO ()
</span><a href="Database.PostgreSQL.LibPQ.html#disableNoticeReporting"><span class="hs-identifier hs-var hs-var">disableNoticeReporting</span></a></span></span><span> </span><span id="local-6989586621679046498"><span class="annot"><span class="annottext">conn :: Connection
</span><a href="#local-6989586621679046498"><span class="hs-identifier hs-var">conn</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Conn"><span class="hs-identifier hs-type">Conn</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr PGconn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679046497"><span class="annot"><span class="annottext">MVar (Ptr CNoticeBuffer)
</span><a href="#local-6989586621679046497"><span class="hs-identifier hs-var">nbRef</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1847"></span><span>    </span><span class="annot"><span class="annottext">FunPtr NoticeReceiver
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Connection
-&gt; (Ptr PGconn -&gt; IO (FunPtr NoticeReceiver))
-&gt; IO (FunPtr NoticeReceiver)
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046498"><span class="hs-identifier hs-var">conn</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO (FunPtr NoticeReceiver))
 -&gt; IO (FunPtr NoticeReceiver))
-&gt; (Ptr PGconn -&gt; IO (FunPtr NoticeReceiver))
-&gt; IO (FunPtr NoticeReceiver)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046496"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046496"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
-&gt; FunPtr NoticeReceiver
-&gt; Ptr CNoticeBuffer
-&gt; IO (FunPtr NoticeReceiver)
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQsetNoticeReceiver"><span class="hs-identifier hs-var">c_PQsetNoticeReceiver</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046496"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">FunPtr NoticeReceiver
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#p_discard_notices"><span class="hs-identifier hs-var">p_discard_notices</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr CNoticeBuffer
forall a. Ptr a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">nullPtr</span></a></span><span>
</span><span id="line-1848"></span><span>    </span><span id="local-6989586621679046493"><span class="annot"><span class="annottext">Ptr CNoticeBuffer
</span><a href="#local-6989586621679046493"><span class="hs-identifier hs-var">nb</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MVar (Ptr CNoticeBuffer)
-&gt; Ptr CNoticeBuffer -&gt; IO (Ptr CNoticeBuffer)
forall a. MVar a -&gt; a -&gt; IO a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">swapMVar</span></a></span><span> </span><span class="annot"><span class="annottext">MVar (Ptr CNoticeBuffer)
</span><a href="#local-6989586621679046497"><span class="hs-identifier hs-var">nbRef</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr CNoticeBuffer
forall a. Ptr a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">nullPtr</span></a></span><span>
</span><span id="line-1849"></span><span>    </span><span class="annot"><span class="annottext">Ptr CNoticeBuffer -&gt; IO ()
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_free_noticebuffer"><span class="hs-identifier hs-var">c_free_noticebuffer</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr CNoticeBuffer
</span><a href="#local-6989586621679046493"><span class="hs-identifier hs-var">nb</span></a></span><span>
</span><span id="line-1850"></span><span>
</span><span id="line-1851"></span><span class="hs-comment">-- | Upon connection initialization, any notices received from the server are</span><span>
</span><span id="line-1852"></span><span class="hs-comment">--   normally written to the console.  Notices are akin to warnings, and</span><span>
</span><span id="line-1853"></span><span class="hs-comment">--   are distinct from notifications.  This function enables notices to be</span><span>
</span><span id="line-1854"></span><span class="hs-comment">--   programmatically retreived using the 'getNotice' function.   You may</span><span>
</span><span id="line-1855"></span><span class="hs-comment">--   later call 'disableNoticeReporting' after calling this function.</span><span>
</span><span id="line-1856"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#enableNoticeReporting"><span class="hs-identifier hs-type">enableNoticeReporting</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1857"></span><span id="enableNoticeReporting"><span class="annot"><span class="annottext">enableNoticeReporting :: Connection -&gt; IO ()
</span><a href="Database.PostgreSQL.LibPQ.html#enableNoticeReporting"><span class="hs-identifier hs-var hs-var">enableNoticeReporting</span></a></span></span><span> </span><span id="local-6989586621679046492"><span class="annot"><span class="annottext">conn :: Connection
</span><a href="#local-6989586621679046492"><span class="hs-identifier hs-var">conn</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Conn"><span class="hs-identifier hs-type">Conn</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr PGconn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679046491"><span class="annot"><span class="annottext">MVar (Ptr CNoticeBuffer)
</span><a href="#local-6989586621679046491"><span class="hs-identifier hs-var">nbRef</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1858"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; Bool
</span><a href="Database.PostgreSQL.LibPQ.html#isNullConnection"><span class="hs-identifier hs-var">isNullConnection</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046492"><span class="hs-identifier hs-var">conn</span></a></span><span>
</span><span id="line-1859"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1860"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1861"></span><span>      </span><span id="local-6989586621679046490"><span class="annot"><span class="annottext">Ptr CNoticeBuffer
</span><a href="#local-6989586621679046490"><span class="hs-identifier hs-var">nb'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (Ptr CNoticeBuffer)
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_malloc_noticebuffer"><span class="hs-identifier hs-var">c_malloc_noticebuffer</span></a></span><span>
</span><span id="line-1862"></span><span>      </span><span class="annot"><span class="annottext">FunPtr NoticeReceiver
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Connection
-&gt; (Ptr PGconn -&gt; IO (FunPtr NoticeReceiver))
-&gt; IO (FunPtr NoticeReceiver)
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046492"><span class="hs-identifier hs-var">conn</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO (FunPtr NoticeReceiver))
 -&gt; IO (FunPtr NoticeReceiver))
-&gt; (Ptr PGconn -&gt; IO (FunPtr NoticeReceiver))
-&gt; IO (FunPtr NoticeReceiver)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046488"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046488"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
-&gt; FunPtr NoticeReceiver
-&gt; Ptr CNoticeBuffer
-&gt; IO (FunPtr NoticeReceiver)
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_PQsetNoticeReceiver"><span class="hs-identifier hs-var">c_PQsetNoticeReceiver</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046488"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">FunPtr NoticeReceiver
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#p_store_notices"><span class="hs-identifier hs-var">p_store_notices</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr CNoticeBuffer
</span><a href="#local-6989586621679046490"><span class="hs-identifier hs-var">nb'</span></a></span><span>
</span><span id="line-1863"></span><span>      </span><span id="local-6989586621679046486"><span class="annot"><span class="annottext">Ptr CNoticeBuffer
</span><a href="#local-6989586621679046486"><span class="hs-identifier hs-var">nb</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MVar (Ptr CNoticeBuffer)
-&gt; Ptr CNoticeBuffer -&gt; IO (Ptr CNoticeBuffer)
forall a. MVar a -&gt; a -&gt; IO a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">swapMVar</span></a></span><span> </span><span class="annot"><span class="annottext">MVar (Ptr CNoticeBuffer)
</span><a href="#local-6989586621679046491"><span class="hs-identifier hs-var">nbRef</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr CNoticeBuffer
</span><a href="#local-6989586621679046490"><span class="hs-identifier hs-var">nb'</span></a></span><span>
</span><span id="line-1864"></span><span>      </span><span class="annot"><span class="annottext">Ptr CNoticeBuffer -&gt; IO ()
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_free_noticebuffer"><span class="hs-identifier hs-var">c_free_noticebuffer</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr CNoticeBuffer
</span><a href="#local-6989586621679046486"><span class="hs-identifier hs-var">nb</span></a></span><span>
</span><span id="line-1865"></span><span>
</span><span id="line-1866"></span><span class="hs-comment">-- |  This function retrieves any notices received from the backend.</span><span>
</span><span id="line-1867"></span><span class="hs-comment">--    Because multiple notices can be received at a time,  you will</span><span>
</span><span id="line-1868"></span><span class="hs-comment">--    typically want to call this function in a loop until you get</span><span>
</span><span id="line-1869"></span><span class="hs-comment">--    back a 'Nothing'.</span><span>
</span><span id="line-1870"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#getNotice"><span class="hs-identifier hs-type">getNotice</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1871"></span><span id="getNotice"><span class="annot"><span class="annottext">getNotice :: Connection -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#getNotice"><span class="hs-identifier hs-var hs-var">getNotice</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Conn"><span class="hs-identifier hs-type">Conn</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr PGconn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679046485"><span class="annot"><span class="annottext">MVar (Ptr CNoticeBuffer)
</span><a href="#local-6989586621679046485"><span class="hs-identifier hs-var">nbRef</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1872"></span><span>    </span><span class="annot"><span class="annottext">MVar (Ptr CNoticeBuffer)
-&gt; (Ptr CNoticeBuffer -&gt; IO (Maybe ByteString))
-&gt; IO (Maybe ByteString)
forall a b. MVar a -&gt; (a -&gt; IO b) -&gt; IO b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">withMVar</span></a></span><span> </span><span class="annot"><span class="annottext">MVar (Ptr CNoticeBuffer)
</span><a href="#local-6989586621679046485"><span class="hs-identifier hs-var">nbRef</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr CNoticeBuffer -&gt; IO (Maybe ByteString))
 -&gt; IO (Maybe ByteString))
-&gt; (Ptr CNoticeBuffer -&gt; IO (Maybe ByteString))
-&gt; IO (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046484"><span class="annot"><span class="annottext">Ptr CNoticeBuffer
</span><a href="#local-6989586621679046484"><span class="hs-identifier hs-var">nb</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1873"></span><span>      </span><span id="local-6989586621679046483"><span class="annot"><span class="annottext">Ptr PGnotice
</span><a href="#local-6989586621679046483"><span class="hs-identifier hs-var">np</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr CNoticeBuffer -&gt; IO (Ptr PGnotice)
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_get_notice"><span class="hs-identifier hs-var">c_get_notice</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr CNoticeBuffer
</span><a href="#local-6989586621679046484"><span class="hs-identifier hs-var">nb</span></a></span><span>
</span><span id="line-1874"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Ptr PGnotice
</span><a href="#local-6989586621679046483"><span class="hs-identifier hs-var">np</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGnotice -&gt; Ptr PGnotice -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGnotice
forall a. Ptr a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">nullPtr</span></a></span><span>
</span><span id="line-1875"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Maybe ByteString -&gt; IO (Maybe ByteString)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ByteString
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1876"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1877"></span><span>          </span><span id="local-6989586621679046481"><span class="annot"><span class="annottext">ForeignPtr Word8
</span><a href="#local-6989586621679046481"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FinalizerPtr Word8 -&gt; Ptr Word8 -&gt; IO (ForeignPtr Word8)
forall a. FinalizerPtr a -&gt; Ptr a -&gt; IO (ForeignPtr a)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">newForeignPtr</span></a></span><span> </span><span class="annot"><span class="annottext">FinalizerPtr Word8
forall a. FunPtr (Ptr a -&gt; IO ())
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">finalizerFree</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ptr PGnotice -&gt; Ptr Word8
forall a b. Ptr a -&gt; Ptr b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">castPtr</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGnotice
</span><a href="#local-6989586621679046483"><span class="hs-identifier hs-var">np</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1878"></span><span>          </span><span id="local-6989586621679046480"><span class="annot"><span class="annottext">CSize
</span><a href="#local-6989586621679046480"><span class="hs-identifier hs-var">len</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr PGnotice -&gt; IO CSize
</span><a href="Database.PostgreSQL.LibPQ.Notify.html#pgNoticePeekLen"><span class="hs-identifier hs-var">pgNoticePeekLen</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGnotice
</span><a href="#local-6989586621679046483"><span class="hs-identifier hs-var">np</span></a></span><span>
</span><span id="line-1879"></span><span>          </span><span class="annot"><span class="annottext">Maybe ByteString -&gt; IO (Maybe ByteString)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe ByteString -&gt; IO (Maybe ByteString))
-&gt; Maybe ByteString -&gt; IO (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Maybe ByteString
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Maybe ByteString) -&gt; ByteString -&gt; Maybe ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr Word8 -&gt; Int -&gt; Int -&gt; ByteString
</span><a href="Database.PostgreSQL.LibPQ.Compat.html#mkPS"><span class="hs-identifier hs-var">mkPS</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr Word8
</span><a href="#local-6989586621679046481"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="Database.PostgreSQL.LibPQ.Notify.html#pgNoticeOffsetStr"><span class="hs-identifier hs-var">pgNoticeOffsetStr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CSize -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">CSize
</span><a href="#local-6989586621679046480"><span class="hs-identifier hs-var">len</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1880"></span><span>
</span><span id="line-1881"></span><span class="hs-comment">-- $largeobjects</span><span>
</span><span id="line-1882"></span><span>
</span><span id="line-1883"></span><span class="hs-comment">-- | LoFd is a Large Object (pseudo) File Descriptor.  It is understood by</span><span>
</span><span id="line-1884"></span><span class="hs-comment">-- libpq but not by operating system calls.</span><span>
</span><span id="line-1885"></span><span>
</span><span id="line-1886"></span><span class="hs-keyword">newtype</span><span> </span><span id="LoFd"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#LoFd"><span class="hs-identifier hs-var">LoFd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="LoFd"><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#LoFd"><span class="hs-identifier hs-var">LoFd</span></a></span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">CInt</span></a></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679046472"><span id="local-6989586621679046474"><span class="annot"><span class="annottext">LoFd -&gt; LoFd -&gt; Bool
(LoFd -&gt; LoFd -&gt; Bool) -&gt; (LoFd -&gt; LoFd -&gt; Bool) -&gt; Eq LoFd
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: LoFd -&gt; LoFd -&gt; Bool
$c/= :: LoFd -&gt; LoFd -&gt; Bool
== :: LoFd -&gt; LoFd -&gt; Bool
$c== :: LoFd -&gt; LoFd -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679046457"><span id="local-6989586621679046459"><span id="local-6989586621679046461"><span id="local-6989586621679046463"><span id="local-6989586621679046465"><span id="local-6989586621679046467"><span id="local-6989586621679046469"><span class="annot"><span class="annottext">Eq LoFd
Eq LoFd
-&gt; (LoFd -&gt; LoFd -&gt; Ordering)
-&gt; (LoFd -&gt; LoFd -&gt; Bool)
-&gt; (LoFd -&gt; LoFd -&gt; Bool)
-&gt; (LoFd -&gt; LoFd -&gt; Bool)
-&gt; (LoFd -&gt; LoFd -&gt; Bool)
-&gt; (LoFd -&gt; LoFd -&gt; LoFd)
-&gt; (LoFd -&gt; LoFd -&gt; LoFd)
-&gt; Ord LoFd
LoFd -&gt; LoFd -&gt; Bool
LoFd -&gt; LoFd -&gt; Ordering
LoFd -&gt; LoFd -&gt; LoFd
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: LoFd -&gt; LoFd -&gt; LoFd
$cmin :: LoFd -&gt; LoFd -&gt; LoFd
max :: LoFd -&gt; LoFd -&gt; LoFd
$cmax :: LoFd -&gt; LoFd -&gt; LoFd
&gt;= :: LoFd -&gt; LoFd -&gt; Bool
$c&gt;= :: LoFd -&gt; LoFd -&gt; Bool
&gt; :: LoFd -&gt; LoFd -&gt; Bool
$c&gt; :: LoFd -&gt; LoFd -&gt; Bool
&lt;= :: LoFd -&gt; LoFd -&gt; Bool
$c&lt;= :: LoFd -&gt; LoFd -&gt; Bool
&lt; :: LoFd -&gt; LoFd -&gt; Bool
$c&lt; :: LoFd -&gt; LoFd -&gt; Bool
compare :: LoFd -&gt; LoFd -&gt; Ordering
$ccompare :: LoFd -&gt; LoFd -&gt; Ordering
$cp1Ord :: Eq LoFd
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679046451"><span id="local-6989586621679046453"><span id="local-6989586621679046455"><span class="annot"><span class="annottext">Int -&gt; LoFd -&gt; String -&gt; String
[LoFd] -&gt; String -&gt; String
LoFd -&gt; String
(Int -&gt; LoFd -&gt; String -&gt; String)
-&gt; (LoFd -&gt; String) -&gt; ([LoFd] -&gt; String -&gt; String) -&gt; Show LoFd
forall a.
(Int -&gt; a -&gt; String -&gt; String)
-&gt; (a -&gt; String) -&gt; ([a] -&gt; String -&gt; String) -&gt; Show a
showList :: [LoFd] -&gt; String -&gt; String
$cshowList :: [LoFd] -&gt; String -&gt; String
show :: LoFd -&gt; String
$cshow :: LoFd -&gt; String
showsPrec :: Int -&gt; LoFd -&gt; String -&gt; String
$cshowsPrec :: Int -&gt; LoFd -&gt; String -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1887"></span><span>
</span><span id="line-1888"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#loMode"><span class="hs-identifier hs-type">loMode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">IOMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">CInt</span></a></span><span>
</span><span id="line-1889"></span><span id="loMode"><span class="annot"><span class="annottext">loMode :: IOMode -&gt; CInt
</span><a href="Database.PostgreSQL.LibPQ.html#loMode"><span class="hs-identifier hs-var hs-var">loMode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IOMode -&gt; CInt
forall a. ToCInt a =&gt; a -&gt; CInt
</span><a href="Database.PostgreSQL.LibPQ.Enums.html#toCInt"><span class="hs-identifier hs-var">toCInt</span></a></span><span>
</span><span id="line-1890"></span><span>
</span><span id="line-1891"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#toMaybeOid"><span class="hs-identifier hs-type">toMaybeOid</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Oid.html#Oid"><span class="hs-identifier hs-type">Oid</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Oid.html#Oid"><span class="hs-identifier hs-type">Oid</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1892"></span><span id="toMaybeOid"><span class="annot"><span class="annottext">toMaybeOid :: Oid -&gt; IO (Maybe Oid)
</span><a href="Database.PostgreSQL.LibPQ.html#toMaybeOid"><span class="hs-identifier hs-var hs-var">toMaybeOid</span></a></span></span><span> </span><span id="local-6989586621679046448"><span class="annot"><span class="annottext">Oid
</span><a href="#local-6989586621679046448"><span class="hs-identifier hs-var">oid</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Oid
</span><a href="#local-6989586621679046448"><span class="hs-identifier hs-var">oid</span></a></span><span> </span><span class="annot"><span class="annottext">Oid -&gt; Oid -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Oid
</span><a href="Database.PostgreSQL.LibPQ.Oid.html#invalidOid"><span class="hs-identifier hs-var">invalidOid</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Oid -&gt; IO (Maybe Oid)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Oid
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1893"></span><span>               </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Oid -&gt; IO (Maybe Oid)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Oid -&gt; Maybe Oid
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Oid
</span><a href="#local-6989586621679046448"><span class="hs-identifier hs-var">oid</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1894"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#toMaybeOid"><span class="hs-pragma hs-type">toMaybeOid</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1895"></span><span>
</span><span id="line-1896"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#nonnegInt"><span class="hs-identifier hs-type">nonnegInt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">CInt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1897"></span><span id="nonnegInt"><span class="annot"><span class="annottext">nonnegInt :: CInt -&gt; IO (Maybe Int)
</span><a href="Database.PostgreSQL.LibPQ.html#nonnegInt"><span class="hs-identifier hs-var hs-var">nonnegInt</span></a></span></span><span> </span><span id="local-6989586621679046446"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046446"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046446"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; CInt -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><span class="hs-number">0</span></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Maybe Int -&gt; IO (Maybe Int)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Maybe Int -&gt; IO (Maybe Int)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CInt -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046446"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1898"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#nonnegInt"><span class="hs-pragma hs-type">nonnegInt</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1899"></span><span>
</span><span id="line-1900"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#negError"><span class="hs-identifier hs-type">negError</span></a></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">CInt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1901"></span><span id="negError"><span class="annot"><span class="annottext">negError :: CInt -&gt; IO (Maybe ())
</span><a href="Database.PostgreSQL.LibPQ.html#negError"><span class="hs-identifier hs-var hs-var">negError</span></a></span></span><span> </span><span id="local-6989586621679046444"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046444"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046444"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; CInt -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><span class="hs-number">0</span></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Maybe () -&gt; IO (Maybe ())
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ()
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Maybe () -&gt; IO (Maybe ())
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; Maybe ()
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1902"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#negError"><span class="hs-pragma hs-type">negError</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1903"></span><span>
</span><span id="line-1904"></span><span class="hs-comment">-- | Creates a new large object,  returns the Object ID of the newly created</span><span>
</span><span id="line-1905"></span><span class="hs-comment">-- object.</span><span>
</span><span id="line-1906"></span><span>
</span><span id="line-1907"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#loCreat"><span class="hs-identifier hs-type">loCreat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Oid.html#Oid"><span class="hs-identifier hs-type">Oid</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1908"></span><span id="loCreat"><span class="annot"><span class="annottext">loCreat :: Connection -&gt; IO (Maybe Oid)
</span><a href="Database.PostgreSQL.LibPQ.html#loCreat"><span class="hs-identifier hs-var hs-var">loCreat</span></a></span></span><span> </span><span id="local-6989586621679046443"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046443"><span class="hs-identifier hs-var">connection</span></a></span></span><span>
</span><span id="line-1909"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO (Maybe Oid)) -&gt; IO (Maybe Oid)
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046443"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO (Maybe Oid)) -&gt; IO (Maybe Oid))
-&gt; (Ptr PGconn -&gt; IO (Maybe Oid)) -&gt; IO (Maybe Oid)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046442"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046442"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1910"></span><span>        </span><span class="annot"><span class="annottext">Oid -&gt; IO (Maybe Oid)
</span><a href="Database.PostgreSQL.LibPQ.html#toMaybeOid"><span class="hs-identifier hs-var">toMaybeOid</span></a></span><span> </span><span class="annot"><span class="annottext">(Oid -&gt; IO (Maybe Oid)) -&gt; IO Oid -&gt; IO (Maybe Oid)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; CInt -&gt; IO Oid
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_lo_creat"><span class="hs-identifier hs-var">c_lo_creat</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046442"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IOMode -&gt; CInt
</span><a href="Database.PostgreSQL.LibPQ.html#loMode"><span class="hs-identifier hs-var">loMode</span></a></span><span> </span><span class="annot"><span class="annottext">IOMode
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">ReadMode</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1911"></span><span>
</span><span id="line-1912"></span><span class="hs-comment">-- | Creates a new large object with a particular Object ID.  Returns</span><span>
</span><span id="line-1913"></span><span class="hs-comment">-- 'Nothing' if the requested Object ID is already in use by some other</span><span>
</span><span id="line-1914"></span><span class="hs-comment">-- large object or other failure.  If 'invalidOid' is used as a parameter,</span><span>
</span><span id="line-1915"></span><span class="hs-comment">-- then 'loCreate' will assign an unused 'Oid'.</span><span>
</span><span id="line-1916"></span><span>
</span><span id="line-1917"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#loCreate"><span class="hs-identifier hs-type">loCreate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Oid.html#Oid"><span class="hs-identifier hs-type">Oid</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Oid.html#Oid"><span class="hs-identifier hs-type">Oid</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1918"></span><span id="loCreate"><span class="annot"><span class="annottext">loCreate :: Connection -&gt; Oid -&gt; IO (Maybe Oid)
</span><a href="Database.PostgreSQL.LibPQ.html#loCreate"><span class="hs-identifier hs-var hs-var">loCreate</span></a></span></span><span> </span><span id="local-6989586621679046439"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046439"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span id="local-6989586621679046438"><span class="annot"><span class="annottext">Oid
</span><a href="#local-6989586621679046438"><span class="hs-identifier hs-var">oid</span></a></span></span><span>
</span><span id="line-1919"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO (Maybe Oid)) -&gt; IO (Maybe Oid)
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046439"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO (Maybe Oid)) -&gt; IO (Maybe Oid))
-&gt; (Ptr PGconn -&gt; IO (Maybe Oid)) -&gt; IO (Maybe Oid)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046437"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046437"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1920"></span><span>        </span><span class="annot"><span class="annottext">Oid -&gt; IO (Maybe Oid)
</span><a href="Database.PostgreSQL.LibPQ.html#toMaybeOid"><span class="hs-identifier hs-var">toMaybeOid</span></a></span><span> </span><span class="annot"><span class="annottext">(Oid -&gt; IO (Maybe Oid)) -&gt; IO Oid -&gt; IO (Maybe Oid)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; Oid -&gt; IO Oid
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_lo_create"><span class="hs-identifier hs-var">c_lo_create</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046437"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Oid
</span><a href="#local-6989586621679046438"><span class="hs-identifier hs-var">oid</span></a></span><span>
</span><span id="line-1921"></span><span>
</span><span id="line-1922"></span><span class="hs-comment">-- | Imports an operating system file as a large object.  Note that the</span><span>
</span><span id="line-1923"></span><span class="hs-comment">-- file is read by the client interface library, not by the server; so it</span><span>
</span><span id="line-1924"></span><span class="hs-comment">-- must exist in the client file system and be readable by the client</span><span>
</span><span id="line-1925"></span><span class="hs-comment">-- application.</span><span>
</span><span id="line-1926"></span><span>
</span><span id="line-1927"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#loImport"><span class="hs-identifier hs-type">loImport</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Oid.html#Oid"><span class="hs-identifier hs-type">Oid</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1928"></span><span id="loImport"><span class="annot"><span class="annottext">loImport :: Connection -&gt; String -&gt; IO (Maybe Oid)
</span><a href="Database.PostgreSQL.LibPQ.html#loImport"><span class="hs-identifier hs-var hs-var">loImport</span></a></span></span><span> </span><span id="local-6989586621679046434"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046434"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span id="local-6989586621679046433"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679046433"><span class="hs-identifier hs-var">filepath</span></a></span></span><span>
</span><span id="line-1929"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO (Maybe Oid)) -&gt; IO (Maybe Oid)
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046434"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO (Maybe Oid)) -&gt; IO (Maybe Oid))
-&gt; (Ptr PGconn -&gt; IO (Maybe Oid)) -&gt; IO (Maybe Oid)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046432"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046432"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1930"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; (CString -&gt; IO (Maybe Oid)) -&gt; IO (Maybe Oid)
forall a. String -&gt; (CString -&gt; IO a) -&gt; IO a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">withCString</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679046433"><span class="hs-identifier hs-var">filepath</span></a></span><span> </span><span class="annot"><span class="annottext">((CString -&gt; IO (Maybe Oid)) -&gt; IO (Maybe Oid))
-&gt; (CString -&gt; IO (Maybe Oid)) -&gt; IO (Maybe Oid)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046431"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046431"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1931"></span><span>          </span><span class="annot"><span class="annottext">Oid -&gt; IO (Maybe Oid)
</span><a href="Database.PostgreSQL.LibPQ.html#toMaybeOid"><span class="hs-identifier hs-var">toMaybeOid</span></a></span><span> </span><span class="annot"><span class="annottext">(Oid -&gt; IO (Maybe Oid)) -&gt; IO Oid -&gt; IO (Maybe Oid)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; CString -&gt; IO Oid
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_lo_import"><span class="hs-identifier hs-var">c_lo_import</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046432"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046431"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-1932"></span><span>
</span><span id="line-1933"></span><span class="hs-comment">-- | Imports an operating system file as a large object with the given</span><span>
</span><span id="line-1934"></span><span class="hs-comment">-- Object ID.  Combines the behavior of 'loImport' and 'loCreate'</span><span>
</span><span id="line-1935"></span><span>
</span><span id="line-1936"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#loImportWithOid"><span class="hs-identifier hs-type">loImportWithOid</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Oid.html#Oid"><span class="hs-identifier hs-type">Oid</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Oid.html#Oid"><span class="hs-identifier hs-type">Oid</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1937"></span><span id="loImportWithOid"><span class="annot"><span class="annottext">loImportWithOid :: Connection -&gt; String -&gt; Oid -&gt; IO (Maybe Oid)
</span><a href="Database.PostgreSQL.LibPQ.html#loImportWithOid"><span class="hs-identifier hs-var hs-var">loImportWithOid</span></a></span></span><span> </span><span id="local-6989586621679046429"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046429"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span id="local-6989586621679046428"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679046428"><span class="hs-identifier hs-var">filepath</span></a></span></span><span> </span><span id="local-6989586621679046427"><span class="annot"><span class="annottext">Oid
</span><a href="#local-6989586621679046427"><span class="hs-identifier hs-var">oid</span></a></span></span><span>
</span><span id="line-1938"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO (Maybe Oid)) -&gt; IO (Maybe Oid)
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046429"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO (Maybe Oid)) -&gt; IO (Maybe Oid))
-&gt; (Ptr PGconn -&gt; IO (Maybe Oid)) -&gt; IO (Maybe Oid)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046426"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046426"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1939"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; (CString -&gt; IO (Maybe Oid)) -&gt; IO (Maybe Oid)
forall a. String -&gt; (CString -&gt; IO a) -&gt; IO a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">withCString</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679046428"><span class="hs-identifier hs-var">filepath</span></a></span><span> </span><span class="annot"><span class="annottext">((CString -&gt; IO (Maybe Oid)) -&gt; IO (Maybe Oid))
-&gt; (CString -&gt; IO (Maybe Oid)) -&gt; IO (Maybe Oid)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046425"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046425"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1940"></span><span>          </span><span class="annot"><span class="annottext">Oid -&gt; IO (Maybe Oid)
</span><a href="Database.PostgreSQL.LibPQ.html#toMaybeOid"><span class="hs-identifier hs-var">toMaybeOid</span></a></span><span> </span><span class="annot"><span class="annottext">(Oid -&gt; IO (Maybe Oid)) -&gt; IO Oid -&gt; IO (Maybe Oid)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; CString -&gt; Oid -&gt; IO Oid
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_lo_import_with_oid"><span class="hs-identifier hs-var">c_lo_import_with_oid</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046426"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046425"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Oid
</span><a href="#local-6989586621679046427"><span class="hs-identifier hs-var">oid</span></a></span><span>
</span><span id="line-1941"></span><span>
</span><span id="line-1942"></span><span class="hs-comment">-- | Exports a large object into a operating system file.  Note that</span><span>
</span><span id="line-1943"></span><span class="hs-comment">-- the file is written by the client interface library, not the server.</span><span>
</span><span id="line-1944"></span><span class="hs-comment">-- Returns 'Just ()' on success,  'Nothing' on failure.</span><span>
</span><span id="line-1945"></span><span>
</span><span id="line-1946"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#loExport"><span class="hs-identifier hs-type">loExport</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Oid.html#Oid"><span class="hs-identifier hs-type">Oid</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1947"></span><span id="loExport"><span class="annot"><span class="annottext">loExport :: Connection -&gt; Oid -&gt; String -&gt; IO (Maybe ())
</span><a href="Database.PostgreSQL.LibPQ.html#loExport"><span class="hs-identifier hs-var hs-var">loExport</span></a></span></span><span> </span><span id="local-6989586621679046423"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046423"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span id="local-6989586621679046422"><span class="annot"><span class="annottext">Oid
</span><a href="#local-6989586621679046422"><span class="hs-identifier hs-var">oid</span></a></span></span><span> </span><span id="local-6989586621679046421"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679046421"><span class="hs-identifier hs-var">filepath</span></a></span></span><span>
</span><span id="line-1948"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO (Maybe ())) -&gt; IO (Maybe ())
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046423"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO (Maybe ())) -&gt; IO (Maybe ()))
-&gt; (Ptr PGconn -&gt; IO (Maybe ())) -&gt; IO (Maybe ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046420"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046420"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1949"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; (CString -&gt; IO (Maybe ())) -&gt; IO (Maybe ())
forall a. String -&gt; (CString -&gt; IO a) -&gt; IO a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">withCString</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679046421"><span class="hs-identifier hs-var">filepath</span></a></span><span> </span><span class="annot"><span class="annottext">((CString -&gt; IO (Maybe ())) -&gt; IO (Maybe ()))
-&gt; (CString -&gt; IO (Maybe ())) -&gt; IO (Maybe ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046419"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046419"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1950"></span><span>          </span><span class="annot"><span class="annottext">CInt -&gt; IO (Maybe ())
</span><a href="Database.PostgreSQL.LibPQ.html#negError"><span class="hs-identifier hs-var">negError</span></a></span><span> </span><span class="annot"><span class="annottext">(CInt -&gt; IO (Maybe ())) -&gt; IO CInt -&gt; IO (Maybe ())
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; Oid -&gt; CString -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_lo_export"><span class="hs-identifier hs-var">c_lo_export</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046420"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Oid
</span><a href="#local-6989586621679046422"><span class="hs-identifier hs-var">oid</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046419"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-1951"></span><span>
</span><span id="line-1952"></span><span class="hs-comment">-- | Opens an existing large object for reading or writing.  The Oid specifies</span><span>
</span><span id="line-1953"></span><span class="hs-comment">-- the large object to open.  A large object cannot be opened before it is</span><span>
</span><span id="line-1954"></span><span class="hs-comment">-- created.  A large object descriptor is returned for later use in 'loRead',</span><span>
</span><span id="line-1955"></span><span class="hs-comment">-- 'loWrite', 'loSeek', 'loTell', and 'loClose'.   The descriptor is only valid</span><span>
</span><span id="line-1956"></span><span class="hs-comment">-- for the duration of the current transation.   On failure,  'Nothing' is</span><span>
</span><span id="line-1957"></span><span class="hs-comment">-- returned.</span><span>
</span><span id="line-1958"></span><span class="hs-comment">--</span><span>
</span><span id="line-1959"></span><span class="hs-comment">-- The server currently does not distinguish between 'WriteMode' and</span><span>
</span><span id="line-1960"></span><span class="hs-comment">-- 'ReadWriteMode';  write-only modes are not enforced.  However there</span><span>
</span><span id="line-1961"></span><span class="hs-comment">-- is a significant difference between 'ReadMode' and the other modes:</span><span>
</span><span id="line-1962"></span><span class="hs-comment">-- with 'ReadMode' you cannot write on the descriptor,  and the data read</span><span>
</span><span id="line-1963"></span><span class="hs-comment">-- from it will reflect the contents of the large object at the time of</span><span>
</span><span id="line-1964"></span><span class="hs-comment">-- the transaction snapshot that was active when 'loOpen' was executed,</span><span>
</span><span id="line-1965"></span><span class="hs-comment">-- regardless of later writes by this or other transactions.   Reading from</span><span>
</span><span id="line-1966"></span><span class="hs-comment">-- a descriptor opened in 'WriteMode', 'ReadWriteMode', or 'AppendMode'</span><span>
</span><span id="line-1967"></span><span class="hs-comment">-- returns data that reflects all writes of other committed transactions</span><span>
</span><span id="line-1968"></span><span class="hs-comment">-- as well as the writes of the current transaction.   This is similar to</span><span>
</span><span id="line-1969"></span><span class="hs-comment">-- the behavior of @REPEATABLE READ@ versus @READ COMMITTED@ transaction</span><span>
</span><span id="line-1970"></span><span class="hs-comment">-- modes for ordinary SQL @SELECT@ commands.</span><span>
</span><span id="line-1971"></span><span>
</span><span id="line-1972"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#loOpen"><span class="hs-identifier hs-type">loOpen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Oid.html#Oid"><span class="hs-identifier hs-type">Oid</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">IOMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#LoFd"><span class="hs-identifier hs-type">LoFd</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1973"></span><span id="loOpen"><span class="annot"><span class="annottext">loOpen :: Connection -&gt; Oid -&gt; IOMode -&gt; IO (Maybe LoFd)
</span><a href="Database.PostgreSQL.LibPQ.html#loOpen"><span class="hs-identifier hs-var hs-var">loOpen</span></a></span></span><span> </span><span id="local-6989586621679046417"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046417"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span id="local-6989586621679046416"><span class="annot"><span class="annottext">Oid
</span><a href="#local-6989586621679046416"><span class="hs-identifier hs-var">oid</span></a></span></span><span> </span><span id="local-6989586621679046415"><span class="annot"><span class="annottext">IOMode
</span><a href="#local-6989586621679046415"><span class="hs-identifier hs-var">mode</span></a></span></span><span>
</span><span id="line-1974"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO (Maybe LoFd)) -&gt; IO (Maybe LoFd)
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046417"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO (Maybe LoFd)) -&gt; IO (Maybe LoFd))
-&gt; (Ptr PGconn -&gt; IO (Maybe LoFd)) -&gt; IO (Maybe LoFd)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046414"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046414"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1975"></span><span>        </span><span id="local-6989586621679046413"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046413"><span class="hs-identifier hs-var">fd</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; Oid -&gt; CInt -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_lo_open"><span class="hs-identifier hs-var">c_lo_open</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046414"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Oid
</span><a href="#local-6989586621679046416"><span class="hs-identifier hs-var">oid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IOMode -&gt; CInt
</span><a href="Database.PostgreSQL.LibPQ.html#loMode"><span class="hs-identifier hs-var">loMode</span></a></span><span> </span><span class="annot"><span class="annottext">IOMode
</span><a href="#local-6989586621679046415"><span class="hs-identifier hs-var">mode</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1976"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046413"><span class="hs-identifier hs-var">fd</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1977"></span><span>          </span><span class="hs-glyph">-</span><span class="hs-number">1</span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe LoFd -&gt; IO (Maybe LoFd)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe LoFd
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1978"></span><span>          </span><span class="annot"><span class="annottext">CInt
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">IOMode
</span><a href="#local-6989586621679046415"><span class="hs-identifier hs-var">mode</span></a></span><span> </span><span class="annot"><span class="annottext">IOMode -&gt; IOMode -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">/=</span></a></span><span> </span><span class="annot"><span class="annottext">IOMode
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">AppendMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe LoFd -&gt; IO (Maybe LoFd)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LoFd -&gt; Maybe LoFd
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CInt -&gt; LoFd
</span><a href="Database.PostgreSQL.LibPQ.html#LoFd"><span class="hs-identifier hs-var">LoFd</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046413"><span class="hs-identifier hs-var">fd</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1979"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1980"></span><span>                </span><span class="hs-comment">-- The Large Object API does not directly support AppendMode,</span><span>
</span><span id="line-1981"></span><span>                </span><span class="hs-comment">-- so we emulate it.</span><span>
</span><span id="line-1982"></span><span>
</span><span id="line-1983"></span><span>                </span><span class="hs-comment">-- FIXME:  review this emulation as it and/or the error</span><span>
</span><span id="line-1984"></span><span>                </span><span class="hs-comment">--         handling is likely to be slightly wrong.  Start by</span><span>
</span><span id="line-1985"></span><span>                </span><span class="hs-comment">--         reading the source of lo_open, lo_lseek, and</span><span>
</span><span id="line-1986"></span><span>                </span><span class="hs-comment">--         lo_close.</span><span>
</span><span id="line-1987"></span><span>                </span><span id="local-6989586621679046409"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046409"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; CInt -&gt; CInt -&gt; CInt -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_lo_lseek"><span class="hs-identifier hs-var">c_lo_lseek</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046414"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046413"><span class="hs-identifier hs-var">fd</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SeekMode -&gt; CInt
forall a. ToCInt a =&gt; a -&gt; CInt
</span><a href="Database.PostgreSQL.LibPQ.Enums.html#toCInt"><span class="hs-identifier hs-var">toCInt</span></a></span><span> </span><span class="annot"><span class="annottext">SeekMode
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">SeekFromEnd</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1988"></span><span>                </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046409"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1989"></span><span>                  </span><span class="hs-glyph">-</span><span class="hs-number">1</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1990"></span><span>                          </span><span class="hs-comment">-- the lo_lseek failed, so we try to close the fd</span><span>
</span><span id="line-1991"></span><span>
</span><span id="line-1992"></span><span>                          </span><span class="hs-comment">-- I'm  not sure what to do if lo_close fails so I am</span><span>
</span><span id="line-1993"></span><span>                          </span><span class="hs-comment">-- ignoring it.  This might obscure the error message</span><span>
</span><span id="line-1994"></span><span>                          </span><span class="hs-comment">-- available from PQerrorMessage</span><span>
</span><span id="line-1995"></span><span>                          </span><span class="annot"><span class="annottext">CInt
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; CInt -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_lo_close"><span class="hs-identifier hs-var">c_lo_close</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046414"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046413"><span class="hs-identifier hs-var">fd</span></a></span><span>
</span><span id="line-1996"></span><span>                          </span><span class="annot"><span class="annottext">Maybe LoFd -&gt; IO (Maybe LoFd)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe LoFd
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1997"></span><span>                  </span><span class="annot"><span class="annottext">CInt
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe LoFd -&gt; IO (Maybe LoFd)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LoFd -&gt; Maybe LoFd
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CInt -&gt; LoFd
</span><a href="Database.PostgreSQL.LibPQ.html#LoFd"><span class="hs-identifier hs-var">LoFd</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046413"><span class="hs-identifier hs-var">fd</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1998"></span><span>
</span><span id="line-1999"></span><span class="hs-comment">-- | @loWrite conn fd buf@ writes the bytestring @buf@ to the large object</span><span>
</span><span id="line-2000"></span><span class="hs-comment">-- descriptor @fd@.  The number of bytes actually written is returned.</span><span>
</span><span id="line-2001"></span><span class="hs-comment">-- In the event of an error, 'Nothing' is returned.</span><span>
</span><span id="line-2002"></span><span>
</span><span id="line-2003"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#loWrite"><span class="hs-identifier hs-type">loWrite</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#LoFd"><span class="hs-identifier hs-type">LoFd</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2004"></span><span id="loWrite"><span class="annot"><span class="annottext">loWrite :: Connection -&gt; LoFd -&gt; ByteString -&gt; IO (Maybe Int)
</span><a href="Database.PostgreSQL.LibPQ.html#loWrite"><span class="hs-identifier hs-var hs-var">loWrite</span></a></span></span><span> </span><span id="local-6989586621679046405"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046405"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#LoFd"><span class="hs-identifier hs-type">LoFd</span></a></span><span> </span><span id="local-6989586621679046404"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046404"><span class="hs-identifier hs-var">fd</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679046403"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046403"><span class="hs-identifier hs-var">bytes</span></a></span></span><span>
</span><span id="line-2005"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO (Maybe Int)) -&gt; IO (Maybe Int)
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046405"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO (Maybe Int)) -&gt; IO (Maybe Int))
-&gt; (Ptr PGconn -&gt; IO (Maybe Int)) -&gt; IO (Maybe Int)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046402"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046402"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2006"></span><span>        </span><span class="annot"><span class="annottext">ByteString -&gt; (CStringLen -&gt; IO (Maybe Int)) -&gt; IO (Maybe Int)
forall a. ByteString -&gt; (CStringLen -&gt; IO a) -&gt; IO a
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.unsafeUseAsCStringLen</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679046403"><span class="hs-identifier hs-var">bytes</span></a></span><span> </span><span class="annot"><span class="annottext">((CStringLen -&gt; IO (Maybe Int)) -&gt; IO (Maybe Int))
-&gt; (CStringLen -&gt; IO (Maybe Int)) -&gt; IO (Maybe Int)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679046401"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046401"><span class="hs-identifier hs-var">byteptr</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679046400"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679046400"><span class="hs-identifier hs-var">len</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2007"></span><span>          </span><span class="annot"><span class="annottext">CInt -&gt; IO (Maybe Int)
</span><a href="Database.PostgreSQL.LibPQ.html#nonnegInt"><span class="hs-identifier hs-var">nonnegInt</span></a></span><span> </span><span class="annot"><span class="annottext">(CInt -&gt; IO (Maybe Int)) -&gt; IO CInt -&gt; IO (Maybe Int)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; CInt -&gt; CString -&gt; CSize -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_lo_write"><span class="hs-identifier hs-var">c_lo_write</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046402"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046404"><span class="hs-identifier hs-var">fd</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679046401"><span class="hs-identifier hs-var">byteptr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; CSize
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679046400"><span class="hs-identifier hs-var">len</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2008"></span><span>
</span><span id="line-2009"></span><span class="hs-comment">-- | @loRead conn fd len@ reads up to @len@ bytes from the large object</span><span>
</span><span id="line-2010"></span><span class="hs-comment">-- descriptor @fd@.  In the event of an error,  'Nothing' is returned.</span><span>
</span><span id="line-2011"></span><span>
</span><span id="line-2012"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#loRead"><span class="hs-identifier hs-type">loRead</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#LoFd"><span class="hs-identifier hs-type">LoFd</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">B.ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2013"></span><span id="loRead"><span class="annot"><span class="annottext">loRead :: Connection -&gt; LoFd -&gt; Int -&gt; IO (Maybe ByteString)
</span><a href="Database.PostgreSQL.LibPQ.html#loRead"><span class="hs-identifier hs-var hs-var">loRead</span></a></span></span><span> </span><span id="local-6989586621679046398"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046398"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#LoFd"><span class="hs-identifier hs-type">LoFd</span></a></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679046397"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046397"><span class="hs-identifier hs-var">fd</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679046396"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679046396"><span class="hs-identifier hs-var">maxlen</span></a></span></span><span>
</span><span id="line-2014"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Connection
-&gt; (Ptr PGconn -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046398"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString))
-&gt; (Ptr PGconn -&gt; IO (Maybe ByteString)) -&gt; IO (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046395"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046395"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2015"></span><span>        </span><span id="local-6989586621679046394"><span class="annot"><span class="annottext">Ptr Word8
</span><a href="#local-6989586621679046394"><span class="hs-identifier hs-var">buf</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; IO (Ptr Word8)
forall a. Int -&gt; IO (Ptr a)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mallocBytes</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679046396"><span class="hs-identifier hs-var">maxlen</span></a></span><span>
</span><span id="line-2016"></span><span>        </span><span id="local-6989586621679046393"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046393"><span class="hs-identifier hs-var">len_</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; CInt -&gt; Ptr Word8 -&gt; CSize -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_lo_read"><span class="hs-identifier hs-var">c_lo_read</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046395"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046397"><span class="hs-identifier hs-var">fd</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Word8
</span><a href="#local-6989586621679046394"><span class="hs-identifier hs-var">buf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; CSize
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679046396"><span class="hs-identifier hs-var">maxlen</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2017"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679046391"><span class="annot"><span class="annottext">len :: Int
</span><a href="#local-6989586621679046391"><span class="hs-identifier hs-var hs-var">len</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CInt -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046393"><span class="hs-identifier hs-var">len_</span></a></span><span>
</span><span id="line-2018"></span><span>        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679046391"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-2019"></span><span>          </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2020"></span><span>                  </span><span class="annot"><span class="annottext">Ptr Word8 -&gt; IO ()
forall a. Ptr a -&gt; IO ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">free</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Word8
</span><a href="#local-6989586621679046394"><span class="hs-identifier hs-var">buf</span></a></span><span>
</span><span id="line-2021"></span><span>                  </span><span class="annot"><span class="annottext">Maybe ByteString -&gt; IO (Maybe ByteString)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ByteString
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-2022"></span><span>          </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2023"></span><span>                  </span><span id="local-6989586621679046390"><span class="annot"><span class="annottext">Ptr Word8
</span><a href="#local-6989586621679046390"><span class="hs-identifier hs-var">bufre</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr Word8 -&gt; Int -&gt; IO (Ptr Word8)
forall a. Ptr a -&gt; Int -&gt; IO (Ptr a)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">reallocBytes</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Word8
</span><a href="#local-6989586621679046394"><span class="hs-identifier hs-var">buf</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679046391"><span class="hs-identifier hs-var">len</span></a></span><span>
</span><span id="line-2024"></span><span>                  </span><span id="local-6989586621679046389"><span class="annot"><span class="annottext">ForeignPtr Word8
</span><a href="#local-6989586621679046389"><span class="hs-identifier hs-var">buffp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FinalizerPtr Word8 -&gt; Ptr Word8 -&gt; IO (ForeignPtr Word8)
forall a. FinalizerPtr a -&gt; Ptr a -&gt; IO (ForeignPtr a)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">newForeignPtr</span></a></span><span> </span><span class="annot"><span class="annottext">FinalizerPtr Word8
forall a. FunPtr (Ptr a -&gt; IO ())
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">finalizerFree</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Word8
</span><a href="#local-6989586621679046390"><span class="hs-identifier hs-var">bufre</span></a></span><span>
</span><span id="line-2025"></span><span>                  </span><span class="annot"><span class="annottext">Maybe ByteString -&gt; IO (Maybe ByteString)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe ByteString -&gt; IO (Maybe ByteString))
-&gt; Maybe ByteString -&gt; IO (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Maybe ByteString
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Maybe ByteString) -&gt; ByteString -&gt; Maybe ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr Word8 -&gt; Int -&gt; Int -&gt; ByteString
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">B.fromForeignPtr</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr Word8
</span><a href="#local-6989586621679046389"><span class="hs-identifier hs-var">buffp</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679046391"><span class="hs-identifier hs-var">len</span></a></span><span>
</span><span id="line-2026"></span><span>
</span><span id="line-2027"></span><span class="hs-comment">-- | Changes the current read or write location associated with</span><span>
</span><span id="line-2028"></span><span class="hs-comment">-- a large object descriptor.    The return value is the new location</span><span>
</span><span id="line-2029"></span><span class="hs-comment">-- pointer,  or 'Nothing' on error.</span><span>
</span><span id="line-2030"></span><span>
</span><span id="line-2031"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#loSeek"><span class="hs-identifier hs-type">loSeek</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#LoFd"><span class="hs-identifier hs-type">LoFd</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">SeekMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2032"></span><span id="loSeek"><span class="annot"><span class="annottext">loSeek :: Connection -&gt; LoFd -&gt; SeekMode -&gt; Int -&gt; IO (Maybe Int)
</span><a href="Database.PostgreSQL.LibPQ.html#loSeek"><span class="hs-identifier hs-var hs-var">loSeek</span></a></span></span><span> </span><span id="local-6989586621679046388"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046388"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#LoFd"><span class="hs-identifier hs-type">LoFd</span></a></span><span> </span><span id="local-6989586621679046387"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046387"><span class="hs-identifier hs-var">fd</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679046386"><span class="annot"><span class="annottext">SeekMode
</span><a href="#local-6989586621679046386"><span class="hs-identifier hs-var">seekmode</span></a></span></span><span> </span><span id="local-6989586621679046385"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679046385"><span class="hs-identifier hs-var">delta</span></a></span></span><span>
</span><span id="line-2033"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO (Maybe Int)) -&gt; IO (Maybe Int)
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046388"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO (Maybe Int)) -&gt; IO (Maybe Int))
-&gt; (Ptr PGconn -&gt; IO (Maybe Int)) -&gt; IO (Maybe Int)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046384"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046384"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2034"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679046383"><span class="annot"><span class="annottext">d :: CInt
</span><a href="#local-6989586621679046383"><span class="hs-identifier hs-var hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; CInt
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679046385"><span class="hs-identifier hs-var">delta</span></a></span><span>
</span><span id="line-2035"></span><span>        </span><span id="local-6989586621679046382"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046382"><span class="hs-identifier hs-var">pos</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; CInt -&gt; CInt -&gt; CInt -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_lo_lseek"><span class="hs-identifier hs-var">c_lo_lseek</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046384"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046387"><span class="hs-identifier hs-var">fd</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046383"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">(CInt -&gt; IO CInt) -&gt; CInt -&gt; IO CInt
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SeekMode -&gt; CInt
forall a. ToCInt a =&gt; a -&gt; CInt
</span><a href="Database.PostgreSQL.LibPQ.Enums.html#toCInt"><span class="hs-identifier hs-var">toCInt</span></a></span><span> </span><span class="annot"><span class="annottext">SeekMode
</span><a href="#local-6989586621679046386"><span class="hs-identifier hs-var">seekmode</span></a></span><span>
</span><span id="line-2036"></span><span>        </span><span class="annot"><span class="annottext">CInt -&gt; IO (Maybe Int)
</span><a href="Database.PostgreSQL.LibPQ.html#nonnegInt"><span class="hs-identifier hs-var">nonnegInt</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046382"><span class="hs-identifier hs-var">pos</span></a></span><span>
</span><span id="line-2037"></span><span>
</span><span id="line-2038"></span><span class="hs-comment">-- | Obtains the current read or write location of a large object descriptor.</span><span>
</span><span id="line-2039"></span><span>
</span><span id="line-2040"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#loTell"><span class="hs-identifier hs-type">loTell</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#LoFd"><span class="hs-identifier hs-type">LoFd</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2041"></span><span id="loTell"><span class="annot"><span class="annottext">loTell :: Connection -&gt; LoFd -&gt; IO (Maybe Int)
</span><a href="Database.PostgreSQL.LibPQ.html#loTell"><span class="hs-identifier hs-var hs-var">loTell</span></a></span></span><span> </span><span id="local-6989586621679046381"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046381"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#LoFd"><span class="hs-identifier hs-type">LoFd</span></a></span><span> </span><span id="local-6989586621679046380"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046380"><span class="hs-identifier hs-var">fd</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2042"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO (Maybe Int)) -&gt; IO (Maybe Int)
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046381"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO (Maybe Int)) -&gt; IO (Maybe Int))
-&gt; (Ptr PGconn -&gt; IO (Maybe Int)) -&gt; IO (Maybe Int)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046379"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046379"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2043"></span><span>        </span><span class="annot"><span class="annottext">CInt -&gt; IO (Maybe Int)
</span><a href="Database.PostgreSQL.LibPQ.html#nonnegInt"><span class="hs-identifier hs-var">nonnegInt</span></a></span><span> </span><span class="annot"><span class="annottext">(CInt -&gt; IO (Maybe Int)) -&gt; IO CInt -&gt; IO (Maybe Int)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; CInt -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_lo_tell"><span class="hs-identifier hs-var">c_lo_tell</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046379"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046380"><span class="hs-identifier hs-var">fd</span></a></span><span>
</span><span id="line-2044"></span><span>
</span><span id="line-2045"></span><span class="hs-comment">-- | Truncates a large object to a given length.  If the length is greater</span><span>
</span><span id="line-2046"></span><span class="hs-comment">-- than the current large object,  then the large object is extended with</span><span>
</span><span id="line-2047"></span><span class="hs-comment">-- null bytes.  ('\x00')</span><span>
</span><span id="line-2048"></span><span class="hs-comment">--</span><span>
</span><span id="line-2049"></span><span class="hs-comment">-- The file offest is not changed.</span><span>
</span><span id="line-2050"></span><span class="hs-comment">--</span><span>
</span><span id="line-2051"></span><span class="hs-comment">-- 'loTruncate' is new as of PostgreSQL 8.3; if this function is run against</span><span>
</span><span id="line-2052"></span><span class="hs-comment">-- an older server version, it will fail and return 'Nothing'</span><span>
</span><span id="line-2053"></span><span>
</span><span id="line-2054"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#loTruncate"><span class="hs-identifier hs-type">loTruncate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#LoFd"><span class="hs-identifier hs-type">LoFd</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2055"></span><span id="loTruncate"><span class="annot"><span class="annottext">loTruncate :: Connection -&gt; LoFd -&gt; Int -&gt; IO (Maybe ())
</span><a href="Database.PostgreSQL.LibPQ.html#loTruncate"><span class="hs-identifier hs-var hs-var">loTruncate</span></a></span></span><span> </span><span id="local-6989586621679046377"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046377"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#LoFd"><span class="hs-identifier hs-type">LoFd</span></a></span><span> </span><span id="local-6989586621679046376"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046376"><span class="hs-identifier hs-var">fd</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679046375"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679046375"><span class="hs-identifier hs-var">size</span></a></span></span><span>
</span><span id="line-2056"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO (Maybe ())) -&gt; IO (Maybe ())
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046377"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO (Maybe ())) -&gt; IO (Maybe ()))
-&gt; (Ptr PGconn -&gt; IO (Maybe ())) -&gt; IO (Maybe ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046374"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046374"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2057"></span><span>        </span><span class="annot"><span class="annottext">CInt -&gt; IO (Maybe ())
</span><a href="Database.PostgreSQL.LibPQ.html#negError"><span class="hs-identifier hs-var">negError</span></a></span><span> </span><span class="annot"><span class="annottext">(CInt -&gt; IO (Maybe ())) -&gt; IO CInt -&gt; IO (Maybe ())
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; CInt -&gt; CSize -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_lo_truncate"><span class="hs-identifier hs-var">c_lo_truncate</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046374"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046376"><span class="hs-identifier hs-var">fd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; CSize
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679046375"><span class="hs-identifier hs-var">size</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2058"></span><span>
</span><span id="line-2059"></span><span class="hs-comment">-- | Closes a large object descriptor.  Any large object descriptors that</span><span>
</span><span id="line-2060"></span><span class="hs-comment">-- remain open at the end of a transaction will be closed automatically.</span><span>
</span><span id="line-2061"></span><span>
</span><span id="line-2062"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#loClose"><span class="hs-identifier hs-type">loClose</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#LoFd"><span class="hs-identifier hs-type">LoFd</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2063"></span><span id="loClose"><span class="annot"><span class="annottext">loClose :: Connection -&gt; LoFd -&gt; IO (Maybe ())
</span><a href="Database.PostgreSQL.LibPQ.html#loClose"><span class="hs-identifier hs-var hs-var">loClose</span></a></span></span><span> </span><span id="local-6989586621679046372"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046372"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#LoFd"><span class="hs-identifier hs-type">LoFd</span></a></span><span> </span><span id="local-6989586621679046371"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046371"><span class="hs-identifier hs-var">fd</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2064"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO (Maybe ())) -&gt; IO (Maybe ())
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046372"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO (Maybe ())) -&gt; IO (Maybe ()))
-&gt; (Ptr PGconn -&gt; IO (Maybe ())) -&gt; IO (Maybe ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046370"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046370"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2065"></span><span>        </span><span class="annot"><span class="annottext">CInt -&gt; IO (Maybe ())
</span><a href="Database.PostgreSQL.LibPQ.html#negError"><span class="hs-identifier hs-var">negError</span></a></span><span> </span><span class="annot"><span class="annottext">(CInt -&gt; IO (Maybe ())) -&gt; IO CInt -&gt; IO (Maybe ())
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; CInt -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_lo_close"><span class="hs-identifier hs-var">c_lo_close</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046370"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679046371"><span class="hs-identifier hs-var">fd</span></a></span><span>
</span><span id="line-2066"></span><span>
</span><span id="line-2067"></span><span class="hs-comment">-- | Removes a large object from the database.</span><span>
</span><span id="line-2068"></span><span>
</span><span id="line-2069"></span><span class="annot"><a href="Database.PostgreSQL.LibPQ.html#loUnlink"><span class="hs-identifier hs-type">loUnlink</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Internal.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.PostgreSQL.LibPQ.Oid.html#Oid"><span class="hs-identifier hs-type">Oid</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2070"></span><span id="loUnlink"><span class="annot"><span class="annottext">loUnlink :: Connection -&gt; Oid -&gt; IO (Maybe ())
</span><a href="Database.PostgreSQL.LibPQ.html#loUnlink"><span class="hs-identifier hs-var hs-var">loUnlink</span></a></span></span><span> </span><span id="local-6989586621679046369"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046369"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span id="local-6989586621679046368"><span class="annot"><span class="annottext">Oid
</span><a href="#local-6989586621679046368"><span class="hs-identifier hs-var">oid</span></a></span></span><span>
</span><span id="line-2071"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; (Ptr PGconn -&gt; IO (Maybe ())) -&gt; IO (Maybe ())
forall b. Connection -&gt; (Ptr PGconn -&gt; IO b) -&gt; IO b
</span><a href="Database.PostgreSQL.LibPQ.Internal.html#withConn"><span class="hs-identifier hs-var">withConn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679046369"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr PGconn -&gt; IO (Maybe ())) -&gt; IO (Maybe ()))
-&gt; (Ptr PGconn -&gt; IO (Maybe ())) -&gt; IO (Maybe ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679046367"><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046367"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2072"></span><span>        </span><span class="annot"><span class="annottext">CInt -&gt; IO (Maybe ())
</span><a href="Database.PostgreSQL.LibPQ.html#negError"><span class="hs-identifier hs-var">negError</span></a></span><span> </span><span class="annot"><span class="annottext">(CInt -&gt; IO (Maybe ())) -&gt; IO CInt -&gt; IO (Maybe ())
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn -&gt; Oid -&gt; IO CInt
</span><a href="Database.PostgreSQL.LibPQ.FFI.html#c_lo_unlink"><span class="hs-identifier hs-var">c_lo_unlink</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr PGconn
</span><a href="#local-6989586621679046367"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Oid
</span><a href="#local-6989586621679046368"><span class="hs-identifier hs-var">oid</span></a></span><span>
</span><span id="line-2073"></span></pre></body></html>