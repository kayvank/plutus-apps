<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE BangPatterns #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE ConstraintKinds #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE DerivingVia #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE TupleSections #-}</span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-15"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-16"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators #-}</span><span>
</span><span id="line-17"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-18"></span><span>
</span><span id="line-19"></span><span class="hs-comment">-- | MemoBytes is an abstration for a datetype that encodes its own seriialization.</span><span>
</span><span id="line-20"></span><span class="hs-comment">--   The idea is to use a newtype around a MemoBytes non-memoizing version.</span><span>
</span><span id="line-21"></span><span class="hs-comment">--   For example:   newtype Foo = Foo(MemoBytes NonMemoizingFoo)</span><span>
</span><span id="line-22"></span><span class="hs-comment">--   This way all the instances for Foo (Eq,Show,Ord,ToCBOR,FromCBOR,NoThunks,Generic)</span><span>
</span><span id="line-23"></span><span class="hs-comment">--   can be derived for free.</span><span>
</span><span id="line-24"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Data.Coders</span><span>
</span><span id="line-25"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><a href="Data.Coders.html#%21%3E"><span class="hs-operator">(!&gt;)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>    </span><span class="annot"><a href="Data.Coders.html#%3C%21"><span class="hs-operator">(&lt;!)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><a href="Data.Coders.html#%3C%2A%21"><span class="hs-operator">(&lt;*!)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>    </span><span class="annot"><a href="Data.Coders.html#%3C%3F"><span class="hs-operator">(&lt;?)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>    </span><span class="annot"><a href="Data.Coders.html#Density"><span class="hs-identifier">Density</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>    </span><span class="annot"><a href="Data.Coders.html#Wrapped"><span class="hs-identifier">Wrapped</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>    </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier">Annotator</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>    </span><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier">Dual</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>    </span><span class="annot"><a href="Data.Coders.html#Field"><span class="hs-identifier">Field</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>    </span><span class="annot"><a href="Data.Coders.html#ofield"><span class="hs-identifier">ofield</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>    </span><span class="annot"><a href="Data.Coders.html#invalidField"><span class="hs-identifier">invalidField</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>    </span><span class="annot"><a href="Data.Coders.html#field"><span class="hs-identifier">field</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>    </span><span class="annot"><a href="Data.Coders.html#fieldA"><span class="hs-identifier">fieldA</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>    </span><span class="annot"><a href="Data.Coders.html#fieldAA"><span class="hs-identifier">fieldAA</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>    </span><span class="annot"><a href="Data.Coders.html#encode"><span class="hs-identifier">encode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>    </span><span class="annot"><a href="Data.Coders.html#decode"><span class="hs-identifier">decode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>    </span><span class="annot"><a href="Data.Coders.html#runE"><span class="hs-identifier">runE</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- Used in testing</span><span>
</span><span id="line-44"></span><span>    </span><span class="annot"><a href="Data.Coders.html#decodeList"><span class="hs-identifier">decodeList</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>    </span><span class="annot"><a href="Data.Coders.html#decodePair"><span class="hs-identifier">decodePair</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>    </span><span class="annot"><a href="Data.Coders.html#decodeSeq"><span class="hs-identifier">decodeSeq</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>    </span><span class="annot"><a href="Data.Coders.html#decodeStrictSeq"><span class="hs-identifier">decodeStrictSeq</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>    </span><span class="annot"><a href="Data.Coders.html#decodeSet"><span class="hs-identifier">decodeSet</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>    </span><span class="annot"><a href="Data.Coders.html#decodeAnnSet"><span class="hs-identifier">decodeAnnSet</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>    </span><span class="annot"><a href="Data.Coders.html#decodeRecordNamed"><span class="hs-identifier">decodeRecordNamed</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>    </span><span class="annot"><a href="Data.Coders.html#decodeRecordNamedT"><span class="hs-identifier">decodeRecordNamedT</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>    </span><span class="annot"><a href="Data.Coders.html#decodeRecordSum"><span class="hs-identifier">decodeRecordSum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>    </span><span class="annot"><a href="Data.Coders.html#invalidKey"><span class="hs-identifier">invalidKey</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>    </span><span class="annot"><a href="Data.Coders.html#unusedRequiredKeys"><span class="hs-identifier">unusedRequiredKeys</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>    </span><span class="annot"><a href="Data.Coders.html#duplicateKey"><span class="hs-identifier">duplicateKey</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>    </span><span class="annot"><a href="Data.Coders.html#wrapCBORArray"><span class="hs-identifier">wrapCBORArray</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-57"></span><span>    </span><span class="annot"><a href="Data.Coders.html#encodePair"><span class="hs-identifier">encodePair</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-58"></span><span>    </span><span class="annot"><a href="Data.Coders.html#encodeFoldable"><span class="hs-identifier">encodeFoldable</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>    </span><span class="annot"><a href="Data.Coders.html#encodeFoldableAsDefinite"><span class="hs-identifier">encodeFoldableAsDefinite</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>    </span><span class="annot"><a href="Data.Coders.html#encodeFoldableAsIndefinite"><span class="hs-identifier">encodeFoldableAsIndefinite</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>    </span><span class="annot"><a href="Data.Coders.html#encodeFoldableMapPairs"><span class="hs-identifier">encodeFoldableMapPairs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>    </span><span class="annot"><a href="Data.Coders.html#decodeCollectionWithLen"><span class="hs-identifier">decodeCollectionWithLen</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>    </span><span class="annot"><a href="Data.Coders.html#decodeCollection"><span class="hs-identifier">decodeCollection</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>    </span><span class="annot"><a href="Data.Coders.html#encodeFoldableEncoder"><span class="hs-identifier">encodeFoldableEncoder</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>    </span><span class="annot"><a href="Data.Coders.html#encodeMap"><span class="hs-identifier">encodeMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span>    </span><span class="annot"><a href="Data.Coders.html#encodeVMap"><span class="hs-identifier">encodeVMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-67"></span><span>    </span><span class="annot"><a href="Data.Coders.html#wrapCBORMap"><span class="hs-identifier">wrapCBORMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-68"></span><span>    </span><span class="annot"><a href="Data.Coders.html#decodeMap"><span class="hs-identifier">decodeMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-69"></span><span>    </span><span class="annot"><a href="Data.Coders.html#decodeVMap"><span class="hs-identifier">decodeVMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-70"></span><span>    </span><span class="annot"><a href="Data.Coders.html#decodeMapNoDuplicates"><span class="hs-identifier">decodeMapNoDuplicates</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-71"></span><span>    </span><span class="annot"><a href="Data.Coders.html#decodeMapByKey"><span class="hs-identifier">decodeMapByKey</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-72"></span><span>    </span><span class="annot"><a href="Data.Coders.html#decodeMapContents"><span class="hs-identifier">decodeMapContents</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-73"></span><span>    </span><span class="annot"><a href="Data.Coders.html#decodeMapTraverse"><span class="hs-identifier">decodeMapTraverse</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-74"></span><span>    </span><span class="annot"><a href="Data.Coders.html#decodeMapContentsTraverse"><span class="hs-identifier">decodeMapContentsTraverse</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-75"></span><span>    </span><span class="annot"><a href="Data.Coders.html#dualList"><span class="hs-identifier">dualList</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- Dual values for export</span><span>
</span><span id="line-76"></span><span>    </span><span class="annot"><a href="Data.Coders.html#dualSeq"><span class="hs-identifier">dualSeq</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-77"></span><span>    </span><span class="annot"><a href="Data.Coders.html#dualSet"><span class="hs-identifier">dualSet</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-78"></span><span>    </span><span class="annot"><a href="Data.Coders.html#dualMaybeAsList"><span class="hs-identifier">dualMaybeAsList</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-79"></span><span>    </span><span class="annot"><a href="Data.Coders.html#dualMaybeAsNull"><span class="hs-identifier">dualMaybeAsNull</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-80"></span><span>    </span><span class="annot"><a href="Data.Coders.html#dualText"><span class="hs-identifier">dualText</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-81"></span><span>    </span><span class="annot"><a href="Data.Coders.html#dualStrictSeq"><span class="hs-identifier">dualStrictSeq</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-82"></span><span>    </span><span class="annot"><a href="Data.Coders.html#dualCBOR"><span class="hs-identifier">dualCBOR</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-83"></span><span>    </span><span class="annot"><a href="Data.Coders.html#to"><span class="hs-identifier">to</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-84"></span><span>    </span><span class="annot"><a href="Data.Coders.html#from"><span class="hs-identifier">from</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-85"></span><span>    </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier">Decoder</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-86"></span><span>    </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier">Encoding</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-87"></span><span>    </span><span class="annot"><a href="Data.Coders.html#encodeNullMaybe"><span class="hs-identifier">encodeNullMaybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-88"></span><span>    </span><span class="annot"><a href="Data.Coders.html#encodeKeyedStrictMaybeWith"><span class="hs-identifier">encodeKeyedStrictMaybeWith</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-89"></span><span>    </span><span class="annot"><a href="Data.Coders.html#encodeKeyedStrictMaybe"><span class="hs-identifier">encodeKeyedStrictMaybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-90"></span><span>    </span><span class="annot"><a href="Data.Coders.html#decodeNullMaybe"><span class="hs-identifier">decodeNullMaybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-91"></span><span>    </span><span class="annot"><a href="Data.Coders.html#decodeSparse"><span class="hs-identifier">decodeSparse</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-92"></span><span>    </span><span class="annot"><a href="Data.Coders.html#mapEncode"><span class="hs-identifier">mapEncode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-93"></span><span>    </span><span class="annot"><a href="Data.Coders.html#mapDecode"><span class="hs-identifier">mapDecode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-94"></span><span>    </span><span class="annot"><a href="Data.Coders.html#mapDecodeA"><span class="hs-identifier">mapDecodeA</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-95"></span><span>    </span><span class="annot"><a href="Data.Coders.html#vMapEncode"><span class="hs-identifier">vMapEncode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-96"></span><span>    </span><span class="annot"><a href="Data.Coders.html#vMapDecode"><span class="hs-identifier">vMapDecode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-97"></span><span>    </span><span class="annot"><a href="Data.Coders.html#setEncode"><span class="hs-identifier">setEncode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-98"></span><span>    </span><span class="annot"><a href="Data.Coders.html#setDecode"><span class="hs-identifier">setDecode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-99"></span><span>    </span><span class="annot"><a href="Data.Coders.html#setDecodeA"><span class="hs-identifier">setDecodeA</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-100"></span><span>    </span><span class="annot"><a href="Data.Coders.html#listEncode"><span class="hs-identifier">listEncode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-101"></span><span>    </span><span class="annot"><a href="Data.Coders.html#listDecode"><span class="hs-identifier">listDecode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-102"></span><span>    </span><span class="annot"><a href="Data.Coders.html#listDecodeA"><span class="hs-identifier">listDecodeA</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-103"></span><span>    </span><span class="annot"><a href="Data.Coders.html#pairDecodeA"><span class="hs-identifier">pairDecodeA</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Utility functions</span></span><span>
</span><span id="line-106"></span><span>    </span><span class="annot"><a href="Data.Coders.html#cborError"><span class="hs-identifier">cborError</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-107"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span class="hs-keyword">where</span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier">Cardano.Binary</span></a></span><span>
</span><span id="line-111"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier">Annotator</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-112"></span><span>    </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier">DecoderError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier">DecoderErrorCustom</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-113"></span><span>    </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier">FromCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier">fromCBOR</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-114"></span><span>    </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier">ToCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier">toCBOR</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-115"></span><span>    </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier">TokenType</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-116"></span><span>    </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier">decodeBreakOr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-117"></span><span>    </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier">decodeListLenOrIndef</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-118"></span><span>    </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier">decodeMapLenOrIndef</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-119"></span><span>    </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier">decodeNull</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-120"></span><span>    </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier">decodeWord</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-121"></span><span>    </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier">encodeBreak</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-122"></span><span>    </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier">encodeListLen</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-123"></span><span>    </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier">encodeListLenIndef</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-124"></span><span>    </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier">encodeMapLen</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-125"></span><span>    </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier">encodeMapLenIndef</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-126"></span><span>    </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier">encodeNull</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-127"></span><span>    </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier">encodeWord</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-128"></span><span>    </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier">matchSize</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-129"></span><span>    </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier">peekTokenType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-130"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-131"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier">Codec.CBOR.Decoding</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier">Decoder</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier">decodeTag</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier">decodeTag64</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier">Codec.CBOR.Encoding</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier">Encoding</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier">encodeTag</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-133"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Applicative</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">liftA2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-134"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Monad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">replicateM</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">unless</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">when</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../mtl/html/src"><span class="hs-identifier">Control.Monad.Trans</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier">MonadTrans</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-136"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier">Control.Monad.Trans.Identity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier">IdentityT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier">runIdentityT</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-137"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Foldable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">foldl'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Functor.Compose</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Compose</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-139"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier">Data.Map.Strict</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-140"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier">Data.Maybe.Strict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier">StrictMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier">SJust</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier">SNothing</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-141"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier">Data.Sequence</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier">Seq</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-142"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier">Data.Sequence</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Seq</span></span><span>
</span><span id="line-143"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier">Data.Sequence.Strict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier">StrictSeq</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier">Data.Sequence.Strict</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">StrictSeq</span></span><span>
</span><span id="line-145"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier">Set</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier">insert</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier">member</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-146"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-147"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier">Data.Text</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Text</span></span><span>
</span><span id="line-148"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Typeable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Typeable</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">typeOf</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-149"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../vector-map/html/src"><span class="hs-identifier">Data.VMap</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">VMap</span></span><span>
</span><span id="line-150"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Void</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Void</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-151"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../formatting/html/src"><span class="hs-identifier">Formatting</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../formatting/html/src"><span class="hs-identifier">build</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../formatting/html/src"><span class="hs-identifier">formatToString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-152"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../formatting/html/src"><span class="hs-identifier">Formatting.Buildable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../formatting/html/src"><span class="hs-identifier">Buildable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-153"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">GHC.Exts</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Exts</span></span><span>
</span><span id="line-154"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Numeric.Natural</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Natural</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span>
</span><span id="line-156"></span><span class="hs-comment">-- ====================================================================</span><span>
</span><span id="line-157"></span><span>
</span><span id="line-158"></span><span id="local-6989586621679127481"><span id="local-6989586621679127482"><span class="annot"><a href="Data.Coders.html#decodeRecordNamed"><span class="hs-identifier hs-type">decodeRecordNamed</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier hs-type">Text.Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679127482"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127481"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127482"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127481"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127482"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-159"></span><span id="decodeRecordNamed"><span class="annot"><span class="annottext">decodeRecordNamed :: Text -&gt; (a -&gt; Int) -&gt; Decoder s a -&gt; Decoder s a
</span><a href="Data.Coders.html#decodeRecordNamed"><span class="hs-identifier hs-var hs-var">decodeRecordNamed</span></a></span></span><span> </span><span id="local-6989586621679126862"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679126862"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679126861"><span class="annot"><span class="annottext">a -&gt; Int
</span><a href="#local-6989586621679126861"><span class="hs-identifier hs-var">getRecordSize</span></a></span></span><span> </span><span id="local-6989586621679126860"><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679126860"><span class="hs-identifier hs-var">decoder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-160"></span><span>  </span><span class="annot"><span class="annottext">IdentityT (Decoder s) a -&gt; Decoder s a
forall k (f :: k -&gt; *) (a :: k). IdentityT f a -&gt; f a
</span><a href="../../../../transformers/html/src"><span class="hs-identifier hs-var hs-var">runIdentityT</span></a></span><span> </span><span class="annot"><span class="annottext">(IdentityT (Decoder s) a -&gt; Decoder s a)
-&gt; IdentityT (Decoder s) a -&gt; Decoder s a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text
-&gt; (a -&gt; Int) -&gt; IdentityT (Decoder s) a -&gt; IdentityT (Decoder s) a
forall (m :: (* -&gt; *) -&gt; * -&gt; *) s a.
(MonadTrans m, Monad (m (Decoder s))) =&gt;
Text -&gt; (a -&gt; Int) -&gt; m (Decoder s) a -&gt; m (Decoder s) a
</span><a href="Data.Coders.html#decodeRecordNamedT"><span class="hs-identifier hs-var">decodeRecordNamedT</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679126862"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Int
</span><a href="#local-6989586621679126861"><span class="hs-identifier hs-var">getRecordSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decoder s a -&gt; IdentityT (Decoder s) a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="../../../../transformers/html/src"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679126860"><span class="hs-identifier hs-var">decoder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span>
</span><span id="line-162"></span><span id="local-6989586621679127524"><span id="local-6989586621679127525"><span id="local-6989586621679127527"><span class="annot"><a href="Data.Coders.html#decodeRecordNamedT"><span class="hs-identifier hs-type">decodeRecordNamedT</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-163"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier hs-type">MonadTrans</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127527"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Monad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679127527"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127525"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-164"></span><span>  </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier hs-type">Text.Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-165"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679127524"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-166"></span><span>  </span><span class="annot"><a href="#local-6989586621679127527"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127525"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679127524"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-167"></span><span>  </span><span class="annot"><a href="#local-6989586621679127527"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127525"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679127524"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-168"></span><span id="decodeRecordNamedT"><span class="annot"><span class="annottext">decodeRecordNamedT :: Text -&gt; (a -&gt; Int) -&gt; m (Decoder s) a -&gt; m (Decoder s) a
</span><a href="Data.Coders.html#decodeRecordNamedT"><span class="hs-identifier hs-var hs-var">decodeRecordNamedT</span></a></span></span><span> </span><span id="local-6989586621679126858"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679126858"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679126857"><span class="annot"><span class="annottext">a -&gt; Int
</span><a href="#local-6989586621679126857"><span class="hs-identifier hs-var">getRecordSize</span></a></span></span><span> </span><span id="local-6989586621679126856"><span class="annot"><span class="annottext">m (Decoder s) a
</span><a href="#local-6989586621679126856"><span class="hs-identifier hs-var">decoder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-169"></span><span>  </span><span id="local-6989586621679126855"><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679126855"><span class="hs-identifier hs-var">lenOrIndef</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s (Maybe Int) -&gt; m (Decoder s) (Maybe Int)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="../../../../transformers/html/src"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s (Maybe Int)
forall s. Decoder s (Maybe Int)
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">decodeListLenOrIndef</span></a></span><span>
</span><span id="line-170"></span><span>  </span><span id="local-6989586621679126854"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126854"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Decoder s) a
</span><a href="#local-6989586621679126856"><span class="hs-identifier hs-var">decoder</span></a></span><span>
</span><span id="line-171"></span><span>  </span><span class="annot"><span class="annottext">Decoder s () -&gt; m (Decoder s) ()
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="../../../../transformers/html/src"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">(Decoder s () -&gt; m (Decoder s) ())
-&gt; Decoder s () -&gt; m (Decoder s) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679126855"><span class="hs-identifier hs-var">lenOrIndef</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-172"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679126853"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126853"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Int -&gt; Int -&gt; Decoder s ()
forall s. Text -&gt; Int -&gt; Int -&gt; Decoder s ()
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">matchSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="../../../../text/html/src"><span class="hs-identifier hs-var">Text.pack</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\nRecord &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679126858"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126853"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Int
</span><a href="#local-6989586621679126857"><span class="hs-identifier hs-var">getRecordSize</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126854"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-173"></span><span>    </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-174"></span><span>      </span><span id="local-6989586621679126851"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679126851"><span class="hs-identifier hs-var">isBreak</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s Bool
forall s. Decoder s Bool
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">decodeBreakOr</span></a></span><span>
</span><span id="line-175"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; Decoder s () -&gt; Decoder s ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679126851"><span class="hs-identifier hs-var">isBreak</span></a></span><span> </span><span class="annot"><span class="annottext">(Decoder s () -&gt; Decoder s ()) -&gt; Decoder s () -&gt; Decoder s ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">DecoderError -&gt; Decoder s ()
forall e s a. Buildable e =&gt; e -&gt; Decoder s a
</span><a href="Data.Coders.html#cborError"><span class="hs-identifier hs-var">cborError</span></a></span><span> </span><span class="annot"><span class="annottext">(DecoderError -&gt; Decoder s ()) -&gt; DecoderError -&gt; Decoder s ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; DecoderError
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">DecoderErrorCustom</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679126858"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Excess terms in array&quot;</span></span><span>
</span><span id="line-176"></span><span>  </span><span class="annot"><span class="annottext">a -&gt; m (Decoder s) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126854"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span id="local-6989586621679127152"><span id="local-6989586621679127153"><span class="annot"><a href="Data.Coders.html#decodeRecordSum"><span class="hs-identifier hs-type">decodeRecordSum</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127153"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679127152"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127153"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127152"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-179"></span><span id="decodeRecordSum"><span class="annot"><span class="annottext">decodeRecordSum :: String -&gt; (Word -&gt; Decoder s (Int, a)) -&gt; Decoder s a
</span><a href="Data.Coders.html#decodeRecordSum"><span class="hs-identifier hs-var hs-var">decodeRecordSum</span></a></span></span><span> </span><span id="local-6989586621679126850"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126850"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679126849"><span class="annot"><span class="annottext">Word -&gt; Decoder s (Int, a)
</span><a href="#local-6989586621679126849"><span class="hs-identifier hs-var">decoder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-180"></span><span>  </span><span id="local-6989586621679126848"><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679126848"><span class="hs-identifier hs-var">lenOrIndef</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s (Maybe Int)
forall s. Decoder s (Maybe Int)
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">decodeListLenOrIndef</span></a></span><span>
</span><span id="line-181"></span><span>  </span><span id="local-6989586621679126847"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126847"><span class="hs-identifier hs-var">tag</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s Word
forall s. Decoder s Word
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">decodeWord</span></a></span><span>
</span><span id="line-182"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621679126846"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126846"><span class="hs-identifier hs-var">size</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679126845"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126845"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Decoder s (Int, a)
</span><a href="#local-6989586621679126849"><span class="hs-identifier hs-var">decoder</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126847"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="hs-comment">-- we decode all the stuff we want</span><span>
</span><span id="line-183"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679126848"><span class="hs-identifier hs-var">lenOrIndef</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-184"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679126844"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126844"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-185"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679126843"><span class="annot"><span class="annottext">errMsg :: String
</span><a href="#local-6989586621679126843"><span class="hs-identifier hs-var hs-var">errMsg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-186"></span><span>            </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\nSum &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126850"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\nreturned=&quot;</span></span><span>
</span><span id="line-187"></span><span>              </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126846"><span class="hs-identifier hs-var">size</span></a></span><span>
</span><span id="line-188"></span><span>              </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; actually read= &quot;</span></span><span>
</span><span id="line-189"></span><span>              </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126844"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-190"></span><span>       </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Int -&gt; Int -&gt; Decoder s ()
forall s. Text -&gt; Int -&gt; Int -&gt; Decoder s ()
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">matchSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="../../../../text/html/src"><span class="hs-identifier hs-var">Text.pack</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126843"><span class="hs-identifier hs-var">errMsg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126846"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126844"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-191"></span><span>    </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-192"></span><span>      </span><span id="local-6989586621679126841"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679126841"><span class="hs-identifier hs-var">isBreak</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s Bool
forall s. Decoder s Bool
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">decodeBreakOr</span></a></span><span> </span><span class="hs-comment">-- if there is stuff left, it is unnecessary extra stuff</span><span>
</span><span id="line-193"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; Decoder s () -&gt; Decoder s ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679126841"><span class="hs-identifier hs-var">isBreak</span></a></span><span> </span><span class="annot"><span class="annottext">(Decoder s () -&gt; Decoder s ()) -&gt; Decoder s () -&gt; Decoder s ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">DecoderError -&gt; Decoder s ()
forall e s a. Buildable e =&gt; e -&gt; Decoder s a
</span><a href="Data.Coders.html#cborError"><span class="hs-identifier hs-var">cborError</span></a></span><span> </span><span class="annot"><span class="annottext">(DecoderError -&gt; Decoder s ()) -&gt; DecoderError -&gt; Decoder s ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; DecoderError
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">DecoderErrorCustom</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="../../../../text/html/src"><span class="hs-identifier hs-var">Text.pack</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126850"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Excess terms in array&quot;</span></span><span>
</span><span id="line-194"></span><span>  </span><span class="annot"><span class="annottext">a -&gt; Decoder s a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126845"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-195"></span><span>
</span><span id="line-196"></span><span id="local-6989586621679127046"><span class="annot"><a href="Data.Coders.html#encodeNullMaybe"><span class="hs-identifier hs-type">encodeNullMaybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679127046"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Encoding</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127046"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Encoding</span></a></span></span><span>
</span><span id="line-197"></span><span id="encodeNullMaybe"><span class="annot"><span class="annottext">encodeNullMaybe :: (a -&gt; Encoding) -&gt; Maybe a -&gt; Encoding
</span><a href="Data.Coders.html#encodeNullMaybe"><span class="hs-identifier hs-var hs-var">encodeNullMaybe</span></a></span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Encoding
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Encoding
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">encodeNull</span></a></span><span>
</span><span id="line-198"></span><span class="annot"><a href="Data.Coders.html#encodeNullMaybe"><span class="hs-identifier hs-var">encodeNullMaybe</span></a></span><span> </span><span id="local-6989586621679126840"><span class="annot"><span class="annottext">a -&gt; Encoding
</span><a href="#local-6989586621679126840"><span class="hs-identifier hs-var">encoder</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679126839"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126839"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Encoding
</span><a href="#local-6989586621679126840"><span class="hs-identifier hs-var">encoder</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126839"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-199"></span><span>
</span><span id="line-200"></span><span id="local-6989586621679127043"><span id="local-6989586621679127044"><span class="annot"><a href="Data.Coders.html#decodeNullMaybe"><span class="hs-identifier hs-type">decodeNullMaybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127044"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127043"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127044"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127043"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-201"></span><span id="decodeNullMaybe"><span class="annot"><span class="annottext">decodeNullMaybe :: Decoder s a -&gt; Decoder s (Maybe a)
</span><a href="Data.Coders.html#decodeNullMaybe"><span class="hs-identifier hs-var hs-var">decodeNullMaybe</span></a></span></span><span> </span><span id="local-6989586621679126838"><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679126838"><span class="hs-identifier hs-var">decoder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-202"></span><span>  </span><span class="annot"><span class="annottext">Decoder s TokenType
forall s. Decoder s TokenType
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">peekTokenType</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s TokenType
-&gt; (TokenType -&gt; Decoder s (Maybe a)) -&gt; Decoder s (Maybe a)
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-203"></span><span>    </span><span class="annot"><span class="annottext">TokenType
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">TypeNull</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-204"></span><span>      </span><span class="annot"><span class="annottext">Decoder s ()
forall s. Decoder s ()
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">decodeNull</span></a></span><span>
</span><span id="line-205"></span><span>      </span><span class="annot"><span class="annottext">Maybe a -&gt; Decoder s (Maybe a)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe a
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-206"></span><span>    </span><span class="annot"><span class="annottext">TokenType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; Maybe a
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; Maybe a) -&gt; Decoder s a -&gt; Decoder s (Maybe a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679126838"><span class="hs-identifier hs-var">decoder</span></a></span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span id="local-6989586621679126992"><span id="local-6989586621679126993"><span id="local-6989586621679126994"><span class="annot"><a href="Data.Coders.html#decodePair"><span class="hs-identifier hs-type">decodePair</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126994"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126993"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126994"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126992"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126994"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679126993"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679126992"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-209"></span><span id="decodePair"><span class="annot"><span class="annottext">decodePair :: Decoder s a -&gt; Decoder s b -&gt; Decoder s (a, b)
</span><a href="Data.Coders.html#decodePair"><span class="hs-identifier hs-var hs-var">decodePair</span></a></span></span><span> </span><span id="local-6989586621679126835"><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679126835"><span class="hs-identifier hs-var">first</span></a></span></span><span> </span><span id="local-6989586621679126834"><span class="annot"><span class="annottext">Decoder s b
</span><a href="#local-6989586621679126834"><span class="hs-identifier hs-var">second</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; ((a, b) -&gt; Int) -&gt; Decoder s (a, b) -&gt; Decoder s (a, b)
forall a s. Text -&gt; (a -&gt; Int) -&gt; Decoder s a -&gt; Decoder s a
</span><a href="Data.Coders.html#decodeRecordNamed"><span class="hs-identifier hs-var">decodeRecordNamed</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;pair&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; (a, b) -&gt; Int
forall a b. a -&gt; b -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(a -&gt; b -&gt; (a, b)) -&gt; Decoder s a -&gt; Decoder s (b -&gt; (a, b))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679126835"><span class="hs-identifier hs-var">first</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s (b -&gt; (a, b)) -&gt; Decoder s b -&gt; Decoder s (a, b)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s b
</span><a href="#local-6989586621679126834"><span class="hs-identifier hs-var">second</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-210"></span><span>
</span><span id="line-211"></span><span id="local-6989586621679126831"><span id="local-6989586621679126832"><span class="annot"><a href="Data.Coders.html#encodePair"><span class="hs-identifier hs-type">encodePair</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679126832"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Encoding</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679126831"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Encoding</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679126832"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679126831"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Encoding</span></a></span></span></span><span>
</span><span id="line-212"></span><span id="encodePair"><span class="annot"><span class="annottext">encodePair :: (a -&gt; Encoding) -&gt; (b -&gt; Encoding) -&gt; (a, b) -&gt; Encoding
</span><a href="Data.Coders.html#encodePair"><span class="hs-identifier hs-var hs-var">encodePair</span></a></span></span><span> </span><span id="local-6989586621679126830"><span class="annot"><span class="annottext">a -&gt; Encoding
</span><a href="#local-6989586621679126830"><span class="hs-identifier hs-var">encodeFirst</span></a></span></span><span> </span><span id="local-6989586621679126829"><span class="annot"><span class="annottext">b -&gt; Encoding
</span><a href="#local-6989586621679126829"><span class="hs-identifier hs-var">encodeSecond</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679126828"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126828"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679126827"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679126827"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-213"></span><span>  </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">encodeListLen</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">2</span></span><span>
</span><span id="line-214"></span><span>    </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Encoding
</span><a href="#local-6989586621679126830"><span class="hs-identifier hs-var">encodeFirst</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126828"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-215"></span><span>    </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; Encoding
</span><a href="#local-6989586621679126829"><span class="hs-identifier hs-var">encodeSecond</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679126827"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span id="local-6989586621679127147"><span id="local-6989586621679127148"><span class="annot"><a href="Data.Coders.html#invalidKey"><span class="hs-identifier hs-type">invalidKey</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127148"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127147"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-218"></span><span id="invalidKey"><span class="annot"><span class="annottext">invalidKey :: Word -&gt; Decoder s a
</span><a href="Data.Coders.html#invalidKey"><span class="hs-identifier hs-var hs-var">invalidKey</span></a></span></span><span> </span><span id="local-6989586621679126826"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126826"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DecoderError -&gt; Decoder s a
forall e s a. Buildable e =&gt; e -&gt; Decoder s a
</span><a href="Data.Coders.html#cborError"><span class="hs-identifier hs-var">cborError</span></a></span><span> </span><span class="annot"><span class="annottext">(DecoderError -&gt; Decoder s a) -&gt; DecoderError -&gt; Decoder s a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; DecoderError
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">DecoderErrorCustom</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;not a valid key:&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="../../../../text/html/src"><span class="hs-identifier hs-var">Text.pack</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; String -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126826"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-219"></span><span>
</span><span id="line-220"></span><span id="local-6989586621679127098"><span id="local-6989586621679127099"><span class="annot"><a href="Data.Coders.html#duplicateKey"><span class="hs-identifier hs-type">duplicateKey</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127099"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127098"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-221"></span><span id="duplicateKey"><span class="annot"><span class="annottext">duplicateKey :: String -&gt; Word -&gt; Decoder s a
</span><a href="Data.Coders.html#duplicateKey"><span class="hs-identifier hs-var hs-var">duplicateKey</span></a></span></span><span> </span><span id="local-6989586621679126825"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126825"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679126824"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126824"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-222"></span><span>  </span><span class="annot"><span class="annottext">DecoderError -&gt; Decoder s a
forall e s a. Buildable e =&gt; e -&gt; Decoder s a
</span><a href="Data.Coders.html#cborError"><span class="hs-identifier hs-var">cborError</span></a></span><span> </span><span class="annot"><span class="annottext">(DecoderError -&gt; Decoder s a) -&gt; DecoderError -&gt; Decoder s a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-223"></span><span>    </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; DecoderError
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">DecoderErrorCustom</span></a></span><span>
</span><span id="line-224"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Duplicate key:&quot;</span></span><span>
</span><span id="line-225"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="../../../../text/html/src"><span class="hs-identifier hs-var">Text.pack</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; String -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126824"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; while decoding type &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126825"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-226"></span><span>
</span><span id="line-227"></span><span id="local-6989586621679127104"><span id="local-6989586621679127105"><span class="annot"><a href="Data.Coders.html#unusedRequiredKeys"><span class="hs-identifier hs-type">unusedRequiredKeys</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127105"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127104"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-228"></span><span id="unusedRequiredKeys"><span class="annot"><span class="annottext">unusedRequiredKeys :: Set Word -&gt; [(Word, String)] -&gt; String -&gt; Decoder s a
</span><a href="Data.Coders.html#unusedRequiredKeys"><span class="hs-identifier hs-var hs-var">unusedRequiredKeys</span></a></span></span><span> </span><span id="local-6989586621679126823"><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679126823"><span class="hs-identifier hs-var">used</span></a></span></span><span> </span><span id="local-6989586621679126822"><span class="annot"><span class="annottext">[(Word, String)]
</span><a href="#local-6989586621679126822"><span class="hs-identifier hs-var">required</span></a></span></span><span> </span><span id="local-6989586621679126821"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126821"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-229"></span><span>  </span><span class="annot"><span class="annottext">DecoderError -&gt; Decoder s a
forall e s a. Buildable e =&gt; e -&gt; Decoder s a
</span><a href="Data.Coders.html#cborError"><span class="hs-identifier hs-var">cborError</span></a></span><span> </span><span class="annot"><span class="annottext">(DecoderError -&gt; Decoder s a) -&gt; DecoderError -&gt; Decoder s a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-230"></span><span>    </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; DecoderError
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">DecoderErrorCustom</span></a></span><span>
</span><span id="line-231"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="../../../../text/html/src"><span class="hs-identifier hs-var">Text.pack</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;value of type &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126821"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-232"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="../../../../text/html/src"><span class="hs-identifier hs-var">Text.pack</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Word, String)] -&gt; String
forall a. Show a =&gt; [(a, String)] -&gt; String
</span><a href="#local-6989586621679126820"><span class="hs-identifier hs-var">message</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Word, String) -&gt; Bool) -&gt; [(Word, String)] -&gt; [(Word, String)]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">(Word, String) -&gt; Bool
</span><a href="#local-6989586621679126819"><span class="hs-identifier hs-var">bad</span></a></span><span> </span><span class="annot"><span class="annottext">[(Word, String)]
</span><a href="#local-6989586621679126822"><span class="hs-identifier hs-var">required</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-233"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-234"></span><span>    </span><span id="local-6989586621679126819"><span class="annot"><span class="annottext">bad :: (Word, String) -&gt; Bool
</span><a href="#local-6989586621679126819"><span class="hs-identifier hs-var hs-var">bad</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679126818"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126818"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">not</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word -&gt; Set Word -&gt; Bool
forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">member</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126818"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679126823"><span class="hs-identifier hs-var">used</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-235"></span><span>    </span><span id="local-6989586621679126820"><span class="annot"><span class="annottext">message :: [(a, String)] -&gt; String
</span><a href="#local-6989586621679126820"><span class="hs-identifier hs-var hs-var">message</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, not decoded.&quot;</span></span><span>
</span><span id="line-236"></span><span>    </span><span class="annot"><a href="#local-6989586621679126820"><span class="hs-identifier hs-var">message</span></a></span><span> </span><span class="hs-special">[</span><span id="local-6989586621679126816"><span class="annot"><span class="annottext">(a, String)
</span><a href="#local-6989586621679126816"><span class="hs-identifier hs-var">pair</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a, String) -&gt; String
forall a. Show a =&gt; (a, String) -&gt; String
</span><a href="#local-6989586621679126815"><span class="hs-identifier hs-var">report</span></a></span><span> </span><span class="annot"><span class="annottext">(a, String)
</span><a href="#local-6989586621679126816"><span class="hs-identifier hs-var">pair</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[(a, String)] -&gt; String
</span><a href="#local-6989586621679126820"><span class="hs-identifier hs-var">message</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-237"></span><span>    </span><span class="annot"><a href="#local-6989586621679126820"><span class="hs-identifier hs-var">message</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679126814"><span class="annot"><span class="annottext">(a, String)
</span><a href="#local-6989586621679126814"><span class="hs-identifier hs-var">pair</span></a></span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">:</span></a></span><span> </span><span id="local-6989586621679126813"><span class="annot"><span class="annottext">[(a, String)]
</span><a href="#local-6989586621679126813"><span class="hs-identifier hs-var">more</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a, String) -&gt; String
forall a. Show a =&gt; (a, String) -&gt; String
</span><a href="#local-6989586621679126815"><span class="hs-identifier hs-var">report</span></a></span><span> </span><span class="annot"><span class="annottext">(a, String)
</span><a href="#local-6989586621679126814"><span class="hs-identifier hs-var">pair</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, and &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[(a, String)] -&gt; String
</span><a href="#local-6989586621679126820"><span class="hs-identifier hs-var">message</span></a></span><span> </span><span class="annot"><span class="annottext">[(a, String)]
</span><a href="#local-6989586621679126813"><span class="hs-identifier hs-var">more</span></a></span><span>
</span><span id="line-238"></span><span>    </span><span id="local-6989586621679126815"><span class="annot"><span class="annottext">report :: (a, String) -&gt; String
</span><a href="#local-6989586621679126815"><span class="hs-identifier hs-var hs-var">report</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679126812"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126812"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679126811"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126811"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;field &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126811"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; with key &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126812"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-239"></span><span>
</span><span id="line-240"></span><span id="local-6989586621679127453"><span id="local-6989586621679127454"><span class="annot"><a href="Data.Coders.html#decodeList"><span class="hs-identifier hs-type">decodeList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127454"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127453"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127454"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679127453"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-241"></span><span id="decodeList"><span class="annot"><span class="annottext">decodeList :: Decoder s a -&gt; Decoder s [a]
</span><a href="Data.Coders.html#decodeList"><span class="hs-identifier hs-var hs-var">decodeList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decoder s (Maybe Int) -&gt; Decoder s a -&gt; Decoder s [a]
forall s a. Decoder s (Maybe Int) -&gt; Decoder s a -&gt; Decoder s [a]
</span><a href="Data.Coders.html#decodeCollection"><span class="hs-identifier hs-var">decodeCollection</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s (Maybe Int)
forall s. Decoder s (Maybe Int)
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">decodeListLenOrIndef</span></a></span><span>
</span><span id="line-242"></span><span>
</span><span id="line-243"></span><span id="local-6989586621679127053"><span id="local-6989586621679127054"><span class="annot"><a href="Data.Coders.html#decodeSeq"><span class="hs-identifier hs-type">decodeSeq</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127054"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127053"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127054"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Seq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127053"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-244"></span><span id="decodeSeq"><span class="annot"><span class="annottext">decodeSeq :: Decoder s a -&gt; Decoder s (Seq a)
</span><a href="Data.Coders.html#decodeSeq"><span class="hs-identifier hs-var hs-var">decodeSeq</span></a></span></span><span> </span><span id="local-6989586621679126810"><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679126810"><span class="hs-identifier hs-var">decoder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; Seq a
forall a. [a] -&gt; Seq a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Seq.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">([a] -&gt; Seq a) -&gt; Decoder s [a] -&gt; Decoder s (Seq a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s a -&gt; Decoder s [a]
forall s a. Decoder s a -&gt; Decoder s [a]
</span><a href="Data.Coders.html#decodeList"><span class="hs-identifier hs-var">decodeList</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679126810"><span class="hs-identifier hs-var">decoder</span></a></span><span>
</span><span id="line-245"></span><span>
</span><span id="line-246"></span><span id="local-6989586621679127039"><span id="local-6989586621679127040"><span class="annot"><a href="Data.Coders.html#decodeStrictSeq"><span class="hs-identifier hs-type">decodeStrictSeq</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127040"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127039"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127040"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier hs-type">StrictSeq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127039"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-247"></span><span id="decodeStrictSeq"><span class="annot"><span class="annottext">decodeStrictSeq :: Decoder s a -&gt; Decoder s (StrictSeq a)
</span><a href="Data.Coders.html#decodeStrictSeq"><span class="hs-identifier hs-var hs-var">decodeStrictSeq</span></a></span></span><span> </span><span id="local-6989586621679126808"><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679126808"><span class="hs-identifier hs-var">decoder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; StrictSeq a
forall a. [a] -&gt; StrictSeq a
</span><a href="../../../../strict-containers/html/src"><span class="hs-identifier hs-var">StrictSeq.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">([a] -&gt; StrictSeq a) -&gt; Decoder s [a] -&gt; Decoder s (StrictSeq a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s a -&gt; Decoder s [a]
forall s a. Decoder s a -&gt; Decoder s [a]
</span><a href="Data.Coders.html#decodeList"><span class="hs-identifier hs-var">decodeList</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679126808"><span class="hs-identifier hs-var">decoder</span></a></span><span>
</span><span id="line-248"></span><span>
</span><span id="line-249"></span><span id="local-6989586621679127049"><span id="local-6989586621679127050"><span class="annot"><a href="Data.Coders.html#decodeSet"><span class="hs-identifier hs-type">decodeSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127050"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127049"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127050"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127049"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127050"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-250"></span><span id="decodeSet"><span class="annot"><span class="annottext">decodeSet :: Decoder s a -&gt; Decoder s (Set a)
</span><a href="Data.Coders.html#decodeSet"><span class="hs-identifier hs-var hs-var">decodeSet</span></a></span></span><span> </span><span id="local-6989586621679126806"><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679126806"><span class="hs-identifier hs-var">decoder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; Set a
forall a. Ord a =&gt; [a] -&gt; Set a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Set.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">([a] -&gt; Set a) -&gt; Decoder s [a] -&gt; Decoder s (Set a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s a -&gt; Decoder s [a]
forall s a. Decoder s a -&gt; Decoder s [a]
</span><a href="Data.Coders.html#decodeList"><span class="hs-identifier hs-var">decodeList</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679126806"><span class="hs-identifier hs-var">decoder</span></a></span><span>
</span><span id="line-251"></span><span>
</span><span id="line-252"></span><span id="local-6989586621679126986"><span id="local-6989586621679126987"><span class="annot"><a href="Data.Coders.html#decodeAnnSet"><span class="hs-identifier hs-type">decodeAnnSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126987"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126986"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">Annotator</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126987"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126986"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">Annotator</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126987"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-253"></span><span id="decodeAnnSet"><span class="annot"><span class="annottext">decodeAnnSet :: Decoder s (Annotator t) -&gt; Decoder s (Annotator (Set t))
</span><a href="Data.Coders.html#decodeAnnSet"><span class="hs-identifier hs-var hs-var">decodeAnnSet</span></a></span></span><span> </span><span id="local-6989586621679126804"><span class="annot"><span class="annottext">Decoder s (Annotator t)
</span><a href="#local-6989586621679126804"><span class="hs-identifier hs-var">dec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-254"></span><span>  </span><span id="local-6989586621679126803"><span class="annot"><span class="annottext">[Annotator t]
</span><a href="#local-6989586621679126803"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s (Annotator t) -&gt; Decoder s [Annotator t]
forall s a. Decoder s a -&gt; Decoder s [a]
</span><a href="Data.Coders.html#decodeList"><span class="hs-identifier hs-var">decodeList</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s (Annotator t)
</span><a href="#local-6989586621679126804"><span class="hs-identifier hs-var">dec</span></a></span><span>
</span><span id="line-255"></span><span>  </span><span class="annot"><span class="annottext">Annotator (Set t) -&gt; Decoder s (Annotator (Set t))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[t] -&gt; Set t
forall a. Ord a =&gt; [a] -&gt; Set a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Set.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">([t] -&gt; Set t) -&gt; Annotator [t] -&gt; Annotator (Set t)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Annotator t] -&gt; Annotator [t]
forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Traversable t, Monad m) =&gt;
t (m a) -&gt; m (t a)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">sequence</span></a></span><span> </span><span class="annot"><span class="annottext">[Annotator t]
</span><a href="#local-6989586621679126803"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-256"></span><span>
</span><span id="line-257"></span><span id="local-6989586621679127459"><span id="local-6989586621679127460"><span class="annot"><a href="Data.Coders.html#decodeCollection"><span class="hs-identifier hs-type">decodeCollection</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127460"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127460"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127459"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127460"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679127459"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-258"></span><span id="decodeCollection"><span class="annot"><span class="annottext">decodeCollection :: Decoder s (Maybe Int) -&gt; Decoder s a -&gt; Decoder s [a]
</span><a href="Data.Coders.html#decodeCollection"><span class="hs-identifier hs-var hs-var">decodeCollection</span></a></span></span><span> </span><span id="local-6989586621679126801"><span class="annot"><span class="annottext">Decoder s (Maybe Int)
</span><a href="#local-6989586621679126801"><span class="hs-identifier hs-var">lenOrIndef</span></a></span></span><span> </span><span id="local-6989586621679126800"><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679126800"><span class="hs-identifier hs-var">el</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int, [a]) -&gt; [a]
forall a b. (a, b) -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">((Int, [a]) -&gt; [a]) -&gt; Decoder s (Int, [a]) -&gt; Decoder s [a]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s (Maybe Int) -&gt; Decoder s a -&gt; Decoder s (Int, [a])
forall s a.
Decoder s (Maybe Int) -&gt; Decoder s a -&gt; Decoder s (Int, [a])
</span><a href="Data.Coders.html#decodeCollectionWithLen"><span class="hs-identifier hs-var">decodeCollectionWithLen</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s (Maybe Int)
</span><a href="#local-6989586621679126801"><span class="hs-identifier hs-var">lenOrIndef</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679126800"><span class="hs-identifier hs-var">el</span></a></span><span>
</span><span id="line-259"></span><span>
</span><span id="line-260"></span><span id="local-6989586621679127434"><span id="local-6989586621679127435"><span class="annot"><a href="Data.Coders.html#decodeCollectionWithLen"><span class="hs-identifier hs-type">decodeCollectionWithLen</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-261"></span><span>  </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127435"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-262"></span><span>  </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127435"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127434"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-263"></span><span>  </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127435"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679127434"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-264"></span><span id="decodeCollectionWithLen"><span class="annot"><span class="annottext">decodeCollectionWithLen :: Decoder s (Maybe Int) -&gt; Decoder s a -&gt; Decoder s (Int, [a])
</span><a href="Data.Coders.html#decodeCollectionWithLen"><span class="hs-identifier hs-var hs-var">decodeCollectionWithLen</span></a></span></span><span> </span><span id="local-6989586621679126799"><span class="annot"><span class="annottext">Decoder s (Maybe Int)
</span><a href="#local-6989586621679126799"><span class="hs-identifier hs-var">lenOrIndef</span></a></span></span><span> </span><span id="local-6989586621679126798"><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679126798"><span class="hs-identifier hs-var">el</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-265"></span><span>  </span><span class="annot"><span class="annottext">Decoder s (Maybe Int)
</span><a href="#local-6989586621679126799"><span class="hs-identifier hs-var">lenOrIndef</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s (Maybe Int)
-&gt; (Maybe Int -&gt; Decoder s (Int, [a])) -&gt; Decoder s (Int, [a])
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-266"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679126797"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126797"><span class="hs-identifier hs-var">len</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126797"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">([a] -&gt; (Int, [a])) -&gt; Decoder s [a] -&gt; Decoder s (Int, [a])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Decoder s a -&gt; Decoder s [a]
forall (m :: * -&gt; *) a. Applicative m =&gt; Int -&gt; m a -&gt; m [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">replicateM</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126797"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679126798"><span class="hs-identifier hs-var">el</span></a></span><span>
</span><span id="line-267"></span><span>    </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Int, [a]) -&gt; Decoder s Bool -&gt; Decoder s a -&gt; Decoder s (Int, [a])
forall (m :: * -&gt; *) a a.
(Monad m, Num a) =&gt;
(a, [a]) -&gt; m Bool -&gt; m a -&gt; m (a, [a])
</span><a href="#local-6989586621679126796"><span class="hs-identifier hs-var">loop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">not</span></a></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Decoder s Bool -&gt; Decoder s Bool
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s Bool
forall s. Decoder s Bool
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">decodeBreakOr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679126798"><span class="hs-identifier hs-var">el</span></a></span><span>
</span><span id="line-268"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-269"></span><span>    </span><span id="local-6989586621679126796"><span class="annot"><span class="annottext">loop :: (a, [a]) -&gt; m Bool -&gt; m a -&gt; m (a, [a])
</span><a href="#local-6989586621679126796"><span class="hs-identifier hs-var hs-var">loop</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679126795"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126795"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679126794"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679126794"><span class="hs-identifier hs-var">acc</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679126793"><span class="annot"><span class="annottext">m Bool
</span><a href="#local-6989586621679126793"><span class="hs-identifier hs-var">condition</span></a></span></span><span> </span><span id="local-6989586621679126792"><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621679126792"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-270"></span><span>      </span><span class="annot"><span class="annottext">m Bool
</span><a href="#local-6989586621679126793"><span class="hs-identifier hs-var">condition</span></a></span><span> </span><span class="annot"><span class="annottext">m Bool -&gt; (Bool -&gt; m (a, [a])) -&gt; m (a, [a])
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-271"></span><span>        </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(a, [a]) -&gt; m (a, [a])
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126795"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; [a]
forall a. [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">reverse</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679126794"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-272"></span><span>        </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621679126792"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="annot"><span class="annottext">m a -&gt; (a -&gt; m (a, [a])) -&gt; m (a, [a])
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679126790"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126790"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(a, [a]) -&gt; m Bool -&gt; m a -&gt; m (a, [a])
</span><a href="#local-6989586621679126796"><span class="hs-identifier hs-var">loop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126795"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126790"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; [a] -&gt; [a]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679126794"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">m Bool
</span><a href="#local-6989586621679126793"><span class="hs-identifier hs-var">condition</span></a></span><span> </span><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621679126792"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-273"></span><span>
</span><span id="line-274"></span><span id="local-6989586621679127353"><span id="local-6989586621679127354"><span id="local-6989586621679127355"><span class="annot"><a href="Data.Coders.html#decodeAccWithLen"><span class="hs-identifier hs-type">decodeAccWithLen</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-275"></span><span>  </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127355"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-276"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679127354"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679127353"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679127353"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-277"></span><span>  </span><span class="annot"><a href="#local-6989586621679127353"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-278"></span><span>  </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127355"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127354"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-279"></span><span>  </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127355"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679127353"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-280"></span><span id="decodeAccWithLen"><span class="annot"><span class="annottext">decodeAccWithLen :: Decoder s (Maybe Int)
-&gt; (a -&gt; b -&gt; b) -&gt; b -&gt; Decoder s a -&gt; Decoder s (Int, b)
</span><a href="Data.Coders.html#decodeAccWithLen"><span class="hs-identifier hs-var hs-var">decodeAccWithLen</span></a></span></span><span> </span><span id="local-6989586621679126787"><span class="annot"><span class="annottext">Decoder s (Maybe Int)
</span><a href="#local-6989586621679126787"><span class="hs-identifier hs-var">lenOrIndef</span></a></span></span><span> </span><span id="local-6989586621679126786"><span class="annot"><span class="annottext">a -&gt; b -&gt; b
</span><a href="#local-6989586621679126786"><span class="hs-identifier hs-var">combine</span></a></span></span><span> </span><span id="local-6989586621679126785"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679126785"><span class="hs-identifier hs-var">acc0</span></a></span></span><span> </span><span id="local-6989586621679126784"><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679126784"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-281"></span><span>  </span><span id="local-6989586621679126783"><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679126783"><span class="hs-identifier hs-var">mLen</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s (Maybe Int)
</span><a href="#local-6989586621679126787"><span class="hs-identifier hs-var">lenOrIndef</span></a></span><span>
</span><span id="line-282"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679126782"><span class="annot"><span class="annottext">condition :: Decoder s (Int -&gt; Bool)
</span><a href="#local-6989586621679126782"><span class="hs-identifier hs-var hs-var">condition</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679126783"><span class="hs-identifier hs-var">mLen</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-283"></span><span>        </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Int -&gt; Bool
forall a b. a -&gt; b -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Int -&gt; Bool) -&gt; Decoder s Bool -&gt; Decoder s (Int -&gt; Bool)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s Bool
forall s. Decoder s Bool
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">decodeBreakOr</span></a></span><span>
</span><span id="line-284"></span><span>        </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679126781"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126781"><span class="hs-identifier hs-var">len</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Bool) -&gt; Decoder s (Int -&gt; Bool)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126781"><span class="hs-identifier hs-var">len</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-285"></span><span>      </span><span id="local-6989586621679126780"><span class="annot"><span class="annottext">loop :: Int -&gt; b -&gt; Decoder s (Int, b)
</span><a href="#local-6989586621679126780"><span class="hs-identifier hs-var hs-var">loop</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679126779"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126779"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679126778"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679126778"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-286"></span><span>        </span><span id="local-6989586621679126777"><span class="annot"><span class="annottext">Int -&gt; Bool
</span><a href="#local-6989586621679126777"><span class="hs-identifier hs-var">shouldStop</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s (Int -&gt; Bool)
</span><a href="#local-6989586621679126782"><span class="hs-identifier hs-var">condition</span></a></span><span>
</span><span id="line-287"></span><span>        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Bool
</span><a href="#local-6989586621679126777"><span class="hs-identifier hs-var">shouldStop</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126779"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-288"></span><span>          </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">(Int, b) -&gt; Decoder s (Int, b)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126779"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679126778"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-289"></span><span>          </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-290"></span><span>            </span><span id="local-6989586621679126776"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126776"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679126784"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-291"></span><span>            </span><span class="annot"><span class="annottext">Int -&gt; b -&gt; Decoder s (Int, b)
</span><a href="#local-6989586621679126780"><span class="hs-identifier hs-var">loop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126779"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126776"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; b -&gt; b
</span><a href="#local-6989586621679126786"><span class="hs-operator hs-var">`combine`</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679126778"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-292"></span><span>  </span><span class="annot"><span class="annottext">Int -&gt; b -&gt; Decoder s (Int, b)
</span><a href="#local-6989586621679126780"><span class="hs-identifier hs-var">loop</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679126785"><span class="hs-identifier hs-var">acc0</span></a></span><span>
</span><span id="line-293"></span><span>
</span><span id="line-294"></span><span id="local-6989586621679127058"><span id="local-6989586621679127059"><span class="annot"><a href="Data.Coders.html#encodeFoldable"><span class="hs-identifier hs-type">encodeFoldable</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127059"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Foldable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127058"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679127058"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127059"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Encoding</span></a></span></span></span><span>
</span><span id="line-295"></span><span id="encodeFoldable"><span class="annot"><span class="annottext">encodeFoldable :: f a -&gt; Encoding
</span><a href="Data.Coders.html#encodeFoldable"><span class="hs-identifier hs-var hs-var">encodeFoldable</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; Encoding) -&gt; f a -&gt; Encoding
forall (f :: * -&gt; *) a.
Foldable f =&gt;
(a -&gt; Encoding) -&gt; f a -&gt; Encoding
</span><a href="Data.Coders.html#encodeFoldableEncoder"><span class="hs-identifier hs-var">encodeFoldableEncoder</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span>
</span><span id="line-296"></span><span>
</span><span id="line-297"></span><span id="local-6989586621679126774"><span id="local-6989586621679126775"><span class="annot"><a href="Data.Coders.html#encodeFoldableAsIndefinite"><span class="hs-identifier hs-type">encodeFoldableAsIndefinite</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126775"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Foldable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126774"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679126774"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126775"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Encoding</span></a></span></span></span><span>
</span><span id="line-298"></span><span id="encodeFoldableAsIndefinite"><span class="annot"><span class="annottext">encodeFoldableAsIndefinite :: f a -&gt; Encoding
</span><a href="Data.Coders.html#encodeFoldableAsIndefinite"><span class="hs-identifier hs-var hs-var">encodeFoldableAsIndefinite</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Word -&gt; Encoding -&gt; Encoding)
-&gt; (a -&gt; Encoding) -&gt; f a -&gt; Encoding
forall (f :: * -&gt; *) a.
Foldable f =&gt;
(Word -&gt; Encoding -&gt; Encoding)
-&gt; (a -&gt; Encoding) -&gt; f a -&gt; Encoding
</span><a href="Data.Coders.html#encodeFoldableEncoderAs"><span class="hs-identifier hs-var">encodeFoldableEncoderAs</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encoding -&gt; Encoding
forall p. p -&gt; Encoding -&gt; Encoding
</span><a href="#local-6989586621679126772"><span class="hs-identifier hs-var">wrapArray</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span>
</span><span id="line-299"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-300"></span><span>    </span><span id="local-6989586621679126772"><span class="annot"><span class="annottext">wrapArray :: p -&gt; Encoding -&gt; Encoding
</span><a href="#local-6989586621679126772"><span class="hs-identifier hs-var hs-var">wrapArray</span></a></span></span><span> </span><span id="local-6989586621679126771"><span class="annot"><span class="annottext">p
</span><a href="#local-6989586621679126771"><span class="hs-identifier hs-var">_len</span></a></span></span><span> </span><span id="local-6989586621679126770"><span class="annot"><span class="annottext">Encoding
</span><a href="#local-6989586621679126770"><span class="hs-identifier hs-var">contents</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Encoding
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">encodeListLenIndef</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding
</span><a href="#local-6989586621679126770"><span class="hs-identifier hs-var">contents</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">encodeBreak</span></a></span><span>
</span><span id="line-301"></span><span>
</span><span id="line-302"></span><span id="local-6989586621679126768"><span id="local-6989586621679126769"><span class="annot"><a href="Data.Coders.html#encodeFoldableAsDefinite"><span class="hs-identifier hs-type">encodeFoldableAsDefinite</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126769"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Foldable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126768"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679126768"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126769"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Encoding</span></a></span></span></span><span>
</span><span id="line-303"></span><span id="encodeFoldableAsDefinite"><span class="annot"><span class="annottext">encodeFoldableAsDefinite :: f a -&gt; Encoding
</span><a href="Data.Coders.html#encodeFoldableAsDefinite"><span class="hs-identifier hs-var hs-var">encodeFoldableAsDefinite</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Word -&gt; Encoding -&gt; Encoding)
-&gt; (a -&gt; Encoding) -&gt; f a -&gt; Encoding
forall (f :: * -&gt; *) a.
Foldable f =&gt;
(Word -&gt; Encoding -&gt; Encoding)
-&gt; (a -&gt; Encoding) -&gt; f a -&gt; Encoding
</span><a href="Data.Coders.html#encodeFoldableEncoderAs"><span class="hs-identifier hs-var">encodeFoldableEncoderAs</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encoding -&gt; Encoding
</span><a href="#local-6989586621679126767"><span class="hs-identifier hs-var">wrapArray</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span>
</span><span id="line-304"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-305"></span><span>    </span><span id="local-6989586621679126767"><span class="annot"><span class="annottext">wrapArray :: Word -&gt; Encoding -&gt; Encoding
</span><a href="#local-6989586621679126767"><span class="hs-identifier hs-var hs-var">wrapArray</span></a></span></span><span> </span><span id="local-6989586621679126766"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126766"><span class="hs-identifier hs-var">len</span></a></span></span><span> </span><span id="local-6989586621679126765"><span class="annot"><span class="annottext">Encoding
</span><a href="#local-6989586621679126765"><span class="hs-identifier hs-var">contents</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">encodeListLen</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126766"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding
</span><a href="#local-6989586621679126765"><span class="hs-identifier hs-var">contents</span></a></span><span>
</span><span id="line-306"></span><span>
</span><span id="line-307"></span><span class="hs-comment">-- Encodes a sequence of pairs as a cbor map</span><span>
</span><span id="line-308"></span><span id="local-6989586621679126762"><span id="local-6989586621679126763"><span id="local-6989586621679126764"><span class="annot"><a href="Data.Coders.html#encodeFoldableMapPairs"><span class="hs-identifier hs-type">encodeFoldableMapPairs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126764"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126763"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Foldable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126762"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679126762"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679126764"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679126763"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Encoding</span></a></span></span></span></span><span>
</span><span id="line-309"></span><span id="encodeFoldableMapPairs"><span class="annot"><span class="annottext">encodeFoldableMapPairs :: f (a, b) -&gt; Encoding
</span><a href="Data.Coders.html#encodeFoldableMapPairs"><span class="hs-identifier hs-var hs-var">encodeFoldableMapPairs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Word -&gt; Encoding -&gt; Encoding)
-&gt; ((a, b) -&gt; Encoding) -&gt; f (a, b) -&gt; Encoding
forall (f :: * -&gt; *) a.
Foldable f =&gt;
(Word -&gt; Encoding -&gt; Encoding)
-&gt; (a -&gt; Encoding) -&gt; f a -&gt; Encoding
</span><a href="Data.Coders.html#encodeFoldableEncoderAs"><span class="hs-identifier hs-var">encodeFoldableEncoderAs</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encoding -&gt; Encoding
</span><a href="Data.Coders.html#wrapCBORMap"><span class="hs-identifier hs-var">wrapCBORMap</span></a></span><span> </span><span class="annot"><span class="annottext">(((a, b) -&gt; Encoding) -&gt; f (a, b) -&gt; Encoding)
-&gt; ((a, b) -&gt; Encoding) -&gt; f (a, b) -&gt; Encoding
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-310"></span><span>  </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679126761"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126761"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679126760"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679126760"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126761"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679126760"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-311"></span><span>
</span><span id="line-312"></span><span id="local-6989586621679127417"><span id="local-6989586621679127418"><span class="annot"><a href="Data.Coders.html#encodeFoldableEncoder"><span class="hs-identifier hs-type">encodeFoldableEncoder</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Foldable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127418"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679127417"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Encoding</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679127418"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127417"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Encoding</span></a></span></span></span><span>
</span><span id="line-313"></span><span id="encodeFoldableEncoder"><span class="annot"><span class="annottext">encodeFoldableEncoder :: (a -&gt; Encoding) -&gt; f a -&gt; Encoding
</span><a href="Data.Coders.html#encodeFoldableEncoder"><span class="hs-identifier hs-var hs-var">encodeFoldableEncoder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Word -&gt; Encoding -&gt; Encoding)
-&gt; (a -&gt; Encoding) -&gt; f a -&gt; Encoding
forall (f :: * -&gt; *) a.
Foldable f =&gt;
(Word -&gt; Encoding -&gt; Encoding)
-&gt; (a -&gt; Encoding) -&gt; f a -&gt; Encoding
</span><a href="Data.Coders.html#encodeFoldableEncoderAs"><span class="hs-identifier hs-var">encodeFoldableEncoderAs</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encoding -&gt; Encoding
</span><a href="Data.Coders.html#wrapCBORArray"><span class="hs-identifier hs-var">wrapCBORArray</span></a></span><span>
</span><span id="line-314"></span><span>
</span><span id="line-315"></span><span id="local-6989586621679127411"><span id="local-6989586621679127412"><span class="annot"><a href="Data.Coders.html#encodeFoldableEncoderAs"><span class="hs-identifier hs-type">encodeFoldableEncoderAs</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-316"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Foldable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127412"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-317"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Encoding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Encoding</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-318"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679127411"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Encoding</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-319"></span><span>  </span><span class="annot"><a href="#local-6989586621679127412"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127411"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-320"></span><span>  </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Encoding</span></a></span></span></span><span>
</span><span id="line-321"></span><span id="encodeFoldableEncoderAs"><span class="annot"><span class="annottext">encodeFoldableEncoderAs :: (Word -&gt; Encoding -&gt; Encoding)
-&gt; (a -&gt; Encoding) -&gt; f a -&gt; Encoding
</span><a href="Data.Coders.html#encodeFoldableEncoderAs"><span class="hs-identifier hs-var hs-var">encodeFoldableEncoderAs</span></a></span></span><span> </span><span id="local-6989586621679126759"><span class="annot"><span class="annottext">Word -&gt; Encoding -&gt; Encoding
</span><a href="#local-6989586621679126759"><span class="hs-identifier hs-var">wrap</span></a></span></span><span> </span><span id="local-6989586621679126758"><span class="annot"><span class="annottext">a -&gt; Encoding
</span><a href="#local-6989586621679126758"><span class="hs-identifier hs-var">encoder</span></a></span></span><span> </span><span id="local-6989586621679126757"><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679126757"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encoding -&gt; Encoding
</span><a href="#local-6989586621679126759"><span class="hs-identifier hs-var">wrap</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126756"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding
</span><a href="#local-6989586621679126755"><span class="hs-identifier hs-var">contents</span></a></span><span>
</span><span id="line-322"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-323"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679126756"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126756"><span class="hs-identifier hs-var">len</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679126755"><span class="annot"><span class="annottext">Encoding
</span><a href="#local-6989586621679126755"><span class="hs-identifier hs-var">contents</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Word, Encoding) -&gt; a -&gt; (Word, Encoding))
-&gt; (Word, Encoding) -&gt; f a -&gt; (Word, Encoding)
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">foldl'</span></a></span><span> </span><span class="annot"><span class="annottext">(Word, Encoding) -&gt; a -&gt; (Word, Encoding)
</span><a href="#local-6989586621679126754"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Encoding
forall a. Monoid a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679126757"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-324"></span><span>    </span><span id="local-6989586621679126754"><span class="annot"><span class="annottext">go :: (Word, Encoding) -&gt; a -&gt; (Word, Encoding)
</span><a href="#local-6989586621679126754"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">!</span><span id="local-6989586621679126753"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126753"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679126752"><span class="annot"><span class="annottext">Encoding
</span><a href="#local-6989586621679126752"><span class="hs-identifier hs-var">enc</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679126751"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126751"><span class="hs-identifier hs-var">next</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126753"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Encoding
</span><a href="#local-6989586621679126752"><span class="hs-identifier hs-var">enc</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Encoding
</span><a href="#local-6989586621679126758"><span class="hs-identifier hs-var">encoder</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126751"><span class="hs-identifier hs-var">next</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-325"></span><span>
</span><span id="line-326"></span><span class="annot"><a href="Data.Coders.html#wrapCBORArray"><span class="hs-identifier hs-type">wrapCBORArray</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Encoding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Encoding</span></a></span><span>
</span><span id="line-327"></span><span id="wrapCBORArray"><span class="annot"><span class="annottext">wrapCBORArray :: Word -&gt; Encoding -&gt; Encoding
</span><a href="Data.Coders.html#wrapCBORArray"><span class="hs-identifier hs-var hs-var">wrapCBORArray</span></a></span></span><span> </span><span id="local-6989586621679126750"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126750"><span class="hs-identifier hs-var">len</span></a></span></span><span> </span><span id="local-6989586621679126749"><span class="annot"><span class="annottext">Encoding
</span><a href="#local-6989586621679126749"><span class="hs-identifier hs-var">contents</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-328"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126750"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">23</span></span><span>
</span><span id="line-329"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">encodeListLen</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126750"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding
</span><a href="#local-6989586621679126749"><span class="hs-identifier hs-var">contents</span></a></span><span>
</span><span id="line-330"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Encoding
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">encodeListLenIndef</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding
</span><a href="#local-6989586621679126749"><span class="hs-identifier hs-var">contents</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">encodeBreak</span></a></span><span>
</span><span id="line-331"></span><span>
</span><span id="line-332"></span><span class="hs-comment">-- ===============================================================</span><span>
</span><span id="line-333"></span><span class="hs-comment">-- We want to make a uniform way of encoding and decoding Map.Map</span><span>
</span><span id="line-334"></span><span class="hs-comment">-- Unfortuantely the ToCBOR and FromCBOR instances date to Byron</span><span>
</span><span id="line-335"></span><span class="hs-comment">-- Era, which are not always cannonical. We want to make these</span><span>
</span><span id="line-336"></span><span class="hs-comment">-- cannonical improvements easy to use.</span><span>
</span><span id="line-337"></span><span>
</span><span id="line-338"></span><span id="local-6989586621679127014"><span id="local-6989586621679127015"><span id="local-6989586621679127016"><span id="local-6989586621679127017"><span class="annot"><a href="Data.Coders.html#encodeVMap"><span class="hs-identifier hs-type">encodeVMap</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-339"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../../../../vector/html/src"><span class="hs-identifier hs-type">VMap.Vector</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127017"><span class="hs-identifier hs-type">vk</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127016"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../vector/html/src"><span class="hs-identifier hs-type">VMap.Vector</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127015"><span class="hs-identifier hs-type">vv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127014"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-340"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679127016"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Encoding</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-341"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679127014"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Encoding</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-342"></span><span>  </span><span class="annot"><a href="../../../../vector-map/html/src"><span class="hs-identifier hs-type">VMap.VMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127017"><span class="hs-identifier hs-type">vk</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127015"><span class="hs-identifier hs-type">vv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127016"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127014"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-343"></span><span>  </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Encoding</span></a></span></span></span></span></span><span>
</span><span id="line-344"></span><span id="encodeVMap"><span class="annot"><span class="annottext">encodeVMap :: (k -&gt; Encoding) -&gt; (v -&gt; Encoding) -&gt; VMap vk vv k v -&gt; Encoding
</span><a href="Data.Coders.html#encodeVMap"><span class="hs-identifier hs-var hs-var">encodeVMap</span></a></span></span><span> </span><span id="local-6989586621679126747"><span class="annot"><span class="annottext">k -&gt; Encoding
</span><a href="#local-6989586621679126747"><span class="hs-identifier hs-var">encodeKey</span></a></span></span><span> </span><span id="local-6989586621679126746"><span class="annot"><span class="annottext">v -&gt; Encoding
</span><a href="#local-6989586621679126746"><span class="hs-identifier hs-var">encodeValue</span></a></span></span><span> </span><span id="local-6989586621679126745"><span class="annot"><span class="annottext">VMap vk vv k v
</span><a href="#local-6989586621679126745"><span class="hs-identifier hs-var">vmap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-345"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679126744"><span class="annot"><span class="annottext">l :: Word
</span><a href="#local-6989586621679126744"><span class="hs-identifier hs-var hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Word
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Word) -&gt; Int -&gt; Word
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">VMap vk vv k v -&gt; Int
forall (kv :: * -&gt; *) k (vv :: * -&gt; *) v.
Vector kv k =&gt;
VMap kv vv k v -&gt; Int
</span><a href="../../../../vector-map/html/src"><span class="hs-identifier hs-var">VMap.size</span></a></span><span> </span><span class="annot"><span class="annottext">VMap vk vv k v
</span><a href="#local-6989586621679126745"><span class="hs-identifier hs-var">vmap</span></a></span><span>
</span><span id="line-346"></span><span>      </span><span id="local-6989586621679126742"><span class="annot"><span class="annottext">contents :: Encoding
</span><a href="#local-6989586621679126742"><span class="hs-identifier hs-var hs-var">contents</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(k -&gt; v -&gt; Encoding) -&gt; VMap vk vv k v -&gt; Encoding
forall (kv :: * -&gt; *) k (vv :: * -&gt; *) v m.
(Vector kv k, Vector vv v, Monoid m) =&gt;
(k -&gt; v -&gt; m) -&gt; VMap kv vv k v -&gt; m
</span><a href="../../../../vector-map/html/src"><span class="hs-identifier hs-var">VMap.foldMapWithKey</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679126740"><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679126740"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621679126739"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679126739"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">k -&gt; Encoding
</span><a href="#local-6989586621679126747"><span class="hs-identifier hs-var">encodeKey</span></a></span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679126740"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">v -&gt; Encoding
</span><a href="#local-6989586621679126746"><span class="hs-identifier hs-var">encodeValue</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679126739"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">VMap vk vv k v
</span><a href="#local-6989586621679126745"><span class="hs-identifier hs-var">vmap</span></a></span><span>
</span><span id="line-347"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encoding -&gt; Encoding
</span><a href="Data.Coders.html#wrapCBORMap"><span class="hs-identifier hs-var">wrapCBORMap</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126744"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding
</span><a href="#local-6989586621679126742"><span class="hs-identifier hs-var">contents</span></a></span><span>
</span><span id="line-348"></span><span>
</span><span id="line-349"></span><span id="local-6989586621679127029"><span id="local-6989586621679127030"><span class="annot"><a href="Data.Coders.html#encodeMap"><span class="hs-identifier hs-type">encodeMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679127030"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Encoding</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679127029"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Encoding</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Map.Map</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127030"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127029"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Encoding</span></a></span></span></span><span>
</span><span id="line-350"></span><span id="encodeMap"><span class="annot"><span class="annottext">encodeMap :: (a -&gt; Encoding) -&gt; (b -&gt; Encoding) -&gt; Map a b -&gt; Encoding
</span><a href="Data.Coders.html#encodeMap"><span class="hs-identifier hs-var hs-var">encodeMap</span></a></span></span><span> </span><span id="local-6989586621679126738"><span class="annot"><span class="annottext">a -&gt; Encoding
</span><a href="#local-6989586621679126738"><span class="hs-identifier hs-var">encodeKey</span></a></span></span><span> </span><span id="local-6989586621679126737"><span class="annot"><span class="annottext">b -&gt; Encoding
</span><a href="#local-6989586621679126737"><span class="hs-identifier hs-var">encodeValue</span></a></span></span><span> </span><span id="local-6989586621679126736"><span class="annot"><span class="annottext">Map a b
</span><a href="#local-6989586621679126736"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-351"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679126735"><span class="annot"><span class="annottext">l :: Word
</span><a href="#local-6989586621679126735"><span class="hs-identifier hs-var hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Word
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Word) -&gt; Int -&gt; Word
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Map a b -&gt; Int
forall k a. Map k a -&gt; Int
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Map.size</span></a></span><span> </span><span class="annot"><span class="annottext">Map a b
</span><a href="#local-6989586621679126736"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-352"></span><span>      </span><span id="local-6989586621679126733"><span class="annot"><span class="annottext">contents :: Encoding
</span><a href="#local-6989586621679126733"><span class="hs-identifier hs-var hs-var">contents</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; b -&gt; Encoding) -&gt; Map a b -&gt; Encoding
forall m k a. Monoid m =&gt; (k -&gt; a -&gt; m) -&gt; Map k a -&gt; m
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Map.foldMapWithKey</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679126731"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126731"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621679126730"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679126730"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; Encoding
</span><a href="#local-6989586621679126738"><span class="hs-identifier hs-var">encodeKey</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126731"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; Encoding
</span><a href="#local-6989586621679126737"><span class="hs-identifier hs-var">encodeValue</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679126730"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map a b
</span><a href="#local-6989586621679126736"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-353"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encoding -&gt; Encoding
</span><a href="Data.Coders.html#wrapCBORMap"><span class="hs-identifier hs-var">wrapCBORMap</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126735"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding
</span><a href="#local-6989586621679126733"><span class="hs-identifier hs-var">contents</span></a></span><span>
</span><span id="line-354"></span><span>
</span><span id="line-355"></span><span class="annot"><a href="Data.Coders.html#wrapCBORMap"><span class="hs-identifier hs-type">wrapCBORMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Encoding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Encoding</span></a></span><span>
</span><span id="line-356"></span><span id="wrapCBORMap"><span class="annot"><span class="annottext">wrapCBORMap :: Word -&gt; Encoding -&gt; Encoding
</span><a href="Data.Coders.html#wrapCBORMap"><span class="hs-identifier hs-var hs-var">wrapCBORMap</span></a></span></span><span> </span><span id="local-6989586621679126729"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126729"><span class="hs-identifier hs-var">len</span></a></span></span><span> </span><span id="local-6989586621679126728"><span class="annot"><span class="annottext">Encoding
</span><a href="#local-6989586621679126728"><span class="hs-identifier hs-var">contents</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-357"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126729"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">23</span></span><span>
</span><span id="line-358"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">encodeMapLen</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126729"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding
</span><a href="#local-6989586621679126728"><span class="hs-identifier hs-var">contents</span></a></span><span>
</span><span id="line-359"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Encoding
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">encodeMapLenIndef</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding
</span><a href="#local-6989586621679126728"><span class="hs-identifier hs-var">contents</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">encodeBreak</span></a></span><span>
</span><span id="line-360"></span><span>
</span><span id="line-361"></span><span id="local-6989586621679127004"><span id="local-6989586621679127005"><span id="local-6989586621679127006"><span id="local-6989586621679127007"><span id="local-6989586621679127008"><span class="annot"><a href="Data.Coders.html#decodeVMap"><span class="hs-identifier hs-type">decodeVMap</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-362"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../../../../vector/html/src"><span class="hs-identifier hs-type">VMap.Vector</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127008"><span class="hs-identifier hs-type">kv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127007"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../vector/html/src"><span class="hs-identifier hs-type">VMap.Vector</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127006"><span class="hs-identifier hs-type">vv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127005"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127007"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-363"></span><span>  </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127004"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127007"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-364"></span><span>  </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127004"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127005"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-365"></span><span>  </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127004"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../vector-map/html/src"><span class="hs-identifier hs-type">VMap.VMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127008"><span class="hs-identifier hs-type">kv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127006"><span class="hs-identifier hs-type">vv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127007"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127005"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-366"></span><span id="decodeVMap"><span class="annot"><span class="annottext">decodeVMap :: Decoder s k -&gt; Decoder s v -&gt; Decoder s (VMap kv vv k v)
</span><a href="Data.Coders.html#decodeVMap"><span class="hs-identifier hs-var hs-var">decodeVMap</span></a></span></span><span> </span><span id="local-6989586621679126727"><span class="annot"><span class="annottext">Decoder s k
</span><a href="#local-6989586621679126727"><span class="hs-identifier hs-var">decodeKey</span></a></span></span><span> </span><span id="local-6989586621679126726"><span class="annot"><span class="annottext">Decoder s v
</span><a href="#local-6989586621679126726"><span class="hs-identifier hs-var">decodeValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decoder s k -&gt; (k -&gt; Decoder s v) -&gt; Decoder s (VMap kv vv k v)
forall t k v s.
(IsList t, Item t ~ (k, v)) =&gt;
Decoder s k -&gt; (k -&gt; Decoder s v) -&gt; Decoder s t
</span><a href="Data.Coders.html#decodeMapByKey"><span class="hs-identifier hs-var">decodeMapByKey</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s k
</span><a href="#local-6989586621679126727"><span class="hs-identifier hs-var">decodeKey</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decoder s v -&gt; k -&gt; Decoder s v
forall a b. a -&gt; b -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s v
</span><a href="#local-6989586621679126726"><span class="hs-identifier hs-var">decodeValue</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-367"></span><span>
</span><span id="line-368"></span><span id="local-6989586621679127022"><span id="local-6989586621679127023"><span id="local-6989586621679127024"><span class="annot"><a href="Data.Coders.html#decodeMap"><span class="hs-identifier hs-type">decodeMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127024"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127023"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127024"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127023"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127022"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127023"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Map.Map</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127024"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127022"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-369"></span><span id="decodeMap"><span class="annot"><span class="annottext">decodeMap :: Decoder s a -&gt; Decoder s b -&gt; Decoder s (Map a b)
</span><a href="Data.Coders.html#decodeMap"><span class="hs-identifier hs-var hs-var">decodeMap</span></a></span></span><span> </span><span id="local-6989586621679126725"><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679126725"><span class="hs-identifier hs-var">decodeKey</span></a></span></span><span> </span><span id="local-6989586621679126724"><span class="annot"><span class="annottext">Decoder s b
</span><a href="#local-6989586621679126724"><span class="hs-identifier hs-var">decodeValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decoder s a -&gt; (a -&gt; Decoder s b) -&gt; Decoder s (Map a b)
forall t k v s.
(IsList t, Item t ~ (k, v)) =&gt;
Decoder s k -&gt; (k -&gt; Decoder s v) -&gt; Decoder s t
</span><a href="Data.Coders.html#decodeMapByKey"><span class="hs-identifier hs-var">decodeMapByKey</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679126725"><span class="hs-identifier hs-var">decodeKey</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decoder s b -&gt; a -&gt; Decoder s b
forall a b. a -&gt; b -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s b
</span><a href="#local-6989586621679126724"><span class="hs-identifier hs-var">decodeValue</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-370"></span><span>
</span><span id="line-371"></span><span class="hs-comment">-- | Just like `decodeMap`, but assumes there are no duplicate keys</span><span>
</span><span id="line-372"></span><span id="local-6989586621679126721"><span id="local-6989586621679126722"><span id="local-6989586621679126723"><span class="annot"><a href="Data.Coders.html#decodeMapNoDuplicates"><span class="hs-identifier hs-type">decodeMapNoDuplicates</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126723"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126722"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126723"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126722"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126721"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126722"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Map.Map</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126723"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126721"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-373"></span><span id="decodeMapNoDuplicates"><span class="annot"><span class="annottext">decodeMapNoDuplicates :: Decoder s a -&gt; Decoder s b -&gt; Decoder s (Map a b)
</span><a href="Data.Coders.html#decodeMapNoDuplicates"><span class="hs-identifier hs-var hs-var">decodeMapNoDuplicates</span></a></span></span><span> </span><span id="local-6989586621679126720"><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679126720"><span class="hs-identifier hs-var">decodeKey</span></a></span></span><span> </span><span id="local-6989586621679126719"><span class="annot"><span class="annottext">Decoder s b
</span><a href="#local-6989586621679126719"><span class="hs-identifier hs-var">decodeValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-374"></span><span>  </span><span class="annot"><span class="annottext">(Int, Map a b) -&gt; Map a b
forall a b. (a, b) -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span>
</span><span id="line-375"></span><span>    </span><span class="annot"><span class="annottext">((Int, Map a b) -&gt; Map a b)
-&gt; Decoder s (Int, Map a b) -&gt; Decoder s (Map a b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s (Maybe Int)
-&gt; ((a, b) -&gt; Map a b -&gt; Map a b)
-&gt; Map a b
-&gt; Decoder s (a, b)
-&gt; Decoder s (Int, Map a b)
forall s a b.
Decoder s (Maybe Int)
-&gt; (a -&gt; b -&gt; b) -&gt; b -&gt; Decoder s a -&gt; Decoder s (Int, b)
</span><a href="Data.Coders.html#decodeAccWithLen"><span class="hs-identifier hs-var">decodeAccWithLen</span></a></span><span>
</span><span id="line-376"></span><span>      </span><span class="annot"><span class="annottext">Decoder s (Maybe Int)
forall s. Decoder s (Maybe Int)
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">decodeMapLenOrIndef</span></a></span><span>
</span><span id="line-377"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; b -&gt; Map a b -&gt; Map a b) -&gt; (a, b) -&gt; Map a b -&gt; Map a b
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">uncurry</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; b -&gt; Map a b -&gt; Map a b
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Map.insert</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-378"></span><span>      </span><span class="annot"><span class="annottext">Map a b
forall k a. Map k a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Map.empty</span></a></span><span>
</span><span id="line-379"></span><span>      </span><span class="annot"><span class="annottext">Decoder s (a, b)
</span><a href="#local-6989586621679126715"><span class="hs-identifier hs-var">decodeInlinedPair</span></a></span><span>
</span><span id="line-380"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-381"></span><span>    </span><span id="local-6989586621679126715"><span class="annot"><span class="annottext">decodeInlinedPair :: Decoder s (a, b)
</span><a href="#local-6989586621679126715"><span class="hs-identifier hs-var hs-var">decodeInlinedPair</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-382"></span><span>      </span><span class="hs-glyph">!</span><span id="local-6989586621679126714"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126714"><span class="hs-identifier hs-var">key</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s a
</span><a href="#local-6989586621679126720"><span class="hs-identifier hs-var">decodeKey</span></a></span><span>
</span><span id="line-383"></span><span>      </span><span class="hs-glyph">!</span><span id="local-6989586621679126713"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679126713"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s b
</span><a href="#local-6989586621679126719"><span class="hs-identifier hs-var">decodeValue</span></a></span><span>
</span><span id="line-384"></span><span>      </span><span class="annot"><span class="annottext">(a, b) -&gt; Decoder s (a, b)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126714"><span class="hs-identifier hs-var">key</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679126713"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-385"></span><span>
</span><span id="line-386"></span><span id="local-6989586621679127362"><span id="local-6989586621679127363"><span id="local-6989586621679127364"><span id="local-6989586621679127366"><span class="annot"><a href="Data.Coders.html#decodeMapByKey"><span class="hs-identifier hs-type">decodeMapByKey</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-387"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Exts.IsList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127366"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Exts.Item</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127366"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679127364"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679127363"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-388"></span><span>  </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127362"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127364"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-389"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679127364"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127362"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127363"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-390"></span><span>  </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127362"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127366"><span class="hs-identifier hs-type">t</span></a></span></span></span></span></span><span>
</span><span id="line-391"></span><span id="decodeMapByKey"><span class="annot"><span class="annottext">decodeMapByKey :: Decoder s k -&gt; (k -&gt; Decoder s v) -&gt; Decoder s t
</span><a href="Data.Coders.html#decodeMapByKey"><span class="hs-identifier hs-var hs-var">decodeMapByKey</span></a></span></span><span> </span><span id="local-6989586621679126712"><span class="annot"><span class="annottext">Decoder s k
</span><a href="#local-6989586621679126712"><span class="hs-identifier hs-var">decodeKey</span></a></span></span><span> </span><span id="local-6989586621679126711"><span class="annot"><span class="annottext">k -&gt; Decoder s v
</span><a href="#local-6989586621679126711"><span class="hs-identifier hs-var">decodeValueFor</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-392"></span><span>  </span><span class="annot"><span class="annottext">[(k, v)] -&gt; t
forall l. IsList l =&gt; [Item l] -&gt; l
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Exts.fromList</span></a></span><span>
</span><span id="line-393"></span><span>    </span><span class="annot"><span class="annottext">([(k, v)] -&gt; t) -&gt; Decoder s [(k, v)] -&gt; Decoder s t
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s (k, v) -&gt; Decoder s [(k, v)]
forall s a. Decoder s a -&gt; Decoder s [a]
</span><a href="Data.Coders.html#decodeMapContents"><span class="hs-identifier hs-var">decodeMapContents</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s (k, v)
</span><a href="#local-6989586621679126710"><span class="hs-identifier hs-var">decodeInlinedPair</span></a></span><span>
</span><span id="line-394"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-395"></span><span>    </span><span id="local-6989586621679126710"><span class="annot"><span class="annottext">decodeInlinedPair :: Decoder s (k, v)
</span><a href="#local-6989586621679126710"><span class="hs-identifier hs-var hs-var">decodeInlinedPair</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-396"></span><span>      </span><span class="hs-glyph">!</span><span id="local-6989586621679126709"><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679126709"><span class="hs-identifier hs-var">key</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s k
</span><a href="#local-6989586621679126712"><span class="hs-identifier hs-var">decodeKey</span></a></span><span>
</span><span id="line-397"></span><span>      </span><span class="hs-glyph">!</span><span id="local-6989586621679126708"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679126708"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">k -&gt; Decoder s v
</span><a href="#local-6989586621679126711"><span class="hs-identifier hs-var">decodeValueFor</span></a></span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679126709"><span class="hs-identifier hs-var">key</span></a></span><span>
</span><span id="line-398"></span><span>      </span><span class="annot"><span class="annottext">(k, v) -&gt; Decoder s (k, v)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679126709"><span class="hs-identifier hs-var">key</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679126708"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-399"></span><span>
</span><span id="line-400"></span><span id="local-6989586621679126706"><span id="local-6989586621679126707"><span class="annot"><a href="Data.Coders.html#decodeMapContents"><span class="hs-identifier hs-type">decodeMapContents</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126707"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126706"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126707"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679126706"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-401"></span><span id="decodeMapContents"><span class="annot"><span class="annottext">decodeMapContents :: Decoder s a -&gt; Decoder s [a]
</span><a href="Data.Coders.html#decodeMapContents"><span class="hs-identifier hs-var hs-var">decodeMapContents</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decoder s (Maybe Int) -&gt; Decoder s a -&gt; Decoder s [a]
forall s a. Decoder s (Maybe Int) -&gt; Decoder s a -&gt; Decoder s [a]
</span><a href="Data.Coders.html#decodeCollection"><span class="hs-identifier hs-var">decodeCollection</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s (Maybe Int)
forall s. Decoder s (Maybe Int)
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">decodeMapLenOrIndef</span></a></span><span>
</span><span id="line-402"></span><span>
</span><span id="line-403"></span><span id="local-6989586621679126979"><span id="local-6989586621679126980"><span id="local-6989586621679126981"><span id="local-6989586621679126982"><span class="annot"><a href="Data.Coders.html#decodeMapTraverse"><span class="hs-identifier hs-type">decodeMapTraverse</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-404"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126982"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Applicative</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126981"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-405"></span><span>  </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126980"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679126981"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126982"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-406"></span><span>  </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126980"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679126981"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126979"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-407"></span><span>  </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126980"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679126981"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Map.Map</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126982"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126979"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-408"></span><span id="decodeMapTraverse"><span class="annot"><span class="annottext">decodeMapTraverse :: Decoder s (t a) -&gt; Decoder s (t b) -&gt; Decoder s (t (Map a b))
</span><a href="Data.Coders.html#decodeMapTraverse"><span class="hs-identifier hs-var hs-var">decodeMapTraverse</span></a></span></span><span> </span><span id="local-6989586621679126705"><span class="annot"><span class="annottext">Decoder s (t a)
</span><a href="#local-6989586621679126705"><span class="hs-identifier hs-var">decodeKey</span></a></span></span><span> </span><span id="local-6989586621679126704"><span class="annot"><span class="annottext">Decoder s (t b)
</span><a href="#local-6989586621679126704"><span class="hs-identifier hs-var">decodeValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-409"></span><span>  </span><span class="annot"><span class="annottext">([(a, b)] -&gt; Map a b) -&gt; t [(a, b)] -&gt; t (Map a b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">[(a, b)] -&gt; Map a b
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Map.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">(t [(a, b)] -&gt; t (Map a b))
-&gt; Decoder s (t [(a, b)]) -&gt; Decoder s (t (Map a b))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s (t a) -&gt; Decoder s (t b) -&gt; Decoder s (t [(a, b)])
forall (t :: * -&gt; *) s a b.
Applicative t =&gt;
Decoder s (t a) -&gt; Decoder s (t b) -&gt; Decoder s (t [(a, b)])
</span><a href="Data.Coders.html#decodeMapContentsTraverse"><span class="hs-identifier hs-var">decodeMapContentsTraverse</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s (t a)
</span><a href="#local-6989586621679126705"><span class="hs-identifier hs-var">decodeKey</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s (t b)
</span><a href="#local-6989586621679126704"><span class="hs-identifier hs-var">decodeValue</span></a></span><span>
</span><span id="line-410"></span><span>
</span><span id="line-411"></span><span id="local-6989586621679127326"><span id="local-6989586621679127327"><span id="local-6989586621679127328"><span id="local-6989586621679127329"><span class="annot"><a href="Data.Coders.html#decodeMapContentsTraverse"><span class="hs-identifier hs-type">decodeMapContentsTraverse</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-412"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Applicative</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127329"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-413"></span><span>  </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127328"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679127329"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127327"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-414"></span><span>  </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127328"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679127329"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127326"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-415"></span><span>  </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127328"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679127329"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679127327"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679127326"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-416"></span><span id="decodeMapContentsTraverse"><span class="annot"><span class="annottext">decodeMapContentsTraverse :: Decoder s (t a) -&gt; Decoder s (t b) -&gt; Decoder s (t [(a, b)])
</span><a href="Data.Coders.html#decodeMapContentsTraverse"><span class="hs-identifier hs-var hs-var">decodeMapContentsTraverse</span></a></span></span><span> </span><span id="local-6989586621679126702"><span class="annot"><span class="annottext">Decoder s (t a)
</span><a href="#local-6989586621679126702"><span class="hs-identifier hs-var">decodeKey</span></a></span></span><span> </span><span id="local-6989586621679126701"><span class="annot"><span class="annottext">Decoder s (t b)
</span><a href="#local-6989586621679126701"><span class="hs-identifier hs-var">decodeValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-417"></span><span>  </span><span class="annot"><span class="annottext">[t (a, b)] -&gt; t [(a, b)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a.
(Traversable t, Applicative f) =&gt;
t (f a) -&gt; f (t a)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">sequenceA</span></a></span><span> </span><span class="annot"><span class="annottext">([t (a, b)] -&gt; t [(a, b)])
-&gt; Decoder s [t (a, b)] -&gt; Decoder s (t [(a, b)])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s (t (a, b)) -&gt; Decoder s [t (a, b)]
forall s a. Decoder s a -&gt; Decoder s [a]
</span><a href="Data.Coders.html#decodeMapContents"><span class="hs-identifier hs-var">decodeMapContents</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s (t (a, b))
</span><a href="#local-6989586621679126699"><span class="hs-identifier hs-var">decodeInlinedPair</span></a></span><span>
</span><span id="line-418"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-419"></span><span>    </span><span id="local-6989586621679126699"><span class="annot"><span class="annottext">decodeInlinedPair :: Decoder s (t (a, b))
</span><a href="#local-6989586621679126699"><span class="hs-identifier hs-var hs-var">decodeInlinedPair</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Compose (Decoder s) t (a, b) -&gt; Decoder s (t (a, b))
forall k1 (f :: k1 -&gt; *) k2 (g :: k2 -&gt; k1) (a :: k2).
Compose f g a -&gt; f (g a)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var">getCompose</span></a></span><span> </span><span class="annot"><span class="annottext">(Compose (Decoder s) t (a, b) -&gt; Decoder s (t (a, b)))
-&gt; Compose (Decoder s) t (a, b) -&gt; Decoder s (t (a, b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(a -&gt; b -&gt; (a, b))
-&gt; Compose (Decoder s) t a -&gt; Compose (Decoder s) t (b -&gt; (a, b))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s (t a) -&gt; Compose (Decoder s) t a
forall k k1 (f :: k -&gt; *) (g :: k1 -&gt; k) (a :: k1).
f (g a) -&gt; Compose f g a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Compose</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s (t a)
</span><a href="#local-6989586621679126702"><span class="hs-identifier hs-var">decodeKey</span></a></span><span> </span><span class="annot"><span class="annottext">Compose (Decoder s) t (b -&gt; (a, b))
-&gt; Compose (Decoder s) t b -&gt; Compose (Decoder s) t (a, b)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s (t b) -&gt; Compose (Decoder s) t b
forall k k1 (f :: k -&gt; *) (g :: k1 -&gt; k) (a :: k1).
f (g a) -&gt; Compose f g a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Compose</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s (t b)
</span><a href="#local-6989586621679126701"><span class="hs-identifier hs-var">decodeValue</span></a></span><span>
</span><span id="line-420"></span><span>
</span><span id="line-421"></span><span class="hs-comment">-- ===============================================================================</span><span>
</span><span id="line-422"></span><span class="hs-comment">-- Encode and Decode are typed data structures which specify encoders and decoders</span><span>
</span><span id="line-423"></span><span class="hs-comment">-- for Algebraic data structures written in Haskell. They exploit types and count</span><span>
</span><span id="line-424"></span><span class="hs-comment">-- the correct number fields in an encoding and decoding, which are automatically computed.</span><span>
</span><span id="line-425"></span><span class="hs-comment">-- They are somewhat dual, and are designed so that visual inspection of a Encode and</span><span>
</span><span id="line-426"></span><span class="hs-comment">-- its dual Decode can help the user conclude that the two are self-consistent.</span><span>
</span><span id="line-427"></span><span class="hs-comment">-- They are also reusable abstractions that can be defined once, and then used many places.</span><span>
</span><span id="line-428"></span><span class="hs-comment">--</span><span>
</span><span id="line-429"></span><span class="hs-comment">-- (Encode t) is a data structure from which 3 things can be recovered</span><span>
</span><span id="line-430"></span><span class="hs-comment">-- Given:    x :: Encode t</span><span>
</span><span id="line-431"></span><span class="hs-comment">-- 1) get a value of type t</span><span>
</span><span id="line-432"></span><span class="hs-comment">-- 2) get an Encoding for that value, which correctly encodes the number of &quot;fields&quot;</span><span>
</span><span id="line-433"></span><span class="hs-comment">--    written to the ByteString. Care must still be taken that the Keys are correct.</span><span>
</span><span id="line-434"></span><span class="hs-comment">-- 3) get a (MemoBytes t)</span><span>
</span><span id="line-435"></span><span class="hs-comment">-- The advantage of using Encode with a MemoBytes, is we don't have to make a ToCBOR</span><span>
</span><span id="line-436"></span><span class="hs-comment">-- instance. Instead the &quot;instance&quot; is spread amongst the pattern constuctors by using</span><span>
</span><span id="line-437"></span><span class="hs-comment">-- (memoBytes encoding) in the where clause of the pattern contructor.</span><span>
</span><span id="line-438"></span><span class="hs-comment">-- See some examples of this see the file Timelocks.hs</span><span>
</span><span id="line-439"></span><span class="hs-comment">--</span><span>
</span><span id="line-440"></span><span class="hs-comment">-- The Encode and Decode mechanism are meant to specify the encoding and decoding of</span><span>
</span><span id="line-441"></span><span class="hs-comment">-- Algebraic datatypes in a uniform way. (Decode t) is dual to (Encode t). In some cases</span><span>
</span><span id="line-442"></span><span class="hs-comment">-- a decoder can be extracted from an encoder by visual inspection. We now give some</span><span>
</span><span id="line-443"></span><span class="hs-comment">-- examples. In the examples Let Int and C have ToCBOR instances, and dualB :: Dual B</span><span>
</span><span id="line-444"></span><span class="hs-comment">{-
-- An example with 1 constructor (a record) uses Rec and RecD

data C = C Text.Text
instance ToCBOR C where toCBOR (C t) = toCBOR t
instance FromCBOR C where fromCBOR = C &lt;$&gt; fromCBOR

data B = B Text.Text
dualB = Dual (\ (B t) -&gt;toCBOR t) (B &lt;$&gt; fromCBOR)

data A = ACon Int B C

encodeA :: A -&gt; Encode ('Closed 'Dense) A
encodeA (ACon i b c) = Rec ACon !&gt; To i !&gt; ED dualB b !&gt; To c

decodeA :: Decode ('Closed 'Dense) A
decodeA = RecD ACon &lt;! From &lt;! DD dualB &lt;! From

instance ToCBOR A   where toCBOR x = encode(encodeA x)
instance FromCBOR A where fromCBOR = decode decodeA

-- An example with multiple constructors uses Sum, SumD, and Summands

data N = N1 Int | N2 B Bool | N3 A

encodeN :: N -&gt; Encode 'Open N
encodeN (N1 i)    = Sum N1 0 !&gt; To i
encodeN (N2 b tf) = Sum N2 1 !&gt; ED dualB b  !&gt; To tf
encodeN (N3 a)    = Sum N3 2 !&gt; To a

decodeN :: Decode ('Closed 'Dense) N    -- Note each clause has an 'Open decoder,
decodeN = Summands &quot;N&quot; decodeNx         -- But Summands returns a ('Closed 'Dense) decoder
  where decodeNx 0 = SumD N1 &lt;! From
        decodeNx 1 = SumD N2 &lt;! DD dualB &lt;! From
        decodeNx 3 = SumD N3 &lt;! From
        decodeNx k = Invalid k

instance ToCBOR N   where toCBOR x = encode(encodeN x)
instance FromCBOR N where fromCBOR = decode decodeN
-}</span><span>
</span><span id="line-484"></span><span class="hs-comment">-- For more examples writing CBOR instances using Encode and Decode, including</span><span>
</span><span id="line-485"></span><span class="hs-comment">-- ones using Sparse encoding, see the test file</span><span>
</span><span id="line-486"></span><span class="hs-comment">-- cardano-ledger-shelley-test/test/Test/Cardano/Ledger/Shelley/Coders.hs</span><span>
</span><span id="line-487"></span><span>
</span><span id="line-488"></span><span class="hs-comment">-- ========================================================</span><span>
</span><span id="line-489"></span><span class="hs-comment">-- Subsidary classes and datatype used in the Coders scheme</span><span>
</span><span id="line-490"></span><span class="hs-comment">-- =========================================================</span><span>
</span><span id="line-491"></span><span>
</span><span id="line-492"></span><span class="hs-comment">-- | Some CBOR instances wrap encoding sequences with prefixes and suffixes. I.e.</span><span>
</span><span id="line-493"></span><span class="hs-comment">--  prefix , encode, encode, encode , ... , suffix.</span><span>
</span><span id="line-494"></span><span class="hs-comment">--  There are two kinds of wrapping coders: Nary sums, and Sparsely encoded products.</span><span>
</span><span id="line-495"></span><span class="hs-comment">--  Coders in these classes can only be decoded when they are wrapped by their</span><span>
</span><span id="line-496"></span><span class="hs-comment">--  closing forms Summand and SparseKeyed. In another dimension records can be</span><span>
</span><span id="line-497"></span><span class="hs-comment">--  encoded densely (all their fields serialised) or sparsely (only some of their</span><span>
</span><span id="line-498"></span><span class="hs-comment">--  fields). We use indexes to types to try and mark (and enforce) these distinctions.</span><span>
</span><span id="line-499"></span><span>
</span><span id="line-500"></span><span class="hs-comment">-- | Record density (all the fields) vs (some of the fields)</span><span>
</span><span id="line-501"></span><span class="hs-keyword">data</span><span> </span><span id="Density"><span class="annot"><a href="Data.Coders.html#Density"><span class="hs-identifier hs-var">Density</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Dense"><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-var">Dense</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Sparse"><span class="annot"><a href="Data.Coders.html#Sparse"><span class="hs-identifier hs-var">Sparse</span></a></span></span><span>
</span><span id="line-502"></span><span>
</span><span id="line-503"></span><span class="hs-keyword">data</span><span> </span><span id="Wrapped"><span class="annot"><a href="Data.Coders.html#Wrapped"><span class="hs-identifier hs-var">Wrapped</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-504"></span><span>  </span><span id="Open"><span class="annot"><a href="Data.Coders.html#Open"><span class="hs-identifier hs-var">Open</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Wrapped"><span class="hs-identifier hs-type">Wrapped</span></a></span><span> </span><span class="hs-comment">-- Needs some type-wide wrapping</span><span>
</span><span id="line-505"></span><span>  </span><span id="Closed"><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-var">Closed</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Density"><span class="hs-identifier hs-type">Density</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Wrapped"><span class="hs-identifier hs-type">Wrapped</span></a></span><span> </span><span class="hs-comment">-- Does not need type-wide wrapping,</span><span>
</span><span id="line-506"></span><span>  </span><span class="hs-comment">-- But may need field-wide wrapping, when Density is 'Sparse</span><span>
</span><span id="line-507"></span><span>
</span><span id="line-508"></span><span class="hs-comment">-- | Analogous to paired ToCBOR and FromCBOR instances with out freezing out</span><span>
</span><span id="line-509"></span><span class="hs-comment">--   alternate ways to code. Unlike ToCBOR and FromCBOR where there is only</span><span>
</span><span id="line-510"></span><span class="hs-comment">--   one instance per type. There can be multiple Duals with the same type.</span><span>
</span><span id="line-511"></span><span class="hs-keyword">data</span><span> </span><span id="Dual"><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-var">Dual</span></a></span></span><span> </span><span id="local-6989586621679127060"><span class="annot"><a href="#local-6989586621679127060"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Dual"><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-var">Dual</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679127060"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Encoding</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679127229"><span class="annot"><a href="#local-6989586621679127229"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127229"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127060"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-512"></span><span>
</span><span id="line-513"></span><span class="hs-comment">-- | A Field pairs an update function and a decoder for one field of a Sparse record.</span><span>
</span><span id="line-514"></span><span class="hs-keyword">data</span><span> </span><span id="Field"><span class="annot"><a href="Data.Coders.html#Field"><span class="hs-identifier hs-var">Field</span></a></span></span><span> </span><span id="local-6989586621679126695"><span class="annot"><a href="#local-6989586621679126695"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-515"></span><span>  </span><span id="local-6989586621679126694"><span id="local-6989586621679127300"><span id="Field"><span class="annot"><a href="Data.Coders.html#Field"><span class="hs-identifier hs-var">Field</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679126694"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679127300"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679127300"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679127302"><span class="annot"><a href="#local-6989586621679127302"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127302"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126694"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Field"><span class="hs-identifier hs-type">Field</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127300"><span class="hs-identifier hs-type">t</span></a></span></span></span><span>
</span><span id="line-516"></span><span>
</span><span id="line-517"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Coders.html#field"><span class="hs-pragma hs-type">field</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-518"></span><span id="local-6989586621679127283"><span id="local-6989586621679127284"><span id="local-6989586621679127285"><span class="annot"><a href="Data.Coders.html#field"><span class="hs-identifier hs-type">field</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679127285"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679127284"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679127284"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127283"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679127285"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Field"><span class="hs-identifier hs-type">Field</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127284"><span class="hs-identifier hs-type">t</span></a></span></span></span></span><span>
</span><span id="line-519"></span><span id="field"><span class="annot"><span class="annottext">field :: (x -&gt; t -&gt; t) -&gt; Decode ('Closed d) x -&gt; Field t
</span><a href="Data.Coders.html#field"><span class="hs-identifier hs-var hs-var">field</span></a></span></span><span> </span><span id="local-6989586621679126692"><span class="annot"><span class="annottext">x -&gt; t -&gt; t
</span><a href="#local-6989586621679126692"><span class="hs-identifier hs-var">update</span></a></span></span><span> </span><span id="local-6989586621679126691"><span class="annot"><span class="annottext">Decode ('Closed d) x
</span><a href="#local-6989586621679126691"><span class="hs-identifier hs-var">dec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(x -&gt; t -&gt; t) -&gt; (forall s. Decoder s x) -&gt; Field t
forall x t. (x -&gt; t -&gt; t) -&gt; (forall s. Decoder s x) -&gt; Field t
</span><a href="Data.Coders.html#Field"><span class="hs-identifier hs-var">Field</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; t -&gt; t
</span><a href="#local-6989586621679126692"><span class="hs-identifier hs-var">update</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decode ('Closed d) x -&gt; Decoder s x
forall (w :: Wrapped) t s. Decode w t -&gt; Decoder s t
</span><a href="Data.Coders.html#decode"><span class="hs-identifier hs-var">decode</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) x
</span><a href="#local-6989586621679126691"><span class="hs-identifier hs-var">dec</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-520"></span><span>
</span><span id="line-521"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Coders.html#ofield"><span class="hs-pragma hs-type">ofield</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-522"></span><span id="local-6989586621679126688"><span id="local-6989586621679126689"><span id="local-6989586621679126690"><span class="annot"><a href="Data.Coders.html#ofield"><span class="hs-identifier hs-type">ofield</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126690"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679126689"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679126689"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126688"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679126690"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Field"><span class="hs-identifier hs-type">Field</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126689"><span class="hs-identifier hs-type">t</span></a></span></span></span></span><span>
</span><span id="line-523"></span><span id="ofield"><span class="annot"><span class="annottext">ofield :: (StrictMaybe x -&gt; t -&gt; t) -&gt; Decode ('Closed d) x -&gt; Field t
</span><a href="Data.Coders.html#ofield"><span class="hs-identifier hs-var hs-var">ofield</span></a></span></span><span> </span><span id="local-6989586621679126687"><span class="annot"><span class="annottext">StrictMaybe x -&gt; t -&gt; t
</span><a href="#local-6989586621679126687"><span class="hs-identifier hs-var">update</span></a></span></span><span> </span><span id="local-6989586621679126686"><span class="annot"><span class="annottext">Decode ('Closed d) x
</span><a href="#local-6989586621679126686"><span class="hs-identifier hs-var">dec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(StrictMaybe x -&gt; t -&gt; t)
-&gt; (forall s. Decoder s (StrictMaybe x)) -&gt; Field t
forall x t. (x -&gt; t -&gt; t) -&gt; (forall s. Decoder s x) -&gt; Field t
</span><a href="Data.Coders.html#Field"><span class="hs-identifier hs-var">Field</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe x -&gt; t -&gt; t
</span><a href="#local-6989586621679126687"><span class="hs-identifier hs-var">update</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">x -&gt; StrictMaybe x
forall a. a -&gt; StrictMaybe a
</span><a href="../../../../strict-containers/html/src"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="annot"><span class="annottext">(x -&gt; StrictMaybe x) -&gt; Decoder s x -&gt; Decoder s (StrictMaybe x)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) x -&gt; Decoder s x
forall (w :: Wrapped) t s. Decode w t -&gt; Decoder s t
</span><a href="Data.Coders.html#decode"><span class="hs-identifier hs-var">decode</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) x
</span><a href="#local-6989586621679126686"><span class="hs-identifier hs-var">dec</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-524"></span><span>
</span><span id="line-525"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Coders.html#invalidField"><span class="hs-pragma hs-type">invalidField</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-526"></span><span class="annot"><a href="Data.Coders.html#invalidField"><span class="hs-identifier hs-type">invalidField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679126685"><span class="annot"><a href="#local-6989586621679126685"><span class="hs-identifier hs-type">t</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Field"><span class="hs-identifier hs-type">Field</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126685"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-527"></span><span id="invalidField"><span class="annot"><span class="annottext">invalidField :: Word -&gt; Field t
</span><a href="Data.Coders.html#invalidField"><span class="hs-identifier hs-var hs-var">invalidField</span></a></span></span><span> </span><span id="local-6989586621679126684"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126684"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Void -&gt; t -&gt; t) -&gt; Decode ('Closed Any) Void -&gt; Field t
forall x t (d :: Density).
(x -&gt; t -&gt; t) -&gt; Decode ('Closed d) x -&gt; Field t
</span><a href="Data.Coders.html#field"><span class="hs-identifier hs-var">field</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(t -&gt; Void -&gt; t) -&gt; Void -&gt; t -&gt; t
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">((t -&gt; Void -&gt; t) -&gt; Void -&gt; t -&gt; t)
-&gt; (t -&gt; Void -&gt; t) -&gt; Void -&gt; t -&gt; t
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">t -&gt; Void -&gt; t
forall a b. a -&gt; b -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679126685"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Void</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word -&gt; Decode ('Closed Any) Void
forall (w :: Wrapped) t. Word -&gt; Decode w t
</span><a href="Data.Coders.html#Invalid"><span class="hs-identifier hs-var">Invalid</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126684"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-528"></span><span>
</span><span id="line-529"></span><span class="hs-comment">-- In order to sparse decode something with a (FromCBOR (Annotator t)) instance</span><span>
</span><span id="line-530"></span><span class="hs-comment">-- we can use these 'field' like functions.</span><span>
</span><span id="line-531"></span><span>
</span><span id="line-532"></span><span id="local-6989586621679126678"><span id="local-6989586621679126679"><span id="local-6989586621679126680"><span id="local-6989586621679126681"><span class="annot"><a href="Data.Coders.html#fieldA"><span class="hs-identifier hs-type">fieldA</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Applicative</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126681"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679126680"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679126679"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679126679"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126678"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679126680"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Field"><span class="hs-identifier hs-type">Field</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679126681"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126679"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-533"></span><span id="fieldA"><span class="annot"><span class="annottext">fieldA :: (x -&gt; t -&gt; t) -&gt; Decode ('Closed d) x -&gt; Field (ann t)
</span><a href="Data.Coders.html#fieldA"><span class="hs-identifier hs-var hs-var">fieldA</span></a></span></span><span> </span><span id="local-6989586621679126677"><span class="annot"><span class="annottext">x -&gt; t -&gt; t
</span><a href="#local-6989586621679126677"><span class="hs-identifier hs-var">update</span></a></span></span><span> </span><span id="local-6989586621679126676"><span class="annot"><span class="annottext">Decode ('Closed d) x
</span><a href="#local-6989586621679126676"><span class="hs-identifier hs-var">dec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ann x -&gt; ann t -&gt; ann t)
-&gt; (forall s. Decoder s (ann x)) -&gt; Field (ann t)
forall x t. (x -&gt; t -&gt; t) -&gt; (forall s. Decoder s x) -&gt; Field t
</span><a href="Data.Coders.html#Field"><span class="hs-identifier hs-var">Field</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(x -&gt; t -&gt; t) -&gt; ann x -&gt; ann t -&gt; ann t
forall (f :: * -&gt; *) a b c.
Applicative f =&gt;
(a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftA2</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; t -&gt; t
</span><a href="#local-6989586621679126677"><span class="hs-identifier hs-var">update</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">x -&gt; ann x
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(x -&gt; ann x) -&gt; Decoder s x -&gt; Decoder s (ann x)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) x -&gt; Decoder s x
forall (w :: Wrapped) t s. Decode w t -&gt; Decoder s t
</span><a href="Data.Coders.html#decode"><span class="hs-identifier hs-var">decode</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) x
</span><a href="#local-6989586621679126676"><span class="hs-identifier hs-var">dec</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-534"></span><span>
</span><span id="line-535"></span><span id="local-6989586621679126672"><span id="local-6989586621679126673"><span id="local-6989586621679126674"><span id="local-6989586621679126675"><span class="annot"><a href="Data.Coders.html#fieldAA"><span class="hs-identifier hs-type">fieldAA</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Applicative</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126675"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679126674"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679126673"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679126673"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126672"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679126675"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126674"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Field"><span class="hs-identifier hs-type">Field</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679126675"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126673"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-536"></span><span id="fieldAA"><span class="annot"><span class="annottext">fieldAA :: (x -&gt; t -&gt; t) -&gt; Decode ('Closed d) (ann x) -&gt; Field (ann t)
</span><a href="Data.Coders.html#fieldAA"><span class="hs-identifier hs-var hs-var">fieldAA</span></a></span></span><span> </span><span id="local-6989586621679126671"><span class="annot"><span class="annottext">x -&gt; t -&gt; t
</span><a href="#local-6989586621679126671"><span class="hs-identifier hs-var">update</span></a></span></span><span> </span><span id="local-6989586621679126670"><span class="annot"><span class="annottext">Decode ('Closed d) (ann x)
</span><a href="#local-6989586621679126670"><span class="hs-identifier hs-var">dec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ann x -&gt; ann t -&gt; ann t)
-&gt; (forall s. Decoder s (ann x)) -&gt; Field (ann t)
forall x t. (x -&gt; t -&gt; t) -&gt; (forall s. Decoder s x) -&gt; Field t
</span><a href="Data.Coders.html#Field"><span class="hs-identifier hs-var">Field</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(x -&gt; t -&gt; t) -&gt; ann x -&gt; ann t -&gt; ann t
forall (f :: * -&gt; *) a b c.
Applicative f =&gt;
(a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftA2</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; t -&gt; t
</span><a href="#local-6989586621679126671"><span class="hs-identifier hs-var">update</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decode ('Closed d) (ann x) -&gt; Decoder s (ann x)
forall (w :: Wrapped) t s. Decode w t -&gt; Decoder s t
</span><a href="Data.Coders.html#decode"><span class="hs-identifier hs-var">decode</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) (ann x)
</span><a href="#local-6989586621679126670"><span class="hs-identifier hs-var">dec</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-537"></span><span>
</span><span id="line-538"></span><span class="hs-comment">-- ===========================================================</span><span>
</span><span id="line-539"></span><span class="hs-comment">-- The coders and the decoders as GADT datatypes</span><span>
</span><span id="line-540"></span><span class="hs-comment">-- ===========================================================</span><span>
</span><span id="line-541"></span><span>
</span><span id="line-542"></span><span class="hs-keyword">data</span><span> </span><span id="Encode"><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-var">Encode</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679126669"><span class="annot"><a href="#local-6989586621679126669"><span class="hs-identifier hs-type">w</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Wrapped"><span class="hs-identifier hs-type">Wrapped</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679126668"><span class="annot"><a href="#local-6989586621679126668"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-543"></span><span>  </span><span id="local-6989586621679126667"><span id="Rec"><span class="annot"><a href="Data.Coders.html#Rec"><span class="hs-identifier hs-var">Rec</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679126667"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679126667"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-comment">-- Constructor of normal Record (1 constructor)</span><span>
</span><span id="line-544"></span><span>  </span><span id="local-6989586621679126665"><span id="Sum"><span class="annot"><a href="Data.Coders.html#Sum"><span class="hs-identifier hs-var">Sum</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679126665"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Open"><span class="hs-identifier hs-type">Open</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126665"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-comment">-- One Constructor of many</span><span>
</span><span id="line-545"></span><span>  </span><span id="local-6989586621679126663"><span id="Keyed"><span class="annot"><a href="Data.Coders.html#Keyed"><span class="hs-identifier hs-var">Keyed</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679126663"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Sparse"><span class="hs-identifier hs-type">Sparse</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679126663"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-comment">-- One Constructor with sparse encoding</span><span>
</span><span id="line-546"></span><span>  </span><span id="local-6989586621679126661"><span id="To"><span class="annot"><a href="Data.Coders.html#To"><span class="hs-identifier hs-var">To</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126661"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679126661"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679126661"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-547"></span><span>  </span><span id="local-6989586621679127210"><span id="E"><span class="annot"><a href="Data.Coders.html#E"><span class="hs-identifier hs-var">E</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679127210"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Encoding</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679127210"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679127210"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-548"></span><span>  </span><span id="local-6989586621679126658"><span id="local-6989586621679127211"><span id="local-6989586621679127212"><span id="MapE"><span class="annot"><a href="Data.Coders.html#MapE"><span class="hs-identifier hs-var">MapE</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679126658"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679127212"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127211"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126658"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127211"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127212"><span class="hs-identifier hs-type">b</span></a></span></span></span></span><span>
</span><span id="line-549"></span><span>  </span><span id="local-6989586621679127036"><span id="ED"><span class="annot"><a href="Data.Coders.html#ED"><span class="hs-identifier hs-var">ED</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-type">Dual</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127036"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679127036"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679127036"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-550"></span><span>  </span><span id="local-6989586621679127215"><span id="local-6989586621679127216"><span id="OmitC"><span class="annot"><a href="Data.Coders.html#OmitC"><span class="hs-identifier hs-var">OmitC</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679127216"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127215"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127216"><span class="hs-identifier hs-type">t</span></a></span></span></span><span>
</span><span id="line-551"></span><span>  </span><span id="local-6989586621679126653"><span id="local-6989586621679126654"><span id="Tag"><span class="annot"><a href="Data.Coders.html#Tag"><span class="hs-identifier hs-var">Tag</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126654"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679126653"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126654"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679126653"><span class="hs-identifier hs-type">t</span></a></span></span></span><span>
</span><span id="line-552"></span><span>  </span><span id="local-6989586621679126651"><span id="Omit"><span class="annot"><a href="Data.Coders.html#Omit"><span class="hs-identifier hs-var">Omit</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679126651"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Sparse"><span class="hs-identifier hs-type">Sparse</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679126651"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Sparse"><span class="hs-identifier hs-type">Sparse</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679126651"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-553"></span><span>  </span><span id="local-6989586621679127214"><span id="Key"><span class="annot"><a href="Data.Coders.html#Key"><span class="hs-identifier hs-var">Key</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679127214"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Sparse"><span class="hs-identifier hs-type">Sparse</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679127214"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-554"></span><span>  </span><span id="local-6989586621679126647"><span id="local-6989586621679126648"><span id="local-6989586621679127257"><span id="local-6989586621679127259"><span id="ApplyE"><span class="annot"><a href="Data.Coders.html#ApplyE"><span class="hs-identifier hs-var">ApplyE</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127259"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679126648"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679127257"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126647"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679126648"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127259"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127257"><span class="hs-identifier hs-type">t</span></a></span></span></span></span></span><span>
</span><span id="line-555"></span><span>
</span><span id="line-556"></span><span class="hs-comment">-- The Wrapped index of ApplyE is determined by the index</span><span>
</span><span id="line-557"></span><span class="hs-comment">-- at the bottom of its left spine. The choices are 'Open (Sum c tag),</span><span>
</span><span id="line-558"></span><span class="hs-comment">-- ('Closed 'Dense) (Rec c), and ('Closed 'Sparse) (Keyed c).</span><span>
</span><span id="line-559"></span><span>
</span><span id="line-560"></span><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">4</span><span> </span><span class="annot"><a href="Data.Coders.html#%21%3E"><span class="hs-operator hs-type">!&gt;</span></a></span><span>
</span><span id="line-561"></span><span>
</span><span id="line-562"></span><span id="local-6989586621679126642"><span id="local-6989586621679126643"><span id="local-6989586621679126644"><span id="local-6989586621679126645"><span class="annot"><a href="Data.Coders.html#%21%3E"><span class="hs-operator hs-type">(!&gt;)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126645"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679126644"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679126643"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126642"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679126644"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126645"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126643"><span class="hs-identifier hs-type">t</span></a></span></span></span></span></span><span>
</span><span id="line-563"></span><span id="local-6989586621679126641"><span class="annot"><span class="annottext">Encode w (a -&gt; t)
</span><a href="#local-6989586621679126641"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="%21%3E"><span class="annot"><span class="annottext">!&gt; :: Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><a href="Data.Coders.html#%21%3E"><span class="hs-operator hs-var hs-var">!&gt;</span></a></span></span><span> </span><span id="local-6989586621679126640"><span class="annot"><span class="annottext">Encode ('Closed r) a
</span><a href="#local-6989586621679126640"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
forall (w :: Wrapped) a t (r :: Density).
Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><a href="Data.Coders.html#ApplyE"><span class="hs-identifier hs-var">ApplyE</span></a></span><span> </span><span class="annot"><span class="annottext">Encode w (a -&gt; t)
</span><a href="#local-6989586621679126641"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed r) a
</span><a href="#local-6989586621679126640"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-564"></span><span>
</span><span id="line-565"></span><span id="local-6989586621679127250"><span id="local-6989586621679127251"><span class="annot"><a href="Data.Coders.html#runE"><span class="hs-identifier hs-type">runE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127251"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127250"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679127250"><span class="hs-identifier hs-type">t</span></a></span></span></span><span>
</span><span id="line-566"></span><span id="runE"><span class="annot"><span class="annottext">runE :: Encode w t -&gt; t
</span><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var hs-var">runE</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Sum"><span class="hs-identifier hs-type">Sum</span></a></span><span> </span><span id="local-6989586621679126639"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126639"><span class="hs-identifier hs-var">cn</span></a></span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126639"><span class="hs-identifier hs-var">cn</span></a></span><span>
</span><span id="line-567"></span><span class="annot"><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Rec"><span class="hs-identifier hs-type">Rec</span></a></span><span> </span><span id="local-6989586621679126638"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126638"><span class="hs-identifier hs-var">cn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126638"><span class="hs-identifier hs-var">cn</span></a></span><span>
</span><span id="line-568"></span><span class="annot"><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#ApplyE"><span class="hs-identifier hs-type">ApplyE</span></a></span><span> </span><span id="local-6989586621679126637"><span class="annot"><span class="annottext">Encode w (a -&gt; t)
</span><a href="#local-6989586621679126637"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679126636"><span class="annot"><span class="annottext">Encode ('Closed r) a
</span><a href="#local-6989586621679126636"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Encode w (a -&gt; t) -&gt; a -&gt; t
forall (w :: Wrapped) t. Encode w t -&gt; t
</span><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="annot"><span class="annottext">Encode w (a -&gt; t)
</span><a href="#local-6989586621679126637"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Encode ('Closed r) a -&gt; a
forall (w :: Wrapped) t. Encode w t -&gt; t
</span><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed r) a
</span><a href="#local-6989586621679126636"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-569"></span><span class="annot"><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#To"><span class="hs-identifier hs-type">To</span></a></span><span> </span><span id="local-6989586621679126635"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126635"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126635"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-570"></span><span class="annot"><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#E"><span class="hs-identifier hs-type">E</span></a></span><span> </span><span class="annot"><span class="annottext">t -&gt; Encoding
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679126634"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126634"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126634"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-571"></span><span class="annot"><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#MapE"><span class="hs-identifier hs-type">MapE</span></a></span><span> </span><span id="local-6989586621679126633"><span class="annot"><span class="annottext">a -&gt; t
</span><a href="#local-6989586621679126633"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679126632"><span class="annot"><span class="annottext">Encode w a
</span><a href="#local-6989586621679126632"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; t
</span><a href="#local-6989586621679126633"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; t) -&gt; a -&gt; t
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Encode w a -&gt; a
forall (w :: Wrapped) t. Encode w t -&gt; t
</span><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="annot"><span class="annottext">Encode w a
</span><a href="#local-6989586621679126632"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-572"></span><span class="annot"><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#ED"><span class="hs-identifier hs-type">ED</span></a></span><span> </span><span class="annot"><span class="annottext">Dual t
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679126631"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126631"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126631"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-573"></span><span class="annot"><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#OmitC"><span class="hs-identifier hs-type">OmitC</span></a></span><span> </span><span id="local-6989586621679126630"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126630"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126630"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-574"></span><span class="annot"><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Omit"><span class="hs-identifier hs-type">Omit</span></a></span><span> </span><span class="annot"><span class="annottext">t -&gt; Bool
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679126629"><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t
</span><a href="#local-6989586621679126629"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t -&gt; t
forall (w :: Wrapped) t. Encode w t -&gt; t
</span><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t
</span><a href="#local-6989586621679126629"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-575"></span><span class="annot"><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Tag"><span class="hs-identifier hs-type">Tag</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679126628"><span class="annot"><span class="annottext">Encode ('Closed x) t
</span><a href="#local-6989586621679126628"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Encode ('Closed x) t -&gt; t
forall (w :: Wrapped) t. Encode w t -&gt; t
</span><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed x) t
</span><a href="#local-6989586621679126628"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-576"></span><span class="annot"><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Key"><span class="hs-identifier hs-type">Key</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679126627"><span class="annot"><span class="annottext">Encode ('Closed 'Dense) t
</span><a href="#local-6989586621679126627"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Dense) t -&gt; t
forall (w :: Wrapped) t. Encode w t -&gt; t
</span><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Dense) t
</span><a href="#local-6989586621679126627"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-577"></span><span class="annot"><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Keyed"><span class="hs-identifier hs-type">Keyed</span></a></span><span> </span><span id="local-6989586621679126626"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126626"><span class="hs-identifier hs-var">cn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126626"><span class="hs-identifier hs-var">cn</span></a></span><span>
</span><span id="line-578"></span><span>
</span><span id="line-579"></span><span id="local-6989586621679127240"><span id="local-6989586621679127241"><span class="annot"><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-type">gsize</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127241"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127240"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span></span></span><span>
</span><span id="line-580"></span><span id="gsize"><span class="annot"><span class="annottext">gsize :: Encode w t -&gt; Word
</span><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-var hs-var">gsize</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Sum"><span class="hs-identifier hs-type">Sum</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">0</span></span><span>
</span><span id="line-581"></span><span class="annot"><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-var">gsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Rec"><span class="hs-identifier hs-type">Rec</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">0</span></span><span>
</span><span id="line-582"></span><span class="annot"><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-var">gsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#To"><span class="hs-identifier hs-type">To</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">1</span></span><span>
</span><span id="line-583"></span><span class="annot"><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-var">gsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#E"><span class="hs-identifier hs-type">E</span></a></span><span> </span><span class="annot"><span class="annottext">t -&gt; Encoding
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">1</span></span><span>
</span><span id="line-584"></span><span class="annot"><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-var">gsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#MapE"><span class="hs-identifier hs-type">MapE</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; t
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679126624"><span class="annot"><span class="annottext">Encode w a
</span><a href="#local-6989586621679126624"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Encode w a -&gt; Word
forall (w :: Wrapped) t. Encode w t -&gt; Word
</span><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-var">gsize</span></a></span><span> </span><span class="annot"><span class="annottext">Encode w a
</span><a href="#local-6989586621679126624"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-585"></span><span class="annot"><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-var">gsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#ApplyE"><span class="hs-identifier hs-type">ApplyE</span></a></span><span> </span><span id="local-6989586621679126623"><span class="annot"><span class="annottext">Encode w (a -&gt; t)
</span><a href="#local-6989586621679126623"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679126622"><span class="annot"><span class="annottext">Encode ('Closed r) a
</span><a href="#local-6989586621679126622"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Encode w (a -&gt; t) -&gt; Word
forall (w :: Wrapped) t. Encode w t -&gt; Word
</span><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-var">gsize</span></a></span><span> </span><span class="annot"><span class="annottext">Encode w (a -&gt; t)
</span><a href="#local-6989586621679126623"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed r) a -&gt; Word
forall (w :: Wrapped) t. Encode w t -&gt; Word
</span><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-var">gsize</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed r) a
</span><a href="#local-6989586621679126622"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-586"></span><span class="annot"><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-var">gsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#ED"><span class="hs-identifier hs-type">ED</span></a></span><span> </span><span class="annot"><span class="annottext">Dual t
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">1</span></span><span>
</span><span id="line-587"></span><span class="annot"><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-var">gsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#OmitC"><span class="hs-identifier hs-type">OmitC</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">0</span></span><span>
</span><span id="line-588"></span><span class="annot"><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-var">gsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Omit"><span class="hs-identifier hs-type">Omit</span></a></span><span> </span><span id="local-6989586621679126621"><span class="annot"><span class="annottext">t -&gt; Bool
</span><a href="#local-6989586621679126621"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679126620"><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t
</span><a href="#local-6989586621679126620"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">t -&gt; Bool
</span><a href="#local-6989586621679126621"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t -&gt; t
forall (w :: Wrapped) t. Encode w t -&gt; t
</span><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t
</span><a href="#local-6989586621679126620"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">0</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t -&gt; Word
forall (w :: Wrapped) t. Encode w t -&gt; Word
</span><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-var">gsize</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t
</span><a href="#local-6989586621679126620"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-589"></span><span class="annot"><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-var">gsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Tag"><span class="hs-identifier hs-type">Tag</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed x) t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">1</span></span><span>
</span><span id="line-590"></span><span class="annot"><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-var">gsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Key"><span class="hs-identifier hs-type">Key</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679126619"><span class="annot"><span class="annottext">Encode ('Closed 'Dense) t
</span><a href="#local-6989586621679126619"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Dense) t -&gt; Word
forall (w :: Wrapped) t. Encode w t -&gt; Word
</span><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-var">gsize</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Dense) t
</span><a href="#local-6989586621679126619"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-591"></span><span class="annot"><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-var">gsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Keyed"><span class="hs-identifier hs-type">Keyed</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">0</span></span><span>
</span><span id="line-592"></span><span>
</span><span id="line-593"></span><span id="local-6989586621679126617"><span id="local-6989586621679126618"><span class="annot"><a href="Data.Coders.html#encode"><span class="hs-identifier hs-type">encode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126618"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126617"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Encoding</span></a></span></span></span><span>
</span><span id="line-594"></span><span id="encode"><span class="annot"><span class="annottext">encode :: Encode w t -&gt; Encoding
</span><a href="Data.Coders.html#encode"><span class="hs-identifier hs-var hs-var">encode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encode w t -&gt; Encoding
forall (w :: Wrapped) t. Word -&gt; Encode w t -&gt; Encoding
</span><a href="#local-6989586621679126616"><span class="hs-identifier hs-var">encodeCountPrefix</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">0</span></span><span>
</span><span id="line-595"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-596"></span><span>    </span><span id="local-6989586621679127233"><span id="local-6989586621679127234"><span class="annot"><a href="#local-6989586621679126616"><span class="hs-identifier hs-type">encodeCountPrefix</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127234"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127233"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Encoding</span></a></span></span></span><span>
</span><span id="line-597"></span><span>    </span><span class="hs-comment">-- n is the number of fields we must write in the prefix.</span><span>
</span><span id="line-598"></span><span>    </span><span id="local-6989586621679126616"><span class="annot"><span class="annottext">encodeCountPrefix :: Word -&gt; Encode w t -&gt; Encoding
</span><a href="#local-6989586621679126616"><span class="hs-identifier hs-var hs-var">encodeCountPrefix</span></a></span></span><span> </span><span id="local-6989586621679126615"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126615"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Sum"><span class="hs-identifier hs-type">Sum</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679126614"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126614"><span class="hs-identifier hs-var">tag</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">encodeListLen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126615"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">encodeWord</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126614"><span class="hs-identifier hs-var">tag</span></a></span><span>
</span><span id="line-599"></span><span>    </span><span class="annot"><a href="#local-6989586621679126616"><span class="hs-identifier hs-var">encodeCountPrefix</span></a></span><span> </span><span id="local-6989586621679126613"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126613"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Keyed"><span class="hs-identifier hs-type">Keyed</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">encodeMapLen</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126613"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-600"></span><span>    </span><span class="annot"><a href="#local-6989586621679126616"><span class="hs-identifier hs-var">encodeCountPrefix</span></a></span><span> </span><span id="local-6989586621679126612"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126612"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Rec"><span class="hs-identifier hs-type">Rec</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">encodeListLen</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126612"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-601"></span><span>    </span><span class="annot"><a href="#local-6989586621679126616"><span class="hs-identifier hs-var">encodeCountPrefix</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#To"><span class="hs-identifier hs-type">To</span></a></span><span> </span><span id="local-6989586621679126611"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126611"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126611"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-602"></span><span>    </span><span class="annot"><a href="#local-6989586621679126616"><span class="hs-identifier hs-var">encodeCountPrefix</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#E"><span class="hs-identifier hs-type">E</span></a></span><span> </span><span id="local-6989586621679126610"><span class="annot"><span class="annottext">t -&gt; Encoding
</span><a href="#local-6989586621679126610"><span class="hs-identifier hs-var">enc</span></a></span></span><span> </span><span id="local-6989586621679126609"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126609"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; Encoding
</span><a href="#local-6989586621679126610"><span class="hs-identifier hs-var">enc</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126609"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-603"></span><span>    </span><span class="annot"><a href="#local-6989586621679126616"><span class="hs-identifier hs-var">encodeCountPrefix</span></a></span><span> </span><span id="local-6989586621679126608"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126608"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#MapE"><span class="hs-identifier hs-type">MapE</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; t
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679126607"><span class="annot"><span class="annottext">Encode w a
</span><a href="#local-6989586621679126607"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encode w a -&gt; Encoding
forall (w :: Wrapped) t. Word -&gt; Encode w t -&gt; Encoding
</span><a href="#local-6989586621679126616"><span class="hs-identifier hs-var">encodeCountPrefix</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126608"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Encode w a
</span><a href="#local-6989586621679126607"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-604"></span><span>    </span><span class="annot"><a href="#local-6989586621679126616"><span class="hs-identifier hs-var">encodeCountPrefix</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#ED"><span class="hs-identifier hs-type">ED</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-type">Dual</span></a></span><span> </span><span id="local-6989586621679126606"><span class="annot"><span class="annottext">t -&gt; Encoding
</span><a href="#local-6989586621679126606"><span class="hs-identifier hs-var">enc</span></a></span></span><span> </span><span class="annot"><span class="annottext">forall s. Decoder s t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679126605"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126605"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; Encoding
</span><a href="#local-6989586621679126606"><span class="hs-identifier hs-var">enc</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126605"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-605"></span><span>    </span><span class="annot"><a href="#local-6989586621679126616"><span class="hs-identifier hs-var">encodeCountPrefix</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#OmitC"><span class="hs-identifier hs-type">OmitC</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Encoding
forall a. Monoid a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-606"></span><span>    </span><span class="annot"><a href="#local-6989586621679126616"><span class="hs-identifier hs-var">encodeCountPrefix</span></a></span><span> </span><span id="local-6989586621679126604"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126604"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Tag"><span class="hs-identifier hs-type">Tag</span></a></span><span> </span><span id="local-6989586621679126603"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126603"><span class="hs-identifier hs-var">tag</span></a></span></span><span> </span><span id="local-6989586621679126602"><span class="annot"><span class="annottext">Encode ('Closed x) t
</span><a href="#local-6989586621679126602"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">encodeTag</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126603"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encode ('Closed x) t -&gt; Encoding
forall (w :: Wrapped) t. Word -&gt; Encode w t -&gt; Encoding
</span><a href="#local-6989586621679126616"><span class="hs-identifier hs-var">encodeCountPrefix</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126604"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed x) t
</span><a href="#local-6989586621679126602"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-607"></span><span>    </span><span class="annot"><a href="#local-6989586621679126616"><span class="hs-identifier hs-var">encodeCountPrefix</span></a></span><span> </span><span id="local-6989586621679126601"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126601"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Key"><span class="hs-identifier hs-type">Key</span></a></span><span> </span><span id="local-6989586621679126600"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126600"><span class="hs-identifier hs-var">tag</span></a></span></span><span> </span><span id="local-6989586621679126599"><span class="annot"><span class="annottext">Encode ('Closed 'Dense) t
</span><a href="#local-6989586621679126599"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">encodeWord</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126600"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encode ('Closed 'Dense) t -&gt; Encoding
forall (w :: Wrapped) t. Word -&gt; Encode w t -&gt; Encoding
</span><a href="#local-6989586621679126616"><span class="hs-identifier hs-var">encodeCountPrefix</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126601"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Dense) t
</span><a href="#local-6989586621679126599"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-608"></span><span>    </span><span class="annot"><a href="#local-6989586621679126616"><span class="hs-identifier hs-var">encodeCountPrefix</span></a></span><span> </span><span id="local-6989586621679126598"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126598"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Omit"><span class="hs-identifier hs-type">Omit</span></a></span><span> </span><span id="local-6989586621679126597"><span class="annot"><span class="annottext">t -&gt; Bool
</span><a href="#local-6989586621679126597"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679126596"><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t
</span><a href="#local-6989586621679126596"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-609"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">t -&gt; Bool
</span><a href="#local-6989586621679126597"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t -&gt; t
forall (w :: Wrapped) t. Encode w t -&gt; t
</span><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t
</span><a href="#local-6989586621679126596"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Encoding
forall a. Monoid a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encode ('Closed 'Sparse) t -&gt; Encoding
forall (w :: Wrapped) t. Word -&gt; Encode w t -&gt; Encoding
</span><a href="#local-6989586621679126616"><span class="hs-identifier hs-var">encodeCountPrefix</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126598"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t
</span><a href="#local-6989586621679126596"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-610"></span><span>    </span><span class="annot"><a href="#local-6989586621679126616"><span class="hs-identifier hs-var">encodeCountPrefix</span></a></span><span> </span><span id="local-6989586621679126595"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126595"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#ApplyE"><span class="hs-identifier hs-type">ApplyE</span></a></span><span> </span><span id="local-6989586621679126594"><span class="annot"><span class="annottext">Encode w (a -&gt; t)
</span><a href="#local-6989586621679126594"><span class="hs-identifier hs-var">ff</span></a></span></span><span> </span><span id="local-6989586621679126593"><span class="annot"><span class="annottext">Encode ('Closed r) a
</span><a href="#local-6989586621679126593"><span class="hs-identifier hs-var">xx</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encode w (a -&gt; t) -&gt; Encoding
forall (w :: Wrapped) t. Word -&gt; Encode w t -&gt; Encoding
</span><a href="#local-6989586621679126616"><span class="hs-identifier hs-var">encodeCountPrefix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126595"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed r) a -&gt; Word
forall (w :: Wrapped) t. Encode w t -&gt; Word
</span><a href="Data.Coders.html#gsize"><span class="hs-identifier hs-var">gsize</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed r) a
</span><a href="#local-6989586621679126593"><span class="hs-identifier hs-var">xx</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Encode w (a -&gt; t)
</span><a href="#local-6989586621679126594"><span class="hs-identifier hs-var">ff</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed r) a -&gt; Encoding
forall (d :: Density) t. Encode ('Closed d) t -&gt; Encoding
</span><a href="#local-6989586621679126592"><span class="hs-identifier hs-var">encodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed r) a
</span><a href="#local-6989586621679126593"><span class="hs-identifier hs-var">xx</span></a></span><span>
</span><span id="line-611"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-612"></span><span>        </span><span id="local-6989586621679127224"><span id="local-6989586621679127225"><span class="annot"><a href="#local-6989586621679126592"><span class="hs-identifier hs-type">encodeClosed</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127225"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679127224"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Encoding</span></a></span></span></span><span>
</span><span id="line-613"></span><span>        </span><span id="local-6989586621679126592"><span class="annot"><span class="annottext">encodeClosed :: Encode ('Closed d) t -&gt; Encoding
</span><a href="#local-6989586621679126592"><span class="hs-identifier hs-var hs-var">encodeClosed</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Rec"><span class="hs-identifier hs-type">Rec</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Encoding
forall a. Monoid a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-614"></span><span>        </span><span class="annot"><a href="#local-6989586621679126592"><span class="hs-identifier hs-var">encodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#To"><span class="hs-identifier hs-type">To</span></a></span><span> </span><span id="local-6989586621679126591"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126591"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126591"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-615"></span><span>        </span><span class="annot"><a href="#local-6989586621679126592"><span class="hs-identifier hs-var">encodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#E"><span class="hs-identifier hs-type">E</span></a></span><span> </span><span id="local-6989586621679126590"><span class="annot"><span class="annottext">t -&gt; Encoding
</span><a href="#local-6989586621679126590"><span class="hs-identifier hs-var">enc</span></a></span></span><span> </span><span id="local-6989586621679126589"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126589"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; Encoding
</span><a href="#local-6989586621679126590"><span class="hs-identifier hs-var">enc</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126589"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-616"></span><span>        </span><span class="annot"><a href="#local-6989586621679126592"><span class="hs-identifier hs-var">encodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#MapE"><span class="hs-identifier hs-type">MapE</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; t
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679126588"><span class="annot"><span class="annottext">Encode ('Closed d) a
</span><a href="#local-6989586621679126588"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Encode ('Closed d) a -&gt; Encoding
forall (d :: Density) t. Encode ('Closed d) t -&gt; Encoding
</span><a href="#local-6989586621679126592"><span class="hs-identifier hs-var">encodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed d) a
</span><a href="#local-6989586621679126588"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-617"></span><span>        </span><span class="annot"><a href="#local-6989586621679126592"><span class="hs-identifier hs-var">encodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#ApplyE"><span class="hs-identifier hs-type">ApplyE</span></a></span><span> </span><span id="local-6989586621679126587"><span class="annot"><span class="annottext">Encode ('Closed d) (a -&gt; t)
</span><a href="#local-6989586621679126587"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679126586"><span class="annot"><span class="annottext">Encode ('Closed r) a
</span><a href="#local-6989586621679126586"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Encode ('Closed d) (a -&gt; t) -&gt; Encoding
forall (d :: Density) t. Encode ('Closed d) t -&gt; Encoding
</span><a href="#local-6989586621679126592"><span class="hs-identifier hs-var">encodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed d) (a -&gt; t)
</span><a href="#local-6989586621679126587"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed r) a -&gt; Encoding
forall (d :: Density) t. Encode ('Closed d) t -&gt; Encoding
</span><a href="#local-6989586621679126592"><span class="hs-identifier hs-var">encodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed r) a
</span><a href="#local-6989586621679126586"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-618"></span><span>        </span><span class="annot"><a href="#local-6989586621679126592"><span class="hs-identifier hs-var">encodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#ED"><span class="hs-identifier hs-type">ED</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-type">Dual</span></a></span><span> </span><span id="local-6989586621679126585"><span class="annot"><span class="annottext">t -&gt; Encoding
</span><a href="#local-6989586621679126585"><span class="hs-identifier hs-var">enc</span></a></span></span><span> </span><span class="annot"><span class="annottext">forall s. Decoder s t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679126584"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126584"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; Encoding
</span><a href="#local-6989586621679126585"><span class="hs-identifier hs-var">enc</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126584"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-619"></span><span>        </span><span class="annot"><a href="#local-6989586621679126592"><span class="hs-identifier hs-var">encodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#OmitC"><span class="hs-identifier hs-type">OmitC</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Encoding
forall a. Monoid a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-620"></span><span>        </span><span class="annot"><a href="#local-6989586621679126592"><span class="hs-identifier hs-var">encodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Omit"><span class="hs-identifier hs-type">Omit</span></a></span><span> </span><span id="local-6989586621679126583"><span class="annot"><span class="annottext">t -&gt; Bool
</span><a href="#local-6989586621679126583"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679126582"><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t
</span><a href="#local-6989586621679126582"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-621"></span><span>          </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">t -&gt; Bool
</span><a href="#local-6989586621679126583"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t -&gt; t
forall (w :: Wrapped) t. Encode w t -&gt; t
</span><a href="Data.Coders.html#runE"><span class="hs-identifier hs-var">runE</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t
</span><a href="#local-6989586621679126582"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Encoding
forall a. Monoid a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t -&gt; Encoding
forall (d :: Density) t. Encode ('Closed d) t -&gt; Encoding
</span><a href="#local-6989586621679126592"><span class="hs-identifier hs-var">encodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Sparse) t
</span><a href="#local-6989586621679126582"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-622"></span><span>        </span><span class="annot"><a href="#local-6989586621679126592"><span class="hs-identifier hs-var">encodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Tag"><span class="hs-identifier hs-type">Tag</span></a></span><span> </span><span id="local-6989586621679126581"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126581"><span class="hs-identifier hs-var">tag</span></a></span></span><span> </span><span id="local-6989586621679126580"><span class="annot"><span class="annottext">Encode ('Closed x) t
</span><a href="#local-6989586621679126580"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">encodeTag</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126581"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed x) t -&gt; Encoding
forall (d :: Density) t. Encode ('Closed d) t -&gt; Encoding
</span><a href="#local-6989586621679126592"><span class="hs-identifier hs-var">encodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed x) t
</span><a href="#local-6989586621679126580"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-623"></span><span>        </span><span class="annot"><a href="#local-6989586621679126592"><span class="hs-identifier hs-var">encodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Key"><span class="hs-identifier hs-type">Key</span></a></span><span> </span><span id="local-6989586621679126579"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126579"><span class="hs-identifier hs-var">tag</span></a></span></span><span> </span><span id="local-6989586621679126578"><span class="annot"><span class="annottext">Encode ('Closed 'Dense) t
</span><a href="#local-6989586621679126578"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">encodeWord</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126579"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Dense) t -&gt; Encoding
forall (d :: Density) t. Encode ('Closed d) t -&gt; Encoding
</span><a href="#local-6989586621679126592"><span class="hs-identifier hs-var">encodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Dense) t
</span><a href="#local-6989586621679126578"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-624"></span><span>        </span><span class="annot"><a href="#local-6989586621679126592"><span class="hs-identifier hs-var">encodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Keyed"><span class="hs-identifier hs-type">Keyed</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Encoding
forall a. Monoid a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-625"></span><span>
</span><span id="line-626"></span><span id="local-6989586621679127208"><span class="annot"><a href="Data.Coders.html#encodeKeyedStrictMaybeWith"><span class="hs-identifier hs-type">encodeKeyedStrictMaybeWith</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679127208"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Encoding</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127208"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Sparse"><span class="hs-identifier hs-type">Sparse</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127208"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-627"></span><span id="encodeKeyedStrictMaybeWith"><span class="annot"><span class="annottext">encodeKeyedStrictMaybeWith :: Word
-&gt; (a -&gt; Encoding)
-&gt; StrictMaybe a
-&gt; Encode ('Closed 'Sparse) (StrictMaybe a)
</span><a href="Data.Coders.html#encodeKeyedStrictMaybeWith"><span class="hs-identifier hs-var hs-var">encodeKeyedStrictMaybeWith</span></a></span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Encoding
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">StrictMaybe a
</span><a href="../../../../strict-containers/html/src"><span class="hs-identifier hs-var">SNothing</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictMaybe a -&gt; Encode ('Closed 'Sparse) (StrictMaybe a)
forall t (w :: Wrapped). t -&gt; Encode w t
</span><a href="Data.Coders.html#OmitC"><span class="hs-identifier hs-var">OmitC</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe a
forall a. StrictMaybe a
</span><a href="../../../../strict-containers/html/src"><span class="hs-identifier hs-var">SNothing</span></a></span><span>
</span><span id="line-628"></span><span class="annot"><a href="Data.Coders.html#encodeKeyedStrictMaybeWith"><span class="hs-identifier hs-var">encodeKeyedStrictMaybeWith</span></a></span><span> </span><span id="local-6989586621679126577"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126577"><span class="hs-identifier hs-var">key</span></a></span></span><span> </span><span id="local-6989586621679126576"><span class="annot"><span class="annottext">a -&gt; Encoding
</span><a href="#local-6989586621679126576"><span class="hs-identifier hs-var">enc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier hs-type">SJust</span></a></span><span> </span><span id="local-6989586621679126575"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126575"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word
-&gt; Encode ('Closed 'Dense) (StrictMaybe a)
-&gt; Encode ('Closed 'Sparse) (StrictMaybe a)
forall t.
Word -&gt; Encode ('Closed 'Dense) t -&gt; Encode ('Closed 'Sparse) t
</span><a href="Data.Coders.html#Key"><span class="hs-identifier hs-var">Key</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126577"><span class="hs-identifier hs-var">key</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; StrictMaybe a)
-&gt; Encode ('Closed 'Dense) a
-&gt; Encode ('Closed 'Dense) (StrictMaybe a)
forall a b (w :: Wrapped). (a -&gt; b) -&gt; Encode w a -&gt; Encode w b
</span><a href="Data.Coders.html#MapE"><span class="hs-identifier hs-var">MapE</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; StrictMaybe a
forall a. a -&gt; StrictMaybe a
</span><a href="../../../../strict-containers/html/src"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="annot"><span class="annottext">(Encode ('Closed 'Dense) a
 -&gt; Encode ('Closed 'Dense) (StrictMaybe a))
-&gt; Encode ('Closed 'Dense) a
-&gt; Encode ('Closed 'Dense) (StrictMaybe a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; Encoding) -&gt; a -&gt; Encode ('Closed 'Dense) a
forall t. (t -&gt; Encoding) -&gt; t -&gt; Encode ('Closed 'Dense) t
</span><a href="Data.Coders.html#E"><span class="hs-identifier hs-var">E</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Encoding
</span><a href="#local-6989586621679126576"><span class="hs-identifier hs-var">enc</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126575"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-629"></span><span>
</span><span id="line-630"></span><span id="local-6989586621679126574"><span class="annot"><a href="Data.Coders.html#encodeKeyedStrictMaybe"><span class="hs-identifier hs-type">encodeKeyedStrictMaybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126574"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126574"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Sparse"><span class="hs-identifier hs-type">Sparse</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126574"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-631"></span><span id="encodeKeyedStrictMaybe"><span class="annot"><span class="annottext">encodeKeyedStrictMaybe :: Word -&gt; StrictMaybe a -&gt; Encode ('Closed 'Sparse) (StrictMaybe a)
</span><a href="Data.Coders.html#encodeKeyedStrictMaybe"><span class="hs-identifier hs-var hs-var">encodeKeyedStrictMaybe</span></a></span></span><span> </span><span id="local-6989586621679126573"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126573"><span class="hs-identifier hs-var">key</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word
-&gt; (a -&gt; Encoding)
-&gt; StrictMaybe a
-&gt; Encode ('Closed 'Sparse) (StrictMaybe a)
forall a.
Word
-&gt; (a -&gt; Encoding)
-&gt; StrictMaybe a
-&gt; Encode ('Closed 'Sparse) (StrictMaybe a)
</span><a href="Data.Coders.html#encodeKeyedStrictMaybeWith"><span class="hs-identifier hs-var">encodeKeyedStrictMaybeWith</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126573"><span class="hs-identifier hs-var">key</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span>
</span><span id="line-632"></span><span>
</span><span id="line-633"></span><span class="hs-comment">-- ==================================================================</span><span>
</span><span id="line-634"></span><span class="hs-comment">-- Decode</span><span>
</span><span id="line-635"></span><span class="hs-comment">-- ===================================================================</span><span>
</span><span id="line-636"></span><span>
</span><span id="line-637"></span><span class="hs-keyword">data</span><span> </span><span id="Decode"><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-var">Decode</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679126572"><span class="annot"><a href="#local-6989586621679126572"><span class="hs-identifier hs-type">w</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Wrapped"><span class="hs-identifier hs-type">Wrapped</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679126571"><span class="annot"><a href="#local-6989586621679126571"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-638"></span><span>  </span><span id="local-6989586621679126570"><span id="Summands"><span class="annot"><a href="Data.Coders.html#Summands"><span class="hs-identifier hs-var">Summands</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Open"><span class="hs-identifier hs-type">Open</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126570"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679126570"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-639"></span><span>  </span><span id="local-6989586621679126568"><span id="SparseKeyed"><span class="annot"><a href="Data.Coders.html#SparseKeyed"><span class="hs-identifier hs-var">SparseKeyed</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126568"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679126568"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Field"><span class="hs-identifier hs-type">Field</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126568"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679126568"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-640"></span><span>  </span><span id="local-6989586621679126566"><span id="SumD"><span class="annot"><a href="Data.Coders.html#SumD"><span class="hs-identifier hs-var">SumD</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679126566"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Open"><span class="hs-identifier hs-type">Open</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126566"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-641"></span><span>  </span><span id="local-6989586621679126564"><span id="RecD"><span class="annot"><a href="Data.Coders.html#RecD"><span class="hs-identifier hs-var">RecD</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679126564"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679126564"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-642"></span><span>  </span><span id="local-6989586621679126562"><span id="KeyedD"><span class="annot"><a href="Data.Coders.html#KeyedD"><span class="hs-identifier hs-var">KeyedD</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679126562"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Sparse"><span class="hs-identifier hs-type">Sparse</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679126562"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-643"></span><span>  </span><span id="local-6989586621679126559"><span id="local-6989586621679126560"><span id="From"><span class="annot"><a href="Data.Coders.html#From"><span class="hs-identifier hs-var">From</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126560"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126559"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126560"><span class="hs-identifier hs-type">t</span></a></span></span></span><span>
</span><span id="line-644"></span><span>  </span><span id="local-6989586621679127026"><span id="D"><span class="annot"><a href="Data.Coders.html#D"><span class="hs-identifier hs-var">D</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679127181"><span class="annot"><a href="#local-6989586621679127181"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127181"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127026"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679127026"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-645"></span><span>  </span><span id="local-6989586621679126555"><span id="local-6989586621679126556"><span id="local-6989586621679127201"><span id="local-6989586621679127203"><span id="ApplyD"><span class="annot"><a href="Data.Coders.html#ApplyD"><span class="hs-identifier hs-var">ApplyD</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127203"><span class="hs-identifier hs-type">w1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679126556"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679127201"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126555"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679126556"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127203"><span class="hs-identifier hs-type">w1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127201"><span class="hs-identifier hs-type">t</span></a></span></span></span></span></span><span>
</span><span id="line-646"></span><span>  </span><span id="local-6989586621679127278"><span id="local-6989586621679127279"><span id="Invalid"><span class="annot"><a href="Data.Coders.html#Invalid"><span class="hs-identifier hs-var">Invalid</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127279"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127278"><span class="hs-identifier hs-type">t</span></a></span></span></span><span>
</span><span id="line-647"></span><span>  </span><span id="local-6989586621679126553"><span id="local-6989586621679127079"><span id="local-6989586621679127080"><span id="Map"><span class="annot"><a href="Data.Coders.html#Map"><span class="hs-identifier hs-var">Map</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679126553"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679127080"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127079"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126553"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127079"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127080"><span class="hs-identifier hs-type">b</span></a></span></span></span></span><span>
</span><span id="line-648"></span><span>  </span><span id="local-6989586621679127033"><span id="DD"><span class="annot"><a href="Data.Coders.html#DD"><span class="hs-identifier hs-var">DD</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-type">Dual</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127033"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679127033"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-649"></span><span>  </span><span id="local-6989586621679126549"><span id="local-6989586621679126550"><span id="TagD"><span class="annot"><a href="Data.Coders.html#TagD"><span class="hs-identifier hs-var">TagD</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126550"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679126549"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126550"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679126549"><span class="hs-identifier hs-type">t</span></a></span></span></span><span>
</span><span id="line-650"></span><span>  </span><span id="local-6989586621679127064"><span id="local-6989586621679127065"><span id="Emit"><span class="annot"><a href="Data.Coders.html#Emit"><span class="hs-identifier hs-var">Emit</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679127065"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127064"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127065"><span class="hs-identifier hs-type">t</span></a></span></span></span><span>
</span><span id="line-651"></span><span>  </span><span class="hs-comment">-- The next two could be generalized to any (Applicative f) rather than Annotator</span><span>
</span><span id="line-652"></span><span>  </span><span id="local-6989586621679126545"><span id="local-6989586621679126546"><span id="Ann"><span class="annot"><a href="Data.Coders.html#Ann"><span class="hs-identifier hs-var">Ann</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126546"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126545"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126546"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">Annotator</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126545"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-653"></span><span>  </span><span id="local-6989586621679126541"><span id="local-6989586621679126542"><span id="local-6989586621679126543"><span id="local-6989586621679127195"><span id="ApplyAnn"><span class="annot"><a href="Data.Coders.html#ApplyAnn"><span class="hs-identifier hs-var">ApplyAnn</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127195"><span class="hs-identifier hs-type">w1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">Annotator</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679126543"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679126542"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126541"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">Annotator</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126543"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127195"><span class="hs-identifier hs-type">w1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">Annotator</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126542"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-654"></span><span>  </span><span class="hs-comment">-- A function to Either can raise an error when applied by returning (Left errorMessage)</span><span>
</span><span id="line-655"></span><span>  </span><span id="local-6989586621679126538"><span id="local-6989586621679126539"><span id="local-6989586621679127186"><span id="local-6989586621679127187"><span id="ApplyErr"><span class="annot"><a href="Data.Coders.html#ApplyErr"><span class="hs-identifier hs-var">ApplyErr</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127187"><span class="hs-identifier hs-type">w1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679126539"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127186"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126538"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679126539"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127187"><span class="hs-identifier hs-type">w1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127186"><span class="hs-identifier hs-type">t</span></a></span></span></span></span></span><span>
</span><span id="line-656"></span><span>
</span><span id="line-657"></span><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">4</span><span> </span><span class="annot"><a href="Data.Coders.html#%3C%21"><span class="hs-operator hs-type">&lt;!</span></a></span><span>
</span><span id="line-658"></span><span>
</span><span id="line-659"></span><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">4</span><span> </span><span class="annot"><a href="Data.Coders.html#%3C%2A%21"><span class="hs-operator hs-type">&lt;*!</span></a></span><span>
</span><span id="line-660"></span><span>
</span><span id="line-661"></span><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">4</span><span> </span><span class="annot"><a href="Data.Coders.html#%3C%3F"><span class="hs-operator hs-type">&lt;?</span></a></span><span>
</span><span id="line-662"></span><span>
</span><span id="line-663"></span><span id="local-6989586621679126533"><span id="local-6989586621679126534"><span id="local-6989586621679126535"><span id="local-6989586621679126536"><span class="annot"><a href="Data.Coders.html#%3C%21"><span class="hs-operator hs-type">(&lt;!)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126536"><span class="hs-identifier hs-type">w1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679126535"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679126534"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126533"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679126535"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126536"><span class="hs-identifier hs-type">w1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126534"><span class="hs-identifier hs-type">t</span></a></span></span></span></span></span><span>
</span><span id="line-664"></span><span id="local-6989586621679126532"><span class="annot"><span class="annottext">Decode w1 (a -&gt; t)
</span><a href="#local-6989586621679126532"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="%3C%21"><span class="annot"><span class="annottext">&lt;! :: Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
</span><a href="Data.Coders.html#%3C%21"><span class="hs-operator hs-var hs-var">&lt;!</span></a></span></span><span> </span><span id="local-6989586621679126531"><span class="annot"><span class="annottext">Decode ('Closed w) a
</span><a href="#local-6989586621679126531"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
forall (w1 :: Wrapped) a t (d :: Density).
Decode w1 (a -&gt; t) -&gt; Decode ('Closed d) a -&gt; Decode w1 t
</span><a href="Data.Coders.html#ApplyD"><span class="hs-identifier hs-var">ApplyD</span></a></span><span> </span><span class="annot"><span class="annottext">Decode w1 (a -&gt; t)
</span><a href="#local-6989586621679126532"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed w) a
</span><a href="#local-6989586621679126531"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-665"></span><span>
</span><span id="line-666"></span><span id="local-6989586621679126527"><span id="local-6989586621679126528"><span id="local-6989586621679126529"><span id="local-6989586621679126530"><span class="annot"><a href="Data.Coders.html#%3C%2A%21"><span class="hs-operator hs-type">(&lt;*!)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126530"><span class="hs-identifier hs-type">w1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">Annotator</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679126529"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679126528"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126527"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">Annotator</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126529"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126530"><span class="hs-identifier hs-type">w1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">Annotator</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126528"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-667"></span><span id="local-6989586621679126526"><span class="annot"><span class="annottext">Decode w1 (Annotator (a -&gt; t))
</span><a href="#local-6989586621679126526"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="%3C%2A%21"><span class="annot"><span class="annottext">&lt;*! :: Decode w1 (Annotator (a -&gt; t))
-&gt; Decode ('Closed d) (Annotator a) -&gt; Decode w1 (Annotator t)
</span><a href="Data.Coders.html#%3C%2A%21"><span class="hs-operator hs-var hs-var">&lt;*!</span></a></span></span><span> </span><span id="local-6989586621679126525"><span class="annot"><span class="annottext">Decode ('Closed d) (Annotator a)
</span><a href="#local-6989586621679126525"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decode w1 (Annotator (a -&gt; t))
-&gt; Decode ('Closed d) (Annotator a) -&gt; Decode w1 (Annotator t)
forall (w1 :: Wrapped) a t (a :: Density).
Decode w1 (Annotator (a -&gt; t))
-&gt; Decode ('Closed a) (Annotator a) -&gt; Decode w1 (Annotator t)
</span><a href="Data.Coders.html#ApplyAnn"><span class="hs-identifier hs-var">ApplyAnn</span></a></span><span> </span><span class="annot"><span class="annottext">Decode w1 (Annotator (a -&gt; t))
</span><a href="#local-6989586621679126526"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) (Annotator a)
</span><a href="#local-6989586621679126525"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-668"></span><span>
</span><span id="line-669"></span><span id="local-6989586621679126521"><span id="local-6989586621679126522"><span id="local-6989586621679126523"><span id="local-6989586621679126524"><span class="annot"><a href="Data.Coders.html#%3C%3F"><span class="hs-operator hs-type">(&lt;?)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126524"><span class="hs-identifier hs-type">w1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679126523"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126522"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126521"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679126523"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126524"><span class="hs-identifier hs-type">w1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126522"><span class="hs-identifier hs-type">t</span></a></span></span></span></span></span><span>
</span><span id="line-670"></span><span id="local-6989586621679126520"><span class="annot"><span class="annottext">Decode w1 (a -&gt; Either String t)
</span><a href="#local-6989586621679126520"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="%3C%3F"><span class="annot"><span class="annottext">&lt;? :: Decode w1 (a -&gt; Either String t)
-&gt; Decode ('Closed d) a -&gt; Decode w1 t
</span><a href="Data.Coders.html#%3C%3F"><span class="hs-operator hs-var hs-var">&lt;?</span></a></span></span><span> </span><span id="local-6989586621679126519"><span class="annot"><span class="annottext">Decode ('Closed d) a
</span><a href="#local-6989586621679126519"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decode w1 (a -&gt; Either String t)
-&gt; Decode ('Closed d) a -&gt; Decode w1 t
forall (w1 :: Wrapped) a t (d :: Density).
Decode w1 (a -&gt; Either String t)
-&gt; Decode ('Closed d) a -&gt; Decode w1 t
</span><a href="Data.Coders.html#ApplyErr"><span class="hs-identifier hs-var">ApplyErr</span></a></span><span> </span><span class="annot"><span class="annottext">Decode w1 (a -&gt; Either String t)
</span><a href="#local-6989586621679126520"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) a
</span><a href="#local-6989586621679126519"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-671"></span><span>
</span><span id="line-672"></span><span id="local-6989586621679127177"><span id="local-6989586621679127178"><span class="annot"><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-type">hsize</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127178"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127177"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span></span></span><span>
</span><span id="line-673"></span><span id="hsize"><span class="annot"><span class="annottext">hsize :: Decode w t -&gt; Int
</span><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var hs-var">hsize</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Summands"><span class="hs-identifier hs-type">Summands</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Decode 'Open t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-674"></span><span class="annot"><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#SumD"><span class="hs-identifier hs-type">SumD</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-675"></span><span class="annot"><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#RecD"><span class="hs-identifier hs-type">RecD</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-676"></span><span class="annot"><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#KeyedD"><span class="hs-identifier hs-type">KeyedD</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-677"></span><span class="annot"><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="annot"><span class="annottext">Decode w t
</span><a href="Data.Coders.html#From"><span class="hs-identifier hs-var">From</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-678"></span><span class="annot"><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#D"><span class="hs-identifier hs-type">D</span></a></span><span> </span><span class="annot"><span class="annottext">forall s. Decoder s t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-679"></span><span class="annot"><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#DD"><span class="hs-identifier hs-type">DD</span></a></span><span> </span><span class="annot"><span class="annottext">Dual t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-680"></span><span class="annot"><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#ApplyD"><span class="hs-identifier hs-type">ApplyD</span></a></span><span> </span><span id="local-6989586621679126517"><span class="annot"><span class="annottext">Decode w (a -&gt; t)
</span><a href="#local-6989586621679126517"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679126516"><span class="annot"><span class="annottext">Decode ('Closed d) a
</span><a href="#local-6989586621679126516"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decode w (a -&gt; t) -&gt; Int
forall (w :: Wrapped) t. Decode w t -&gt; Int
</span><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="annot"><span class="annottext">Decode w (a -&gt; t)
</span><a href="#local-6989586621679126517"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) a -&gt; Int
forall (w :: Wrapped) t. Decode w t -&gt; Int
</span><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) a
</span><a href="#local-6989586621679126516"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-681"></span><span class="annot"><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Invalid"><span class="hs-identifier hs-type">Invalid</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-682"></span><span class="annot"><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; t
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679126515"><span class="annot"><span class="annottext">Decode w a
</span><a href="#local-6989586621679126515"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decode w a -&gt; Int
forall (w :: Wrapped) t. Decode w t -&gt; Int
</span><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="annot"><span class="annottext">Decode w a
</span><a href="#local-6989586621679126515"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-683"></span><span class="annot"><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Emit"><span class="hs-identifier hs-type">Emit</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-684"></span><span class="annot"><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#SparseKeyed"><span class="hs-identifier hs-type">SparseKeyed</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Field t
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[(Word, String)]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-685"></span><span class="annot"><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#TagD"><span class="hs-identifier hs-type">TagD</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed x) t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-686"></span><span class="annot"><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Ann"><span class="hs-identifier hs-type">Ann</span></a></span><span> </span><span id="local-6989586621679126514"><span class="annot"><span class="annottext">Decode w t
</span><a href="#local-6989586621679126514"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decode w t -&gt; Int
forall (w :: Wrapped) t. Decode w t -&gt; Int
</span><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="annot"><span class="annottext">Decode w t
</span><a href="#local-6989586621679126514"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-687"></span><span class="annot"><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#ApplyAnn"><span class="hs-identifier hs-type">ApplyAnn</span></a></span><span> </span><span id="local-6989586621679126513"><span class="annot"><span class="annottext">Decode w (Annotator (a -&gt; t))
</span><a href="#local-6989586621679126513"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679126512"><span class="annot"><span class="annottext">Decode ('Closed d) (Annotator a)
</span><a href="#local-6989586621679126512"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decode w (Annotator (a -&gt; t)) -&gt; Int
forall (w :: Wrapped) t. Decode w t -&gt; Int
</span><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="annot"><span class="annottext">Decode w (Annotator (a -&gt; t))
</span><a href="#local-6989586621679126513"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) (Annotator a) -&gt; Int
forall (w :: Wrapped) t. Decode w t -&gt; Int
</span><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) (Annotator a)
</span><a href="#local-6989586621679126512"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-688"></span><span class="annot"><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#ApplyErr"><span class="hs-identifier hs-type">ApplyErr</span></a></span><span> </span><span id="local-6989586621679126511"><span class="annot"><span class="annottext">Decode w (a -&gt; Either String t)
</span><a href="#local-6989586621679126511"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679126510"><span class="annot"><span class="annottext">Decode ('Closed d) a
</span><a href="#local-6989586621679126510"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decode w (a -&gt; Either String t) -&gt; Int
forall (w :: Wrapped) t. Decode w t -&gt; Int
</span><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="annot"><span class="annottext">Decode w (a -&gt; Either String t)
</span><a href="#local-6989586621679126511"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) a -&gt; Int
forall (w :: Wrapped) t. Decode w t -&gt; Int
</span><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) a
</span><a href="#local-6989586621679126510"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-689"></span><span>
</span><span id="line-690"></span><span id="local-6989586621679127295"><span id="local-6989586621679127296"><span id="local-6989586621679127297"><span class="annot"><a href="Data.Coders.html#decode"><span class="hs-identifier hs-type">decode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127297"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127296"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127295"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127296"><span class="hs-identifier hs-type">t</span></a></span></span></span></span><span>
</span><span id="line-691"></span><span id="decode"><span class="annot"><span class="annottext">decode :: Decode w t -&gt; Decoder s t
</span><a href="Data.Coders.html#decode"><span class="hs-identifier hs-var hs-var">decode</span></a></span></span><span> </span><span id="local-6989586621679126509"><span class="annot"><span class="annottext">Decode w t
</span><a href="#local-6989586621679126509"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Int, t) -&gt; t) -&gt; Decoder s (Int, t) -&gt; Decoder s t
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">(Int, t) -&gt; t
forall a b. (a, b) -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decode w t -&gt; Decoder s (Int, t)
forall (w :: Wrapped) t s. Decode w t -&gt; Decoder s (Int, t)
</span><a href="Data.Coders.html#decodE"><span class="hs-identifier hs-var">decodE</span></a></span><span> </span><span class="annot"><span class="annottext">Decode w t
</span><a href="#local-6989586621679126509"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-692"></span><span>
</span><span id="line-693"></span><span id="local-6989586621679127163"><span id="local-6989586621679127164"><span id="local-6989586621679127165"><span class="annot"><a href="Data.Coders.html#decodE"><span class="hs-identifier hs-type">decodE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127165"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127164"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127163"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679127164"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-694"></span><span id="decodE"><span class="annot"><span class="annottext">decodE :: Decode w t -&gt; Decoder s (Int, t)
</span><a href="Data.Coders.html#decodE"><span class="hs-identifier hs-var hs-var">decodE</span></a></span></span><span> </span><span id="local-6989586621679126507"><span class="annot"><span class="annottext">Decode w t
</span><a href="#local-6989586621679126507"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decode w t -&gt; Int -&gt; Decoder s (Int, t)
forall (w :: Wrapped) s t. Decode w t -&gt; Int -&gt; Decoder s (Int, t)
</span><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="annot"><span class="annottext">Decode w t
</span><a href="#local-6989586621679126507"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-695"></span><span>
</span><span id="line-696"></span><span class="annot"><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-type">decodeCount</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679127159"><span class="annot"><a href="#local-6989586621679127159"><span class="hs-identifier hs-type">w</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Wrapped"><span class="hs-identifier hs-type">Wrapped</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679127157"><span class="annot"><a href="#local-6989586621679127157"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621679127158"><span class="annot"><a href="#local-6989586621679127158"><span class="hs-identifier hs-type">t</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127159"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127158"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127157"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679127158"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-697"></span><span id="decodeCount"><span class="annot"><span class="annottext">decodeCount :: Decode w t -&gt; Int -&gt; Decoder s (Int, t)
</span><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var hs-var">decodeCount</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Summands"><span class="hs-identifier hs-type">Summands</span></a></span><span> </span><span id="local-6989586621679126505"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126505"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span id="local-6989586621679126504"><span class="annot"><span class="annottext">Word -&gt; Decode 'Open t
</span><a href="#local-6989586621679126504"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679126503"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126503"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126503"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(t -&gt; (Int, t)) -&gt; Decoder s t -&gt; Decoder s (Int, t)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; (Word -&gt; Decoder s (Int, t)) -&gt; Decoder s t
forall s a. String -&gt; (Word -&gt; Decoder s (Int, a)) -&gt; Decoder s a
</span><a href="Data.Coders.html#decodeRecordSum"><span class="hs-identifier hs-var">decodeRecordSum</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126505"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679126502"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126502"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Decode 'Open t -&gt; Decoder s (Int, t)
forall (w :: Wrapped) t s. Decode w t -&gt; Decoder s (Int, t)
</span><a href="Data.Coders.html#decodE"><span class="hs-identifier hs-var">decodE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word -&gt; Decode 'Open t
</span><a href="#local-6989586621679126504"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126502"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-698"></span><span class="annot"><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#SumD"><span class="hs-identifier hs-type">SumD</span></a></span><span> </span><span id="local-6989586621679126501"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126501"><span class="hs-identifier hs-var">cn</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679126500"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126500"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int, t) -&gt; Decoder s (Int, t)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126500"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126501"><span class="hs-identifier hs-var">cn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-699"></span><span class="annot"><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#KeyedD"><span class="hs-identifier hs-type">KeyedD</span></a></span><span> </span><span id="local-6989586621679126499"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126499"><span class="hs-identifier hs-var">cn</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679126498"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126498"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int, t) -&gt; Decoder s (Int, t)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126498"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126499"><span class="hs-identifier hs-var">cn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-700"></span><span class="annot"><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#RecD"><span class="hs-identifier hs-type">RecD</span></a></span><span> </span><span id="local-6989586621679126497"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126497"><span class="hs-identifier hs-var">cn</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679126496"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126496"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
-&gt; ((Int, t) -&gt; Int) -&gt; Decoder s (Int, t) -&gt; Decoder s (Int, t)
forall a s. Text -&gt; (a -&gt; Int) -&gt; Decoder s a -&gt; Decoder s a
</span><a href="Data.Coders.html#decodeRecordNamed"><span class="hs-identifier hs-var">decodeRecordNamed</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;RecD&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; (Int, t) -&gt; Int
forall a b. a -&gt; b -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126496"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Int, t) -&gt; Decoder s (Int, t)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126496"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126497"><span class="hs-identifier hs-var">cn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-701"></span><span class="annot"><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="annot"><span class="annottext">Decode w t
</span><a href="Data.Coders.html#From"><span class="hs-identifier hs-var">From</span></a></span><span> </span><span id="local-6989586621679126495"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126495"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126495"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(t -&gt; (Int, t)) -&gt; Decoder s t -&gt; Decoder s (Int, t)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s t
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span>
</span><span id="line-702"></span><span class="annot"><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#D"><span class="hs-identifier hs-type">D</span></a></span><span> </span><span id="local-6989586621679126494"><span class="annot"><span class="annottext">forall s. Decoder s t
</span><a href="#local-6989586621679126494"><span class="hs-identifier hs-var">dec</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679126493"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126493"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126493"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(t -&gt; (Int, t)) -&gt; Decoder s t -&gt; Decoder s (Int, t)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s t
forall s. Decoder s t
</span><a href="#local-6989586621679126494"><span class="hs-identifier hs-var">dec</span></a></span><span>
</span><span id="line-703"></span><span class="annot"><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Invalid"><span class="hs-identifier hs-type">Invalid</span></a></span><span> </span><span id="local-6989586621679126492"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126492"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Decoder s (Int, t)
forall s a. Word -&gt; Decoder s a
</span><a href="Data.Coders.html#invalidKey"><span class="hs-identifier hs-var">invalidKey</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126492"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-704"></span><span class="annot"><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span id="local-6989586621679126491"><span class="annot"><span class="annottext">a -&gt; t
</span><a href="#local-6989586621679126491"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679126490"><span class="annot"><span class="annottext">Decode w a
</span><a href="#local-6989586621679126490"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679126489"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126489"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679126488"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126488"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679126487"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126487"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decode w a -&gt; Int -&gt; Decoder s (Int, a)
forall (w :: Wrapped) s t. Decode w t -&gt; Int -&gt; Decoder s (Int, t)
</span><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="annot"><span class="annottext">Decode w a
</span><a href="#local-6989586621679126490"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126489"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(Int, t) -&gt; Decoder s (Int, t)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126488"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a -&gt; t
</span><a href="#local-6989586621679126491"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126487"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-705"></span><span class="annot"><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#DD"><span class="hs-identifier hs-type">DD</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-type">Dual</span></a></span><span> </span><span id="local-6989586621679126486"><span class="annot"><span class="annottext">t -&gt; Encoding
</span><a href="#local-6989586621679126486"><span class="hs-identifier hs-var">_enc</span></a></span></span><span> </span><span id="local-6989586621679126485"><span class="annot"><span class="annottext">forall s. Decoder s t
</span><a href="#local-6989586621679126485"><span class="hs-identifier hs-var">dec</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621679126484"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126484"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126484"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(t -&gt; (Int, t)) -&gt; Decoder s t -&gt; Decoder s (Int, t)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s t
forall s. Decoder s t
</span><a href="#local-6989586621679126485"><span class="hs-identifier hs-var">dec</span></a></span><span>
</span><span id="line-706"></span><span class="annot"><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Emit"><span class="hs-identifier hs-type">Emit</span></a></span><span> </span><span id="local-6989586621679126483"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126483"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679126482"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126482"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int, t) -&gt; Decoder s (Int, t)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126482"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126483"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-707"></span><span class="annot"><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#TagD"><span class="hs-identifier hs-type">TagD</span></a></span><span> </span><span id="local-6989586621679126481"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126481"><span class="hs-identifier hs-var">expectedTag</span></a></span></span><span> </span><span id="local-6989586621679126480"><span class="annot"><span class="annottext">Decode ('Closed x) t
</span><a href="#local-6989586621679126480"><span class="hs-identifier hs-var">decoder</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679126479"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126479"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-708"></span><span>  </span><span class="annot"><span class="annottext">Word -&gt; Decoder s ()
forall s. Word -&gt; Decoder s ()
</span><a href="Data.Coders.html#assertTag"><span class="hs-identifier hs-var">assertTag</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126481"><span class="hs-identifier hs-var">expectedTag</span></a></span><span>
</span><span id="line-709"></span><span>  </span><span class="annot"><span class="annottext">Decode ('Closed x) t -&gt; Int -&gt; Decoder s (Int, t)
forall (w :: Wrapped) s t. Decode w t -&gt; Int -&gt; Decoder s (Int, t)
</span><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed x) t
</span><a href="#local-6989586621679126480"><span class="hs-identifier hs-var">decoder</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126479"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-710"></span><span class="annot"><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#SparseKeyed"><span class="hs-identifier hs-type">SparseKeyed</span></a></span><span> </span><span id="local-6989586621679126477"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126477"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679126476"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126476"><span class="hs-identifier hs-var">initial</span></a></span></span><span> </span><span id="local-6989586621679126475"><span class="annot"><span class="annottext">Word -&gt; Field t
</span><a href="#local-6989586621679126475"><span class="hs-identifier hs-var">pick</span></a></span></span><span> </span><span id="local-6989586621679126474"><span class="annot"><span class="annottext">[(Word, String)]
</span><a href="#local-6989586621679126474"><span class="hs-identifier hs-var">required</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679126473"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126473"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-711"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126473"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(t -&gt; (Int, t)) -&gt; Decoder s t -&gt; Decoder s (Int, t)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; t -&gt; (Word -&gt; Field t) -&gt; [(Word, String)] -&gt; Decoder s t
forall a s.
Typeable a =&gt;
String -&gt; a -&gt; (Word -&gt; Field a) -&gt; [(Word, String)] -&gt; Decoder s a
</span><a href="Data.Coders.html#decodeSparse"><span class="hs-identifier hs-var">decodeSparse</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126477"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126476"><span class="hs-identifier hs-var">initial</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Field t
</span><a href="#local-6989586621679126475"><span class="hs-identifier hs-var">pick</span></a></span><span> </span><span class="annot"><span class="annottext">[(Word, String)]
</span><a href="#local-6989586621679126474"><span class="hs-identifier hs-var">required</span></a></span><span>
</span><span id="line-712"></span><span class="annot"><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Ann"><span class="hs-identifier hs-type">Ann</span></a></span><span> </span><span id="local-6989586621679126472"><span class="annot"><span class="annottext">Decode w t
</span><a href="#local-6989586621679126472"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679126471"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126471"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679126470"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126470"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679126469"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126469"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decode w t -&gt; Int -&gt; Decoder s (Int, t)
forall (w :: Wrapped) s t. Decode w t -&gt; Int -&gt; Decoder s (Int, t)
</span><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="annot"><span class="annottext">Decode w t
</span><a href="#local-6989586621679126472"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126471"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(Int, Annotator t) -&gt; Decoder s (Int, Annotator t)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126470"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">t -&gt; Annotator t
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126469"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-713"></span><span class="annot"><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#ApplyAnn"><span class="hs-identifier hs-type">ApplyAnn</span></a></span><span> </span><span id="local-6989586621679126468"><span class="annot"><span class="annottext">Decode w (Annotator (a -&gt; t))
</span><a href="#local-6989586621679126468"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679126467"><span class="annot"><span class="annottext">Decode ('Closed d) (Annotator a)
</span><a href="#local-6989586621679126467"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679126466"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126466"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-714"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621679126465"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126465"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679126464"><span class="annot"><span class="annottext">Annotator (a -&gt; t)
</span><a href="#local-6989586621679126464"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decode w (Annotator (a -&gt; t))
-&gt; Int -&gt; Decoder s (Int, Annotator (a -&gt; t))
forall (w :: Wrapped) s t. Decode w t -&gt; Int -&gt; Decoder s (Int, t)
</span><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="annot"><span class="annottext">Decode w (Annotator (a -&gt; t))
</span><a href="#local-6989586621679126468"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126466"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) (Annotator a) -&gt; Int
forall (w :: Wrapped) t. Decode w t -&gt; Int
</span><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) (Annotator a)
</span><a href="#local-6989586621679126467"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-715"></span><span>  </span><span id="local-6989586621679126463"><span class="annot"><span class="annottext">Annotator a
</span><a href="#local-6989586621679126463"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) (Annotator a) -&gt; Decoder s (Annotator a)
forall (d :: Density) t s. Decode ('Closed d) t -&gt; Decoder s t
</span><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) (Annotator a)
</span><a href="#local-6989586621679126467"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-716"></span><span>  </span><span class="annot"><span class="annottext">(Int, Annotator t) -&gt; Decoder s (Int, Annotator t)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126465"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Annotator (a -&gt; t)
</span><a href="#local-6989586621679126464"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Annotator (a -&gt; t) -&gt; Annotator a -&gt; Annotator t
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Annotator a
</span><a href="#local-6989586621679126463"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-717"></span><span class="annot"><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#ApplyD"><span class="hs-identifier hs-type">ApplyD</span></a></span><span> </span><span id="local-6989586621679126461"><span class="annot"><span class="annottext">Decode w (a -&gt; t)
</span><a href="#local-6989586621679126461"><span class="hs-identifier hs-var">cn</span></a></span></span><span> </span><span id="local-6989586621679126460"><span class="annot"><span class="annottext">Decode ('Closed d) a
</span><a href="#local-6989586621679126460"><span class="hs-identifier hs-var">g</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679126459"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126459"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-718"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621679126458"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126458"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679126457"><span class="annot"><span class="annottext">a -&gt; t
</span><a href="#local-6989586621679126457"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decode w (a -&gt; t) -&gt; Int -&gt; Decoder s (Int, a -&gt; t)
forall (w :: Wrapped) s t. Decode w t -&gt; Int -&gt; Decoder s (Int, t)
</span><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="annot"><span class="annottext">Decode w (a -&gt; t)
</span><a href="#local-6989586621679126461"><span class="hs-identifier hs-var">cn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126459"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) a -&gt; Int
forall (w :: Wrapped) t. Decode w t -&gt; Int
</span><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) a
</span><a href="#local-6989586621679126460"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-719"></span><span>  </span><span id="local-6989586621679126456"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126456"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) a -&gt; Decoder s a
forall (d :: Density) t s. Decode ('Closed d) t -&gt; Decoder s t
</span><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) a
</span><a href="#local-6989586621679126460"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-720"></span><span>  </span><span class="annot"><span class="annottext">(Int, t) -&gt; Decoder s (Int, t)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126458"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a -&gt; t
</span><a href="#local-6989586621679126457"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126456"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-721"></span><span class="annot"><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#ApplyErr"><span class="hs-identifier hs-type">ApplyErr</span></a></span><span> </span><span id="local-6989586621679126455"><span class="annot"><span class="annottext">Decode w (a -&gt; Either String t)
</span><a href="#local-6989586621679126455"><span class="hs-identifier hs-var">cn</span></a></span></span><span> </span><span id="local-6989586621679126454"><span class="annot"><span class="annottext">Decode ('Closed d) a
</span><a href="#local-6989586621679126454"><span class="hs-identifier hs-var">g</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679126453"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126453"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-722"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621679126452"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126452"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679126451"><span class="annot"><span class="annottext">a -&gt; Either String t
</span><a href="#local-6989586621679126451"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decode w (a -&gt; Either String t)
-&gt; Int -&gt; Decoder s (Int, a -&gt; Either String t)
forall (w :: Wrapped) s t. Decode w t -&gt; Int -&gt; Decoder s (Int, t)
</span><a href="Data.Coders.html#decodeCount"><span class="hs-identifier hs-var">decodeCount</span></a></span><span> </span><span class="annot"><span class="annottext">Decode w (a -&gt; Either String t)
</span><a href="#local-6989586621679126455"><span class="hs-identifier hs-var">cn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126453"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) a -&gt; Int
forall (w :: Wrapped) t. Decode w t -&gt; Int
</span><a href="Data.Coders.html#hsize"><span class="hs-identifier hs-var">hsize</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) a
</span><a href="#local-6989586621679126454"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-723"></span><span>  </span><span id="local-6989586621679126450"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126450"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) a -&gt; Decoder s a
forall (d :: Density) t s. Decode ('Closed d) t -&gt; Decoder s t
</span><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) a
</span><a href="#local-6989586621679126454"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-724"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">a -&gt; Either String t
</span><a href="#local-6989586621679126451"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126450"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-725"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621679126449"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126449"><span class="hs-identifier hs-var">z</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Int, t) -&gt; Decoder s (Int, t)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126452"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126449"><span class="hs-identifier hs-var">z</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-726"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621679126448"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126448"><span class="hs-identifier hs-var">message</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DecoderError -&gt; Decoder s (Int, t)
forall e s a. Buildable e =&gt; e -&gt; Decoder s a
</span><a href="Data.Coders.html#cborError"><span class="hs-identifier hs-var">cborError</span></a></span><span> </span><span class="annot"><span class="annottext">(DecoderError -&gt; Decoder s (Int, t))
-&gt; DecoderError -&gt; Decoder s (Int, t)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; DecoderError
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">DecoderErrorCustom</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;decoding error:&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="../../../../text/html/src"><span class="hs-identifier hs-var">Text.pack</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126448"><span class="hs-identifier hs-var">message</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-727"></span><span>
</span><span id="line-728"></span><span class="hs-comment">-- The type of DecodeClosed precludes pattern match against (SumD c) as the types are different.</span><span>
</span><span id="line-729"></span><span>
</span><span id="line-730"></span><span id="local-6989586621679127135"><span id="local-6989586621679127136"><span id="local-6989586621679127137"><span class="annot"><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-type">decodeClosed</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127137"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679127136"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127135"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127136"><span class="hs-identifier hs-type">t</span></a></span></span></span></span><span>
</span><span id="line-731"></span><span id="decodeClosed"><span class="annot"><span class="annottext">decodeClosed :: Decode ('Closed d) t -&gt; Decoder s t
</span><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var hs-var">decodeClosed</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Summands"><span class="hs-identifier hs-type">Summands</span></a></span><span> </span><span id="local-6989586621679126447"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126447"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span id="local-6989586621679126446"><span class="annot"><span class="annottext">Word -&gt; Decode 'Open t
</span><a href="#local-6989586621679126446"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; (Word -&gt; Decoder s (Int, t)) -&gt; Decoder s t
forall s a. String -&gt; (Word -&gt; Decoder s (Int, a)) -&gt; Decoder s a
</span><a href="Data.Coders.html#decodeRecordSum"><span class="hs-identifier hs-var">decodeRecordSum</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126447"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decode 'Open t -&gt; Decoder s (Int, t)
forall (w :: Wrapped) t s. Decode w t -&gt; Decoder s (Int, t)
</span><a href="Data.Coders.html#decodE"><span class="hs-identifier hs-var">decodE</span></a></span><span> </span><span class="annot"><span class="annottext">(Decode 'Open t -&gt; Decoder s (Int, t))
-&gt; (Word -&gt; Decode 'Open t) -&gt; Word -&gt; Decoder s (Int, t)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Decode 'Open t
</span><a href="#local-6989586621679126446"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-732"></span><span class="annot"><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#KeyedD"><span class="hs-identifier hs-type">KeyedD</span></a></span><span> </span><span id="local-6989586621679126444"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126444"><span class="hs-identifier hs-var">cn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; Decoder s t
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126444"><span class="hs-identifier hs-var">cn</span></a></span><span>
</span><span id="line-733"></span><span class="annot"><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#RecD"><span class="hs-identifier hs-type">RecD</span></a></span><span> </span><span id="local-6989586621679126443"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126443"><span class="hs-identifier hs-var">cn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; Decoder s t
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126443"><span class="hs-identifier hs-var">cn</span></a></span><span>
</span><span id="line-734"></span><span class="annot"><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) t
</span><a href="Data.Coders.html#From"><span class="hs-identifier hs-var">From</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decoder s t
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span>
</span><span id="line-735"></span><span class="annot"><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#D"><span class="hs-identifier hs-type">D</span></a></span><span> </span><span id="local-6989586621679126442"><span class="annot"><span class="annottext">forall s. Decoder s t
</span><a href="#local-6989586621679126442"><span class="hs-identifier hs-var">dec</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decoder s t
forall s. Decoder s t
</span><a href="#local-6989586621679126442"><span class="hs-identifier hs-var">dec</span></a></span><span>
</span><span id="line-736"></span><span class="annot"><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#ApplyD"><span class="hs-identifier hs-type">ApplyD</span></a></span><span> </span><span id="local-6989586621679126441"><span class="annot"><span class="annottext">Decode ('Closed d) (a -&gt; t)
</span><a href="#local-6989586621679126441"><span class="hs-identifier hs-var">cn</span></a></span></span><span> </span><span id="local-6989586621679126440"><span class="annot"><span class="annottext">Decode ('Closed d) a
</span><a href="#local-6989586621679126440"><span class="hs-identifier hs-var">g</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-737"></span><span>  </span><span id="local-6989586621679126439"><span class="annot"><span class="annottext">a -&gt; t
</span><a href="#local-6989586621679126439"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) (a -&gt; t) -&gt; Decoder s (a -&gt; t)
forall (d :: Density) t s. Decode ('Closed d) t -&gt; Decoder s t
</span><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) (a -&gt; t)
</span><a href="#local-6989586621679126441"><span class="hs-identifier hs-var">cn</span></a></span><span>
</span><span id="line-738"></span><span>  </span><span id="local-6989586621679126438"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126438"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) a -&gt; Decoder s a
forall (d :: Density) t s. Decode ('Closed d) t -&gt; Decoder s t
</span><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) a
</span><a href="#local-6989586621679126440"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-739"></span><span>  </span><span class="annot"><span class="annottext">t -&gt; Decoder s t
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; t
</span><a href="#local-6989586621679126439"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126438"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-740"></span><span class="annot"><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Invalid"><span class="hs-identifier hs-type">Invalid</span></a></span><span> </span><span id="local-6989586621679126437"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126437"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Decoder s t
forall s a. Word -&gt; Decoder s a
</span><a href="Data.Coders.html#invalidKey"><span class="hs-identifier hs-var">invalidKey</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126437"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-741"></span><span class="annot"><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span id="local-6989586621679126436"><span class="annot"><span class="annottext">a -&gt; t
</span><a href="#local-6989586621679126436"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679126435"><span class="annot"><span class="annottext">Decode ('Closed d) a
</span><a href="#local-6989586621679126435"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; t
</span><a href="#local-6989586621679126436"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; t) -&gt; Decoder s a -&gt; Decoder s t
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) a -&gt; Decoder s a
forall (d :: Density) t s. Decode ('Closed d) t -&gt; Decoder s t
</span><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) a
</span><a href="#local-6989586621679126435"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-742"></span><span class="annot"><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#DD"><span class="hs-identifier hs-type">DD</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-type">Dual</span></a></span><span> </span><span id="local-6989586621679126434"><span class="annot"><span class="annottext">t -&gt; Encoding
</span><a href="#local-6989586621679126434"><span class="hs-identifier hs-var">_enc</span></a></span></span><span> </span><span id="local-6989586621679126433"><span class="annot"><span class="annottext">forall s. Decoder s t
</span><a href="#local-6989586621679126433"><span class="hs-identifier hs-var">dec</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decoder s t
forall s. Decoder s t
</span><a href="#local-6989586621679126433"><span class="hs-identifier hs-var">dec</span></a></span><span>
</span><span id="line-743"></span><span class="annot"><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Emit"><span class="hs-identifier hs-type">Emit</span></a></span><span> </span><span id="local-6989586621679126432"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126432"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; Decoder s t
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126432"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-744"></span><span class="annot"><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#TagD"><span class="hs-identifier hs-type">TagD</span></a></span><span> </span><span id="local-6989586621679126431"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126431"><span class="hs-identifier hs-var">expectedTag</span></a></span></span><span> </span><span id="local-6989586621679126430"><span class="annot"><span class="annottext">Decode ('Closed x) t
</span><a href="#local-6989586621679126430"><span class="hs-identifier hs-var">decoder</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-745"></span><span>  </span><span class="annot"><span class="annottext">Word -&gt; Decoder s ()
forall s. Word -&gt; Decoder s ()
</span><a href="Data.Coders.html#assertTag"><span class="hs-identifier hs-var">assertTag</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126431"><span class="hs-identifier hs-var">expectedTag</span></a></span><span>
</span><span id="line-746"></span><span>  </span><span class="annot"><span class="annottext">Decode ('Closed x) t -&gt; Decoder s t
forall (d :: Density) t s. Decode ('Closed d) t -&gt; Decoder s t
</span><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed x) t
</span><a href="#local-6989586621679126430"><span class="hs-identifier hs-var">decoder</span></a></span><span>
</span><span id="line-747"></span><span class="annot"><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#SparseKeyed"><span class="hs-identifier hs-type">SparseKeyed</span></a></span><span> </span><span id="local-6989586621679126429"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126429"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679126428"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126428"><span class="hs-identifier hs-var">initial</span></a></span></span><span> </span><span id="local-6989586621679126427"><span class="annot"><span class="annottext">Word -&gt; Field t
</span><a href="#local-6989586621679126427"><span class="hs-identifier hs-var">pick</span></a></span></span><span> </span><span id="local-6989586621679126426"><span class="annot"><span class="annottext">[(Word, String)]
</span><a href="#local-6989586621679126426"><span class="hs-identifier hs-var">required</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-748"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; t -&gt; (Word -&gt; Field t) -&gt; [(Word, String)] -&gt; Decoder s t
forall a s.
Typeable a =&gt;
String -&gt; a -&gt; (Word -&gt; Field a) -&gt; [(Word, String)] -&gt; Decoder s a
</span><a href="Data.Coders.html#decodeSparse"><span class="hs-identifier hs-var">decodeSparse</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126429"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126428"><span class="hs-identifier hs-var">initial</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Field t
</span><a href="#local-6989586621679126427"><span class="hs-identifier hs-var">pick</span></a></span><span> </span><span class="annot"><span class="annottext">[(Word, String)]
</span><a href="#local-6989586621679126426"><span class="hs-identifier hs-var">required</span></a></span><span>
</span><span id="line-749"></span><span class="annot"><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Ann"><span class="hs-identifier hs-type">Ann</span></a></span><span> </span><span id="local-6989586621679126425"><span class="annot"><span class="annottext">Decode ('Closed d) t
</span><a href="#local-6989586621679126425"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(t -&gt; Annotator t) -&gt; Decoder s t -&gt; Decoder s (Annotator t)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">t -&gt; Annotator t
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decode ('Closed d) t -&gt; Decoder s t
forall (d :: Density) t s. Decode ('Closed d) t -&gt; Decoder s t
</span><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) t
</span><a href="#local-6989586621679126425"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-750"></span><span class="annot"><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#ApplyAnn"><span class="hs-identifier hs-type">ApplyAnn</span></a></span><span> </span><span id="local-6989586621679126424"><span class="annot"><span class="annottext">Decode ('Closed d) (Annotator (a -&gt; t))
</span><a href="#local-6989586621679126424"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679126423"><span class="annot"><span class="annottext">Decode ('Closed d) (Annotator a)
</span><a href="#local-6989586621679126423"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-751"></span><span>  </span><span id="local-6989586621679126422"><span class="annot"><span class="annottext">Annotator (a -&gt; t)
</span><a href="#local-6989586621679126422"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) (Annotator (a -&gt; t))
-&gt; Decoder s (Annotator (a -&gt; t))
forall (d :: Density) t s. Decode ('Closed d) t -&gt; Decoder s t
</span><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) (Annotator (a -&gt; t))
</span><a href="#local-6989586621679126424"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-752"></span><span>  </span><span id="local-6989586621679126421"><span class="annot"><span class="annottext">Annotator a
</span><a href="#local-6989586621679126421"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) (Annotator a) -&gt; Decoder s (Annotator a)
forall (d :: Density) t s. Decode ('Closed d) t -&gt; Decoder s t
</span><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) (Annotator a)
</span><a href="#local-6989586621679126423"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-753"></span><span>  </span><span class="annot"><span class="annottext">Annotator t -&gt; Decoder s (Annotator t)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Annotator (a -&gt; t)
</span><a href="#local-6989586621679126422"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Annotator (a -&gt; t) -&gt; Annotator a -&gt; Annotator t
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Annotator a
</span><a href="#local-6989586621679126421"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-754"></span><span class="annot"><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#ApplyErr"><span class="hs-identifier hs-type">ApplyErr</span></a></span><span> </span><span id="local-6989586621679126420"><span class="annot"><span class="annottext">Decode ('Closed d) (a -&gt; Either String t)
</span><a href="#local-6989586621679126420"><span class="hs-identifier hs-var">cn</span></a></span></span><span> </span><span id="local-6989586621679126419"><span class="annot"><span class="annottext">Decode ('Closed d) a
</span><a href="#local-6989586621679126419"><span class="hs-identifier hs-var">g</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-755"></span><span>  </span><span id="local-6989586621679126418"><span class="annot"><span class="annottext">a -&gt; Either String t
</span><a href="#local-6989586621679126418"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) (a -&gt; Either String t)
-&gt; Decoder s (a -&gt; Either String t)
forall (d :: Density) t s. Decode ('Closed d) t -&gt; Decoder s t
</span><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) (a -&gt; Either String t)
</span><a href="#local-6989586621679126420"><span class="hs-identifier hs-var">cn</span></a></span><span>
</span><span id="line-756"></span><span>  </span><span id="local-6989586621679126417"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126417"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) a -&gt; Decoder s a
forall (d :: Density) t s. Decode ('Closed d) t -&gt; Decoder s t
</span><a href="Data.Coders.html#decodeClosed"><span class="hs-identifier hs-var">decodeClosed</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) a
</span><a href="#local-6989586621679126419"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-757"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">a -&gt; Either String t
</span><a href="#local-6989586621679126418"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126417"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-758"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621679126416"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126416"><span class="hs-identifier hs-var">z</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">t -&gt; Decoder s t
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126416"><span class="hs-identifier hs-var">z</span></a></span><span>
</span><span id="line-759"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621679126415"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126415"><span class="hs-identifier hs-var">message</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DecoderError -&gt; Decoder s t
forall e s a. Buildable e =&gt; e -&gt; Decoder s a
</span><a href="Data.Coders.html#cborError"><span class="hs-identifier hs-var">cborError</span></a></span><span> </span><span class="annot"><span class="annottext">(DecoderError -&gt; Decoder s t) -&gt; DecoderError -&gt; Decoder s t
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; DecoderError
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">DecoderErrorCustom</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;decoding error:&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="../../../../text/html/src"><span class="hs-identifier hs-var">Text.pack</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126415"><span class="hs-identifier hs-var">message</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-760"></span><span>
</span><span id="line-761"></span><span id="local-6989586621679127142"><span id="local-6989586621679127143"><span class="annot"><a href="Data.Coders.html#decodeSparse"><span class="hs-identifier hs-type">decodeSparse</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-762"></span><span>  </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127143"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-763"></span><span>  </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-764"></span><span>  </span><span class="annot"><a href="#local-6989586621679127143"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-765"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Field"><span class="hs-identifier hs-type">Field</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127143"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-766"></span><span>  </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-767"></span><span>  </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127142"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127143"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-768"></span><span id="decodeSparse"><span class="annot"><span class="annottext">decodeSparse :: String -&gt; a -&gt; (Word -&gt; Field a) -&gt; [(Word, String)] -&gt; Decoder s a
</span><a href="Data.Coders.html#decodeSparse"><span class="hs-identifier hs-var hs-var">decodeSparse</span></a></span></span><span> </span><span id="local-6989586621679126414"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126414"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679126413"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126413"><span class="hs-identifier hs-var">initial</span></a></span></span><span> </span><span id="local-6989586621679126412"><span class="annot"><span class="annottext">Word -&gt; Field a
</span><a href="#local-6989586621679126412"><span class="hs-identifier hs-var">pick</span></a></span></span><span> </span><span id="local-6989586621679126411"><span class="annot"><span class="annottext">[(Word, String)]
</span><a href="#local-6989586621679126411"><span class="hs-identifier hs-var">required</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-769"></span><span>  </span><span id="local-6989586621679126410"><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679126410"><span class="hs-identifier hs-var">lenOrIndef</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s (Maybe Int)
forall s. Decoder s (Maybe Int)
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">decodeMapLenOrIndef</span></a></span><span>
</span><span id="line-770"></span><span>  </span><span class="hs-special">(</span><span class="hs-glyph">!</span><span id="local-6989586621679126409"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126409"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679126408"><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679126408"><span class="hs-identifier hs-var">used</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679126410"><span class="hs-identifier hs-var">lenOrIndef</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-771"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679126407"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126407"><span class="hs-identifier hs-var">len</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; a
-&gt; (Word -&gt; Field a)
-&gt; Set Word
-&gt; String
-&gt; Decoder s (a, Set Word)
forall t s.
Int
-&gt; t
-&gt; (Word -&gt; Field t)
-&gt; Set Word
-&gt; String
-&gt; Decoder s (t, Set Word)
</span><a href="Data.Coders.html#getSparseBlock"><span class="hs-identifier hs-var">getSparseBlock</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126407"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126413"><span class="hs-identifier hs-var">initial</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Field a
</span><a href="#local-6989586621679126412"><span class="hs-identifier hs-var">pick</span></a></span><span> </span><span class="annot"><span class="annottext">Set Word
forall a. Set a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Set.empty</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126414"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-772"></span><span>    </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a
-&gt; (Word -&gt; Field a)
-&gt; Set Word
-&gt; String
-&gt; Decoder s (a, Set Word)
forall t s.
t
-&gt; (Word -&gt; Field t)
-&gt; Set Word
-&gt; String
-&gt; Decoder s (t, Set Word)
</span><a href="Data.Coders.html#getSparseBlockIndef"><span class="hs-identifier hs-var">getSparseBlockIndef</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126413"><span class="hs-identifier hs-var">initial</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Field a
</span><a href="#local-6989586621679126412"><span class="hs-identifier hs-var">pick</span></a></span><span> </span><span class="annot"><span class="annottext">Set Word
forall a. Set a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Set.empty</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126414"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-773"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">((Word, String) -&gt; Bool) -&gt; [(Word, String)] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">all</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679126402"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126402"><span class="hs-identifier hs-var">key</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679126401"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126401"><span class="hs-identifier hs-var">_name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Set Word -&gt; Bool
forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">member</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126402"><span class="hs-identifier hs-var">key</span></a></span><span> </span><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679126408"><span class="hs-identifier hs-var">used</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Word, String)]
</span><a href="#local-6989586621679126411"><span class="hs-identifier hs-var">required</span></a></span><span>
</span><span id="line-774"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">a -&gt; Decoder s a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126409"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-775"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Set Word -&gt; [(Word, String)] -&gt; String -&gt; Decoder s a
forall s a. Set Word -&gt; [(Word, String)] -&gt; String -&gt; Decoder s a
</span><a href="Data.Coders.html#unusedRequiredKeys"><span class="hs-identifier hs-var">unusedRequiredKeys</span></a></span><span> </span><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679126408"><span class="hs-identifier hs-var">used</span></a></span><span> </span><span class="annot"><span class="annottext">[(Word, String)]
</span><a href="#local-6989586621679126411"><span class="hs-identifier hs-var">required</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeRep -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; TypeRep
forall a. Typeable a =&gt; a -&gt; TypeRep
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126413"><span class="hs-identifier hs-var">initial</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-776"></span><span>
</span><span id="line-777"></span><span class="hs-comment">-- | Given a function that picks a Field from a key, decodes that field</span><span>
</span><span id="line-778"></span><span class="hs-comment">--   and returns a (t -&gt; t) transformer, which when applied, will</span><span>
</span><span id="line-779"></span><span class="hs-comment">--   update the record with the value decoded.</span><span>
</span><span id="line-780"></span><span id="local-6989586621679127092"><span id="local-6989586621679127093"><span class="annot"><a href="Data.Coders.html#applyField"><span class="hs-identifier hs-type">applyField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Field"><span class="hs-identifier hs-type">Field</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127093"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127092"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679127093"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679127093"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-781"></span><span id="applyField"><span class="annot"><span class="annottext">applyField :: (Word -&gt; Field t)
-&gt; Set Word -&gt; String -&gt; Decoder s (t -&gt; t, Set Word)
</span><a href="Data.Coders.html#applyField"><span class="hs-identifier hs-var hs-var">applyField</span></a></span></span><span> </span><span id="local-6989586621679126399"><span class="annot"><span class="annottext">Word -&gt; Field t
</span><a href="#local-6989586621679126399"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679126398"><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679126398"><span class="hs-identifier hs-var">seen</span></a></span></span><span> </span><span id="local-6989586621679126397"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126397"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-782"></span><span>  </span><span id="local-6989586621679126396"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126396"><span class="hs-identifier hs-var">tag</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s Word
forall s. Decoder s Word
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">decodeWord</span></a></span><span>
</span><span id="line-783"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Set Word -&gt; Bool
forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Set.member</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126396"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679126398"><span class="hs-identifier hs-var">seen</span></a></span><span>
</span><span id="line-784"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String -&gt; Word -&gt; Decoder s (t -&gt; t, Set Word)
forall s a. String -&gt; Word -&gt; Decoder s a
</span><a href="Data.Coders.html#duplicateKey"><span class="hs-identifier hs-var">duplicateKey</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126397"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126396"><span class="hs-identifier hs-var">tag</span></a></span><span>
</span><span id="line-785"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Field t
</span><a href="#local-6989586621679126399"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126396"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-786"></span><span>      </span><span class="annot"><a href="Data.Coders.html#Field"><span class="hs-identifier hs-type">Field</span></a></span><span> </span><span id="local-6989586621679126395"><span class="annot"><span class="annottext">x -&gt; t -&gt; t
</span><a href="#local-6989586621679126395"><span class="hs-identifier hs-var">update</span></a></span></span><span> </span><span id="local-6989586621679126394"><span class="annot"><span class="annottext">forall s. Decoder s x
</span><a href="#local-6989586621679126394"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679126393"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679126393"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s x
forall s. Decoder s x
</span><a href="#local-6989586621679126394"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(t -&gt; t, Set Word) -&gt; Decoder s (t -&gt; t, Set Word)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">x -&gt; t -&gt; t
</span><a href="#local-6989586621679126395"><span class="hs-identifier hs-var">update</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679126393"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Set Word -&gt; Set Word
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">insert</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126396"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679126398"><span class="hs-identifier hs-var">seen</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-787"></span><span>
</span><span id="line-788"></span><span class="hs-comment">-- | Decode a Map Block of key encoded data for type t</span><span>
</span><span id="line-789"></span><span class="hs-comment">--   given a function that picks the right box for a given key, and an</span><span>
</span><span id="line-790"></span><span class="hs-comment">--   initial value for the record (usually starts filled with default values).</span><span>
</span><span id="line-791"></span><span class="hs-comment">--   The Block can be either len-encoded or block-encoded.</span><span>
</span><span id="line-792"></span><span id="local-6989586621679127111"><span id="local-6989586621679127112"><span class="annot"><a href="Data.Coders.html#getSparseBlock"><span class="hs-identifier hs-type">getSparseBlock</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679127112"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Field"><span class="hs-identifier hs-type">Field</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127112"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127111"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679127112"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-793"></span><span id="getSparseBlock"><span class="annot"><span class="annottext">getSparseBlock :: Int
-&gt; t
-&gt; (Word -&gt; Field t)
-&gt; Set Word
-&gt; String
-&gt; Decoder s (t, Set Word)
</span><a href="Data.Coders.html#getSparseBlock"><span class="hs-identifier hs-var hs-var">getSparseBlock</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span id="local-6989586621679126392"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126392"><span class="hs-identifier hs-var">initial</span></a></span></span><span> </span><span id="local-6989586621679126391"><span class="annot"><span class="annottext">Word -&gt; Field t
</span><a href="#local-6989586621679126391"><span class="hs-identifier hs-var">_pick</span></a></span></span><span> </span><span id="local-6989586621679126390"><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679126390"><span class="hs-identifier hs-var">seen</span></a></span></span><span> </span><span id="local-6989586621679126389"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126389"><span class="hs-identifier hs-var">_name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(t, Set Word) -&gt; Decoder s (t, Set Word)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126392"><span class="hs-identifier hs-var">initial</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679126390"><span class="hs-identifier hs-var">seen</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-794"></span><span class="annot"><a href="Data.Coders.html#getSparseBlock"><span class="hs-identifier hs-var">getSparseBlock</span></a></span><span> </span><span id="local-6989586621679126388"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126388"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679126387"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126387"><span class="hs-identifier hs-var">initial</span></a></span></span><span> </span><span id="local-6989586621679126386"><span class="annot"><span class="annottext">Word -&gt; Field t
</span><a href="#local-6989586621679126386"><span class="hs-identifier hs-var">pick</span></a></span></span><span> </span><span id="local-6989586621679126385"><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679126385"><span class="hs-identifier hs-var">seen</span></a></span></span><span> </span><span id="local-6989586621679126384"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126384"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-795"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621679126383"><span class="annot"><span class="annottext">t -&gt; t
</span><a href="#local-6989586621679126383"><span class="hs-identifier hs-var">transform</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679126382"><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679126382"><span class="hs-identifier hs-var">seen2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Word -&gt; Field t)
-&gt; Set Word -&gt; String -&gt; Decoder s (t -&gt; t, Set Word)
forall t s.
(Word -&gt; Field t)
-&gt; Set Word -&gt; String -&gt; Decoder s (t -&gt; t, Set Word)
</span><a href="Data.Coders.html#applyField"><span class="hs-identifier hs-var">applyField</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Field t
</span><a href="#local-6989586621679126386"><span class="hs-identifier hs-var">pick</span></a></span><span> </span><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679126385"><span class="hs-identifier hs-var">seen</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126384"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-796"></span><span>  </span><span class="annot"><span class="annottext">Int
-&gt; t
-&gt; (Word -&gt; Field t)
-&gt; Set Word
-&gt; String
-&gt; Decoder s (t, Set Word)
forall t s.
Int
-&gt; t
-&gt; (Word -&gt; Field t)
-&gt; Set Word
-&gt; String
-&gt; Decoder s (t, Set Word)
</span><a href="Data.Coders.html#getSparseBlock"><span class="hs-identifier hs-var">getSparseBlock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679126388"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t -&gt; t
</span><a href="#local-6989586621679126383"><span class="hs-identifier hs-var">transform</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126387"><span class="hs-identifier hs-var">initial</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Field t
</span><a href="#local-6989586621679126386"><span class="hs-identifier hs-var">pick</span></a></span><span> </span><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679126382"><span class="hs-identifier hs-var">seen2</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126384"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-797"></span><span>
</span><span id="line-798"></span><span id="local-6989586621679127108"><span id="local-6989586621679127109"><span class="annot"><a href="Data.Coders.html#getSparseBlockIndef"><span class="hs-identifier hs-type">getSparseBlockIndef</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679127109"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Field"><span class="hs-identifier hs-type">Field</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127109"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127108"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679127109"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-799"></span><span id="getSparseBlockIndef"><span class="annot"><span class="annottext">getSparseBlockIndef :: t
-&gt; (Word -&gt; Field t)
-&gt; Set Word
-&gt; String
-&gt; Decoder s (t, Set Word)
</span><a href="Data.Coders.html#getSparseBlockIndef"><span class="hs-identifier hs-var hs-var">getSparseBlockIndef</span></a></span></span><span> </span><span id="local-6989586621679126381"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126381"><span class="hs-identifier hs-var">initial</span></a></span></span><span> </span><span id="local-6989586621679126380"><span class="annot"><span class="annottext">Word -&gt; Field t
</span><a href="#local-6989586621679126380"><span class="hs-identifier hs-var">pick</span></a></span></span><span> </span><span id="local-6989586621679126379"><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679126379"><span class="hs-identifier hs-var">seen</span></a></span></span><span> </span><span id="local-6989586621679126378"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126378"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-800"></span><span>  </span><span class="annot"><span class="annottext">Decoder s Bool
forall s. Decoder s Bool
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">decodeBreakOr</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s Bool
-&gt; (Bool -&gt; Decoder s (t, Set Word)) -&gt; Decoder s (t, Set Word)
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-801"></span><span>    </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(t, Set Word) -&gt; Decoder s (t, Set Word)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126381"><span class="hs-identifier hs-var">initial</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679126379"><span class="hs-identifier hs-var">seen</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-802"></span><span>    </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-803"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621679126377"><span class="annot"><span class="annottext">t -&gt; t
</span><a href="#local-6989586621679126377"><span class="hs-identifier hs-var">transform</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679126376"><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679126376"><span class="hs-identifier hs-var">seen2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Word -&gt; Field t)
-&gt; Set Word -&gt; String -&gt; Decoder s (t -&gt; t, Set Word)
forall t s.
(Word -&gt; Field t)
-&gt; Set Word -&gt; String -&gt; Decoder s (t -&gt; t, Set Word)
</span><a href="Data.Coders.html#applyField"><span class="hs-identifier hs-var">applyField</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Field t
</span><a href="#local-6989586621679126380"><span class="hs-identifier hs-var">pick</span></a></span><span> </span><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679126379"><span class="hs-identifier hs-var">seen</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126378"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-804"></span><span>      </span><span class="annot"><span class="annottext">t
-&gt; (Word -&gt; Field t)
-&gt; Set Word
-&gt; String
-&gt; Decoder s (t, Set Word)
forall t s.
t
-&gt; (Word -&gt; Field t)
-&gt; Set Word
-&gt; String
-&gt; Decoder s (t, Set Word)
</span><a href="Data.Coders.html#getSparseBlockIndef"><span class="hs-identifier hs-var">getSparseBlockIndef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t -&gt; t
</span><a href="#local-6989586621679126377"><span class="hs-identifier hs-var">transform</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679126381"><span class="hs-identifier hs-var">initial</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Field t
</span><a href="#local-6989586621679126380"><span class="hs-identifier hs-var">pick</span></a></span><span> </span><span class="annot"><span class="annottext">Set Word
</span><a href="#local-6989586621679126376"><span class="hs-identifier hs-var">seen2</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679126378"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-805"></span><span>
</span><span id="line-806"></span><span class="hs-comment">-- ======================================================</span><span>
</span><span id="line-807"></span><span class="hs-comment">-- (Decode ('Closed 'Dense)) and (Decode ('Closed 'Sparse)) are applicative</span><span>
</span><span id="line-808"></span><span class="hs-comment">-- (Decode 'Open) is not applicative since there is no</span><span>
</span><span id="line-809"></span><span class="hs-comment">-- (Applys 'Open 'Open) instance. And there should never be one.</span><span>
</span><span id="line-810"></span><span>
</span><span id="line-811"></span><span id="local-6989586621679126375"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679126372"><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126375"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-812"></span><span>  </span><span id="local-6989586621679126370"><span class="annot"><span class="annottext">fmap :: (a -&gt; b) -&gt; Decode w a -&gt; Decode w b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">fmap</span></a></span></span><span> </span><span id="local-6989586621679126369"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679126369"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span id="local-6989586621679126368"><span class="annot"><span class="annottext">a -&gt; a
</span><a href="#local-6989586621679126368"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679126367"><span class="annot"><span class="annottext">Decode w a
</span><a href="#local-6989586621679126367"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; Decode w a -&gt; Decode w b
forall a b (w :: Wrapped). (a -&gt; b) -&gt; Decode w a -&gt; Decode w b
</span><a href="Data.Coders.html#Map"><span class="hs-identifier hs-var">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679126369"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; (a -&gt; a) -&gt; a -&gt; b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a
</span><a href="#local-6989586621679126368"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Decode w a
</span><a href="#local-6989586621679126367"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-813"></span><span>  </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span id="local-6989586621679126366"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679126366"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679126365"><span class="annot"><span class="annottext">Decode w a
</span><a href="#local-6989586621679126365"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; Decode w a -&gt; Decode w b
forall a b (w :: Wrapped). (a -&gt; b) -&gt; Decode w a -&gt; Decode w b
</span><a href="Data.Coders.html#Map"><span class="hs-identifier hs-var">Map</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679126366"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Decode w a
</span><a href="#local-6989586621679126365"><span class="hs-identifier hs-var">x</span></a></span></span><span>
</span><span id="line-814"></span><span>
</span><span id="line-815"></span><span id="local-6989586621679126364"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679126355"><span id="local-6989586621679126357"><span id="local-6989586621679126359"><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Applicative</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126364"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-816"></span><span>  </span><span id="local-6989586621679126353"><span class="annot"><span class="annottext">pure :: a -&gt; Decode ('Closed d) a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">pure</span></a></span></span><span> </span><span id="local-6989586621679126352"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126352"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Decode ('Closed d) a
forall t (w :: Wrapped). t -&gt; Decode w t
</span><a href="Data.Coders.html#Emit"><span class="hs-identifier hs-var">Emit</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679126352"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-817"></span><span>  </span><span id="local-6989586621679126351"><span class="annot"><span class="annottext">Decode ('Closed d) (a -&gt; b)
</span><a href="#local-6989586621679126351"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679126350"><span class="annot"><span class="annottext">&lt;*&gt; :: Decode ('Closed d) (a -&gt; b)
-&gt; Decode ('Closed d) a -&gt; Decode ('Closed d) b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;*&gt;</span></a></span></span><span> </span><span id="local-6989586621679126349"><span class="annot"><span class="annottext">Decode ('Closed d) a
</span><a href="#local-6989586621679126349"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) (a -&gt; b)
-&gt; Decode ('Closed d) a -&gt; Decode ('Closed d) b
forall (w1 :: Wrapped) a t (d :: Density).
Decode w1 (a -&gt; t) -&gt; Decode ('Closed d) a -&gt; Decode w1 t
</span><a href="Data.Coders.html#ApplyD"><span class="hs-identifier hs-var">ApplyD</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) (a -&gt; b)
</span><a href="#local-6989586621679126351"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed d) a
</span><a href="#local-6989586621679126349"><span class="hs-identifier hs-var">x</span></a></span></span><span>
</span><span id="line-818"></span><span>
</span><span id="line-819"></span><span class="hs-comment">-- ===========================================================================================</span><span>
</span><span id="line-820"></span><span class="hs-comment">-- A Dual pairs an Encoding and a Decoder with a roundtrip property.</span><span>
</span><span id="line-821"></span><span class="hs-comment">-- They are used with the (E and D) constructors of Encode and Decode</span><span>
</span><span id="line-822"></span><span class="hs-comment">-- If you are trying to code something not in the CBOR classes</span><span>
</span><span id="line-823"></span><span class="hs-comment">-- or you want something not traditional, make you own Dual and use E or D</span><span>
</span><span id="line-824"></span><span>
</span><span id="line-825"></span><span class="hs-comment">-- data Dual t = Dual (t -&gt; Encoding) (forall s . Decoder s t)</span><span>
</span><span id="line-826"></span><span>
</span><span id="line-827"></span><span id="local-6989586621679126348"><span class="annot"><a href="Data.Coders.html#dualList"><span class="hs-identifier hs-type">dualList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126348"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126348"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-type">Dual</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679126348"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-828"></span><span id="dualList"><span class="annot"><span class="annottext">dualList :: Dual [a]
</span><a href="Data.Coders.html#dualList"><span class="hs-identifier hs-var hs-var">dualList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([a] -&gt; Encoding) -&gt; (forall s. Decoder s [a]) -&gt; Dual [a]
forall t. (t -&gt; Encoding) -&gt; (forall s. Decoder s t) -&gt; Dual t
</span><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-var">Dual</span></a></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; Encoding
forall a (f :: * -&gt; *). (ToCBOR a, Foldable f) =&gt; f a -&gt; Encoding
</span><a href="Data.Coders.html#encodeFoldable"><span class="hs-identifier hs-var">encodeFoldable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decoder s a -&gt; Decoder s [a]
forall s a. Decoder s a -&gt; Decoder s [a]
</span><a href="Data.Coders.html#decodeList"><span class="hs-identifier hs-var">decodeList</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s a
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-829"></span><span>
</span><span id="line-830"></span><span id="local-6989586621679126347"><span class="annot"><a href="Data.Coders.html#dualSeq"><span class="hs-identifier hs-type">dualSeq</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126347"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126347"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-type">Dual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Seq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126347"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-831"></span><span id="dualSeq"><span class="annot"><span class="annottext">dualSeq :: Dual (Seq a)
</span><a href="Data.Coders.html#dualSeq"><span class="hs-identifier hs-var hs-var">dualSeq</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Seq a -&gt; Encoding)
-&gt; (forall s. Decoder s (Seq a)) -&gt; Dual (Seq a)
forall t. (t -&gt; Encoding) -&gt; (forall s. Decoder s t) -&gt; Dual t
</span><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-var">Dual</span></a></span><span> </span><span class="annot"><span class="annottext">Seq a -&gt; Encoding
forall a (f :: * -&gt; *). (ToCBOR a, Foldable f) =&gt; f a -&gt; Encoding
</span><a href="Data.Coders.html#encodeFoldable"><span class="hs-identifier hs-var">encodeFoldable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decoder s a -&gt; Decoder s (Seq a)
forall s a. Decoder s a -&gt; Decoder s (Seq a)
</span><a href="Data.Coders.html#decodeSeq"><span class="hs-identifier hs-var">decodeSeq</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s a
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-832"></span><span>
</span><span id="line-833"></span><span id="local-6989586621679126346"><span class="annot"><a href="Data.Coders.html#dualSet"><span class="hs-identifier hs-type">dualSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126346"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126346"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126346"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-type">Dual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126346"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-834"></span><span id="dualSet"><span class="annot"><span class="annottext">dualSet :: Dual (Set a)
</span><a href="Data.Coders.html#dualSet"><span class="hs-identifier hs-var hs-var">dualSet</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Set a -&gt; Encoding)
-&gt; (forall s. Decoder s (Set a)) -&gt; Dual (Set a)
forall t. (t -&gt; Encoding) -&gt; (forall s. Decoder s t) -&gt; Dual t
</span><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-var">Dual</span></a></span><span> </span><span class="annot"><span class="annottext">Set a -&gt; Encoding
forall a (f :: * -&gt; *). (ToCBOR a, Foldable f) =&gt; f a -&gt; Encoding
</span><a href="Data.Coders.html#encodeFoldable"><span class="hs-identifier hs-var">encodeFoldable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decoder s a -&gt; Decoder s (Set a)
forall a s. Ord a =&gt; Decoder s a -&gt; Decoder s (Set a)
</span><a href="Data.Coders.html#decodeSet"><span class="hs-identifier hs-var">decodeSet</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s a
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-835"></span><span>
</span><span id="line-836"></span><span class="hs-comment">-- | Good for encoding (Maybe t) if is another Maybe. Uses more space than dualMaybeAsNull</span><span>
</span><span id="line-837"></span><span id="local-6989586621679126345"><span class="annot"><a href="Data.Coders.html#dualMaybeAsList"><span class="hs-identifier hs-type">dualMaybeAsList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126345"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126345"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-type">Dual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126345"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-838"></span><span id="dualMaybeAsList"><span class="annot"><span class="annottext">dualMaybeAsList :: Dual (Maybe a)
</span><a href="Data.Coders.html#dualMaybeAsList"><span class="hs-identifier hs-var hs-var">dualMaybeAsList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe a -&gt; Encoding)
-&gt; (forall s. Decoder s (Maybe a)) -&gt; Dual (Maybe a)
forall t. (t -&gt; Encoding) -&gt; (forall s. Decoder s t) -&gt; Dual t
</span><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-var">Dual</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe a -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">forall s. Decoder s (Maybe a)
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span>
</span><span id="line-839"></span><span>
</span><span id="line-840"></span><span class="hs-comment">-- | Good for encoding (Maybe T) as long as T isn't another Maybe</span><span>
</span><span id="line-841"></span><span id="local-6989586621679126344"><span class="annot"><a href="Data.Coders.html#dualMaybeAsNull"><span class="hs-identifier hs-type">dualMaybeAsNull</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126344"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126344"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-type">Dual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126344"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-842"></span><span id="dualMaybeAsNull"><span class="annot"><span class="annottext">dualMaybeAsNull :: Dual (Maybe a)
</span><a href="Data.Coders.html#dualMaybeAsNull"><span class="hs-identifier hs-var hs-var">dualMaybeAsNull</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe a -&gt; Encoding)
-&gt; (forall s. Decoder s (Maybe a)) -&gt; Dual (Maybe a)
forall t. (t -&gt; Encoding) -&gt; (forall s. Decoder s t) -&gt; Dual t
</span><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-var">Dual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; Encoding) -&gt; Maybe a -&gt; Encoding
forall a. (a -&gt; Encoding) -&gt; Maybe a -&gt; Encoding
</span><a href="Data.Coders.html#encodeNullMaybe"><span class="hs-identifier hs-var">encodeNullMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decoder s a -&gt; Decoder s (Maybe a)
forall s a. Decoder s a -&gt; Decoder s (Maybe a)
</span><a href="Data.Coders.html#decodeNullMaybe"><span class="hs-identifier hs-var">decodeNullMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s a
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-843"></span><span>
</span><span id="line-844"></span><span id="local-6989586621679126343"><span class="annot"><a href="Data.Coders.html#dualStrictSeq"><span class="hs-identifier hs-type">dualStrictSeq</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126343"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126343"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-type">Dual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../strict-containers/html/src"><span class="hs-identifier hs-type">StrictSeq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126343"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-845"></span><span id="dualStrictSeq"><span class="annot"><span class="annottext">dualStrictSeq :: Dual (StrictSeq a)
</span><a href="Data.Coders.html#dualStrictSeq"><span class="hs-identifier hs-var hs-var">dualStrictSeq</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(StrictSeq a -&gt; Encoding)
-&gt; (forall s. Decoder s (StrictSeq a)) -&gt; Dual (StrictSeq a)
forall t. (t -&gt; Encoding) -&gt; (forall s. Decoder s t) -&gt; Dual t
</span><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-var">Dual</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSeq a -&gt; Encoding
forall a (f :: * -&gt; *). (ToCBOR a, Foldable f) =&gt; f a -&gt; Encoding
</span><a href="Data.Coders.html#encodeFoldable"><span class="hs-identifier hs-var">encodeFoldable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decoder s a -&gt; Decoder s (StrictSeq a)
forall s a. Decoder s a -&gt; Decoder s (StrictSeq a)
</span><a href="Data.Coders.html#decodeStrictSeq"><span class="hs-identifier hs-var">decodeStrictSeq</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s a
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-846"></span><span>
</span><span id="line-847"></span><span class="annot"><a href="Data.Coders.html#dualText"><span class="hs-identifier hs-type">dualText</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-type">Dual</span></a></span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier hs-type">Text.Text</span></a></span><span>
</span><span id="line-848"></span><span id="dualText"><span class="annot"><span class="annottext">dualText :: Dual Text
</span><a href="Data.Coders.html#dualText"><span class="hs-identifier hs-var hs-var">dualText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Encoding) -&gt; (forall s. Decoder s Text) -&gt; Dual Text
forall t. (t -&gt; Encoding) -&gt; (forall s. Decoder s t) -&gt; Dual t
</span><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-var">Dual</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">forall s. Decoder s Text
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span>
</span><span id="line-849"></span><span>
</span><span id="line-850"></span><span id="local-6989586621679127035"><span class="annot"><a href="Data.Coders.html#dualCBOR"><span class="hs-identifier hs-type">dualCBOR</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127035"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127035"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-type">Dual</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127035"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-851"></span><span id="dualCBOR"><span class="annot"><span class="annottext">dualCBOR :: Dual a
</span><a href="Data.Coders.html#dualCBOR"><span class="hs-identifier hs-var hs-var">dualCBOR</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; Encoding) -&gt; (forall s. Decoder s a) -&gt; Dual a
forall t. (t -&gt; Encoding) -&gt; (forall s. Decoder s t) -&gt; Dual t
</span><a href="Data.Coders.html#Dual"><span class="hs-identifier hs-var">Dual</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">forall s. Decoder s a
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span>
</span><span id="line-852"></span><span>
</span><span id="line-853"></span><span class="hs-comment">-- Use to and from, when you want to guarantee that a type has both</span><span>
</span><span id="line-854"></span><span class="hs-comment">-- ToCBOR and FromCBR instances.</span><span>
</span><span id="line-855"></span><span>
</span><span id="line-856"></span><span id="local-6989586621679126342"><span class="annot"><a href="Data.Coders.html#to"><span class="hs-identifier hs-type">to</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126342"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126342"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679126342"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679126342"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-857"></span><span id="to"><span class="annot"><span class="annottext">to :: t -&gt; Encode ('Closed 'Dense) t
</span><a href="Data.Coders.html#to"><span class="hs-identifier hs-var hs-var">to</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dual t -&gt; t -&gt; Encode ('Closed 'Dense) t
forall t. Dual t -&gt; t -&gt; Encode ('Closed 'Dense) t
</span><a href="Data.Coders.html#ED"><span class="hs-identifier hs-var">ED</span></a></span><span> </span><span class="annot"><span class="annottext">Dual t
forall a. (ToCBOR a, FromCBOR a) =&gt; Dual a
</span><a href="Data.Coders.html#dualCBOR"><span class="hs-identifier hs-var">dualCBOR</span></a></span><span>
</span><span id="line-858"></span><span>
</span><span id="line-859"></span><span id="local-6989586621679126341"><span class="annot"><a href="Data.Coders.html#from"><span class="hs-identifier hs-type">from</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126341"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126341"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679126341"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-860"></span><span id="from"><span class="annot"><span class="annottext">from :: Decode ('Closed 'Dense) t
</span><a href="Data.Coders.html#from"><span class="hs-identifier hs-var hs-var">from</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dual t -&gt; Decode ('Closed 'Dense) t
forall t. Dual t -&gt; Decode ('Closed 'Dense) t
</span><a href="Data.Coders.html#DD"><span class="hs-identifier hs-var">DD</span></a></span><span> </span><span class="annot"><span class="annottext">Dual t
forall a. (ToCBOR a, FromCBOR a) =&gt; Dual a
</span><a href="Data.Coders.html#dualCBOR"><span class="hs-identifier hs-var">dualCBOR</span></a></span><span>
</span><span id="line-861"></span><span>
</span><span id="line-862"></span><span class="hs-comment">-- ==================================================================</span><span>
</span><span id="line-863"></span><span class="hs-comment">-- Combinators for building ({En|De}code ('Closed 'Dense) x) objects.</span><span>
</span><span id="line-864"></span><span class="hs-comment">-- The use of &quot;encodeFoldable&quot; is not self-documenting at all (and</span><span>
</span><span id="line-865"></span><span class="hs-comment">-- not even correct for Maps, even though Map is an instance of Foldable)</span><span>
</span><span id="line-866"></span><span class="hs-comment">-- So instead of writing:  (E encodeFoldable x), we want people to write:</span><span>
</span><span id="line-867"></span><span class="hs-comment">-- 1) (mapEncode x)   if x is a Map</span><span>
</span><span id="line-868"></span><span class="hs-comment">-- 2) (setEncode x)   if x is a Set</span><span>
</span><span id="line-869"></span><span class="hs-comment">-- 3) (listEncode x)  if x is a List</span><span>
</span><span id="line-870"></span><span class="hs-comment">--</span><span>
</span><span id="line-871"></span><span class="hs-comment">-- To decode one of these foldable instances, should use one of the aptly named Duals</span><span>
</span><span id="line-872"></span><span class="hs-comment">--</span><span>
</span><span id="line-873"></span><span class="hs-comment">-- 1) mapDecode   if x is a Map</span><span>
</span><span id="line-874"></span><span class="hs-comment">-- 2) setDecode   if x is a Set</span><span>
</span><span id="line-875"></span><span class="hs-comment">-- 3) listDecode  if x is a List</span><span>
</span><span id="line-876"></span><span class="hs-comment">--</span><span>
</span><span id="line-877"></span><span class="hs-comment">-- If one needs an Annotated decoder, one can use (explained further below)</span><span>
</span><span id="line-878"></span><span class="hs-comment">--</span><span>
</span><span id="line-879"></span><span class="hs-comment">-- 1) mapDecodeA   if x is a Map</span><span>
</span><span id="line-880"></span><span class="hs-comment">-- 2) setDecodeA   if x is a Set</span><span>
</span><span id="line-881"></span><span class="hs-comment">-- 3) listDecodeA  if x is a List</span><span>
</span><span id="line-882"></span><span class="hs-comment">-- 4) pairDecodeA  if x is a Pair like (Int,Bool)</span><span>
</span><span id="line-883"></span><span>
</span><span id="line-884"></span><span class="hs-comment">-- | (mapEncode x)  is self-documenting, correct way to encode Map. use mapDecode as its dual</span><span>
</span><span id="line-885"></span><span id="local-6989586621679126339"><span id="local-6989586621679126340"><span class="annot"><a href="Data.Coders.html#mapEncode"><span class="hs-identifier hs-type">mapEncode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126340"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126339"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Map.Map</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126340"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126339"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Map.Map</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126340"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126339"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-886"></span><span id="mapEncode"><span class="annot"><span class="annottext">mapEncode :: Map k v -&gt; Encode ('Closed 'Dense) (Map k v)
</span><a href="Data.Coders.html#mapEncode"><span class="hs-identifier hs-var hs-var">mapEncode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Map k v -&gt; Encoding)
-&gt; Map k v -&gt; Encode ('Closed 'Dense) (Map k v)
forall t. (t -&gt; Encoding) -&gt; t -&gt; Encode ('Closed 'Dense) t
</span><a href="Data.Coders.html#E"><span class="hs-identifier hs-var">E</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(k -&gt; Encoding) -&gt; (v -&gt; Encoding) -&gt; Map k v -&gt; Encoding
forall a b.
(a -&gt; Encoding) -&gt; (b -&gt; Encoding) -&gt; Map a b -&gt; Encoding
</span><a href="Data.Coders.html#encodeMap"><span class="hs-identifier hs-var">encodeMap</span></a></span><span> </span><span class="annot"><span class="annottext">k -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">v -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-887"></span><span>
</span><span id="line-888"></span><span class="hs-comment">-- | (mapDecode) is the Dual for (mapEncode x)</span><span>
</span><span id="line-889"></span><span id="local-6989586621679126337"><span id="local-6989586621679126338"><span class="annot"><a href="Data.Coders.html#mapDecode"><span class="hs-identifier hs-type">mapDecode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126338"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126338"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126337"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Map.Map</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126338"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126337"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-890"></span><span id="mapDecode"><span class="annot"><span class="annottext">mapDecode :: Decode ('Closed 'Dense) (Map k v)
</span><a href="Data.Coders.html#mapDecode"><span class="hs-identifier hs-var hs-var">mapDecode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall s. Decoder s (Map k v))
-&gt; Decode ('Closed 'Dense) (Map k v)
forall t. (forall s. Decoder s t) -&gt; Decode ('Closed 'Dense) t
</span><a href="Data.Coders.html#D"><span class="hs-identifier hs-var">D</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decoder s k -&gt; Decoder s v -&gt; Decoder s (Map k v)
forall a s b.
Ord a =&gt;
Decoder s a -&gt; Decoder s b -&gt; Decoder s (Map a b)
</span><a href="Data.Coders.html#decodeMap"><span class="hs-identifier hs-var">decodeMap</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s k
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s v
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-891"></span><span>
</span><span id="line-892"></span><span class="hs-comment">-- | (vMapEncode x) is self-documenting, correct way to encode VMap. use</span><span>
</span><span id="line-893"></span><span class="hs-comment">-- vMapDecode as its dual</span><span>
</span><span id="line-894"></span><span id="local-6989586621679126333"><span id="local-6989586621679126334"><span id="local-6989586621679126335"><span id="local-6989586621679126336"><span class="annot"><a href="Data.Coders.html#vMapEncode"><span class="hs-identifier hs-type">vMapEncode</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-895"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../../../../vector/html/src"><span class="hs-identifier hs-type">VMap.Vector</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126336"><span class="hs-identifier hs-type">kv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126335"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../vector/html/src"><span class="hs-identifier hs-type">VMap.Vector</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126334"><span class="hs-identifier hs-type">vv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126333"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126335"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126333"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-896"></span><span>  </span><span class="annot"><a href="../../../../vector-map/html/src"><span class="hs-identifier hs-type">VMap.VMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126336"><span class="hs-identifier hs-type">kv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126334"><span class="hs-identifier hs-type">vv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126335"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126333"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-897"></span><span>  </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../vector-map/html/src"><span class="hs-identifier hs-type">VMap.VMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126336"><span class="hs-identifier hs-type">kv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126334"><span class="hs-identifier hs-type">vv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126335"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126333"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-898"></span><span id="vMapEncode"><span class="annot"><span class="annottext">vMapEncode :: VMap kv vv k v -&gt; Encode ('Closed 'Dense) (VMap kv vv k v)
</span><a href="Data.Coders.html#vMapEncode"><span class="hs-identifier hs-var hs-var">vMapEncode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(VMap kv vv k v -&gt; Encoding)
-&gt; VMap kv vv k v -&gt; Encode ('Closed 'Dense) (VMap kv vv k v)
forall t. (t -&gt; Encoding) -&gt; t -&gt; Encode ('Closed 'Dense) t
</span><a href="Data.Coders.html#E"><span class="hs-identifier hs-var">E</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(k -&gt; Encoding) -&gt; (v -&gt; Encoding) -&gt; VMap kv vv k v -&gt; Encoding
forall (vk :: * -&gt; *) k (vv :: * -&gt; *) v.
(Vector vk k, Vector vv v) =&gt;
(k -&gt; Encoding) -&gt; (v -&gt; Encoding) -&gt; VMap vk vv k v -&gt; Encoding
</span><a href="Data.Coders.html#encodeVMap"><span class="hs-identifier hs-var">encodeVMap</span></a></span><span> </span><span class="annot"><span class="annottext">k -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">v -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-899"></span><span>
</span><span id="line-900"></span><span class="hs-comment">-- | (vMapDecode) is the Dual for (vMapEncode x)</span><span>
</span><span id="line-901"></span><span id="local-6989586621679126329"><span id="local-6989586621679126330"><span id="local-6989586621679126331"><span id="local-6989586621679126332"><span class="annot"><a href="Data.Coders.html#vMapDecode"><span class="hs-identifier hs-type">vMapDecode</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-902"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../../../../vector/html/src"><span class="hs-identifier hs-type">VMap.Vector</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126332"><span class="hs-identifier hs-type">kv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126331"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../vector/html/src"><span class="hs-identifier hs-type">VMap.Vector</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126330"><span class="hs-identifier hs-type">vv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126329"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126331"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126331"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126329"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-903"></span><span>  </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../vector-map/html/src"><span class="hs-identifier hs-type">VMap.VMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126332"><span class="hs-identifier hs-type">kv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126330"><span class="hs-identifier hs-type">vv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126331"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126329"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-904"></span><span id="vMapDecode"><span class="annot"><span class="annottext">vMapDecode :: Decode ('Closed 'Dense) (VMap kv vv k v)
</span><a href="Data.Coders.html#vMapDecode"><span class="hs-identifier hs-var hs-var">vMapDecode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall s. Decoder s (VMap kv vv k v))
-&gt; Decode ('Closed 'Dense) (VMap kv vv k v)
forall t. (forall s. Decoder s t) -&gt; Decode ('Closed 'Dense) t
</span><a href="Data.Coders.html#D"><span class="hs-identifier hs-var">D</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decoder s k -&gt; Decoder s v -&gt; Decoder s (VMap kv vv k v)
forall (kv :: * -&gt; *) k (vv :: * -&gt; *) v s.
(Vector kv k, Vector vv v, Ord k) =&gt;
Decoder s k -&gt; Decoder s v -&gt; Decoder s (VMap kv vv k v)
</span><a href="Data.Coders.html#decodeVMap"><span class="hs-identifier hs-var">decodeVMap</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s k
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s v
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-905"></span><span>
</span><span id="line-906"></span><span class="hs-comment">-- | (setEncode x) is self-documenting (E encodeFoldable x), use setDecode as its dual</span><span>
</span><span id="line-907"></span><span id="local-6989586621679126328"><span class="annot"><a href="Data.Coders.html#setEncode"><span class="hs-identifier hs-type">setEncode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126328"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Set.Set</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126328"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Set.Set</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126328"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-908"></span><span id="setEncode"><span class="annot"><span class="annottext">setEncode :: Set v -&gt; Encode ('Closed 'Dense) (Set v)
</span><a href="Data.Coders.html#setEncode"><span class="hs-identifier hs-var hs-var">setEncode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Set v -&gt; Encoding) -&gt; Set v -&gt; Encode ('Closed 'Dense) (Set v)
forall t. (t -&gt; Encoding) -&gt; t -&gt; Encode ('Closed 'Dense) t
</span><a href="Data.Coders.html#E"><span class="hs-identifier hs-var">E</span></a></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; Encoding
forall a (f :: * -&gt; *). (ToCBOR a, Foldable f) =&gt; f a -&gt; Encoding
</span><a href="Data.Coders.html#encodeFoldable"><span class="hs-identifier hs-var">encodeFoldable</span></a></span><span>
</span><span id="line-909"></span><span>
</span><span id="line-910"></span><span class="hs-comment">-- | (setDecode) is the Dual for (setEncode x)</span><span>
</span><span id="line-911"></span><span id="local-6989586621679126327"><span class="annot"><a href="Data.Coders.html#setDecode"><span class="hs-identifier hs-type">setDecode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126327"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126327"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Set.Set</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126327"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-912"></span><span id="setDecode"><span class="annot"><span class="annottext">setDecode :: Decode ('Closed 'Dense) (Set v)
</span><a href="Data.Coders.html#setDecode"><span class="hs-identifier hs-var hs-var">setDecode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall s. Decoder s (Set v)) -&gt; Decode ('Closed 'Dense) (Set v)
forall t. (forall s. Decoder s t) -&gt; Decode ('Closed 'Dense) t
</span><a href="Data.Coders.html#D"><span class="hs-identifier hs-var">D</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decoder s v -&gt; Decoder s (Set v)
forall a s. Ord a =&gt; Decoder s a -&gt; Decoder s (Set a)
</span><a href="Data.Coders.html#decodeSet"><span class="hs-identifier hs-var">decodeSet</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s v
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-913"></span><span>
</span><span id="line-914"></span><span class="hs-comment">-- | (listEncode x) is self-documenting (E encodeFoldable x), use listDecode as its dual</span><span>
</span><span id="line-915"></span><span id="local-6989586621679126326"><span class="annot"><a href="Data.Coders.html#listEncode"><span class="hs-identifier hs-type">listEncode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126326"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679126326"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Encode"><span class="hs-identifier hs-type">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679126326"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-916"></span><span id="listEncode"><span class="annot"><span class="annottext">listEncode :: [v] -&gt; Encode ('Closed 'Dense) [v]
</span><a href="Data.Coders.html#listEncode"><span class="hs-identifier hs-var hs-var">listEncode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([v] -&gt; Encoding) -&gt; [v] -&gt; Encode ('Closed 'Dense) [v]
forall t. (t -&gt; Encoding) -&gt; t -&gt; Encode ('Closed 'Dense) t
</span><a href="Data.Coders.html#E"><span class="hs-identifier hs-var">E</span></a></span><span> </span><span class="annot"><span class="annottext">[v] -&gt; Encoding
forall a (f :: * -&gt; *). (ToCBOR a, Foldable f) =&gt; f a -&gt; Encoding
</span><a href="Data.Coders.html#encodeFoldable"><span class="hs-identifier hs-var">encodeFoldable</span></a></span><span>
</span><span id="line-917"></span><span>
</span><span id="line-918"></span><span class="hs-comment">-- | (listDecode) is the Dual for (listEncode x)</span><span>
</span><span id="line-919"></span><span id="local-6989586621679126325"><span class="annot"><a href="Data.Coders.html#listDecode"><span class="hs-identifier hs-type">listDecode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126325"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679126325"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-920"></span><span id="listDecode"><span class="annot"><span class="annottext">listDecode :: Decode ('Closed 'Dense) [v]
</span><a href="Data.Coders.html#listDecode"><span class="hs-identifier hs-var hs-var">listDecode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall s. Decoder s [v]) -&gt; Decode ('Closed 'Dense) [v]
forall t. (forall s. Decoder s t) -&gt; Decode ('Closed 'Dense) t
</span><a href="Data.Coders.html#D"><span class="hs-identifier hs-var">D</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decoder s v -&gt; Decoder s [v]
forall s a. Decoder s a -&gt; Decoder s [a]
</span><a href="Data.Coders.html#decodeList"><span class="hs-identifier hs-var">decodeList</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s v
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-921"></span><span>
</span><span id="line-922"></span><span class="hs-comment">-- =============================================================================</span><span>
</span><span id="line-923"></span><span class="hs-comment">-- Combinators for building (Decode ('Closed 'Dense) (Annotator x)) objects. Unlike</span><span>
</span><span id="line-924"></span><span class="hs-comment">-- the combinators above (setDecode, mapDecode, ListDecode) for Non-Annotator types,</span><span>
</span><span id="line-925"></span><span class="hs-comment">-- these combinators take explicit (Decode  ('Closed 'Dense) i) objects as parameters</span><span>
</span><span id="line-926"></span><span class="hs-comment">-- rather than relying on FromCBOR instances as implicit parameters. To get the</span><span>
</span><span id="line-927"></span><span class="hs-comment">-- annotator version, just add 'A' to the end of the non-annotator version decode function.</span><span>
</span><span id="line-928"></span><span class="hs-comment">-- E.g.  setDecodeA, listDecodeA, mapDecodeA. Suppose I want to decode x:: Map [A] (B,C)</span><span>
</span><span id="line-929"></span><span class="hs-comment">-- and I only have Annotator instances of A and C, then the following decodes x.</span><span>
</span><span id="line-930"></span><span class="hs-comment">-- mapDecodeA (listDecodeA From) (pairDecodeA (Ann From) From).</span><span>
</span><span id="line-931"></span><span class="hs-comment">--                                             ^^^^^^^^</span><span>
</span><span id="line-932"></span><span class="hs-comment">-- One can always lift x::(Decode w T) by using Ann. so (Ann x)::(Decode w (Annotator T)).</span><span>
</span><span id="line-933"></span><span>
</span><span id="line-934"></span><span id="local-6989586621679126323"><span id="local-6989586621679126324"><span class="annot"><a href="Data.Coders.html#pairDecodeA"><span class="hs-identifier hs-type">pairDecodeA</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-935"></span><span>  </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">Annotator</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126324"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-936"></span><span>  </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">Annotator</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126323"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-937"></span><span>  </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">Annotator</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679126324"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679126323"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-938"></span><span id="pairDecodeA"><span class="annot"><span class="annottext">pairDecodeA :: Decode ('Closed 'Dense) (Annotator x)
-&gt; Decode ('Closed 'Dense) (Annotator y)
-&gt; Decode ('Closed 'Dense) (Annotator (x, y))
</span><a href="Data.Coders.html#pairDecodeA"><span class="hs-identifier hs-var hs-var">pairDecodeA</span></a></span></span><span> </span><span id="local-6989586621679126322"><span class="annot"><span class="annottext">Decode ('Closed 'Dense) (Annotator x)
</span><a href="#local-6989586621679126322"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679126321"><span class="annot"><span class="annottext">Decode ('Closed 'Dense) (Annotator y)
</span><a href="#local-6989586621679126321"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall s. Decoder s (Annotator (x, y)))
-&gt; Decode ('Closed 'Dense) (Annotator (x, y))
forall t. (forall s. Decoder s t) -&gt; Decode ('Closed 'Dense) t
</span><a href="Data.Coders.html#D"><span class="hs-identifier hs-var">D</span></a></span><span> </span><span class="annot"><span class="annottext">((forall s. Decoder s (Annotator (x, y)))
 -&gt; Decode ('Closed 'Dense) (Annotator (x, y)))
-&gt; (forall s. Decoder s (Annotator (x, y)))
-&gt; Decode ('Closed 'Dense) (Annotator (x, y))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-939"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621679126320"><span class="annot"><span class="annottext">Annotator x
</span><a href="#local-6989586621679126320"><span class="hs-identifier hs-var">xA</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679126319"><span class="annot"><span class="annottext">Annotator y
</span><a href="#local-6989586621679126319"><span class="hs-identifier hs-var">yA</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s (Annotator x)
-&gt; Decoder s (Annotator y) -&gt; Decoder s (Annotator x, Annotator y)
forall s a b. Decoder s a -&gt; Decoder s b -&gt; Decoder s (a, b)
</span><a href="Data.Coders.html#decodePair"><span class="hs-identifier hs-var">decodePair</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decode ('Closed 'Dense) (Annotator x) -&gt; Decoder s (Annotator x)
forall (w :: Wrapped) t s. Decode w t -&gt; Decoder s t
</span><a href="Data.Coders.html#decode"><span class="hs-identifier hs-var">decode</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed 'Dense) (Annotator x)
</span><a href="#local-6989586621679126322"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decode ('Closed 'Dense) (Annotator y) -&gt; Decoder s (Annotator y)
forall (w :: Wrapped) t s. Decode w t -&gt; Decoder s t
</span><a href="Data.Coders.html#decode"><span class="hs-identifier hs-var">decode</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed 'Dense) (Annotator y)
</span><a href="#local-6989586621679126321"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-940"></span><span>  </span><span class="annot"><span class="annottext">Annotator (x, y) -&gt; Decoder s (Annotator (x, y))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(x -&gt; y -&gt; (x, y)) -&gt; Annotator x -&gt; Annotator (y -&gt; (x, y))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Annotator x
</span><a href="#local-6989586621679126320"><span class="hs-identifier hs-var">xA</span></a></span><span> </span><span class="annot"><span class="annottext">Annotator (y -&gt; (x, y)) -&gt; Annotator y -&gt; Annotator (x, y)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Annotator y
</span><a href="#local-6989586621679126319"><span class="hs-identifier hs-var">yA</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-941"></span><span>
</span><span id="line-942"></span><span id="local-6989586621679126318"><span class="annot"><a href="Data.Coders.html#listDecodeA"><span class="hs-identifier hs-type">listDecodeA</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">Annotator</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126318"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">Annotator</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679126318"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span></span><span>
</span><span id="line-943"></span><span id="listDecodeA"><span class="annot"><span class="annottext">listDecodeA :: Decode ('Closed 'Dense) (Annotator x)
-&gt; Decode ('Closed 'Dense) (Annotator [x])
</span><a href="Data.Coders.html#listDecodeA"><span class="hs-identifier hs-var hs-var">listDecodeA</span></a></span></span><span> </span><span id="local-6989586621679126317"><span class="annot"><span class="annottext">Decode ('Closed 'Dense) (Annotator x)
</span><a href="#local-6989586621679126317"><span class="hs-identifier hs-var">dx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall s. Decoder s (Annotator [x]))
-&gt; Decode ('Closed 'Dense) (Annotator [x])
forall t. (forall s. Decoder s t) -&gt; Decode ('Closed 'Dense) t
</span><a href="Data.Coders.html#D"><span class="hs-identifier hs-var">D</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Annotator x] -&gt; Annotator [x]
forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Traversable t, Monad m) =&gt;
t (m a) -&gt; m (t a)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">sequence</span></a></span><span> </span><span class="annot"><span class="annottext">([Annotator x] -&gt; Annotator [x])
-&gt; Decoder s [Annotator x] -&gt; Decoder s (Annotator [x])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s (Annotator x) -&gt; Decoder s [Annotator x]
forall s a. Decoder s a -&gt; Decoder s [a]
</span><a href="Data.Coders.html#decodeList"><span class="hs-identifier hs-var">decodeList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decode ('Closed 'Dense) (Annotator x) -&gt; Decoder s (Annotator x)
forall (w :: Wrapped) t s. Decode w t -&gt; Decoder s t
</span><a href="Data.Coders.html#decode"><span class="hs-identifier hs-var">decode</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed 'Dense) (Annotator x)
</span><a href="#local-6989586621679126317"><span class="hs-identifier hs-var">dx</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-944"></span><span>
</span><span id="line-945"></span><span id="local-6989586621679126316"><span class="annot"><a href="Data.Coders.html#setDecodeA"><span class="hs-identifier hs-type">setDecodeA</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-946"></span><span>  </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126316"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-947"></span><span>  </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">Annotator</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126316"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-948"></span><span>  </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">Annotator</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126316"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-949"></span><span id="setDecodeA"><span class="annot"><span class="annottext">setDecodeA :: Decode ('Closed 'Dense) (Annotator x)
-&gt; Decode ('Closed 'Dense) (Annotator (Set x))
</span><a href="Data.Coders.html#setDecodeA"><span class="hs-identifier hs-var hs-var">setDecodeA</span></a></span></span><span> </span><span id="local-6989586621679126315"><span class="annot"><span class="annottext">Decode ('Closed 'Dense) (Annotator x)
</span><a href="#local-6989586621679126315"><span class="hs-identifier hs-var">dx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall s. Decoder s (Annotator (Set x)))
-&gt; Decode ('Closed 'Dense) (Annotator (Set x))
forall t. (forall s. Decoder s t) -&gt; Decode ('Closed 'Dense) t
</span><a href="Data.Coders.html#D"><span class="hs-identifier hs-var">D</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decoder s (Annotator x) -&gt; Decoder s (Annotator (Set x))
forall t s.
Ord t =&gt;
Decoder s (Annotator t) -&gt; Decoder s (Annotator (Set t))
</span><a href="Data.Coders.html#decodeAnnSet"><span class="hs-identifier hs-var">decodeAnnSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decode ('Closed 'Dense) (Annotator x) -&gt; Decoder s (Annotator x)
forall (w :: Wrapped) t s. Decode w t -&gt; Decoder s t
</span><a href="Data.Coders.html#decode"><span class="hs-identifier hs-var">decode</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed 'Dense) (Annotator x)
</span><a href="#local-6989586621679126315"><span class="hs-identifier hs-var">dx</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-950"></span><span>
</span><span id="line-951"></span><span id="local-6989586621679126313"><span id="local-6989586621679126314"><span class="annot"><a href="Data.Coders.html#mapDecodeA"><span class="hs-identifier hs-type">mapDecodeA</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-952"></span><span>  </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126314"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-953"></span><span>  </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">Annotator</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126314"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-954"></span><span>  </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">Annotator</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126313"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-955"></span><span>  </span><span class="annot"><a href="Data.Coders.html#Decode"><span class="hs-identifier hs-type">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Data.Coders.html#Dense"><span class="hs-identifier hs-type">Dense</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">Annotator</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Map.Map</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126314"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679126313"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-956"></span><span id="mapDecodeA"><span class="annot"><span class="annottext">mapDecodeA :: Decode ('Closed 'Dense) (Annotator k)
-&gt; Decode ('Closed 'Dense) (Annotator v)
-&gt; Decode ('Closed 'Dense) (Annotator (Map k v))
</span><a href="Data.Coders.html#mapDecodeA"><span class="hs-identifier hs-var hs-var">mapDecodeA</span></a></span></span><span> </span><span id="local-6989586621679126312"><span class="annot"><span class="annottext">Decode ('Closed 'Dense) (Annotator k)
</span><a href="#local-6989586621679126312"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621679126311"><span class="annot"><span class="annottext">Decode ('Closed 'Dense) (Annotator v)
</span><a href="#local-6989586621679126311"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall s. Decoder s (Annotator (Map k v)))
-&gt; Decode ('Closed 'Dense) (Annotator (Map k v))
forall t. (forall s. Decoder s t) -&gt; Decode ('Closed 'Dense) t
</span><a href="Data.Coders.html#D"><span class="hs-identifier hs-var">D</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decoder s (Annotator k)
-&gt; Decoder s (Annotator v) -&gt; Decoder s (Annotator (Map k v))
forall a (t :: * -&gt; *) s b.
(Ord a, Applicative t) =&gt;
Decoder s (t a) -&gt; Decoder s (t b) -&gt; Decoder s (t (Map a b))
</span><a href="Data.Coders.html#decodeMapTraverse"><span class="hs-identifier hs-var">decodeMapTraverse</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decode ('Closed 'Dense) (Annotator k) -&gt; Decoder s (Annotator k)
forall (w :: Wrapped) t s. Decode w t -&gt; Decoder s t
</span><a href="Data.Coders.html#decode"><span class="hs-identifier hs-var">decode</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed 'Dense) (Annotator k)
</span><a href="#local-6989586621679126312"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decode ('Closed 'Dense) (Annotator v) -&gt; Decoder s (Annotator v)
forall (w :: Wrapped) t s. Decode w t -&gt; Decoder s t
</span><a href="Data.Coders.html#decode"><span class="hs-identifier hs-var">decode</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed 'Dense) (Annotator v)
</span><a href="#local-6989586621679126311"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-957"></span><span>
</span><span id="line-958"></span><span class="hs-comment">-- ==================================================================</span><span>
</span><span id="line-959"></span><span class="hs-comment">-- A Guide to Visual inspection of Duality in Encode and Decode</span><span>
</span><span id="line-960"></span><span class="hs-comment">--</span><span>
</span><span id="line-961"></span><span class="hs-comment">-- 1) (Sum c)     and (SumD c)    are duals</span><span>
</span><span id="line-962"></span><span class="hs-comment">-- 2) (Rec c)     and (RecD c)    are duals</span><span>
</span><span id="line-963"></span><span class="hs-comment">-- 3) (Keyed c)   and (KeyedD c)  are duals</span><span>
</span><span id="line-964"></span><span class="hs-comment">-- 4) (OmitC x)   and (Emit x)    are duals</span><span>
</span><span id="line-965"></span><span class="hs-comment">-- 5) (Omit p ..) and (Emit x)    are duals if (p x) is True</span><span>
</span><span id="line-966"></span><span class="hs-comment">-- 6) (To x)      and (From)      are duals if (x::T) and (forall (y::T). isRight (roundTrip y))</span><span>
</span><span id="line-967"></span><span class="hs-comment">-- 7) (E enc x)   and (D dec)     are duals if (forall x . isRight (roundTrip' enc dec x))</span><span>
</span><span id="line-968"></span><span class="hs-comment">-- 6) (ED d x)    and (DD f)      are duals as long as d=(Dual enc dec) and (forall x . isRight (roundTrip' enc dec x))</span><span>
</span><span id="line-969"></span><span class="hs-comment">-- 7) f !&gt; x      and g &lt;! y      are duals if (f and g are duals) and (x and y are duals)</span><span>
</span><span id="line-970"></span><span class="hs-comment">--</span><span>
</span><span id="line-971"></span><span class="hs-comment">-- The duality of (Summands name decodeT) depends on the duality of the range of decodeT with the endoder of T</span><span>
</span><span id="line-972"></span><span class="hs-comment">-- A some property also holds for (SparseKeyed name (init::T) pick required) depending on the keys of pick and the Sparse encoder of T</span><span>
</span><span id="line-973"></span><span>
</span><span id="line-974"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-975"></span><span class="hs-comment">-- Utility functions for working with CBOR</span><span>
</span><span id="line-976"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-977"></span><span>
</span><span id="line-978"></span><span id="local-6989586621679127144"><span class="annot"><a href="Data.Coders.html#assertTag"><span class="hs-identifier hs-type">assertTag</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Word</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127144"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-979"></span><span id="assertTag"><span class="annot"><span class="annottext">assertTag :: Word -&gt; Decoder s ()
</span><a href="Data.Coders.html#assertTag"><span class="hs-identifier hs-var hs-var">assertTag</span></a></span></span><span> </span><span id="local-6989586621679126310"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126310"><span class="hs-identifier hs-var">tag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-980"></span><span>  </span><span id="local-6989586621679126309"><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679126309"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-981"></span><span>    </span><span class="annot"><span class="annottext">Decoder s TokenType
forall s. Decoder s TokenType
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">peekTokenType</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s TokenType
-&gt; (TokenType -&gt; Decoder s Natural) -&gt; Decoder s Natural
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-982"></span><span>      </span><span class="annot"><span class="annottext">TokenType
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">TypeTag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Natural
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word -&gt; Natural) -&gt; Decoder s Word -&gt; Decoder s Natural
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s Word
forall s. Decoder s Word
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">decodeTag</span></a></span><span>
</span><span id="line-983"></span><span>      </span><span class="annot"><span class="annottext">TokenType
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">TypeTag64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Natural
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Natural) -&gt; Decoder s Word64 -&gt; Decoder s Natural
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s Word64
forall s. Decoder s Word64
</span><a href="../../../../cborg/html/src"><span class="hs-identifier hs-var">decodeTag64</span></a></span><span>
</span><span id="line-984"></span><span>      </span><span class="annot"><span class="annottext">TokenType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Decoder s Natural
forall e s a. Buildable e =&gt; e -&gt; Decoder s a
</span><a href="Data.Coders.html#cborError"><span class="hs-identifier hs-var">cborError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;expected tag&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-985"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; Decoder s () -&gt; Decoder s ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679126309"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">/=</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word -&gt; Natural
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126310"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Natural</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Decoder s () -&gt; Decoder s ()) -&gt; Decoder s () -&gt; Decoder s ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-986"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Decoder s ()
forall e s a. Buildable e =&gt; e -&gt; Decoder s a
</span><a href="Data.Coders.html#cborError"><span class="hs-identifier hs-var">cborError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;expecteg tag &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679126310"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; but got tag &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679126309"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-987"></span><span>
</span><span id="line-988"></span><span class="hs-comment">-- | Convert a @Buildable@ error into a 'cborg' decoder error</span><span>
</span><span id="line-989"></span><span id="local-6989586621679127507"><span id="local-6989586621679127508"><span id="local-6989586621679127510"><span class="annot"><a href="Data.Coders.html#cborError"><span class="hs-identifier hs-type">cborError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../formatting/html/src"><span class="hs-identifier hs-type">Buildable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127510"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679127510"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127508"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679127507"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-990"></span><span id="cborError"><span class="annot"><span class="annottext">cborError :: e -&gt; Decoder s a
</span><a href="Data.Coders.html#cborError"><span class="hs-identifier hs-var hs-var">cborError</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Decoder s a
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fail</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Decoder s a) -&gt; (e -&gt; String) -&gt; e -&gt; Decoder s a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Format String (e -&gt; String) -&gt; e -&gt; String
forall a. Format String a -&gt; a
</span><a href="../../../../formatting/html/src"><span class="hs-identifier hs-var">formatToString</span></a></span><span> </span><span class="annot"><span class="annottext">Format String (e -&gt; String)
forall a r. Buildable a =&gt; Format r (a -&gt; r)
</span><a href="../../../../formatting/html/src"><span class="hs-identifier hs-var">build</span></a></span><span>
</span><span id="line-991"></span></pre></body></html>