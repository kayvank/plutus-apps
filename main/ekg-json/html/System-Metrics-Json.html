<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>System.Metrics.Json</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ekg-json-0.1.0.7.0.0.0.0.1: JSON encoding of ekg metrics</span><ul class="links" id="page-menu"><li><a href="src/System.Metrics.Json.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">System.Metrics.Json</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Converting metrics to JSON values</a><ul><li><a href="#g:2">Newtype wrappers with instances</a></li></ul></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Encoding of ekg metrics as JSON. The encoding defined by the
 functions in this module are standardized and used by the ekg web
 UI. The purpose of this module is to let other web servers and
 frameworks than the one used by the ekg package expose ekg metrics.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:sampleToJson">sampleToJson</a> :: <a href="../../ekg-core/html/System-Metrics.html#t:Sample" title="System.Metrics">Sample</a> -&gt; <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a></li><li class="src short"><a href="#v:valueToJson">valueToJson</a> :: <a href="../../ekg-core/html/System-Metrics.html#t:Value" title="System.Metrics">Value</a> -&gt; <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:Sample">Sample</a> = <a href="#v:Sample">Sample</a> <a href="../../ekg-core/html/System-Metrics.html#t:Sample" title="System.Metrics">Sample</a></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:Value">Value</a> = <a href="#v:Value">Value</a> <a href="../../ekg-core/html/System-Metrics.html#t:Value" title="System.Metrics">Value</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Converting metrics to JSON values</h1></a><div class="top"><p class="src"><a id="v:sampleToJson" class="def">sampleToJson</a> :: <a href="../../ekg-core/html/System-Metrics.html#t:Sample" title="System.Metrics">Sample</a> -&gt; <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> <a href="src/System.Metrics.Json.html#sampleToJson" class="link">Source</a> <a href="#v:sampleToJson" class="selflink">#</a></p><div class="doc"><p>Encode metrics as nested JSON objects. Each &quot;.&quot; in the metric
 name introduces a new level of nesting. For example, the metrics
 <code>[(&quot;foo.bar&quot;, 10), (&quot;foo.baz&quot;, &quot;label&quot;)]</code> are encoded as</p><pre>{
  &quot;foo&quot;: {
    &quot;bar&quot;: {
      &quot;type:&quot;, &quot;c&quot;,
      &quot;val&quot;: 10
    },
    &quot;baz&quot;: {
      &quot;type&quot;: &quot;l&quot;,
      &quot;val&quot;: &quot;label&quot;
    }
  }
}</pre></div></div><div class="top"><p class="src"><a id="v:valueToJson" class="def">valueToJson</a> :: <a href="../../ekg-core/html/System-Metrics.html#t:Value" title="System.Metrics">Value</a> -&gt; <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> <a href="src/System.Metrics.Json.html#valueToJson" class="link">Source</a> <a href="#v:valueToJson" class="selflink">#</a></p><div class="doc"><p>Encodes a single metric as a JSON object. Example:</p><pre>{
  &quot;type&quot;: &quot;c&quot;,
  &quot;val&quot;: 89460
}</pre></div></div><a href="#g:2" id="g:2"><h2>Newtype wrappers with instances</h2></a><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:Sample" class="def">Sample</a> <a href="src/System.Metrics.Json.html#Sample" class="link">Source</a> <a href="#t:Sample" class="selflink">#</a></p><div class="doc"><p>Newtype wrapper that provides a <code><a href="../../aeson/html/Data-Aeson-Types.html#t:ToJSON" title="Data.Aeson.Types">ToJSON</a></code> instances for the
 underlying <code><a href="../../ekg-core/html/System-Metrics.html#t:Sample" title="System.Metrics">Sample</a></code> without creating an orphan instance.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Sample" class="def">Sample</a> <a href="../../ekg-core/html/System-Metrics.html#t:Sample" title="System.Metrics">Sample</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Sample">Instances</h4><details id="i:Sample" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Sample:Show:1"></span> <a href="../../ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="System-Metrics-Json.html#t:Sample" title="System.Metrics.Json">Sample</a></span> <a href="src/System.Metrics.Json.html#line-132" class="link">Source</a> <a href="#t:Sample" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Sample:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="System-Metrics-Json.html">System.Metrics.Json</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="System-Metrics-Json.html#t:Sample" title="System.Metrics.Json">Sample</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="System-Metrics-Json.html#t:Sample" title="System.Metrics.Json">Sample</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="System-Metrics-Json.html#t:Sample" title="System.Metrics.Json">Sample</a>] -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Sample:ToJSON:2"></span> <a href="../../aeson/html/Data-Aeson-Types.html#t:ToJSON" title="Data.Aeson.Types">ToJSON</a> <a href="System-Metrics-Json.html#t:Sample" title="System.Metrics.Json">Sample</a></span> <a href="src/System.Metrics.Json.html#line-135" class="link">Source</a> <a href="#t:Sample" class="selflink">#</a></td><td class="doc"><p>Uses <code><a href="System-Metrics-Json.html#v:sampleToJson" title="System.Metrics.Json">sampleToJson</a></code>.</p></td></tr><tr><td colspan="2"><details id="i:id:Sample:ToJSON:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="System-Metrics-Json.html">System.Metrics.Json</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toJSON">toJSON</a> :: <a href="System-Metrics-Json.html#t:Sample" title="System.Metrics.Json">Sample</a> -&gt; <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> <a href="../../aeson/html/src" class="link">Source</a> <a href="#v:toJSON" class="selflink">#</a></p><p class="src"><a href="#v:toEncoding">toEncoding</a> :: <a href="System-Metrics-Json.html#t:Sample" title="System.Metrics.Json">Sample</a> -&gt; <a href="../../aeson/html/Data-Aeson-Encoding-Internal.html#t:Encoding" title="Data.Aeson.Encoding.Internal">Encoding</a> <a href="../../aeson/html/src" class="link">Source</a> <a href="#v:toEncoding" class="selflink">#</a></p><p class="src"><a href="#v:toJSONList">toJSONList</a> :: [<a href="System-Metrics-Json.html#t:Sample" title="System.Metrics.Json">Sample</a>] -&gt; <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> <a href="../../aeson/html/src" class="link">Source</a> <a href="#v:toJSONList" class="selflink">#</a></p><p class="src"><a href="#v:toEncodingList">toEncodingList</a> :: [<a href="System-Metrics-Json.html#t:Sample" title="System.Metrics.Json">Sample</a>] -&gt; <a href="../../aeson/html/Data-Aeson-Encoding-Internal.html#t:Encoding" title="Data.Aeson.Encoding.Internal">Encoding</a> <a href="../../aeson/html/src" class="link">Source</a> <a href="#v:toEncodingList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:Value" class="def">Value</a> <a href="src/System.Metrics.Json.html#Value" class="link">Source</a> <a href="#t:Value" class="selflink">#</a></p><div class="doc"><p>Newtype wrapper that provides a <code><a href="../../aeson/html/Data-Aeson-Types.html#t:ToJSON" title="Data.Aeson.Types">ToJSON</a></code> instances for the
 underlying <code><a href="../../ekg-core/html/System-Metrics.html#t:Value" title="System.Metrics">Value</a></code> without creating an orphan instance.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Value" class="def">Value</a> <a href="../../ekg-core/html/System-Metrics.html#t:Value" title="System.Metrics">Value</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Value">Instances</h4><details id="i:Value" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Value:Show:1"></span> <a href="../../ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="System-Metrics-Json.html#t:Value" title="System.Metrics.Json">Value</a></span> <a href="src/System.Metrics.Json.html#line-141" class="link">Source</a> <a href="#t:Value" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Value:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="System-Metrics-Json.html">System.Metrics.Json</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="System-Metrics-Json.html#t:Value" title="System.Metrics.Json">Value</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="System-Metrics-Json.html#t:Value" title="System.Metrics.Json">Value</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="System-Metrics-Json.html#t:Value" title="System.Metrics.Json">Value</a>] -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Value:ToJSON:2"></span> <a href="../../aeson/html/Data-Aeson-Types.html#t:ToJSON" title="Data.Aeson.Types">ToJSON</a> <a href="System-Metrics-Json.html#t:Value" title="System.Metrics.Json">Value</a></span> <a href="src/System.Metrics.Json.html#line-144" class="link">Source</a> <a href="#t:Value" class="selflink">#</a></td><td class="doc"><p>Uses <code><a href="System-Metrics-Json.html#v:valueToJson" title="System.Metrics.Json">valueToJson</a></code>.</p></td></tr><tr><td colspan="2"><details id="i:id:Value:ToJSON:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="System-Metrics-Json.html">System.Metrics.Json</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toJSON">toJSON</a> :: <a href="System-Metrics-Json.html#t:Value" title="System.Metrics.Json">Value</a> -&gt; <a href="../../aeson/html/Data-Aeson-Types.html#v:Value0" title="Data.Aeson.Types">Value0</a> <a href="../../aeson/html/src" class="link">Source</a> <a href="#v:toJSON" class="selflink">#</a></p><p class="src"><a href="#v:toEncoding">toEncoding</a> :: <a href="System-Metrics-Json.html#t:Value" title="System.Metrics.Json">Value</a> -&gt; <a href="../../aeson/html/Data-Aeson-Encoding-Internal.html#t:Encoding" title="Data.Aeson.Encoding.Internal">Encoding</a> <a href="../../aeson/html/src" class="link">Source</a> <a href="#v:toEncoding" class="selflink">#</a></p><p class="src"><a href="#v:toJSONList">toJSONList</a> :: [<a href="System-Metrics-Json.html#t:Value" title="System.Metrics.Json">Value</a>] -&gt; <a href="../../aeson/html/Data-Aeson-Types.html#v:Value0" title="Data.Aeson.Types">Value0</a> <a href="../../aeson/html/src" class="link">Source</a> <a href="#v:toJSONList" class="selflink">#</a></p><p class="src"><a href="#v:toEncodingList">toEncodingList</a> :: [<a href="System-Metrics-Json.html#t:Value" title="System.Metrics.Json">Value</a>] -&gt; <a href="../../aeson/html/Data-Aeson-Encoding-Internal.html#t:Encoding" title="Data.Aeson.Encoding.Internal">Encoding</a> <a href="../../aeson/html/src" class="link">Source</a> <a href="#v:toEncodingList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.2</p></div></body></html>