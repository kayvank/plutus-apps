<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Ouroboros.Network.Client.Wallet</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">cardano-wallet-core-2022.7.1: The Wallet Backend for a Cardano node.</span><ul class="links" id="page-menu"><li><a href="src/Ouroboros.Network.Client.Wallet.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>&#169; 2020 IOHK</td></tr><tr><th>License</th><td>Apache-2.0</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Ouroboros.Network.Client.Wallet</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">ChainSyncFollowTip</a></li><li><a href="#g:2">ChainSyncWithBlocks</a></li><li><a href="#g:3">LocalTxSubmission</a></li><li><a href="#g:4">LocalStateQuery</a></li><li><a href="#g:5">Helpers</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Ouroboros mini-protocols clients for implementing cardano-wallet. These
 clients implement the logic and lift away concerns related to concrete
 data-type representation so that the code can be re-used / shared between
 Byron and Shelley.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:chainSyncFollowTip">chainSyncFollowTip</a> :: <span class="keyword">forall</span> m block era. <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Monad" title="Distribution.Compat.Prelude.Internal">Monad</a> m =&gt; (block -&gt; era) -&gt; (<a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> era -&gt; <a href="../../ouroboros-consensus/html/Ouroboros-Consensus-MiniProtocol-ChainSync-Server.html#t:Tip" title="Ouroboros.Consensus.MiniProtocol.ChainSync.Server">Tip</a> block -&gt; m ()) -&gt; <a href="../../cardano-api/html/Cardano-Api-ChainSync-Client.html#t:ChainSyncClient" title="Cardano.Api.ChainSync.Client">ChainSyncClient</a> block (<a href="../../ouroboros-consensus/html/Ouroboros-Consensus-Block-Abstract.html#t:Point" title="Ouroboros.Consensus.Block.Abstract">Point</a> block) (<a href="../../ouroboros-consensus/html/Ouroboros-Consensus-MiniProtocol-ChainSync-Server.html#t:Tip" title="Ouroboros.Consensus.MiniProtocol.ChainSync.Server">Tip</a> block) m <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Void.html#t:Void" title="Data.Void">Void</a></li><li class="src short"><a href="#v:chainSyncWithBlocks">chainSyncWithBlocks</a> :: <span class="keyword">forall</span> m block. (<a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Monad" title="Distribution.Compat.Prelude.Internal">Monad</a> m, <a href="../../io-classes/html/Control-Monad-Class-MonadSTM.html#t:MonadSTM" title="Control.Monad.Class.MonadSTM">MonadSTM</a> m, <a href="../../io-classes/html/Control-Monad-Class-MonadThrow.html#t:MonadThrow" title="Control.Monad.Class.MonadThrow">MonadThrow</a> m, <a href="../../ouroboros-consensus/html/Ouroboros-Consensus-Block-Abstract.html#t:HasHeader" title="Ouroboros.Consensus.Block.Abstract">HasHeader</a> block) =&gt; <a href="../../contra-tracer/html/Control-Tracer.html#t:Tracer" title="Control.Tracer">Tracer</a> m (<a href="Cardano-Wallet-Network.html#t:ChainSyncLog" title="Cardano.Wallet.Network">ChainSyncLog</a> block (<a href="../../ouroboros-consensus/html/Ouroboros-Consensus-Block-Abstract.html#t:Point" title="Ouroboros.Consensus.Block.Abstract">Point</a> block)) -&gt; <a href="Ouroboros-Network-Client-Wallet.html#t:PipeliningStrategy" title="Ouroboros.Network.Client.Wallet">PipeliningStrategy</a> block -&gt; <a href="Cardano-Wallet-Network.html#t:ChainFollower" title="Cardano.Wallet.Network">ChainFollower</a> m (<a href="../../ouroboros-consensus/html/Ouroboros-Consensus-Block-Abstract.html#t:Point" title="Ouroboros.Consensus.Block.Abstract">Point</a> block) (<a href="../../ouroboros-consensus/html/Ouroboros-Consensus-MiniProtocol-ChainSync-Server.html#t:Tip" title="Ouroboros.Consensus.MiniProtocol.ChainSync.Server">Tip</a> block) (<a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:NonEmpty" title="Distribution.Compat.Prelude.Internal">NonEmpty</a> block) -&gt; <a href="../../cardano-api/html/Cardano-Api-ChainSync-ClientPipelined.html#t:ChainSyncClientPipelined" title="Cardano.Api.ChainSync.ClientPipelined">ChainSyncClientPipelined</a> block (<a href="../../ouroboros-consensus/html/Ouroboros-Consensus-Block-Abstract.html#t:Point" title="Ouroboros.Consensus.Block.Abstract">Point</a> block) (<a href="../../ouroboros-consensus/html/Ouroboros-Consensus-MiniProtocol-ChainSync-Server.html#t:Tip" title="Ouroboros.Consensus.MiniProtocol.ChainSync.Server">Tip</a> block) m <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Void.html#t:Void" title="Data.Void">Void</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:PipeliningStrategy">PipeliningStrategy</a> block = <a href="#v:PipeliningStrategy">PipeliningStrategy</a> {<ul class="subs"><li><a href="#v:getPipeliningSize">getPipeliningSize</a> :: block -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Natural.html#t:Natural" title="GHC.Natural">Natural</a></li><li><a href="#v:pipeliningStrategyName">pipeliningStrategyName</a> :: <a href="../../cardano-prelude/html/Cardano-Prelude.html#t:Text" title="Cardano.Prelude">Text</a></li></ul>}</li><li class="src short"><a href="#v:thousandPipeliningStrategy">thousandPipeliningStrategy</a> :: <a href="Ouroboros-Network-Client-Wallet.html#t:PipeliningStrategy" title="Ouroboros.Network.Client.Wallet">PipeliningStrategy</a> block</li><li class="src short"><a href="#v:tunedForMainnetPipeliningStrategy">tunedForMainnetPipeliningStrategy</a> :: <a href="../../ouroboros-consensus/html/Ouroboros-Consensus-Block-Abstract.html#t:HasHeader" title="Ouroboros.Consensus.Block.Abstract">HasHeader</a> block =&gt; <a href="Ouroboros-Network-Client-Wallet.html#t:PipeliningStrategy" title="Ouroboros.Network.Client.Wallet">PipeliningStrategy</a> block</li><li class="src short"><span class="keyword">data</span> <a href="#t:LocalTxSubmissionCmd">LocalTxSubmissionCmd</a> tx err (m :: <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) = <a href="#v:CmdSubmitTx">CmdSubmitTx</a> tx (<a href="../../ouroboros-network/html/Ouroboros-Network-Protocol-LocalTxSubmission-Type.html#t:SubmitResult" title="Ouroboros.Network.Protocol.LocalTxSubmission.Type">SubmitResult</a> err -&gt; m ())</li><li class="src short"><a href="#v:localTxSubmission">localTxSubmission</a> :: <span class="keyword">forall</span> m tx err. (<a href="../../io-classes/html/Control-Monad-Class-MonadThrow.html#t:MonadThrow" title="Control.Monad.Class.MonadThrow">MonadThrow</a> m, <a href="../../io-classes/html/Control-Monad-Class-MonadSTM.html#t:MonadSTM" title="Control.Monad.Class.MonadSTM">MonadSTM</a> m) =&gt; <a href="../../io-classes/html/Control-Monad-Class-MonadSTM.html#t:TQueue" title="Control.Monad.Class.MonadSTM">TQueue</a> m (<a href="Ouroboros-Network-Client-Wallet.html#t:LocalTxSubmissionCmd" title="Ouroboros.Network.Client.Wallet">LocalTxSubmissionCmd</a> tx err m) -&gt; <a href="../../cardano-api/html/Cardano-Api.html#t:LocalTxSubmissionClient" title="Cardano.Api">LocalTxSubmissionClient</a> tx err m ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:LSQ">LSQ</a> block (m :: <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) a <span class="keyword">where</span><ul class="subs"><li><a href="#v:LSQPure">LSQPure</a> :: a -&gt; <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m a</li><li><a href="#v:LSQBind">LSQBind</a> :: <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m a -&gt; (a -&gt; <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m b) -&gt; <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m b</li><li><a href="#v:LSQry">LSQry</a> :: <a href="../../ouroboros-consensus/html/Ouroboros-Consensus-Ledger-Query.html#t:BlockQuery" title="Ouroboros.Consensus.Ledger.Query">BlockQuery</a> block res -&gt; <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m res</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:LocalStateQueryCmd">LocalStateQueryCmd</a> block m = <span class="keyword">forall</span> a. <a href="#v:SomeLSQ">SomeLSQ</a> (<a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m a) (a -&gt; m ())</li><li class="src short"><a href="#v:localStateQuery">localStateQuery</a> :: <span class="keyword">forall</span> m block. (<a href="../../ghc/html/libraries/base-4.14.3.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../../io-classes/html/Control-Monad-Class-MonadSTM.html#t:MonadSTM" title="Control.Monad.Class.MonadSTM">MonadSTM</a> m) =&gt; <a href="../../io-classes/html/Control-Monad-Class-MonadSTM.html#t:TQueue" title="Control.Monad.Class.MonadSTM">TQueue</a> m (<a href="Ouroboros-Network-Client-Wallet.html#t:LocalStateQueryCmd" title="Ouroboros.Network.Client.Wallet">LocalStateQueryCmd</a> block m) -&gt; <a href="../../cardano-api/html/Cardano-Api.html#t:LocalStateQueryClient" title="Cardano.Api">LocalStateQueryClient</a> block (<a href="../../ouroboros-consensus/html/Ouroboros-Consensus-Block-Abstract.html#t:Point" title="Ouroboros.Consensus.Block.Abstract">Point</a> block) (<a href="../../ouroboros-consensus/html/Ouroboros-Consensus-Ledger-Query.html#t:Query" title="Ouroboros.Consensus.Ledger.Query">Query</a> block) m <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Void.html#t:Void" title="Data.Void">Void</a></li><li class="src short"><a href="#v:send">send</a> :: <a href="../../io-classes/html/Control-Monad-Class-MonadSTM.html#t:MonadSTM" title="Control.Monad.Class.MonadSTM">MonadSTM</a> m =&gt; <a href="../../io-classes/html/Control-Monad-Class-MonadSTM.html#t:TQueue" title="Control.Monad.Class.MonadSTM">TQueue</a> m (cmd m) -&gt; ((a -&gt; m ()) -&gt; cmd m) -&gt; m a</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>ChainSyncFollowTip</h1></a><div class="top"><p class="src"><a id="v:chainSyncFollowTip" class="def">chainSyncFollowTip</a> <a href="src/Ouroboros.Network.Client.Wallet.html#chainSyncFollowTip" class="link">Source</a> <a href="#v:chainSyncFollowTip" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <span class="keyword">forall</span> m block era. <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Monad" title="Distribution.Compat.Prelude.Internal">Monad</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; (block -&gt; era)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; (<a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> era -&gt; <a href="../../ouroboros-consensus/html/Ouroboros-Consensus-MiniProtocol-ChainSync-Server.html#t:Tip" title="Ouroboros.Consensus.MiniProtocol.ChainSync.Server">Tip</a> block -&gt; m ())</td><td class="doc"><p>Callback for when the tip changes.</p></td></tr><tr><td class="src">-&gt; <a href="../../cardano-api/html/Cardano-Api-ChainSync-Client.html#t:ChainSyncClient" title="Cardano.Api.ChainSync.Client">ChainSyncClient</a> block (<a href="../../ouroboros-consensus/html/Ouroboros-Consensus-Block-Abstract.html#t:Point" title="Ouroboros.Consensus.Block.Abstract">Point</a> block) (<a href="../../ouroboros-consensus/html/Ouroboros-Consensus-MiniProtocol-ChainSync-Server.html#t:Tip" title="Ouroboros.Consensus.MiniProtocol.ChainSync.Server">Tip</a> block) m <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Void.html#t:Void" title="Data.Void">Void</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Client for the 'Chain Sync' mini-protocol, which provides notifications
 when the node tip changes.</p><p>This is used in the same way as <code><a href="Ouroboros-Network-Client-Wallet.html#v:chainSyncWithBlocks" title="Ouroboros.Network.Client.Wallet">chainSyncWithBlocks</a></code>, except that only one
 of these clients is necessary, rather than one client per wallet.</p></div></div><a href="#g:2" id="g:2"><h1>ChainSyncWithBlocks</h1></a><div class="top"><p class="src"><a id="v:chainSyncWithBlocks" class="def">chainSyncWithBlocks</a> :: <span class="keyword">forall</span> m block. (<a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Monad" title="Distribution.Compat.Prelude.Internal">Monad</a> m, <a href="../../io-classes/html/Control-Monad-Class-MonadSTM.html#t:MonadSTM" title="Control.Monad.Class.MonadSTM">MonadSTM</a> m, <a href="../../io-classes/html/Control-Monad-Class-MonadThrow.html#t:MonadThrow" title="Control.Monad.Class.MonadThrow">MonadThrow</a> m, <a href="../../ouroboros-consensus/html/Ouroboros-Consensus-Block-Abstract.html#t:HasHeader" title="Ouroboros.Consensus.Block.Abstract">HasHeader</a> block) =&gt; <a href="../../contra-tracer/html/Control-Tracer.html#t:Tracer" title="Control.Tracer">Tracer</a> m (<a href="Cardano-Wallet-Network.html#t:ChainSyncLog" title="Cardano.Wallet.Network">ChainSyncLog</a> block (<a href="../../ouroboros-consensus/html/Ouroboros-Consensus-Block-Abstract.html#t:Point" title="Ouroboros.Consensus.Block.Abstract">Point</a> block)) -&gt; <a href="Ouroboros-Network-Client-Wallet.html#t:PipeliningStrategy" title="Ouroboros.Network.Client.Wallet">PipeliningStrategy</a> block -&gt; <a href="Cardano-Wallet-Network.html#t:ChainFollower" title="Cardano.Wallet.Network">ChainFollower</a> m (<a href="../../ouroboros-consensus/html/Ouroboros-Consensus-Block-Abstract.html#t:Point" title="Ouroboros.Consensus.Block.Abstract">Point</a> block) (<a href="../../ouroboros-consensus/html/Ouroboros-Consensus-MiniProtocol-ChainSync-Server.html#t:Tip" title="Ouroboros.Consensus.MiniProtocol.ChainSync.Server">Tip</a> block) (<a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:NonEmpty" title="Distribution.Compat.Prelude.Internal">NonEmpty</a> block) -&gt; <a href="../../cardano-api/html/Cardano-Api-ChainSync-ClientPipelined.html#t:ChainSyncClientPipelined" title="Cardano.Api.ChainSync.ClientPipelined">ChainSyncClientPipelined</a> block (<a href="../../ouroboros-consensus/html/Ouroboros-Consensus-Block-Abstract.html#t:Point" title="Ouroboros.Consensus.Block.Abstract">Point</a> block) (<a href="../../ouroboros-consensus/html/Ouroboros-Consensus-MiniProtocol-ChainSync-Server.html#t:Tip" title="Ouroboros.Consensus.MiniProtocol.ChainSync.Server">Tip</a> block) m <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Void.html#t:Void" title="Data.Void">Void</a> <a href="src/Ouroboros.Network.Client.Wallet.html#chainSyncWithBlocks" class="link">Source</a> <a href="#v:chainSyncWithBlocks" class="selflink">#</a></p><div class="doc"><p>Client for the 'Chain Sync' mini-protocol.</p><p>Once started, the client simply runs ad-infinitum but one may
 interact with it via a <code><a href="../../io-classes/html/Control-Monad-Class-MonadSTM.html#t:TQueue" title="Control.Monad.Class.MonadSTM">TQueue</a></code> of commands / messages used to move inside
 the state-machine.</p><p>In a typical usage, <code><a href="Ouroboros-Network-Client-Wallet.html#v:chainSyncWithBlocks" title="Ouroboros.Network.Client.Wallet">chainSyncWithBlocks</a></code> would be executed in a forked
 thread and given a <code><a href="../../io-classes/html/Control-Monad-Class-MonadSTM.html#t:TQueue" title="Control.Monad.Class.MonadSTM">TQueue</a></code> over which the parent thread as control.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>forkIO $ void $ chainSyncWithBlocks tr queue channel
</code></strong>()
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>writeTQueue queue ...
</code></strong></pre><p>Agency
     -------------------------------------------------------------------------
     Client has agency*                | Idle
     Server has agency*                | Intersect, Next</p><ul><li>A peer has agency if it is expected to send the next message.</li><li>-----------*
      | Intersect |&#9664;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9559;</li><li>-----------*         FindIntersect         &#9553;
            &#9474;                                     &#9553;
            &#9474;                                *---------*              *------*
            &#9474; Intersect.{Found,NotFound}     |         |&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9654;| Done |
            &#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9596;|         |   MsgDone    *------*
                                             |   Idle  |
         &#9556;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;|         |
         &#9553;            RequestNext            |         |&#8678; START
         &#9553;                                   *---------*
         &#9660;                                        &#9599;</li><li>------*       Roll.{Backward,Forward}      &#9474;
      | Next |&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;</li><li>------*</li></ul></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:PipeliningStrategy" class="def">PipeliningStrategy</a> block <a href="src/Ouroboros.Network.Client.Wallet.html#PipeliningStrategy" class="link">Source</a> <a href="#t:PipeliningStrategy" class="selflink">#</a></p><div class="doc"><p>How to drive pipelining size from the block height</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:PipeliningStrategy" class="def">PipeliningStrategy</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:getPipeliningSize" class="def">getPipeliningSize</a> :: block -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Natural.html#t:Natural" title="GHC.Natural">Natural</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:pipeliningStrategyName" class="def">pipeliningStrategyName</a> :: <a href="../../cardano-prelude/html/Cardano-Prelude.html#t:Text" title="Cardano.Prelude">Text</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:PipeliningStrategy">Instances</h4><details id="i:PipeliningStrategy" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:PipeliningStrategy:Show:1"></span> <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Show" title="Distribution.Compat.Prelude.Internal">Show</a> (<a href="Ouroboros-Network-Client-Wallet.html#t:PipeliningStrategy" title="Ouroboros.Network.Client.Wallet">PipeliningStrategy</a> block)</span> <a href="src/Ouroboros.Network.Client.Wallet.html#line-244" class="link">Source</a> <a href="#t:PipeliningStrategy" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:PipeliningStrategy:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Network-Client-Wallet.html">Ouroboros.Network.Client.Wallet</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Int" title="Distribution.Compat.Prelude.Internal">Int</a> -&gt; <a href="Ouroboros-Network-Client-Wallet.html#t:PipeliningStrategy" title="Ouroboros.Network.Client.Wallet">PipeliningStrategy</a> block -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:ShowS" title="Distribution.Compat.Prelude.Internal">ShowS</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Ouroboros-Network-Client-Wallet.html#t:PipeliningStrategy" title="Ouroboros.Network.Client.Wallet">PipeliningStrategy</a> block -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:String" title="Distribution.Compat.Prelude.Internal">String</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Ouroboros-Network-Client-Wallet.html#t:PipeliningStrategy" title="Ouroboros.Network.Client.Wallet">PipeliningStrategy</a> block] -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:ShowS" title="Distribution.Compat.Prelude.Internal">ShowS</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:thousandPipeliningStrategy" class="def">thousandPipeliningStrategy</a> :: <a href="Ouroboros-Network-Client-Wallet.html#t:PipeliningStrategy" title="Ouroboros.Network.Client.Wallet">PipeliningStrategy</a> block <a href="src/Ouroboros.Network.Client.Wallet.html#thousandPipeliningStrategy" class="link">Source</a> <a href="#v:thousandPipeliningStrategy" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:tunedForMainnetPipeliningStrategy" class="def">tunedForMainnetPipeliningStrategy</a> :: <a href="../../ouroboros-consensus/html/Ouroboros-Consensus-Block-Abstract.html#t:HasHeader" title="Ouroboros.Consensus.Block.Abstract">HasHeader</a> block =&gt; <a href="Ouroboros-Network-Client-Wallet.html#t:PipeliningStrategy" title="Ouroboros.Network.Client.Wallet">PipeliningStrategy</a> block <a href="src/Ouroboros.Network.Client.Wallet.html#tunedForMainnetPipeliningStrategy" class="link">Source</a> <a href="#v:tunedForMainnetPipeliningStrategy" class="selflink">#</a></p></div><a href="#g:3" id="g:3"><h1>LocalTxSubmission</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:LocalTxSubmissionCmd" class="def">LocalTxSubmissionCmd</a> tx err (m :: <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) <a href="src/Ouroboros.Network.Client.Wallet.html#LocalTxSubmissionCmd" class="link">Source</a> <a href="#t:LocalTxSubmissionCmd" class="selflink">#</a></p><div class="doc"><p>Type of commands that are stored in a queue for localTxSubmission.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:CmdSubmitTx" class="def">CmdSubmitTx</a> tx (<a href="../../ouroboros-network/html/Ouroboros-Network-Protocol-LocalTxSubmission-Type.html#t:SubmitResult" title="Ouroboros.Network.Protocol.LocalTxSubmission.Type">SubmitResult</a> err -&gt; m ())</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a id="v:localTxSubmission" class="def">localTxSubmission</a> <a href="src/Ouroboros.Network.Client.Wallet.html#localTxSubmission" class="link">Source</a> <a href="#v:localTxSubmission" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <span class="keyword">forall</span> m tx err. (<a href="../../io-classes/html/Control-Monad-Class-MonadThrow.html#t:MonadThrow" title="Control.Monad.Class.MonadThrow">MonadThrow</a> m, <a href="../../io-classes/html/Control-Monad-Class-MonadSTM.html#t:MonadSTM" title="Control.Monad.Class.MonadSTM">MonadSTM</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="../../io-classes/html/Control-Monad-Class-MonadSTM.html#t:TQueue" title="Control.Monad.Class.MonadSTM">TQueue</a> m (<a href="Ouroboros-Network-Client-Wallet.html#t:LocalTxSubmissionCmd" title="Ouroboros.Network.Client.Wallet">LocalTxSubmissionCmd</a> tx err m)</td><td class="doc"><p>We use a <code><a href="../../io-classes/html/Control-Monad-Class-MonadSTM.html#t:TQueue" title="Control.Monad.Class.MonadSTM">TQueue</a></code> as a communication channel to drive queries from
 outside of the network client to the client itself.
 Requests are pushed to the queue which are then transformed into
 messages to keep the state-machine moving.</p></td></tr><tr><td class="src">-&gt; <a href="../../cardano-api/html/Cardano-Api.html#t:LocalTxSubmissionClient" title="Cardano.Api">LocalTxSubmissionClient</a> tx err m ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Client for the 'Local Tx Submission' mini-protocol.</p><p>Agency
     -------------------------------------------------------------------------
     Client has agency*                | Idle
     Server has agency*                | Busy
     * A peer has agency if it is expected to send the next message.</p><ul><li>-----------*
      |    Busy   |&#9664;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9559;</li><li>-----------*            SubmitTx           &#9553;
         &#9474;     &#9474;                                  &#9553;
         &#9474;     &#9474;                             *---------*              *------*
         &#9474;     &#9474;        AcceptTx             |         |&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9654;| Done |
         &#9474;     &#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9596;|         |   MsgDone    *------*
         &#9474;              RejectTx             |   Idle  |
         &#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9596;|         |
                                             |         |&#8678; START</li><li>---------*</li></ul></div></div><a href="#g:4" id="g:4"><h1>LocalStateQuery</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:LSQ" class="def">LSQ</a> block (m :: <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) a <span class="keyword">where</span> <a href="src/Ouroboros.Network.Client.Wallet.html#LSQ" class="link">Source</a> <a href="#t:LSQ" class="selflink">#</a></p><div class="doc"><p>Monad for composing local state queries for the node <em>tip</em>.</p><p><em>Warning</em>: Partial functions inside the <code>LSQ</code> monad may cause the entire
 wallet to crash when interpreted by <code>localStateQuery</code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:LSQPure" class="def">LSQPure</a> :: a -&gt; <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m a</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:LSQBind" class="def">LSQBind</a> :: <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m a -&gt; (a -&gt; <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m b) -&gt; <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m b</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:LSQry" class="def">LSQry</a> :: <a href="../../ouroboros-consensus/html/Ouroboros-Consensus-Ledger-Query.html#t:BlockQuery" title="Ouroboros.Consensus.Ledger.Query">BlockQuery</a> block res -&gt; <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m res</td><td class="doc"><p>A local state query.</p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:LSQ">Instances</h4><details id="i:LSQ" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LSQ:Monad:1"></span> <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Monad" title="Distribution.Compat.Prelude.Internal">Monad</a> (<a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m)</span> <a href="src/Ouroboros.Network.Client.Wallet.html#line-654" class="link">Source</a> <a href="#t:LSQ" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:LSQ:Monad:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Network-Client-Wallet.html">Ouroboros.Network.Client.Wallet</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-62--62--61-">(&gt;&gt;=)</a> :: <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m a -&gt; (a -&gt; <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m b) -&gt; <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m b <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:-62--62--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62--62-">(&gt;&gt;)</a> :: <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m a -&gt; <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m b -&gt; <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m b <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:-62--62-" class="selflink">#</a></p><p class="src"><a href="#v:return">return</a> :: a -&gt; <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m a <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:return" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LSQ:Functor:2"></span> <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Functor" title="Distribution.Compat.Prelude.Internal">Functor</a> (<a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m)</span> <a href="src/Ouroboros.Network.Client.Wallet.html#line-647" class="link">Source</a> <a href="#t:LSQ" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:LSQ:Functor:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Network-Client-Wallet.html">Ouroboros.Network.Client.Wallet</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m a -&gt; <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m b <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m b -&gt; <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m a <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LSQ:Applicative:3"></span> <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Applicative" title="Distribution.Compat.Prelude.Internal">Applicative</a> (<a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m)</span> <a href="src/Ouroboros.Network.Client.Wallet.html#line-650" class="link">Source</a> <a href="#t:LSQ" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:LSQ:Applicative:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Network-Client-Wallet.html">Ouroboros.Network.Client.Wallet</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a -&gt; <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m a <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:pure" class="selflink">#</a></p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m (a -&gt; b) -&gt; <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m a -&gt; <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m b <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:-60--42--62-" class="selflink">#</a></p><p class="src"><a href="#v:liftA2">liftA2</a> :: (a -&gt; b -&gt; c) -&gt; <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m a -&gt; <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m b -&gt; <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m c <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:liftA2" class="selflink">#</a></p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m a -&gt; <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m b -&gt; <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m b <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:-42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m a -&gt; <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m b -&gt; <a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m a <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:-60--42-" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:LocalStateQueryCmd" class="def">LocalStateQueryCmd</a> block m <a href="src/Ouroboros.Network.Client.Wallet.html#LocalStateQueryCmd" class="link">Source</a> <a href="#t:LocalStateQueryCmd" class="selflink">#</a></p><div class="doc"><p>Type of commands that are stored in a queue for local state queries.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><span class="keyword">forall</span> a. <a id="v:SomeLSQ" class="def">SomeLSQ</a> (<a href="Ouroboros-Network-Client-Wallet.html#t:LSQ" title="Ouroboros.Network.Client.Wallet">LSQ</a> block m a) (a -&gt; m ())</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a id="v:localStateQuery" class="def">localStateQuery</a> <a href="src/Ouroboros.Network.Client.Wallet.html#localStateQuery" class="link">Source</a> <a href="#v:localStateQuery" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <span class="keyword">forall</span> m block. (<a href="../../ghc/html/libraries/base-4.14.3.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../../io-classes/html/Control-Monad-Class-MonadSTM.html#t:MonadSTM" title="Control.Monad.Class.MonadSTM">MonadSTM</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="../../io-classes/html/Control-Monad-Class-MonadSTM.html#t:TQueue" title="Control.Monad.Class.MonadSTM">TQueue</a> m (<a href="Ouroboros-Network-Client-Wallet.html#t:LocalStateQueryCmd" title="Ouroboros.Network.Client.Wallet">LocalStateQueryCmd</a> block m)</td><td class="doc"><p>We use a <code><a href="../../io-classes/html/Control-Monad-Class-MonadSTM.html#t:TQueue" title="Control.Monad.Class.MonadSTM">TQueue</a></code> as a communication channel to drive queries from
 outside of the network client to the client itself.
 Requests are pushed to the queue which are then transformed into
 messages to keep the state-machine moving.</p></td></tr><tr><td class="src">-&gt; <a href="../../cardano-api/html/Cardano-Api.html#t:LocalStateQueryClient" title="Cardano.Api">LocalStateQueryClient</a> block (<a href="../../ouroboros-consensus/html/Ouroboros-Consensus-Block-Abstract.html#t:Point" title="Ouroboros.Consensus.Block.Abstract">Point</a> block) (<a href="../../ouroboros-consensus/html/Ouroboros-Consensus-Ledger-Query.html#t:Query" title="Ouroboros.Consensus.Ledger.Query">Query</a> block) m <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Void.html#t:Void" title="Data.Void">Void</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Client for the 'Local State Query' mini-protocol.</p><p>Agency
     -------------------------------------------------------------------------
     Client has agency*                | Idle, Acquired
     Server has agency*                | Acquiring, Querying
     * A peer has agency if it is expected to send the next message.</p><p>&#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9488;    Done      &#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9488;
        &#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9654;&#9474;     Idle      &#9500;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9654;&#9474;   Done   &#9474;
        &#9474;       &#9492;&#9472;&#9472;&#9472;&#9516;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;              &#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;
        &#9474;           &#9474;       &#9650;
        &#9474;   Acquire &#9474;       &#9474;
        &#9474;           &#9474;       &#9474; Failure
        &#9474;           &#9660;       &#9474;
        &#9474;       &#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9524;&#9472;&#9472;&#9472;&#9488;
        &#9474;       &#9474;   Acquiring   &#9474;
        &#9474;       &#9492;&#9472;&#9472;&#9472;&#9516;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;
 Release&#9474;           &#9474;       &#9650;
        &#9474;           &#9474;       &#9474;
        &#9474;  Acquired &#9474;       &#9474; ReAcquire
        &#9474;           &#9474;       &#9474;
        &#9474;           &#9660;       &#9474;
        &#9474;       &#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9524;&#9472;&#9472;&#9472;&#9488;   Query     &#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9488;
        &#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9508;   Acquired    &#9500;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9654;&#9474; Querying &#9474;
                &#9474;               &#9474;&#9664;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9508;          &#9474;
                &#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;     Result  &#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;</p></div></div><a href="#g:5" id="g:5"><h1>Helpers</h1></a><div class="top"><p class="src"><a id="v:send" class="def">send</a> :: <a href="../../io-classes/html/Control-Monad-Class-MonadSTM.html#t:MonadSTM" title="Control.Monad.Class.MonadSTM">MonadSTM</a> m =&gt; <a href="../../io-classes/html/Control-Monad-Class-MonadSTM.html#t:TQueue" title="Control.Monad.Class.MonadSTM">TQueue</a> m (cmd m) -&gt; ((a -&gt; m ()) -&gt; cmd m) -&gt; m a <a href="src/Ouroboros.Network.Client.Wallet.html#send" class="link">Source</a> <a href="#v:send" class="selflink">#</a></p><div class="doc"><p>Helper function to send commands to the node via a <code><a href="../../io-classes/html/Control-Monad-Class-MonadSTM.html#t:TQueue" title="Control.Monad.Class.MonadSTM">TQueue</a></code>
 and receive results.</p><p>One of the main purposes of this functions is to handle an existentially
 quantified type.
 In typical use, the <code>cmd m</code> involves existential quantification over
 the type <code>a</code>, so that the <code><a href="../../io-classes/html/Control-Monad-Class-MonadSTM.html#t:TQueue" title="Control.Monad.Class.MonadSTM">TQueue</a></code> has elements with a monomorphic type.
 However, the type signature of <code><a href="Ouroboros-Network-Client-Wallet.html#v:send" title="Ouroboros.Network.Client.Wallet">send</a></code> allows us to retrieve this particular
 type <code>a</code> for later use again.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.2</p></div></body></html>