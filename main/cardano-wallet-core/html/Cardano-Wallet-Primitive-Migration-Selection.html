<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Cardano.Wallet.Primitive.Migration.Selection</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">cardano-wallet-core-2022.7.1: The Wallet Backend for a Cardano node.</span><ul class="links" id="page-menu"><li><a href="src/Cardano.Wallet.Primitive.Migration.Selection.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>&#169; 2021 IOHK</td></tr><tr><th>License</th><td>Apache-2.0</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Cardano.Wallet.Primitive.Migration.Selection</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Types</a></li><li><a href="#g:2">Creating selections</a></li><li><a href="#g:3">Extending selections</a></li><li><a href="#g:4">Balancing selections</a></li><li><a href="#g:5">Adding value to outputs</a></li><li><a href="#g:6">Minimizing fees</a></li><li><a href="#g:7">Computing bulk properties of selections</a></li><li><a href="#g:8">Verifying selections for correctness</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module contains functions for incrementally constructing a selection
 to be included in a migration plan.</p><p>A selection is the basis for a single transaction.</p><p>Use <code><a href="Cardano-Wallet-Primitive-Migration-Selection.html#v:create" title="Cardano.Wallet.Primitive.Migration.Selection">create</a></code> to create a selection with one or more inputs.
 Use <code><a href="Cardano-Wallet-Primitive-Migration-Selection.html#v:extend" title="Cardano.Wallet.Primitive.Migration.Selection">extend</a></code> to extend a selection with an additional input.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Selection">Selection</a> input = <a href="#v:Selection">Selection</a> {<ul class="subs"><li><a href="#v:inputIds">inputIds</a> :: !(<a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:NonEmpty" title="Distribution.Compat.Prelude.Internal">NonEmpty</a> input)</li><li><a href="#v:inputBalance">inputBalance</a> :: !<a href="Cardano-Wallet-Primitive-Types-TokenBundle.html#t:TokenBundle" title="Cardano.Wallet.Primitive.Types.TokenBundle">TokenBundle</a></li><li><a href="#v:outputs">outputs</a> :: !(<a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:NonEmpty" title="Distribution.Compat.Prelude.Internal">NonEmpty</a> <a href="Cardano-Wallet-Primitive-Types-TokenBundle.html#t:TokenBundle" title="Cardano.Wallet.Primitive.Types.TokenBundle">TokenBundle</a>)</li><li><a href="#v:fee">fee</a> :: !<a href="Cardano-Wallet-Primitive-Types-Coin.html#t:Coin" title="Cardano.Wallet.Primitive.Types.Coin">Coin</a></li><li><a href="#v:feeExcess">feeExcess</a> :: !<a href="Cardano-Wallet-Primitive-Types-Coin.html#t:Coin" title="Cardano.Wallet.Primitive.Types.Coin">Coin</a></li><li><a href="#v:size">size</a> :: !<a href="Cardano-Wallet-Primitive-Types-Tx.html#t:TxSize" title="Cardano.Wallet.Primitive.Types.Tx">TxSize</a></li><li><a href="#v:rewardWithdrawal">rewardWithdrawal</a> :: !<a href="Cardano-Wallet-Primitive-Types-Coin.html#t:Coin" title="Cardano.Wallet.Primitive.Types.Coin">Coin</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:SelectionError">SelectionError</a><ul class="subs"><li>= <a href="#v:SelectionAdaInsufficient">SelectionAdaInsufficient</a></li><li>| <a href="#v:SelectionFull">SelectionFull</a> <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionFullError" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionFullError</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:SelectionFullError">SelectionFullError</a> = <a href="#v:SelectionFullError">SelectionFullError</a> {<ul class="subs"><li><a href="#v:selectionSizeMaximum">selectionSizeMaximum</a> :: <a href="Cardano-Wallet-Primitive-Types-Tx.html#t:TxSize" title="Cardano.Wallet.Primitive.Types.Tx">TxSize</a></li><li><a href="#v:selectionSizeRequired">selectionSizeRequired</a> :: <a href="Cardano-Wallet-Primitive-Types-Tx.html#t:TxSize" title="Cardano.Wallet.Primitive.Types.Tx">TxSize</a></li></ul>}</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:RewardWithdrawal">RewardWithdrawal</a> = <a href="#v:RewardWithdrawal">RewardWithdrawal</a> {<ul class="subs"><li><a href="#v:unRewardWithdrawal">unRewardWithdrawal</a> :: <a href="Cardano-Wallet-Primitive-Types-Coin.html#t:Coin" title="Cardano.Wallet.Primitive.Types.Coin">Coin</a></li></ul>}</li><li class="src short"><a href="#v:create">create</a> :: <a href="Cardano-Wallet-Primitive-Types-Tx.html#t:TxConstraints" title="Cardano.Wallet.Primitive.Types.Tx">TxConstraints</a> -&gt; <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:RewardWithdrawal" title="Cardano.Wallet.Primitive.Migration.Selection">RewardWithdrawal</a> -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:NonEmpty" title="Distribution.Compat.Prelude.Internal">NonEmpty</a> (input, <a href="Cardano-Wallet-Primitive-Types-TokenBundle.html#t:TokenBundle" title="Cardano.Wallet.Primitive.Types.TokenBundle">TokenBundle</a>) -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Either" title="Distribution.Compat.Prelude.Internal">Either</a> <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionError" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionError</a> (<a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input)</li><li class="src short"><a href="#v:extend">extend</a> :: <a href="Cardano-Wallet-Primitive-Types-Tx.html#t:TxConstraints" title="Cardano.Wallet.Primitive.Types.Tx">TxConstraints</a> -&gt; <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input -&gt; (input, <a href="Cardano-Wallet-Primitive-Types-TokenBundle.html#t:TokenBundle" title="Cardano.Wallet.Primitive.Types.TokenBundle">TokenBundle</a>) -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Either" title="Distribution.Compat.Prelude.Internal">Either</a> <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionError" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionError</a> (<a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input)</li><li class="src short"><a href="#v:balance">balance</a> :: <a href="Cardano-Wallet-Primitive-Types-Tx.html#t:TxConstraints" title="Cardano.Wallet.Primitive.Types.Tx">TxConstraints</a> -&gt; <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Either" title="Distribution.Compat.Prelude.Internal">Either</a> <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionError" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionError</a> (<a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input)</li><li class="src short"><a href="#v:addValueToOutputs">addValueToOutputs</a> :: <a href="Cardano-Wallet-Primitive-Types-Tx.html#t:TxConstraints" title="Cardano.Wallet.Primitive.Types.Tx">TxConstraints</a> -&gt; [<a href="Cardano-Wallet-Primitive-Types-TokenMap.html#t:TokenMap" title="Cardano.Wallet.Primitive.Types.TokenMap">TokenMap</a>] -&gt; <a href="Cardano-Wallet-Primitive-Types-TokenMap.html#t:TokenMap" title="Cardano.Wallet.Primitive.Types.TokenMap">TokenMap</a> -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:NonEmpty" title="Distribution.Compat.Prelude.Internal">NonEmpty</a> <a href="Cardano-Wallet-Primitive-Types-TokenMap.html#t:TokenMap" title="Cardano.Wallet.Primitive.Types.TokenMap">TokenMap</a></li><li class="src short"><a href="#v:minimizeFee">minimizeFee</a> :: <a href="Cardano-Wallet-Primitive-Types-Tx.html#t:TxConstraints" title="Cardano.Wallet.Primitive.Types.Tx">TxConstraints</a> -&gt; (<a href="Cardano-Wallet-Primitive-Types-Coin.html#t:Coin" title="Cardano.Wallet.Primitive.Types.Coin">Coin</a>, <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:NonEmpty" title="Distribution.Compat.Prelude.Internal">NonEmpty</a> <a href="Cardano-Wallet-Primitive-Types-TokenBundle.html#t:TokenBundle" title="Cardano.Wallet.Primitive.Types.TokenBundle">TokenBundle</a>) -&gt; (<a href="Cardano-Wallet-Primitive-Types-Coin.html#t:Coin" title="Cardano.Wallet.Primitive.Types.Coin">Coin</a>, <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:NonEmpty" title="Distribution.Compat.Prelude.Internal">NonEmpty</a> <a href="Cardano-Wallet-Primitive-Types-TokenBundle.html#t:TokenBundle" title="Cardano.Wallet.Primitive.Types.TokenBundle">TokenBundle</a>)</li><li class="src short"><a href="#v:minimizeFeeStep">minimizeFeeStep</a> :: <a href="Cardano-Wallet-Primitive-Types-Tx.html#t:TxConstraints" title="Cardano.Wallet.Primitive.Types.Tx">TxConstraints</a> -&gt; (<a href="Cardano-Wallet-Primitive-Types-Coin.html#t:Coin" title="Cardano.Wallet.Primitive.Types.Coin">Coin</a>, <a href="Cardano-Wallet-Primitive-Types-TokenBundle.html#t:TokenBundle" title="Cardano.Wallet.Primitive.Types.TokenBundle">TokenBundle</a>) -&gt; (<a href="Cardano-Wallet-Primitive-Types-Coin.html#t:Coin" title="Cardano.Wallet.Primitive.Types.Coin">Coin</a>, <a href="Cardano-Wallet-Primitive-Types-TokenBundle.html#t:TokenBundle" title="Cardano.Wallet.Primitive.Types.TokenBundle">TokenBundle</a>)</li><li class="src short"><a href="#v:computeCurrentFee">computeCurrentFee</a> :: <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Either" title="Distribution.Compat.Prelude.Internal">Either</a> NegativeCoin <a href="Cardano-Wallet-Primitive-Types-Coin.html#t:Coin" title="Cardano.Wallet.Primitive.Types.Coin">Coin</a></li><li class="src short"><a href="#v:computeCurrentSize">computeCurrentSize</a> :: <a href="Cardano-Wallet-Primitive-Types-Tx.html#t:TxConstraints" title="Cardano.Wallet.Primitive.Types.Tx">TxConstraints</a> -&gt; <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input -&gt; <a href="Cardano-Wallet-Primitive-Types-Tx.html#t:TxSize" title="Cardano.Wallet.Primitive.Types.Tx">TxSize</a></li><li class="src short"><a href="#v:computeMinimumFee">computeMinimumFee</a> :: <a href="Cardano-Wallet-Primitive-Types-Tx.html#t:TxConstraints" title="Cardano.Wallet.Primitive.Types.Tx">TxConstraints</a> -&gt; <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input -&gt; <a href="Cardano-Wallet-Primitive-Types-Coin.html#t:Coin" title="Cardano.Wallet.Primitive.Types.Coin">Coin</a></li><li class="src short"><a href="#v:verify">verify</a> :: <a href="Cardano-Wallet-Primitive-Types-Tx.html#t:TxConstraints" title="Cardano.Wallet.Primitive.Types.Tx">TxConstraints</a> -&gt; <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input -&gt; <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionCorrectness" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionCorrectness</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:SelectionCorrectness">SelectionCorrectness</a><ul class="subs"><li>= <a href="#v:SelectionCorrect">SelectionCorrect</a></li><li>| <a href="#v:SelectionIncorrect">SelectionIncorrect</a> SelectionCorrectnessError</li></ul></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Types</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Selection" class="def">Selection</a> input <a href="src/Cardano.Wallet.Primitive.Migration.Selection.html#Selection" class="link">Source</a> <a href="#t:Selection" class="selflink">#</a></p><div class="doc"><p>A selection is the basis for a single transaction.</p><p>Use <code><a href="Cardano-Wallet-Primitive-Migration-Selection.html#v:create" title="Cardano.Wallet.Primitive.Migration.Selection">create</a></code> to create a selection with one or more inputs.
 Use <code><a href="Cardano-Wallet-Primitive-Migration-Selection.html#v:extend" title="Cardano.Wallet.Primitive.Migration.Selection">extend</a></code> to extend a selection with an additional input.
 Use <code><a href="Cardano-Wallet-Primitive-Migration-Selection.html#v:verify" title="Cardano.Wallet.Primitive.Migration.Selection">verify</a></code> to verify the correctness of a selection.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Selection" class="def">Selection</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:inputIds" class="def">inputIds</a> :: !(<a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:NonEmpty" title="Distribution.Compat.Prelude.Internal">NonEmpty</a> input)</dfn><div class="doc"><p>The selected inputs.</p></div></li><li><dfn class="src"><a id="v:inputBalance" class="def">inputBalance</a> :: !<a href="Cardano-Wallet-Primitive-Types-TokenBundle.html#t:TokenBundle" title="Cardano.Wallet.Primitive.Types.TokenBundle">TokenBundle</a></dfn><div class="doc"><p>The total balance of value provided by the inputs.</p></div></li><li><dfn class="src"><a id="v:outputs" class="def">outputs</a> :: !(<a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:NonEmpty" title="Distribution.Compat.Prelude.Internal">NonEmpty</a> <a href="Cardano-Wallet-Primitive-Types-TokenBundle.html#t:TokenBundle" title="Cardano.Wallet.Primitive.Types.TokenBundle">TokenBundle</a>)</dfn><div class="doc"><p>The outputs, adjusted to pay for the fee.</p></div></li><li><dfn class="src"><a id="v:fee" class="def">fee</a> :: !<a href="Cardano-Wallet-Primitive-Types-Coin.html#t:Coin" title="Cardano.Wallet.Primitive.Types.Coin">Coin</a></dfn><div class="doc"><p>The actual fee payable for this selection.</p></div></li><li><dfn class="src"><a id="v:feeExcess" class="def">feeExcess</a> :: !<a href="Cardano-Wallet-Primitive-Types-Coin.html#t:Coin" title="Cardano.Wallet.Primitive.Types.Coin">Coin</a></dfn><div class="doc"><p>The excess over the minimum permissible fee for this selection.</p></div></li><li><dfn class="src"><a id="v:size" class="def">size</a> :: !<a href="Cardano-Wallet-Primitive-Types-Tx.html#t:TxSize" title="Cardano.Wallet.Primitive.Types.Tx">TxSize</a></dfn><div class="doc"><p>The size of this selection.</p></div></li><li><dfn class="src"><a id="v:rewardWithdrawal" class="def">rewardWithdrawal</a> :: !<a href="Cardano-Wallet-Primitive-Types-Coin.html#t:Coin" title="Cardano.Wallet.Primitive.Types.Coin">Coin</a></dfn><div class="doc"><p>The reward withdrawal amount, if any.</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Selection">Instances</h4><details id="i:Selection" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Selection:Eq:1"></span> <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Eq" title="Distribution.Compat.Prelude.Internal">Eq</a> input =&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Eq" title="Distribution.Compat.Prelude.Internal">Eq</a> (<a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input)</span> <a href="src/Cardano.Wallet.Primitive.Migration.Selection.html#line-126" class="link">Source</a> <a href="#t:Selection" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Selection:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Wallet-Primitive-Migration-Selection.html">Cardano.Wallet.Primitive.Migration.Selection</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input -&gt; <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a> <a href="../../ghc/html/libraries/ghc-prim-0.6.1/src" class="link">Source</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input -&gt; <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a> <a href="../../ghc/html/libraries/ghc-prim-0.6.1/src" class="link">Source</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Selection:Show:2"></span> <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Show" title="Distribution.Compat.Prelude.Internal">Show</a> input =&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Show" title="Distribution.Compat.Prelude.Internal">Show</a> (<a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input)</span> <a href="src/Cardano.Wallet.Primitive.Migration.Selection.html#line-126" class="link">Source</a> <a href="#t:Selection" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Selection:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Wallet-Primitive-Migration-Selection.html">Cardano.Wallet.Primitive.Migration.Selection</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Int" title="Distribution.Compat.Prelude.Internal">Int</a> -&gt; <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:ShowS" title="Distribution.Compat.Prelude.Internal">ShowS</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:String" title="Distribution.Compat.Prelude.Internal">String</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input] -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:ShowS" title="Distribution.Compat.Prelude.Internal">ShowS</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Selection:Generic:3"></span> <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Generic" title="Distribution.Compat.Prelude.Internal">Generic</a> (<a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input)</span> <a href="src/Cardano.Wallet.Primitive.Migration.Selection.html#line-126" class="link">Source</a> <a href="#t:Selection" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Selection:Generic:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Wallet-Primitive-Migration-Selection.html">Cardano.Wallet.Primitive.Migration.Selection</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input) :: <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#t:Rep" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:from">from</a> :: <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input) x <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:from" class="selflink">#</a></p><p class="src"><a href="#v:to">to</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input) x -&gt; <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:to" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Selection:Rep:4"></span> <span class="keyword">type</span> <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input)</span> <a href="src/Cardano.Wallet.Primitive.Migration.Selection.html#line-126" class="link">Source</a> <a href="#t:Selection" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Selection:Rep:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Wallet-Primitive-Migration-Selection.html">Cardano.Wallet.Primitive.Migration.Selection</a></p> <div class="src"><span class="keyword">type</span> <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input) = <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t:D1" title="GHC.Generics">D1</a> ('<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:MetaData" title="GHC.Generics">MetaData</a> &quot;Selection&quot; &quot;Cardano.Wallet.Primitive.Migration.Selection&quot; &quot;cardano-wallet-core-2022.7.1-KAKkMGOljPka4gkPnYOdj&quot; '<a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#v:False" title="Distribution.Compat.Prelude.Internal">False</a>) (<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t:C1" title="GHC.Generics">C1</a> ('<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:MetaCons" title="GHC.Generics">MetaCons</a> &quot;Selection&quot; '<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:PrefixI" title="GHC.Generics">PrefixI</a> '<a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#v:True" title="Distribution.Compat.Prelude.Internal">True</a>) ((<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> ('<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> ('<a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#v:Just" title="Distribution.Compat.Prelude.Internal">Just</a> &quot;inputIds&quot;) '<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> '<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:SourceStrict" title="GHC.Generics">SourceStrict</a> '<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:DecidedStrict" title="GHC.Generics">DecidedStrict</a>) (<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> (<a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:NonEmpty" title="Distribution.Compat.Prelude.Internal">NonEmpty</a> input)) <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t::-42-:" title="GHC.Generics">:*:</a> (<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> ('<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> ('<a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#v:Just" title="Distribution.Compat.Prelude.Internal">Just</a> &quot;inputBalance&quot;) '<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> '<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:SourceStrict" title="GHC.Generics">SourceStrict</a> '<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:DecidedStrict" title="GHC.Generics">DecidedStrict</a>) (<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> <a href="Cardano-Wallet-Primitive-Types-TokenBundle.html#t:TokenBundle" title="Cardano.Wallet.Primitive.Types.TokenBundle">TokenBundle</a>) <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t::-42-:" title="GHC.Generics">:*:</a> <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> ('<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> ('<a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#v:Just" title="Distribution.Compat.Prelude.Internal">Just</a> &quot;outputs&quot;) '<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> '<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:SourceStrict" title="GHC.Generics">SourceStrict</a> '<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:DecidedStrict" title="GHC.Generics">DecidedStrict</a>) (<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> (<a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:NonEmpty" title="Distribution.Compat.Prelude.Internal">NonEmpty</a> <a href="Cardano-Wallet-Primitive-Types-TokenBundle.html#t:TokenBundle" title="Cardano.Wallet.Primitive.Types.TokenBundle">TokenBundle</a>)))) <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t::-42-:" title="GHC.Generics">:*:</a> ((<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> ('<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> ('<a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#v:Just" title="Distribution.Compat.Prelude.Internal">Just</a> &quot;fee&quot;) '<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> '<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:SourceStrict" title="GHC.Generics">SourceStrict</a> '<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:DecidedStrict" title="GHC.Generics">DecidedStrict</a>) (<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> <a href="Cardano-Wallet-Primitive-Types-Coin.html#t:Coin" title="Cardano.Wallet.Primitive.Types.Coin">Coin</a>) <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t::-42-:" title="GHC.Generics">:*:</a> <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> ('<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> ('<a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#v:Just" title="Distribution.Compat.Prelude.Internal">Just</a> &quot;feeExcess&quot;) '<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> '<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:SourceStrict" title="GHC.Generics">SourceStrict</a> '<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:DecidedStrict" title="GHC.Generics">DecidedStrict</a>) (<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> <a href="Cardano-Wallet-Primitive-Types-Coin.html#t:Coin" title="Cardano.Wallet.Primitive.Types.Coin">Coin</a>)) <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t::-42-:" title="GHC.Generics">:*:</a> (<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> ('<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> ('<a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#v:Just" title="Distribution.Compat.Prelude.Internal">Just</a> &quot;size&quot;) '<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> '<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:SourceStrict" title="GHC.Generics">SourceStrict</a> '<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:DecidedStrict" title="GHC.Generics">DecidedStrict</a>) (<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> <a href="Cardano-Wallet-Primitive-Types-Tx.html#t:TxSize" title="Cardano.Wallet.Primitive.Types.Tx">TxSize</a>) <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t::-42-:" title="GHC.Generics">:*:</a> <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> ('<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> ('<a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#v:Just" title="Distribution.Compat.Prelude.Internal">Just</a> &quot;rewardWithdrawal&quot;) '<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> '<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:SourceStrict" title="GHC.Generics">SourceStrict</a> '<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#v:DecidedStrict" title="GHC.Generics">DecidedStrict</a>) (<a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> <a href="Cardano-Wallet-Primitive-Types-Coin.html#t:Coin" title="Cardano.Wallet.Primitive.Types.Coin">Coin</a>)))))</div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:SelectionError" class="def">SelectionError</a> <a href="src/Cardano.Wallet.Primitive.Migration.Selection.html#SelectionError" class="link">Source</a> <a href="#t:SelectionError" class="selflink">#</a></p><div class="doc"><p>Indicates a failure to create or extend a selection.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:SelectionAdaInsufficient" class="def">SelectionAdaInsufficient</a></td><td class="doc"><p>Indicates that the desired selection would not have enough ada to pay
 for the minimum permissible fee.</p></td></tr><tr><td class="src"><a id="v:SelectionFull" class="def">SelectionFull</a> <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionFullError" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionFullError</a></td><td class="doc"><p>Indicates that the desired selection would exceed the maximum
 selection size.</p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:SelectionError">Instances</h4><details id="i:SelectionError" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:SelectionError:Eq:1"></span> <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Eq" title="Distribution.Compat.Prelude.Internal">Eq</a> <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionError" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionError</a></span> <a href="src/Cardano.Wallet.Primitive.Migration.Selection.html#line-146" class="link">Source</a> <a href="#t:SelectionError" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:SelectionError:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Wallet-Primitive-Migration-Selection.html">Cardano.Wallet.Primitive.Migration.Selection</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionError" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionError</a> -&gt; <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionError" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionError</a> -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a> <a href="../../ghc/html/libraries/ghc-prim-0.6.1/src" class="link">Source</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionError" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionError</a> -&gt; <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionError" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionError</a> -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a> <a href="../../ghc/html/libraries/ghc-prim-0.6.1/src" class="link">Source</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:SelectionError:Show:2"></span> <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Show" title="Distribution.Compat.Prelude.Internal">Show</a> <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionError" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionError</a></span> <a href="src/Cardano.Wallet.Primitive.Migration.Selection.html#line-146" class="link">Source</a> <a href="#t:SelectionError" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:SelectionError:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Wallet-Primitive-Migration-Selection.html">Cardano.Wallet.Primitive.Migration.Selection</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Int" title="Distribution.Compat.Prelude.Internal">Int</a> -&gt; <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionError" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionError</a> -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:ShowS" title="Distribution.Compat.Prelude.Internal">ShowS</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionError" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionError</a> -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:String" title="Distribution.Compat.Prelude.Internal">String</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionError" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionError</a>] -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:ShowS" title="Distribution.Compat.Prelude.Internal">ShowS</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:SelectionFullError" class="def">SelectionFullError</a> <a href="src/Cardano.Wallet.Primitive.Migration.Selection.html#SelectionFullError" class="link">Source</a> <a href="#t:SelectionFullError" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:SelectionFullError" class="def">SelectionFullError</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:selectionSizeMaximum" class="def">selectionSizeMaximum</a> :: <a href="Cardano-Wallet-Primitive-Types-Tx.html#t:TxSize" title="Cardano.Wallet.Primitive.Types.Tx">TxSize</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:selectionSizeRequired" class="def">selectionSizeRequired</a> :: <a href="Cardano-Wallet-Primitive-Types-Tx.html#t:TxSize" title="Cardano.Wallet.Primitive.Types.Tx">TxSize</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:SelectionFullError">Instances</h4><details id="i:SelectionFullError" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:SelectionFullError:Eq:1"></span> <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Eq" title="Distribution.Compat.Prelude.Internal">Eq</a> <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionFullError" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionFullError</a></span> <a href="src/Cardano.Wallet.Primitive.Migration.Selection.html#line-152" class="link">Source</a> <a href="#t:SelectionFullError" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:SelectionFullError:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Wallet-Primitive-Migration-Selection.html">Cardano.Wallet.Primitive.Migration.Selection</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionFullError" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionFullError</a> -&gt; <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionFullError" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionFullError</a> -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a> <a href="../../ghc/html/libraries/ghc-prim-0.6.1/src" class="link">Source</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionFullError" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionFullError</a> -&gt; <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionFullError" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionFullError</a> -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a> <a href="../../ghc/html/libraries/ghc-prim-0.6.1/src" class="link">Source</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:SelectionFullError:Show:2"></span> <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Show" title="Distribution.Compat.Prelude.Internal">Show</a> <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionFullError" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionFullError</a></span> <a href="src/Cardano.Wallet.Primitive.Migration.Selection.html#line-152" class="link">Source</a> <a href="#t:SelectionFullError" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:SelectionFullError:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Wallet-Primitive-Migration-Selection.html">Cardano.Wallet.Primitive.Migration.Selection</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Int" title="Distribution.Compat.Prelude.Internal">Int</a> -&gt; <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionFullError" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionFullError</a> -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:ShowS" title="Distribution.Compat.Prelude.Internal">ShowS</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionFullError" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionFullError</a> -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:String" title="Distribution.Compat.Prelude.Internal">String</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionFullError" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionFullError</a>] -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:ShowS" title="Distribution.Compat.Prelude.Internal">ShowS</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:RewardWithdrawal" class="def">RewardWithdrawal</a> <a href="src/Cardano.Wallet.Primitive.Migration.Selection.html#RewardWithdrawal" class="link">Source</a> <a href="#t:RewardWithdrawal" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:RewardWithdrawal" class="def">RewardWithdrawal</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:unRewardWithdrawal" class="def">unRewardWithdrawal</a> :: <a href="Cardano-Wallet-Primitive-Types-Coin.html#t:Coin" title="Cardano.Wallet.Primitive.Types.Coin">Coin</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:RewardWithdrawal">Instances</h4><details id="i:RewardWithdrawal" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:RewardWithdrawal:Eq:1"></span> <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Eq" title="Distribution.Compat.Prelude.Internal">Eq</a> <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:RewardWithdrawal" title="Cardano.Wallet.Primitive.Migration.Selection">RewardWithdrawal</a></span> <a href="src/Cardano.Wallet.Primitive.Migration.Selection.html#line-130" class="link">Source</a> <a href="#t:RewardWithdrawal" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:RewardWithdrawal:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Wallet-Primitive-Migration-Selection.html">Cardano.Wallet.Primitive.Migration.Selection</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:RewardWithdrawal" title="Cardano.Wallet.Primitive.Migration.Selection">RewardWithdrawal</a> -&gt; <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:RewardWithdrawal" title="Cardano.Wallet.Primitive.Migration.Selection">RewardWithdrawal</a> -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a> <a href="../../ghc/html/libraries/ghc-prim-0.6.1/src" class="link">Source</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:RewardWithdrawal" title="Cardano.Wallet.Primitive.Migration.Selection">RewardWithdrawal</a> -&gt; <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:RewardWithdrawal" title="Cardano.Wallet.Primitive.Migration.Selection">RewardWithdrawal</a> -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a> <a href="../../ghc/html/libraries/ghc-prim-0.6.1/src" class="link">Source</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:RewardWithdrawal:Show:2"></span> <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Show" title="Distribution.Compat.Prelude.Internal">Show</a> <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:RewardWithdrawal" title="Cardano.Wallet.Primitive.Migration.Selection">RewardWithdrawal</a></span> <a href="src/Cardano.Wallet.Primitive.Migration.Selection.html#line-130" class="link">Source</a> <a href="#t:RewardWithdrawal" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:RewardWithdrawal:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Wallet-Primitive-Migration-Selection.html">Cardano.Wallet.Primitive.Migration.Selection</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Int" title="Distribution.Compat.Prelude.Internal">Int</a> -&gt; <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:RewardWithdrawal" title="Cardano.Wallet.Primitive.Migration.Selection">RewardWithdrawal</a> -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:ShowS" title="Distribution.Compat.Prelude.Internal">ShowS</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:RewardWithdrawal" title="Cardano.Wallet.Primitive.Migration.Selection">RewardWithdrawal</a> -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:String" title="Distribution.Compat.Prelude.Internal">String</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:RewardWithdrawal" title="Cardano.Wallet.Primitive.Migration.Selection">RewardWithdrawal</a>] -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:ShowS" title="Distribution.Compat.Prelude.Internal">ShowS</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:2" id="g:2"><h1>Creating selections</h1></a><div class="top"><p class="src"><a id="v:create" class="def">create</a> :: <a href="Cardano-Wallet-Primitive-Types-Tx.html#t:TxConstraints" title="Cardano.Wallet.Primitive.Types.Tx">TxConstraints</a> -&gt; <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:RewardWithdrawal" title="Cardano.Wallet.Primitive.Migration.Selection">RewardWithdrawal</a> -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:NonEmpty" title="Distribution.Compat.Prelude.Internal">NonEmpty</a> (input, <a href="Cardano-Wallet-Primitive-Types-TokenBundle.html#t:TokenBundle" title="Cardano.Wallet.Primitive.Types.TokenBundle">TokenBundle</a>) -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Either" title="Distribution.Compat.Prelude.Internal">Either</a> <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionError" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionError</a> (<a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input) <a href="src/Cardano.Wallet.Primitive.Migration.Selection.html#create" class="link">Source</a> <a href="#v:create" class="selflink">#</a></p><div class="doc"><p>Creates a selection with the given inputs.</p><p>Guarantees the following property for a returned selection <code>s</code>:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>verify s == SelectionCorrect
</code></strong></pre><p>Returns <code><a href="Cardano-Wallet-Primitive-Migration-Selection.html#v:SelectionAdaInsufficient" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionAdaInsufficient</a></code> if the desired selection would not have
 enough ada to pay for the fee.</p><p>Returns <code><a href="Cardano-Wallet-Primitive-Migration-Selection.html#v:SelectionFull" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionFull</a></code> if the desired selection would exceed the maximum
 selection size.</p></div></div><a href="#g:3" id="g:3"><h1>Extending selections</h1></a><div class="top"><p class="src"><a id="v:extend" class="def">extend</a> :: <a href="Cardano-Wallet-Primitive-Types-Tx.html#t:TxConstraints" title="Cardano.Wallet.Primitive.Types.Tx">TxConstraints</a> -&gt; <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input -&gt; (input, <a href="Cardano-Wallet-Primitive-Types-TokenBundle.html#t:TokenBundle" title="Cardano.Wallet.Primitive.Types.TokenBundle">TokenBundle</a>) -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Either" title="Distribution.Compat.Prelude.Internal">Either</a> <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionError" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionError</a> (<a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input) <a href="src/Cardano.Wallet.Primitive.Migration.Selection.html#extend" class="link">Source</a> <a href="#v:extend" class="selflink">#</a></p><div class="doc"><p>Extends a selection with an additional input.</p><p>Guarantees the following property for a returned selection <code>s</code>:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>verify s == SelectionCorrect
</code></strong></pre><p>Returns <code><a href="Cardano-Wallet-Primitive-Migration-Selection.html#v:SelectionAdaInsufficient" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionAdaInsufficient</a></code> if the desired selection would not have
 enough ada to pay for the fee.</p><p>Returns <code><a href="Cardano-Wallet-Primitive-Migration-Selection.html#v:SelectionFull" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionFull</a></code> if the desired selection would exceed the maximum
 selection size.</p></div></div><a href="#g:4" id="g:4"><h1>Balancing selections</h1></a><div class="top"><p class="src"><a id="v:balance" class="def">balance</a> :: <a href="Cardano-Wallet-Primitive-Types-Tx.html#t:TxConstraints" title="Cardano.Wallet.Primitive.Types.Tx">TxConstraints</a> -&gt; <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Either" title="Distribution.Compat.Prelude.Internal">Either</a> <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionError" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionError</a> (<a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input) <a href="src/Cardano.Wallet.Primitive.Migration.Selection.html#balance" class="link">Source</a> <a href="#v:balance" class="selflink">#</a></p><div class="doc"><p>Balances the fee for a given selection.</p><p>The ada quantities of the outputs are maximized in order to minimize the fee
 excess.</p><p>Pre-condition: outputs have minimal ada quantities.</p><p>Guarantees the following property for a returned selection <code>s</code>:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>verify s == SelectionCorrect
</code></strong></pre></div></div><a href="#g:5" id="g:5"><h1>Adding value to outputs</h1></a><div class="top"><p class="src"><a id="v:addValueToOutputs" class="def">addValueToOutputs</a> <a href="src/Cardano.Wallet.Primitive.Migration.Selection.html#addValueToOutputs" class="link">Source</a> <a href="#v:addValueToOutputs" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Cardano-Wallet-Primitive-Types-Tx.html#t:TxConstraints" title="Cardano.Wallet.Primitive.Types.Tx">TxConstraints</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; [<a href="Cardano-Wallet-Primitive-Types-TokenMap.html#t:TokenMap" title="Cardano.Wallet.Primitive.Types.TokenMap">TokenMap</a>]</td><td class="doc"><p>Outputs</p></td></tr><tr><td class="src">-&gt; <a href="Cardano-Wallet-Primitive-Types-TokenMap.html#t:TokenMap" title="Cardano.Wallet.Primitive.Types.TokenMap">TokenMap</a></td><td class="doc"><p>Output value to add</p></td></tr><tr><td class="src">-&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:NonEmpty" title="Distribution.Compat.Prelude.Internal">NonEmpty</a> <a href="Cardano-Wallet-Primitive-Types-TokenMap.html#t:TokenMap" title="Cardano.Wallet.Primitive.Types.TokenMap">TokenMap</a></td><td class="doc"><p>Outputs with the additional value added</p></td></tr></table></div><div class="doc"><p>Adds value (obtained from an input) to an existing set of output maps.</p><p>This function attempts to merge the given value into one of the existing
 output maps. If merging is successful, then the returned output map list
 will be identical in length and content to the original output map list,
 except for the merged output.</p><p>If the given value cannot be merged into one of the existing output maps
 (because it would cause an output to exceed the output size limit), then
 this function appends the given output map to the given output map list,
 effectively creating a new output.</p><p>Pre-condition: all output maps in the given list must be within the output
 size limit.</p><p>Assuming the above pre-condition is met, this function guarantees that all
 output maps in the returned list will also be within the output size limit.</p></div></div><a href="#g:6" id="g:6"><h1>Minimizing fees</h1></a><div class="top"><p class="src"><a id="v:minimizeFee" class="def">minimizeFee</a> <a href="src/Cardano.Wallet.Primitive.Migration.Selection.html#minimizeFee" class="link">Source</a> <a href="#v:minimizeFee" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Cardano-Wallet-Primitive-Types-Tx.html#t:TxConstraints" title="Cardano.Wallet.Primitive.Types.Tx">TxConstraints</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; (<a href="Cardano-Wallet-Primitive-Types-Coin.html#t:Coin" title="Cardano.Wallet.Primitive.Types.Coin">Coin</a>, <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:NonEmpty" title="Distribution.Compat.Prelude.Internal">NonEmpty</a> <a href="Cardano-Wallet-Primitive-Types-TokenBundle.html#t:TokenBundle" title="Cardano.Wallet.Primitive.Types.TokenBundle">TokenBundle</a>)</td><td class="doc"><p>Fee excess and output bundles.</p></td></tr><tr><td class="src">-&gt; (<a href="Cardano-Wallet-Primitive-Types-Coin.html#t:Coin" title="Cardano.Wallet.Primitive.Types.Coin">Coin</a>, <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:NonEmpty" title="Distribution.Compat.Prelude.Internal">NonEmpty</a> <a href="Cardano-Wallet-Primitive-Types-TokenBundle.html#t:TokenBundle" title="Cardano.Wallet.Primitive.Types.TokenBundle">TokenBundle</a>)</td><td class="doc"><p>Fee excess and output bundles after optimization.</p></td></tr></table></div><div class="doc"><p>Minimizes the given fee excess by adding ada to the given output bundles.</p><p>This function:</p><ul><li>guarantees to leave all non-ada quantities unchanged.</li><li>guarantees to not change the length of the list.</li><li>guarantees that each resulting output bundle will have an ada quantity
    that is greater than or equal to its original ada quantity.</li><li>guarantees that the resulting fee excess will be less than or equal to
    the original fee excess.</li><li>does not check that the given ada quantities are above the minimum
    required for each output, and therefore only guarantees that the
    resulting ada quantities will be above the minimum required if the
    caller makes this guarantee for the original output bundles.</li></ul><p>This function aims to adjust as few output bundles as possible, and in the
 ideal case, will increase the ada quantity of just one output bundle.</p><p>Increasing the ada quantity of an output may increase the overall cost of
 that output, as increasing an ada quantity may increase the length of the
 binary representation used to encode that quantity.</p><p>By maximizing the ada increase of a single output, and minimizing the ada
 increases of the remaining outputs, we can minimize the cost increase of
 the overall selection, and therefore maximize the chance of being able to
 pay for the selection.</p><p>This is a consequence of the following mathematical relationship:</p><p>Consider a non-negative integer constant <code>a</code> defined in terms of a summation
 of a fixed number <code>n</code> of non-negative integer variables:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>a = a1 + a2 + a3 + ... + an
</code></strong></pre><p>Now consider the total space <code>s</code> required to encode all of the variables:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>s = length a1 + length a2 + length a3 + ... + length an
</code></strong></pre><p>For any given number base, we can get close to the minimal value of <code>s</code> by
 making the following assignments:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>a1 := a
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>a2 := 0
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>a3 := 0
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>...
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>an := 0
</code></strong></pre><p>Consider the following example, working in base 10:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>a = 999
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>n = 9
</code></strong></pre><p>If we were to use a flat distribution, where the constant is partitioned
 into <code>n</code> equal quantities (modulo rounding), our space cost <code>s</code> would be:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>s = length  a1 + length  a2 + length  a3 + ... + length  a9
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>s = length 111 + length 111 + length 111 + ... + length 111
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>s =          3 +          3 +          3 + ... +          3
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>s =          3 &#215; 9
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>s = 27
</code></strong></pre><p>But by maximizing <code>a1</code> and minimizing the remaining variables, we can obtain
 the following smaller space cost:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>s = length  a1 + length  a2 + length  a3 + ... + length  a9
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>s = length 999 + length   0 + length   0 + ... + length   0
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>s =          3 +          1 +          1 + ... +          1
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>s =          3 +          8
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>s = 11
</code></strong></pre></div></div><div class="top"><p class="src"><a id="v:minimizeFeeStep" class="def">minimizeFeeStep</a> <a href="src/Cardano.Wallet.Primitive.Migration.Selection.html#minimizeFeeStep" class="link">Source</a> <a href="#v:minimizeFeeStep" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Cardano-Wallet-Primitive-Types-Tx.html#t:TxConstraints" title="Cardano.Wallet.Primitive.Types.Tx">TxConstraints</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; (<a href="Cardano-Wallet-Primitive-Types-Coin.html#t:Coin" title="Cardano.Wallet.Primitive.Types.Coin">Coin</a>, <a href="Cardano-Wallet-Primitive-Types-TokenBundle.html#t:TokenBundle" title="Cardano.Wallet.Primitive.Types.TokenBundle">TokenBundle</a>)</td><td class="doc"><p>Fee excess and output bundle.</p></td></tr><tr><td class="src">-&gt; (<a href="Cardano-Wallet-Primitive-Types-Coin.html#t:Coin" title="Cardano.Wallet.Primitive.Types.Coin">Coin</a>, <a href="Cardano-Wallet-Primitive-Types-TokenBundle.html#t:TokenBundle" title="Cardano.Wallet.Primitive.Types.TokenBundle">TokenBundle</a>)</td><td class="doc"><p>Fee excess and output bundle after optimization.</p></td></tr></table></div><div class="doc"><p>Minimizes the given fee excess by adding ada to the given output.</p><p>This function:</p><ul><li>guarantees to leave all non-ada quantities unchanged.</li><li>increases the ada quantity of the given output until it is no longer
    economically worthwhile to increase it further (i.e., if the cost of
    a further increase would be greater than the increase itself).</li><li>guarantees that the resulting output bundle will have an ada quantity
    that is greater than or equal to its original ada quantity.</li><li>guarantees that the resulting fee excess will be less than or equal to
    the original fee excess.</li></ul><p>Returns the minimized fee excess and the modified output.</p></div></div><a href="#g:7" id="g:7"><h1>Computing bulk properties of selections</h1></a><div class="top"><p class="src"><a id="v:computeCurrentFee" class="def">computeCurrentFee</a> :: <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Either" title="Distribution.Compat.Prelude.Internal">Either</a> NegativeCoin <a href="Cardano-Wallet-Primitive-Types-Coin.html#t:Coin" title="Cardano.Wallet.Primitive.Types.Coin">Coin</a> <a href="src/Cardano.Wallet.Primitive.Migration.Selection.html#computeCurrentFee" class="link">Source</a> <a href="#v:computeCurrentFee" class="selflink">#</a></p><div class="doc"><p>Calculates the current fee for a selection.</p></div></div><div class="top"><p class="src"><a id="v:computeCurrentSize" class="def">computeCurrentSize</a> :: <a href="Cardano-Wallet-Primitive-Types-Tx.html#t:TxConstraints" title="Cardano.Wallet.Primitive.Types.Tx">TxConstraints</a> -&gt; <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input -&gt; <a href="Cardano-Wallet-Primitive-Types-Tx.html#t:TxSize" title="Cardano.Wallet.Primitive.Types.Tx">TxSize</a> <a href="src/Cardano.Wallet.Primitive.Migration.Selection.html#computeCurrentSize" class="link">Source</a> <a href="#v:computeCurrentSize" class="selflink">#</a></p><div class="doc"><p>Calculates the current size of a selection.</p></div></div><div class="top"><p class="src"><a id="v:computeMinimumFee" class="def">computeMinimumFee</a> :: <a href="Cardano-Wallet-Primitive-Types-Tx.html#t:TxConstraints" title="Cardano.Wallet.Primitive.Types.Tx">TxConstraints</a> -&gt; <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input -&gt; <a href="Cardano-Wallet-Primitive-Types-Coin.html#t:Coin" title="Cardano.Wallet.Primitive.Types.Coin">Coin</a> <a href="src/Cardano.Wallet.Primitive.Migration.Selection.html#computeMinimumFee" class="link">Source</a> <a href="#v:computeMinimumFee" class="selflink">#</a></p><div class="doc"><p>Calculates the minimum permissible fee for a selection.</p></div></div><a href="#g:8" id="g:8"><h1>Verifying selections for correctness</h1></a><div class="top"><p class="src"><a id="v:verify" class="def">verify</a> :: <a href="Cardano-Wallet-Primitive-Types-Tx.html#t:TxConstraints" title="Cardano.Wallet.Primitive.Types.Tx">TxConstraints</a> -&gt; <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:Selection" title="Cardano.Wallet.Primitive.Migration.Selection">Selection</a> input -&gt; <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionCorrectness" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionCorrectness</a> <a href="src/Cardano.Wallet.Primitive.Migration.Selection.html#verify" class="link">Source</a> <a href="#v:verify" class="selflink">#</a></p><div class="doc"><p>Verifies a selection for correctness.</p><p>This function is provided primarily as a convenience for testing. As such,
 it's not usually necessary to call this function from ordinary application
 code, unless you suspect that a selection value is incorrect in some way.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:SelectionCorrectness" class="def">SelectionCorrectness</a> <a href="src/Cardano.Wallet.Primitive.Migration.Selection.html#SelectionCorrectness" class="link">Source</a> <a href="#t:SelectionCorrectness" class="selflink">#</a></p><div class="doc"><p>Indicates whether or not a selection is correct.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:SelectionCorrect" class="def">SelectionCorrect</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:SelectionIncorrect" class="def">SelectionIncorrect</a> SelectionCorrectnessError</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:SelectionCorrectness">Instances</h4><details id="i:SelectionCorrectness" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:SelectionCorrectness:Eq:1"></span> <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Eq" title="Distribution.Compat.Prelude.Internal">Eq</a> <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionCorrectness" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionCorrectness</a></span> <a href="src/Cardano.Wallet.Primitive.Migration.Selection.html#line-636" class="link">Source</a> <a href="#t:SelectionCorrectness" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:SelectionCorrectness:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Wallet-Primitive-Migration-Selection.html">Cardano.Wallet.Primitive.Migration.Selection</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionCorrectness" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionCorrectness</a> -&gt; <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionCorrectness" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionCorrectness</a> -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a> <a href="../../ghc/html/libraries/ghc-prim-0.6.1/src" class="link">Source</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionCorrectness" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionCorrectness</a> -&gt; <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionCorrectness" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionCorrectness</a> -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a> <a href="../../ghc/html/libraries/ghc-prim-0.6.1/src" class="link">Source</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:SelectionCorrectness:Show:2"></span> <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Show" title="Distribution.Compat.Prelude.Internal">Show</a> <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionCorrectness" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionCorrectness</a></span> <a href="src/Cardano.Wallet.Primitive.Migration.Selection.html#line-636" class="link">Source</a> <a href="#t:SelectionCorrectness" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:SelectionCorrectness:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Wallet-Primitive-Migration-Selection.html">Cardano.Wallet.Primitive.Migration.Selection</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Int" title="Distribution.Compat.Prelude.Internal">Int</a> -&gt; <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionCorrectness" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionCorrectness</a> -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:ShowS" title="Distribution.Compat.Prelude.Internal">ShowS</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionCorrectness" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionCorrectness</a> -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:String" title="Distribution.Compat.Prelude.Internal">String</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Cardano-Wallet-Primitive-Migration-Selection.html#t:SelectionCorrectness" title="Cardano.Wallet.Primitive.Migration.Selection">SelectionCorrectness</a>] -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:ShowS" title="Distribution.Compat.Prelude.Internal">ShowS</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.2</p></div></body></html>