<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span id="%24con2tag_DTuorvPXdIL6R38CkVFBzo"></span><span class="hs-pragma">{-# LANGUAGE AllowAmbiguousTypes #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DeriveGeneric #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE DerivingVia #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE PolyKinds #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE RoleAnnotations #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-15"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-16"></span><span>
</span><span id="line-17"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-18"></span><span class="hs-comment">-- Copyright: &#169; 2018-2020 IOHK</span><span>
</span><span id="line-19"></span><span class="hs-comment">-- License: Apache-2.0</span><span>
</span><span id="line-20"></span><span class="hs-comment">--</span><span>
</span><span id="line-21"></span><span class="hs-comment">-- Primitives for performing address derivation for some given schemes. This is</span><span>
</span><span id="line-22"></span><span class="hs-comment">-- where most of the crypto happens in the wallet and, it is quite important to</span><span>
</span><span id="line-23"></span><span class="hs-comment">-- ensure that the implementations match with other Cardano wallets</span><span>
</span><span id="line-24"></span><span class="hs-comment">-- (like cardano-sl, Yoroi/Icarus, or cardano-cli)</span><span>
</span><span id="line-25"></span><span class="hs-comment">--</span><span>
</span><span id="line-26"></span><span class="hs-comment">-- The actual implementations are in the following modules:</span><span>
</span><span id="line-27"></span><span class="hs-comment">--</span><span>
</span><span id="line-28"></span><span class="hs-comment">--  * &quot;Cardano.Wallet.Primitive.AddressDerivation.Shelley&quot;</span><span>
</span><span id="line-29"></span><span class="hs-comment">--  * &quot;Cardano.Wallet.Primitive.AddressDerivation.Byron&quot;</span><span>
</span><span id="line-30"></span><span>
</span><span id="line-31"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Cardano.Wallet.Primitive.AddressDerivation</span><span>
</span><span id="line-32"></span><span>    </span><span class="hs-special">(</span><span>
</span><span id="line-33"></span><span>    </span><span class="annot"><span class="hs-comment">-- * HD Derivation</span></span><span>
</span><span id="line-34"></span><span>      </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Depth"><span class="hs-identifier">Depth</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier">Index</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Role"><span class="hs-identifier">Role</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#roleVal"><span class="hs-identifier">roleVal</span></a></span><span>
</span><span id="line-38"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#utxoExternal"><span class="hs-identifier">utxoExternal</span></a></span><span>
</span><span id="line-39"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#utxoInternal"><span class="hs-identifier">utxoInternal</span></a></span><span>
</span><span id="line-40"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#mutableAccount"><span class="hs-identifier">mutableAccount</span></a></span><span>
</span><span id="line-41"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#zeroAccount"><span class="hs-identifier">zeroAccount</span></a></span><span>
</span><span id="line-42"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#stakeDerivationPath"><span class="hs-identifier">stakeDerivationPath</span></a></span><span>
</span><span id="line-43"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DerivationType"><span class="hs-identifier">DerivationType</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#HardDerivation"><span class="hs-identifier">HardDerivation</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#SoftDerivation"><span class="hs-identifier">SoftDerivation</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DerivationPrefix"><span class="hs-identifier">DerivationPrefix</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DerivationIndex"><span class="hs-identifier">DerivationIndex</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#liftIndex"><span class="hs-identifier">liftIndex</span></a></span><span>
</span><span id="line-49"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#hashVerificationKey"><span class="hs-identifier">hashVerificationKey</span></a></span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Delegation</span></span><span>
</span><span id="line-52"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.RewardAccount.html#RewardAccount"><span class="hs-identifier">RewardAccount</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#ToRewardAccount"><span class="hs-identifier">ToRewardAccount</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#deriveRewardAccount"><span class="hs-identifier">deriveRewardAccount</span></a></span><span>
</span><span id="line-55"></span><span>
</span><span id="line-56"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Helpers</span></span><span>
</span><span id="line-57"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#hex"><span class="hs-identifier">hex</span></a></span><span>
</span><span id="line-58"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#fromHex"><span class="hs-identifier">fromHex</span></a></span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Network Discrimination</span></span><span>
</span><span id="line-61"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#NetworkDiscriminant"><span class="hs-identifier">NetworkDiscriminant</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-62"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#NetworkDiscriminantVal"><span class="hs-identifier">NetworkDiscriminantVal</span></a></span><span>
</span><span id="line-63"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#networkDiscriminantVal"><span class="hs-identifier">networkDiscriminantVal</span></a></span><span>
</span><span id="line-64"></span><span>
</span><span id="line-65"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Backends Interoperability</span></span><span>
</span><span id="line-66"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#PaymentAddress"><span class="hs-identifier">PaymentAddress</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DelegationAddress"><span class="hs-identifier">DelegationAddress</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#BoundedAddressLength"><span class="hs-identifier">BoundedAddressLength</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#WalletKey"><span class="hs-identifier">WalletKey</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#PersistPrivateKey"><span class="hs-identifier">PersistPrivateKey</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#PersistPublicKey"><span class="hs-identifier">PersistPublicKey</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-72"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#MkKeyFingerprint"><span class="hs-identifier">MkKeyFingerprint</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#ErrMkKeyFingerprint"><span class="hs-identifier">ErrMkKeyFingerprint</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#KeyFingerprint"><span class="hs-identifier">KeyFingerprint</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Prelude</span></a></span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier">Cardano.Address.Derivation</span></a></span><span>
</span><span id="line-80"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier">XPrv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier">XPub</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier">xpubPublicKey</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier">Cardano.Address.Script</span></a></span><span>
</span><span id="line-82"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier">KeyHash</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier">KeyRole</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier">Cardano.Mnemonic</span></a></span><span>
</span><span id="line-84"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier">SomeMnemonic</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Passphrase.Types.html"><span class="hs-identifier">Cardano.Wallet.Primitive.Passphrase.Types</span></a></span><span>
</span><span id="line-86"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Passphrase.Types.html#Passphrase"><span class="hs-identifier">Passphrase</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Passphrase.Types.html#PassphraseHash"><span class="hs-identifier">PassphraseHash</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Passphrase.Types.html#PassphraseScheme"><span class="hs-identifier">PassphraseScheme</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.Address.html"><span class="hs-identifier">Cardano.Wallet.Primitive.Types.Address</span></a></span><span>
</span><span id="line-88"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.Address.html#Address"><span class="hs-identifier">Address</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.RewardAccount.html"><span class="hs-identifier">Cardano.Wallet.Primitive.Types.RewardAccount</span></a></span><span>
</span><span id="line-90"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.RewardAccount.html#RewardAccount"><span class="hs-identifier">RewardAccount</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Applicative</span></a></span><span>
</span><span id="line-92"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator">(&lt;|&gt;)</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/deepseq-1.4.4.0/src"><span class="hs-identifier">Control.DeepSeq</span></a></span><span>
</span><span id="line-94"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/deepseq-1.4.4.0/src"><span class="hs-identifier">NFData</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-95"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Monad</span></a></span><span>
</span><span id="line-96"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator">(&gt;=&gt;)</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cryptonite/html/src"><span class="hs-identifier">Crypto.Hash</span></a></span><span>
</span><span id="line-98"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../cryptonite/html/src"><span class="hs-identifier">Digest</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cryptonite/html/src"><span class="hs-identifier">HashAlgorithm</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-99"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Crypto.Hash.Utils.html"><span class="hs-identifier">Crypto.Hash.Utils</span></a></span><span>
</span><span id="line-100"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Crypto.Hash.Utils.html#blake2b224"><span class="hs-identifier">blake2b224</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../memory/html/src"><span class="hs-identifier">Data.ByteArray</span></a></span><span>
</span><span id="line-102"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../memory/html/src"><span class="hs-identifier">ByteArray</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../memory/html/src"><span class="hs-identifier">ByteArrayAccess</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-103"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../memory/html/src"><span class="hs-identifier">Data.ByteArray.Encoding</span></a></span><span>
</span><span id="line-104"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../memory/html/src"><span class="hs-identifier">Base</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../memory/html/src"><span class="hs-identifier">convertFromBase</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../memory/html/src"><span class="hs-identifier">convertToBase</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-105"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier">Data.ByteString</span></a></span><span>
</span><span id="line-106"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier">ByteString</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-107"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Kind</span></a></span><span>
</span><span id="line-108"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier">Type</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-109"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span>
</span><span id="line-110"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-111"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Maybe</span></a></span><span>
</span><span id="line-112"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">fromMaybe</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-113"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Proxy</span></a></span><span>
</span><span id="line-114"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Proxy</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-115"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../scientific/html/src"><span class="hs-identifier">Data.Scientific</span></a></span><span>
</span><span id="line-116"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../scientific/html/src"><span class="hs-identifier">Scientific</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../scientific/html/src"><span class="hs-identifier">toBoundedInteger</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-117"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.String</span></a></span><span>
</span><span id="line-118"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">fromString</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-119"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier">Data.Text</span></a></span><span>
</span><span id="line-120"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier">Text</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-121"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../text-class/html/src"><span class="hs-identifier">Data.Text.Class</span></a></span><span>
</span><span id="line-122"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../text-class/html/src"><span class="hs-identifier">CaseStyle</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-123"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../text-class/html/src"><span class="hs-identifier">FromText</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-124"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../text-class/html/src"><span class="hs-identifier">TextDecodingError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-125"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../text-class/html/src"><span class="hs-identifier">ToText</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-126"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../text-class/html/src"><span class="hs-identifier">fromTextToBoundedEnum</span></a></span><span>
</span><span id="line-127"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../text-class/html/src"><span class="hs-identifier">toTextFromBoundedEnum</span></a></span><span>
</span><span id="line-128"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-129"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Type.Equality</span></a></span><span>
</span><span id="line-130"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator">(:~:)</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">testEquality</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-131"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Word</span></a></span><span>
</span><span id="line-132"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Word32</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-133"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../fmt/html/src"><span class="hs-identifier">Fmt</span></a></span><span>
</span><span id="line-134"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../formatting/html/src"><span class="hs-identifier">Buildable</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">GHC.Generics</span></a></span><span>
</span><span id="line-136"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Generic</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-137"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">GHC.TypeLits</span></a></span><span>
</span><span id="line-138"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">KnownNat</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier">Nat</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier">Symbol</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">natVal</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-139"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../quiet/html/src"><span class="hs-identifier">Quiet</span></a></span><span>
</span><span id="line-140"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../quiet/html/src"><span class="hs-identifier">Quiet</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-141"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../safe/html/src"><span class="hs-identifier">Safe</span></a></span><span>
</span><span id="line-142"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../safe/html/src"><span class="hs-identifier">readMay</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../safe/html/src"><span class="hs-identifier">toEnumMay</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-143"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Type.Reflection</span></a></span><span>
</span><span id="line-144"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Typeable</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">typeRep</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-145"></span><span>
</span><span id="line-146"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier">Data.Text</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-147"></span><span>
</span><span id="line-148"></span><span class="hs-comment">{-------------------------------------------------------------------------------
                                HD Hierarchy
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-151"></span><span>
</span><span id="line-152"></span><span class="hs-comment">-- | Typically used as a phantom type parameter, a witness to the type of the</span><span>
</span><span id="line-153"></span><span class="hs-comment">-- key being used.</span><span>
</span><span id="line-154"></span><span class="hs-comment">--</span><span>
</span><span id="line-155"></span><span class="hs-comment">-- For example, @key 'RootK XPrv@, represents the private key at the root of the</span><span>
</span><span id="line-156"></span><span class="hs-comment">-- HD hierarchy.</span><span>
</span><span id="line-157"></span><span class="hs-comment">--</span><span>
</span><span id="line-158"></span><span class="hs-comment">-- According to BIP-0044 / CIP-1852, we have the following keys in our HD</span><span>
</span><span id="line-159"></span><span class="hs-comment">-- hierarchy:</span><span>
</span><span id="line-160"></span><span class="hs-comment">--</span><span>
</span><span id="line-161"></span><span class="hs-comment">-- @m | purpose' | cointype' | account' | role | address@</span><span>
</span><span id="line-162"></span><span class="hs-comment">--</span><span>
</span><span id="line-163"></span><span class="hs-comment">-- Plus, we also have script keys (which are used in shared wallets) and policy</span><span>
</span><span id="line-164"></span><span class="hs-comment">-- keys (which are used in minting and burning).</span><span>
</span><span id="line-165"></span><span class="hs-keyword">data</span><span> </span><span id="Depth"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Depth"><span class="hs-identifier hs-var">Depth</span></a></span></span><span>
</span><span id="line-166"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="RootK"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#RootK"><span class="hs-identifier hs-var">RootK</span></a></span></span><span>
</span><span id="line-167"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="PurposeK"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#PurposeK"><span class="hs-identifier hs-var">PurposeK</span></a></span></span><span>
</span><span id="line-168"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="CoinTypeK"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#CoinTypeK"><span class="hs-identifier hs-var">CoinTypeK</span></a></span></span><span>
</span><span id="line-169"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="AccountK"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#AccountK"><span class="hs-identifier hs-var">AccountK</span></a></span></span><span>
</span><span id="line-170"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="RoleK"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#RoleK"><span class="hs-identifier hs-var">RoleK</span></a></span></span><span>
</span><span id="line-171"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="AddressK"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#AddressK"><span class="hs-identifier hs-var">AddressK</span></a></span></span><span>
</span><span id="line-172"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="ScriptK"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#ScriptK"><span class="hs-identifier hs-var">ScriptK</span></a></span></span><span>
</span><span id="line-173"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="PolicyK"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#PolicyK"><span class="hs-identifier hs-var">PolicyK</span></a></span></span><span>
</span><span id="line-174"></span><span>
</span><span id="line-175"></span><span class="hs-comment">-- | Marker for addresses type engaged. We want to handle four cases here.</span><span>
</span><span id="line-176"></span><span class="hs-comment">-- The first two are pertinent to UTxO accounting,</span><span>
</span><span id="line-177"></span><span class="hs-comment">-- next handles rewards from participation in staking</span><span>
</span><span id="line-178"></span><span class="hs-comment">-- the last one is used for getting verification keys used in scripts.</span><span>
</span><span id="line-179"></span><span class="hs-comment">-- (a) external chain is used for addresses that are part of the 'advertised'</span><span>
</span><span id="line-180"></span><span class="hs-comment">--     targets of a given transaction</span><span>
</span><span id="line-181"></span><span class="hs-comment">-- (b) internal change is for addresses used to handle the change of a</span><span>
</span><span id="line-182"></span><span class="hs-comment">--     the transaction within a given wallet</span><span>
</span><span id="line-183"></span><span class="hs-comment">-- (c) the addresses for a reward account</span><span>
</span><span id="line-184"></span><span class="hs-comment">-- (d) used for keys used inside scripts</span><span>
</span><span id="line-185"></span><span id="local-6989586621682427590"><span id="local-6989586621682427591"></span></span><span class="hs-keyword">data</span><span> </span><span id="Role"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Role"><span class="hs-identifier hs-var">Role</span></a></span></span><span>
</span><span id="line-186"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="UtxoExternal"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#UtxoExternal"><span class="hs-identifier hs-var">UtxoExternal</span></a></span></span><span>
</span><span id="line-187"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="UtxoInternal"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#UtxoInternal"><span class="hs-identifier hs-var">UtxoInternal</span></a></span></span><span>
</span><span id="line-188"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="MutableAccount"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#MutableAccount"><span class="hs-identifier hs-var">MutableAccount</span></a></span></span><span>
</span><span id="line-189"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. Role -&gt; Rep Role x)
-&gt; (forall x. Rep Role x -&gt; Role) -&gt; Generic Role
forall x. Rep Role x -&gt; Role
forall x. Role -&gt; Rep Role x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep Role x -&gt; Role
$cfrom :: forall x. Role -&gt; Rep Role x
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682427581"><span id="local-6989586621682427583"><span id="local-6989586621682427585"><span class="annot"><span class="annottext">Int -&gt; Role -&gt; ShowS
[Role] -&gt; ShowS
Role -&gt; String
(Int -&gt; Role -&gt; ShowS)
-&gt; (Role -&gt; String) -&gt; ([Role] -&gt; ShowS) -&gt; Show Role
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [Role] -&gt; ShowS
$cshowList :: [Role] -&gt; ShowS
show :: Role -&gt; String
$cshow :: Role -&gt; String
showsPrec :: Int -&gt; Role -&gt; ShowS
$cshowsPrec :: Int -&gt; Role -&gt; ShowS
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682427576"><span id="local-6989586621682427578"><span class="annot"><span class="annottext">Role -&gt; Role -&gt; Bool
(Role -&gt; Role -&gt; Bool) -&gt; (Role -&gt; Role -&gt; Bool) -&gt; Eq Role
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Role -&gt; Role -&gt; Bool
$c/= :: Role -&gt; Role -&gt; Bool
== :: Role -&gt; Role -&gt; Bool
$c== :: Role -&gt; Role -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682427560"><span id="local-6989586621682427562"><span id="local-6989586621682427564"><span id="local-6989586621682427566"><span id="local-6989586621682427568"><span id="local-6989586621682427570"><span id="local-6989586621682427572"><span class="annot"><span class="annottext">Eq Role
Eq Role
-&gt; (Role -&gt; Role -&gt; Ordering)
-&gt; (Role -&gt; Role -&gt; Bool)
-&gt; (Role -&gt; Role -&gt; Bool)
-&gt; (Role -&gt; Role -&gt; Bool)
-&gt; (Role -&gt; Role -&gt; Bool)
-&gt; (Role -&gt; Role -&gt; Role)
-&gt; (Role -&gt; Role -&gt; Role)
-&gt; Ord Role
Role -&gt; Role -&gt; Bool
Role -&gt; Role -&gt; Ordering
Role -&gt; Role -&gt; Role
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: Role -&gt; Role -&gt; Role
$cmin :: Role -&gt; Role -&gt; Role
max :: Role -&gt; Role -&gt; Role
$cmax :: Role -&gt; Role -&gt; Role
&gt;= :: Role -&gt; Role -&gt; Bool
$c&gt;= :: Role -&gt; Role -&gt; Bool
&gt; :: Role -&gt; Role -&gt; Bool
$c&gt; :: Role -&gt; Role -&gt; Bool
&lt;= :: Role -&gt; Role -&gt; Bool
$c&lt;= :: Role -&gt; Role -&gt; Bool
&lt; :: Role -&gt; Role -&gt; Bool
$c&lt; :: Role -&gt; Role -&gt; Bool
compare :: Role -&gt; Role -&gt; Ordering
$ccompare :: Role -&gt; Role -&gt; Ordering
$cp1Ord :: Eq Role
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682427555"><span id="local-6989586621682427557"><span class="annot"><span class="annottext">Role
Role -&gt; Role -&gt; Bounded Role
forall a. a -&gt; a -&gt; Bounded a
maxBound :: Role
$cmaxBound :: Role
minBound :: Role
$cminBound :: Role
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Bounded</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-190"></span><span>
</span><span id="line-191"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682427552"><span class="annot"><a href="../../../../ghc/html/libraries/deepseq-1.4.4.0/src"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Role"><span class="hs-identifier hs-type">Role</span></a></span></span><span>
</span><span id="line-192"></span><span>
</span><span id="line-193"></span><span class="hs-comment">-- Not deriving 'Enum' because this could have a dramatic impact if we were</span><span>
</span><span id="line-194"></span><span class="hs-comment">-- to assign the wrong index to the corresponding constructor (by swapping</span><span>
</span><span id="line-195"></span><span class="hs-comment">-- around the constructor above for instance).</span><span>
</span><span id="line-196"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682427537"><span id="local-6989586621682427539"><span id="local-6989586621682427541"><span id="local-6989586621682427543"><span id="local-6989586621682427547"><span id="local-6989586621682427549"><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Enum</span></a></span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Role"><span class="hs-identifier hs-type">Role</span></a></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-197"></span><span>    </span><span id="local-6989586621682427535"><span class="annot"><span class="annottext">toEnum :: Int -&gt; Role
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">toEnum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-198"></span><span>        </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#UtxoExternal"><span class="hs-identifier hs-var">UtxoExternal</span></a></span><span>
</span><span id="line-199"></span><span>        </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#UtxoInternal"><span class="hs-identifier hs-var">UtxoInternal</span></a></span><span>
</span><span id="line-200"></span><span>        </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#MutableAccount"><span class="hs-identifier hs-var">MutableAccount</span></a></span><span>
</span><span id="line-201"></span><span>        </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Role
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Role.toEnum: bad argument&quot;</span></span><span>
</span><span id="line-202"></span><span>    </span><span id="local-6989586621682427532"><span class="annot"><span class="annottext">fromEnum :: Role -&gt; Int
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromEnum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-203"></span><span>        </span><span class="annot"><span class="annottext">Role
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#UtxoExternal"><span class="hs-identifier hs-var">UtxoExternal</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-204"></span><span>        </span><span class="annot"><span class="annottext">Role
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#UtxoInternal"><span class="hs-identifier hs-var">UtxoInternal</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-205"></span><span>        </span><span class="annot"><span class="annottext">Role
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#MutableAccount"><span class="hs-identifier hs-var">MutableAccount</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span>
</span><span id="line-206"></span><span>
</span><span id="line-207"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../../../text-class/html/src"><span class="hs-identifier hs-type">ToText</span></a></span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Role"><span class="hs-identifier hs-type">Role</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-208"></span><span>    </span><span id="local-6989586621682427528"><span class="annot"><span class="annottext">toText :: Role -&gt; Text
</span><a href="../../../../text-class/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">toText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CaseStyle -&gt; Role -&gt; Text
forall a. (Bounded a, Enum a, Show a) =&gt; CaseStyle -&gt; a -&gt; Text
</span><a href="../../../../text-class/html/src"><span class="hs-identifier hs-var">toTextFromBoundedEnum</span></a></span><span> </span><span class="annot"><span class="annottext">CaseStyle
</span><a href="../../../../text-class/html/src"><span class="hs-identifier hs-var">SnakeLowerCase</span></a></span><span>
</span><span id="line-209"></span><span>
</span><span id="line-210"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../../../text-class/html/src"><span class="hs-identifier hs-type">FromText</span></a></span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Role"><span class="hs-identifier hs-type">Role</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-211"></span><span>    </span><span id="local-6989586621682427523"><span class="annot"><span class="annottext">fromText :: Text -&gt; Either TextDecodingError Role
</span><a href="../../../../text-class/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CaseStyle -&gt; Text -&gt; Either TextDecodingError Role
forall a.
(Bounded a, Enum a, Show a) =&gt;
CaseStyle -&gt; Text -&gt; Either TextDecodingError a
</span><a href="../../../../text-class/html/src"><span class="hs-identifier hs-var">fromTextToBoundedEnum</span></a></span><span> </span><span class="annot"><span class="annottext">CaseStyle
</span><a href="../../../../text-class/html/src"><span class="hs-identifier hs-var">SnakeLowerCase</span></a></span><span>
</span><span id="line-212"></span><span>
</span><span id="line-213"></span><span class="hs-comment">-- | Bring a 'Role' type back to the term-level. This requires a type</span><span>
</span><span id="line-214"></span><span class="hs-comment">-- application and either a scoped type variable, or an explicit passing of a</span><span>
</span><span id="line-215"></span><span class="hs-comment">-- 'Role'.</span><span>
</span><span id="line-216"></span><span class="hs-comment">--</span><span>
</span><span id="line-217"></span><span class="hs-comment">-- &gt;&gt;&gt; roleVal @'UtxoExternal</span><span>
</span><span id="line-218"></span><span class="hs-comment">-- UtxoExternal</span><span>
</span><span id="line-219"></span><span class="hs-comment">--</span><span>
</span><span id="line-220"></span><span class="hs-comment">-- &gt;&gt;&gt; roleVal @chain</span><span>
</span><span id="line-221"></span><span class="hs-comment">-- ...</span><span>
</span><span id="line-222"></span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#roleVal"><span class="hs-identifier hs-type">roleVal</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682427521"><span class="annot"><a href="#local-6989586621682427521"><span class="hs-identifier hs-type">c</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Role"><span class="hs-identifier hs-type">Role</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427521"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Role"><span class="hs-identifier hs-type">Role</span></a></span><span>
</span><span id="line-223"></span><span id="roleVal"><span class="annot"><span class="annottext">roleVal :: Role
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#roleVal"><span class="hs-identifier hs-var hs-var">roleVal</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Role -&gt; Maybe Role -&gt; Role
forall a. a -&gt; Maybe a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Role
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Role) -&gt; String -&gt; Role
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;role: unmatched type&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TypeRep c -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Typeable c =&gt; TypeRep c
forall k (a :: k). Typeable a =&gt; TypeRep a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">typeRep</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621682427521"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-224"></span><span>       </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Role
</span><a href="#local-6989586621682427519"><span class="hs-identifier hs-var">tryUtxoExternal</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Role -&gt; Maybe Role -&gt; Maybe Role
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Role
</span><a href="#local-6989586621682427518"><span class="hs-identifier hs-var">tryUtxoInternal</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Role -&gt; Maybe Role -&gt; Maybe Role
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Role
</span><a href="#local-6989586621682427517"><span class="hs-identifier hs-var">tryMutableAccount</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-225"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-226"></span><span>    </span><span id="local-6989586621682427519"><span class="annot"><span class="annottext">tryUtxoExternal :: Maybe Role
</span><a href="#local-6989586621682427519"><span class="hs-identifier hs-var hs-var">tryUtxoExternal</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-227"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TypeRep c -&gt; TypeRep 'UtxoExternal -&gt; Maybe (c :~: 'UtxoExternal)
forall k (f :: k -&gt; *) (a :: k) (b :: k).
TestEquality f =&gt;
f a -&gt; f b -&gt; Maybe (a :~: b)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">testEquality</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Typeable c =&gt; TypeRep c
forall k (a :: k). Typeable a =&gt; TypeRep a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">typeRep</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621682427521"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Typeable 'UtxoExternal =&gt; TypeRep 'UtxoExternal
forall k (a :: k). Typeable a =&gt; TypeRep a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">typeRep</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#UtxoExternal"><span class="hs-identifier hs-type">UtxoExternal</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-228"></span><span>            </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">c :~: 'UtxoExternal
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Refl</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Role -&gt; Maybe Role
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#UtxoExternal"><span class="hs-identifier hs-var">UtxoExternal</span></a></span><span>
</span><span id="line-229"></span><span>            </span><span class="annot"><span class="annottext">Maybe (c :~: 'UtxoExternal)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Role
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-230"></span><span>    </span><span id="local-6989586621682427518"><span class="annot"><span class="annottext">tryUtxoInternal :: Maybe Role
</span><a href="#local-6989586621682427518"><span class="hs-identifier hs-var hs-var">tryUtxoInternal</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-231"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TypeRep c -&gt; TypeRep 'UtxoInternal -&gt; Maybe (c :~: 'UtxoInternal)
forall k (f :: k -&gt; *) (a :: k) (b :: k).
TestEquality f =&gt;
f a -&gt; f b -&gt; Maybe (a :~: b)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">testEquality</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Typeable c =&gt; TypeRep c
forall k (a :: k). Typeable a =&gt; TypeRep a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">typeRep</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621682427521"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Typeable 'UtxoInternal =&gt; TypeRep 'UtxoInternal
forall k (a :: k). Typeable a =&gt; TypeRep a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">typeRep</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#UtxoInternal"><span class="hs-identifier hs-type">UtxoInternal</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-232"></span><span>            </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">c :~: 'UtxoInternal
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Refl</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Role -&gt; Maybe Role
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#UtxoInternal"><span class="hs-identifier hs-var">UtxoInternal</span></a></span><span>
</span><span id="line-233"></span><span>            </span><span class="annot"><span class="annottext">Maybe (c :~: 'UtxoInternal)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Role
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-234"></span><span>    </span><span id="local-6989586621682427517"><span class="annot"><span class="annottext">tryMutableAccount :: Maybe Role
</span><a href="#local-6989586621682427517"><span class="hs-identifier hs-var hs-var">tryMutableAccount</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-235"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TypeRep c
-&gt; TypeRep 'MutableAccount -&gt; Maybe (c :~: 'MutableAccount)
forall k (f :: k -&gt; *) (a :: k) (b :: k).
TestEquality f =&gt;
f a -&gt; f b -&gt; Maybe (a :~: b)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">testEquality</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Typeable c =&gt; TypeRep c
forall k (a :: k). Typeable a =&gt; TypeRep a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">typeRep</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621682427521"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Typeable 'MutableAccount =&gt; TypeRep 'MutableAccount
forall k (a :: k). Typeable a =&gt; TypeRep a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">typeRep</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#MutableAccount"><span class="hs-identifier hs-type">MutableAccount</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-236"></span><span>            </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">c :~: 'MutableAccount
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Refl</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Role -&gt; Maybe Role
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#MutableAccount"><span class="hs-identifier hs-var">MutableAccount</span></a></span><span>
</span><span id="line-237"></span><span>            </span><span class="annot"><span class="annottext">Maybe (c :~: 'MutableAccount)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Role
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-238"></span><span>
</span><span id="line-239"></span><span class="hs-comment">-- | smart-constructor for getting a derivation index that refers to external</span><span>
</span><span id="line-240"></span><span class="hs-comment">-- utxo.</span><span>
</span><span id="line-241"></span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#utxoExternal"><span class="hs-identifier hs-type">utxoExternal</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Soft"><span class="hs-identifier hs-type">Soft</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#RoleK"><span class="hs-identifier hs-type">RoleK</span></a></span><span>
</span><span id="line-242"></span><span id="utxoExternal"><span class="annot"><span class="annottext">utxoExternal :: Index 'Soft 'RoleK
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#utxoExternal"><span class="hs-identifier hs-var hs-var">utxoExternal</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Index 'Soft 'RoleK
forall a. Enum a =&gt; Int -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">toEnum</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Index 'Soft 'RoleK) -&gt; Int -&gt; Index 'Soft 'RoleK
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Role -&gt; Int
forall a. Enum a =&gt; a -&gt; Int
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromEnum</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#UtxoExternal"><span class="hs-identifier hs-var">UtxoExternal</span></a></span><span>
</span><span id="line-243"></span><span>
</span><span id="line-244"></span><span class="hs-comment">-- | smart-constructor for getting a derivation index that refers to internal</span><span>
</span><span id="line-245"></span><span class="hs-comment">-- utxo.</span><span>
</span><span id="line-246"></span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#utxoInternal"><span class="hs-identifier hs-type">utxoInternal</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Soft"><span class="hs-identifier hs-type">Soft</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#RoleK"><span class="hs-identifier hs-type">RoleK</span></a></span><span>
</span><span id="line-247"></span><span id="utxoInternal"><span class="annot"><span class="annottext">utxoInternal :: Index 'Soft 'RoleK
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#utxoInternal"><span class="hs-identifier hs-var hs-var">utxoInternal</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Index 'Soft 'RoleK
forall a. Enum a =&gt; Int -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">toEnum</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Index 'Soft 'RoleK) -&gt; Int -&gt; Index 'Soft 'RoleK
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Role -&gt; Int
forall a. Enum a =&gt; a -&gt; Int
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromEnum</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#UtxoInternal"><span class="hs-identifier hs-var">UtxoInternal</span></a></span><span>
</span><span id="line-248"></span><span>
</span><span id="line-249"></span><span class="hs-comment">-- | smart-constructor for getting a derivation index that refers to stake</span><span>
</span><span id="line-250"></span><span class="hs-comment">-- key level (a.k.a mutable account)</span><span>
</span><span id="line-251"></span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#mutableAccount"><span class="hs-identifier hs-type">mutableAccount</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Soft"><span class="hs-identifier hs-type">Soft</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#RoleK"><span class="hs-identifier hs-type">RoleK</span></a></span><span>
</span><span id="line-252"></span><span id="mutableAccount"><span class="annot"><span class="annottext">mutableAccount :: Index 'Soft 'RoleK
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#mutableAccount"><span class="hs-identifier hs-var hs-var">mutableAccount</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Index 'Soft 'RoleK
forall a. Enum a =&gt; Int -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">toEnum</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Index 'Soft 'RoleK) -&gt; Int -&gt; Index 'Soft 'RoleK
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Role -&gt; Int
forall a. Enum a =&gt; a -&gt; Int
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromEnum</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#MutableAccount"><span class="hs-identifier hs-var">MutableAccount</span></a></span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#zeroAccount"><span class="hs-identifier hs-type">zeroAccount</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Soft"><span class="hs-identifier hs-type">Soft</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#AddressK"><span class="hs-identifier hs-type">AddressK</span></a></span><span>
</span><span id="line-255"></span><span id="zeroAccount"><span class="annot"><span class="annottext">zeroAccount :: Index 'Soft 'AddressK
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#zeroAccount"><span class="hs-identifier hs-var hs-var">zeroAccount</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Index 'Soft 'AddressK
forall a. Bounded a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">minBound</span></a></span><span>
</span><span id="line-256"></span><span>
</span><span id="line-257"></span><span class="hs-comment">-- | Full path to the stake key. There's only one.</span><span>
</span><span id="line-258"></span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#stakeDerivationPath"><span class="hs-identifier hs-type">stakeDerivationPath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DerivationPrefix"><span class="hs-identifier hs-type">DerivationPrefix</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DerivationIndex"><span class="hs-identifier hs-type">DerivationIndex</span></a></span><span>
</span><span id="line-259"></span><span id="stakeDerivationPath"><span class="annot"><span class="annottext">stakeDerivationPath :: DerivationPrefix -&gt; NonEmpty DerivationIndex
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#stakeDerivationPath"><span class="hs-identifier hs-var hs-var">stakeDerivationPath</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DerivationPrefix"><span class="hs-identifier hs-type">DerivationPrefix</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682427513"><span class="annot"><span class="annottext">Index 'Hardened 'PurposeK
</span><a href="#local-6989586621682427513"><span class="hs-identifier hs-var">purpose</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682427512"><span class="annot"><span class="annottext">Index 'Hardened 'CoinTypeK
</span><a href="#local-6989586621682427512"><span class="hs-identifier hs-var">coin</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682427511"><span class="annot"><span class="annottext">Index 'Hardened 'AccountK
</span><a href="#local-6989586621682427511"><span class="hs-identifier hs-var">acc</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-260"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Index 'Hardened 'PurposeK -&gt; DerivationIndex
forall (t :: DerivationType) (l :: Depth).
Index t l -&gt; DerivationIndex
</span><a href="#local-6989586621682427510"><span class="hs-identifier hs-var">fromIndex</span></a></span><span> </span><span class="annot"><span class="annottext">Index 'Hardened 'PurposeK
</span><a href="#local-6989586621682427513"><span class="hs-identifier hs-var">purpose</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">DerivationIndex -&gt; [DerivationIndex] -&gt; NonEmpty DerivationIndex
forall a. a -&gt; [a] -&gt; NonEmpty a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">:|</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-261"></span><span>      </span><span class="annot"><span class="annottext">Index 'Hardened 'CoinTypeK -&gt; DerivationIndex
forall (t :: DerivationType) (l :: Depth).
Index t l -&gt; DerivationIndex
</span><a href="#local-6989586621682427510"><span class="hs-identifier hs-var">fromIndex</span></a></span><span> </span><span class="annot"><span class="annottext">Index 'Hardened 'CoinTypeK
</span><a href="#local-6989586621682427512"><span class="hs-identifier hs-var">coin</span></a></span><span>
</span><span id="line-262"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Index 'Hardened 'AccountK -&gt; DerivationIndex
forall (t :: DerivationType) (l :: Depth).
Index t l -&gt; DerivationIndex
</span><a href="#local-6989586621682427510"><span class="hs-identifier hs-var">fromIndex</span></a></span><span> </span><span class="annot"><span class="annottext">Index 'Hardened 'AccountK
</span><a href="#local-6989586621682427511"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-263"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Index 'Soft 'RoleK -&gt; DerivationIndex
forall (t :: DerivationType) (l :: Depth).
Index t l -&gt; DerivationIndex
</span><a href="#local-6989586621682427510"><span class="hs-identifier hs-var">fromIndex</span></a></span><span> </span><span class="annot"><span class="annottext">Index 'Soft 'RoleK
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#mutableAccount"><span class="hs-identifier hs-var">mutableAccount</span></a></span><span>
</span><span id="line-264"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Index 'Soft 'AddressK -&gt; DerivationIndex
forall (t :: DerivationType) (l :: Depth).
Index t l -&gt; DerivationIndex
</span><a href="#local-6989586621682427510"><span class="hs-identifier hs-var">fromIndex</span></a></span><span> </span><span class="annot"><span class="annottext">Index 'Soft 'AddressK
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#zeroAccount"><span class="hs-identifier hs-var">zeroAccount</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-265"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-266"></span><span>    </span><span id="local-6989586621682427784"><span id="local-6989586621682427785"><span class="annot"><a href="#local-6989586621682427510"><span class="hs-identifier hs-type">fromIndex</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427785"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427784"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DerivationIndex"><span class="hs-identifier hs-type">DerivationIndex</span></a></span></span></span><span>
</span><span id="line-267"></span><span>    </span><span id="local-6989586621682427510"><span class="annot"><span class="annottext">fromIndex :: Index t l -&gt; DerivationIndex
</span><a href="#local-6989586621682427510"><span class="hs-identifier hs-var hs-var">fromIndex</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; DerivationIndex
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DerivationIndex"><span class="hs-identifier hs-var">DerivationIndex</span></a></span><span> </span><span class="annot"><span class="annottext">(Word32 -&gt; DerivationIndex)
-&gt; (Index t l -&gt; Word32) -&gt; Index t l -&gt; DerivationIndex
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Index t l -&gt; Word32
forall (derivationType :: DerivationType) (level :: Depth).
Index derivationType level -&gt; Word32
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#getIndex"><span class="hs-identifier hs-var hs-var">getIndex</span></a></span><span>
</span><span id="line-268"></span><span>
</span><span id="line-269"></span><span class="hs-comment">-- | A thin wrapper around derivation indexes. This can be used to represent</span><span>
</span><span id="line-270"></span><span class="hs-comment">-- derivation path as homogeneous lists of 'DerivationIndex'. This is slightly</span><span>
</span><span id="line-271"></span><span class="hs-comment">-- more convenient than having to carry heterogeneous lists of 'Index depth type'</span><span>
</span><span id="line-272"></span><span class="hs-comment">-- and works fine because:</span><span>
</span><span id="line-273"></span><span class="hs-comment">--</span><span>
</span><span id="line-274"></span><span class="hs-comment">-- 1. The 'depth' matters not because what the depth captures is actually the</span><span>
</span><span id="line-275"></span><span class="hs-comment">--    position of the index in that list. It makes sense to carry at the type</span><span>
</span><span id="line-276"></span><span class="hs-comment">--    level when manipulating standalone indexes to avoid mistakes, but when</span><span>
</span><span id="line-277"></span><span class="hs-comment">--    treating them as a part of a list it is redundant.</span><span>
</span><span id="line-278"></span><span class="hs-comment">--</span><span>
</span><span id="line-279"></span><span class="hs-comment">-- 2. The derivationType is captured by representing indexes as plain Word32.</span><span>
</span><span id="line-280"></span><span class="hs-comment">--    The Soft / Hardened notation is for easing human-readability but in the</span><span>
</span><span id="line-281"></span><span class="hs-comment">--    end, a soft index is simply a value &lt; 2^31, whereas a &quot;hardened&quot; index is</span><span>
</span><span id="line-282"></span><span class="hs-comment">--    simply a value &gt;= 2^31. Therefore, instead of representing indexes as</span><span>
</span><span id="line-283"></span><span class="hs-comment">--    derivationType + relative index within 0 and 2^31, we can represent them</span><span>
</span><span id="line-284"></span><span class="hs-comment">--    as just an index between 0 and 2^32, which is what DerivationIndex does.</span><span>
</span><span id="line-285"></span><span id="local-6989586621682427504"><span id="local-6989586621682427505"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="DerivationIndex"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DerivationIndex"><span class="hs-identifier hs-var">DerivationIndex</span></a></span></span><span>
</span><span id="line-286"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="DerivationIndex"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DerivationIndex"><span class="hs-identifier hs-var">DerivationIndex</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="getDerivationIndex"><span class="annot"><span class="annottext">DerivationIndex -&gt; Word32
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#getDerivationIndex"><span class="hs-identifier hs-var hs-var">getDerivationIndex</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word32</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-287"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682427499"><span id="local-6989586621682427501"><span class="annot"><span class="annottext">DerivationIndex -&gt; DerivationIndex -&gt; Bool
(DerivationIndex -&gt; DerivationIndex -&gt; Bool)
-&gt; (DerivationIndex -&gt; DerivationIndex -&gt; Bool)
-&gt; Eq DerivationIndex
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: DerivationIndex -&gt; DerivationIndex -&gt; Bool
$c/= :: DerivationIndex -&gt; DerivationIndex -&gt; Bool
== :: DerivationIndex -&gt; DerivationIndex -&gt; Bool
$c== :: DerivationIndex -&gt; DerivationIndex -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682427484"><span id="local-6989586621682427486"><span id="local-6989586621682427488"><span id="local-6989586621682427490"><span id="local-6989586621682427492"><span id="local-6989586621682427494"><span id="local-6989586621682427496"><span class="annot"><span class="annottext">Eq DerivationIndex
Eq DerivationIndex
-&gt; (DerivationIndex -&gt; DerivationIndex -&gt; Ordering)
-&gt; (DerivationIndex -&gt; DerivationIndex -&gt; Bool)
-&gt; (DerivationIndex -&gt; DerivationIndex -&gt; Bool)
-&gt; (DerivationIndex -&gt; DerivationIndex -&gt; Bool)
-&gt; (DerivationIndex -&gt; DerivationIndex -&gt; Bool)
-&gt; (DerivationIndex -&gt; DerivationIndex -&gt; DerivationIndex)
-&gt; (DerivationIndex -&gt; DerivationIndex -&gt; DerivationIndex)
-&gt; Ord DerivationIndex
DerivationIndex -&gt; DerivationIndex -&gt; Bool
DerivationIndex -&gt; DerivationIndex -&gt; Ordering
DerivationIndex -&gt; DerivationIndex -&gt; DerivationIndex
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: DerivationIndex -&gt; DerivationIndex -&gt; DerivationIndex
$cmin :: DerivationIndex -&gt; DerivationIndex -&gt; DerivationIndex
max :: DerivationIndex -&gt; DerivationIndex -&gt; DerivationIndex
$cmax :: DerivationIndex -&gt; DerivationIndex -&gt; DerivationIndex
&gt;= :: DerivationIndex -&gt; DerivationIndex -&gt; Bool
$c&gt;= :: DerivationIndex -&gt; DerivationIndex -&gt; Bool
&gt; :: DerivationIndex -&gt; DerivationIndex -&gt; Bool
$c&gt; :: DerivationIndex -&gt; DerivationIndex -&gt; Bool
&lt;= :: DerivationIndex -&gt; DerivationIndex -&gt; Bool
$c&lt;= :: DerivationIndex -&gt; DerivationIndex -&gt; Bool
&lt; :: DerivationIndex -&gt; DerivationIndex -&gt; Bool
$c&lt; :: DerivationIndex -&gt; DerivationIndex -&gt; Bool
compare :: DerivationIndex -&gt; DerivationIndex -&gt; Ordering
$ccompare :: DerivationIndex -&gt; DerivationIndex -&gt; Ordering
$cp1Ord :: Eq DerivationIndex
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. DerivationIndex -&gt; Rep DerivationIndex x)
-&gt; (forall x. Rep DerivationIndex x -&gt; DerivationIndex)
-&gt; Generic DerivationIndex
forall x. Rep DerivationIndex x -&gt; DerivationIndex
forall x. DerivationIndex -&gt; Rep DerivationIndex x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep DerivationIndex x -&gt; DerivationIndex
$cfrom :: forall x. DerivationIndex -&gt; Rep DerivationIndex x
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-288"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621682427476"><span id="local-6989586621682427478"><span id="local-6989586621682427480"><span class="annot"><span class="annottext">Int -&gt; DerivationIndex -&gt; ShowS
[DerivationIndex] -&gt; ShowS
DerivationIndex -&gt; String
(Int -&gt; DerivationIndex -&gt; ShowS)
-&gt; (DerivationIndex -&gt; String)
-&gt; ([DerivationIndex] -&gt; ShowS)
-&gt; Show DerivationIndex
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [DerivationIndex] -&gt; ShowS
$cshowList :: [DerivationIndex] -&gt; ShowS
show :: DerivationIndex -&gt; String
$cshow :: DerivationIndex -&gt; String
showsPrec :: Int -&gt; DerivationIndex -&gt; ShowS
$cshowsPrec :: Int -&gt; DerivationIndex -&gt; ShowS
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span> </span><span class="hs-keyword">via</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../quiet/html/src"><span class="hs-identifier hs-type">Quiet</span></a></span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DerivationIndex"><span class="hs-identifier hs-type">DerivationIndex</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-289"></span><span>
</span><span id="line-290"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682427474"><span class="annot"><a href="../../../../ghc/html/libraries/deepseq-1.4.4.0/src"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DerivationIndex"><span class="hs-identifier hs-type">DerivationIndex</span></a></span></span><span>
</span><span id="line-291"></span><span>
</span><span id="line-292"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../../../text-class/html/src"><span class="hs-identifier hs-type">ToText</span></a></span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DerivationIndex"><span class="hs-identifier hs-type">DerivationIndex</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-293"></span><span>    </span><span id="local-6989586621682427472"><span class="annot"><span class="annottext">toText :: DerivationIndex -&gt; Text
</span><a href="#local-6989586621682427472"><span class="hs-identifier hs-var hs-var hs-var hs-var">toText</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DerivationIndex"><span class="hs-identifier hs-type">DerivationIndex</span></a></span><span> </span><span id="local-6989586621682427471"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621682427471"><span class="hs-identifier hs-var">ix</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-294"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621682427471"><span class="hs-identifier hs-var">ix</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621682427470"><span class="hs-identifier hs-var">firstHardened</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="../../../../text/html/src"><span class="hs-identifier hs-var">T.pack</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; String -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621682427471"><span class="hs-identifier hs-var">ix</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Word32
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621682427470"><span class="hs-identifier hs-var">firstHardened</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;H&quot;</span></span><span>
</span><span id="line-295"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="../../../../text/html/src"><span class="hs-identifier hs-var">T.pack</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; String -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621682427471"><span class="hs-identifier hs-var">ix</span></a></span><span>
</span><span id="line-296"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-297"></span><span>        </span><span id="local-6989586621682427470"><span class="annot"><span class="annottext">firstHardened :: Word32
</span><a href="#local-6989586621682427470"><span class="hs-identifier hs-var hs-var">firstHardened</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Index 'Hardened Any -&gt; Word32
forall (derivationType :: DerivationType) (level :: Depth).
Index derivationType level -&gt; Word32
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#getIndex"><span class="hs-identifier hs-var hs-var">getIndex</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Hardened"><span class="hs-identifier hs-type">Hardened</span></a></span><span> </span><span class="annot"><span class="annottext">Index 'Hardened Any
forall a. Bounded a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">minBound</span></a></span><span>
</span><span id="line-298"></span><span>
</span><span id="line-299"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../../../text-class/html/src"><span class="hs-identifier hs-type">FromText</span></a></span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DerivationIndex"><span class="hs-identifier hs-type">DerivationIndex</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-300"></span><span>    </span><span id="local-6989586621682427467"><span class="annot"><span class="annottext">fromText :: Text -&gt; Either TextDecodingError DerivationIndex
</span><a href="#local-6989586621682427467"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromText</span></a></span></span><span> </span><span id="local-6989586621682427466"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682427466"><span class="hs-identifier hs-var">source</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-301"></span><span>        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;H&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Bool
</span><a href="../../../../text/html/src"><span class="hs-operator hs-var">`T.isSuffixOf`</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682427466"><span class="hs-identifier hs-var">source</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-302"></span><span>            </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DerivationIndex"><span class="hs-identifier hs-type">DerivationIndex</span></a></span><span> </span><span id="local-6989586621682427464"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621682427464"><span class="hs-identifier hs-var">ix</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Either TextDecodingError Scientific
</span><a href="#local-6989586621682427463"><span class="hs-identifier hs-var">castNumber</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Text
</span><a href="../../../../text/html/src"><span class="hs-identifier hs-var">T.init</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682427466"><span class="hs-identifier hs-var">source</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Either TextDecodingError Scientific
-&gt; (Scientific -&gt; Either TextDecodingError DerivationIndex)
-&gt; Either TextDecodingError DerivationIndex
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Scientific -&gt; Either TextDecodingError DerivationIndex
</span><a href="#local-6989586621682427461"><span class="hs-identifier hs-var">parseAsScientific</span></a></span><span>
</span><span id="line-303"></span><span>            </span><span class="annot"><span class="annottext">DerivationIndex -&gt; Either TextDecodingError DerivationIndex
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(DerivationIndex -&gt; Either TextDecodingError DerivationIndex)
-&gt; DerivationIndex -&gt; Either TextDecodingError DerivationIndex
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; DerivationIndex
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DerivationIndex"><span class="hs-identifier hs-var">DerivationIndex</span></a></span><span> </span><span class="annot"><span class="annottext">(Word32 -&gt; DerivationIndex) -&gt; Word32 -&gt; DerivationIndex
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621682427464"><span class="hs-identifier hs-var">ix</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Word32
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621682427459"><span class="hs-identifier hs-var">firstHardened</span></a></span><span>
</span><span id="line-304"></span><span>        </span><span class="hs-keyword">else</span><span>
</span><span id="line-305"></span><span>            </span><span class="annot"><span class="annottext">Text -&gt; Either TextDecodingError Scientific
</span><a href="#local-6989586621682427463"><span class="hs-identifier hs-var">castNumber</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682427466"><span class="hs-identifier hs-var">source</span></a></span><span> </span><span class="annot"><span class="annottext">Either TextDecodingError Scientific
-&gt; (Scientific -&gt; Either TextDecodingError DerivationIndex)
-&gt; Either TextDecodingError DerivationIndex
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Scientific -&gt; Either TextDecodingError DerivationIndex
</span><a href="#local-6989586621682427461"><span class="hs-identifier hs-var">parseAsScientific</span></a></span><span>
</span><span id="line-306"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-307"></span><span>        </span><span id="local-6989586621682427459"><span class="annot"><span class="annottext">firstHardened :: Word32
</span><a href="#local-6989586621682427459"><span class="hs-identifier hs-var hs-var">firstHardened</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Index 'Hardened Any -&gt; Word32
forall (derivationType :: DerivationType) (level :: Depth).
Index derivationType level -&gt; Word32
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#getIndex"><span class="hs-identifier hs-var hs-var">getIndex</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Hardened"><span class="hs-identifier hs-type">Hardened</span></a></span><span> </span><span class="annot"><span class="annottext">Index 'Hardened Any
forall a. Bounded a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">minBound</span></a></span><span>
</span><span id="line-308"></span><span>
</span><span id="line-309"></span><span>        </span><span id="local-6989586621682427458"><span class="annot"><span class="annottext">errMalformed :: TextDecodingError
</span><a href="#local-6989586621682427458"><span class="hs-identifier hs-var hs-var">errMalformed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; TextDecodingError
</span><a href="../../../../text-class/html/src"><span class="hs-identifier hs-var">TextDecodingError</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; TextDecodingError) -&gt; String -&gt; TextDecodingError
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">unwords</span></a></span><span>
</span><span id="line-310"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;A derivation index must be a natural number between&quot;</span></span><span>
</span><span id="line-311"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Index 'Soft Any -&gt; Word32
forall (derivationType :: DerivationType) (level :: Depth).
Index derivationType level -&gt; Word32
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#getIndex"><span class="hs-identifier hs-var hs-var">getIndex</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Soft"><span class="hs-identifier hs-type">Soft</span></a></span><span> </span><span class="annot"><span class="annottext">Index 'Soft Any
forall a. Bounded a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">minBound</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-312"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;and&quot;</span></span><span>
</span><span id="line-313"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Index 'Soft Any -&gt; Word32
forall (derivationType :: DerivationType) (level :: Depth).
Index derivationType level -&gt; Word32
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#getIndex"><span class="hs-identifier hs-var hs-var">getIndex</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Soft"><span class="hs-identifier hs-type">Soft</span></a></span><span> </span><span class="annot"><span class="annottext">Index 'Soft Any
forall a. Bounded a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maxBound</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-314"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;with an optional 'H' suffix (e.g. '1815H' or '44').&quot;</span></span><span>
</span><span id="line-315"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Indexes without suffixes are called 'Soft'&quot;</span></span><span>
</span><span id="line-316"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Indexes with suffixes are called 'Hardened'.&quot;</span></span><span>
</span><span id="line-317"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-318"></span><span>
</span><span id="line-319"></span><span>        </span><span class="annot"><a href="#local-6989586621682427461"><span class="hs-identifier hs-type">parseAsScientific</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../scientific/html/src"><span class="hs-identifier hs-type">Scientific</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="../../../../text-class/html/src"><span class="hs-identifier hs-type">TextDecodingError</span></a></span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DerivationIndex"><span class="hs-identifier hs-type">DerivationIndex</span></a></span><span>
</span><span id="line-320"></span><span>        </span><span id="local-6989586621682427461"><span class="annot"><span class="annottext">parseAsScientific :: Scientific -&gt; Either TextDecodingError DerivationIndex
</span><a href="#local-6989586621682427461"><span class="hs-identifier hs-var hs-var">parseAsScientific</span></a></span></span><span> </span><span id="local-6989586621682427454"><span class="annot"><span class="annottext">Scientific
</span><a href="#local-6989586621682427454"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-321"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Scientific -&gt; Maybe Word32
forall i. (Integral i, Bounded i) =&gt; Scientific -&gt; Maybe i
</span><a href="../../../../scientific/html/src"><span class="hs-identifier hs-var">toBoundedInteger</span></a></span><span> </span><span class="annot"><span class="annottext">Scientific
</span><a href="#local-6989586621682427454"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-322"></span><span>                </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621682427453"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621682427453"><span class="hs-identifier hs-var">ix</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621682427453"><span class="hs-identifier hs-var">ix</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621682427459"><span class="hs-identifier hs-var">firstHardened</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-323"></span><span>                    </span><span class="annot"><span class="annottext">DerivationIndex -&gt; Either TextDecodingError DerivationIndex
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(DerivationIndex -&gt; Either TextDecodingError DerivationIndex)
-&gt; DerivationIndex -&gt; Either TextDecodingError DerivationIndex
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; DerivationIndex
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DerivationIndex"><span class="hs-identifier hs-var">DerivationIndex</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621682427453"><span class="hs-identifier hs-var">ix</span></a></span><span>
</span><span id="line-324"></span><span>                </span><span class="annot"><span class="annottext">Maybe Word32
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-325"></span><span>                    </span><span class="annot"><span class="annottext">TextDecodingError -&gt; Either TextDecodingError DerivationIndex
forall a b. a -&gt; Either a b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">TextDecodingError
</span><a href="#local-6989586621682427458"><span class="hs-identifier hs-var">errMalformed</span></a></span><span>
</span><span id="line-326"></span><span>
</span><span id="line-327"></span><span>        </span><span class="annot"><a href="#local-6989586621682427463"><span class="hs-identifier hs-type">castNumber</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="../../../../text-class/html/src"><span class="hs-identifier hs-type">TextDecodingError</span></a></span><span> </span><span class="annot"><a href="../../../../scientific/html/src"><span class="hs-identifier hs-type">Scientific</span></a></span><span>
</span><span id="line-328"></span><span>        </span><span id="local-6989586621682427463"><span class="annot"><span class="annottext">castNumber :: Text -&gt; Either TextDecodingError Scientific
</span><a href="#local-6989586621682427463"><span class="hs-identifier hs-var hs-var">castNumber</span></a></span></span><span> </span><span id="local-6989586621682427451"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682427451"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-329"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe Scientific
forall a. Read a =&gt; String -&gt; Maybe a
</span><a href="../../../../safe/html/src"><span class="hs-identifier hs-var">readMay</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; String
</span><a href="../../../../text/html/src"><span class="hs-identifier hs-var">T.unpack</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682427451"><span class="hs-identifier hs-var">txt</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-330"></span><span>                </span><span class="annot"><span class="annottext">Maybe Scientific
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-331"></span><span>                    </span><span class="annot"><span class="annottext">TextDecodingError -&gt; Either TextDecodingError Scientific
forall a b. a -&gt; Either a b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">TextDecodingError
</span><a href="#local-6989586621682427458"><span class="hs-identifier hs-var">errMalformed</span></a></span><span>
</span><span id="line-332"></span><span>                </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621682427449"><span class="annot"><span class="annottext">Scientific
</span><a href="#local-6989586621682427449"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-333"></span><span>                    </span><span class="annot"><span class="annottext">Scientific -&gt; Either TextDecodingError Scientific
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Scientific
</span><a href="#local-6989586621682427449"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-334"></span><span>
</span><span id="line-335"></span><span class="hs-comment">-- | A derivation index, with phantom-types to disambiguate derivation type.</span><span>
</span><span id="line-336"></span><span class="hs-comment">--</span><span>
</span><span id="line-337"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-338"></span><span class="hs-comment">-- let accountIx = Index 'Hardened 'AccountK</span><span>
</span><span id="line-339"></span><span class="hs-comment">-- let addressIx = Index 'Soft 'AddressK</span><span>
</span><span id="line-340"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-341"></span><span id="local-6989586621682427447"><span id="local-6989586621682427448"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="Index"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-var">Index</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682427777"><span class="annot"><a href="#local-6989586621682427777"><span class="hs-identifier hs-type">derivationType</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DerivationType"><span class="hs-identifier hs-type">DerivationType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682427776"><span class="annot"><a href="#local-6989586621682427776"><span class="hs-identifier hs-type">level</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Depth"><span class="hs-identifier hs-type">Depth</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Index"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-var">Index</span></a></span></span><span>
</span><span id="line-342"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="getIndex"><span class="annot"><span class="annottext">Index derivationType level -&gt; Word32
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#getIndex"><span class="hs-identifier hs-var hs-var">getIndex</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word32</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-343"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x.
 Index derivationType level -&gt; Rep (Index derivationType level) x)
-&gt; (forall x.
    Rep (Index derivationType level) x -&gt; Index derivationType level)
-&gt; Generic (Index derivationType level)
forall x.
Rep (Index derivationType level) x -&gt; Index derivationType level
forall x.
Index derivationType level -&gt; Rep (Index derivationType level) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall (derivationType :: DerivationType) (level :: Depth) x.
Rep (Index derivationType level) x -&gt; Index derivationType level
forall (derivationType :: DerivationType) (level :: Depth) x.
Index derivationType level -&gt; Rep (Index derivationType level) x
$cto :: forall (derivationType :: DerivationType) (level :: Depth) x.
Rep (Index derivationType level) x -&gt; Index derivationType level
$cfrom :: forall (derivationType :: DerivationType) (level :: Depth) x.
Index derivationType level -&gt; Rep (Index derivationType level) x
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682427438"><span id="local-6989586621682427440"><span id="local-6989586621682427442"><span class="annot"><span class="annottext">Int -&gt; Index derivationType level -&gt; ShowS
[Index derivationType level] -&gt; ShowS
Index derivationType level -&gt; String
(Int -&gt; Index derivationType level -&gt; ShowS)
-&gt; (Index derivationType level -&gt; String)
-&gt; ([Index derivationType level] -&gt; ShowS)
-&gt; Show (Index derivationType level)
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall (derivationType :: DerivationType) (level :: Depth).
Int -&gt; Index derivationType level -&gt; ShowS
forall (derivationType :: DerivationType) (level :: Depth).
[Index derivationType level] -&gt; ShowS
forall (derivationType :: DerivationType) (level :: Depth).
Index derivationType level -&gt; String
showList :: [Index derivationType level] -&gt; ShowS
$cshowList :: forall (derivationType :: DerivationType) (level :: Depth).
[Index derivationType level] -&gt; ShowS
show :: Index derivationType level -&gt; String
$cshow :: forall (derivationType :: DerivationType) (level :: Depth).
Index derivationType level -&gt; String
showsPrec :: Int -&gt; Index derivationType level -&gt; ShowS
$cshowsPrec :: forall (derivationType :: DerivationType) (level :: Depth).
Int -&gt; Index derivationType level -&gt; ShowS
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682427434"><span id="local-6989586621682427436"><span class="annot"><span class="annottext">Index derivationType level -&gt; Index derivationType level -&gt; Bool
(Index derivationType level -&gt; Index derivationType level -&gt; Bool)
-&gt; (Index derivationType level
    -&gt; Index derivationType level -&gt; Bool)
-&gt; Eq (Index derivationType level)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall (derivationType :: DerivationType) (level :: Depth).
Index derivationType level -&gt; Index derivationType level -&gt; Bool
/= :: Index derivationType level -&gt; Index derivationType level -&gt; Bool
$c/= :: forall (derivationType :: DerivationType) (level :: Depth).
Index derivationType level -&gt; Index derivationType level -&gt; Bool
== :: Index derivationType level -&gt; Index derivationType level -&gt; Bool
$c== :: forall (derivationType :: DerivationType) (level :: Depth).
Index derivationType level -&gt; Index derivationType level -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682427419"><span id="local-6989586621682427421"><span id="local-6989586621682427423"><span id="local-6989586621682427425"><span id="local-6989586621682427427"><span id="local-6989586621682427429"><span id="local-6989586621682427431"><span class="annot"><span class="annottext">Eq (Index derivationType level)
Eq (Index derivationType level)
-&gt; (Index derivationType level
    -&gt; Index derivationType level -&gt; Ordering)
-&gt; (Index derivationType level
    -&gt; Index derivationType level -&gt; Bool)
-&gt; (Index derivationType level
    -&gt; Index derivationType level -&gt; Bool)
-&gt; (Index derivationType level
    -&gt; Index derivationType level -&gt; Bool)
-&gt; (Index derivationType level
    -&gt; Index derivationType level -&gt; Bool)
-&gt; (Index derivationType level
    -&gt; Index derivationType level -&gt; Index derivationType level)
-&gt; (Index derivationType level
    -&gt; Index derivationType level -&gt; Index derivationType level)
-&gt; Ord (Index derivationType level)
Index derivationType level -&gt; Index derivationType level -&gt; Bool
Index derivationType level
-&gt; Index derivationType level -&gt; Ordering
Index derivationType level
-&gt; Index derivationType level -&gt; Index derivationType level
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall (derivationType :: DerivationType) (level :: Depth).
Eq (Index derivationType level)
forall (derivationType :: DerivationType) (level :: Depth).
Index derivationType level -&gt; Index derivationType level -&gt; Bool
forall (derivationType :: DerivationType) (level :: Depth).
Index derivationType level
-&gt; Index derivationType level -&gt; Ordering
forall (derivationType :: DerivationType) (level :: Depth).
Index derivationType level
-&gt; Index derivationType level -&gt; Index derivationType level
min :: Index derivationType level
-&gt; Index derivationType level -&gt; Index derivationType level
$cmin :: forall (derivationType :: DerivationType) (level :: Depth).
Index derivationType level
-&gt; Index derivationType level -&gt; Index derivationType level
max :: Index derivationType level
-&gt; Index derivationType level -&gt; Index derivationType level
$cmax :: forall (derivationType :: DerivationType) (level :: Depth).
Index derivationType level
-&gt; Index derivationType level -&gt; Index derivationType level
&gt;= :: Index derivationType level -&gt; Index derivationType level -&gt; Bool
$c&gt;= :: forall (derivationType :: DerivationType) (level :: Depth).
Index derivationType level -&gt; Index derivationType level -&gt; Bool
&gt; :: Index derivationType level -&gt; Index derivationType level -&gt; Bool
$c&gt; :: forall (derivationType :: DerivationType) (level :: Depth).
Index derivationType level -&gt; Index derivationType level -&gt; Bool
&lt;= :: Index derivationType level -&gt; Index derivationType level -&gt; Bool
$c&lt;= :: forall (derivationType :: DerivationType) (level :: Depth).
Index derivationType level -&gt; Index derivationType level -&gt; Bool
&lt; :: Index derivationType level -&gt; Index derivationType level -&gt; Bool
$c&lt; :: forall (derivationType :: DerivationType) (level :: Depth).
Index derivationType level -&gt; Index derivationType level -&gt; Bool
compare :: Index derivationType level
-&gt; Index derivationType level -&gt; Ordering
$ccompare :: forall (derivationType :: DerivationType) (level :: Depth).
Index derivationType level
-&gt; Index derivationType level -&gt; Ordering
$cp1Ord :: forall (derivationType :: DerivationType) (level :: Depth).
Eq (Index derivationType level)
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-344"></span><span>
</span><span id="line-345"></span><span id="local-6989586621682427417"><span id="local-6989586621682427418"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682427415"><span class="annot"><a href="../../../../ghc/html/libraries/deepseq-1.4.4.0/src"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427418"><span class="hs-identifier hs-type">derivationType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427417"><span class="hs-identifier hs-type">level</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-346"></span><span>
</span><span id="line-347"></span><span id="local-6989586621682427414"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Bounded</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Hardened"><span class="hs-identifier hs-type">Hardened</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427414"><span class="hs-identifier hs-type">level</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-348"></span><span>    </span><span id="local-6989586621682427411"><span class="annot"><span class="annottext">minBound :: Index 'Hardened level
</span><a href="#local-6989586621682427411"><span class="hs-identifier hs-var hs-var hs-var hs-var">minBound</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Index 'Hardened level
forall (derivationType :: DerivationType) (level :: Depth).
Word32 -&gt; Index derivationType level
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-var">Index</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">0x80000000</span></span><span>
</span><span id="line-349"></span><span>    </span><span id="local-6989586621682427410"><span class="annot"><span class="annottext">maxBound :: Index 'Hardened level
</span><a href="#local-6989586621682427410"><span class="hs-identifier hs-var hs-var hs-var hs-var">maxBound</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Index 'Hardened level
forall (derivationType :: DerivationType) (level :: Depth).
Word32 -&gt; Index derivationType level
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-var">Index</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
forall a. Bounded a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maxBound</span></a></span></span><span>
</span><span id="line-350"></span><span>
</span><span id="line-351"></span><span id="local-6989586621682427409"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Bounded</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Soft"><span class="hs-identifier hs-type">Soft</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427409"><span class="hs-identifier hs-type">level</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-352"></span><span>    </span><span id="local-6989586621682427406"><span class="annot"><span class="annottext">minBound :: Index 'Soft level
</span><a href="#local-6989586621682427406"><span class="hs-identifier hs-var hs-var hs-var hs-var">minBound</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Index 'Soft level
forall (derivationType :: DerivationType) (level :: Depth).
Word32 -&gt; Index derivationType level
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-var">Index</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
forall a. Bounded a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">minBound</span></a></span><span>
</span><span id="line-353"></span><span>    </span><span id="local-6989586621682427405"><span class="annot"><span class="annottext">maxBound :: Index 'Soft level
</span><a href="#local-6989586621682427405"><span class="hs-identifier hs-var hs-var hs-var hs-var">maxBound</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span id="local-6989586621682427404"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621682427404"><span class="hs-identifier hs-var">ix</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bounded (Index 'Hardened Any) =&gt; Index 'Hardened Any
forall a. Bounded a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">minBound</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Hardened"><span class="hs-identifier hs-type">Hardened</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Index 'Soft level
forall (derivationType :: DerivationType) (level :: Depth).
Word32 -&gt; Index derivationType level
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-var">Index</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621682427404"><span class="hs-identifier hs-var">ix</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Word32 -&gt; Word32
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">1</span></span><span class="hs-special">)</span></span><span>
</span><span id="line-354"></span><span>
</span><span id="line-355"></span><span id="local-6989586621682427403"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Bounded</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#WholeDomain"><span class="hs-identifier hs-type">WholeDomain</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427403"><span class="hs-identifier hs-type">level</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-356"></span><span>    </span><span id="local-6989586621682427400"><span class="annot"><span class="annottext">minBound :: Index 'WholeDomain level
</span><a href="#local-6989586621682427400"><span class="hs-identifier hs-var hs-var hs-var hs-var">minBound</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Index 'WholeDomain level
forall (derivationType :: DerivationType) (level :: Depth).
Word32 -&gt; Index derivationType level
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-var">Index</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
forall a. Bounded a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">minBound</span></a></span><span>
</span><span id="line-357"></span><span>    </span><span id="local-6989586621682427399"><span class="annot"><span class="annottext">maxBound :: Index 'WholeDomain level
</span><a href="#local-6989586621682427399"><span class="hs-identifier hs-var hs-var hs-var hs-var">maxBound</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Index 'WholeDomain level
forall (derivationType :: DerivationType) (level :: Depth).
Word32 -&gt; Index derivationType level
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-var">Index</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
forall a. Bounded a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maxBound</span></a></span></span><span>
</span><span id="line-358"></span><span>
</span><span id="line-359"></span><span id="local-6989586621682427398"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682427384"><span id="local-6989586621682427386"><span id="local-6989586621682427388"><span id="local-6989586621682427390"><span id="local-6989586621682427394"><span id="local-6989586621682427396"><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Enum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Hardened"><span class="hs-identifier hs-type">Hardened</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427398"><span class="hs-identifier hs-type">level</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-360"></span><span>    </span><span id="local-6989586621682427383"><span class="annot"><span class="annottext">fromEnum :: Index 'Hardened level -&gt; Int
</span><a href="#local-6989586621682427383"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromEnum</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span id="local-6989586621682427382"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621682427382"><span class="hs-identifier hs-var">ix</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621682427382"><span class="hs-identifier hs-var">ix</span></a></span><span>
</span><span id="line-361"></span><span>    </span><span id="local-6989586621682427381"><span class="annot"><span class="annottext">toEnum :: Int -&gt; Index 'Hardened level
</span><a href="#local-6989586621682427381"><span class="hs-identifier hs-var hs-var hs-var hs-var">toEnum</span></a></span></span><span> </span><span id="local-6989586621682427380"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682427380"><span class="hs-identifier hs-var">ix</span></a></span></span><span>
</span><span id="line-362"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Index 'Hardened Any
forall (derivationType :: DerivationType) (level :: Depth).
Word32 -&gt; Index derivationType level
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-var">Index</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Word32
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682427380"><span class="hs-identifier hs-var">ix</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Index 'Hardened Any -&gt; Index 'Hardened Any -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Bounded (Index 'Hardened Any) =&gt; Index 'Hardened Any
forall a. Bounded a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">minBound</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Hardened"><span class="hs-identifier hs-type">Hardened</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-363"></span><span>            </span><span class="annot"><span class="annottext">String -&gt; Index 'Hardened level
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Index@Hardened.toEnum: bad argument&quot;</span></span><span>
</span><span id="line-364"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-365"></span><span>            </span><span class="annot"><span class="annottext">Word32 -&gt; Index 'Hardened level
forall (derivationType :: DerivationType) (level :: Depth).
Word32 -&gt; Index derivationType level
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-var">Index</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Word32
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682427380"><span class="hs-identifier hs-var">ix</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-366"></span><span>
</span><span id="line-367"></span><span id="local-6989586621682427379"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682427365"><span id="local-6989586621682427367"><span id="local-6989586621682427369"><span id="local-6989586621682427371"><span id="local-6989586621682427375"><span id="local-6989586621682427377"><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Enum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Soft"><span class="hs-identifier hs-type">Soft</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427379"><span class="hs-identifier hs-type">level</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-368"></span><span>    </span><span id="local-6989586621682427364"><span class="annot"><span class="annottext">fromEnum :: Index 'Soft level -&gt; Int
</span><a href="#local-6989586621682427364"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromEnum</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span id="local-6989586621682427363"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621682427363"><span class="hs-identifier hs-var">ix</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621682427363"><span class="hs-identifier hs-var">ix</span></a></span><span>
</span><span id="line-369"></span><span>    </span><span id="local-6989586621682427362"><span class="annot"><span class="annottext">toEnum :: Int -&gt; Index 'Soft level
</span><a href="#local-6989586621682427362"><span class="hs-identifier hs-var hs-var hs-var hs-var">toEnum</span></a></span></span><span> </span><span id="local-6989586621682427361"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682427361"><span class="hs-identifier hs-var">ix</span></a></span></span><span>
</span><span id="line-370"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Index 'Soft Any
forall (derivationType :: DerivationType) (level :: Depth).
Word32 -&gt; Index derivationType level
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-var">Index</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Word32
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682427361"><span class="hs-identifier hs-var">ix</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Index 'Soft Any -&gt; Index 'Soft Any -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Bounded (Index 'Soft Any) =&gt; Index 'Soft Any
forall a. Bounded a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maxBound</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Soft"><span class="hs-identifier hs-type">Soft</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-371"></span><span>            </span><span class="annot"><span class="annottext">String -&gt; Index 'Soft level
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Index@Soft.toEnum: bad argument&quot;</span></span><span>
</span><span id="line-372"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-373"></span><span>            </span><span class="annot"><span class="annottext">Word32 -&gt; Index 'Soft level
forall (derivationType :: DerivationType) (level :: Depth).
Word32 -&gt; Index derivationType level
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-var">Index</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Word32
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682427361"><span class="hs-identifier hs-var">ix</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-374"></span><span>
</span><span id="line-375"></span><span id="local-6989586621682427359"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682427345"><span id="local-6989586621682427347"><span id="local-6989586621682427349"><span id="local-6989586621682427351"><span id="local-6989586621682427355"><span id="local-6989586621682427357"><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Enum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#WholeDomain"><span class="hs-identifier hs-type">WholeDomain</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427359"><span class="hs-identifier hs-type">level</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-376"></span><span>    </span><span id="local-6989586621682427344"><span class="annot"><span class="annottext">fromEnum :: Index 'WholeDomain level -&gt; Int
</span><a href="#local-6989586621682427344"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromEnum</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span id="local-6989586621682427343"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621682427343"><span class="hs-identifier hs-var">ix</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621682427343"><span class="hs-identifier hs-var">ix</span></a></span><span>
</span><span id="line-377"></span><span>    </span><span id="local-6989586621682427342"><span class="annot"><span class="annottext">toEnum :: Int -&gt; Index 'WholeDomain level
</span><a href="#local-6989586621682427342"><span class="hs-identifier hs-var hs-var hs-var hs-var">toEnum</span></a></span></span><span> </span><span id="local-6989586621682427341"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682427341"><span class="hs-identifier hs-var">ix</span></a></span></span><span>
</span><span id="line-378"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Index 'WholeDomain Any
forall (derivationType :: DerivationType) (level :: Depth).
Word32 -&gt; Index derivationType level
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-var">Index</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Word32
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682427341"><span class="hs-identifier hs-var">ix</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Index 'WholeDomain Any -&gt; Index 'WholeDomain Any -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Bounded (Index 'WholeDomain Any) =&gt; Index 'WholeDomain Any
forall a. Bounded a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maxBound</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#WholeDomain"><span class="hs-identifier hs-type">WholeDomain</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-379"></span><span>            </span><span class="annot"><span class="annottext">String -&gt; Index 'WholeDomain level
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Index@WholeDomain.toEnum: bad argument&quot;</span></span><span>
</span><span id="line-380"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-381"></span><span>            </span><span class="annot"><span class="annottext">Word32 -&gt; Index 'WholeDomain level
forall (derivationType :: DerivationType) (level :: Depth).
Word32 -&gt; Index derivationType level
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-var">Index</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Word32
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682427341"><span class="hs-identifier hs-var">ix</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-382"></span><span>
</span><span id="line-383"></span><span id="local-6989586621682427339"><span id="local-6989586621682427340"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../../../formatting/html/src"><span class="hs-identifier hs-type">Buildable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427340"><span class="hs-identifier hs-type">derivationType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427339"><span class="hs-identifier hs-type">level</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-384"></span><span>    </span><span id="local-6989586621682427336"><span class="annot"><span class="annottext">build :: Index derivationType level -&gt; Builder
</span><a href="../../../../formatting/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">build</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span id="local-6989586621682427334"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621682427334"><span class="hs-identifier hs-var">ix</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Builder
forall a. IsString a =&gt; String -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromString</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word32 -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621682427334"><span class="hs-identifier hs-var">ix</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-385"></span><span>
</span><span id="line-386"></span><span id="local-6989586621682427332"><span id="local-6989586621682427333"><span class="hs-keyword">instance</span><span>
</span><span id="line-387"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Enum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427333"><span class="hs-identifier hs-type">derivation</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427332"><span class="hs-identifier hs-type">level</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-388"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Bounded</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427333"><span class="hs-identifier hs-type">derivation</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427332"><span class="hs-identifier hs-type">level</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-389"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../text-class/html/src"><span class="hs-identifier hs-type">FromText</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427333"><span class="hs-identifier hs-type">derivation</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427332"><span class="hs-identifier hs-type">level</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-390"></span><span>    </span><span id="local-6989586621682427330"><span class="annot"><span class="annottext">fromText :: Text -&gt; Either TextDecodingError (Index derivation level)
</span><a href="#local-6989586621682427330"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Either TextDecodingError Int
forall a. FromText a =&gt; Text -&gt; Either TextDecodingError a
</span><a href="../../../../text-class/html/src"><span class="hs-identifier hs-var">fromText</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Either TextDecodingError Int)
-&gt; (Int -&gt; Either TextDecodingError (Index derivation level))
-&gt; Text
-&gt; Either TextDecodingError (Index derivation level)
forall (m :: * -&gt; *) a b c.
Monad m =&gt;
(a -&gt; m b) -&gt; (b -&gt; m c) -&gt; a -&gt; m c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;=&gt;</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682427329"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682427329"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe (Index derivation level)
forall a. (Enum a, Bounded a) =&gt; Int -&gt; Maybe a
</span><a href="../../../../safe/html/src"><span class="hs-identifier hs-var">toEnumMay</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682427329"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-391"></span><span>        </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621682427328"><span class="annot"><span class="annottext">Index derivation level
</span><a href="#local-6989586621682427328"><span class="hs-identifier hs-var">ix</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Index derivation level
-&gt; Either TextDecodingError (Index derivation level)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Index derivation level
</span><a href="#local-6989586621682427328"><span class="hs-identifier hs-var">ix</span></a></span><span>
</span><span id="line-392"></span><span>        </span><span class="annot"><span class="annottext">Maybe (Index derivation level)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TextDecodingError
-&gt; Either TextDecodingError (Index derivation level)
forall a b. a -&gt; Either a b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">(TextDecodingError
 -&gt; Either TextDecodingError (Index derivation level))
-&gt; TextDecodingError
-&gt; Either TextDecodingError (Index derivation level)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; TextDecodingError
</span><a href="../../../../text-class/html/src"><span class="hs-identifier hs-var">TextDecodingError</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; TextDecodingError) -&gt; String -&gt; TextDecodingError
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">unwords</span></a></span><span>
</span><span id="line-393"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Couldn't parse derivation index. Expected an integer between&quot;</span></span><span>
</span><span id="line-394"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Index derivation level -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bounded (Index derivation level) =&gt; Index derivation level
forall a. Bounded a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">minBound</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427333"><span class="hs-identifier hs-type">derivation</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427332"><span class="hs-identifier hs-type">level</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-395"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;and&quot;</span></span><span>
</span><span id="line-396"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Index derivation level -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bounded (Index derivation level) =&gt; Index derivation level
forall a. Bounded a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maxBound</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427333"><span class="hs-identifier hs-type">derivation</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427332"><span class="hs-identifier hs-type">level</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-397"></span><span>            </span><span class="hs-special">]</span></span></span><span>
</span><span id="line-398"></span><span>
</span><span id="line-399"></span><span class="hs-comment">-- Safe coercion to WholeDomain from smaller domains.</span><span>
</span><span id="line-400"></span><span class="hs-keyword">class</span><span> </span><span id="LiftIndex"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#LiftIndex"><span class="hs-identifier hs-var">LiftIndex</span></a></span></span><span> </span><span id="local-6989586621682427724"><span class="annot"><a href="#local-6989586621682427724"><span class="hs-identifier hs-type">derivation</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-401"></span><span>    </span><span id="local-6989586621682427726"><span id="liftIndex"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#liftIndex"><span class="hs-identifier hs-type">liftIndex</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427724"><span class="hs-identifier hs-type">derivation</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427726"><span class="hs-identifier hs-type">level</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#WholeDomain"><span class="hs-identifier hs-type">WholeDomain</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427726"><span class="hs-identifier hs-type">level</span></a></span></span><span>
</span><span id="line-402"></span><span>
</span><span id="line-403"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#LiftIndex"><span class="hs-identifier hs-type">LiftIndex</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Hardened"><span class="hs-identifier hs-type">Hardened</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-404"></span><span>    </span><span id="local-6989586621682427325"><span class="annot"><span class="annottext">liftIndex :: Index 'Hardened level -&gt; Index 'WholeDomain level
</span><a href="#local-6989586621682427325"><span class="hs-identifier hs-var hs-var hs-var hs-var">liftIndex</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span id="local-6989586621682427324"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621682427324"><span class="hs-identifier hs-var">ix</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Index 'WholeDomain level
forall (derivationType :: DerivationType) (level :: Depth).
Word32 -&gt; Index derivationType level
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-var">Index</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621682427324"><span class="hs-identifier hs-var">ix</span></a></span><span>
</span><span id="line-405"></span><span>
</span><span id="line-406"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#LiftIndex"><span class="hs-identifier hs-type">LiftIndex</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Soft"><span class="hs-identifier hs-type">Soft</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-407"></span><span>    </span><span id="local-6989586621682427322"><span class="annot"><span class="annottext">liftIndex :: Index 'Soft level -&gt; Index 'WholeDomain level
</span><a href="#local-6989586621682427322"><span class="hs-identifier hs-var hs-var hs-var hs-var">liftIndex</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span id="local-6989586621682427321"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621682427321"><span class="hs-identifier hs-var">ix</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Index 'WholeDomain level
forall (derivationType :: DerivationType) (level :: Depth).
Word32 -&gt; Index derivationType level
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-var">Index</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621682427321"><span class="hs-identifier hs-var">ix</span></a></span><span>
</span><span id="line-408"></span><span>
</span><span id="line-409"></span><span class="hs-comment">-- | Each 'SeqState' is like a bucket of addresses associated with an 'account'.</span><span>
</span><span id="line-410"></span><span class="hs-comment">-- An 'account' corresponds to a subset of an HD tree as defined in BIP-0039.</span><span>
</span><span id="line-411"></span><span class="hs-comment">--</span><span>
</span><span id="line-412"></span><span class="hs-comment">-- cardano-wallet implements two similar HD schemes on top of BIP-0039 that are:</span><span>
</span><span id="line-413"></span><span class="hs-comment">--</span><span>
</span><span id="line-414"></span><span class="hs-comment">-- - BIP-0044 (for so-called Icarus wallets)</span><span>
</span><span id="line-415"></span><span class="hs-comment">-- - CIP-1815 (for so-called Shelley and Jormungandr wallets)</span><span>
</span><span id="line-416"></span><span class="hs-comment">--</span><span>
</span><span id="line-417"></span><span class="hs-comment">-- Both scheme works by considering 5 levels of derivation from an initial root</span><span>
</span><span id="line-418"></span><span class="hs-comment">-- key (see also 'Depth' from Cardano.Wallet.Primitive.AddressDerivation). A</span><span>
</span><span id="line-419"></span><span class="hs-comment">-- SeqState keeps track of indexes from the two last levels of a derivation</span><span>
</span><span id="line-420"></span><span class="hs-comment">-- branch. The 'DerivationPrefix' defines the first three indexes chosen for</span><span>
</span><span id="line-421"></span><span class="hs-comment">-- this particular 'SeqState'.</span><span>
</span><span id="line-422"></span><span id="local-6989586621682427319"><span id="local-6989586621682427320"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="DerivationPrefix"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DerivationPrefix"><span class="hs-identifier hs-var">DerivationPrefix</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DerivationPrefix"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DerivationPrefix"><span class="hs-identifier hs-var">DerivationPrefix</span></a></span></span><span>
</span><span id="line-423"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Hardened"><span class="hs-identifier hs-type">Hardened</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#PurposeK"><span class="hs-identifier hs-type">PurposeK</span></a></span><span>
</span><span id="line-424"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Hardened"><span class="hs-identifier hs-type">Hardened</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#CoinTypeK"><span class="hs-identifier hs-type">CoinTypeK</span></a></span><span>
</span><span id="line-425"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Hardened"><span class="hs-identifier hs-type">Hardened</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#AccountK"><span class="hs-identifier hs-type">AccountK</span></a></span><span>
</span><span id="line-426"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682427313"><span id="local-6989586621682427315"><span id="local-6989586621682427317"><span class="annot"><span class="annottext">Int -&gt; DerivationPrefix -&gt; ShowS
[DerivationPrefix] -&gt; ShowS
DerivationPrefix -&gt; String
(Int -&gt; DerivationPrefix -&gt; ShowS)
-&gt; (DerivationPrefix -&gt; String)
-&gt; ([DerivationPrefix] -&gt; ShowS)
-&gt; Show DerivationPrefix
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [DerivationPrefix] -&gt; ShowS
$cshowList :: [DerivationPrefix] -&gt; ShowS
show :: DerivationPrefix -&gt; String
$cshow :: DerivationPrefix -&gt; String
showsPrec :: Int -&gt; DerivationPrefix -&gt; ShowS
$cshowsPrec :: Int -&gt; DerivationPrefix -&gt; ShowS
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. DerivationPrefix -&gt; Rep DerivationPrefix x)
-&gt; (forall x. Rep DerivationPrefix x -&gt; DerivationPrefix)
-&gt; Generic DerivationPrefix
forall x. Rep DerivationPrefix x -&gt; DerivationPrefix
forall x. DerivationPrefix -&gt; Rep DerivationPrefix x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep DerivationPrefix x -&gt; DerivationPrefix
$cfrom :: forall x. DerivationPrefix -&gt; Rep DerivationPrefix x
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682427307"><span id="local-6989586621682427309"><span class="annot"><span class="annottext">DerivationPrefix -&gt; DerivationPrefix -&gt; Bool
(DerivationPrefix -&gt; DerivationPrefix -&gt; Bool)
-&gt; (DerivationPrefix -&gt; DerivationPrefix -&gt; Bool)
-&gt; Eq DerivationPrefix
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: DerivationPrefix -&gt; DerivationPrefix -&gt; Bool
$c/= :: DerivationPrefix -&gt; DerivationPrefix -&gt; Bool
== :: DerivationPrefix -&gt; DerivationPrefix -&gt; Bool
$c== :: DerivationPrefix -&gt; DerivationPrefix -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682427292"><span id="local-6989586621682427294"><span id="local-6989586621682427296"><span id="local-6989586621682427298"><span id="local-6989586621682427300"><span id="local-6989586621682427302"><span id="local-6989586621682427304"><span class="annot"><span class="annottext">Eq DerivationPrefix
Eq DerivationPrefix
-&gt; (DerivationPrefix -&gt; DerivationPrefix -&gt; Ordering)
-&gt; (DerivationPrefix -&gt; DerivationPrefix -&gt; Bool)
-&gt; (DerivationPrefix -&gt; DerivationPrefix -&gt; Bool)
-&gt; (DerivationPrefix -&gt; DerivationPrefix -&gt; Bool)
-&gt; (DerivationPrefix -&gt; DerivationPrefix -&gt; Bool)
-&gt; (DerivationPrefix -&gt; DerivationPrefix -&gt; DerivationPrefix)
-&gt; (DerivationPrefix -&gt; DerivationPrefix -&gt; DerivationPrefix)
-&gt; Ord DerivationPrefix
DerivationPrefix -&gt; DerivationPrefix -&gt; Bool
DerivationPrefix -&gt; DerivationPrefix -&gt; Ordering
DerivationPrefix -&gt; DerivationPrefix -&gt; DerivationPrefix
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: DerivationPrefix -&gt; DerivationPrefix -&gt; DerivationPrefix
$cmin :: DerivationPrefix -&gt; DerivationPrefix -&gt; DerivationPrefix
max :: DerivationPrefix -&gt; DerivationPrefix -&gt; DerivationPrefix
$cmax :: DerivationPrefix -&gt; DerivationPrefix -&gt; DerivationPrefix
&gt;= :: DerivationPrefix -&gt; DerivationPrefix -&gt; Bool
$c&gt;= :: DerivationPrefix -&gt; DerivationPrefix -&gt; Bool
&gt; :: DerivationPrefix -&gt; DerivationPrefix -&gt; Bool
$c&gt; :: DerivationPrefix -&gt; DerivationPrefix -&gt; Bool
&lt;= :: DerivationPrefix -&gt; DerivationPrefix -&gt; Bool
$c&lt;= :: DerivationPrefix -&gt; DerivationPrefix -&gt; Bool
&lt; :: DerivationPrefix -&gt; DerivationPrefix -&gt; Bool
$c&lt; :: DerivationPrefix -&gt; DerivationPrefix -&gt; Bool
compare :: DerivationPrefix -&gt; DerivationPrefix -&gt; Ordering
$ccompare :: DerivationPrefix -&gt; DerivationPrefix -&gt; Ordering
$cp1Ord :: Eq DerivationPrefix
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-427"></span><span>
</span><span id="line-428"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682427290"><span class="annot"><a href="../../../../ghc/html/libraries/deepseq-1.4.4.0/src"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DerivationPrefix"><span class="hs-identifier hs-type">DerivationPrefix</span></a></span></span><span>
</span><span id="line-429"></span><span>
</span><span id="line-430"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../../../text-class/html/src"><span class="hs-identifier hs-type">ToText</span></a></span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DerivationPrefix"><span class="hs-identifier hs-type">DerivationPrefix</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-431"></span><span>    </span><span id="local-6989586621682427288"><span class="annot"><span class="annottext">toText :: DerivationPrefix -&gt; Text
</span><a href="#local-6989586621682427288"><span class="hs-identifier hs-var hs-var hs-var hs-var">toText</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DerivationPrefix"><span class="hs-identifier hs-type">DerivationPrefix</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682427287"><span class="annot"><span class="annottext">Index 'Hardened 'PurposeK
</span><a href="#local-6989586621682427287"><span class="hs-identifier hs-var">purpose</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682427286"><span class="annot"><span class="annottext">Index 'Hardened 'CoinTypeK
</span><a href="#local-6989586621682427286"><span class="hs-identifier hs-var">coinType</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682427285"><span class="annot"><span class="annottext">Index 'Hardened 'AccountK
</span><a href="#local-6989586621682427285"><span class="hs-identifier hs-var">account</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-432"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Text] -&gt; Text
</span><a href="../../../../text/html/src"><span class="hs-identifier hs-var">T.intercalate</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;/&quot;</span></span><span>
</span><span id="line-433"></span><span>        </span><span class="annot"><span class="annottext">([Text] -&gt; Text) -&gt; [Text] -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Word32 -&gt; Text) -&gt; [Word32] -&gt; [Text]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Text
forall a. ToText a =&gt; a -&gt; Text
</span><a href="../../../../text-class/html/src"><span class="hs-identifier hs-var">toText</span></a></span><span>
</span><span id="line-434"></span><span>        </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Index 'Hardened 'PurposeK -&gt; Word32
forall (derivationType :: DerivationType) (level :: Depth).
Index derivationType level -&gt; Word32
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#getIndex"><span class="hs-identifier hs-var hs-var">getIndex</span></a></span><span> </span><span class="annot"><span class="annottext">Index 'Hardened 'PurposeK
</span><a href="#local-6989586621682427287"><span class="hs-identifier hs-var">purpose</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Index 'Hardened 'CoinTypeK -&gt; Word32
forall (derivationType :: DerivationType) (level :: Depth).
Index derivationType level -&gt; Word32
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#getIndex"><span class="hs-identifier hs-var hs-var">getIndex</span></a></span><span> </span><span class="annot"><span class="annottext">Index 'Hardened 'CoinTypeK
</span><a href="#local-6989586621682427286"><span class="hs-identifier hs-var">coinType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Index 'Hardened 'AccountK -&gt; Word32
forall (derivationType :: DerivationType) (level :: Depth).
Index derivationType level -&gt; Word32
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#getIndex"><span class="hs-identifier hs-var hs-var">getIndex</span></a></span><span> </span><span class="annot"><span class="annottext">Index 'Hardened 'AccountK
</span><a href="#local-6989586621682427285"><span class="hs-identifier hs-var">account</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-435"></span><span>
</span><span id="line-436"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../../../text-class/html/src"><span class="hs-identifier hs-type">FromText</span></a></span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DerivationPrefix"><span class="hs-identifier hs-type">DerivationPrefix</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-437"></span><span>    </span><span id="local-6989586621682427282"><span class="annot"><span class="annottext">fromText :: Text -&gt; Either TextDecodingError DerivationPrefix
</span><a href="#local-6989586621682427282"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromText</span></a></span></span><span> </span><span id="local-6989586621682427281"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682427281"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-438"></span><span>        </span><span class="annot"><span class="annottext">(Index 'Hardened 'PurposeK, Index 'Hardened 'CoinTypeK,
 Index 'Hardened 'AccountK)
-&gt; DerivationPrefix
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DerivationPrefix"><span class="hs-identifier hs-var">DerivationPrefix</span></a></span><span> </span><span class="annot"><span class="annottext">((Index 'Hardened 'PurposeK, Index 'Hardened 'CoinTypeK,
  Index 'Hardened 'AccountK)
 -&gt; DerivationPrefix)
-&gt; Either
     TextDecodingError
     (Index 'Hardened 'PurposeK, Index 'Hardened 'CoinTypeK,
      Index 'Hardened 'AccountK)
-&gt; Either TextDecodingError DerivationPrefix
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; [Text]
</span><a href="../../../../text/html/src"><span class="hs-identifier hs-var">T.splitOn</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;/&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682427281"><span class="hs-identifier hs-var">txt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-439"></span><span>            </span><span class="hs-special">[</span><span id="local-6989586621682427278"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682427278"><span class="hs-identifier hs-var">purposeT</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682427277"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682427277"><span class="hs-identifier hs-var">coinTypeT</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682427276"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682427276"><span class="hs-identifier hs-var">accountT</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">,</span><span class="hs-special">)</span><span>
</span><span id="line-440"></span><span>                </span><span class="annot"><span class="annottext">(Index 'Hardened 'PurposeK
 -&gt; Index 'Hardened 'CoinTypeK
 -&gt; Index 'Hardened 'AccountK
 -&gt; (Index 'Hardened 'PurposeK, Index 'Hardened 'CoinTypeK,
     Index 'Hardened 'AccountK))
-&gt; Either TextDecodingError (Index 'Hardened 'PurposeK)
-&gt; Either
     TextDecodingError
     (Index 'Hardened 'CoinTypeK
      -&gt; Index 'Hardened 'AccountK
      -&gt; (Index 'Hardened 'PurposeK, Index 'Hardened 'CoinTypeK,
          Index 'Hardened 'AccountK))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Either TextDecodingError (Index 'Hardened 'PurposeK)
forall a. FromText a =&gt; Text -&gt; Either TextDecodingError a
</span><a href="../../../../text-class/html/src"><span class="hs-identifier hs-var">fromText</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682427278"><span class="hs-identifier hs-var">purposeT</span></a></span><span>
</span><span id="line-441"></span><span>                </span><span class="annot"><span class="annottext">Either
  TextDecodingError
  (Index 'Hardened 'CoinTypeK
   -&gt; Index 'Hardened 'AccountK
   -&gt; (Index 'Hardened 'PurposeK, Index 'Hardened 'CoinTypeK,
       Index 'Hardened 'AccountK))
-&gt; Either TextDecodingError (Index 'Hardened 'CoinTypeK)
-&gt; Either
     TextDecodingError
     (Index 'Hardened 'AccountK
      -&gt; (Index 'Hardened 'PurposeK, Index 'Hardened 'CoinTypeK,
          Index 'Hardened 'AccountK))
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Either TextDecodingError (Index 'Hardened 'CoinTypeK)
forall a. FromText a =&gt; Text -&gt; Either TextDecodingError a
</span><a href="../../../../text-class/html/src"><span class="hs-identifier hs-var">fromText</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682427277"><span class="hs-identifier hs-var">coinTypeT</span></a></span><span>
</span><span id="line-442"></span><span>                </span><span class="annot"><span class="annottext">Either
  TextDecodingError
  (Index 'Hardened 'AccountK
   -&gt; (Index 'Hardened 'PurposeK, Index 'Hardened 'CoinTypeK,
       Index 'Hardened 'AccountK))
-&gt; Either TextDecodingError (Index 'Hardened 'AccountK)
-&gt; Either
     TextDecodingError
     (Index 'Hardened 'PurposeK, Index 'Hardened 'CoinTypeK,
      Index 'Hardened 'AccountK)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Either TextDecodingError (Index 'Hardened 'AccountK)
forall a. FromText a =&gt; Text -&gt; Either TextDecodingError a
</span><a href="../../../../text-class/html/src"><span class="hs-identifier hs-var">fromText</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682427276"><span class="hs-identifier hs-var">accountT</span></a></span><span>
</span><span id="line-443"></span><span>            </span><span class="annot"><span class="annottext">[Text]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-444"></span><span>                </span><span class="annot"><span class="annottext">TextDecodingError
-&gt; Either
     TextDecodingError
     (Index 'Hardened 'PurposeK, Index 'Hardened 'CoinTypeK,
      Index 'Hardened 'AccountK)
forall a b. a -&gt; Either a b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">(TextDecodingError
 -&gt; Either
      TextDecodingError
      (Index 'Hardened 'PurposeK, Index 'Hardened 'CoinTypeK,
       Index 'Hardened 'AccountK))
-&gt; TextDecodingError
-&gt; Either
     TextDecodingError
     (Index 'Hardened 'PurposeK, Index 'Hardened 'CoinTypeK,
      Index 'Hardened 'AccountK)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; TextDecodingError
</span><a href="../../../../text-class/html/src"><span class="hs-identifier hs-var">TextDecodingError</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;expected exactly 3 derivation paths&quot;</span></span><span>
</span><span id="line-445"></span><span>
</span><span id="line-446"></span><span class="hs-comment">-- | Type of derivation that should be used with the given indexes.</span><span>
</span><span id="line-447"></span><span class="hs-comment">--</span><span>
</span><span id="line-448"></span><span class="hs-comment">-- In theory, we should only consider two derivation types: soft and hard.</span><span>
</span><span id="line-449"></span><span class="hs-comment">--</span><span>
</span><span id="line-450"></span><span class="hs-comment">-- However, historically, addresses in Cardano used to be generated across the</span><span>
</span><span id="line-451"></span><span class="hs-comment">-- both soft and hard domain. We therefore introduce a 'WholeDomain' derivation</span><span>
</span><span id="line-452"></span><span class="hs-comment">-- type that is the exact union of `Hardened` and `Soft`.</span><span>
</span><span id="line-453"></span><span class="hs-keyword">data</span><span> </span><span id="DerivationType"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DerivationType"><span class="hs-identifier hs-var">DerivationType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Hardened"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Hardened"><span class="hs-identifier hs-var">Hardened</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Soft"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Soft"><span class="hs-identifier hs-var">Soft</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="WholeDomain"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#WholeDomain"><span class="hs-identifier hs-var">WholeDomain</span></a></span></span><span>
</span><span id="line-454"></span><span>
</span><span id="line-455"></span><span class="hs-comment">-- | An interface for doing hard derivations from the root private key</span><span>
</span><span id="line-456"></span><span class="hs-keyword">class</span><span> </span><span id="HardDerivation"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#HardDerivation"><span class="hs-identifier hs-var">HardDerivation</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682427706"><span class="annot"><a href="#local-6989586621682427706"><span class="hs-identifier hs-type">key</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Depth"><span class="hs-identifier hs-type">Depth</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-457"></span><span>    </span><span class="hs-keyword">type</span><span> </span><span id="AddressIndexDerivationType"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#AddressIndexDerivationType"><span class="hs-identifier hs-var">AddressIndexDerivationType</span></a></span></span><span> </span><span id="local-6989586621682427706"><span class="annot"><a href="#local-6989586621682427706"><span class="hs-identifier hs-type">key</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DerivationType"><span class="hs-identifier hs-type">DerivationType</span></a></span><span>
</span><span id="line-458"></span><span>
</span><span id="line-459"></span><span>    </span><span class="hs-comment">-- | Derives account private key from the given root private key, using</span><span>
</span><span id="line-460"></span><span>    </span><span class="hs-comment">-- derivation scheme 2 (see &lt;https://github.com/input-output-hk/cardano-crypto/ cardano-crypto&gt;</span><span>
</span><span id="line-461"></span><span>    </span><span class="hs-comment">-- package for more details).</span><span>
</span><span id="line-462"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-463"></span><span>    </span><span class="hs-comment">-- NOTE: The caller is expected to provide the corresponding passphrase (and</span><span>
</span><span id="line-464"></span><span>    </span><span class="hs-comment">-- to have checked that the passphrase is valid). Providing a wrong passphrase</span><span>
</span><span id="line-465"></span><span>    </span><span class="hs-comment">-- will not make the function fail but will instead, yield an incorrect new</span><span>
</span><span id="line-466"></span><span>    </span><span class="hs-comment">-- key that doesn't belong to the wallet.</span><span>
</span><span id="line-467"></span><span>    </span><span id="deriveAccountPrivateKey"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#deriveAccountPrivateKey"><span class="hs-identifier hs-type">deriveAccountPrivateKey</span></a></span></span><span>
</span><span id="line-468"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Passphrase.Types.html#Passphrase"><span class="hs-identifier hs-type">Passphrase</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;encryption&quot;</span></span><span>
</span><span id="line-469"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682427706"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#RootK"><span class="hs-identifier hs-type">RootK</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier hs-type">XPrv</span></a></span><span>
</span><span id="line-470"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Hardened"><span class="hs-identifier hs-type">Hardened</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#AccountK"><span class="hs-identifier hs-type">AccountK</span></a></span><span>
</span><span id="line-471"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682427706"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#AccountK"><span class="hs-identifier hs-type">AccountK</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier hs-type">XPrv</span></a></span><span>
</span><span id="line-472"></span><span>
</span><span id="line-473"></span><span>    </span><span class="hs-comment">-- | Derives address private key from the given account private key, using</span><span>
</span><span id="line-474"></span><span>    </span><span class="hs-comment">-- derivation scheme 2 (see &lt;https://github.com/input-output-hk/cardano-crypto/ cardano-crypto&gt;</span><span>
</span><span id="line-475"></span><span>    </span><span class="hs-comment">-- package for more details).</span><span>
</span><span id="line-476"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-477"></span><span>    </span><span class="hs-comment">-- It is preferred to use 'deriveAddressPublicKey' whenever possible to avoid</span><span>
</span><span id="line-478"></span><span>    </span><span class="hs-comment">-- having to manipulate passphrases and private keys.</span><span>
</span><span id="line-479"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-480"></span><span>    </span><span class="hs-comment">-- NOTE: The caller is expected to provide the corresponding passphrase (and</span><span>
</span><span id="line-481"></span><span>    </span><span class="hs-comment">-- to have checked that the passphrase is valid). Providing a wrong passphrase</span><span>
</span><span id="line-482"></span><span>    </span><span class="hs-comment">-- will not make the function fail but will instead, yield an incorrect new</span><span>
</span><span id="line-483"></span><span>    </span><span class="hs-comment">-- key that doesn't belong to the wallet.</span><span>
</span><span id="line-484"></span><span>    </span><span id="deriveAddressPrivateKey"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#deriveAddressPrivateKey"><span class="hs-identifier hs-type">deriveAddressPrivateKey</span></a></span></span><span>
</span><span id="line-485"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Passphrase.Types.html#Passphrase"><span class="hs-identifier hs-type">Passphrase</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;encryption&quot;</span></span><span>
</span><span id="line-486"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682427706"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#AccountK"><span class="hs-identifier hs-type">AccountK</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier hs-type">XPrv</span></a></span><span>
</span><span id="line-487"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Role"><span class="hs-identifier hs-type">Role</span></a></span><span>
</span><span id="line-488"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#AddressIndexDerivationType"><span class="hs-identifier hs-type">AddressIndexDerivationType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427706"><span class="hs-identifier hs-type">key</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#AddressK"><span class="hs-identifier hs-type">AddressK</span></a></span><span>
</span><span id="line-489"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682427706"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#AddressK"><span class="hs-identifier hs-type">AddressK</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier hs-type">XPrv</span></a></span><span>
</span><span id="line-490"></span><span>
</span><span id="line-491"></span><span class="hs-comment">-- | An interface for doing soft derivations from an account public key</span><span>
</span><span id="line-492"></span><span class="hs-keyword">class</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#HardDerivation"><span class="hs-identifier hs-type">HardDerivation</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427273"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="SoftDerivation"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#SoftDerivation"><span class="hs-identifier hs-var">SoftDerivation</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682427273"><span class="annot"><a href="#local-6989586621682427273"><span class="hs-identifier hs-type">key</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Depth"><span class="hs-identifier hs-type">Depth</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-493"></span><span>    </span><span class="hs-comment">-- | Derives address public key from the given account public key, using</span><span>
</span><span id="line-494"></span><span>    </span><span class="hs-comment">-- derivation scheme 2 (see &lt;https://github.com/input-output-hk/cardano-crypto/ cardano-crypto&gt;</span><span>
</span><span id="line-495"></span><span>    </span><span class="hs-comment">-- package for more details).</span><span>
</span><span id="line-496"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-497"></span><span>    </span><span class="hs-comment">-- This is the preferred way of deriving new sequential address public keys.</span><span>
</span><span id="line-498"></span><span>    </span><span id="deriveAddressPublicKey"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#deriveAddressPublicKey"><span class="hs-identifier hs-type">deriveAddressPublicKey</span></a></span></span><span>
</span><span id="line-499"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621682427273"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#AccountK"><span class="hs-identifier hs-type">AccountK</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier hs-type">XPub</span></a></span><span>
</span><span id="line-500"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Role"><span class="hs-identifier hs-type">Role</span></a></span><span>
</span><span id="line-501"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Soft"><span class="hs-identifier hs-type">Soft</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#AddressK"><span class="hs-identifier hs-type">AddressK</span></a></span><span>
</span><span id="line-502"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682427273"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#AddressK"><span class="hs-identifier hs-type">AddressK</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier hs-type">XPub</span></a></span><span>
</span><span id="line-503"></span><span>
</span><span id="line-504"></span><span class="hs-comment">-- | Derivation of a reward account, as a type-class because different between</span><span>
</span><span id="line-505"></span><span class="hs-comment">-- key types (in particular, J&#246;rmungandr vs Shelley).</span><span>
</span><span id="line-506"></span><span class="hs-keyword">class</span><span> </span><span id="ToRewardAccount"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#ToRewardAccount"><span class="hs-identifier hs-var">ToRewardAccount</span></a></span></span><span> </span><span id="local-6989586621682427271"><span class="annot"><a href="#local-6989586621682427271"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-507"></span><span>    </span><span id="toRewardAccount"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#toRewardAccount"><span class="hs-identifier hs-type">toRewardAccount</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621682427271"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#AddressK"><span class="hs-identifier hs-type">AddressK</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier hs-type">XPub</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.RewardAccount.html#RewardAccount"><span class="hs-identifier hs-type">RewardAccount</span></a></span><span>
</span><span id="line-508"></span><span>    </span><span id="someRewardAccount"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#someRewardAccount"><span class="hs-identifier hs-type">someRewardAccount</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier hs-type">SomeMnemonic</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier hs-type">XPrv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.RewardAccount.html#RewardAccount"><span class="hs-identifier hs-type">RewardAccount</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DerivationIndex"><span class="hs-identifier hs-type">DerivationIndex</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-509"></span><span>
</span><span id="line-510"></span><span class="hs-comment">-- | Derive a reward account from a root private key. It is agreed by standard</span><span>
</span><span id="line-511"></span><span class="hs-comment">-- that every HD wallet will use only a single reward account. This account is</span><span>
</span><span id="line-512"></span><span class="hs-comment">-- located into a special derivation path and uses the first index of that path.</span><span>
</span><span id="line-513"></span><span id="local-6989586621682427268"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#deriveRewardAccount"><span class="hs-identifier hs-type">deriveRewardAccount</span></a></span><span>
</span><span id="line-514"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#HardDerivation"><span class="hs-identifier hs-type">HardDerivation</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427268"><span class="hs-identifier hs-type">k</span></a></span><span>
</span><span id="line-515"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Bounded</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#AddressIndexDerivationType"><span class="hs-identifier hs-type">AddressIndexDerivationType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427268"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#AddressK"><span class="hs-identifier hs-type">AddressK</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-516"></span><span>       </span><span class="hs-special">)</span><span>
</span><span id="line-517"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Passphrase.Types.html#Passphrase"><span class="hs-identifier hs-type">Passphrase</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;encryption&quot;</span></span><span>
</span><span id="line-518"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682427268"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#RootK"><span class="hs-identifier hs-type">RootK</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier hs-type">XPrv</span></a></span><span>
</span><span id="line-519"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682427268"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#AddressK"><span class="hs-identifier hs-type">AddressK</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier hs-type">XPrv</span></a></span></span><span>
</span><span id="line-520"></span><span id="deriveRewardAccount"><span class="annot"><span class="annottext">deriveRewardAccount :: Passphrase &quot;encryption&quot; -&gt; k 'RootK XPrv -&gt; k 'AddressK XPrv
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#deriveRewardAccount"><span class="hs-identifier hs-var hs-var">deriveRewardAccount</span></a></span></span><span> </span><span id="local-6989586621682427267"><span class="annot"><span class="annottext">Passphrase &quot;encryption&quot;
</span><a href="#local-6989586621682427267"><span class="hs-identifier hs-var">pwd</span></a></span></span><span> </span><span id="local-6989586621682427266"><span class="annot"><span class="annottext">k 'RootK XPrv
</span><a href="#local-6989586621682427266"><span class="hs-identifier hs-var">rootPrv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-521"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682427265"><span class="annot"><span class="annottext">accPrv :: k 'AccountK XPrv
</span><a href="#local-6989586621682427265"><span class="hs-identifier hs-var hs-var">accPrv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Passphrase &quot;encryption&quot;
-&gt; k 'RootK XPrv -&gt; Index 'Hardened 'AccountK -&gt; k 'AccountK XPrv
forall (key :: Depth -&gt; * -&gt; *).
HardDerivation key =&gt;
Passphrase &quot;encryption&quot;
-&gt; key 'RootK XPrv
-&gt; Index 'Hardened 'AccountK
-&gt; key 'AccountK XPrv
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#deriveAccountPrivateKey"><span class="hs-identifier hs-var">deriveAccountPrivateKey</span></a></span><span> </span><span class="annot"><span class="annottext">Passphrase &quot;encryption&quot;
</span><a href="#local-6989586621682427267"><span class="hs-identifier hs-var">pwd</span></a></span><span> </span><span class="annot"><span class="annottext">k 'RootK XPrv
</span><a href="#local-6989586621682427266"><span class="hs-identifier hs-var">rootPrv</span></a></span><span> </span><span class="annot"><span class="annottext">Index 'Hardened 'AccountK
forall a. Bounded a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">minBound</span></a></span><span>
</span><span id="line-522"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Passphrase &quot;encryption&quot;
-&gt; k 'AccountK XPrv
-&gt; Role
-&gt; Index (AddressIndexDerivationType k) 'AddressK
-&gt; k 'AddressK XPrv
forall (key :: Depth -&gt; * -&gt; *).
HardDerivation key =&gt;
Passphrase &quot;encryption&quot;
-&gt; key 'AccountK XPrv
-&gt; Role
-&gt; Index (AddressIndexDerivationType key) 'AddressK
-&gt; key 'AddressK XPrv
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#deriveAddressPrivateKey"><span class="hs-identifier hs-var">deriveAddressPrivateKey</span></a></span><span> </span><span class="annot"><span class="annottext">Passphrase &quot;encryption&quot;
</span><a href="#local-6989586621682427267"><span class="hs-identifier hs-var">pwd</span></a></span><span> </span><span class="annot"><span class="annottext">k 'AccountK XPrv
</span><a href="#local-6989586621682427265"><span class="hs-identifier hs-var">accPrv</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#MutableAccount"><span class="hs-identifier hs-var">MutableAccount</span></a></span><span> </span><span class="annot"><span class="annottext">Index (AddressIndexDerivationType k) 'AddressK
forall a. Bounded a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">minBound</span></a></span><span>
</span><span id="line-523"></span><span>
</span><span id="line-524"></span><span id="local-6989586621682427263"><span id="local-6989586621682427264"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#hashVerificationKey"><span class="hs-identifier hs-type">hashVerificationKey</span></a></span><span>
</span><span id="line-525"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#WalletKey"><span class="hs-identifier hs-type">WalletKey</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427264"><span class="hs-identifier hs-type">key</span></a></span><span>
</span><span id="line-526"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier hs-type">KeyRole</span></a></span><span>
</span><span id="line-527"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682427264"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427263"><span class="hs-identifier hs-type">depth</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier hs-type">XPub</span></a></span><span>
</span><span id="line-528"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier hs-type">KeyHash</span></a></span></span></span><span>
</span><span id="line-529"></span><span id="hashVerificationKey"><span class="annot"><span class="annottext">hashVerificationKey :: KeyRole -&gt; key depth XPub -&gt; KeyHash
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#hashVerificationKey"><span class="hs-identifier hs-var hs-var">hashVerificationKey</span></a></span></span><span> </span><span id="local-6989586621682427262"><span class="annot"><span class="annottext">KeyRole
</span><a href="#local-6989586621682427262"><span class="hs-identifier hs-var">keyRole</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-530"></span><span>    </span><span class="annot"><span class="annottext">KeyRole -&gt; ByteString -&gt; KeyHash
</span><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier hs-var">KeyHash</span></a></span><span> </span><span class="annot"><span class="annottext">KeyRole
</span><a href="#local-6989586621682427262"><span class="hs-identifier hs-var">keyRole</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; KeyHash)
-&gt; (key depth XPub -&gt; ByteString) -&gt; key depth XPub -&gt; KeyHash
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
forall a. ByteArrayAccess a =&gt; a -&gt; ByteString
</span><a href="Crypto.Hash.Utils.html#blake2b224"><span class="hs-identifier hs-var">blake2b224</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; ByteString)
-&gt; (key depth XPub -&gt; ByteString) -&gt; key depth XPub -&gt; ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">XPub -&gt; ByteString
</span><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier hs-var">xpubPublicKey</span></a></span><span> </span><span class="annot"><span class="annottext">(XPub -&gt; ByteString)
-&gt; (key depth XPub -&gt; XPub) -&gt; key depth XPub -&gt; ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">key depth XPub -&gt; XPub
forall (key :: Depth -&gt; * -&gt; *) (depth :: Depth) raw.
WalletKey key =&gt;
key depth raw -&gt; raw
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#getRawKey"><span class="hs-identifier hs-var">getRawKey</span></a></span><span>
</span><span id="line-531"></span><span>
</span><span id="line-532"></span><span class="hs-comment">{-------------------------------------------------------------------------------
                             Network Discrimination
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-535"></span><span>
</span><span id="line-536"></span><span class="hs-comment">-- | Available network options.</span><span>
</span><span id="line-537"></span><span class="hs-comment">--</span><span>
</span><span id="line-538"></span><span class="hs-comment">-- - @Mainnet@: is a shortcut for quickly pointing to mainnet. On Byron and</span><span>
</span><span id="line-539"></span><span class="hs-comment">--              Shelley, it assumes no discrimination. It has a known magic and</span><span>
</span><span id="line-540"></span><span class="hs-comment">--              known genesis parameters.</span><span>
</span><span id="line-541"></span><span class="hs-comment">--</span><span>
</span><span id="line-542"></span><span class="hs-comment">-- - @Testnet@: can be used to identify any network that has a custom genesis</span><span>
</span><span id="line-543"></span><span class="hs-comment">--              and, that requires _explicit_ network discrimination in</span><span>
</span><span id="line-544"></span><span class="hs-comment">--              addresses. Genesis file needs to be passed explicitly when</span><span>
</span><span id="line-545"></span><span class="hs-comment">--              starting the application.</span><span>
</span><span id="line-546"></span><span class="hs-comment">--</span><span>
</span><span id="line-547"></span><span class="hs-comment">-- - @Staging@: very much like testnet, but like mainnet, assumes to no address</span><span>
</span><span id="line-548"></span><span class="hs-comment">--              discrimination. Genesis file needs to be passed explicitly when</span><span>
</span><span id="line-549"></span><span class="hs-comment">--              starting the application.</span><span>
</span><span id="line-550"></span><span class="hs-comment">--</span><span>
</span><span id="line-551"></span><span class="hs-keyword">data</span><span> </span><span id="NetworkDiscriminant"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#NetworkDiscriminant"><span class="hs-identifier hs-var">NetworkDiscriminant</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Mainnet"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Mainnet"><span class="hs-identifier hs-var">Mainnet</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Testnet"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Testnet"><span class="hs-identifier hs-var">Testnet</span></a></span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Nat</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Staging"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Staging"><span class="hs-identifier hs-var">Staging</span></a></span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Nat</span></a></span><span>
</span><span id="line-552"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span>
</span><span id="line-553"></span><span>
</span><span id="line-554"></span><span class="hs-keyword">class</span><span> </span><span id="NetworkDiscriminantVal"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#NetworkDiscriminantVal"><span class="hs-identifier hs-var">NetworkDiscriminantVal</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682427688"><span class="annot"><a href="#local-6989586621682427688"><span class="hs-identifier hs-type">n</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#NetworkDiscriminant"><span class="hs-identifier hs-type">NetworkDiscriminant</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-555"></span><span>    </span><span id="networkDiscriminantVal"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#networkDiscriminantVal"><span class="hs-identifier hs-type">networkDiscriminantVal</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-556"></span><span>
</span><span id="line-557"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#NetworkDiscriminantVal"><span class="hs-identifier hs-type">NetworkDiscriminantVal</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Mainnet"><span class="hs-identifier hs-type">Mainnet</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-558"></span><span>    </span><span id="local-6989586621682427257"><span class="annot"><span class="annottext">networkDiscriminantVal :: Text
</span><a href="#local-6989586621682427257"><span class="hs-identifier hs-var hs-var hs-var hs-var">networkDiscriminantVal</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-559"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;mainnet&quot;</span></span><span>
</span><span id="line-560"></span><span>
</span><span id="line-561"></span><span id="local-6989586621682427256"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">KnownNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427256"><span class="hs-identifier hs-type">pm</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#NetworkDiscriminantVal"><span class="hs-identifier hs-type">NetworkDiscriminantVal</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Testnet"><span class="hs-identifier hs-type">Testnet</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427256"><span class="hs-identifier hs-type">pm</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-562"></span><span>    </span><span id="local-6989586621682427254"><span class="annot"><span class="annottext">networkDiscriminantVal :: Text
</span><a href="#local-6989586621682427254"><span class="hs-identifier hs-var hs-var hs-var hs-var">networkDiscriminantVal</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-563"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;testnet (&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="../../../../text/html/src"><span class="hs-identifier hs-var">T.pack</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; String) -&gt; Integer -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy pm -&gt; Integer
forall (n :: Nat) (proxy :: Nat -&gt; *).
KnownNat n =&gt;
proxy n -&gt; Integer
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">natVal</span></a></span><span> </span><span class="annot"><span class="annottext">(Proxy pm -&gt; Integer) -&gt; Proxy pm -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy pm
forall k (t :: k). Proxy t
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621682427256"><span class="hs-identifier hs-type">pm</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;)&quot;</span></span></span><span>
</span><span id="line-564"></span><span>
</span><span id="line-565"></span><span id="local-6989586621682427252"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">KnownNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427252"><span class="hs-identifier hs-type">pm</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#NetworkDiscriminantVal"><span class="hs-identifier hs-type">NetworkDiscriminantVal</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Staging"><span class="hs-identifier hs-type">Staging</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427252"><span class="hs-identifier hs-type">pm</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-566"></span><span>    </span><span id="local-6989586621682427250"><span class="annot"><span class="annottext">networkDiscriminantVal :: Text
</span><a href="#local-6989586621682427250"><span class="hs-identifier hs-var hs-var hs-var hs-var">networkDiscriminantVal</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-567"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;staging (&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="../../../../text/html/src"><span class="hs-identifier hs-var">T.pack</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; String) -&gt; Integer -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy pm -&gt; Integer
forall (n :: Nat) (proxy :: Nat -&gt; *).
KnownNat n =&gt;
proxy n -&gt; Integer
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">natVal</span></a></span><span> </span><span class="annot"><span class="annottext">(Proxy pm -&gt; Integer) -&gt; Proxy pm -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy pm
forall k (t :: k). Proxy t
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621682427252"><span class="hs-identifier hs-type">pm</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;)&quot;</span></span></span><span>
</span><span id="line-568"></span><span>
</span><span id="line-569"></span><span class="hs-comment">{-------------------------------------------------------------------------------
                     Interface over keys / address types
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-572"></span><span>
</span><span id="line-573"></span><span class="hs-keyword">class</span><span> </span><span id="WalletKey"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#WalletKey"><span class="hs-identifier hs-var">WalletKey</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682427695"><span class="annot"><a href="#local-6989586621682427695"><span class="hs-identifier hs-type">key</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Depth"><span class="hs-identifier hs-type">Depth</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-574"></span><span>    </span><span class="hs-comment">-- | Re-encrypt a private key using a different passphrase.</span><span>
</span><span id="line-575"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-576"></span><span>    </span><span class="hs-comment">-- **Important**:</span><span>
</span><span id="line-577"></span><span>    </span><span class="hs-comment">-- This function doesn't check that the old passphrase is correct! Caller is</span><span>
</span><span id="line-578"></span><span>    </span><span class="hs-comment">-- expected to have already checked that. Using an incorrect passphrase here</span><span>
</span><span id="line-579"></span><span>    </span><span class="hs-comment">-- will lead to very bad thing.</span><span>
</span><span id="line-580"></span><span>    </span><span id="local-6989586621682427249"><span id="changePassphrase"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#changePassphrase"><span class="hs-identifier hs-type">changePassphrase</span></a></span></span><span>
</span><span id="line-581"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.Passphrase.Types.html#PassphraseScheme"><span class="hs-identifier hs-type">PassphraseScheme</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Passphrase.Types.html#Passphrase"><span class="hs-identifier hs-type">Passphrase</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;user&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-582"></span><span>            </span><span class="hs-comment">-- ^ Old passphrase</span><span>
</span><span id="line-583"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.Passphrase.Types.html#PassphraseScheme"><span class="hs-identifier hs-type">PassphraseScheme</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Passphrase.Types.html#Passphrase"><span class="hs-identifier hs-type">Passphrase</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;user&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-584"></span><span>            </span><span class="hs-comment">-- ^ New passphrase</span><span>
</span><span id="line-585"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682427695"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427249"><span class="hs-identifier hs-type">depth</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier hs-type">XPrv</span></a></span><span>
</span><span id="line-586"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682427695"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427249"><span class="hs-identifier hs-type">depth</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier hs-type">XPrv</span></a></span></span><span>
</span><span id="line-587"></span><span>
</span><span id="line-588"></span><span>    </span><span class="hs-comment">-- | Extract the public key part of a private key.</span><span>
</span><span id="line-589"></span><span>    </span><span id="local-6989586621682427247"><span id="publicKey"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#publicKey"><span class="hs-identifier hs-type">publicKey</span></a></span></span><span>
</span><span id="line-590"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621682427695"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427247"><span class="hs-identifier hs-type">depth</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier hs-type">XPrv</span></a></span><span>
</span><span id="line-591"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682427695"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427247"><span class="hs-identifier hs-type">depth</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier hs-type">XPub</span></a></span></span><span>
</span><span id="line-592"></span><span>
</span><span id="line-593"></span><span>    </span><span class="hs-comment">-- | Hash a public key to some other representation.</span><span>
</span><span id="line-594"></span><span>    </span><span id="local-6989586621682427244"><span id="local-6989586621682427245"><span id="digest"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#digest"><span class="hs-identifier hs-type">digest</span></a></span></span><span>
</span><span id="line-595"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cryptonite/html/src"><span class="hs-identifier hs-type">HashAlgorithm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427245"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-596"></span><span>        </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682427695"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427244"><span class="hs-identifier hs-type">depth</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier hs-type">XPub</span></a></span><span>
</span><span id="line-597"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cryptonite/html/src"><span class="hs-identifier hs-type">Digest</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427245"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-598"></span><span>
</span><span id="line-599"></span><span>    </span><span class="hs-comment">-- | Get a short, human-readable string descriptor that uniquely identifies</span><span>
</span><span id="line-600"></span><span>    </span><span class="hs-comment">--   the specified key type.</span><span>
</span><span id="line-601"></span><span>    </span><span id="keyTypeDescriptor"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#keyTypeDescriptor"><span class="hs-identifier hs-type">keyTypeDescriptor</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427695"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-602"></span><span>
</span><span id="line-603"></span><span>    </span><span class="hs-comment">-- | Unwrap the 'WalletKey' to use the 'XPrv' or 'XPub'.</span><span>
</span><span id="line-604"></span><span>    </span><span id="local-6989586621682427692"><span id="local-6989586621682427693"><span id="getRawKey"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#getRawKey"><span class="hs-identifier hs-type">getRawKey</span></a></span></span><span>
</span><span id="line-605"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621682427695"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427693"><span class="hs-identifier hs-type">depth</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427692"><span class="hs-identifier hs-type">raw</span></a></span><span>
</span><span id="line-606"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682427692"><span class="hs-identifier hs-type">raw</span></a></span></span></span><span>
</span><span id="line-607"></span><span>
</span><span id="line-608"></span><span>    </span><span class="hs-comment">-- | Lift 'XPrv' or 'XPub' to 'WalletKey'.</span><span>
</span><span id="line-609"></span><span>    </span><span id="local-6989586621682427240"><span id="local-6989586621682427241"><span id="liftRawKey"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#liftRawKey"><span class="hs-identifier hs-type">liftRawKey</span></a></span></span><span>
</span><span id="line-610"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621682427241"><span class="hs-identifier hs-type">raw</span></a></span><span>
</span><span id="line-611"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682427695"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427240"><span class="hs-identifier hs-type">depth</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427241"><span class="hs-identifier hs-type">raw</span></a></span></span></span><span>
</span><span id="line-612"></span><span>
</span><span id="line-613"></span><span class="hs-comment">-- | The class of keys for which addresses are bounded in length.</span><span>
</span><span id="line-614"></span><span class="hs-comment">--</span><span>
</span><span id="line-615"></span><span class="hs-keyword">class</span><span> </span><span id="BoundedAddressLength"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#BoundedAddressLength"><span class="hs-identifier hs-var">BoundedAddressLength</span></a></span></span><span> </span><span id="local-6989586621682427238"><span class="annot"><a href="#local-6989586621682427238"><span class="hs-identifier hs-type">key</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-616"></span><span>    </span><span class="hs-comment">-- | Returns the longest address that the wallet can generate for a given</span><span>
</span><span id="line-617"></span><span>    </span><span class="hs-comment">--   key.</span><span>
</span><span id="line-618"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-619"></span><span>    </span><span class="hs-comment">-- This is useful in situations where we want to compute some function of</span><span>
</span><span id="line-620"></span><span>    </span><span class="hs-comment">-- an output under construction (such as a minimum UTxO value), but don't</span><span>
</span><span id="line-621"></span><span>    </span><span class="hs-comment">-- yet have convenient access to a real address.</span><span>
</span><span id="line-622"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-623"></span><span>    </span><span class="hs-comment">-- Please note that this address should:</span><span>
</span><span id="line-624"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-625"></span><span>    </span><span class="hs-comment">--  - never be used for anything besides its length and validity properties.</span><span>
</span><span id="line-626"></span><span>    </span><span class="hs-comment">--  - never be used as a payment target within a real transaction.</span><span>
</span><span id="line-627"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-628"></span><span>    </span><span id="maxLengthAddressFor"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#maxLengthAddressFor"><span class="hs-identifier hs-type">maxLengthAddressFor</span></a></span></span><span>
</span><span id="line-629"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427238"><span class="hs-identifier hs-type">key</span></a></span><span>
</span><span id="line-630"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.Address.html#Address"><span class="hs-identifier hs-type">Address</span></a></span><span>
</span><span id="line-631"></span><span>
</span><span id="line-632"></span><span class="hs-comment">-- | Encoding of addresses for certain key types and backend targets.</span><span>
</span><span id="line-633"></span><span class="hs-keyword">class</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#MkKeyFingerprint"><span class="hs-identifier hs-type">MkKeyFingerprint</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427672"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.Address.html#Address"><span class="hs-identifier hs-type">Address</span></a></span><span>
</span><span id="line-634"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span id="PaymentAddress"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#PaymentAddress"><span class="hs-identifier hs-var">PaymentAddress</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682427671"><span class="annot"><a href="#local-6989586621682427671"><span class="hs-identifier hs-type">network</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#NetworkDiscriminant"><span class="hs-identifier hs-type">NetworkDiscriminant</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682427672"><span class="annot"><a href="#local-6989586621682427672"><span class="hs-identifier hs-type">key</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-635"></span><span>    </span><span class="hs-comment">-- | Convert a public key to a payment 'Address' valid for the given</span><span>
</span><span id="line-636"></span><span>    </span><span class="hs-comment">-- network discrimination.</span><span>
</span><span id="line-637"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-638"></span><span>    </span><span class="hs-comment">-- Note that 'paymentAddress' is ambiguous and requires therefore a type</span><span>
</span><span id="line-639"></span><span>    </span><span class="hs-comment">-- application.</span><span>
</span><span id="line-640"></span><span>    </span><span id="paymentAddress"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#paymentAddress"><span class="hs-identifier hs-type">paymentAddress</span></a></span></span><span>
</span><span id="line-641"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621682427672"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#AddressK"><span class="hs-identifier hs-type">AddressK</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier hs-type">XPub</span></a></span><span>
</span><span id="line-642"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.Address.html#Address"><span class="hs-identifier hs-type">Address</span></a></span><span>
</span><span id="line-643"></span><span>
</span><span id="line-644"></span><span>    </span><span class="hs-comment">-- | Lift a payment fingerprint back into a payment address.</span><span>
</span><span id="line-645"></span><span>    </span><span id="liftPaymentAddress"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#liftPaymentAddress"><span class="hs-identifier hs-type">liftPaymentAddress</span></a></span></span><span>
</span><span id="line-646"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#KeyFingerprint"><span class="hs-identifier hs-type">KeyFingerprint</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;payment&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621682427672"><span class="hs-identifier hs-type">key</span></a></span><span>
</span><span id="line-647"></span><span>            </span><span class="hs-comment">-- ^ Payment fingerprint</span><span>
</span><span id="line-648"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.Address.html#Address"><span class="hs-identifier hs-type">Address</span></a></span><span>
</span><span id="line-649"></span><span>
</span><span id="line-650"></span><span id="local-6989586621682427233"><span id="local-6989586621682427234"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#PaymentAddress"><span class="hs-identifier hs-type">PaymentAddress</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Mainnet"><span class="hs-identifier hs-type">Mainnet</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427234"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#PaymentAddress"><span class="hs-identifier hs-type">PaymentAddress</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Staging"><span class="hs-identifier hs-type">Staging</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427233"><span class="hs-identifier hs-type">pm</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682427234"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-651"></span><span>    </span><span id="local-6989586621682427228"><span class="annot"><span class="annottext">paymentAddress :: k 'AddressK XPub -&gt; Address
</span><a href="#local-6989586621682427228"><span class="hs-identifier hs-var hs-var hs-var hs-var">paymentAddress</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (network :: NetworkDiscriminant) (key :: Depth -&gt; * -&gt; *).
PaymentAddress network key =&gt;
key 'AddressK XPub -&gt; Address
forall (key :: Depth -&gt; * -&gt; *).
PaymentAddress 'Mainnet key =&gt;
key 'AddressK XPub -&gt; Address
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#paymentAddress"><span class="hs-identifier hs-var">paymentAddress</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Mainnet"><span class="hs-identifier hs-type">Mainnet</span></a></span><span>
</span><span id="line-652"></span><span>    </span><span id="local-6989586621682427227"><span class="annot"><span class="annottext">liftPaymentAddress :: KeyFingerprint &quot;payment&quot; k -&gt; Address
</span><a href="#local-6989586621682427227"><span class="hs-identifier hs-var hs-var hs-var hs-var">liftPaymentAddress</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (network :: NetworkDiscriminant) (key :: Depth -&gt; * -&gt; *).
PaymentAddress network key =&gt;
KeyFingerprint &quot;payment&quot; key -&gt; Address
forall (key :: Depth -&gt; * -&gt; *).
PaymentAddress 'Mainnet key =&gt;
KeyFingerprint &quot;payment&quot; key -&gt; Address
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#liftPaymentAddress"><span class="hs-identifier hs-var">liftPaymentAddress</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Mainnet"><span class="hs-identifier hs-type">Mainnet</span></a></span></span></span><span>
</span><span id="line-653"></span><span>
</span><span id="line-654"></span><span class="hs-keyword">class</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#PaymentAddress"><span class="hs-identifier hs-type">PaymentAddress</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427667"><span class="hs-identifier hs-type">network</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427666"><span class="hs-identifier hs-type">key</span></a></span><span>
</span><span id="line-655"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span id="DelegationAddress"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DelegationAddress"><span class="hs-identifier hs-var">DelegationAddress</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682427667"><span class="annot"><a href="#local-6989586621682427667"><span class="hs-identifier hs-type">network</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#NetworkDiscriminant"><span class="hs-identifier hs-type">NetworkDiscriminant</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682427666"><span class="annot"><a href="#local-6989586621682427666"><span class="hs-identifier hs-type">key</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-656"></span><span>    </span><span class="hs-comment">-- | Convert a public key and a staking key to a delegation 'Address' valid</span><span>
</span><span id="line-657"></span><span>    </span><span class="hs-comment">-- for the given network discrimination. Funds sent to this address will be</span><span>
</span><span id="line-658"></span><span>    </span><span class="hs-comment">-- delegated according to the delegation settings attached to the delegation</span><span>
</span><span id="line-659"></span><span>    </span><span class="hs-comment">-- key.</span><span>
</span><span id="line-660"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-661"></span><span>    </span><span class="hs-comment">-- Note that 'delegationAddress' is ambiguous and requires therefore a type</span><span>
</span><span id="line-662"></span><span>    </span><span class="hs-comment">-- application.</span><span>
</span><span id="line-663"></span><span>    </span><span id="delegationAddress"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#delegationAddress"><span class="hs-identifier hs-type">delegationAddress</span></a></span></span><span>
</span><span id="line-664"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621682427666"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#AddressK"><span class="hs-identifier hs-type">AddressK</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier hs-type">XPub</span></a></span><span>
</span><span id="line-665"></span><span>            </span><span class="hs-comment">-- ^ Payment key</span><span>
</span><span id="line-666"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682427666"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#AddressK"><span class="hs-identifier hs-type">AddressK</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier hs-type">XPub</span></a></span><span>
</span><span id="line-667"></span><span>            </span><span class="hs-comment">-- ^ Staking key / Reward account</span><span>
</span><span id="line-668"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.Address.html#Address"><span class="hs-identifier hs-type">Address</span></a></span><span>
</span><span id="line-669"></span><span>
</span><span id="line-670"></span><span>    </span><span class="hs-comment">-- | Lift a payment fingerprint back into a delegation address.</span><span>
</span><span id="line-671"></span><span>    </span><span id="liftDelegationAddress"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#liftDelegationAddress"><span class="hs-identifier hs-type">liftDelegationAddress</span></a></span></span><span>
</span><span id="line-672"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#KeyFingerprint"><span class="hs-identifier hs-type">KeyFingerprint</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;payment&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621682427666"><span class="hs-identifier hs-type">key</span></a></span><span>
</span><span id="line-673"></span><span>            </span><span class="hs-comment">-- ^ Payment fingerprint</span><span>
</span><span id="line-674"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682427666"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#AddressK"><span class="hs-identifier hs-type">AddressK</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier hs-type">XPub</span></a></span><span>
</span><span id="line-675"></span><span>            </span><span class="hs-comment">-- ^ Staking key / Reward account</span><span>
</span><span id="line-676"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.Address.html#Address"><span class="hs-identifier hs-type">Address</span></a></span><span>
</span><span id="line-677"></span><span>
</span><span id="line-678"></span><span id="local-6989586621682427223"><span id="local-6989586621682427224"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DelegationAddress"><span class="hs-identifier hs-type">DelegationAddress</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Mainnet"><span class="hs-identifier hs-type">Mainnet</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427224"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#DelegationAddress"><span class="hs-identifier hs-type">DelegationAddress</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Staging"><span class="hs-identifier hs-type">Staging</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427223"><span class="hs-identifier hs-type">pm</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682427224"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-679"></span><span>    </span><span id="local-6989586621682427218"><span class="annot"><span class="annottext">delegationAddress :: k 'AddressK XPub -&gt; k 'AddressK XPub -&gt; Address
</span><a href="#local-6989586621682427218"><span class="hs-identifier hs-var hs-var hs-var hs-var">delegationAddress</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (network :: NetworkDiscriminant) (key :: Depth -&gt; * -&gt; *).
DelegationAddress network key =&gt;
key 'AddressK XPub -&gt; key 'AddressK XPub -&gt; Address
forall (key :: Depth -&gt; * -&gt; *).
DelegationAddress 'Mainnet key =&gt;
key 'AddressK XPub -&gt; key 'AddressK XPub -&gt; Address
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#delegationAddress"><span class="hs-identifier hs-var">delegationAddress</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Mainnet"><span class="hs-identifier hs-type">Mainnet</span></a></span><span>
</span><span id="line-680"></span><span>    </span><span id="local-6989586621682427217"><span class="annot"><span class="annottext">liftDelegationAddress :: KeyFingerprint &quot;payment&quot; k -&gt; k 'AddressK XPub -&gt; Address
</span><a href="#local-6989586621682427217"><span class="hs-identifier hs-var hs-var hs-var hs-var">liftDelegationAddress</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (network :: NetworkDiscriminant) (key :: Depth -&gt; * -&gt; *).
DelegationAddress network key =&gt;
KeyFingerprint &quot;payment&quot; key -&gt; key 'AddressK XPub -&gt; Address
forall (key :: Depth -&gt; * -&gt; *).
DelegationAddress 'Mainnet key =&gt;
KeyFingerprint &quot;payment&quot; key -&gt; key 'AddressK XPub -&gt; Address
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#liftDelegationAddress"><span class="hs-identifier hs-var">liftDelegationAddress</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Mainnet"><span class="hs-identifier hs-type">Mainnet</span></a></span></span></span><span>
</span><span id="line-681"></span><span>
</span><span id="line-682"></span><span class="hs-comment">-- | Operations for saving a private key into a database, and restoring it from</span><span>
</span><span id="line-683"></span><span class="hs-comment">-- a database. The keys should be encoded in hexadecimal strings.</span><span>
</span><span id="line-684"></span><span class="hs-keyword">class</span><span> </span><span id="PersistPrivateKey"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#PersistPrivateKey"><span class="hs-identifier hs-var">PersistPrivateKey</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682427216"><span class="annot"><a href="#local-6989586621682427216"><span class="hs-identifier hs-type">key</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-685"></span><span>    </span><span class="hs-comment">-- | Convert a private key and its password hash into hexadecimal strings</span><span>
</span><span id="line-686"></span><span>    </span><span class="hs-comment">-- suitable for storing in a text file or database column.</span><span>
</span><span id="line-687"></span><span>    </span><span id="serializeXPrv"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#serializeXPrv"><span class="hs-identifier hs-type">serializeXPrv</span></a></span></span><span>
</span><span id="line-688"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682427216"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier hs-type">XPrv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Passphrase.Types.html#PassphraseHash"><span class="hs-identifier hs-type">PassphraseHash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-689"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">ByteString</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-690"></span><span>
</span><span id="line-691"></span><span>    </span><span class="hs-comment">-- | The reverse of 'serializeXPrv'. This may fail if the inputs are not</span><span>
</span><span id="line-692"></span><span>    </span><span class="hs-comment">-- valid hexadecimal strings, or if the key is of the wrong length.</span><span>
</span><span id="line-693"></span><span>    </span><span id="unsafeDeserializeXPrv"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#unsafeDeserializeXPrv"><span class="hs-identifier hs-type">unsafeDeserializeXPrv</span></a></span></span><span>
</span><span id="line-694"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">ByteString</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-695"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682427216"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier hs-type">XPrv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Passphrase.Types.html#PassphraseHash"><span class="hs-identifier hs-type">PassphraseHash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-696"></span><span>
</span><span id="line-697"></span><span class="hs-comment">-- | Operations for saving a public key into a database, and restoring it from</span><span>
</span><span id="line-698"></span><span class="hs-comment">-- a database. The keys should be encoded in hexadecimal strings.</span><span>
</span><span id="line-699"></span><span class="hs-keyword">class</span><span> </span><span id="PersistPublicKey"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#PersistPublicKey"><span class="hs-identifier hs-var">PersistPublicKey</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682427213"><span class="annot"><a href="#local-6989586621682427213"><span class="hs-identifier hs-type">key</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-700"></span><span>    </span><span class="hs-comment">-- | Convert a private key and its password hash into hexadecimal strings</span><span>
</span><span id="line-701"></span><span>    </span><span class="hs-comment">-- suitable for storing in a text file or database column.</span><span>
</span><span id="line-702"></span><span>    </span><span id="serializeXPub"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#serializeXPub"><span class="hs-identifier hs-type">serializeXPub</span></a></span></span><span>
</span><span id="line-703"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621682427213"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier hs-type">XPub</span></a></span><span>
</span><span id="line-704"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">ByteString</span></a></span><span>
</span><span id="line-705"></span><span>
</span><span id="line-706"></span><span>    </span><span class="hs-comment">-- | Convert a public key into hexadecimal strings suitable for storing in</span><span>
</span><span id="line-707"></span><span>    </span><span class="hs-comment">-- a text file or database column.</span><span>
</span><span id="line-708"></span><span>    </span><span id="unsafeDeserializeXPub"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#unsafeDeserializeXPub"><span class="hs-identifier hs-type">unsafeDeserializeXPub</span></a></span></span><span>
</span><span id="line-709"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">ByteString</span></a></span><span>
</span><span id="line-710"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682427213"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="annot"><a href="../../../../cardano-addresses/html/src"><span class="hs-identifier hs-type">XPub</span></a></span><span>
</span><span id="line-711"></span><span>
</span><span id="line-712"></span><span class="hs-comment">-- | Something that uniquely identifies a public key. Typically,</span><span>
</span><span id="line-713"></span><span class="hs-comment">-- a hash of that key or the key itself.</span><span>
</span><span id="line-714"></span><span id="local-6989586621682427209"><span id="local-6989586621682427210"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="KeyFingerprint"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#KeyFingerprint"><span class="hs-identifier hs-var">KeyFingerprint</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682427208"><span class="annot"><a href="#local-6989586621682427208"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Symbol</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682427207"><span class="annot"><a href="#local-6989586621682427207"><span class="hs-identifier hs-type">key</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="KeyFingerprint"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#KeyFingerprint"><span class="hs-identifier hs-var">KeyFingerprint</span></a></span></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">ByteString</span></a></span><span>
</span><span id="line-715"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. KeyFingerprint s key -&gt; Rep (KeyFingerprint s key) x)
-&gt; (forall x. Rep (KeyFingerprint s key) x -&gt; KeyFingerprint s key)
-&gt; Generic (KeyFingerprint s key)
forall x. Rep (KeyFingerprint s key) x -&gt; KeyFingerprint s key
forall x. KeyFingerprint s key -&gt; Rep (KeyFingerprint s key) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall (s :: Symbol) k (key :: k) x.
Rep (KeyFingerprint s key) x -&gt; KeyFingerprint s key
forall (s :: Symbol) k (key :: k) x.
KeyFingerprint s key -&gt; Rep (KeyFingerprint s key) x
$cto :: forall (s :: Symbol) k (key :: k) x.
Rep (KeyFingerprint s key) x -&gt; KeyFingerprint s key
$cfrom :: forall (s :: Symbol) k (key :: k) x.
KeyFingerprint s key -&gt; Rep (KeyFingerprint s key) x
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682427198"><span id="local-6989586621682427200"><span id="local-6989586621682427202"><span class="annot"><span class="annottext">Int -&gt; KeyFingerprint s key -&gt; ShowS
[KeyFingerprint s key] -&gt; ShowS
KeyFingerprint s key -&gt; String
(Int -&gt; KeyFingerprint s key -&gt; ShowS)
-&gt; (KeyFingerprint s key -&gt; String)
-&gt; ([KeyFingerprint s key] -&gt; ShowS)
-&gt; Show (KeyFingerprint s key)
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall (s :: Symbol) k (key :: k).
Int -&gt; KeyFingerprint s key -&gt; ShowS
forall (s :: Symbol) k (key :: k). [KeyFingerprint s key] -&gt; ShowS
forall (s :: Symbol) k (key :: k). KeyFingerprint s key -&gt; String
showList :: [KeyFingerprint s key] -&gt; ShowS
$cshowList :: forall (s :: Symbol) k (key :: k). [KeyFingerprint s key] -&gt; ShowS
show :: KeyFingerprint s key -&gt; String
$cshow :: forall (s :: Symbol) k (key :: k). KeyFingerprint s key -&gt; String
showsPrec :: Int -&gt; KeyFingerprint s key -&gt; ShowS
$cshowsPrec :: forall (s :: Symbol) k (key :: k).
Int -&gt; KeyFingerprint s key -&gt; ShowS
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682427194"><span id="local-6989586621682427196"><span class="annot"><span class="annottext">KeyFingerprint s key -&gt; KeyFingerprint s key -&gt; Bool
(KeyFingerprint s key -&gt; KeyFingerprint s key -&gt; Bool)
-&gt; (KeyFingerprint s key -&gt; KeyFingerprint s key -&gt; Bool)
-&gt; Eq (KeyFingerprint s key)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall (s :: Symbol) k (key :: k).
KeyFingerprint s key -&gt; KeyFingerprint s key -&gt; Bool
/= :: KeyFingerprint s key -&gt; KeyFingerprint s key -&gt; Bool
$c/= :: forall (s :: Symbol) k (key :: k).
KeyFingerprint s key -&gt; KeyFingerprint s key -&gt; Bool
== :: KeyFingerprint s key -&gt; KeyFingerprint s key -&gt; Bool
$c== :: forall (s :: Symbol) k (key :: k).
KeyFingerprint s key -&gt; KeyFingerprint s key -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682427179"><span id="local-6989586621682427181"><span id="local-6989586621682427183"><span id="local-6989586621682427185"><span id="local-6989586621682427187"><span id="local-6989586621682427189"><span id="local-6989586621682427191"><span class="annot"><span class="annottext">Eq (KeyFingerprint s key)
Eq (KeyFingerprint s key)
-&gt; (KeyFingerprint s key -&gt; KeyFingerprint s key -&gt; Ordering)
-&gt; (KeyFingerprint s key -&gt; KeyFingerprint s key -&gt; Bool)
-&gt; (KeyFingerprint s key -&gt; KeyFingerprint s key -&gt; Bool)
-&gt; (KeyFingerprint s key -&gt; KeyFingerprint s key -&gt; Bool)
-&gt; (KeyFingerprint s key -&gt; KeyFingerprint s key -&gt; Bool)
-&gt; (KeyFingerprint s key
    -&gt; KeyFingerprint s key -&gt; KeyFingerprint s key)
-&gt; (KeyFingerprint s key
    -&gt; KeyFingerprint s key -&gt; KeyFingerprint s key)
-&gt; Ord (KeyFingerprint s key)
KeyFingerprint s key -&gt; KeyFingerprint s key -&gt; Bool
KeyFingerprint s key -&gt; KeyFingerprint s key -&gt; Ordering
KeyFingerprint s key
-&gt; KeyFingerprint s key -&gt; KeyFingerprint s key
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall (s :: Symbol) k (key :: k). Eq (KeyFingerprint s key)
forall (s :: Symbol) k (key :: k).
KeyFingerprint s key -&gt; KeyFingerprint s key -&gt; Bool
forall (s :: Symbol) k (key :: k).
KeyFingerprint s key -&gt; KeyFingerprint s key -&gt; Ordering
forall (s :: Symbol) k (key :: k).
KeyFingerprint s key
-&gt; KeyFingerprint s key -&gt; KeyFingerprint s key
min :: KeyFingerprint s key
-&gt; KeyFingerprint s key -&gt; KeyFingerprint s key
$cmin :: forall (s :: Symbol) k (key :: k).
KeyFingerprint s key
-&gt; KeyFingerprint s key -&gt; KeyFingerprint s key
max :: KeyFingerprint s key
-&gt; KeyFingerprint s key -&gt; KeyFingerprint s key
$cmax :: forall (s :: Symbol) k (key :: k).
KeyFingerprint s key
-&gt; KeyFingerprint s key -&gt; KeyFingerprint s key
&gt;= :: KeyFingerprint s key -&gt; KeyFingerprint s key -&gt; Bool
$c&gt;= :: forall (s :: Symbol) k (key :: k).
KeyFingerprint s key -&gt; KeyFingerprint s key -&gt; Bool
&gt; :: KeyFingerprint s key -&gt; KeyFingerprint s key -&gt; Bool
$c&gt; :: forall (s :: Symbol) k (key :: k).
KeyFingerprint s key -&gt; KeyFingerprint s key -&gt; Bool
&lt;= :: KeyFingerprint s key -&gt; KeyFingerprint s key -&gt; Bool
$c&lt;= :: forall (s :: Symbol) k (key :: k).
KeyFingerprint s key -&gt; KeyFingerprint s key -&gt; Bool
&lt; :: KeyFingerprint s key -&gt; KeyFingerprint s key -&gt; Bool
$c&lt; :: forall (s :: Symbol) k (key :: k).
KeyFingerprint s key -&gt; KeyFingerprint s key -&gt; Bool
compare :: KeyFingerprint s key -&gt; KeyFingerprint s key -&gt; Ordering
$ccompare :: forall (s :: Symbol) k (key :: k).
KeyFingerprint s key -&gt; KeyFingerprint s key -&gt; Ordering
$cp1Ord :: forall (s :: Symbol) k (key :: k). Eq (KeyFingerprint s key)
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-716"></span><span>
</span><span id="line-717"></span><span id="local-6989586621682427177"><span id="local-6989586621682427178"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682427175"><span class="annot"><a href="../../../../ghc/html/libraries/deepseq-1.4.4.0/src"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#KeyFingerprint"><span class="hs-identifier hs-type">KeyFingerprint</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427178"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427177"><span class="hs-identifier hs-type">key</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-718"></span><span>
</span><span id="line-719"></span><span class="hs-comment">-- | Produce 'KeyFingerprint' for existing types. A fingerprint here uniquely</span><span>
</span><span id="line-720"></span><span class="hs-comment">-- identifies part of an address. It can refer to either the payment key or, if</span><span>
</span><span id="line-721"></span><span class="hs-comment">-- any, the delegation key of an address.</span><span>
</span><span id="line-722"></span><span class="hs-comment">--</span><span>
</span><span id="line-723"></span><span class="hs-comment">-- The fingerprint obeys the following rules:</span><span>
</span><span id="line-724"></span><span class="hs-comment">--</span><span>
</span><span id="line-725"></span><span class="hs-comment">-- - If two addresses are the same, then they have the same fingerprints</span><span>
</span><span id="line-726"></span><span class="hs-comment">-- - It is possible to lift the fingerprint back into an address</span><span>
</span><span id="line-727"></span><span class="hs-comment">--</span><span>
</span><span id="line-728"></span><span class="hs-comment">-- This second rule pretty much fixes what can be chosen as a fingerprint for</span><span>
</span><span id="line-729"></span><span class="hs-comment">-- various key types:</span><span>
</span><span id="line-730"></span><span class="hs-comment">--</span><span>
</span><span id="line-731"></span><span class="hs-comment">-- 1. For 'ByronKey', it can only be the address itself!</span><span>
</span><span id="line-732"></span><span class="hs-comment">-- 2. For 'ShelleyKey', then the &quot;payment&quot; fingerprint refers to the payment key</span><span>
</span><span id="line-733"></span><span class="hs-comment">--    within a single or grouped address.</span><span>
</span><span id="line-734"></span><span class="hs-keyword">class</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427174"><span class="hs-identifier hs-type">from</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="MkKeyFingerprint"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#MkKeyFingerprint"><span class="hs-identifier hs-var">MkKeyFingerprint</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682427173"><span class="annot"><a href="#local-6989586621682427173"><span class="hs-identifier hs-type">key</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#Depth"><span class="hs-identifier hs-type">Depth</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682427174"><span class="annot"><a href="#local-6989586621682427174"><span class="hs-identifier hs-type">from</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-735"></span><span>    </span><span id="paymentKeyFingerprint"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#paymentKeyFingerprint"><span class="hs-identifier hs-type">paymentKeyFingerprint</span></a></span></span><span>
</span><span id="line-736"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621682427174"><span class="hs-identifier hs-type">from</span></a></span><span>
</span><span id="line-737"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span>
</span><span id="line-738"></span><span>            </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#ErrMkKeyFingerprint"><span class="hs-identifier hs-type">ErrMkKeyFingerprint</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427173"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427174"><span class="hs-identifier hs-type">from</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-739"></span><span>            </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#KeyFingerprint"><span class="hs-identifier hs-type">KeyFingerprint</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;payment&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621682427173"><span class="hs-identifier hs-type">key</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-740"></span><span>
</span><span id="line-741"></span><span class="hs-keyword">data</span><span> </span><span id="ErrMkKeyFingerprint"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#ErrMkKeyFingerprint"><span class="hs-identifier hs-var">ErrMkKeyFingerprint</span></a></span></span><span> </span><span id="local-6989586621682427171"><span class="annot"><a href="#local-6989586621682427171"><span class="hs-identifier hs-type">key</span></a></span></span><span> </span><span id="local-6989586621682427170"><span class="annot"><a href="#local-6989586621682427170"><span class="hs-identifier hs-type">from</span></a></span></span><span>
</span><span id="line-742"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="ErrInvalidAddress"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#ErrInvalidAddress"><span class="hs-identifier hs-var">ErrInvalidAddress</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621682427170"><span class="hs-identifier hs-type">from</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427171"><span class="hs-identifier hs-type">key</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682427163"><span id="local-6989586621682427165"><span id="local-6989586621682427167"><span class="annot"><span class="annottext">Int -&gt; ErrMkKeyFingerprint key from -&gt; ShowS
[ErrMkKeyFingerprint key from] -&gt; ShowS
ErrMkKeyFingerprint key from -&gt; String
(Int -&gt; ErrMkKeyFingerprint key from -&gt; ShowS)
-&gt; (ErrMkKeyFingerprint key from -&gt; String)
-&gt; ([ErrMkKeyFingerprint key from] -&gt; ShowS)
-&gt; Show (ErrMkKeyFingerprint key from)
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall k (key :: k) from.
Show from =&gt;
Int -&gt; ErrMkKeyFingerprint key from -&gt; ShowS
forall k (key :: k) from.
Show from =&gt;
[ErrMkKeyFingerprint key from] -&gt; ShowS
forall k (key :: k) from.
Show from =&gt;
ErrMkKeyFingerprint key from -&gt; String
showList :: [ErrMkKeyFingerprint key from] -&gt; ShowS
$cshowList :: forall k (key :: k) from.
Show from =&gt;
[ErrMkKeyFingerprint key from] -&gt; ShowS
show :: ErrMkKeyFingerprint key from -&gt; String
$cshow :: forall k (key :: k) from.
Show from =&gt;
ErrMkKeyFingerprint key from -&gt; String
showsPrec :: Int -&gt; ErrMkKeyFingerprint key from -&gt; ShowS
$cshowsPrec :: forall k (key :: k) from.
Show from =&gt;
Int -&gt; ErrMkKeyFingerprint key from -&gt; ShowS
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682427159"><span id="local-6989586621682427161"><span class="annot"><span class="annottext">ErrMkKeyFingerprint key from
-&gt; ErrMkKeyFingerprint key from -&gt; Bool
(ErrMkKeyFingerprint key from
 -&gt; ErrMkKeyFingerprint key from -&gt; Bool)
-&gt; (ErrMkKeyFingerprint key from
    -&gt; ErrMkKeyFingerprint key from -&gt; Bool)
-&gt; Eq (ErrMkKeyFingerprint key from)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall k (key :: k) from.
Eq from =&gt;
ErrMkKeyFingerprint key from
-&gt; ErrMkKeyFingerprint key from -&gt; Bool
/= :: ErrMkKeyFingerprint key from
-&gt; ErrMkKeyFingerprint key from -&gt; Bool
$c/= :: forall k (key :: k) from.
Eq from =&gt;
ErrMkKeyFingerprint key from
-&gt; ErrMkKeyFingerprint key from -&gt; Bool
== :: ErrMkKeyFingerprint key from
-&gt; ErrMkKeyFingerprint key from -&gt; Bool
$c== :: forall k (key :: k) from.
Eq from =&gt;
ErrMkKeyFingerprint key from
-&gt; ErrMkKeyFingerprint key from -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-743"></span><span>
</span><span id="line-744"></span><span class="hs-comment">{-------------------------------------------------------------------------------
                                Helpers
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-747"></span><span>
</span><span id="line-748"></span><span class="hs-comment">-- | Encode a 'ByteString' in base16</span><span>
</span><span id="line-749"></span><span id="local-6989586621682427158"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#hex"><span class="hs-identifier hs-type">hex</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../memory/html/src"><span class="hs-identifier hs-type">ByteArrayAccess</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427158"><span class="hs-identifier hs-type">bin</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682427158"><span class="hs-identifier hs-type">bin</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">ByteString</span></a></span></span><span>
</span><span id="line-750"></span><span id="hex"><span class="annot"><span class="annottext">hex :: bin -&gt; ByteString
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#hex"><span class="hs-identifier hs-var hs-var">hex</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Base -&gt; bin -&gt; ByteString
forall bin bout.
(ByteArrayAccess bin, ByteArray bout) =&gt;
Base -&gt; bin -&gt; bout
</span><a href="../../../../memory/html/src"><span class="hs-identifier hs-var">convertToBase</span></a></span><span> </span><span class="annot"><span class="annottext">Base
</span><a href="../../../../memory/html/src"><span class="hs-identifier hs-var">Base16</span></a></span><span>
</span><span id="line-751"></span><span>
</span><span id="line-752"></span><span class="hs-comment">-- | Decode a 'ByteString' from base16</span><span>
</span><span id="line-753"></span><span id="local-6989586621682427156"><span class="annot"><a href="Cardano.Wallet.Primitive.AddressDerivation.html#fromHex"><span class="hs-identifier hs-type">fromHex</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../memory/html/src"><span class="hs-identifier hs-type">ByteArray</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427156"><span class="hs-identifier hs-type">bout</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">ByteString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682427156"><span class="hs-identifier hs-type">bout</span></a></span></span><span>
</span><span id="line-754"></span><span id="fromHex"><span class="annot"><span class="annottext">fromHex :: ByteString -&gt; Either String bout
</span><a href="Cardano.Wallet.Primitive.AddressDerivation.html#fromHex"><span class="hs-identifier hs-var hs-var">fromHex</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Base -&gt; ByteString -&gt; Either String bout
forall bin bout.
(ByteArrayAccess bin, ByteArray bout) =&gt;
Base -&gt; bin -&gt; Either String bout
</span><a href="../../../../memory/html/src"><span class="hs-identifier hs-var">convertFromBase</span></a></span><span> </span><span class="annot"><span class="annottext">Base
</span><a href="../../../../memory/html/src"><span class="hs-identifier hs-var">Base16</span></a></span><span>
</span><span id="line-755"></span></pre></body></html>