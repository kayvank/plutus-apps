<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE BangPatterns #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DeriveGeneric #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DuplicateRecordFields #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE OverloadedLabels #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE OverloadedLists #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-9"></span><span>
</span><span id="line-10"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-11"></span><span class="hs-comment">-- Copyright: &#169; 2021 IOHK</span><span>
</span><span id="line-12"></span><span class="hs-comment">-- License: Apache-2.0</span><span>
</span><span id="line-13"></span><span class="hs-comment">--</span><span>
</span><span id="line-14"></span><span class="hs-comment">-- This module contains an algorithm for planning migrations at a high level.</span><span>
</span><span id="line-15"></span><span class="hs-comment">--</span><span>
</span><span id="line-16"></span><span class="hs-comment">-- It determines how to partition the UTxO set into entries of different types,</span><span>
</span><span id="line-17"></span><span class="hs-comment">-- and in which order to add entries to selections, in order to maximize the</span><span>
</span><span id="line-18"></span><span class="hs-comment">-- number of entries that can be successfully migrated.</span><span>
</span><span id="line-19"></span><span class="hs-comment">--</span><span>
</span><span id="line-20"></span><span class="hs-comment">-- Use 'createPlan' to create a migration plan.</span><span>
</span><span id="line-21"></span><span class="hs-comment">--</span><span>
</span><span id="line-22"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Cardano.Wallet.Primitive.Migration.Planning</span><span>
</span><span id="line-23"></span><span>    </span><span class="hs-special">(</span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Migration planning</span></span><span>
</span><span id="line-25"></span><span>      </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#createPlan"><span class="hs-identifier">createPlan</span></a></span><span>
</span><span id="line-26"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#MigrationPlan"><span class="hs-identifier">MigrationPlan</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span>
</span><span id="line-28"></span><span>    </span><span class="annot"><span class="hs-comment">-- * UTxO entry categorization</span></span><span>
</span><span id="line-29"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#CategorizedUTxO"><span class="hs-identifier">CategorizedUTxO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#UTxOEntryCategory"><span class="hs-identifier">UTxOEntryCategory</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#categorizeUTxO"><span class="hs-identifier">categorizeUTxO</span></a></span><span>
</span><span id="line-32"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#categorizeUTxOEntries"><span class="hs-identifier">categorizeUTxOEntries</span></a></span><span>
</span><span id="line-33"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#categorizeUTxOEntry"><span class="hs-identifier">categorizeUTxOEntry</span></a></span><span>
</span><span id="line-34"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#uncategorizeUTxO"><span class="hs-identifier">uncategorizeUTxO</span></a></span><span>
</span><span id="line-35"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#uncategorizeUTxOEntries"><span class="hs-identifier">uncategorizeUTxOEntries</span></a></span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-38"></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Prelude</span></a></span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Selection.html"><span class="hs-identifier">Cardano.Wallet.Primitive.Migration.Selection</span></a></span><span>
</span><span id="line-42"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Selection.html#RewardWithdrawal"><span class="hs-identifier">RewardWithdrawal</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Selection.html#Selection"><span class="hs-identifier">Selection</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Selection.html#SelectionError"><span class="hs-identifier">SelectionError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.Coin.html"><span class="hs-identifier">Cardano.Wallet.Primitive.Types.Coin</span></a></span><span>
</span><span id="line-44"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.Coin.html#Coin"><span class="hs-identifier">Coin</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.TokenBundle.html"><span class="hs-identifier">Cardano.Wallet.Primitive.Types.TokenBundle</span></a></span><span>
</span><span id="line-46"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.TokenBundle.html#TokenBundle"><span class="hs-identifier">TokenBundle</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.Tx.html"><span class="hs-identifier">Cardano.Wallet.Primitive.Types.Tx</span></a></span><span>
</span><span id="line-48"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.Tx.html#TxConstraints"><span class="hs-identifier">TxConstraints</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.Tx.html#TxIn"><span class="hs-identifier">TxIn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.Tx.html#TxOut"><span class="hs-identifier">TxOut</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.UTxO.html"><span class="hs-identifier">Cardano.Wallet.Primitive.Types.UTxO</span></a></span><span>
</span><span id="line-50"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.UTxO.html#UTxO"><span class="hs-identifier">UTxO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Either</span></a></span><span>
</span><span id="line-52"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">isRight</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Functor</span></a></span><span>
</span><span id="line-54"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator">(&lt;&amp;&gt;)</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../generic-lens/html/src"><span class="hs-identifier">Data.Generics.Internal.VL.Lens</span></a></span><span>
</span><span id="line-56"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../generic-lens/html/src"><span class="hs-identifier">view</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../generic-lens/html/src"><span class="hs-identifier">Data.Generics.Labels</span></a></span><span>
</span><span id="line-58"></span><span>    </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">GHC.Generics</span></a></span><span>
</span><span id="line-60"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Generic</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Selection.html"><span class="hs-identifier">Cardano.Wallet.Primitive.Migration.Selection</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Selection</span></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.TokenBundle.html"><span class="hs-identifier">Cardano.Wallet.Primitive.Types.TokenBundle</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TokenBundle</span></span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Foldable</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">F</span></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.List</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">L</span></span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier">Data.Map.Strict</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-69"></span><span class="hs-comment">-- Migration planning</span><span>
</span><span id="line-70"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span class="hs-comment">-- | Represents a plan for migrating a set of UTxO entries.</span><span>
</span><span id="line-73"></span><span class="hs-comment">--</span><span>
</span><span id="line-74"></span><span class="hs-comment">-- Use 'createPlan' to create a migration plan.</span><span>
</span><span id="line-75"></span><span class="hs-comment">--</span><span>
</span><span id="line-76"></span><span id="local-6989586621682448564"><span id="local-6989586621682448565"></span></span><span class="hs-keyword">data</span><span> </span><span id="MigrationPlan"><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#MigrationPlan"><span class="hs-identifier hs-var">MigrationPlan</span></a></span></span><span> </span><span id="local-6989586621682448643"><span class="annot"><a href="#local-6989586621682448643"><span class="hs-identifier hs-type">input</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="MigrationPlan"><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#MigrationPlan"><span class="hs-identifier hs-var">MigrationPlan</span></a></span></span><span>
</span><span id="line-77"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Aselections%3AMigrationPlan"><span class="annot"><span class="annottext">MigrationPlan input -&gt; [Selection input]
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#%24sel%3Aselections%3AMigrationPlan"><span class="hs-identifier hs-var hs-var">selections</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Selection.html#Selection"><span class="hs-identifier hs-type">Selection</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682448643"><span class="hs-identifier hs-type">input</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-78"></span><span>      </span><span class="hs-comment">-- ^ A list of generated selections: each selection is the basis for a</span><span>
</span><span id="line-79"></span><span>      </span><span class="hs-comment">-- single transaction.</span><span>
</span><span id="line-80"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3Aunselected%3AMigrationPlan"><span class="annot"><span class="annottext">MigrationPlan input -&gt; CategorizedUTxO input
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#%24sel%3Aunselected%3AMigrationPlan"><span class="hs-identifier hs-var hs-var">unselected</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#CategorizedUTxO"><span class="hs-identifier hs-type">CategorizedUTxO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682448643"><span class="hs-identifier hs-type">input</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span>      </span><span class="hs-comment">-- ^ The portion of the UTxO that was not selected.</span><span>
</span><span id="line-82"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AtotalFee%3AMigrationPlan"><span class="annot"><span class="annottext">MigrationPlan input -&gt; Coin
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#%24sel%3AtotalFee%3AMigrationPlan"><span class="hs-identifier hs-var hs-var">totalFee</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span>
</span><span id="line-83"></span><span>      </span><span class="hs-comment">-- ^ The total fee payable: equal to the sum of the fees of the</span><span>
</span><span id="line-84"></span><span>      </span><span class="hs-comment">-- individual selections.</span><span>
</span><span id="line-85"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-86"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682448556"><span id="local-6989586621682448558"><span class="annot"><span class="annottext">MigrationPlan input -&gt; MigrationPlan input -&gt; Bool
(MigrationPlan input -&gt; MigrationPlan input -&gt; Bool)
-&gt; (MigrationPlan input -&gt; MigrationPlan input -&gt; Bool)
-&gt; Eq (MigrationPlan input)
forall input.
Eq input =&gt;
MigrationPlan input -&gt; MigrationPlan input -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: MigrationPlan input -&gt; MigrationPlan input -&gt; Bool
$c/= :: forall input.
Eq input =&gt;
MigrationPlan input -&gt; MigrationPlan input -&gt; Bool
== :: MigrationPlan input -&gt; MigrationPlan input -&gt; Bool
$c== :: forall input.
Eq input =&gt;
MigrationPlan input -&gt; MigrationPlan input -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. MigrationPlan input -&gt; Rep (MigrationPlan input) x)
-&gt; (forall x. Rep (MigrationPlan input) x -&gt; MigrationPlan input)
-&gt; Generic (MigrationPlan input)
forall x. Rep (MigrationPlan input) x -&gt; MigrationPlan input
forall x. MigrationPlan input -&gt; Rep (MigrationPlan input) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall input x. Rep (MigrationPlan input) x -&gt; MigrationPlan input
forall input x. MigrationPlan input -&gt; Rep (MigrationPlan input) x
$cto :: forall input x. Rep (MigrationPlan input) x -&gt; MigrationPlan input
$cfrom :: forall input x. MigrationPlan input -&gt; Rep (MigrationPlan input) x
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682448546"><span id="local-6989586621682448548"><span id="local-6989586621682448550"><span class="annot"><span class="annottext">Int -&gt; MigrationPlan input -&gt; ShowS
[MigrationPlan input] -&gt; ShowS
MigrationPlan input -&gt; String
(Int -&gt; MigrationPlan input -&gt; ShowS)
-&gt; (MigrationPlan input -&gt; String)
-&gt; ([MigrationPlan input] -&gt; ShowS)
-&gt; Show (MigrationPlan input)
forall input. Show input =&gt; Int -&gt; MigrationPlan input -&gt; ShowS
forall input. Show input =&gt; [MigrationPlan input] -&gt; ShowS
forall input. Show input =&gt; MigrationPlan input -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [MigrationPlan input] -&gt; ShowS
$cshowList :: forall input. Show input =&gt; [MigrationPlan input] -&gt; ShowS
show :: MigrationPlan input -&gt; String
$cshow :: forall input. Show input =&gt; MigrationPlan input -&gt; String
showsPrec :: Int -&gt; MigrationPlan input -&gt; ShowS
$cshowsPrec :: forall input. Show input =&gt; Int -&gt; MigrationPlan input -&gt; ShowS
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span class="hs-comment">-- | Creates a migration plan for the given categorized UTxO set and reward</span><span>
</span><span id="line-89"></span><span class="hs-comment">--   withdrawal amount.</span><span>
</span><span id="line-90"></span><span class="hs-comment">--</span><span>
</span><span id="line-91"></span><span class="hs-comment">-- See 'MigrationPlan'.</span><span>
</span><span id="line-92"></span><span class="hs-comment">--</span><span>
</span><span id="line-93"></span><span id="local-6989586621682448544"><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#createPlan"><span class="hs-identifier hs-type">createPlan</span></a></span><span>
</span><span id="line-94"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.Tx.html#TxConstraints"><span class="hs-identifier hs-type">TxConstraints</span></a></span><span>
</span><span id="line-95"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#CategorizedUTxO"><span class="hs-identifier hs-type">CategorizedUTxO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682448544"><span class="hs-identifier hs-type">input</span></a></span><span>
</span><span id="line-96"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Selection.html#RewardWithdrawal"><span class="hs-identifier hs-type">RewardWithdrawal</span></a></span><span>
</span><span id="line-97"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#MigrationPlan"><span class="hs-identifier hs-type">MigrationPlan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682448544"><span class="hs-identifier hs-type">input</span></a></span></span><span>
</span><span id="line-98"></span><span id="createPlan"><span class="annot"><span class="annottext">createPlan :: TxConstraints
-&gt; CategorizedUTxO input -&gt; RewardWithdrawal -&gt; MigrationPlan input
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#createPlan"><span class="hs-identifier hs-var hs-var">createPlan</span></a></span></span><span> </span><span id="local-6989586621682448543"><span class="annot"><span class="annottext">TxConstraints
</span><a href="#local-6989586621682448543"><span class="hs-identifier hs-var">constraints</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-99"></span><span>    </span><span class="annot"><span class="annottext">[Selection input]
-&gt; CategorizedUTxO input -&gt; RewardWithdrawal -&gt; MigrationPlan input
forall input.
[Selection input]
-&gt; CategorizedUTxO input -&gt; RewardWithdrawal -&gt; MigrationPlan input
</span><a href="#local-6989586621682448542"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-100"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-101"></span><span>    </span><span id="local-6989586621682448542"><span class="annot"><span class="annottext">run :: [Selection input]
-&gt; CategorizedUTxO input -&gt; RewardWithdrawal -&gt; MigrationPlan input
</span><a href="#local-6989586621682448542"><span class="hs-identifier hs-var hs-var">run</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621682448541"><span class="annot"><span class="annottext">[Selection input]
</span><a href="#local-6989586621682448541"><span class="hs-identifier hs-var">selections</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621682448540"><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448540"><span class="hs-identifier hs-var">utxo</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621682448539"><span class="annot"><span class="annottext">RewardWithdrawal
</span><a href="#local-6989586621682448539"><span class="hs-identifier hs-var">reward</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-102"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxConstraints
-&gt; CategorizedUTxO input
-&gt; RewardWithdrawal
-&gt; Maybe (CategorizedUTxO input, Selection input)
forall input.
TxConstraints
-&gt; CategorizedUTxO input
-&gt; RewardWithdrawal
-&gt; Maybe (CategorizedUTxO input, Selection input)
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#createSelection"><span class="hs-identifier hs-var">createSelection</span></a></span><span> </span><span class="annot"><span class="annottext">TxConstraints
</span><a href="#local-6989586621682448543"><span class="hs-identifier hs-var">constraints</span></a></span><span> </span><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448540"><span class="hs-identifier hs-var">utxo</span></a></span><span> </span><span class="annot"><span class="annottext">RewardWithdrawal
</span><a href="#local-6989586621682448539"><span class="hs-identifier hs-var">reward</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-103"></span><span>            </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682448537"><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448537"><span class="hs-identifier hs-var">utxo'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682448536"><span class="annot"><span class="annottext">Selection input
</span><a href="#local-6989586621682448536"><span class="hs-identifier hs-var">selection</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-104"></span><span>                </span><span class="annot"><span class="annottext">[Selection input]
-&gt; CategorizedUTxO input -&gt; RewardWithdrawal -&gt; MigrationPlan input
</span><a href="#local-6989586621682448542"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Selection input
</span><a href="#local-6989586621682448536"><span class="hs-identifier hs-var">selection</span></a></span><span> </span><span class="annot"><span class="annottext">Selection input -&gt; [Selection input] -&gt; [Selection input]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[Selection input]
</span><a href="#local-6989586621682448541"><span class="hs-identifier hs-var">selections</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448537"><span class="hs-identifier hs-var">utxo'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coin -&gt; RewardWithdrawal
</span><a href="Cardano.Wallet.Primitive.Migration.Selection.html#RewardWithdrawal"><span class="hs-identifier hs-var">RewardWithdrawal</span></a></span><span> </span><span class="annot"><span class="annottext">(Coin -&gt; RewardWithdrawal) -&gt; Coin -&gt; RewardWithdrawal
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Coin
</span><a href="Cardano.Wallet.Primitive.Types.Coin.html#Coin"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-105"></span><span>            </span><span class="annot"><span class="annottext">Maybe (CategorizedUTxO input, Selection input)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MigrationPlan :: forall input.
[Selection input]
-&gt; CategorizedUTxO input -&gt; Coin -&gt; MigrationPlan input
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#MigrationPlan"><span class="hs-identifier hs-type">MigrationPlan</span></a></span><span>
</span><span id="line-106"></span><span>                </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">[Selection input]
selections :: [Selection input]
$sel:selections:MigrationPlan :: [Selection input]
</span><a href="#local-6989586621682448541"><span class="hs-identifier hs-var hs-var">selections</span></a></span><span>
</span><span id="line-107"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:unselected:MigrationPlan :: CategorizedUTxO input
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#%24sel%3Aunselected%3AMigrationPlan"><span class="hs-identifier hs-var">unselected</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448540"><span class="hs-identifier hs-var">utxo</span></a></span><span>
</span><span id="line-108"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:totalFee:MigrationPlan :: Coin
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#%24sel%3AtotalFee%3AMigrationPlan"><span class="hs-identifier hs-var">totalFee</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Selection input -&gt; Coin) -&gt; [Selection input] -&gt; Coin
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">F.foldMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Coin -&gt; Const Coin Coin)
 -&gt; Selection input -&gt; Const Coin (Selection input))
-&gt; Selection input -&gt; Coin
forall a s. ((a -&gt; Const a a) -&gt; s -&gt; Const a s) -&gt; s -&gt; a
</span><a href="../../../../generic-lens/html/src"><span class="hs-identifier hs-var">view</span></a></span><span> </span><span class="annot"><span class="annottext">IsLabel
  &quot;fee&quot;
  ((Coin -&gt; Const Coin Coin)
   -&gt; Selection input -&gt; Const Coin (Selection input))
(Coin -&gt; Const Coin Coin)
-&gt; Selection input -&gt; Const Coin (Selection input)
</span><a href="#local-6989586621682448532"><span class="hs-var">#fee</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Selection input]
</span><a href="#local-6989586621682448541"><span class="hs-identifier hs-var">selections</span></a></span><span>
</span><span id="line-109"></span><span>                </span><span class="hs-special">}</span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span class="hs-comment">-- | Creates an individual selection for inclusion in a migration plan.</span><span>
</span><span id="line-112"></span><span class="hs-comment">--</span><span>
</span><span id="line-113"></span><span class="hs-comment">-- A selection is the basis for an individual transaction.</span><span>
</span><span id="line-114"></span><span class="hs-comment">--</span><span>
</span><span id="line-115"></span><span class="hs-comment">-- Returns 'Nothing' if it was not possible to create a selection with the UTxO</span><span>
</span><span id="line-116"></span><span class="hs-comment">-- entries that remain.</span><span>
</span><span id="line-117"></span><span class="hs-comment">--</span><span>
</span><span id="line-118"></span><span id="local-6989586621682448648"><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#createSelection"><span class="hs-identifier hs-type">createSelection</span></a></span><span>
</span><span id="line-119"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.Tx.html#TxConstraints"><span class="hs-identifier hs-type">TxConstraints</span></a></span><span>
</span><span id="line-120"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#CategorizedUTxO"><span class="hs-identifier hs-type">CategorizedUTxO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682448648"><span class="hs-identifier hs-type">input</span></a></span><span>
</span><span id="line-121"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Selection.html#RewardWithdrawal"><span class="hs-identifier hs-type">RewardWithdrawal</span></a></span><span>
</span><span id="line-122"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#CategorizedUTxO"><span class="hs-identifier hs-type">CategorizedUTxO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682448648"><span class="hs-identifier hs-type">input</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Selection.html#Selection"><span class="hs-identifier hs-type">Selection</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682448648"><span class="hs-identifier hs-type">input</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-123"></span><span id="createSelection"><span class="annot"><span class="annottext">createSelection :: TxConstraints
-&gt; CategorizedUTxO input
-&gt; RewardWithdrawal
-&gt; Maybe (CategorizedUTxO input, Selection input)
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#createSelection"><span class="hs-identifier hs-var hs-var">createSelection</span></a></span></span><span> </span><span id="local-6989586621682448531"><span class="annot"><span class="annottext">TxConstraints
</span><a href="#local-6989586621682448531"><span class="hs-identifier hs-var">constraints</span></a></span></span><span> </span><span id="local-6989586621682448530"><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448530"><span class="hs-identifier hs-var">utxo</span></a></span></span><span> </span><span id="local-6989586621682448529"><span class="annot"><span class="annottext">RewardWithdrawal
</span><a href="#local-6989586621682448529"><span class="hs-identifier hs-var">rewardWithdrawal</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-124"></span><span>    </span><span class="annot"><span class="annottext">TxConstraints
-&gt; CategorizedUTxO input
-&gt; RewardWithdrawal
-&gt; Maybe (CategorizedUTxO input, Selection input)
forall input.
TxConstraints
-&gt; CategorizedUTxO input
-&gt; RewardWithdrawal
-&gt; Maybe (CategorizedUTxO input, Selection input)
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#initializeSelection"><span class="hs-identifier hs-var">initializeSelection</span></a></span><span> </span><span class="annot"><span class="annottext">TxConstraints
</span><a href="#local-6989586621682448531"><span class="hs-identifier hs-var">constraints</span></a></span><span> </span><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448530"><span class="hs-identifier hs-var">utxo</span></a></span><span> </span><span class="annot"><span class="annottext">RewardWithdrawal
</span><a href="#local-6989586621682448529"><span class="hs-identifier hs-var">rewardWithdrawal</span></a></span><span>
</span><span id="line-125"></span><span>    </span><span class="annot"><span class="annottext">Maybe (CategorizedUTxO input, Selection input)
-&gt; ((CategorizedUTxO input, Selection input)
    -&gt; (CategorizedUTxO input, Selection input))
-&gt; Maybe (CategorizedUTxO input, Selection input)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&amp;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TxConstraints
-&gt; (CategorizedUTxO input, Selection input)
-&gt; (CategorizedUTxO input, Selection input)
forall input.
TxConstraints
-&gt; (CategorizedUTxO input, Selection input)
-&gt; (CategorizedUTxO input, Selection input)
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#extendSelectionUntilFull"><span class="hs-identifier hs-var">extendSelectionUntilFull</span></a></span><span> </span><span class="annot"><span class="annottext">TxConstraints
</span><a href="#local-6989586621682448531"><span class="hs-identifier hs-var">constraints</span></a></span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span class="hs-comment">-- | Initializes a selection with a single entry.</span><span>
</span><span id="line-128"></span><span class="hs-comment">--</span><span>
</span><span id="line-129"></span><span class="hs-comment">-- Returns 'Nothing' if it was not possible to initialize a selection with the</span><span>
</span><span id="line-130"></span><span class="hs-comment">-- UTxO entries that remain.</span><span>
</span><span id="line-131"></span><span class="hs-comment">--</span><span>
</span><span id="line-132"></span><span id="local-6989586621682448526"><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#initializeSelection"><span class="hs-identifier hs-type">initializeSelection</span></a></span><span>
</span><span id="line-133"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.Tx.html#TxConstraints"><span class="hs-identifier hs-type">TxConstraints</span></a></span><span>
</span><span id="line-134"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#CategorizedUTxO"><span class="hs-identifier hs-type">CategorizedUTxO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682448526"><span class="hs-identifier hs-type">input</span></a></span><span>
</span><span id="line-135"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Selection.html#RewardWithdrawal"><span class="hs-identifier hs-type">RewardWithdrawal</span></a></span><span>
</span><span id="line-136"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#CategorizedUTxO"><span class="hs-identifier hs-type">CategorizedUTxO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682448526"><span class="hs-identifier hs-type">input</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Selection.html#Selection"><span class="hs-identifier hs-type">Selection</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682448526"><span class="hs-identifier hs-type">input</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-137"></span><span id="initializeSelection"><span class="annot"><span class="annottext">initializeSelection :: TxConstraints
-&gt; CategorizedUTxO input
-&gt; RewardWithdrawal
-&gt; Maybe (CategorizedUTxO input, Selection input)
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#initializeSelection"><span class="hs-identifier hs-var hs-var">initializeSelection</span></a></span></span><span> </span><span id="local-6989586621682448525"><span class="annot"><span class="annottext">TxConstraints
</span><a href="#local-6989586621682448525"><span class="hs-identifier hs-var">constraints</span></a></span></span><span> </span><span id="local-6989586621682448524"><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448524"><span class="hs-identifier hs-var">utxoAtStart</span></a></span></span><span> </span><span id="local-6989586621682448523"><span class="annot"><span class="annottext">RewardWithdrawal
</span><a href="#local-6989586621682448523"><span class="hs-identifier hs-var">reward</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-138"></span><span>    </span><span class="annot"><span class="annottext">((input, TokenBundle), CategorizedUTxO input)
-&gt; Maybe (CategorizedUTxO input, Selection input)
forall input a.
((input, TokenBundle), a) -&gt; Maybe (a, Selection input)
</span><a href="#local-6989586621682448522"><span class="hs-identifier hs-var">initializeWith</span></a></span><span> </span><span class="annot"><span class="annottext">(((input, TokenBundle), CategorizedUTxO input)
 -&gt; Maybe (CategorizedUTxO input, Selection input))
-&gt; Maybe ((input, TokenBundle), CategorizedUTxO input)
-&gt; Maybe (CategorizedUTxO input, Selection input)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448524"><span class="hs-identifier hs-var">utxoAtStart</span></a></span><span> </span><span class="annot"><span class="annottext">CategorizedUTxO input
-&gt; UTxOEntryCategory
-&gt; Maybe ((input, TokenBundle), CategorizedUTxO input)
forall input.
CategorizedUTxO input
-&gt; UTxOEntryCategory
-&gt; Maybe ((input, TokenBundle), CategorizedUTxO input)
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#select"><span class="hs-operator hs-var">`select`</span></a></span><span> </span><span class="annot"><span class="annottext">UTxOEntryCategory
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#Supporter"><span class="hs-identifier hs-var">Supporter</span></a></span><span>
</span><span id="line-139"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-140"></span><span>    </span><span id="local-6989586621682448522"><span class="annot"><span class="annottext">initializeWith :: ((input, TokenBundle), a) -&gt; Maybe (a, Selection input)
</span><a href="#local-6989586621682448522"><span class="hs-identifier hs-var hs-var">initializeWith</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682448518"><span class="annot"><span class="annottext">(input, TokenBundle)
</span><a href="#local-6989586621682448518"><span class="hs-identifier hs-var">entry</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682448517"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682448517"><span class="hs-identifier hs-var">utxo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-141"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxConstraints
-&gt; RewardWithdrawal
-&gt; NonEmpty (input, TokenBundle)
-&gt; Either SelectionError (Selection input)
forall input.
TxConstraints
-&gt; RewardWithdrawal
-&gt; NonEmpty (input, TokenBundle)
-&gt; Either SelectionError (Selection input)
</span><a href="Cardano.Wallet.Primitive.Migration.Selection.html#create"><span class="hs-identifier hs-var">Selection.create</span></a></span><span> </span><span class="annot"><span class="annottext">TxConstraints
</span><a href="#local-6989586621682448525"><span class="hs-identifier hs-var">constraints</span></a></span><span> </span><span class="annot"><span class="annottext">RewardWithdrawal
</span><a href="#local-6989586621682448523"><span class="hs-identifier hs-var">reward</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">(input, TokenBundle)
Item (NonEmpty (input, TokenBundle))
</span><a href="#local-6989586621682448518"><span class="hs-identifier hs-var">entry</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-142"></span><span>            </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621682448515"><span class="annot"><span class="annottext">Selection input
</span><a href="#local-6989586621682448515"><span class="hs-identifier hs-var">selection</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(a, Selection input) -&gt; Maybe (a, Selection input)
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682448517"><span class="hs-identifier hs-var">utxo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Selection input
</span><a href="#local-6989586621682448515"><span class="hs-identifier hs-var">selection</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-143"></span><span>            </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span class="annot"><span class="annottext">SelectionError
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (a, Selection input)
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-144"></span><span>
</span><span id="line-145"></span><span class="hs-comment">-- | Extends a selection repeatedly, until the selection is full.</span><span>
</span><span id="line-146"></span><span class="hs-comment">--</span><span>
</span><span id="line-147"></span><span class="hs-comment">-- This function terminates when the selection cannot be extended further</span><span>
</span><span id="line-148"></span><span class="hs-comment">-- (because doing so would cause it to exceed the size limit of a transaction),</span><span>
</span><span id="line-149"></span><span class="hs-comment">-- or when there are no more UTxO entries available for selection.</span><span>
</span><span id="line-150"></span><span class="hs-comment">--</span><span>
</span><span id="line-151"></span><span class="hs-comment">-- Priority is given to selecting &quot;freerider&quot; entries: entries that cannot pay</span><span>
</span><span id="line-152"></span><span class="hs-comment">-- for themselves. A &quot;supporter&quot; entry is only added to the selection if there</span><span>
</span><span id="line-153"></span><span class="hs-comment">-- is not enough ada to pay for a &quot;freerider&quot; entry.</span><span>
</span><span id="line-154"></span><span class="hs-comment">--</span><span>
</span><span id="line-155"></span><span id="local-6989586621682448632"><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#extendSelectionUntilFull"><span class="hs-identifier hs-type">extendSelectionUntilFull</span></a></span><span>
</span><span id="line-156"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.Tx.html#TxConstraints"><span class="hs-identifier hs-type">TxConstraints</span></a></span><span>
</span><span id="line-157"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#CategorizedUTxO"><span class="hs-identifier hs-type">CategorizedUTxO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682448632"><span class="hs-identifier hs-type">input</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Selection.html#Selection"><span class="hs-identifier hs-type">Selection</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682448632"><span class="hs-identifier hs-type">input</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-158"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#CategorizedUTxO"><span class="hs-identifier hs-type">CategorizedUTxO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682448632"><span class="hs-identifier hs-type">input</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Selection.html#Selection"><span class="hs-identifier hs-type">Selection</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682448632"><span class="hs-identifier hs-type">input</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-159"></span><span id="extendSelectionUntilFull"><span class="annot"><span class="annottext">extendSelectionUntilFull :: TxConstraints
-&gt; (CategorizedUTxO input, Selection input)
-&gt; (CategorizedUTxO input, Selection input)
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#extendSelectionUntilFull"><span class="hs-identifier hs-var hs-var">extendSelectionUntilFull</span></a></span></span><span> </span><span id="local-6989586621682448514"><span class="annot"><span class="annottext">TxConstraints
</span><a href="#local-6989586621682448514"><span class="hs-identifier hs-var">constraints</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CategorizedUTxO input, Selection input)
-&gt; (CategorizedUTxO input, Selection input)
forall input.
(CategorizedUTxO input, Selection input)
-&gt; (CategorizedUTxO input, Selection input)
</span><a href="#local-6989586621682448513"><span class="hs-identifier hs-var">extendWithFreerider</span></a></span><span>
</span><span id="line-160"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-161"></span><span>    </span><span id="local-6989586621682448513"><span class="annot"><span class="annottext">extendWithFreerider :: (CategorizedUTxO input, Selection input)
-&gt; (CategorizedUTxO input, Selection input)
</span><a href="#local-6989586621682448513"><span class="hs-identifier hs-var hs-var">extendWithFreerider</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">!</span><span id="local-6989586621682448512"><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448512"><span class="hs-identifier hs-var">utxo</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621682448511"><span class="annot"><span class="annottext">Selection input
</span><a href="#local-6989586621682448511"><span class="hs-identifier hs-var">selection</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-162"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">UTxOEntryCategory
-&gt; TxConstraints
-&gt; (CategorizedUTxO input, Selection input)
-&gt; Either
     ExtendSelectionError (CategorizedUTxO input, Selection input)
forall input.
UTxOEntryCategory
-&gt; TxConstraints
-&gt; (CategorizedUTxO input, Selection input)
-&gt; Either
     ExtendSelectionError (CategorizedUTxO input, Selection input)
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#extendWith"><span class="hs-identifier hs-var">extendWith</span></a></span><span> </span><span class="annot"><span class="annottext">UTxOEntryCategory
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#Freerider"><span class="hs-identifier hs-var">Freerider</span></a></span><span> </span><span class="annot"><span class="annottext">TxConstraints
</span><a href="#local-6989586621682448514"><span class="hs-identifier hs-var">constraints</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448512"><span class="hs-identifier hs-var">utxo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Selection input
</span><a href="#local-6989586621682448511"><span class="hs-identifier hs-var">selection</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-163"></span><span>            </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682448508"><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448508"><span class="hs-identifier hs-var">utxo'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682448507"><span class="annot"><span class="annottext">Selection input
</span><a href="#local-6989586621682448507"><span class="hs-identifier hs-var">selection'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-164"></span><span>                </span><span class="annot"><span class="annottext">(CategorizedUTxO input, Selection input)
-&gt; (CategorizedUTxO input, Selection input)
</span><a href="#local-6989586621682448513"><span class="hs-identifier hs-var">extendWithFreerider</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448508"><span class="hs-identifier hs-var">utxo'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Selection input
</span><a href="#local-6989586621682448507"><span class="hs-identifier hs-var">selection'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-165"></span><span>            </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span class="annot"><span class="annottext">ExtendSelectionError
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#ExtendSelectionAdaInsufficient"><span class="hs-identifier hs-var">ExtendSelectionAdaInsufficient</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-166"></span><span>                </span><span class="annot"><span class="annottext">(CategorizedUTxO input, Selection input)
-&gt; (CategorizedUTxO input, Selection input)
</span><a href="#local-6989586621682448505"><span class="hs-identifier hs-var">extendWithSupporter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448512"><span class="hs-identifier hs-var">utxo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Selection input
</span><a href="#local-6989586621682448511"><span class="hs-identifier hs-var">selection</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-167"></span><span>            </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span class="annot"><span class="annottext">ExtendSelectionError
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#ExtendSelectionEntriesExhausted"><span class="hs-identifier hs-var">ExtendSelectionEntriesExhausted</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-168"></span><span>                </span><span class="annot"><span class="annottext">(CategorizedUTxO input, Selection input)
-&gt; (CategorizedUTxO input, Selection input)
</span><a href="#local-6989586621682448505"><span class="hs-identifier hs-var">extendWithSupporter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448512"><span class="hs-identifier hs-var">utxo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Selection input
</span><a href="#local-6989586621682448511"><span class="hs-identifier hs-var">selection</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-169"></span><span>            </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span class="annot"><span class="annottext">ExtendSelectionError
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#ExtendSelectionFull"><span class="hs-identifier hs-var">ExtendSelectionFull</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-170"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448512"><span class="hs-identifier hs-var">utxo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Selection input
</span><a href="#local-6989586621682448511"><span class="hs-identifier hs-var">selection</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-171"></span><span>
</span><span id="line-172"></span><span>    </span><span id="local-6989586621682448505"><span class="annot"><span class="annottext">extendWithSupporter :: (CategorizedUTxO input, Selection input)
-&gt; (CategorizedUTxO input, Selection input)
</span><a href="#local-6989586621682448505"><span class="hs-identifier hs-var hs-var">extendWithSupporter</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">!</span><span id="local-6989586621682448502"><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448502"><span class="hs-identifier hs-var">utxo</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621682448501"><span class="annot"><span class="annottext">Selection input
</span><a href="#local-6989586621682448501"><span class="hs-identifier hs-var">selection</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-173"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">UTxOEntryCategory
-&gt; TxConstraints
-&gt; (CategorizedUTxO input, Selection input)
-&gt; Either
     ExtendSelectionError (CategorizedUTxO input, Selection input)
forall input.
UTxOEntryCategory
-&gt; TxConstraints
-&gt; (CategorizedUTxO input, Selection input)
-&gt; Either
     ExtendSelectionError (CategorizedUTxO input, Selection input)
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#extendWith"><span class="hs-identifier hs-var">extendWith</span></a></span><span> </span><span class="annot"><span class="annottext">UTxOEntryCategory
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#Supporter"><span class="hs-identifier hs-var">Supporter</span></a></span><span> </span><span class="annot"><span class="annottext">TxConstraints
</span><a href="#local-6989586621682448514"><span class="hs-identifier hs-var">constraints</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448502"><span class="hs-identifier hs-var">utxo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Selection input
</span><a href="#local-6989586621682448501"><span class="hs-identifier hs-var">selection</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-174"></span><span>            </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682448500"><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448500"><span class="hs-identifier hs-var">utxo'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682448499"><span class="annot"><span class="annottext">Selection input
</span><a href="#local-6989586621682448499"><span class="hs-identifier hs-var">selection'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-175"></span><span>                </span><span class="annot"><span class="annottext">(CategorizedUTxO input, Selection input)
-&gt; (CategorizedUTxO input, Selection input)
</span><a href="#local-6989586621682448513"><span class="hs-identifier hs-var">extendWithFreerider</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448500"><span class="hs-identifier hs-var">utxo'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Selection input
</span><a href="#local-6989586621682448499"><span class="hs-identifier hs-var">selection'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-176"></span><span>            </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span class="annot"><span class="annottext">ExtendSelectionError
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#ExtendSelectionAdaInsufficient"><span class="hs-identifier hs-var">ExtendSelectionAdaInsufficient</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-177"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448502"><span class="hs-identifier hs-var">utxo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Selection input
</span><a href="#local-6989586621682448501"><span class="hs-identifier hs-var">selection</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-178"></span><span>            </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span class="annot"><span class="annottext">ExtendSelectionError
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#ExtendSelectionEntriesExhausted"><span class="hs-identifier hs-var">ExtendSelectionEntriesExhausted</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-179"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448502"><span class="hs-identifier hs-var">utxo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Selection input
</span><a href="#local-6989586621682448501"><span class="hs-identifier hs-var">selection</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-180"></span><span>            </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span class="annot"><span class="annottext">ExtendSelectionError
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#ExtendSelectionFull"><span class="hs-identifier hs-var">ExtendSelectionFull</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-181"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448502"><span class="hs-identifier hs-var">utxo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Selection input
</span><a href="#local-6989586621682448501"><span class="hs-identifier hs-var">selection</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-182"></span><span>
</span><span id="line-183"></span><span class="hs-keyword">data</span><span> </span><span id="ExtendSelectionError"><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#ExtendSelectionError"><span class="hs-identifier hs-var">ExtendSelectionError</span></a></span></span><span>
</span><span id="line-184"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="ExtendSelectionAdaInsufficient"><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#ExtendSelectionAdaInsufficient"><span class="hs-identifier hs-var">ExtendSelectionAdaInsufficient</span></a></span></span><span>
</span><span id="line-185"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="ExtendSelectionEntriesExhausted"><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#ExtendSelectionEntriesExhausted"><span class="hs-identifier hs-var">ExtendSelectionEntriesExhausted</span></a></span></span><span>
</span><span id="line-186"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="ExtendSelectionFull"><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#ExtendSelectionFull"><span class="hs-identifier hs-var">ExtendSelectionFull</span></a></span></span><span>
</span><span id="line-187"></span><span>
</span><span id="line-188"></span><span id="local-6989586621682448616"><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#extendWith"><span class="hs-identifier hs-type">extendWith</span></a></span><span>
</span><span id="line-189"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#UTxOEntryCategory"><span class="hs-identifier hs-type">UTxOEntryCategory</span></a></span><span>
</span><span id="line-190"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.Tx.html#TxConstraints"><span class="hs-identifier hs-type">TxConstraints</span></a></span><span>
</span><span id="line-191"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#CategorizedUTxO"><span class="hs-identifier hs-type">CategorizedUTxO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682448616"><span class="hs-identifier hs-type">input</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Selection.html#Selection"><span class="hs-identifier hs-type">Selection</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682448616"><span class="hs-identifier hs-type">input</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-192"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#ExtendSelectionError"><span class="hs-identifier hs-type">ExtendSelectionError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#CategorizedUTxO"><span class="hs-identifier hs-type">CategorizedUTxO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682448616"><span class="hs-identifier hs-type">input</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Selection.html#Selection"><span class="hs-identifier hs-type">Selection</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682448616"><span class="hs-identifier hs-type">input</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-193"></span><span id="extendWith"><span class="annot"><span class="annottext">extendWith :: UTxOEntryCategory
-&gt; TxConstraints
-&gt; (CategorizedUTxO input, Selection input)
-&gt; Either
     ExtendSelectionError (CategorizedUTxO input, Selection input)
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#extendWith"><span class="hs-identifier hs-var hs-var">extendWith</span></a></span></span><span> </span><span id="local-6989586621682448498"><span class="annot"><span class="annottext">UTxOEntryCategory
</span><a href="#local-6989586621682448498"><span class="hs-identifier hs-var">category</span></a></span></span><span> </span><span id="local-6989586621682448497"><span class="annot"><span class="annottext">TxConstraints
</span><a href="#local-6989586621682448497"><span class="hs-identifier hs-var">constraints</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682448496"><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448496"><span class="hs-identifier hs-var">utxo</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682448495"><span class="annot"><span class="annottext">Selection input
</span><a href="#local-6989586621682448495"><span class="hs-identifier hs-var">selection</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-194"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448496"><span class="hs-identifier hs-var">utxo</span></a></span><span> </span><span class="annot"><span class="annottext">CategorizedUTxO input
-&gt; UTxOEntryCategory
-&gt; Maybe ((input, TokenBundle), CategorizedUTxO input)
forall input.
CategorizedUTxO input
-&gt; UTxOEntryCategory
-&gt; Maybe ((input, TokenBundle), CategorizedUTxO input)
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#select"><span class="hs-operator hs-var">`select`</span></a></span><span> </span><span class="annot"><span class="annottext">UTxOEntryCategory
</span><a href="#local-6989586621682448498"><span class="hs-identifier hs-var">category</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-195"></span><span>        </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682448494"><span class="annot"><span class="annottext">(input, TokenBundle)
</span><a href="#local-6989586621682448494"><span class="hs-identifier hs-var">entry</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682448493"><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448493"><span class="hs-identifier hs-var">utxo'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-196"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxConstraints
-&gt; Selection input
-&gt; (input, TokenBundle)
-&gt; Either SelectionError (Selection input)
forall input.
TxConstraints
-&gt; Selection input
-&gt; (input, TokenBundle)
-&gt; Either SelectionError (Selection input)
</span><a href="Cardano.Wallet.Primitive.Migration.Selection.html#extend"><span class="hs-identifier hs-var">Selection.extend</span></a></span><span> </span><span class="annot"><span class="annottext">TxConstraints
</span><a href="#local-6989586621682448497"><span class="hs-identifier hs-var">constraints</span></a></span><span> </span><span class="annot"><span class="annottext">Selection input
</span><a href="#local-6989586621682448495"><span class="hs-identifier hs-var">selection</span></a></span><span> </span><span class="annot"><span class="annottext">(input, TokenBundle)
</span><a href="#local-6989586621682448494"><span class="hs-identifier hs-var">entry</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-197"></span><span>                </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621682448491"><span class="annot"><span class="annottext">Selection input
</span><a href="#local-6989586621682448491"><span class="hs-identifier hs-var">selection'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-198"></span><span>                    </span><span class="annot"><span class="annottext">(CategorizedUTxO input, Selection input)
-&gt; Either
     ExtendSelectionError (CategorizedUTxO input, Selection input)
forall a b. b -&gt; Either a b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448493"><span class="hs-identifier hs-var">utxo'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Selection input
</span><a href="#local-6989586621682448491"><span class="hs-identifier hs-var">selection'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-199"></span><span>                </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span class="annot"><span class="annottext">SelectionError
</span><a href="Cardano.Wallet.Primitive.Migration.Selection.html#SelectionAdaInsufficient"><span class="hs-identifier hs-var">SelectionAdaInsufficient</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-200"></span><span>                    </span><span class="annot"><span class="annottext">ExtendSelectionError
-&gt; Either
     ExtendSelectionError (CategorizedUTxO input, Selection input)
forall a b. a -&gt; Either a b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">ExtendSelectionError
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#ExtendSelectionAdaInsufficient"><span class="hs-identifier hs-var">ExtendSelectionAdaInsufficient</span></a></span><span>
</span><span id="line-201"></span><span>                </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Selection.html#SelectionFull"><span class="hs-identifier hs-type">SelectionFull</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-202"></span><span>                    </span><span class="annot"><span class="annottext">ExtendSelectionError
-&gt; Either
     ExtendSelectionError (CategorizedUTxO input, Selection input)
forall a b. a -&gt; Either a b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">ExtendSelectionError
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#ExtendSelectionFull"><span class="hs-identifier hs-var">ExtendSelectionFull</span></a></span><span>
</span><span id="line-203"></span><span>        </span><span class="annot"><span class="annottext">Maybe ((input, TokenBundle), CategorizedUTxO input)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-204"></span><span>            </span><span class="annot"><span class="annottext">ExtendSelectionError
-&gt; Either
     ExtendSelectionError (CategorizedUTxO input, Selection input)
forall a b. a -&gt; Either a b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">ExtendSelectionError
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#ExtendSelectionEntriesExhausted"><span class="hs-identifier hs-var">ExtendSelectionEntriesExhausted</span></a></span><span>
</span><span id="line-205"></span><span>
</span><span id="line-206"></span><span id="local-6989586621682448623"><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#select"><span class="hs-identifier hs-type">select</span></a></span><span>
</span><span id="line-207"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#CategorizedUTxO"><span class="hs-identifier hs-type">CategorizedUTxO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682448623"><span class="hs-identifier hs-type">input</span></a></span><span>
</span><span id="line-208"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#UTxOEntryCategory"><span class="hs-identifier hs-type">UTxOEntryCategory</span></a></span><span>
</span><span id="line-209"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682448623"><span class="hs-identifier hs-type">input</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.TokenBundle.html#TokenBundle"><span class="hs-identifier hs-type">TokenBundle</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#CategorizedUTxO"><span class="hs-identifier hs-type">CategorizedUTxO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682448623"><span class="hs-identifier hs-type">input</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-210"></span><span id="select"><span class="annot"><span class="annottext">select :: CategorizedUTxO input
-&gt; UTxOEntryCategory
-&gt; Maybe ((input, TokenBundle), CategorizedUTxO input)
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#select"><span class="hs-identifier hs-var hs-var">select</span></a></span></span><span> </span><span id="local-6989586621682448488"><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448488"><span class="hs-identifier hs-var">utxo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-211"></span><span>    </span><span class="annot"><span class="annottext">UTxOEntryCategory
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#Supporter"><span class="hs-identifier hs-var">Supporter</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ((input, TokenBundle), CategorizedUTxO input)
</span><a href="#local-6989586621682448487"><span class="hs-identifier hs-var">selectSupporter</span></a></span><span>
</span><span id="line-212"></span><span>    </span><span class="annot"><span class="annottext">UTxOEntryCategory
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#Freerider"><span class="hs-identifier hs-var">Freerider</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ((input, TokenBundle), CategorizedUTxO input)
</span><a href="#local-6989586621682448486"><span class="hs-identifier hs-var">selectFreerider</span></a></span><span>
</span><span id="line-213"></span><span>    </span><span class="annot"><span class="annottext">UTxOEntryCategory
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#Ignorable"><span class="hs-identifier hs-var">Ignorable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ((input, TokenBundle), CategorizedUTxO input)
forall a. Maybe a
</span><a href="#local-6989586621682448484"><span class="hs-identifier hs-var">selectIgnorable</span></a></span><span>
</span><span id="line-214"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-215"></span><span>    </span><span id="local-6989586621682448487"><span class="annot"><span class="annottext">selectSupporter :: Maybe ((input, TokenBundle), CategorizedUTxO input)
</span><a href="#local-6989586621682448487"><span class="hs-identifier hs-var hs-var">selectSupporter</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CategorizedUTxO input -&gt; [(input, TokenBundle)]
forall input. CategorizedUTxO input -&gt; [(input, TokenBundle)]
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#%24sel%3Asupporters%3ACategorizedUTxO"><span class="hs-identifier hs-var hs-var">supporters</span></a></span><span> </span><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448488"><span class="hs-identifier hs-var">utxo</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-216"></span><span>        </span><span id="local-6989586621682448482"><span class="annot"><span class="annottext">(input, TokenBundle)
</span><a href="#local-6989586621682448482"><span class="hs-identifier hs-var">entry</span></a></span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">:</span></a></span><span> </span><span id="local-6989586621682448481"><span class="annot"><span class="annottext">[(input, TokenBundle)]
</span><a href="#local-6989586621682448481"><span class="hs-identifier hs-var">remaining</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">((input, TokenBundle), CategorizedUTxO input)
-&gt; Maybe ((input, TokenBundle), CategorizedUTxO input)
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(input, TokenBundle)
</span><a href="#local-6989586621682448482"><span class="hs-identifier hs-var">entry</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448488"><span class="hs-identifier hs-var">utxo</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:supporters:CategorizedUTxO :: [(input, TokenBundle)]
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#%24sel%3Asupporters%3ACategorizedUTxO"><span class="hs-identifier hs-var">supporters</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(input, TokenBundle)]
</span><a href="#local-6989586621682448481"><span class="hs-identifier hs-var">remaining</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-217"></span><span>        </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ((input, TokenBundle), CategorizedUTxO input)
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-218"></span><span>    </span><span id="local-6989586621682448486"><span class="annot"><span class="annottext">selectFreerider :: Maybe ((input, TokenBundle), CategorizedUTxO input)
</span><a href="#local-6989586621682448486"><span class="hs-identifier hs-var hs-var">selectFreerider</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CategorizedUTxO input -&gt; [(input, TokenBundle)]
forall input. CategorizedUTxO input -&gt; [(input, TokenBundle)]
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#%24sel%3Afreeriders%3ACategorizedUTxO"><span class="hs-identifier hs-var hs-var">freeriders</span></a></span><span> </span><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448488"><span class="hs-identifier hs-var">utxo</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-219"></span><span>        </span><span id="local-6989586621682448479"><span class="annot"><span class="annottext">(input, TokenBundle)
</span><a href="#local-6989586621682448479"><span class="hs-identifier hs-var">entry</span></a></span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">:</span></a></span><span> </span><span id="local-6989586621682448478"><span class="annot"><span class="annottext">[(input, TokenBundle)]
</span><a href="#local-6989586621682448478"><span class="hs-identifier hs-var">remaining</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">((input, TokenBundle), CategorizedUTxO input)
-&gt; Maybe ((input, TokenBundle), CategorizedUTxO input)
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(input, TokenBundle)
</span><a href="#local-6989586621682448479"><span class="hs-identifier hs-var">entry</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448488"><span class="hs-identifier hs-var">utxo</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:freeriders:CategorizedUTxO :: [(input, TokenBundle)]
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#%24sel%3Afreeriders%3ACategorizedUTxO"><span class="hs-identifier hs-var">freeriders</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(input, TokenBundle)]
</span><a href="#local-6989586621682448478"><span class="hs-identifier hs-var">remaining</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-220"></span><span>        </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>  </span><span class="annot"><span class="annottext">Maybe ((input, TokenBundle), CategorizedUTxO input)
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-221"></span><span>    </span><span id="local-6989586621682448484"><span class="annot"><span class="annottext">selectIgnorable :: Maybe a
</span><a href="#local-6989586621682448484"><span class="hs-identifier hs-var hs-var">selectIgnorable</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-222"></span><span>        </span><span class="hs-comment">-- We never select an entry that should be ignored:</span><span>
</span><span id="line-223"></span><span>        </span><span class="annot"><span class="annottext">Maybe a
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-224"></span><span>
</span><span id="line-225"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-226"></span><span class="hs-comment">-- Categorization of UTxO entries</span><span>
</span><span id="line-227"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-228"></span><span>
</span><span id="line-229"></span><span class="hs-keyword">data</span><span> </span><span id="UTxOEntryCategory"><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#UTxOEntryCategory"><span class="hs-identifier hs-var">UTxOEntryCategory</span></a></span></span><span>
</span><span id="line-230"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="Supporter"><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#Supporter"><span class="hs-identifier hs-var">Supporter</span></a></span></span><span>
</span><span id="line-231"></span><span>    </span><span class="hs-comment">-- ^ A coin or bundle that is capable of paying for its own marginal fee</span><span>
</span><span id="line-232"></span><span>    </span><span class="hs-comment">-- and the base transaction fee.</span><span>
</span><span id="line-233"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="Freerider"><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#Freerider"><span class="hs-identifier hs-var">Freerider</span></a></span></span><span>
</span><span id="line-234"></span><span>    </span><span class="hs-comment">-- ^ A coin or bundle that is not capable of paying for itself.</span><span>
</span><span id="line-235"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="Ignorable"><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#Ignorable"><span class="hs-identifier hs-var">Ignorable</span></a></span></span><span>
</span><span id="line-236"></span><span>    </span><span class="hs-comment">-- ^ A coin that should not be added to a selection, because its value is</span><span>
</span><span id="line-237"></span><span>    </span><span class="hs-comment">-- lower than the marginal fee for an input.</span><span>
</span><span id="line-238"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682448474"><span id="local-6989586621682448476"><span class="annot"><span class="annottext">UTxOEntryCategory -&gt; UTxOEntryCategory -&gt; Bool
(UTxOEntryCategory -&gt; UTxOEntryCategory -&gt; Bool)
-&gt; (UTxOEntryCategory -&gt; UTxOEntryCategory -&gt; Bool)
-&gt; Eq UTxOEntryCategory
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UTxOEntryCategory -&gt; UTxOEntryCategory -&gt; Bool
$c/= :: UTxOEntryCategory -&gt; UTxOEntryCategory -&gt; Bool
== :: UTxOEntryCategory -&gt; UTxOEntryCategory -&gt; Bool
$c== :: UTxOEntryCategory -&gt; UTxOEntryCategory -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682448468"><span id="local-6989586621682448470"><span id="local-6989586621682448472"><span class="annot"><span class="annottext">Int -&gt; UTxOEntryCategory -&gt; ShowS
[UTxOEntryCategory] -&gt; ShowS
UTxOEntryCategory -&gt; String
(Int -&gt; UTxOEntryCategory -&gt; ShowS)
-&gt; (UTxOEntryCategory -&gt; String)
-&gt; ([UTxOEntryCategory] -&gt; ShowS)
-&gt; Show UTxOEntryCategory
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UTxOEntryCategory] -&gt; ShowS
$cshowList :: [UTxOEntryCategory] -&gt; ShowS
show :: UTxOEntryCategory -&gt; String
$cshow :: UTxOEntryCategory -&gt; String
showsPrec :: Int -&gt; UTxOEntryCategory -&gt; ShowS
$cshowsPrec :: Int -&gt; UTxOEntryCategory -&gt; ShowS
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-239"></span><span>
</span><span id="line-240"></span><span class="hs-keyword">data</span><span> </span><span id="CategorizedUTxO"><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#CategorizedUTxO"><span class="hs-identifier hs-var">CategorizedUTxO</span></a></span></span><span> </span><span id="local-6989586621682448610"><span class="annot"><a href="#local-6989586621682448610"><span class="hs-identifier hs-type">input</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CategorizedUTxO"><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#CategorizedUTxO"><span class="hs-identifier hs-var">CategorizedUTxO</span></a></span></span><span>
</span><span id="line-241"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Asupporters%3ACategorizedUTxO"><span class="annot"><span class="annottext">CategorizedUTxO input -&gt; [(input, TokenBundle)]
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#%24sel%3Asupporters%3ACategorizedUTxO"><span class="hs-identifier hs-var hs-var">supporters</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682448610"><span class="hs-identifier hs-type">input</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.TokenBundle.html#TokenBundle"><span class="hs-identifier hs-type">TokenBundle</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-242"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3Afreeriders%3ACategorizedUTxO"><span class="annot"><span class="annottext">CategorizedUTxO input -&gt; [(input, TokenBundle)]
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#%24sel%3Afreeriders%3ACategorizedUTxO"><span class="hs-identifier hs-var hs-var">freeriders</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682448610"><span class="hs-identifier hs-type">input</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.TokenBundle.html#TokenBundle"><span class="hs-identifier hs-type">TokenBundle</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-243"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3Aignorables%3ACategorizedUTxO"><span class="annot"><span class="annottext">CategorizedUTxO input -&gt; [(input, TokenBundle)]
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#%24sel%3Aignorables%3ACategorizedUTxO"><span class="hs-identifier hs-var hs-var">ignorables</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682448610"><span class="hs-identifier hs-type">input</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.TokenBundle.html#TokenBundle"><span class="hs-identifier hs-type">TokenBundle</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-244"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-245"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682448462"><span id="local-6989586621682448464"><span class="annot"><span class="annottext">CategorizedUTxO input -&gt; CategorizedUTxO input -&gt; Bool
(CategorizedUTxO input -&gt; CategorizedUTxO input -&gt; Bool)
-&gt; (CategorizedUTxO input -&gt; CategorizedUTxO input -&gt; Bool)
-&gt; Eq (CategorizedUTxO input)
forall input.
Eq input =&gt;
CategorizedUTxO input -&gt; CategorizedUTxO input -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: CategorizedUTxO input -&gt; CategorizedUTxO input -&gt; Bool
$c/= :: forall input.
Eq input =&gt;
CategorizedUTxO input -&gt; CategorizedUTxO input -&gt; Bool
== :: CategorizedUTxO input -&gt; CategorizedUTxO input -&gt; Bool
$c== :: forall input.
Eq input =&gt;
CategorizedUTxO input -&gt; CategorizedUTxO input -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682448456"><span id="local-6989586621682448458"><span id="local-6989586621682448460"><span class="annot"><span class="annottext">Int -&gt; CategorizedUTxO input -&gt; ShowS
[CategorizedUTxO input] -&gt; ShowS
CategorizedUTxO input -&gt; String
(Int -&gt; CategorizedUTxO input -&gt; ShowS)
-&gt; (CategorizedUTxO input -&gt; String)
-&gt; ([CategorizedUTxO input] -&gt; ShowS)
-&gt; Show (CategorizedUTxO input)
forall input. Show input =&gt; Int -&gt; CategorizedUTxO input -&gt; ShowS
forall input. Show input =&gt; [CategorizedUTxO input] -&gt; ShowS
forall input. Show input =&gt; CategorizedUTxO input -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [CategorizedUTxO input] -&gt; ShowS
$cshowList :: forall input. Show input =&gt; [CategorizedUTxO input] -&gt; ShowS
show :: CategorizedUTxO input -&gt; String
$cshow :: forall input. Show input =&gt; CategorizedUTxO input -&gt; String
showsPrec :: Int -&gt; CategorizedUTxO input -&gt; ShowS
$cshowsPrec :: forall input. Show input =&gt; Int -&gt; CategorizedUTxO input -&gt; ShowS
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-246"></span><span>
</span><span id="line-247"></span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#categorizeUTxO"><span class="hs-identifier hs-type">categorizeUTxO</span></a></span><span>
</span><span id="line-248"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.Tx.html#TxConstraints"><span class="hs-identifier hs-type">TxConstraints</span></a></span><span>
</span><span id="line-249"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.UTxO.html#UTxO"><span class="hs-identifier hs-type">UTxO</span></a></span><span>
</span><span id="line-250"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#CategorizedUTxO"><span class="hs-identifier hs-type">CategorizedUTxO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.Tx.html#TxIn"><span class="hs-identifier hs-type">TxIn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.Tx.html#TxOut"><span class="hs-identifier hs-type">TxOut</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-251"></span><span id="categorizeUTxO"><span class="annot"><span class="annottext">categorizeUTxO :: TxConstraints -&gt; UTxO -&gt; CategorizedUTxO (TxIn, TxOut)
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#categorizeUTxO"><span class="hs-identifier hs-var hs-var">categorizeUTxO</span></a></span></span><span> </span><span id="local-6989586621682448455"><span class="annot"><span class="annottext">TxConstraints
</span><a href="#local-6989586621682448455"><span class="hs-identifier hs-var">constraints</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.UTxO.html#UTxO"><span class="hs-identifier hs-type">UTxO</span></a></span><span> </span><span id="local-6989586621682448453"><span class="annot"><span class="annottext">Map TxIn TxOut
</span><a href="#local-6989586621682448453"><span class="hs-identifier hs-var">u</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxConstraints
-&gt; [((TxIn, TxOut), TokenBundle)] -&gt; CategorizedUTxO (TxIn, TxOut)
forall input.
TxConstraints -&gt; [(input, TokenBundle)] -&gt; CategorizedUTxO input
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#categorizeUTxOEntries"><span class="hs-identifier hs-var">categorizeUTxOEntries</span></a></span><span> </span><span class="annot"><span class="annottext">TxConstraints
</span><a href="#local-6989586621682448455"><span class="hs-identifier hs-var">constraints</span></a></span><span> </span><span class="annot"><span class="annottext">([((TxIn, TxOut), TokenBundle)] -&gt; CategorizedUTxO (TxIn, TxOut))
-&gt; [((TxIn, TxOut), TokenBundle)] -&gt; CategorizedUTxO (TxIn, TxOut)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-252"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621682448452"><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621682448452"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682448451"><span class="annot"><span class="annottext">TxOut
</span><a href="#local-6989586621682448451"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621682448452"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TxOut
</span><a href="#local-6989586621682448451"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">((TokenBundle -&gt; Const TokenBundle TokenBundle)
 -&gt; TxOut -&gt; Const TokenBundle TxOut)
-&gt; TxOut -&gt; TokenBundle
forall a s. ((a -&gt; Const a a) -&gt; s -&gt; Const a s) -&gt; s -&gt; a
</span><a href="../../../../generic-lens/html/src"><span class="hs-identifier hs-var">view</span></a></span><span> </span><span class="annot"><span class="annottext">IsLabel
  &quot;tokens&quot;
  ((TokenBundle -&gt; Const TokenBundle TokenBundle)
   -&gt; TxOut -&gt; Const TokenBundle TxOut)
(TokenBundle -&gt; Const TokenBundle TokenBundle)
-&gt; TxOut -&gt; Const TokenBundle TxOut
</span><a href="#local-6989586621682448450"><span class="hs-var">#tokens</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut
</span><a href="#local-6989586621682448451"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((TxIn, TxOut) -&gt; ((TxIn, TxOut), TokenBundle))
-&gt; [(TxIn, TxOut)] -&gt; [((TxIn, TxOut), TokenBundle)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Map TxIn TxOut -&gt; [(TxIn, TxOut)]
forall k a. Map k a -&gt; [(k, a)]
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Map.toList</span></a></span><span> </span><span class="annot"><span class="annottext">Map TxIn TxOut
</span><a href="#local-6989586621682448453"><span class="hs-identifier hs-var">u</span></a></span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#categorizeUTxOEntries"><span class="hs-identifier hs-type">categorizeUTxOEntries</span></a></span><span>
</span><span id="line-255"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621682448599"><span class="annot"><a href="#local-6989586621682448599"><span class="hs-identifier hs-type">input</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.Tx.html#TxConstraints"><span class="hs-identifier hs-type">TxConstraints</span></a></span><span>
</span><span id="line-256"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682448599"><span class="hs-identifier hs-type">input</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.TokenBundle.html#TokenBundle"><span class="hs-identifier hs-type">TokenBundle</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-257"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#CategorizedUTxO"><span class="hs-identifier hs-type">CategorizedUTxO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682448599"><span class="hs-identifier hs-type">input</span></a></span><span>
</span><span id="line-258"></span><span id="categorizeUTxOEntries"><span class="annot"><span class="annottext">categorizeUTxOEntries :: TxConstraints -&gt; [(input, TokenBundle)] -&gt; CategorizedUTxO input
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#categorizeUTxOEntries"><span class="hs-identifier hs-var hs-var">categorizeUTxOEntries</span></a></span></span><span> </span><span id="local-6989586621682448447"><span class="annot"><span class="annottext">TxConstraints
</span><a href="#local-6989586621682448447"><span class="hs-identifier hs-var">constraints</span></a></span></span><span> </span><span id="local-6989586621682448446"><span class="annot"><span class="annottext">[(input, TokenBundle)]
</span><a href="#local-6989586621682448446"><span class="hs-identifier hs-var">uncategorizedEntries</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CategorizedUTxO :: forall input.
[(input, TokenBundle)]
-&gt; [(input, TokenBundle)]
-&gt; [(input, TokenBundle)]
-&gt; CategorizedUTxO input
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#CategorizedUTxO"><span class="hs-identifier hs-type">CategorizedUTxO</span></a></span><span>
</span><span id="line-259"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">$sel:supporters:CategorizedUTxO :: [(input, TokenBundle)]
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#%24sel%3Asupporters%3ACategorizedUTxO"><span class="hs-identifier hs-var">supporters</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UTxOEntryCategory -&gt; [(input, TokenBundle)]
</span><a href="#local-6989586621682448445"><span class="hs-identifier hs-var">entriesMatching</span></a></span><span> </span><span class="annot"><span class="annottext">UTxOEntryCategory
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#Supporter"><span class="hs-identifier hs-var">Supporter</span></a></span><span>
</span><span id="line-260"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:freeriders:CategorizedUTxO :: [(input, TokenBundle)]
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#%24sel%3Afreeriders%3ACategorizedUTxO"><span class="hs-identifier hs-var">freeriders</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UTxOEntryCategory -&gt; [(input, TokenBundle)]
</span><a href="#local-6989586621682448445"><span class="hs-identifier hs-var">entriesMatching</span></a></span><span> </span><span class="annot"><span class="annottext">UTxOEntryCategory
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#Freerider"><span class="hs-identifier hs-var">Freerider</span></a></span><span>
</span><span id="line-261"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:ignorables:CategorizedUTxO :: [(input, TokenBundle)]
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#%24sel%3Aignorables%3ACategorizedUTxO"><span class="hs-identifier hs-var">ignorables</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UTxOEntryCategory -&gt; [(input, TokenBundle)]
</span><a href="#local-6989586621682448445"><span class="hs-identifier hs-var">entriesMatching</span></a></span><span> </span><span class="annot"><span class="annottext">UTxOEntryCategory
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#Ignorable"><span class="hs-identifier hs-var">Ignorable</span></a></span><span>
</span><span id="line-262"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-263"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-264"></span><span>    </span><span class="annot"><a href="#local-6989586621682448444"><span class="hs-identifier hs-type">categorizedEntries</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682448599"><span class="hs-identifier hs-type">input</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.TokenBundle.html#TokenBundle"><span class="hs-identifier hs-type">TokenBundle</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#UTxOEntryCategory"><span class="hs-identifier hs-type">UTxOEntryCategory</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-265"></span><span>    </span><span id="local-6989586621682448444"><span class="annot"><span class="annottext">categorizedEntries :: [(input, (TokenBundle, UTxOEntryCategory))]
</span><a href="#local-6989586621682448444"><span class="hs-identifier hs-var hs-var">categorizedEntries</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(input, TokenBundle)]
</span><a href="#local-6989586621682448446"><span class="hs-identifier hs-var">uncategorizedEntries</span></a></span><span>
</span><span id="line-266"></span><span>        </span><span class="annot"><span class="annottext">[(input, TokenBundle)]
-&gt; ((input, TokenBundle)
    -&gt; (input, (TokenBundle, UTxOEntryCategory)))
-&gt; [(input, (TokenBundle, UTxOEntryCategory))]
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&amp;&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621682448443"><span class="annot"><span class="annottext">input
</span><a href="#local-6989586621682448443"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682448442"><span class="annot"><span class="annottext">TokenBundle
</span><a href="#local-6989586621682448442"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">input
</span><a href="#local-6989586621682448443"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TokenBundle
</span><a href="#local-6989586621682448442"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TxConstraints -&gt; TokenBundle -&gt; UTxOEntryCategory
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#categorizeUTxOEntry"><span class="hs-identifier hs-var">categorizeUTxOEntry</span></a></span><span> </span><span class="annot"><span class="annottext">TxConstraints
</span><a href="#local-6989586621682448447"><span class="hs-identifier hs-var">constraints</span></a></span><span> </span><span class="annot"><span class="annottext">TokenBundle
</span><a href="#local-6989586621682448442"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-267"></span><span>
</span><span id="line-268"></span><span>    </span><span class="annot"><a href="#local-6989586621682448445"><span class="hs-identifier hs-type">entriesMatching</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#UTxOEntryCategory"><span class="hs-identifier hs-type">UTxOEntryCategory</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682448599"><span class="hs-identifier hs-type">input</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.TokenBundle.html#TokenBundle"><span class="hs-identifier hs-type">TokenBundle</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-269"></span><span>    </span><span id="local-6989586621682448445"><span class="annot"><span class="annottext">entriesMatching :: UTxOEntryCategory -&gt; [(input, TokenBundle)]
</span><a href="#local-6989586621682448445"><span class="hs-identifier hs-var hs-var">entriesMatching</span></a></span></span><span> </span><span id="local-6989586621682448441"><span class="annot"><span class="annottext">UTxOEntryCategory
</span><a href="#local-6989586621682448441"><span class="hs-identifier hs-var">category</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-270"></span><span>        </span><span class="annot"><span class="annottext">((TokenBundle, UTxOEntryCategory) -&gt; TokenBundle)
-&gt; (input, (TokenBundle, UTxOEntryCategory))
-&gt; (input, TokenBundle)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">(TokenBundle, UTxOEntryCategory) -&gt; TokenBundle
forall a b. (a, b) -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">((input, (TokenBundle, UTxOEntryCategory)) -&gt; (input, TokenBundle))
-&gt; [(input, (TokenBundle, UTxOEntryCategory))]
-&gt; [(input, TokenBundle)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">((input, (TokenBundle, UTxOEntryCategory)) -&gt; Bool)
-&gt; [(input, (TokenBundle, UTxOEntryCategory))]
-&gt; [(input, (TokenBundle, UTxOEntryCategory))]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">L.filter</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">UTxOEntryCategory -&gt; UTxOEntryCategory -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">UTxOEntryCategory
</span><a href="#local-6989586621682448441"><span class="hs-identifier hs-var">category</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(UTxOEntryCategory -&gt; Bool)
-&gt; ((input, (TokenBundle, UTxOEntryCategory)) -&gt; UTxOEntryCategory)
-&gt; (input, (TokenBundle, UTxOEntryCategory))
-&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(TokenBundle, UTxOEntryCategory) -&gt; UTxOEntryCategory
forall a b. (a, b) -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">((TokenBundle, UTxOEntryCategory) -&gt; UTxOEntryCategory)
-&gt; ((input, (TokenBundle, UTxOEntryCategory))
    -&gt; (TokenBundle, UTxOEntryCategory))
-&gt; (input, (TokenBundle, UTxOEntryCategory))
-&gt; UTxOEntryCategory
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(input, (TokenBundle, UTxOEntryCategory))
-&gt; (TokenBundle, UTxOEntryCategory)
forall a b. (a, b) -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(input, (TokenBundle, UTxOEntryCategory))]
</span><a href="#local-6989586621682448444"><span class="hs-identifier hs-var">categorizedEntries</span></a></span><span>
</span><span id="line-271"></span><span>
</span><span id="line-272"></span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#categorizeUTxOEntry"><span class="hs-identifier hs-type">categorizeUTxOEntry</span></a></span><span>
</span><span id="line-273"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.Tx.html#TxConstraints"><span class="hs-identifier hs-type">TxConstraints</span></a></span><span>
</span><span id="line-274"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.TokenBundle.html#TokenBundle"><span class="hs-identifier hs-type">TokenBundle</span></a></span><span>
</span><span id="line-275"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#UTxOEntryCategory"><span class="hs-identifier hs-type">UTxOEntryCategory</span></a></span><span>
</span><span id="line-276"></span><span id="categorizeUTxOEntry"><span class="annot"><span class="annottext">categorizeUTxOEntry :: TxConstraints -&gt; TokenBundle -&gt; UTxOEntryCategory
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#categorizeUTxOEntry"><span class="hs-identifier hs-var hs-var">categorizeUTxOEntry</span></a></span></span><span> </span><span id="local-6989586621682448439"><span class="annot"><span class="annottext">TxConstraints
</span><a href="#local-6989586621682448439"><span class="hs-identifier hs-var">constraints</span></a></span></span><span> </span><span id="local-6989586621682448438"><span class="annot"><span class="annottext">TokenBundle
</span><a href="#local-6989586621682448438"><span class="hs-identifier hs-var">b</span></a></span></span><span>
</span><span id="line-277"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621682448437"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621682448437"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TokenBundle -&gt; Maybe Coin
</span><a href="Cardano.Wallet.Primitive.Types.TokenBundle.html#toCoin"><span class="hs-identifier hs-var">TokenBundle.toCoin</span></a></span><span> </span><span class="annot"><span class="annottext">TokenBundle
</span><a href="#local-6989586621682448438"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Coin -&gt; Bool
</span><a href="#local-6989586621682448435"><span class="hs-identifier hs-var">coinIsIgnorable</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621682448437"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-278"></span><span>        </span><span class="annot"><span class="annottext">UTxOEntryCategory
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#Ignorable"><span class="hs-identifier hs-var">Ignorable</span></a></span><span>
</span><span id="line-279"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682448434"><span class="hs-identifier hs-var">bundleIsSupporter</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-280"></span><span>        </span><span class="annot"><span class="annottext">UTxOEntryCategory
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#Supporter"><span class="hs-identifier hs-var">Supporter</span></a></span><span>
</span><span id="line-281"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-282"></span><span>        </span><span class="annot"><span class="annottext">UTxOEntryCategory
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#Freerider"><span class="hs-identifier hs-var">Freerider</span></a></span><span>
</span><span id="line-283"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-284"></span><span>    </span><span class="annot"><a href="#local-6989586621682448434"><span class="hs-identifier hs-type">bundleIsSupporter</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-285"></span><span>    </span><span id="local-6989586621682448434"><span class="annot"><span class="annottext">bundleIsSupporter :: Bool
</span><a href="#local-6989586621682448434"><span class="hs-identifier hs-var hs-var">bundleIsSupporter</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Either SelectionError (Selection ()) -&gt; Bool
forall a b. Either a b -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">isRight</span></a></span><span> </span><span class="annot"><span class="annottext">(Either SelectionError (Selection ()) -&gt; Bool)
-&gt; Either SelectionError (Selection ()) -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-286"></span><span>        </span><span class="annot"><span class="annottext">TxConstraints
-&gt; RewardWithdrawal
-&gt; NonEmpty ((), TokenBundle)
-&gt; Either SelectionError (Selection ())
forall input.
TxConstraints
-&gt; RewardWithdrawal
-&gt; NonEmpty (input, TokenBundle)
-&gt; Either SelectionError (Selection input)
</span><a href="Cardano.Wallet.Primitive.Migration.Selection.html#create"><span class="hs-identifier hs-var">Selection.create</span></a></span><span> </span><span class="annot"><span class="annottext">TxConstraints
</span><a href="#local-6989586621682448439"><span class="hs-identifier hs-var">constraints</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coin -&gt; RewardWithdrawal
</span><a href="Cardano.Wallet.Primitive.Migration.Selection.html#RewardWithdrawal"><span class="hs-identifier hs-var">RewardWithdrawal</span></a></span><span> </span><span class="annot"><span class="annottext">(Coin -&gt; RewardWithdrawal) -&gt; Coin -&gt; RewardWithdrawal
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Coin
</span><a href="Cardano.Wallet.Primitive.Types.Coin.html#Coin"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TokenBundle
</span><a href="#local-6989586621682448438"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-287"></span><span>
</span><span id="line-288"></span><span>    </span><span class="annot"><a href="#local-6989586621682448435"><span class="hs-identifier hs-type">coinIsIgnorable</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-289"></span><span>    </span><span id="local-6989586621682448435"><span class="annot"><span class="annottext">coinIsIgnorable :: Coin -&gt; Bool
</span><a href="#local-6989586621682448435"><span class="hs-identifier hs-var hs-var">coinIsIgnorable</span></a></span></span><span> </span><span id="local-6989586621682448433"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621682448433"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621682448433"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; Coin -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">TxConstraints -&gt; Coin
</span><a href="Cardano.Wallet.Primitive.Types.Tx.html#%24sel%3AtxInputCost%3ATxConstraints"><span class="hs-identifier hs-var hs-var">txInputCost</span></a></span><span> </span><span class="annot"><span class="annottext">TxConstraints
</span><a href="#local-6989586621682448439"><span class="hs-identifier hs-var">constraints</span></a></span><span>
</span><span id="line-290"></span><span>
</span><span id="line-291"></span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#uncategorizeUTxO"><span class="hs-identifier hs-type">uncategorizeUTxO</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#CategorizedUTxO"><span class="hs-identifier hs-type">CategorizedUTxO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.Tx.html#TxIn"><span class="hs-identifier hs-type">TxIn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.Tx.html#TxOut"><span class="hs-identifier hs-type">TxOut</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.UTxO.html#UTxO"><span class="hs-identifier hs-type">UTxO</span></a></span><span>
</span><span id="line-292"></span><span id="uncategorizeUTxO"><span class="annot"><span class="annottext">uncategorizeUTxO :: CategorizedUTxO (TxIn, TxOut) -&gt; UTxO
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#uncategorizeUTxO"><span class="hs-identifier hs-var hs-var">uncategorizeUTxO</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map TxIn TxOut -&gt; UTxO
</span><a href="Cardano.Wallet.Primitive.Types.UTxO.html#UTxO"><span class="hs-identifier hs-var">UTxO</span></a></span><span> </span><span class="annot"><span class="annottext">(Map TxIn TxOut -&gt; UTxO)
-&gt; (CategorizedUTxO (TxIn, TxOut) -&gt; Map TxIn TxOut)
-&gt; CategorizedUTxO (TxIn, TxOut)
-&gt; UTxO
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[(TxIn, TxOut)] -&gt; Map TxIn TxOut
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Map.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">([(TxIn, TxOut)] -&gt; Map TxIn TxOut)
-&gt; (CategorizedUTxO (TxIn, TxOut) -&gt; [(TxIn, TxOut)])
-&gt; CategorizedUTxO (TxIn, TxOut)
-&gt; Map TxIn TxOut
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(((TxIn, TxOut), TokenBundle) -&gt; (TxIn, TxOut))
-&gt; [((TxIn, TxOut), TokenBundle)] -&gt; [(TxIn, TxOut)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">((TxIn, TxOut), TokenBundle) -&gt; (TxIn, TxOut)
forall a b. (a, b) -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">([((TxIn, TxOut), TokenBundle)] -&gt; [(TxIn, TxOut)])
-&gt; (CategorizedUTxO (TxIn, TxOut)
    -&gt; [((TxIn, TxOut), TokenBundle)])
-&gt; CategorizedUTxO (TxIn, TxOut)
-&gt; [(TxIn, TxOut)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">CategorizedUTxO (TxIn, TxOut) -&gt; [((TxIn, TxOut), TokenBundle)]
forall input. CategorizedUTxO input -&gt; [(input, TokenBundle)]
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#uncategorizeUTxOEntries"><span class="hs-identifier hs-var">uncategorizeUTxOEntries</span></a></span><span>
</span><span id="line-293"></span><span>
</span><span id="line-294"></span><span id="local-6989586621682448429"><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#uncategorizeUTxOEntries"><span class="hs-identifier hs-type">uncategorizeUTxOEntries</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Migration.Planning.html#CategorizedUTxO"><span class="hs-identifier hs-type">CategorizedUTxO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682448429"><span class="hs-identifier hs-type">input</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682448429"><span class="hs-identifier hs-type">input</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.TokenBundle.html#TokenBundle"><span class="hs-identifier hs-type">TokenBundle</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span></span><span>
</span><span id="line-295"></span><span id="uncategorizeUTxOEntries"><span class="annot"><span class="annottext">uncategorizeUTxOEntries :: CategorizedUTxO input -&gt; [(input, TokenBundle)]
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#uncategorizeUTxOEntries"><span class="hs-identifier hs-var hs-var">uncategorizeUTxOEntries</span></a></span></span><span> </span><span id="local-6989586621682448428"><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448428"><span class="hs-identifier hs-var">utxo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[[(input, TokenBundle)]] -&gt; [(input, TokenBundle)]
forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mconcat</span></a></span><span>
</span><span id="line-296"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">CategorizedUTxO input -&gt; [(input, TokenBundle)]
forall input. CategorizedUTxO input -&gt; [(input, TokenBundle)]
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#%24sel%3Asupporters%3ACategorizedUTxO"><span class="hs-identifier hs-var hs-var">supporters</span></a></span><span> </span><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448428"><span class="hs-identifier hs-var">utxo</span></a></span><span>
</span><span id="line-297"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CategorizedUTxO input -&gt; [(input, TokenBundle)]
forall input. CategorizedUTxO input -&gt; [(input, TokenBundle)]
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#%24sel%3Afreeriders%3ACategorizedUTxO"><span class="hs-identifier hs-var hs-var">freeriders</span></a></span><span> </span><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448428"><span class="hs-identifier hs-var">utxo</span></a></span><span>
</span><span id="line-298"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CategorizedUTxO input -&gt; [(input, TokenBundle)]
forall input. CategorizedUTxO input -&gt; [(input, TokenBundle)]
</span><a href="Cardano.Wallet.Primitive.Migration.Planning.html#%24sel%3Aignorables%3ACategorizedUTxO"><span class="hs-identifier hs-var hs-var">ignorables</span></a></span><span> </span><span class="annot"><span class="annottext">CategorizedUTxO input
</span><a href="#local-6989586621682448428"><span class="hs-identifier hs-var">utxo</span></a></span><span>
</span><span id="line-299"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-300"></span></pre></body></html>