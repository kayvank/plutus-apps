<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DeriveGeneric #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DerivingStrategies #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE QuasiQuotes #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE StandaloneDeriving #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE TemplateHaskell #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-15"></span><span class="hs-comment">-- Copyright: &#169; 2018-2020 IOHK</span><span>
</span><span id="line-16"></span><span class="hs-comment">-- License: Apache-2.0</span><span>
</span><span id="line-17"></span><span class="hs-comment">--</span><span>
</span><span id="line-18"></span><span class="hs-comment">-- Auto-generated Sqlite &amp; Persistent machinery via Template-Haskell. This has</span><span>
</span><span id="line-19"></span><span class="hs-comment">-- been moved into a separate file so that we can treat it slightly differently</span><span>
</span><span id="line-20"></span><span class="hs-comment">-- when computing code-coverage.</span><span>
</span><span id="line-21"></span><span>
</span><span id="line-22"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Cardano.Pool.DB.Sqlite.TH</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Prelude</span></a></span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-slotting/html/src"><span class="hs-identifier">Cardano.Slotting.Slot</span></a></span><span>
</span><span id="line-27"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../cardano-slotting/html/src"><span class="hs-identifier">SlotNo</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Wallet.DB.Sqlite.Types.html"><span class="hs-identifier">Cardano.Wallet.DB.Sqlite.Types</span></a></span><span>
</span><span id="line-29"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Cardano.Wallet.DB.Sqlite.Types.html#sqlSettings%27"><span class="hs-identifier">sqlSettings'</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier">Data.Text</span></a></span><span>
</span><span id="line-31"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier">Text</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../time/html/src"><span class="hs-identifier">Data.Time.Clock</span></a></span><span>
</span><span id="line-33"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../time/html/src"><span class="hs-identifier">UTCTime</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../time/html/src"><span class="hs-identifier">Data.Time.Clock.POSIX</span></a></span><span>
</span><span id="line-35"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../time/html/src"><span class="hs-identifier">POSIXTime</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Word</span></a></span><span>
</span><span id="line-37"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Word32</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Word64</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Word8</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../persistent/html/src"><span class="hs-identifier">Database.Persist.TH</span></a></span><span>
</span><span id="line-39"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../persistent/html/src"><span class="hs-identifier">mkMigrate</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../persistent/html/src"><span class="hs-identifier">mkPersist</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../persistent/html/src"><span class="hs-identifier">persistLowerCase</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../persistent/html/src"><span class="hs-identifier">share</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">GHC.Generics</span></a></span><span>
</span><span id="line-41"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Generic</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../random/html/src"><span class="hs-identifier">System.Random</span></a></span><span>
</span><span id="line-43"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../random/html/src"><span class="hs-identifier">StdGen</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Cardano.Wallet.DB.Sqlite.Types.html"><span class="hs-identifier">Cardano.Wallet.DB.Sqlite.Types</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">W</span></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Cardano.Wallet.Primitive.Types.html"><span class="hs-identifier">Cardano.Wallet.Primitive.Types</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">W</span></span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span id="migrateAll"><span id="entityDefListFormigrateAll"><span id="fk_registration_pool_id"><span id="LastGCMetadata"><span id="InternalStateId"><span id="unInternalStateKey"><span id="InternalStateKey"><span id="SettingsPoolMetadataSource"><span id="SettingsId"><span id="unSettingsKey"><span id="SettingsKey"><span id="SeedSeed"><span id="ArbitrarySeedId"><span id="unArbitrarySeedKey"><span id="ArbitrarySeedKey"><span id="PoolProductionBlockHeight"><span id="PoolProductionParentHash"><span id="PoolProductionHeaderHash"><span id="PoolProductionSlot"><span id="PoolProductionPoolId"><span id="PoolProductionId"><span id="unPoolProductionKey"><span id="PoolProductionKey"><span id="BlockHeight"><span id="BlockParentHash"><span id="BlockHeaderHash"><span id="BlockSlot"><span id="BlockHeaderId"><span id="unBlockHeaderKey"><span id="BlockHeaderKey"><span id="StakeDistributionStake"><span id="StakeDistributionEpoch"><span id="StakeDistributionPoolId"><span id="StakeDistributionId"><span id="stakeDistributionKeystakeDistributionEpoch"><span id="stakeDistributionKeystakeDistributionPoolId"><span id="StakeDistributionKey"><span id="PoolOwnerIndex"><span id="PoolOwnerOwner"><span id="PoolOwnerSlotInternalIndex"><span id="PoolOwnerSlot"><span id="PoolOwnerPoolId"><span id="PoolOwnerId"><span id="poolOwnerKeypoolOwnerIndex"><span id="poolOwnerKeypoolOwnerOwner"><span id="poolOwnerKeypoolOwnerSlotInternalIndex"><span id="poolOwnerKeypoolOwnerSlot"><span id="poolOwnerKeypoolOwnerPoolId"><span id="PoolOwnerKey"><span id="PoolRegistrationMetadataHash"><span id="PoolRegistrationMetadataUrl"><span id="PoolRegistrationPledge"><span id="PoolRegistrationCost"><span id="PoolRegistrationMarginDenominator"><span id="PoolRegistrationMarginNumerator"><span id="PoolRegistrationSlotInternalIndex"><span id="PoolRegistrationSlot"><span id="PoolRegistrationPoolId"><span id="PoolRegistrationId"><span id="poolRegistrationKeypoolRegistrationSlotInternalIndex"><span id="poolRegistrationKeypoolRegistrationSlot"><span id="poolRegistrationKeypoolRegistrationPoolId"><span id="PoolRegistrationKey"><span id="DelistedPoolId"><span id="PoolDelistmentId"><span id="unPoolDelistmentKey"><span id="PoolDelistmentKey"><span id="PoolRetirementEpoch"><span id="PoolRetirementSlotInternalIndex"><span id="PoolRetirementSlot"><span id="PoolRetirementPoolId"><span id="PoolRetirementId"><span id="poolRetirementKeypoolRetirementSlotInternalIndex"><span id="poolRetirementKeypoolRetirementSlot"><span id="poolRetirementKeypoolRetirementPoolId"><span id="PoolRetirementKey"><span id="PoolMetadataHomepage"><span id="PoolMetadataDescription"><span id="PoolMetadataTicker"><span id="PoolMetadataName"><span id="PoolMetadataHash"><span id="PoolMetadataId"><span id="unPoolMetadataKey"><span id="PoolMetadataKey"><span id="PoolFetchAttemptsRetryCount"><span id="PoolFetchAttemptsRetryAfter"><span id="PoolFetchAttemptsMetadataUrl"><span id="PoolFetchAttemptsMetadataHash"><span id="PoolMetadataFetchAttemptsId"><span id="poolMetadataFetchAttemptsKeypoolFetchAttemptsMetadataUrl"><span id="poolMetadataFetchAttemptsKeypoolFetchAttemptsMetadataHash"><span id="PoolMetadataFetchAttemptsKey"><span id="lastGCMetadata"><span id="InternalState"><span id="InternalStateId"><span id="settingsPoolMetadataSource"><span id="Settings"><span id="SettingsId"><span id="seedSeed"><span id="ArbitrarySeed"><span id="ArbitrarySeedId"><span id="poolProductionBlockHeight"><span id="poolProductionParentHash"><span id="poolProductionHeaderHash"><span id="poolProductionSlot"><span id="poolProductionPoolId"><span id="PoolProduction"><span id="PoolProductionId"><span id="blockHeight"><span id="blockParentHash"><span id="blockHeaderHash"><span id="blockSlot"><span id="BlockHeader"><span id="BlockHeaderId"><span id="stakeDistributionStake"><span id="stakeDistributionEpoch"><span id="stakeDistributionPoolId"><span id="StakeDistribution"><span id="StakeDistributionId"><span id="poolOwnerIndex"><span id="poolOwnerOwner"><span id="poolOwnerSlotInternalIndex"><span id="poolOwnerSlot"><span id="poolOwnerPoolId"><span id="PoolOwner"><span id="PoolOwnerId"><span id="poolRegistrationMetadataHash"><span id="poolRegistrationMetadataUrl"><span id="poolRegistrationPledge"><span id="poolRegistrationCost"><span id="poolRegistrationMarginDenominator"><span id="poolRegistrationMarginNumerator"><span id="poolRegistrationSlotInternalIndex"><span id="poolRegistrationSlot"><span id="poolRegistrationPoolId"><span id="PoolRegistration"><span id="PoolRegistrationId"><span id="delistedPoolId"><span id="PoolDelistment"><span id="PoolDelistmentId"><span id="poolRetirementEpoch"><span id="poolRetirementSlotInternalIndex"><span id="poolRetirementSlot"><span id="poolRetirementPoolId"><span id="PoolRetirement"><span id="PoolRetirementId"><span id="poolMetadataHomepage"><span id="poolMetadataDescription"><span id="poolMetadataTicker"><span id="poolMetadataName"><span id="poolMetadataHash"><span id="PoolMetadata"><span id="PoolMetadataId"><span id="poolFetchAttemptsRetryCount"><span id="poolFetchAttemptsRetryAfter"><span id="poolFetchAttemptsMetadataUrl"><span id="poolFetchAttemptsMetadataHash"><span id="PoolMetadataFetchAttempts"><span id="PoolMetadataFetchAttemptsId"><span id="local-6989586621682451338"><span id="local-6989586621682451340"><span id="local-6989586621682451342"><span id="local-6989586621682451345"><span id="local-6989586621682451347"><span id="local-6989586621682451352"><span id="local-6989586621682451355"><span id="local-6989586621682451358"><span id="local-6989586621682451360"><span id="local-6989586621682451362"><span id="local-6989586621682451364"><span id="local-6989586621682451366"><span id="local-6989586621682451368"><span id="local-6989586621682451370"><span id="local-6989586621682451372"><span id="local-6989586621682451374"><span id="local-6989586621682451376"><span id="local-6989586621682451378"><span id="local-6989586621682451380"><span id="local-6989586621682451382"><span id="local-6989586621682451384"><span id="local-6989586621682451393"><span id="local-6989586621682451395"><span id="local-6989586621682451397"><span id="local-6989586621682451400"><span id="local-6989586621682451402"><span id="local-6989586621682451407"><span id="local-6989586621682451410"><span id="local-6989586621682451413"><span id="local-6989586621682451415"><span id="local-6989586621682451417"><span id="local-6989586621682451419"><span id="local-6989586621682451421"><span id="local-6989586621682451423"><span id="local-6989586621682451425"><span id="local-6989586621682451427"><span id="local-6989586621682451429"><span id="local-6989586621682451431"><span id="local-6989586621682451433"><span id="local-6989586621682451435"><span id="local-6989586621682451437"><span id="local-6989586621682451439"><span id="local-6989586621682451448"><span id="local-6989586621682451450"><span id="local-6989586621682451452"><span id="local-6989586621682451455"><span id="local-6989586621682451457"><span id="local-6989586621682451462"><span id="local-6989586621682451465"><span id="local-6989586621682451468"><span id="local-6989586621682451470"><span id="local-6989586621682451472"><span id="local-6989586621682451474"><span id="local-6989586621682451476"><span id="local-6989586621682451478"><span id="local-6989586621682451480"><span id="local-6989586621682451482"><span id="local-6989586621682451484"><span id="local-6989586621682451486"><span id="local-6989586621682451488"><span id="local-6989586621682451490"><span id="local-6989586621682451492"><span id="local-6989586621682451494"><span id="local-6989586621682451503"><span id="local-6989586621682451505"><span id="local-6989586621682451507"><span id="local-6989586621682451510"><span id="local-6989586621682451513"><span id="local-6989586621682451516"><span id="local-6989586621682451518"><span id="local-6989586621682451520"><span id="local-6989586621682451522"><span id="local-6989586621682451524"><span id="local-6989586621682451526"><span id="local-6989586621682451528"><span id="local-6989586621682451530"><span id="local-6989586621682451532"><span id="local-6989586621682451534"><span id="local-6989586621682451536"><span id="local-6989586621682451538"><span id="local-6989586621682451540"><span id="local-6989586621682451542"><span id="local-6989586621682451544"><span id="local-6989586621682451546"><span id="local-6989586621682451548"><span id="local-6989586621682451557"><span id="local-6989586621682451559"><span id="local-6989586621682451561"><span id="local-6989586621682451564"><span id="local-6989586621682451567"><span id="local-6989586621682451570"><span id="local-6989586621682451572"><span id="local-6989586621682451574"><span id="local-6989586621682451576"><span id="local-6989586621682451578"><span id="local-6989586621682451580"><span id="local-6989586621682451582"><span id="local-6989586621682451584"><span id="local-6989586621682451586"><span id="local-6989586621682451588"><span id="local-6989586621682451590"><span id="local-6989586621682451592"><span id="local-6989586621682451594"><span id="local-6989586621682451596"><span id="local-6989586621682451598"><span id="local-6989586621682451600"><span id="local-6989586621682451609"><span id="local-6989586621682451611"><span id="local-6989586621682451613"><span id="local-6989586621682451616"><span id="local-6989586621682451618"><span id="local-6989586621682451620"><span id="local-6989586621682451623"><span id="local-6989586621682451625"><span id="local-6989586621682451627"><span id="local-6989586621682451629"><span id="local-6989586621682451631"><span id="local-6989586621682451633"><span id="local-6989586621682451635"><span id="local-6989586621682451638"><span id="local-6989586621682451641"><span id="local-6989586621682451643"><span id="local-6989586621682451645"><span id="local-6989586621682451647"><span id="local-6989586621682451649"><span id="local-6989586621682451651"><span id="local-6989586621682451653"><span id="local-6989586621682451655"><span id="local-6989586621682451657"><span id="local-6989586621682451659"><span id="local-6989586621682451661"><span id="local-6989586621682451663"><span id="local-6989586621682451665"><span id="local-6989586621682451667"><span id="local-6989586621682451669"><span id="local-6989586621682451678"><span id="local-6989586621682451680"><span id="local-6989586621682451682"><span id="local-6989586621682451685"><span id="local-6989586621682451687"><span id="local-6989586621682451689"><span id="local-6989586621682451692"><span id="local-6989586621682451694"><span id="local-6989586621682451696"><span id="local-6989586621682451698"><span id="local-6989586621682451700"><span id="local-6989586621682451702"><span id="local-6989586621682451704"><span id="local-6989586621682451707"><span id="local-6989586621682451710"><span id="local-6989586621682451712"><span id="local-6989586621682451714"><span id="local-6989586621682451716"><span id="local-6989586621682451718"><span id="local-6989586621682451720"><span id="local-6989586621682451722"><span id="local-6989586621682451724"><span id="local-6989586621682451726"><span id="local-6989586621682451728"><span id="local-6989586621682451730"><span id="local-6989586621682451732"><span id="local-6989586621682451734"><span id="local-6989586621682451736"><span id="local-6989586621682451738"><span id="local-6989586621682451740"><span id="local-6989586621682451742"><span id="local-6989586621682451751"><span id="local-6989586621682451753"><span id="local-6989586621682451755"><span id="local-6989586621682451758"><span id="local-6989586621682451760"><span id="local-6989586621682451762"><span id="local-6989586621682451765"><span id="local-6989586621682451767"><span id="local-6989586621682451769"><span id="local-6989586621682451771"><span id="local-6989586621682451773"><span id="local-6989586621682451775"><span id="local-6989586621682451777"><span id="local-6989586621682451780"><span id="local-6989586621682451783"><span id="local-6989586621682451785"><span id="local-6989586621682451787"><span id="local-6989586621682451789"><span id="local-6989586621682451791"><span id="local-6989586621682451793"><span id="local-6989586621682451795"><span id="local-6989586621682451797"><span id="local-6989586621682451799"><span id="local-6989586621682451801"><span id="local-6989586621682451803"><span id="local-6989586621682451805"><span id="local-6989586621682451807"><span id="local-6989586621682451809"><span id="local-6989586621682451811"><span id="local-6989586621682451813"><span id="local-6989586621682451815"><span id="local-6989586621682451817"><span id="local-6989586621682451819"><span id="local-6989586621682451821"><span id="local-6989586621682451823"><span id="local-6989586621682451832"><span id="local-6989586621682451834"><span id="local-6989586621682451836"><span id="local-6989586621682451839"><span id="local-6989586621682451842"><span id="local-6989586621682451845"><span id="local-6989586621682451847"><span id="local-6989586621682451849"><span id="local-6989586621682451851"><span id="local-6989586621682451853"><span id="local-6989586621682451855"><span id="local-6989586621682451857"><span id="local-6989586621682451859"><span id="local-6989586621682451861"><span id="local-6989586621682451863"><span id="local-6989586621682451865"><span id="local-6989586621682451867"><span id="local-6989586621682451869"><span id="local-6989586621682451878"><span id="local-6989586621682451880"><span id="local-6989586621682451882"><span id="local-6989586621682451885"><span id="local-6989586621682451887"><span id="local-6989586621682451889"><span id="local-6989586621682451892"><span id="local-6989586621682451894"><span id="local-6989586621682451896"><span id="local-6989586621682451898"><span id="local-6989586621682451900"><span id="local-6989586621682451902"><span id="local-6989586621682451904"><span id="local-6989586621682451907"><span id="local-6989586621682451910"><span id="local-6989586621682451912"><span id="local-6989586621682451914"><span id="local-6989586621682451916"><span id="local-6989586621682451918"><span id="local-6989586621682451920"><span id="local-6989586621682451922"><span id="local-6989586621682451924"><span id="local-6989586621682451926"><span id="local-6989586621682451928"><span id="local-6989586621682451930"><span id="local-6989586621682451932"><span id="local-6989586621682451934"><span id="local-6989586621682451936"><span id="local-6989586621682451938"><span id="local-6989586621682451940"><span id="local-6989586621682451949"><span id="local-6989586621682451951"><span id="local-6989586621682451953"><span id="local-6989586621682451956"><span id="local-6989586621682451959"><span id="local-6989586621682451962"><span id="local-6989586621682451964"><span id="local-6989586621682451966"><span id="local-6989586621682451968"><span id="local-6989586621682451970"><span id="local-6989586621682451972"><span id="local-6989586621682451974"><span id="local-6989586621682451976"><span id="local-6989586621682451978"><span id="local-6989586621682451980"><span id="local-6989586621682451982"><span id="local-6989586621682451984"><span id="local-6989586621682451986"><span id="local-6989586621682451988"><span id="local-6989586621682451990"><span id="local-6989586621682451992"><span id="local-6989586621682451994"><span id="local-6989586621682452003"><span id="local-6989586621682452005"><span id="local-6989586621682452007"><span id="local-6989586621682452010"><span id="local-6989586621682452012"><span id="local-6989586621682452014"><span id="local-6989586621682452017"><span id="local-6989586621682452019"><span id="local-6989586621682452021"><span id="local-6989586621682452023"><span id="local-6989586621682452025"><span id="local-6989586621682452027"><span id="local-6989586621682452029"><span id="local-6989586621682452032"><span id="local-6989586621682452035"><span id="local-6989586621682452037"><span id="local-6989586621682452039"><span id="local-6989586621682452041"><span id="local-6989586621682452043"><span id="local-6989586621682452045"><span id="local-6989586621682452047"><span id="local-6989586621682452049"><span id="local-6989586621682452051"><span id="local-6989586621682452053"><span id="local-6989586621682452055"><span id="local-6989586621682452057"><span id="local-6989586621682452059"><span id="local-6989586621682452061"><span id="local-6989586621682452063"><span id="local-6989586621682452065"><span id="local-6989586621682452076"><span id="local-6989586621682452078"><span id="local-6989586621682452080"><span id="local-6989586621682452082"><span id="local-6989586621682452084"><span id="local-6989586621682452086"><span id="local-6989586621682452088"><span id="local-6989586621682452090"><span id="local-6989586621682452092"><span id="local-6989586621682452094"><span id="local-6989586621682452097"><span id="local-6989586621682452099"><span id="local-6989586621682452101"><span id="local-6989586621682452103"><span id="local-6989586621682452105"><span id="local-6989586621682452107"><span id="local-6989586621682452109"><span id="local-6989586621682452111"><span id="local-6989586621682452113"><span id="local-6989586621682452115"><span id="local-6989586621682452117"><span id="local-6989586621682452119"><span id="local-6989586621682452121"><span id="local-6989586621682452123"><span id="local-6989586621682452125"><span id="local-6989586621682452127"><span id="local-6989586621682452129"><span id="local-6989586621682452131"><span id="local-6989586621682452134"><span id="local-6989586621682452136"><span id="local-6989586621682452138"><span id="local-6989586621682452140"><span id="local-6989586621682452142"><span id="local-6989586621682452144"><span id="local-6989586621682452146"><span id="local-6989586621682452148"><span id="local-6989586621682452150"><span id="local-6989586621682452154"><span id="local-6989586621682452156"><span id="local-6989586621682452158"><span id="local-6989586621682452160"><span id="local-6989586621682452162"><span id="local-6989586621682452164"><span id="local-6989586621682452166"><span id="local-6989586621682452168"><span id="local-6989586621682452170"><span id="local-6989586621682452172"><span id="local-6989586621682452175"><span id="local-6989586621682452177"><span id="local-6989586621682452179"><span id="local-6989586621682452181"><span id="local-6989586621682452183"><span id="local-6989586621682452185"><span id="local-6989586621682452187"><span id="local-6989586621682452189"><span id="local-6989586621682452191"><span id="local-6989586621682452193"><span id="local-6989586621682452195"><span id="local-6989586621682452197"><span id="local-6989586621682452199"><span id="local-6989586621682452201"><span id="local-6989586621682452203"><span id="local-6989586621682452205"><span id="local-6989586621682452207"><span id="local-6989586621682452209"><span id="local-6989586621682452212"><span id="local-6989586621682452214"><span id="local-6989586621682452216"><span id="local-6989586621682452218"><span id="local-6989586621682452220"><span id="local-6989586621682452222"><span id="local-6989586621682452224"><span id="local-6989586621682452226"><span id="local-6989586621682452228"><span id="local-6989586621682452232"><span id="local-6989586621682452234"><span id="local-6989586621682452236"><span id="local-6989586621682452238"><span id="local-6989586621682452240"><span id="local-6989586621682452242"><span id="local-6989586621682452244"><span id="local-6989586621682452246"><span id="local-6989586621682452248"><span id="local-6989586621682452250"><span id="local-6989586621682452253"><span id="local-6989586621682452255"><span id="local-6989586621682452257"><span id="local-6989586621682452259"><span id="local-6989586621682452261"><span id="local-6989586621682452263"><span id="local-6989586621682452265"><span id="local-6989586621682452267"><span id="local-6989586621682452269"><span id="local-6989586621682452271"><span id="local-6989586621682452273"><span id="local-6989586621682452275"><span id="local-6989586621682452277"><span id="local-6989586621682452279"><span id="local-6989586621682452281"><span id="local-6989586621682452283"><span id="local-6989586621682452285"><span id="local-6989586621682452287"><span id="local-6989586621682452290"><span id="local-6989586621682452292"><span id="local-6989586621682452294"><span id="local-6989586621682452296"><span id="local-6989586621682452298"><span id="local-6989586621682452300"><span id="local-6989586621682452302"><span id="local-6989586621682452304"><span id="local-6989586621682452306"><span id="local-6989586621682452310"><span id="local-6989586621682452312"><span id="local-6989586621682452314"><span id="local-6989586621682452316"><span id="local-6989586621682452318"><span id="local-6989586621682452320"><span id="local-6989586621682452322"><span id="local-6989586621682452324"><span id="local-6989586621682452326"><span id="local-6989586621682452328"><span id="local-6989586621682452331"><span id="local-6989586621682452333"><span id="local-6989586621682452335"><span id="local-6989586621682452337"><span id="local-6989586621682452339"><span id="local-6989586621682452341"><span id="local-6989586621682452343"><span id="local-6989586621682452345"><span id="local-6989586621682452347"><span id="local-6989586621682452349"><span id="local-6989586621682452351"><span id="local-6989586621682452353"><span id="local-6989586621682452355"><span id="local-6989586621682452357"><span id="local-6989586621682452359"><span id="local-6989586621682452361"><span id="local-6989586621682452363"><span id="local-6989586621682452365"><span id="local-6989586621682452368"><span id="local-6989586621682452370"><span id="local-6989586621682452372"><span id="local-6989586621682452374"><span id="local-6989586621682452376"><span id="local-6989586621682452378"><span id="local-6989586621682452380"><span id="local-6989586621682452382"><span id="local-6989586621682452384"><span id="local-6989586621682452388"><span id="local-6989586621682452390"><span id="local-6989586621682452392"><span id="local-6989586621682452394"><span id="local-6989586621682452396"><span id="local-6989586621682452398"><span id="local-6989586621682452400"><span id="local-6989586621682452402"><span id="local-6989586621682452404"><span id="local-6989586621682452406"><span id="local-6989586621682452409"><span id="local-6989586621682452411"><span id="local-6989586621682452413"><span id="local-6989586621682452415"><span id="local-6989586621682452417"><span id="local-6989586621682452419"><span id="local-6989586621682452421"><span id="local-6989586621682452423"><span id="local-6989586621682452425"><span id="local-6989586621682452427"><span id="local-6989586621682452429"><span id="local-6989586621682452431"><span id="local-6989586621682452433"><span id="local-6989586621682452435"><span id="local-6989586621682452437"><span id="local-6989586621682452439"><span id="local-6989586621682452441"><span id="local-6989586621682452443"><span id="local-6989586621682452446"><span id="local-6989586621682452448"><span id="local-6989586621682452450"><span id="local-6989586621682452452"><span id="local-6989586621682452454"><span id="local-6989586621682452456"><span id="local-6989586621682452458"><span id="local-6989586621682452460"><span id="local-6989586621682452462"><span id="local-6989586621682452466"><span id="local-6989586621682452468"><span id="local-6989586621682452470"><span id="local-6989586621682452474"><span id="local-6989586621682452476"><span id="local-6989586621682452478"><span id="local-6989586621682452480"><span id="local-6989586621682452482"><span id="local-6989586621682452484"><span id="local-6989586621682452486"><span id="local-6989586621682452489"><span id="local-6989586621682452491"><span id="local-6989586621682452493"><span id="local-6989586621682452495"><span id="local-6989586621682452497"><span id="local-6989586621682452499"><span id="local-6989586621682452501"><span id="local-6989586621682452503"><span id="local-6989586621682452505"><span id="local-6989586621682452509"><span id="local-6989586621682452511"><span id="local-6989586621682452513"><span id="local-6989586621682452517"><span id="local-6989586621682452519"><span id="local-6989586621682452521"><span id="local-6989586621682452523"><span id="local-6989586621682452525"><span id="local-6989586621682452527"><span id="local-6989586621682452529"><span id="local-6989586621682452532"><span id="local-6989586621682452534"><span id="local-6989586621682452536"><span id="local-6989586621682452538"><span id="local-6989586621682452540"><span id="local-6989586621682452542"><span id="local-6989586621682452544"><span id="local-6989586621682452546"><span id="local-6989586621682452548"><span id="local-6989586621682452552"><span id="local-6989586621682452554"><span id="local-6989586621682452556"><span id="local-6989586621682452560"><span id="local-6989586621682452562"><span id="local-6989586621682452564"><span id="local-6989586621682452566"><span id="local-6989586621682452568"><span id="local-6989586621682452570"><span id="local-6989586621682452572"><span id="local-6989586621682452575"><span id="local-6989586621682452577"><span id="local-6989586621682452579"><span id="local-6989586621682452581"><span id="local-6989586621682452583"><span id="local-6989586621682452585"><span id="local-6989586621682452587"><span id="local-6989586621682452589"><span id="local-6989586621682452591"><span id="local-6989586621682452595"><span id="local-6989586621682452597"><span id="local-6989586621682452599"><span id="local-6989586621682452601"><span id="local-6989586621682452603"><span id="local-6989586621682452605"><span id="local-6989586621682452607"><span id="local-6989586621682452609"><span id="local-6989586621682452611"><span id="local-6989586621682452613"><span id="local-6989586621682452616"><span id="local-6989586621682452618"><span id="local-6989586621682452620"><span id="local-6989586621682452622"><span id="local-6989586621682452624"><span id="local-6989586621682452626"><span id="local-6989586621682452628"><span id="local-6989586621682452630"><span id="local-6989586621682452632"><span id="local-6989586621682452634"><span id="local-6989586621682452636"><span id="local-6989586621682452638"><span id="local-6989586621682452640"><span id="local-6989586621682452642"><span id="local-6989586621682452644"><span id="local-6989586621682452646"><span id="local-6989586621682452648"><span id="local-6989586621682452650"><span id="local-6989586621682452653"><span id="local-6989586621682452655"><span id="local-6989586621682452657"><span id="local-6989586621682452659"><span id="local-6989586621682452661"><span id="local-6989586621682452663"><span id="local-6989586621682452665"><span id="local-6989586621682452667"><span id="local-6989586621682452669"><span id="local-6989586621682452673"><span id="local-6989586621682452675"><span id="local-6989586621682452677"><span id="local-6989586621682452681"><span id="local-6989586621682452683"><span id="local-6989586621682452685"><span id="local-6989586621682452687"><span id="local-6989586621682452689"><span id="local-6989586621682452691"><span id="local-6989586621682452693"><span id="local-6989586621682452696"><span id="local-6989586621682452698"><span id="local-6989586621682452700"><span id="local-6989586621682452702"><span id="local-6989586621682452704"><span id="local-6989586621682452706"><span id="local-6989586621682452708"><span id="local-6989586621682452710"><span id="local-6989586621682452712"><span id="local-6989586621682452716"><span id="local-6989586621682452718"><span id="local-6989586621682452720"><span id="local-6989586621682452722"><span id="local-6989586621682452724"><span id="local-6989586621682452726"><span id="local-6989586621682452728"><span id="local-6989586621682452730"><span id="local-6989586621682452732"><span id="local-6989586621682452734"><span id="local-6989586621682452737"><span id="local-6989586621682452739"><span id="local-6989586621682452741"><span id="local-6989586621682452743"><span id="local-6989586621682452745"><span id="local-6989586621682452747"><span id="local-6989586621682452749"><span id="local-6989586621682452751"><span id="local-6989586621682452753"><span id="local-6989586621682452755"><span id="local-6989586621682452757"><span id="local-6989586621682452759"><span id="local-6989586621682452761"><span id="local-6989586621682452763"><span id="local-6989586621682452765"><span id="local-6989586621682452767"><span id="local-6989586621682452769"><span id="local-6989586621682452771"><span id="local-6989586621682452774"><span id="local-6989586621682452776"><span id="local-6989586621682452778"><span id="local-6989586621682452780"><span id="local-6989586621682452782"><span id="local-6989586621682452784"><span id="local-6989586621682452786"><span id="local-6989586621682452788"><span id="local-6989586621682452790"><span id="local-6989586621682452794"><span id="local-6989586621682452796"><span id="local-6989586621682452798"><span id="local-6989586621682452802"><span id="local-6989586621682452804"><span id="local-6989586621682452806"><span id="local-6989586621682452808"><span id="local-6989586621682452810"><span id="local-6989586621682452812"><span id="local-6989586621682452814"><span id="local-6989586621682452817"><span id="local-6989586621682452819"><span id="local-6989586621682452821"><span id="local-6989586621682452823"><span id="local-6989586621682452825"><span id="local-6989586621682452827"><span id="local-6989586621682452829"><span id="local-6989586621682452831"><span id="local-6989586621682452833"><span id="local-6989586621682452835"><span id="local-6989586621682452836"><span id="local-6989586621682452837"><span id="local-6989586621682452838"><span id="local-6989586621682452839"><span id="local-6989586621682452840"><span id="local-6989586621682452841"><span id="local-6989586621682452842"><span id="local-6989586621682452843"><span id="local-6989586621682452844"><span id="local-6989586621682452845"><span id="local-6989586621682452846"><span id="Unique"><span id="EntityField"><span id="PersistEntityBackend"><span id="InternalState"><span id="Settings"><span id="ArbitrarySeed"><span id="PoolProduction"><span id="BlockHeader"><span id="StakeDistribution"><span id="PoolOwner"><span id="PoolRegistration"><span id="PoolDelistment"><span id="PoolRetirement"><span id="PoolMetadata"><span id="Key"><span id="PoolMetadataFetchAttempts"><span id="local-6989586621682451108"><span id="local-6989586621682451109"><span id="local-6989586621682451110"><span id="local-6989586621682451111"><span id="local-6989586621682451112"><span id="local-6989586621682451113"><span id="local-6989586621682451114"><span id="local-6989586621682451115"><span id="local-6989586621682451116"><span id="local-6989586621682451117"><span id="local-6989586621682451118"><span id="local-6989586621682451119"><span id="local-6989586621682451120"><span id="local-6989586621682451121"><span id="local-6989586621682451122"><span id="local-6989586621682451123"><span id="local-6989586621682451124"><span id="local-6989586621682451125"><span id="local-6989586621682451126"><span id="local-6989586621682451127"><span id="local-6989586621682451128"><span id="local-6989586621682451129"><span id="local-6989586621682451130"><span id="local-6989586621682451131"><span id="local-6989586621682451132"><span id="local-6989586621682451133"><span id="local-6989586621682451134"><span id="local-6989586621682451135"><span id="local-6989586621682451136"><span id="local-6989586621682451137"><span id="local-6989586621682451138"><span id="local-6989586621682451139"><span id="local-6989586621682451140"><span id="local-6989586621682451141"></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-identifier">share</span><span>
</span><span id="line-49"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-identifier">mkPersist</span><span> </span><span class="hs-identifier">sqlSettings'</span><span>
</span><span id="line-50"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">mkMigrate</span><span> </span><span class="hs-string">&quot;migrateAll&quot;</span><span>
</span><span id="line-51"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-52"></span><span>    </span><span class="">[persistLowerCase|

InternalState sql=internal_state
    lastGCMetadata                   POSIXTime Maybe   sql=last_gc_metadata

    deriving Show Generic

Settings sql=settings
    settingsPoolMetadataSource       W.PoolMetadataSource   sql=metadata_source

    deriving Show Generic

-- A unique, but arbitrary, value for this particular device
ArbitrarySeed sql=arbitrary_seed
    seedSeed                    StdGen       sql=seed

    deriving Show Generic

-- The set of stake pools that produced a given block
PoolProduction sql=pool_production
    poolProductionPoolId         W.PoolId     sql=pool_id
    poolProductionSlot           SlotNo       sql=slot
    poolProductionHeaderHash     W.BlockId    sql=header_hash
    poolProductionParentHash     W.BlockId    sql=parent_header_hash
    poolProductionBlockHeight    Word32       sql=block_height

    Primary poolProductionSlot
    deriving Show Generic

-- A block header
BlockHeader sql=block_headers
    blockSlot           SlotNo       sql=slot
    blockHeaderHash     W.BlockId    sql=header_hash
    blockParentHash     W.BlockId    sql=parent_header_hash
    blockHeight         Word32       sql=block_height

    Primary blockHeight
    deriving Show Generic

-- Stake distribution for each stake pool
StakeDistribution sql=stake_distribution
    stakeDistributionPoolId     W.PoolId     sql=pool_id
    stakeDistributionEpoch      Word64       sql=epoch
    stakeDistributionStake      Word64       sql=stake

    Primary stakeDistributionPoolId stakeDistributionEpoch
    deriving Show Generic

-- Mapping from pool id to owner.
PoolOwner sql=pool_owner
    poolOwnerPoolId             W.PoolId            sql=pool_id
    poolOwnerSlot               W.SlotNo            sql=slot
    poolOwnerSlotInternalIndex  Word64              sql=slot_internal_index
    poolOwnerOwner              W.PoolOwner         sql=pool_owner
    poolOwnerIndex              Word8               sql=pool_owner_index

    Primary poolOwnerPoolId poolOwnerSlot poolOwnerSlotInternalIndex poolOwnerOwner poolOwnerIndex
    Foreign PoolRegistration OnDeleteCascade fk_registration_pool_id poolOwnerPoolId poolOwnerSlot poolOwnerSlotInternalIndex
    deriving Show Generic

-- Mapping of registration certificate to pool
PoolRegistration sql=pool_registration
    poolRegistrationPoolId            W.PoolId                      sql=pool_id
    poolRegistrationSlot              W.SlotNo                      sql=slot
    poolRegistrationSlotInternalIndex Word64                        sql=slot_internal_index
    poolRegistrationMarginNumerator   Word64                        sql=margin_numerator
    poolRegistrationMarginDenominator Word64                        sql=margin_denominator
    poolRegistrationCost              Word64                        sql=cost
    poolRegistrationPledge            Word64                        sql=pledge
    poolRegistrationMetadataUrl       W.StakePoolMetadataUrl  Maybe sql=metadata_url
    poolRegistrationMetadataHash      W.StakePoolMetadataHash Maybe sql=metadata_hash

    Primary poolRegistrationPoolId poolRegistrationSlot poolRegistrationSlotInternalIndex
    deriving Show Generic

PoolDelistment sql=pool_delistment
    delistedPoolId                W.PoolId                      sql=pool_id
    Primary delistedPoolId
    deriving Show Generic

-- Mapping of retirement certificates to pools
PoolRetirement sql=pool_retirement
    poolRetirementPoolId              W.PoolId            sql=pool_id
    poolRetirementSlot                W.SlotNo            sql=slot
    poolRetirementSlotInternalIndex   Word64              sql=slot_internal_index
    poolRetirementEpoch               Word64              sql=epoch

    Primary poolRetirementPoolId poolRetirementSlot poolRetirementSlotInternalIndex
    deriving Show Generic

-- Cached metadata after they've been fetched from a remote server.
PoolMetadata sql=pool_metadata
    poolMetadataHash                   W.StakePoolMetadataHash sql=metadata_hash
    poolMetadataName                   Text                    sql=name
    poolMetadataTicker                 W.StakePoolTicker       sql=ticker
    poolMetadataDescription            Text Maybe              sql=description
    poolMetadataHomepage               Text                    sql=homepage

    Primary poolMetadataHash
    deriving Show Generic

PoolMetadataFetchAttempts sql=pool_metadata_fetch_attempts
    poolFetchAttemptsMetadataHash    W.StakePoolMetadataHash sql=metadata_hash
    poolFetchAttemptsMetadataUrl     W.StakePoolMetadataUrl  sql=metadata_url
    poolFetchAttemptsRetryAfter      UTCTime                 sql=retry_after
    poolFetchAttemptsRetryCount      Word8                   sql=retry_count

    Primary poolFetchAttemptsMetadataHash poolFetchAttemptsMetadataUrl
    deriving Show Generic
|]</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-162"></span></pre></body></html>