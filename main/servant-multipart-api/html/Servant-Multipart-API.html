<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Servant.Multipart.API</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">servant-multipart-api-0.12.1: multipart/form-data (e.g file upload) support for servant</span><ul class="links" id="page-menu"><li><a href="src/Servant.Multipart.API.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Servant.Multipart.API</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p><code>multipart/form-data</code> Servant API support for servant.
   see servant-multipart and servant-multipart-client for server- and client-
   definitions.</p><p>This is mostly useful for adding file upload support to
   an API. See haddocks of <code><a href="Servant-Multipart-API.html#t:MultipartForm" title="Servant.Multipart.API">MultipartForm</a></code> for an introduction.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">type</span> <a href="#t:MultipartForm">MultipartForm</a> tag a = <a href="Servant-Multipart-API.html#t:MultipartForm-39-" title="Servant.Multipart.API">MultipartForm'</a> '[] tag a</li><li class="src short"><span class="keyword">data</span> <a href="#t:MultipartForm-39-">MultipartForm'</a> (mods :: [*]) tag a</li><li class="src short"><span class="keyword">data</span> <a href="#t:MultipartData">MultipartData</a> tag = <a href="#v:MultipartData">MultipartData</a> {<ul class="subs"><li><a href="#v:inputs">inputs</a> :: [<a href="Servant-Multipart-API.html#t:Input" title="Servant.Multipart.API">Input</a>]</li><li><a href="#v:files">files</a> :: [<a href="Servant-Multipart-API.html#t:FileData" title="Servant.Multipart.API">FileData</a> tag]</li></ul>}</li><li class="src short"><span class="keyword">class</span> <a href="#t:ToMultipart">ToMultipart</a> tag a <span class="keyword">where</span><ul class="subs"><li><a href="#v:toMultipart">toMultipart</a> :: a -&gt; <a href="Servant-Multipart-API.html#t:MultipartData" title="Servant.Multipart.API">MultipartData</a> tag</li></ul></li><li class="src short"><span class="keyword">class</span> <a href="#t:FromMultipart">FromMultipart</a> tag a <span class="keyword">where</span><ul class="subs"><li><a href="#v:fromMultipart">fromMultipart</a> :: <a href="Servant-Multipart-API.html#t:MultipartData" title="Servant.Multipart.API">MultipartData</a> tag -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="../../ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a> a</li></ul></li><li class="src short"><span class="keyword">type family</span> <a href="#t:MultipartResult">MultipartResult</a> tag :: *</li><li class="src short"><span class="keyword">data</span> <a href="#t:Tmp">Tmp</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:Mem">Mem</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:Input">Input</a> = <a href="#v:Input">Input</a> {<ul class="subs"><li><a href="#v:iName">iName</a> :: <a href="../../text/html/Data-Text.html#t:Text" title="Data.Text">Text</a></li><li><a href="#v:iValue">iValue</a> :: <a href="../../text/html/Data-Text.html#t:Text" title="Data.Text">Text</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:FileData">FileData</a> tag = <a href="#v:FileData">FileData</a> {<ul class="subs"><li><a href="#v:fdInputName">fdInputName</a> :: <a href="../../text/html/Data-Text.html#t:Text" title="Data.Text">Text</a></li><li><a href="#v:fdFileName">fdFileName</a> :: <a href="../../text/html/Data-Text.html#t:Text" title="Data.Text">Text</a></li><li><a href="#v:fdFileCType">fdFileCType</a> :: <a href="../../text/html/Data-Text.html#t:Text" title="Data.Text">Text</a></li><li><a href="#v:fdPayload">fdPayload</a> :: <a href="Servant-Multipart-API.html#t:MultipartResult" title="Servant.Multipart.API">MultipartResult</a> tag</li></ul>}</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:MultipartForm" class="def">MultipartForm</a> tag a = <a href="Servant-Multipart-API.html#t:MultipartForm-39-" title="Servant.Multipart.API">MultipartForm'</a> '[] tag a <a href="src/Servant.Multipart.API.html#MultipartForm" class="link">Source</a> <a href="#t:MultipartForm" class="selflink">#</a></p><div class="doc"><p>Combinator for specifying a <code>multipart/form-data</code> request
   body, typically (but not always) issued from an HTML <code>&lt;form&gt;</code>.</p><p><code>multipart/form-data</code> can't be made into an ordinary content
   type for now in servant because it doesn't just decode the
   request body from some format but also performs IO in the case
   of writing the uploaded files to disk, e.g in <code>/tmp</code>, which is
   not compatible with servant's vision of a content type as things
   stand now. This also means that <code><a href="Servant-Multipart-API.html#t:MultipartForm" title="Servant.Multipart.API">MultipartForm</a></code> can't be used in
   conjunction with <code><a href="../../servant/html/Servant-API.html#t:ReqBody" title="Servant.API">ReqBody</a></code> in an endpoint.</p><p>The <code>tag</code> type parameter instructs the function to handle data
   either as data to be saved to temporary storage (<code><a href="Servant-Multipart-API.html#t:Tmp" title="Servant.Multipart.API">Tmp</a></code>) or saved to
   memory (<code><a href="Servant-Multipart-API.html#t:Mem" title="Servant.Multipart.API">Mem</a></code>).</p><p>The <code>a</code> type parameter represents the Haskell type to which
   you are going to decode the multipart data to, where the
   multipart data consists in all the usual form inputs along
   with the files sent along through <code>&lt;input type=&quot;file&quot;&gt;</code>
   fields in the form.</p><p>One option provided out of the box by this library is to decode
   to <code><a href="Servant-Multipart-API.html#t:MultipartData" title="Servant.Multipart.API">MultipartData</a></code>.</p><p>Example:</p><pre>  type API = MultipartForm Tmp (MultipartData Tmp) :&gt; Post '[PlainText] String

  api :: Proxy API
  api = Proxy

  server :: MultipartData Tmp -&gt; Handler String
  server multipartData = return str

    where str = &quot;The form was submitted with &quot;
             ++ show nInputs ++ &quot; textual inputs and &quot;
             ++ show nFiles  ++ &quot; files.&quot;
          nInputs = length (inputs multipartData)
          nFiles  = length (files multipartData)
  </pre><p>You can alternatively provide a <code><a href="Servant-Multipart-API.html#t:FromMultipart" title="Servant.Multipart.API">FromMultipart</a></code> instance
   for some type of yours, allowing you to regroup data
   into a structured form and potentially selecting
   a subset of the entire form data that was submitted.</p><p>Example, where we only look extract one input, <em>username</em>,
   and one file, where the corresponding input field's <em>name</em>
   attribute was set to <em>pic</em>:</p><pre>  data User = User { username :: Text, pic :: FilePath }

  instance FromMultipart Tmp User where
    fromMultipart multipartData =
      User &lt;$&gt; lookupInput &quot;username&quot; multipartData
           &lt;*&gt; fmap fdPayload (lookupFile &quot;pic&quot; multipartData)

  type API = MultipartForm Tmp User :&gt; Post '[PlainText] String

  server :: User -&gt; Handler String
  server usr = return str

    where str = username usr ++ &quot;'s profile picture&quot;
             ++ &quot; got temporarily uploaded to &quot;
             ++ pic usr ++ &quot; and will be removed from there &quot;
             ++ &quot; after this handler has run.&quot;
  </pre><p>Note that the behavior of this combinator is configurable,
   by using <code>serveWith</code> from servant-server instead of <code>serve</code>,
   which takes an additional <code>Context</code> argument. It simply is an
   heterogeneous list where you can for example store
   a value of type <code>MultipartOptions</code> that has the configuration that
   you want, which would then get picked up by servant-multipart.</p><p><strong>Important</strong>: as mentionned in the example above,
   the file paths point to temporary files which get removed
   after your handler has run, if they are still there. It is
   therefore recommended to move or copy them somewhere in your
   handler code if you need to keep the content around.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:MultipartForm-39-" class="def">MultipartForm'</a> (mods :: [*]) tag a <a href="src/Servant.Multipart.API.html#MultipartForm%27" class="link">Source</a> <a href="#t:MultipartForm-39-" class="selflink">#</a></p><div class="doc"><p><code><a href="Servant-Multipart-API.html#t:MultipartForm" title="Servant.Multipart.API">MultipartForm</a></code> which can be modified with <code><a href="../../servant/html/Servant-API-Modifiers.html#v:Lenient" title="Servant.API.Modifiers">Lenient</a></code>.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:MultipartForm-39-">Instances</h4><details id="i:MultipartForm-39-" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MultipartForm-39-:HasLink:1"></span> <a href="../../servant/html/Servant-API.html#t:HasLink" title="Servant.API">HasLink</a> sub =&gt; <a href="../../servant/html/Servant-API.html#t:HasLink" title="Servant.API">HasLink</a> (<a href="Servant-Multipart-API.html#t:MultipartForm" title="Servant.Multipart.API">MultipartForm</a> tag a <a href="../../servant/html/Servant-API.html#t::-62-" title="Servant.API">:&gt;</a> sub :: <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>)</span> <a href="src/Servant.Multipart.API.html#line-237" class="link">Source</a> <a href="#t:MultipartForm-39-" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MultipartForm-39-:HasLink:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Servant-Multipart-API.html">Servant.Multipart.API</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="../../servant/html/Servant-API.html#t:MkLink" title="Servant.API">MkLink</a> (<a href="Servant-Multipart-API.html#t:MultipartForm" title="Servant.Multipart.API">MultipartForm</a> tag a <a href="../../servant/html/Servant-API.html#t::-62-" title="Servant.API">:&gt;</a> sub) a <a href="../../servant/html/src" class="link">Source</a> <a href="#t:MkLink" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toLink">toLink</a> :: (<a href="../../servant/html/Servant-API.html#t:Link" title="Servant.API">Link</a> -&gt; a0) -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Proxy.html#t:Proxy" title="Data.Proxy">Proxy</a> (<a href="Servant-Multipart-API.html#t:MultipartForm" title="Servant.Multipart.API">MultipartForm</a> tag a <a href="../../servant/html/Servant-API.html#t::-62-" title="Servant.API">:&gt;</a> sub) -&gt; <a href="../../servant/html/Servant-API.html#t:Link" title="Servant.API">Link</a> -&gt; <a href="../../servant/html/Servant-API.html#t:MkLink" title="Servant.API">MkLink</a> (<a href="Servant-Multipart-API.html#t:MultipartForm" title="Servant.Multipart.API">MultipartForm</a> tag a <a href="../../servant/html/Servant-API.html#t::-62-" title="Servant.API">:&gt;</a> sub) a0 <a href="../../servant/html/src" class="link">Source</a> <a href="#v:toLink" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MultipartForm-39-:MkLink:2"></span> <span class="keyword">type</span> <a href="../../servant/html/Servant-API.html#t:MkLink" title="Servant.API">MkLink</a> (<a href="Servant-Multipart-API.html#t:MultipartForm" title="Servant.Multipart.API">MultipartForm</a> tag a <a href="../../servant/html/Servant-API.html#t::-62-" title="Servant.API">:&gt;</a> sub :: <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) r</span> <a href="src/Servant.Multipart.API.html#line-239" class="link">Source</a> <a href="#t:MultipartForm-39-" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MultipartForm-39-:MkLink:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Servant-Multipart-API.html">Servant.Multipart.API</a></p> <div class="src"><span class="keyword">type</span> <a href="../../servant/html/Servant-API.html#t:MkLink" title="Servant.API">MkLink</a> (<a href="Servant-Multipart-API.html#t:MultipartForm" title="Servant.Multipart.API">MultipartForm</a> tag a <a href="../../servant/html/Servant-API.html#t::-62-" title="Servant.API">:&gt;</a> sub :: <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) r = <a href="../../servant/html/Servant-API.html#t:MkLink" title="Servant.API">MkLink</a> sub r</div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:MultipartData" class="def">MultipartData</a> tag <a href="src/Servant.Multipart.API.html#MultipartData" class="link">Source</a> <a href="#t:MultipartData" class="selflink">#</a></p><div class="doc"><p>What servant gets out of a <code>multipart/form-data</code> form submission.</p><p>The type parameter <code>tag</code> tells if <code><a href="Servant-Multipart-API.html#t:MultipartData" title="Servant.Multipart.API">MultipartData</a></code> is stored as a
   temporary file or stored in memory. <code>tag</code> is type of either <code><a href="Servant-Multipart-API.html#t:Mem" title="Servant.Multipart.API">Mem</a></code>
   or <code><a href="Servant-Multipart-API.html#t:Tmp" title="Servant.Multipart.API">Tmp</a></code>.</p><p>The <code><a href="Servant-Multipart-API.html#v:inputs" title="Servant.Multipart.API">inputs</a></code> field contains a list of textual <code><a href="Servant-Multipart-API.html#t:Input" title="Servant.Multipart.API">Input</a></code>s, where
   each input for which a value is provided gets to be in this list,
   represented by the input name and the input value. See haddocks for
   <code><a href="Servant-Multipart-API.html#t:Input" title="Servant.Multipart.API">Input</a></code>.</p><p>The <code><a href="Servant-Multipart-API.html#v:files" title="Servant.Multipart.API">files</a></code> field contains a list of files that were sent along with the
   other inputs in the form. Each file is represented by a value of type
   <code><a href="Servant-Multipart-API.html#t:FileData" title="Servant.Multipart.API">FileData</a></code> which among other things contains the path to the temporary file
   (to be removed when your handler is done running) with a given uploaded
   file's content. See haddocks for <code><a href="Servant-Multipart-API.html#t:FileData" title="Servant.Multipart.API">FileData</a></code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:MultipartData" class="def">MultipartData</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:inputs" class="def">inputs</a> :: [<a href="Servant-Multipart-API.html#t:Input" title="Servant.Multipart.API">Input</a>]</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:files" class="def">files</a> :: [<a href="Servant-Multipart-API.html#t:FileData" title="Servant.Multipart.API">FileData</a> tag]</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:MultipartData">Instances</h4><details id="i:MultipartData" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MultipartData:ToMultipart:1"></span> <a href="Servant-Multipart-API.html#t:ToMultipart" title="Servant.Multipart.API">ToMultipart</a> tag (<a href="Servant-Multipart-API.html#t:MultipartData" title="Servant.Multipart.API">MultipartData</a> tag)</span> <a href="src/Servant.Multipart.API.html#line-224" class="link">Source</a> <a href="#t:MultipartData" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MultipartData:ToMultipart:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Servant-Multipart-API.html">Servant.Multipart.API</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toMultipart">toMultipart</a> :: <a href="Servant-Multipart-API.html#t:MultipartData" title="Servant.Multipart.API">MultipartData</a> tag -&gt; <a href="Servant-Multipart-API.html#t:MultipartData" title="Servant.Multipart.API">MultipartData</a> tag <a href="src/Servant.Multipart.API.html#toMultipart" class="link">Source</a> <a href="#v:toMultipart" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MultipartData:FromMultipart:2"></span> <a href="Servant-Multipart-API.html#t:FromMultipart" title="Servant.Multipart.API">FromMultipart</a> tag (<a href="Servant-Multipart-API.html#t:MultipartData" title="Servant.Multipart.API">MultipartData</a> tag)</span> <a href="src/Servant.Multipart.API.html#line-201" class="link">Source</a> <a href="#t:MultipartData" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MultipartData:FromMultipart:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Servant-Multipart-API.html">Servant.Multipart.API</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fromMultipart">fromMultipart</a> :: <a href="Servant-Multipart-API.html#t:MultipartData" title="Servant.Multipart.API">MultipartData</a> tag -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="../../ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a> (<a href="Servant-Multipart-API.html#t:MultipartData" title="Servant.Multipart.API">MultipartData</a> tag) <a href="src/Servant.Multipart.API.html#fromMultipart" class="link">Source</a> <a href="#v:fromMultipart" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a id="t:ToMultipart" class="def">ToMultipart</a> tag a <span class="keyword">where</span> <a href="src/Servant.Multipart.API.html#ToMultipart" class="link">Source</a> <a href="#t:ToMultipart" class="selflink">#</a></p><div class="doc"><p>Allows you to tell servant how to turn a more structured type
   into a <code><a href="Servant-Multipart-API.html#t:MultipartData" title="Servant.Multipart.API">MultipartData</a></code>, which is what is actually sent by the
   client.</p><pre>  data User = User { username :: Text, pic :: FilePath }

  instance toMultipart Tmp User where
      toMultipart user = MultipartData [Input &quot;username&quot; $ username user]
                                       [FileData &quot;pic&quot;
                                                 (pic user)
                                                 &quot;image/png&quot;
                                                 (pic user)
                                       ]
  </pre></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:toMultipart" class="def">toMultipart</a> :: a -&gt; <a href="Servant-Multipart-API.html#t:MultipartData" title="Servant.Multipart.API">MultipartData</a> tag <a href="src/Servant.Multipart.API.html#toMultipart" class="link">Source</a> <a href="#v:toMultipart" class="selflink">#</a></p><div class="doc"><p>Given a value of type <code>a</code>, convert it to a
 <code><a href="Servant-Multipart-API.html#t:MultipartData" title="Servant.Multipart.API">MultipartData</a></code>.</p></div></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:ToMultipart">Instances</h4><details id="i:ToMultipart" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:ToMultipart:ToMultipart:1"></span> <a href="Servant-Multipart-API.html#t:ToMultipart" title="Servant.Multipart.API">ToMultipart</a> tag (<a href="Servant-Multipart-API.html#t:MultipartData" title="Servant.Multipart.API">MultipartData</a> tag)</span> <a href="src/Servant.Multipart.API.html#line-224" class="link">Source</a> <a href="#t:ToMultipart" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:ToMultipart:ToMultipart:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Servant-Multipart-API.html">Servant.Multipart.API</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toMultipart">toMultipart</a> :: <a href="Servant-Multipart-API.html#t:MultipartData" title="Servant.Multipart.API">MultipartData</a> tag -&gt; <a href="Servant-Multipart-API.html#t:MultipartData" title="Servant.Multipart.API">MultipartData</a> tag <a href="src/Servant.Multipart.API.html#toMultipart" class="link">Source</a> <a href="#v:toMultipart" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a id="t:FromMultipart" class="def">FromMultipart</a> tag a <span class="keyword">where</span> <a href="src/Servant.Multipart.API.html#FromMultipart" class="link">Source</a> <a href="#t:FromMultipart" class="selflink">#</a></p><div class="doc"><p><code><a href="Servant-Multipart-API.html#t:MultipartData" title="Servant.Multipart.API">MultipartData</a></code> is the type representing
   <code>multipart/form-data</code> form inputs. Sometimes
   you may instead want to work with a more structured type
   of yours that potentially selects only a fraction of
   the data that was submitted, or just reshapes it to make
   it easier to work with. The <code><a href="Servant-Multipart-API.html#t:FromMultipart" title="Servant.Multipart.API">FromMultipart</a></code> class is exactly
   what allows you to tell servant how to turn &quot;raw&quot; multipart
   data into a value of your nicer type.</p><pre>  data User = User { username :: Text, pic :: FilePath }

  instance FromMultipart Tmp User where
    fromMultipart form =
      User &lt;$&gt; lookupInput &quot;username&quot; (inputs form)
           &lt;*&gt; fmap fdPayload (lookupFile &quot;pic&quot; $ files form)
  </pre></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:fromMultipart" class="def">fromMultipart</a> :: <a href="Servant-Multipart-API.html#t:MultipartData" title="Servant.Multipart.API">MultipartData</a> tag -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="../../ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a> a <a href="src/Servant.Multipart.API.html#fromMultipart" class="link">Source</a> <a href="#v:fromMultipart" class="selflink">#</a></p><div class="doc"><p>Given a value of type <code><a href="Servant-Multipart-API.html#t:MultipartData" title="Servant.Multipart.API">MultipartData</a></code>, which consists
   in a list of textual inputs and another list for
   files, try to extract a value of type <code>a</code>. When
   extraction fails, servant errors out with status code 400.</p></div></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:FromMultipart">Instances</h4><details id="i:FromMultipart" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:FromMultipart:FromMultipart:1"></span> <a href="Servant-Multipart-API.html#t:FromMultipart" title="Servant.Multipart.API">FromMultipart</a> tag (<a href="Servant-Multipart-API.html#t:MultipartData" title="Servant.Multipart.API">MultipartData</a> tag)</span> <a href="src/Servant.Multipart.API.html#line-201" class="link">Source</a> <a href="#t:FromMultipart" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:FromMultipart:FromMultipart:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Servant-Multipart-API.html">Servant.Multipart.API</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fromMultipart">fromMultipart</a> :: <a href="Servant-Multipart-API.html#t:MultipartData" title="Servant.Multipart.API">MultipartData</a> tag -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="../../ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a> (<a href="Servant-Multipart-API.html#t:MultipartData" title="Servant.Multipart.API">MultipartData</a> tag) <a href="src/Servant.Multipart.API.html#fromMultipart" class="link">Source</a> <a href="#v:fromMultipart" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:MultipartResult" class="def">MultipartResult</a> tag :: * <a href="src/Servant.Multipart.API.html#MultipartResult" class="link">Source</a> <a href="#t:MultipartResult" class="selflink">#</a></p><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:MultipartResult">Instances</h4><details id="i:MultipartResult" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:if:MultipartResult:MultipartResult:1"></span> <span class="keyword">type</span> <a href="Servant-Multipart-API.html#t:MultipartResult" title="Servant.Multipart.API">MultipartResult</a> <a href="Servant-Multipart-API.html#t:Mem" title="Servant.Multipart.API">Mem</a></span> <a href="src/Servant.Multipart.API.html#line-235" class="link">Source</a> <a href="#t:MultipartResult" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:if:MultipartResult:MultipartResult:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Servant-Multipart-API.html">Servant.Multipart.API</a></p> <div class="src"><span class="keyword">type</span> <a href="Servant-Multipart-API.html#t:MultipartResult" title="Servant.Multipart.API">MultipartResult</a> <a href="Servant-Multipart-API.html#t:Mem" title="Servant.Multipart.API">Mem</a> = <a href="../../bytestring/html/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:if:MultipartResult:MultipartResult:2"></span> <span class="keyword">type</span> <a href="Servant-Multipart-API.html#t:MultipartResult" title="Servant.Multipart.API">MultipartResult</a> <a href="Servant-Multipart-API.html#t:Tmp" title="Servant.Multipart.API">Tmp</a></span> <a href="src/Servant.Multipart.API.html#line-234" class="link">Source</a> <a href="#t:MultipartResult" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:if:MultipartResult:MultipartResult:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Servant-Multipart-API.html">Servant.Multipart.API</a></p> <div class="src"><span class="keyword">type</span> <a href="Servant-Multipart-API.html#t:MultipartResult" title="Servant.Multipart.API">MultipartResult</a> <a href="Servant-Multipart-API.html#t:Tmp" title="Servant.Multipart.API">Tmp</a> = <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Tmp" class="def">Tmp</a> <a href="src/Servant.Multipart.API.html#Tmp" class="link">Source</a> <a href="#t:Tmp" class="selflink">#</a></p><div class="doc"><p>Tag for data stored as a temporary file</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Tmp">Instances</h4><details id="i:Tmp" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Tmp:MultipartResult:1"></span> <span class="keyword">type</span> <a href="Servant-Multipart-API.html#t:MultipartResult" title="Servant.Multipart.API">MultipartResult</a> <a href="Servant-Multipart-API.html#t:Tmp" title="Servant.Multipart.API">Tmp</a></span> <a href="src/Servant.Multipart.API.html#line-234" class="link">Source</a> <a href="#t:Tmp" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Tmp:MultipartResult:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Servant-Multipart-API.html">Servant.Multipart.API</a></p> <div class="src"><span class="keyword">type</span> <a href="Servant-Multipart-API.html#t:MultipartResult" title="Servant.Multipart.API">MultipartResult</a> <a href="Servant-Multipart-API.html#t:Tmp" title="Servant.Multipart.API">Tmp</a> = <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Mem" class="def">Mem</a> <a href="src/Servant.Multipart.API.html#Mem" class="link">Source</a> <a href="#t:Mem" class="selflink">#</a></p><div class="doc"><p>Tag for data stored in memory</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Mem">Instances</h4><details id="i:Mem" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Mem:MultipartResult:1"></span> <span class="keyword">type</span> <a href="Servant-Multipart-API.html#t:MultipartResult" title="Servant.Multipart.API">MultipartResult</a> <a href="Servant-Multipart-API.html#t:Mem" title="Servant.Multipart.API">Mem</a></span> <a href="src/Servant.Multipart.API.html#line-235" class="link">Source</a> <a href="#t:Mem" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Mem:MultipartResult:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Servant-Multipart-API.html">Servant.Multipart.API</a></p> <div class="src"><span class="keyword">type</span> <a href="Servant-Multipart-API.html#t:MultipartResult" title="Servant.Multipart.API">MultipartResult</a> <a href="Servant-Multipart-API.html#t:Mem" title="Servant.Multipart.API">Mem</a> = <a href="../../bytestring/html/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Input" class="def">Input</a> <a href="src/Servant.Multipart.API.html#Input" class="link">Source</a> <a href="#t:Input" class="selflink">#</a></p><div class="doc"><p>Representation for a textual input (any <code>&lt;input&gt;</code> type but <code>file</code>).</p><p><code>&lt;input name=&quot;foo&quot; value=&quot;bar&quot; /&gt;</code> would appear as <code><code><a href="Servant-Multipart-API.html#t:Input" title="Servant.Multipart.API">Input</a></code> &quot;foo&quot; &quot;bar&quot;</code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Input" class="def">Input</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:iName" class="def">iName</a> :: <a href="../../text/html/Data-Text.html#t:Text" title="Data.Text">Text</a></dfn><div class="doc"><p><code>name</code> attribute of the input</p></div></li><li><dfn class="src"><a id="v:iValue" class="def">iValue</a> :: <a href="../../text/html/Data-Text.html#t:Text" title="Data.Text">Text</a></dfn><div class="doc"><p>value given for that input</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Input">Instances</h4><details id="i:Input" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Input:Eq:1"></span> <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Servant-Multipart-API.html#t:Input" title="Servant.Multipart.API">Input</a></span> <a href="src/Servant.Multipart.API.html#line-175" class="link">Source</a> <a href="#t:Input" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Input:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Servant-Multipart-API.html">Servant.Multipart.API</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Servant-Multipart-API.html#t:Input" title="Servant.Multipart.API">Input</a> -&gt; <a href="Servant-Multipart-API.html#t:Input" title="Servant.Multipart.API">Input</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="../../ghc/html/libraries/ghc-prim-0.6.1/src" class="link">Source</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Servant-Multipart-API.html#t:Input" title="Servant.Multipart.API">Input</a> -&gt; <a href="Servant-Multipart-API.html#t:Input" title="Servant.Multipart.API">Input</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="../../ghc/html/libraries/ghc-prim-0.6.1/src" class="link">Source</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Input:Show:2"></span> <a href="../../ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Servant-Multipart-API.html#t:Input" title="Servant.Multipart.API">Input</a></span> <a href="src/Servant.Multipart.API.html#line-175" class="link">Source</a> <a href="#t:Input" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Input:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Servant-Multipart-API.html">Servant.Multipart.API</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Servant-Multipart-API.html#t:Input" title="Servant.Multipart.API">Input</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Servant-Multipart-API.html#t:Input" title="Servant.Multipart.API">Input</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Servant-Multipart-API.html#t:Input" title="Servant.Multipart.API">Input</a>] -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:FileData" class="def">FileData</a> tag <a href="src/Servant.Multipart.API.html#FileData" class="link">Source</a> <a href="#t:FileData" class="selflink">#</a></p><div class="doc"><p>Representation for an uploaded file, usually resulting from
   picking a local file for an HTML input that looks like
   <code>&lt;input type=&quot;file&quot; name=&quot;somefile&quot; /&gt;</code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:FileData" class="def">FileData</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:fdInputName" class="def">fdInputName</a> :: <a href="../../text/html/Data-Text.html#t:Text" title="Data.Text">Text</a></dfn><div class="doc"><p><code>name</code> attribute of the corresponding
   HTML <code>&lt;input&gt;</code></p></div></li><li><dfn class="src"><a id="v:fdFileName" class="def">fdFileName</a> :: <a href="../../text/html/Data-Text.html#t:Text" title="Data.Text">Text</a></dfn><div class="doc"><p>name of the file on the client's disk</p></div></li><li><dfn class="src"><a id="v:fdFileCType" class="def">fdFileCType</a> :: <a href="../../text/html/Data-Text.html#t:Text" title="Data.Text">Text</a></dfn><div class="doc"><p>MIME type for the file</p></div></li><li><dfn class="src"><a id="v:fdPayload" class="def">fdPayload</a> :: <a href="Servant-Multipart-API.html#t:MultipartResult" title="Servant.Multipart.API">MultipartResult</a> tag</dfn><div class="doc"><p>path to the temporary file that has the
   content of the user's original file. Only
   valid during the execution of your handler as
   it gets removed right after, which means you
   really want to move or copy it in your handler.</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:FileData">Instances</h4><details id="i:FileData" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:FileData:Eq:1"></span> <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> (<a href="Servant-Multipart-API.html#t:MultipartResult" title="Servant.Multipart.API">MultipartResult</a> tag) =&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> (<a href="Servant-Multipart-API.html#t:FileData" title="Servant.Multipart.API">FileData</a> tag)</span> <a href="src/Servant.Multipart.API.html#line-166" class="link">Source</a> <a href="#t:FileData" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:FileData:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Servant-Multipart-API.html">Servant.Multipart.API</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Servant-Multipart-API.html#t:FileData" title="Servant.Multipart.API">FileData</a> tag -&gt; <a href="Servant-Multipart-API.html#t:FileData" title="Servant.Multipart.API">FileData</a> tag -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="../../ghc/html/libraries/ghc-prim-0.6.1/src" class="link">Source</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Servant-Multipart-API.html#t:FileData" title="Servant.Multipart.API">FileData</a> tag -&gt; <a href="Servant-Multipart-API.html#t:FileData" title="Servant.Multipart.API">FileData</a> tag -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="../../ghc/html/libraries/ghc-prim-0.6.1/src" class="link">Source</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:FileData:Show:2"></span> <a href="../../ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Servant-Multipart-API.html#t:MultipartResult" title="Servant.Multipart.API">MultipartResult</a> tag) =&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Servant-Multipart-API.html#t:FileData" title="Servant.Multipart.API">FileData</a> tag)</span> <a href="src/Servant.Multipart.API.html#line-167" class="link">Source</a> <a href="#t:FileData" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:FileData:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Servant-Multipart-API.html">Servant.Multipart.API</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Servant-Multipart-API.html#t:FileData" title="Servant.Multipart.API">FileData</a> tag -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Servant-Multipart-API.html#t:FileData" title="Servant.Multipart.API">FileData</a> tag -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Servant-Multipart-API.html#t:FileData" title="Servant.Multipart.API">FileData</a> tag] -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.2</p></div></body></html>