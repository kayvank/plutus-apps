<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE AllowAmbiguousTypes #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE InstanceSigs #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE RecordWildCards #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE TypeSynonymInstances #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# LANGUAGE StandaloneDeriving #-}</span><span>
</span><span id="line-15"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-16"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-17"></span><span class="hs-comment">-- | @multipart/form-data@ Servant API support for servant.</span><span>
</span><span id="line-18"></span><span class="hs-comment">--   see servant-multipart and servant-multipart-client for server- and client-</span><span>
</span><span id="line-19"></span><span class="hs-comment">--   definitions.</span><span>
</span><span id="line-20"></span><span class="hs-comment">--</span><span>
</span><span id="line-21"></span><span class="hs-comment">--   This is mostly useful for adding file upload support to</span><span>
</span><span id="line-22"></span><span class="hs-comment">--   an API. See haddocks of 'MultipartForm' for an introduction.</span><span>
</span><span id="line-23"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Servant.Multipart.API</span><span>
</span><span id="line-24"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Servant.Multipart.API.html#MultipartForm"><span class="hs-identifier">MultipartForm</span></a></span><span>
</span><span id="line-25"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Servant.Multipart.API.html#MultipartForm%27"><span class="hs-identifier">MultipartForm'</span></a></span><span>
</span><span id="line-26"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Servant.Multipart.API.html#MultipartData"><span class="hs-identifier">MultipartData</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Servant.Multipart.API.html#ToMultipart"><span class="hs-identifier">ToMultipart</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Servant.Multipart.API.html#FromMultipart"><span class="hs-identifier">FromMultipart</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Servant.Multipart.API.html#MultipartResult"><span class="hs-identifier">MultipartResult</span></a></span><span>
</span><span id="line-30"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Servant.Multipart.API.html#Tmp"><span class="hs-identifier">Tmp</span></a></span><span>
</span><span id="line-31"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Servant.Multipart.API.html#Mem"><span class="hs-identifier">Mem</span></a></span><span>
</span><span id="line-32"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Servant.Multipart.API.html#Input"><span class="hs-identifier">Input</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Servant.Multipart.API.html#FileData"><span class="hs-identifier">FileData</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-35"></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier">Data.Text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier">Text</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Typeable</span></a></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../servant/html/src"><span class="hs-identifier">Servant.API</span></a></span><span>
</span><span id="line-39"></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier">Data.ByteString.Lazy</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">LBS</span></span><span>
</span><span id="line-41"></span><span>
</span><span id="line-42"></span><span class="hs-comment">-- | Combinator for specifying a @multipart/form-data@ request</span><span>
</span><span id="line-43"></span><span class="hs-comment">--   body, typically (but not always) issued from an HTML @\&lt;form\&gt;@.</span><span>
</span><span id="line-44"></span><span class="hs-comment">--</span><span>
</span><span id="line-45"></span><span class="hs-comment">--   @multipart/form-data@ can't be made into an ordinary content</span><span>
</span><span id="line-46"></span><span class="hs-comment">--   type for now in servant because it doesn't just decode the</span><span>
</span><span id="line-47"></span><span class="hs-comment">--   request body from some format but also performs IO in the case</span><span>
</span><span id="line-48"></span><span class="hs-comment">--   of writing the uploaded files to disk, e.g in @/tmp@, which is</span><span>
</span><span id="line-49"></span><span class="hs-comment">--   not compatible with servant's vision of a content type as things</span><span>
</span><span id="line-50"></span><span class="hs-comment">--   stand now. This also means that 'MultipartForm' can't be used in</span><span>
</span><span id="line-51"></span><span class="hs-comment">--   conjunction with 'ReqBody' in an endpoint.</span><span>
</span><span id="line-52"></span><span class="hs-comment">--</span><span>
</span><span id="line-53"></span><span class="hs-comment">--   The 'tag' type parameter instructs the function to handle data</span><span>
</span><span id="line-54"></span><span class="hs-comment">--   either as data to be saved to temporary storage ('Tmp') or saved to</span><span>
</span><span id="line-55"></span><span class="hs-comment">--   memory ('Mem').</span><span>
</span><span id="line-56"></span><span class="hs-comment">--</span><span>
</span><span id="line-57"></span><span class="hs-comment">--   The 'a' type parameter represents the Haskell type to which</span><span>
</span><span id="line-58"></span><span class="hs-comment">--   you are going to decode the multipart data to, where the</span><span>
</span><span id="line-59"></span><span class="hs-comment">--   multipart data consists in all the usual form inputs along</span><span>
</span><span id="line-60"></span><span class="hs-comment">--   with the files sent along through @\&lt;input type=&quot;file&quot;\&gt;@</span><span>
</span><span id="line-61"></span><span class="hs-comment">--   fields in the form.</span><span>
</span><span id="line-62"></span><span class="hs-comment">--</span><span>
</span><span id="line-63"></span><span class="hs-comment">--   One option provided out of the box by this library is to decode</span><span>
</span><span id="line-64"></span><span class="hs-comment">--   to 'MultipartData'.</span><span>
</span><span id="line-65"></span><span class="hs-comment">--</span><span>
</span><span id="line-66"></span><span class="hs-comment">--   Example:</span><span>
</span><span id="line-67"></span><span class="hs-comment">--</span><span>
</span><span id="line-68"></span><span class="hs-comment">--   @</span><span>
</span><span id="line-69"></span><span class="hs-comment">--   type API = MultipartForm Tmp (MultipartData Tmp) :&gt; Post '[PlainText] String</span><span>
</span><span id="line-70"></span><span class="hs-comment">--</span><span>
</span><span id="line-71"></span><span class="hs-comment">--   api :: Proxy API</span><span>
</span><span id="line-72"></span><span class="hs-comment">--   api = Proxy</span><span>
</span><span id="line-73"></span><span class="hs-comment">--</span><span>
</span><span id="line-74"></span><span class="hs-comment">--   server :: MultipartData Tmp -&gt; Handler String</span><span>
</span><span id="line-75"></span><span class="hs-comment">--   server multipartData = return str</span><span>
</span><span id="line-76"></span><span class="hs-comment">--</span><span>
</span><span id="line-77"></span><span class="hs-comment">--     where str = &quot;The form was submitted with &quot;</span><span>
</span><span id="line-78"></span><span class="hs-comment">--              ++ show nInputs ++ &quot; textual inputs and &quot;</span><span>
</span><span id="line-79"></span><span class="hs-comment">--              ++ show nFiles  ++ &quot; files.&quot;</span><span>
</span><span id="line-80"></span><span class="hs-comment">--           nInputs = length (inputs multipartData)</span><span>
</span><span id="line-81"></span><span class="hs-comment">--           nFiles  = length (files multipartData)</span><span>
</span><span id="line-82"></span><span class="hs-comment">--   @</span><span>
</span><span id="line-83"></span><span class="hs-comment">--</span><span>
</span><span id="line-84"></span><span class="hs-comment">--   You can alternatively provide a 'FromMultipart' instance</span><span>
</span><span id="line-85"></span><span class="hs-comment">--   for some type of yours, allowing you to regroup data</span><span>
</span><span id="line-86"></span><span class="hs-comment">--   into a structured form and potentially selecting</span><span>
</span><span id="line-87"></span><span class="hs-comment">--   a subset of the entire form data that was submitted.</span><span>
</span><span id="line-88"></span><span class="hs-comment">--</span><span>
</span><span id="line-89"></span><span class="hs-comment">--   Example, where we only look extract one input, /username/,</span><span>
</span><span id="line-90"></span><span class="hs-comment">--   and one file, where the corresponding input field's /name/</span><span>
</span><span id="line-91"></span><span class="hs-comment">--   attribute was set to /pic/:</span><span>
</span><span id="line-92"></span><span class="hs-comment">--</span><span>
</span><span id="line-93"></span><span class="hs-comment">--   @</span><span>
</span><span id="line-94"></span><span class="hs-comment">--   data User = User { username :: Text, pic :: FilePath }</span><span>
</span><span id="line-95"></span><span class="hs-comment">--</span><span>
</span><span id="line-96"></span><span class="hs-comment">--   instance FromMultipart Tmp User where</span><span>
</span><span id="line-97"></span><span class="hs-comment">--     fromMultipart multipartData =</span><span>
</span><span id="line-98"></span><span class="hs-comment">--       User \&lt;$\&gt; lookupInput &quot;username&quot; multipartData</span><span>
</span><span id="line-99"></span><span class="hs-comment">--            \&lt;*\&gt; fmap fdPayload (lookupFile &quot;pic&quot; multipartData)</span><span>
</span><span id="line-100"></span><span class="hs-comment">--</span><span>
</span><span id="line-101"></span><span class="hs-comment">--   type API = MultipartForm Tmp User :&gt; Post '[PlainText] String</span><span>
</span><span id="line-102"></span><span class="hs-comment">--</span><span>
</span><span id="line-103"></span><span class="hs-comment">--   server :: User -&gt; Handler String</span><span>
</span><span id="line-104"></span><span class="hs-comment">--   server usr = return str</span><span>
</span><span id="line-105"></span><span class="hs-comment">--</span><span>
</span><span id="line-106"></span><span class="hs-comment">--     where str = username usr ++ &quot;'s profile picture&quot;</span><span>
</span><span id="line-107"></span><span class="hs-comment">--              ++ &quot; got temporarily uploaded to &quot;</span><span>
</span><span id="line-108"></span><span class="hs-comment">--              ++ pic usr ++ &quot; and will be removed from there &quot;</span><span>
</span><span id="line-109"></span><span class="hs-comment">--              ++ &quot; after this handler has run.&quot;</span><span>
</span><span id="line-110"></span><span class="hs-comment">--   @</span><span>
</span><span id="line-111"></span><span class="hs-comment">--</span><span>
</span><span id="line-112"></span><span class="hs-comment">--   Note that the behavior of this combinator is configurable,</span><span>
</span><span id="line-113"></span><span class="hs-comment">--   by using 'serveWith' from servant-server instead of 'serve',</span><span>
</span><span id="line-114"></span><span class="hs-comment">--   which takes an additional 'Context' argument. It simply is an</span><span>
</span><span id="line-115"></span><span class="hs-comment">--   heterogeneous list where you can for example store</span><span>
</span><span id="line-116"></span><span class="hs-comment">--   a value of type 'MultipartOptions' that has the configuration that</span><span>
</span><span id="line-117"></span><span class="hs-comment">--   you want, which would then get picked up by servant-multipart.</span><span>
</span><span id="line-118"></span><span class="hs-comment">--</span><span>
</span><span id="line-119"></span><span class="hs-comment">--   __Important__: as mentionned in the example above,</span><span>
</span><span id="line-120"></span><span class="hs-comment">--   the file paths point to temporary files which get removed</span><span>
</span><span id="line-121"></span><span class="hs-comment">--   after your handler has run, if they are still there. It is</span><span>
</span><span id="line-122"></span><span class="hs-comment">--   therefore recommended to move or copy them somewhere in your</span><span>
</span><span id="line-123"></span><span class="hs-comment">--   handler code if you need to keep the content around.</span><span>
</span><span id="line-124"></span><span class="hs-keyword">type</span><span> </span><span id="MultipartForm"><span class="annot"><a href="Servant.Multipart.API.html#MultipartForm"><span class="hs-identifier hs-var">MultipartForm</span></a></span></span><span> </span><span id="local-6989586621679085605"><span class="annot"><a href="#local-6989586621679085605"><span class="hs-identifier hs-type">tag</span></a></span></span><span> </span><span id="local-6989586621679085604"><span class="annot"><a href="#local-6989586621679085604"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Servant.Multipart.API.html#MultipartForm%27"><span class="hs-identifier hs-type">MultipartForm'</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621679085605"><span class="hs-identifier hs-type">tag</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085604"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-125"></span><span>
</span><span id="line-126"></span><span class="hs-comment">-- | 'MultipartForm' which can be modified with 'Servant.API.Modifiers.Lenient'.</span><span>
</span><span id="line-127"></span><span class="hs-keyword">data</span><span> </span><span id="MultipartForm%27"><span class="annot"><a href="Servant.Multipart.API.html#MultipartForm%27"><span class="hs-identifier hs-var">MultipartForm'</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679085603"><span class="annot"><a href="#local-6989586621679085603"><span class="hs-identifier hs-type">mods</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-operator">*</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span id="local-6989586621679085602"><span class="annot"><a href="#local-6989586621679085602"><span class="hs-identifier hs-type">tag</span></a></span></span><span> </span><span id="local-6989586621679085601"><span class="annot"><a href="#local-6989586621679085601"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-128"></span><span>
</span><span id="line-129"></span><span class="hs-comment">-- | What servant gets out of a @multipart/form-data@ form submission.</span><span>
</span><span id="line-130"></span><span class="hs-comment">--</span><span>
</span><span id="line-131"></span><span class="hs-comment">--   The type parameter 'tag' tells if 'MultipartData' is stored as a</span><span>
</span><span id="line-132"></span><span class="hs-comment">--   temporary file or stored in memory. 'tag' is type of either 'Mem'</span><span>
</span><span id="line-133"></span><span class="hs-comment">--   or 'Tmp'.</span><span>
</span><span id="line-134"></span><span class="hs-comment">--</span><span>
</span><span id="line-135"></span><span class="hs-comment">--   The 'inputs' field contains a list of textual 'Input's, where</span><span>
</span><span id="line-136"></span><span class="hs-comment">--   each input for which a value is provided gets to be in this list,</span><span>
</span><span id="line-137"></span><span class="hs-comment">--   represented by the input name and the input value. See haddocks for</span><span>
</span><span id="line-138"></span><span class="hs-comment">--   'Input'.</span><span>
</span><span id="line-139"></span><span class="hs-comment">--</span><span>
</span><span id="line-140"></span><span class="hs-comment">--   The 'files' field contains a list of files that were sent along with the</span><span>
</span><span id="line-141"></span><span class="hs-comment">--   other inputs in the form. Each file is represented by a value of type</span><span>
</span><span id="line-142"></span><span class="hs-comment">--   'FileData' which among other things contains the path to the temporary file</span><span>
</span><span id="line-143"></span><span class="hs-comment">--   (to be removed when your handler is done running) with a given uploaded</span><span>
</span><span id="line-144"></span><span class="hs-comment">--   file's content. See haddocks for 'FileData'.</span><span>
</span><span id="line-145"></span><span class="hs-keyword">data</span><span> </span><span id="MultipartData"><span class="annot"><a href="Servant.Multipart.API.html#MultipartData"><span class="hs-identifier hs-var">MultipartData</span></a></span></span><span> </span><span id="local-6989586621679085600"><span class="annot"><a href="#local-6989586621679085600"><span class="hs-identifier hs-type">tag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="MultipartData"><span class="annot"><a href="Servant.Multipart.API.html#MultipartData"><span class="hs-identifier hs-var">MultipartData</span></a></span></span><span>
</span><span id="line-146"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="inputs"><span class="annot"><span class="annottext">MultipartData tag -&gt; [Input]
</span><a href="Servant.Multipart.API.html#inputs"><span class="hs-identifier hs-var hs-var">inputs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Servant.Multipart.API.html#Input"><span class="hs-identifier hs-type">Input</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-147"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="files"><span class="annot"><span class="annottext">MultipartData tag -&gt; [FileData tag]
</span><a href="Servant.Multipart.API.html#files"><span class="hs-identifier hs-var hs-var">files</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Servant.Multipart.API.html#FileData"><span class="hs-identifier hs-type">FileData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085600"><span class="hs-identifier hs-type">tag</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-148"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span class="hs-comment">-- | Representation for an uploaded file, usually resulting from</span><span>
</span><span id="line-151"></span><span class="hs-comment">--   picking a local file for an HTML input that looks like</span><span>
</span><span id="line-152"></span><span class="hs-comment">--   @\&lt;input type=&quot;file&quot; name=&quot;somefile&quot; /\&gt;@.</span><span>
</span><span id="line-153"></span><span class="hs-keyword">data</span><span> </span><span id="FileData"><span class="annot"><a href="Servant.Multipart.API.html#FileData"><span class="hs-identifier hs-var">FileData</span></a></span></span><span> </span><span id="local-6989586621679085596"><span class="annot"><a href="#local-6989586621679085596"><span class="hs-identifier hs-type">tag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="FileData"><span class="annot"><a href="Servant.Multipart.API.html#FileData"><span class="hs-identifier hs-var">FileData</span></a></span></span><span>
</span><span id="line-154"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="fdInputName"><span class="annot"><span class="annottext">FileData tag -&gt; Text
</span><a href="Servant.Multipart.API.html#fdInputName"><span class="hs-identifier hs-var hs-var">fdInputName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span>     </span><span class="hs-comment">-- ^ @name@ attribute of the corresponding</span><span>
</span><span id="line-155"></span><span>                            </span><span class="hs-comment">--   HTML @\&lt;input\&gt;@</span><span>
</span><span id="line-156"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="fdFileName"><span class="annot"><span class="annottext">FileData tag -&gt; Text
</span><a href="Servant.Multipart.API.html#fdFileName"><span class="hs-identifier hs-var hs-var">fdFileName</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span>     </span><span class="hs-comment">-- ^ name of the file on the client's disk</span><span>
</span><span id="line-157"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="fdFileCType"><span class="annot"><span class="annottext">FileData tag -&gt; Text
</span><a href="Servant.Multipart.API.html#fdFileCType"><span class="hs-identifier hs-var hs-var">fdFileCType</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span>     </span><span class="hs-comment">-- ^ MIME type for the file</span><span>
</span><span id="line-158"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="fdPayload"><span class="annot"><span class="annottext">FileData tag -&gt; MultipartResult tag
</span><a href="Servant.Multipart.API.html#fdPayload"><span class="hs-identifier hs-var hs-var">fdPayload</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Servant.Multipart.API.html#MultipartResult"><span class="hs-identifier hs-type">MultipartResult</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085596"><span class="hs-identifier hs-type">tag</span></a></span><span>
</span><span id="line-159"></span><span>                            </span><span class="hs-comment">-- ^ path to the temporary file that has the</span><span>
</span><span id="line-160"></span><span>                            </span><span class="hs-comment">--   content of the user's original file. Only</span><span>
</span><span id="line-161"></span><span>                            </span><span class="hs-comment">--   valid during the execution of your handler as</span><span>
</span><span id="line-162"></span><span>                            </span><span class="hs-comment">--   it gets removed right after, which means you</span><span>
</span><span id="line-163"></span><span>                            </span><span class="hs-comment">--   really want to move or copy it in your handler.</span><span>
</span><span id="line-164"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-165"></span><span>
</span><span id="line-166"></span><span id="local-6989586621679085586"><span id="local-6989586621679085588"><span id="local-6989586621679085590"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Servant.Multipart.API.html#MultipartResult"><span class="hs-identifier hs-type">MultipartResult</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085590"><span class="hs-identifier hs-type">tag</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Servant.Multipart.API.html#FileData"><span class="hs-identifier hs-type">FileData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085590"><span class="hs-identifier hs-type">tag</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-167"></span><span id="local-6989586621679085578"><span id="local-6989586621679085580"><span id="local-6989586621679085582"><span id="local-6989586621679085584"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Servant.Multipart.API.html#MultipartResult"><span class="hs-identifier hs-type">MultipartResult</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085584"><span class="hs-identifier hs-type">tag</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Servant.Multipart.API.html#FileData"><span class="hs-identifier hs-type">FileData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085584"><span class="hs-identifier hs-type">tag</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-168"></span><span>
</span><span id="line-169"></span><span class="hs-comment">-- | Representation for a textual input (any @\&lt;input\&gt;@ type but @file@).</span><span>
</span><span id="line-170"></span><span class="hs-comment">--</span><span>
</span><span id="line-171"></span><span class="hs-comment">--   @\&lt;input name=&quot;foo&quot; value=&quot;bar&quot;\ /&gt;@ would appear as @'Input' &quot;foo&quot; &quot;bar&quot;@.</span><span>
</span><span id="line-172"></span><span class="hs-keyword">data</span><span> </span><span id="Input"><span class="annot"><a href="Servant.Multipart.API.html#Input"><span class="hs-identifier hs-var">Input</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Input"><span class="annot"><a href="Servant.Multipart.API.html#Input"><span class="hs-identifier hs-var">Input</span></a></span></span><span>
</span><span id="line-173"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="iName"><span class="annot"><span class="annottext">Input -&gt; Text
</span><a href="Servant.Multipart.API.html#iName"><span class="hs-identifier hs-var hs-var">iName</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-comment">-- ^ @name@ attribute of the input</span><span>
</span><span id="line-174"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="iValue"><span class="annot"><span class="annottext">Input -&gt; Text
</span><a href="Servant.Multipart.API.html#iValue"><span class="hs-identifier hs-var hs-var">iValue</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-comment">-- ^ value given for that input</span><span>
</span><span id="line-175"></span><span>  </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679085570"><span id="local-6989586621679085572"><span class="annot"><span class="annottext">Input -&gt; Input -&gt; Bool
(Input -&gt; Input -&gt; Bool) -&gt; (Input -&gt; Input -&gt; Bool) -&gt; Eq Input
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Input -&gt; Input -&gt; Bool
$c/= :: Input -&gt; Input -&gt; Bool
== :: Input -&gt; Input -&gt; Bool
$c== :: Input -&gt; Input -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679085564"><span id="local-6989586621679085566"><span id="local-6989586621679085568"><span class="annot"><span class="annottext">Int -&gt; Input -&gt; ShowS
[Input] -&gt; ShowS
Input -&gt; String
(Int -&gt; Input -&gt; ShowS)
-&gt; (Input -&gt; String) -&gt; ([Input] -&gt; ShowS) -&gt; Show Input
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [Input] -&gt; ShowS
$cshowList :: [Input] -&gt; ShowS
show :: Input -&gt; String
$cshow :: Input -&gt; String
showsPrec :: Int -&gt; Input -&gt; ShowS
$cshowsPrec :: Int -&gt; Input -&gt; ShowS
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-176"></span><span>
</span><span id="line-177"></span><span class="hs-comment">-- | 'MultipartData' is the type representing</span><span>
</span><span id="line-178"></span><span class="hs-comment">--   @multipart/form-data@ form inputs. Sometimes</span><span>
</span><span id="line-179"></span><span class="hs-comment">--   you may instead want to work with a more structured type</span><span>
</span><span id="line-180"></span><span class="hs-comment">--   of yours that potentially selects only a fraction of</span><span>
</span><span id="line-181"></span><span class="hs-comment">--   the data that was submitted, or just reshapes it to make</span><span>
</span><span id="line-182"></span><span class="hs-comment">--   it easier to work with. The 'FromMultipart' class is exactly</span><span>
</span><span id="line-183"></span><span class="hs-comment">--   what allows you to tell servant how to turn &quot;raw&quot; multipart</span><span>
</span><span id="line-184"></span><span class="hs-comment">--   data into a value of your nicer type.</span><span>
</span><span id="line-185"></span><span class="hs-comment">--</span><span>
</span><span id="line-186"></span><span class="hs-comment">--   @</span><span>
</span><span id="line-187"></span><span class="hs-comment">--   data User = User { username :: Text, pic :: FilePath }</span><span>
</span><span id="line-188"></span><span class="hs-comment">--</span><span>
</span><span id="line-189"></span><span class="hs-comment">--   instance FromMultipart Tmp User where</span><span>
</span><span id="line-190"></span><span class="hs-comment">--     fromMultipart form =</span><span>
</span><span id="line-191"></span><span class="hs-comment">--       User \&lt;$\&gt; lookupInput &quot;username&quot; (inputs form)</span><span>
</span><span id="line-192"></span><span class="hs-comment">--            \&lt;*\&gt; fmap fdPayload (lookupFile &quot;pic&quot; $ files form)</span><span>
</span><span id="line-193"></span><span class="hs-comment">--   @</span><span>
</span><span id="line-194"></span><span class="hs-keyword">class</span><span> </span><span id="FromMultipart"><span class="annot"><a href="Servant.Multipart.API.html#FromMultipart"><span class="hs-identifier hs-var">FromMultipart</span></a></span></span><span> </span><span id="local-6989586621679085632"><span class="annot"><a href="#local-6989586621679085632"><span class="hs-identifier hs-type">tag</span></a></span></span><span> </span><span id="local-6989586621679085631"><span class="annot"><a href="#local-6989586621679085631"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-195"></span><span>  </span><span class="hs-comment">-- | Given a value of type 'MultipartData', which consists</span><span>
</span><span id="line-196"></span><span>  </span><span class="hs-comment">--   in a list of textual inputs and another list for</span><span>
</span><span id="line-197"></span><span>  </span><span class="hs-comment">--   files, try to extract a value of type @a@. When</span><span>
</span><span id="line-198"></span><span>  </span><span class="hs-comment">--   extraction fails, servant errors out with status code 400.</span><span>
</span><span id="line-199"></span><span>  </span><span id="fromMultipart"><span class="annot"><a href="Servant.Multipart.API.html#fromMultipart"><span class="hs-identifier hs-type">fromMultipart</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Servant.Multipart.API.html#MultipartData"><span class="hs-identifier hs-type">MultipartData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085632"><span class="hs-identifier hs-type">tag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085631"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-200"></span><span>
</span><span id="line-201"></span><span id="local-6989586621679085562"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Servant.Multipart.API.html#FromMultipart"><span class="hs-identifier hs-type">FromMultipart</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085562"><span class="hs-identifier hs-type">tag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Servant.Multipart.API.html#MultipartData"><span class="hs-identifier hs-type">MultipartData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085562"><span class="hs-identifier hs-type">tag</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-202"></span><span>  </span><span id="local-6989586621679085559"><span class="annot"><span class="annottext">fromMultipart :: MultipartData tag -&gt; Either String (MultipartData tag)
</span><a href="#local-6989586621679085559"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromMultipart</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MultipartData tag -&gt; Either String (MultipartData tag)
forall a b. b -&gt; Either a b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Right</span></a></span></span><span>
</span><span id="line-203"></span><span>
</span><span id="line-204"></span><span class="hs-comment">-- | Allows you to tell servant how to turn a more structured type</span><span>
</span><span id="line-205"></span><span class="hs-comment">--   into a 'MultipartData', which is what is actually sent by the</span><span>
</span><span id="line-206"></span><span class="hs-comment">--   client.</span><span>
</span><span id="line-207"></span><span class="hs-comment">--</span><span>
</span><span id="line-208"></span><span class="hs-comment">--   @</span><span>
</span><span id="line-209"></span><span class="hs-comment">--   data User = User { username :: Text, pic :: FilePath }</span><span>
</span><span id="line-210"></span><span class="hs-comment">--</span><span>
</span><span id="line-211"></span><span class="hs-comment">--   instance toMultipart Tmp User where</span><span>
</span><span id="line-212"></span><span class="hs-comment">--       toMultipart user = MultipartData [Input &quot;username&quot; $ username user]</span><span>
</span><span id="line-213"></span><span class="hs-comment">--                                        [FileData &quot;pic&quot;</span><span>
</span><span id="line-214"></span><span class="hs-comment">--                                                  (pic user)</span><span>
</span><span id="line-215"></span><span class="hs-comment">--                                                  &quot;image/png&quot;</span><span>
</span><span id="line-216"></span><span class="hs-comment">--                                                  (pic user)</span><span>
</span><span id="line-217"></span><span class="hs-comment">--                                        ]</span><span>
</span><span id="line-218"></span><span class="hs-comment">--   @</span><span>
</span><span id="line-219"></span><span class="hs-keyword">class</span><span> </span><span id="ToMultipart"><span class="annot"><a href="Servant.Multipart.API.html#ToMultipart"><span class="hs-identifier hs-var">ToMultipart</span></a></span></span><span> </span><span id="local-6989586621679085625"><span class="annot"><a href="#local-6989586621679085625"><span class="hs-identifier hs-type">tag</span></a></span></span><span> </span><span id="local-6989586621679085626"><span class="annot"><a href="#local-6989586621679085626"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-220"></span><span>  </span><span class="hs-comment">-- | Given a value of type 'a', convert it to a</span><span>
</span><span id="line-221"></span><span>  </span><span class="hs-comment">-- 'MultipartData'.</span><span>
</span><span id="line-222"></span><span>  </span><span id="toMultipart"><span class="annot"><a href="Servant.Multipart.API.html#toMultipart"><span class="hs-identifier hs-type">toMultipart</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679085626"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Servant.Multipart.API.html#MultipartData"><span class="hs-identifier hs-type">MultipartData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085625"><span class="hs-identifier hs-type">tag</span></a></span><span>
</span><span id="line-223"></span><span>
</span><span id="line-224"></span><span id="local-6989586621679085557"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Servant.Multipart.API.html#ToMultipart"><span class="hs-identifier hs-type">ToMultipart</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085557"><span class="hs-identifier hs-type">tag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Servant.Multipart.API.html#MultipartData"><span class="hs-identifier hs-type">MultipartData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085557"><span class="hs-identifier hs-type">tag</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-225"></span><span>  </span><span id="local-6989586621679085554"><span class="annot"><span class="annottext">toMultipart :: MultipartData tag -&gt; MultipartData tag
</span><a href="#local-6989586621679085554"><span class="hs-identifier hs-var hs-var hs-var hs-var">toMultipart</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MultipartData tag -&gt; MultipartData tag
forall a. a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">id</span></a></span></span><span>
</span><span id="line-226"></span><span>
</span><span id="line-227"></span><span class="hs-comment">-- | Tag for data stored as a temporary file</span><span>
</span><span id="line-228"></span><span class="hs-keyword">data</span><span> </span><span id="Tmp"><span class="annot"><a href="Servant.Multipart.API.html#Tmp"><span class="hs-identifier hs-var">Tmp</span></a></span></span><span>
</span><span id="line-229"></span><span>
</span><span id="line-230"></span><span class="hs-comment">-- | Tag for data stored in memory</span><span>
</span><span id="line-231"></span><span class="hs-keyword">data</span><span> </span><span id="Mem"><span class="annot"><a href="Servant.Multipart.API.html#Mem"><span class="hs-identifier hs-var">Mem</span></a></span></span><span>
</span><span id="line-232"></span><span>
</span><span id="line-233"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="MultipartResult"><span class="annot"><a href="Servant.Multipart.API.html#MultipartResult"><span class="hs-identifier hs-var">MultipartResult</span></a></span></span><span> </span><span id="local-6989586621679085552"><span class="annot"><a href="#local-6989586621679085552"><span class="hs-identifier hs-type">tag</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-operator">*</span></span><span>
</span><span id="line-234"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="MultipartResult"><span class="annot"><a href="Servant.Multipart.API.html#MultipartResult"><span class="hs-identifier hs-var">MultipartResult</span></a></span></span><span> </span><span class="annot"><a href="Servant.Multipart.API.html#Tmp"><span class="hs-identifier hs-type">Tmp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-235"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="MultipartResult"><span class="annot"><a href="Servant.Multipart.API.html#MultipartResult"><span class="hs-identifier hs-var">MultipartResult</span></a></span></span><span> </span><span class="annot"><a href="Servant.Multipart.API.html#Mem"><span class="hs-identifier hs-type">Mem</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">LBS.ByteString</span></a></span><span>
</span><span id="line-236"></span><span>
</span><span id="line-237"></span><span id="local-6989586621679085547"><span id="local-6989586621679085548"><span id="local-6989586621679085549"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../../../servant/html/src"><span class="hs-identifier hs-type">HasLink</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085549"><span class="hs-identifier hs-type">sub</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../servant/html/src"><span class="hs-identifier hs-type">HasLink</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Servant.Multipart.API.html#MultipartForm"><span class="hs-identifier hs-type">MultipartForm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085548"><span class="hs-identifier hs-type">tag</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085547"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../../../../servant/html/src"><span class="hs-operator hs-type">:&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085549"><span class="hs-identifier hs-type">sub</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span class="hs-cpp">
#if MIN_VERSION_servant(0,14,0)
</span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="MkLink"><span class="annot"><a href="../../../../servant/html/src"><span class="hs-identifier hs-var">MkLink</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Servant.Multipart.API.html#MultipartForm"><span class="hs-identifier hs-type">MultipartForm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085548"><span class="hs-identifier hs-type">tag</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085547"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../../../../servant/html/src"><span class="hs-operator hs-type">:&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085549"><span class="hs-identifier hs-type">sub</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679085544"><span class="annot"><a href="#local-6989586621679085544"><span class="hs-identifier hs-type hs-type">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../servant/html/src"><span class="hs-identifier hs-type">MkLink</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085549"><span class="hs-identifier hs-type">sub</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085544"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-240"></span><span>  </span><span id="local-6989586621679085543"><span class="annot"><span class="annottext">toLink :: (Link -&gt; a)
-&gt; Proxy (MultipartForm tag a :&gt; sub)
-&gt; Link
-&gt; MkLink (MultipartForm tag a :&gt; sub) a
</span><a href="../../../../servant/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">toLink</span></a></span></span><span> </span><span id="local-6989586621679085541"><span class="annot"><span class="annottext">Link -&gt; a
</span><a href="#local-6989586621679085541"><span class="hs-identifier hs-var">toA</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy (MultipartForm tag a :&gt; sub)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Link -&gt; a) -&gt; Proxy sub -&gt; Link -&gt; MkLink sub a
forall k (endpoint :: k) a.
HasLink endpoint =&gt;
(Link -&gt; a) -&gt; Proxy endpoint -&gt; Link -&gt; MkLink endpoint a
</span><a href="../../../../servant/html/src"><span class="hs-identifier hs-var">toLink</span></a></span><span> </span><span class="annot"><span class="annottext">Link -&gt; a
</span><a href="#local-6989586621679085541"><span class="hs-identifier hs-var">toA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy sub
forall k (t :: k). Proxy t
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085549"><span class="hs-identifier hs-type">sub</span></a></span><span class="hs-special">)</span></span></span></span><span class="hs-cpp">
#else
</span><span>  </span><span class="hs-keyword">type</span><span> </span><span class="hs-identifier">MkLink</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">MultipartForm</span><span> </span><span class="hs-identifier">tag</span><span> </span><span class="hs-identifier">a</span><span> </span><span class="hs-operator">:&gt;</span><span> </span><span class="hs-identifier">sub</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">MkLink</span><span> </span><span class="hs-identifier">sub</span><span>
</span><span id="line-243"></span><span>  </span><span class="hs-identifier">toLink</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">toLink</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Proxy</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">Proxy</span><span> </span><span class="hs-identifier">sub</span><span class="hs-special">)</span><span class="hs-cpp">
#endif
</span></pre></body></html>