<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Test.Integration.Plutus</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">cardano-wallet-core-integration-2022.7.1: Core integration test library.</span><ul class="links" id="page-menu"><li><a href="src/Test.Integration.Plutus.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Test.Integration.Plutus</p></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:mkSignerPolicy">mkSignerPolicy</a> :: <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> -&gt; (<a href="../../cardano-prelude/html/Cardano-Prelude.html#t:Text" title="Cardano.Prelude">Text</a>, <a href="../../cardano-wallet-core/html/Cardano-Wallet-Api-Types.html#t:ApiT" title="Cardano.Wallet.Api.Types">ApiT</a> (<a href="../../cardano-wallet-core/html/Cardano-Wallet-Primitive-Types-Hash.html#t:Hash" title="Cardano.Wallet.Primitive.Types.Hash">Hash</a> &quot;TokenPolicy&quot;))</li><li class="src short"><a href="#v:alwaysTrueValidator">alwaysTrueValidator</a> :: (<a href="../../cardano-prelude/html/Cardano-Prelude.html#t:Text" title="Cardano.Prelude">Text</a>, <a href="../../cardano-wallet-core/html/Cardano-Wallet-Api-Types.html#t:ApiT" title="Cardano.Wallet.Api.Types">ApiT</a> (<a href="../../cardano-wallet-core/html/Cardano-Wallet-Primitive-Types-Hash.html#t:Hash" title="Cardano.Wallet.Primitive.Types.Hash">Hash</a> &quot;TokenPolicy&quot;))</li><li class="src short"><a href="#v:pingPong_1">pingPong_1</a> :: <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a></li><li class="src short"><a href="#v:pingPong_2">pingPong_2</a> :: (<a href="../../conduit/html/Conduit.html#t:MonadUnliftIO" title="Conduit">MonadUnliftIO</a> m, <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:MonadFail" title="Distribution.Compat.Prelude.Internal">MonadFail</a> m) =&gt; <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> -&gt; m <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a></li><li class="src short"><a href="#v:game_1">game_1</a> :: <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a></li><li class="src short"><a href="#v:game_2">game_2</a> :: (<a href="../../conduit/html/Conduit.html#t:MonadUnliftIO" title="Conduit">MonadUnliftIO</a> m, <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:MonadFail" title="Distribution.Compat.Prelude.Internal">MonadFail</a> m) =&gt; <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> -&gt; m <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a></li><li class="src short"><a href="#v:game_3">game_3</a> :: (<a href="../../conduit/html/Conduit.html#t:MonadUnliftIO" title="Conduit">MonadUnliftIO</a> m, <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:MonadFail" title="Distribution.Compat.Prelude.Internal">MonadFail</a> m) =&gt; <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> -&gt; m <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a></li><li class="src short"><a href="#v:mintBurn_1">mintBurn_1</a> :: (<a href="../../conduit/html/Conduit.html#t:MonadUnliftIO" title="Conduit">MonadUnliftIO</a> m, <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:MonadFail" title="Distribution.Compat.Prelude.Internal">MonadFail</a> m) =&gt; <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> -&gt; m <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a></li><li class="src short"><a href="#v:mintBurn_2">mintBurn_2</a> :: (<a href="../../conduit/html/Conduit.html#t:MonadUnliftIO" title="Conduit">MonadUnliftIO</a> m, <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:MonadFail" title="Distribution.Compat.Prelude.Internal">MonadFail</a> m) =&gt; <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> -&gt; m <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a></li><li class="src short"><a href="#v:withdrawScript_1">withdrawScript_1</a> :: (<a href="../../conduit/html/Conduit.html#t:MonadUnliftIO" title="Conduit">MonadUnliftIO</a> m, <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:MonadFail" title="Distribution.Compat.Prelude.Internal">MonadFail</a> m) =&gt; m <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a></li><li class="src short"><a href="#v:currencyTx">currencyTx</a> :: <span class="keyword">forall</span> n. <a href="../../cardano-wallet-core/html/Cardano-Wallet-Api-Types.html#t:EncodeAddress" title="Cardano.Wallet.Api.Types">EncodeAddress</a> n =&gt; <a href="../../cardano-wallet-core/html/Cardano-Wallet-Api-Types.html#t:ApiWalletInput" title="Cardano.Wallet.Api.Types">ApiWalletInput</a> n -&gt; <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a></li><li class="src short"><a href="#v:toHex">toHex</a> :: <a href="../../bytestring/html/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="../../cardano-prelude/html/Cardano-Prelude.html#t:Text" title="Cardano.Prelude">Text</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:mkSignerPolicy" class="def">mkSignerPolicy</a> :: <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> -&gt; (<a href="../../cardano-prelude/html/Cardano-Prelude.html#t:Text" title="Cardano.Prelude">Text</a>, <a href="../../cardano-wallet-core/html/Cardano-Wallet-Api-Types.html#t:ApiT" title="Cardano.Wallet.Api.Types">ApiT</a> (<a href="../../cardano-wallet-core/html/Cardano-Wallet-Primitive-Types-Hash.html#t:Hash" title="Cardano.Wallet.Primitive.Types.Hash">Hash</a> &quot;TokenPolicy&quot;)) <a href="src/Test.Integration.Plutus.html#mkSignerPolicy" class="link">Source</a> <a href="#v:mkSignerPolicy" class="selflink">#</a></p><div class="doc"><p>Create a policy for which the only validation condition is that the
 transaction is signed by some key.</p><p>This template has one parameter:</p><ul><li>vkHash: flat-encoded blake2b-224 hash of some verification key, in base16.</li></ul></div></div><div class="top"><p class="src"><a id="v:alwaysTrueValidator" class="def">alwaysTrueValidator</a> :: (<a href="../../cardano-prelude/html/Cardano-Prelude.html#t:Text" title="Cardano.Prelude">Text</a>, <a href="../../cardano-wallet-core/html/Cardano-Wallet-Api-Types.html#t:ApiT" title="Cardano.Wallet.Api.Types">ApiT</a> (<a href="../../cardano-wallet-core/html/Cardano-Wallet-Primitive-Types-Hash.html#t:Hash" title="Cardano.Wallet.Primitive.Types.Hash">Hash</a> &quot;TokenPolicy&quot;)) <a href="src/Test.Integration.Plutus.html#alwaysTrueValidator" class="link">Source</a> <a href="#v:alwaysTrueValidator" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:pingPong_1" class="def">pingPong_1</a> :: <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> <a href="src/Test.Integration.Plutus.html#pingPong_1" class="link">Source</a> <a href="#v:pingPong_1" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:pingPong_2" class="def">pingPong_2</a> :: (<a href="../../conduit/html/Conduit.html#t:MonadUnliftIO" title="Conduit">MonadUnliftIO</a> m, <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:MonadFail" title="Distribution.Compat.Prelude.Internal">MonadFail</a> m) =&gt; <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> -&gt; m <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> <a href="src/Test.Integration.Plutus.html#pingPong_2" class="link">Source</a> <a href="#v:pingPong_2" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:game_1" class="def">game_1</a> :: <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> <a href="src/Test.Integration.Plutus.html#game_1" class="link">Source</a> <a href="#v:game_1" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:game_2" class="def">game_2</a> :: (<a href="../../conduit/html/Conduit.html#t:MonadUnliftIO" title="Conduit">MonadUnliftIO</a> m, <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:MonadFail" title="Distribution.Compat.Prelude.Internal">MonadFail</a> m) =&gt; <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> -&gt; m <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> <a href="src/Test.Integration.Plutus.html#game_2" class="link">Source</a> <a href="#v:game_2" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:game_3" class="def">game_3</a> :: (<a href="../../conduit/html/Conduit.html#t:MonadUnliftIO" title="Conduit">MonadUnliftIO</a> m, <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:MonadFail" title="Distribution.Compat.Prelude.Internal">MonadFail</a> m) =&gt; <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> -&gt; m <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> <a href="src/Test.Integration.Plutus.html#game_3" class="link">Source</a> <a href="#v:game_3" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:mintBurn_1" class="def">mintBurn_1</a> :: (<a href="../../conduit/html/Conduit.html#t:MonadUnliftIO" title="Conduit">MonadUnliftIO</a> m, <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:MonadFail" title="Distribution.Compat.Prelude.Internal">MonadFail</a> m) =&gt; <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> -&gt; m <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> <a href="src/Test.Integration.Plutus.html#mintBurn_1" class="link">Source</a> <a href="#v:mintBurn_1" class="selflink">#</a></p><div class="doc"><p>A first transaction template which mints some token aimed for the wallet
 submitting the transaction (collected as part of balancing). Other than the
 minted token, the transaction has no inputs and no outputs. So the wallet is
 expected to balance it out and assign the minted token to a change address.</p><p>The template has three parameters:</p><ul><li>policyId: A base16 policyId</li><li>policy: A base16 corresponding policy (see <code><a href="Test-Integration-Plutus.html#v:mkSignerPolicy" title="Test.Integration.Plutus">mkSignerPolicy</a></code>)</li><li>vkHash: The verification key hash (base16) which was used to generate the policy.</li></ul></div></div><div class="top"><p class="src"><a id="v:mintBurn_2" class="def">mintBurn_2</a> :: (<a href="../../conduit/html/Conduit.html#t:MonadUnliftIO" title="Conduit">MonadUnliftIO</a> m, <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:MonadFail" title="Distribution.Compat.Prelude.Internal">MonadFail</a> m) =&gt; <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> -&gt; m <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> <a href="src/Test.Integration.Plutus.html#mintBurn_2" class="link">Source</a> <a href="#v:mintBurn_2" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:withdrawScript_1" class="def">withdrawScript_1</a> :: (<a href="../../conduit/html/Conduit.html#t:MonadUnliftIO" title="Conduit">MonadUnliftIO</a> m, <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:MonadFail" title="Distribution.Compat.Prelude.Internal">MonadFail</a> m) =&gt; m <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> <a href="src/Test.Integration.Plutus.html#withdrawScript_1" class="link">Source</a> <a href="#v:withdrawScript_1" class="selflink">#</a></p><div class="doc"><p>In this scenario, we attempt to perform a withdrawal of 42 &#8371; from stake
 address locked by the special <code><a href="Test-Integration-Plutus.html#v:alwaysTrueValidator" title="Test.Integration.Plutus">alwaysTrueValidator</a></code>, which always validate.</p><p>This however requires to pass a <code>Rewarding</code> type of redeemer, which is quite
 exotic :)</p></div></div><div class="top"><p class="src"><a id="v:currencyTx" class="def">currencyTx</a> <a href="src/Test.Integration.Plutus.html#currencyTx" class="link">Source</a> <a href="#v:currencyTx" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <span class="keyword">forall</span> n. <a href="../../cardano-wallet-core/html/Cardano-Wallet-Api-Types.html#t:EncodeAddress" title="Cardano.Wallet.Api.Types">EncodeAddress</a> n</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="../../cardano-wallet-core/html/Cardano-Wallet-Api-Types.html#t:ApiWalletInput" title="Cardano.Wallet.Api.Types">ApiWalletInput</a> n</td><td class="doc"><p>UTxO that is hard-wired into the smart contract.</p></td></tr><tr><td class="src">-&gt; <a href="../../aeson/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Partial transaction that mints assets using the &quot;currency&quot; contract.</p><p>The contract is implemented in Plutus here:</p><ul><li><a href="https://github.com/input-output-hk/plutus-apps/blob/main/plutus-use-cases/src/Plutus/Contracts/Currency.hs">https://github.com/input-output-hk/plutus-apps/blob/main/plutus-use-cases/src/Plutus/Contracts/Currency.hs</a></li><li><a href="https://github.com/input-output-hk/plutus-apps/blob/main/plutus-use-cases/test/Spec/Currency.hs">https://github.com/input-output-hk/plutus-apps/blob/main/plutus-use-cases/test/Spec/Currency.hs</a></li></ul><p>The contract was serialised using the support code in
 <code><em>extra</em>Plutus/CurrencyContract.hs</code> in this repository.</p><p>Assets can be minted by spending a specific UTxO that is hard-wired into
 the smart contract. Hence, minting can happen only once, as UTxOs can be
 spent only once.</p><p>The transaction is partial and needs to be sent to the
  <code>/transactions-balance</code> endpoint of the wallet in order
 to add change outputs and further inputs to cover fees if necessary.
 This endpoint also needs to make sure that the minted assets
 are assigned to a change output.</p></div></div><div class="top"><p class="src"><a id="v:toHex" class="def">toHex</a> :: <a href="../../bytestring/html/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="../../cardano-prelude/html/Cardano-Prelude.html#t:Text" title="Cardano.Prelude">Text</a> <a href="src/Test.Integration.Plutus.html#toHex" class="link">Source</a> <a href="#v:toHex" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.2</p></div></body></html>