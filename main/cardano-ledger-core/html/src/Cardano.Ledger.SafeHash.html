<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE ConstraintKinds #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DerivingStrategies #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FunctionalDependencies #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE StandaloneDeriving #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Cardano.Ledger.SafeHash</span><span>
</span><span id="line-14"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#SafeHash"><span class="hs-identifier">SafeHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#SafeToHash"><span class="hs-identifier">SafeToHash</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#castSafeHash"><span class="hs-identifier">castSafeHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#HashAnnotated"><span class="hs-identifier">HashAnnotated</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#hashAnnotated"><span class="hs-identifier">hashAnnotated</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#indexProxy"><span class="hs-identifier">indexProxy</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#HashWithCrypto"><span class="hs-identifier">HashWithCrypto</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#HasAlgorithm"><span class="hs-identifier">HasAlgorithm</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#extractHash"><span class="hs-identifier">extractHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#hashSafeList"><span class="hs-identifier">hashSafeList</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#Safe"><span class="hs-identifier">Safe</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#unsafeMakeSafeHash"><span class="hs-identifier">unsafeMakeSafeHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span class="hs-keyword">where</span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier">Cardano.Binary</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier">FromCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier">ToCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../cardano-crypto-class/html/src"><span class="hs-identifier">Cardano.Crypto.Hash</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Hash</span></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html"><span class="hs-identifier">Cardano.Ledger.Crypto</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CC</span></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-prelude/html/src"><span class="hs-identifier">Cardano.Prelude</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-prelude/html/src"><span class="hs-identifier">HeapWords</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/deepseq-1.4.4.0/src"><span class="hs-identifier">Control.DeepSeq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/deepseq-1.4.4.0/src"><span class="hs-identifier">NFData</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier">Data.ByteString</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier">ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier">Data.ByteString.Short</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier">ShortByteString</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier">fromShort</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Foldable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">fold</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-data/html/src"><span class="hs-identifier">Data.MemoBytes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-data/html/src"><span class="hs-identifier">MemoBytes</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Typeable</span></a></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../nothunks/html/src"><span class="hs-identifier">NoThunks.Class</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../nothunks/html/src"><span class="hs-identifier">NoThunks</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span class="hs-comment">-- ==========================================================</span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span class="hs-comment">-- | A SafeHash is a hash of something that is safe to hash. Such types store</span><span>
</span><span id="line-44"></span><span class="hs-comment">--     their own serialisation bytes. The prime example is (MemoBytes t), but other</span><span>
</span><span id="line-45"></span><span class="hs-comment">--     examples are things that consist of only ByteStrings.</span><span>
</span><span id="line-46"></span><span class="hs-comment">--</span><span>
</span><span id="line-47"></span><span class="hs-comment">--     We do NOT export the constructor SafeHash, but instead export other functions</span><span>
</span><span id="line-48"></span><span class="hs-comment">--     such as 'hashWithCrypto, 'hashAnnotated' and 'extractHash' which have constraints</span><span>
</span><span id="line-49"></span><span class="hs-comment">--     that limit their application to types which preserve their original serialization</span><span>
</span><span id="line-50"></span><span class="hs-comment">--     bytes.</span><span>
</span><span id="line-51"></span><span class="hs-keyword">newtype</span><span> </span><span id="SafeHash"><span class="annot"><a href="Cardano.Ledger.SafeHash.html#SafeHash"><span class="hs-identifier hs-var">SafeHash</span></a></span></span><span> </span><span id="local-6989586621679240891"><span class="annot"><a href="#local-6989586621679240891"><span class="hs-identifier hs-type">crypto</span></a></span></span><span> </span><span id="local-6989586621679240890"><span class="annot"><a href="#local-6989586621679240890"><span class="hs-identifier hs-type">index</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SafeHash"><span class="annot"><a href="Cardano.Ledger.SafeHash.html#SafeHash"><span class="hs-identifier hs-var">SafeHash</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-crypto-class/html/src"><span class="hs-identifier hs-type">Hash.Hash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Crypto.html#HASH"><span class="hs-identifier hs-type">CC.HASH</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240891"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679240890"><span class="hs-identifier hs-type">index</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-52"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679240821"><span id="local-6989586621679240823"><span id="local-6989586621679240825"><span class="annot"><span class="annottext">Int -&gt; SafeHash crypto index -&gt; ShowS
[SafeHash crypto index] -&gt; ShowS
SafeHash crypto index -&gt; String
(Int -&gt; SafeHash crypto index -&gt; ShowS)
-&gt; (SafeHash crypto index -&gt; String)
-&gt; ([SafeHash crypto index] -&gt; ShowS)
-&gt; Show (SafeHash crypto index)
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall crypto index. Int -&gt; SafeHash crypto index -&gt; ShowS
forall crypto index. [SafeHash crypto index] -&gt; ShowS
forall crypto index. SafeHash crypto index -&gt; String
showList :: [SafeHash crypto index] -&gt; ShowS
$cshowList :: forall crypto index. [SafeHash crypto index] -&gt; ShowS
show :: SafeHash crypto index -&gt; String
$cshow :: forall crypto index. SafeHash crypto index -&gt; String
showsPrec :: Int -&gt; SafeHash crypto index -&gt; ShowS
$cshowsPrec :: forall crypto index. Int -&gt; SafeHash crypto index -&gt; ShowS
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679240816"><span id="local-6989586621679240818"><span class="annot"><span class="annottext">SafeHash crypto index -&gt; SafeHash crypto index -&gt; Bool
(SafeHash crypto index -&gt; SafeHash crypto index -&gt; Bool)
-&gt; (SafeHash crypto index -&gt; SafeHash crypto index -&gt; Bool)
-&gt; Eq (SafeHash crypto index)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall crypto index.
SafeHash crypto index -&gt; SafeHash crypto index -&gt; Bool
/= :: SafeHash crypto index -&gt; SafeHash crypto index -&gt; Bool
$c/= :: forall crypto index.
SafeHash crypto index -&gt; SafeHash crypto index -&gt; Bool
== :: SafeHash crypto index -&gt; SafeHash crypto index -&gt; Bool
$c== :: forall crypto index.
SafeHash crypto index -&gt; SafeHash crypto index -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679240800"><span id="local-6989586621679240802"><span id="local-6989586621679240804"><span id="local-6989586621679240806"><span id="local-6989586621679240808"><span id="local-6989586621679240810"><span id="local-6989586621679240812"><span class="annot"><span class="annottext">Eq (SafeHash crypto index)
Eq (SafeHash crypto index)
-&gt; (SafeHash crypto index -&gt; SafeHash crypto index -&gt; Ordering)
-&gt; (SafeHash crypto index -&gt; SafeHash crypto index -&gt; Bool)
-&gt; (SafeHash crypto index -&gt; SafeHash crypto index -&gt; Bool)
-&gt; (SafeHash crypto index -&gt; SafeHash crypto index -&gt; Bool)
-&gt; (SafeHash crypto index -&gt; SafeHash crypto index -&gt; Bool)
-&gt; (SafeHash crypto index
    -&gt; SafeHash crypto index -&gt; SafeHash crypto index)
-&gt; (SafeHash crypto index
    -&gt; SafeHash crypto index -&gt; SafeHash crypto index)
-&gt; Ord (SafeHash crypto index)
SafeHash crypto index -&gt; SafeHash crypto index -&gt; Bool
SafeHash crypto index -&gt; SafeHash crypto index -&gt; Ordering
SafeHash crypto index
-&gt; SafeHash crypto index -&gt; SafeHash crypto index
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall crypto index. Eq (SafeHash crypto index)
forall crypto index.
SafeHash crypto index -&gt; SafeHash crypto index -&gt; Bool
forall crypto index.
SafeHash crypto index -&gt; SafeHash crypto index -&gt; Ordering
forall crypto index.
SafeHash crypto index
-&gt; SafeHash crypto index -&gt; SafeHash crypto index
min :: SafeHash crypto index
-&gt; SafeHash crypto index -&gt; SafeHash crypto index
$cmin :: forall crypto index.
SafeHash crypto index
-&gt; SafeHash crypto index -&gt; SafeHash crypto index
max :: SafeHash crypto index
-&gt; SafeHash crypto index -&gt; SafeHash crypto index
$cmax :: forall crypto index.
SafeHash crypto index
-&gt; SafeHash crypto index -&gt; SafeHash crypto index
&gt;= :: SafeHash crypto index -&gt; SafeHash crypto index -&gt; Bool
$c&gt;= :: forall crypto index.
SafeHash crypto index -&gt; SafeHash crypto index -&gt; Bool
&gt; :: SafeHash crypto index -&gt; SafeHash crypto index -&gt; Bool
$c&gt; :: forall crypto index.
SafeHash crypto index -&gt; SafeHash crypto index -&gt; Bool
&lt;= :: SafeHash crypto index -&gt; SafeHash crypto index -&gt; Bool
$c&lt;= :: forall crypto index.
SafeHash crypto index -&gt; SafeHash crypto index -&gt; Bool
&lt; :: SafeHash crypto index -&gt; SafeHash crypto index -&gt; Bool
$c&lt; :: forall crypto index.
SafeHash crypto index -&gt; SafeHash crypto index -&gt; Bool
compare :: SafeHash crypto index -&gt; SafeHash crypto index -&gt; Ordering
$ccompare :: forall crypto index.
SafeHash crypto index -&gt; SafeHash crypto index -&gt; Ordering
$cp1Ord :: forall crypto index. Eq (SafeHash crypto index)
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679240793"><span id="local-6989586621679240795"><span id="local-6989586621679240797"><span class="annot"><span class="annottext">Context -&gt; SafeHash crypto index -&gt; IO (Maybe ThunkInfo)
Proxy (SafeHash crypto index) -&gt; String
(Context -&gt; SafeHash crypto index -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; SafeHash crypto index -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy (SafeHash crypto index) -&gt; String)
-&gt; NoThunks (SafeHash crypto index)
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
forall crypto index.
Context -&gt; SafeHash crypto index -&gt; IO (Maybe ThunkInfo)
forall crypto index. Proxy (SafeHash crypto index) -&gt; String
showTypeOf :: Proxy (SafeHash crypto index) -&gt; String
$cshowTypeOf :: forall crypto index. Proxy (SafeHash crypto index) -&gt; String
wNoThunks :: Context -&gt; SafeHash crypto index -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: forall crypto index.
Context -&gt; SafeHash crypto index -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; SafeHash crypto index -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: forall crypto index.
Context -&gt; SafeHash crypto index -&gt; IO (Maybe ThunkInfo)
</span><a href="../../../../nothunks/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679240790"><span class="annot"><span class="annottext">SafeHash crypto index -&gt; ()
(SafeHash crypto index -&gt; ()) -&gt; NFData (SafeHash crypto index)
forall a. (a -&gt; ()) -&gt; NFData a
forall crypto index. SafeHash crypto index -&gt; ()
rnf :: SafeHash crypto index -&gt; ()
$crnf :: forall crypto index. SafeHash crypto index -&gt; ()
</span><a href="../../../../ghc/html/libraries/deepseq-1.4.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span>
</span><span id="line-54"></span><span id="local-6989586621679240785"><span id="local-6989586621679240787"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679240782"><span id="local-6989586621679240783"><span class="annot"><a href="#local-6989586621679240782"><span class="hs-keyword hs-type hs-type">newtype</span></a></span></span></span><span> </span><span class="hs-keyword">instance</span><span>
</span><span id="line-55"></span><span>  </span><span class="annot"><a href="../../../../cardano-crypto-class/html/src"><span class="hs-identifier hs-type">Hash.HashAlgorithm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Crypto.html#HASH"><span class="hs-identifier hs-type">CC.HASH</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240783"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-56"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#SafeToHash"><span class="hs-identifier hs-type">SafeToHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#SafeHash"><span class="hs-identifier hs-type">SafeHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240783"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240782"><span class="hs-identifier hs-type">index</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span id="local-6989586621679240780"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679240777"><span id="local-6989586621679240778"><span class="annot"><a href="#local-6989586621679240777"><span class="hs-keyword hs-type hs-type">newtype</span></a></span></span></span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../../../cardano-prelude/html/src"><span class="hs-identifier hs-type">HeapWords</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-crypto-class/html/src"><span class="hs-identifier hs-type">Hash.Hash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Crypto.html#HASH"><span class="hs-identifier hs-type">CC.HASH</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240778"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679240777"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-prelude/html/src"><span class="hs-identifier hs-type">HeapWords</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#SafeHash"><span class="hs-identifier hs-type">SafeHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240778"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240777"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span id="local-6989586621679240768"><span id="local-6989586621679240770"><span id="local-6989586621679240772"><span id="local-6989586621679240775"><span id="local-6989586621679240776"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240776"><span class="hs-identifier hs-type">index</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240775"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#SafeHash"><span class="hs-identifier hs-type">SafeHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240775"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240776"><span class="hs-identifier hs-type">index</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span id="local-6989586621679240760"><span id="local-6989586621679240762"><span id="local-6989586621679240765"><span id="local-6989586621679240766"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240766"><span class="hs-identifier hs-type">index</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240765"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#SafeHash"><span class="hs-identifier hs-type">SafeHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240765"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240766"><span class="hs-identifier hs-type">index</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span class="hs-keyword">type</span><span> </span><span id="HasAlgorithm"><span class="annot"><a href="Cardano.Ledger.SafeHash.html#HasAlgorithm"><span class="hs-identifier hs-var">HasAlgorithm</span></a></span></span><span> </span><span id="local-6989586621679240758"><span class="annot"><a href="#local-6989586621679240758"><span class="hs-identifier hs-type">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../cardano-crypto-class/html/src"><span class="hs-identifier hs-type">Hash.HashAlgorithm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Crypto.html#HASH"><span class="hs-identifier hs-type">CC.HASH</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240758"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span>
</span><span id="line-66"></span><span id="local-6989586621679240756"><span id="local-6989586621679240757"><span class="annot"><a href="Cardano.Ledger.SafeHash.html#extractHash"><span class="hs-identifier hs-type">extractHash</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#SafeHash"><span class="hs-identifier hs-type">SafeHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240757"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240756"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-crypto-class/html/src"><span class="hs-identifier hs-type">Hash.Hash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Crypto.html#HASH"><span class="hs-identifier hs-type">CC.HASH</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240757"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679240756"><span class="hs-identifier hs-type">i</span></a></span></span></span><span>
</span><span id="line-67"></span><span id="extractHash"><span class="annot"><span class="annottext">extractHash :: SafeHash crypto i -&gt; Hash (HASH crypto) i
</span><a href="Cardano.Ledger.SafeHash.html#extractHash"><span class="hs-identifier hs-var hs-var">extractHash</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#SafeHash"><span class="hs-identifier hs-type">SafeHash</span></a></span><span> </span><span id="local-6989586621679240755"><span class="annot"><span class="annottext">Hash (HASH crypto) i
</span><a href="#local-6989586621679240755"><span class="hs-identifier hs-var">h</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Hash (HASH crypto) i
</span><a href="#local-6989586621679240755"><span class="hs-identifier hs-var">h</span></a></span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span class="hs-comment">-- | To change the index parameter of SafeHash (which is a phantom type) use castSafeHash</span><span>
</span><span id="line-70"></span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#castSafeHash"><span class="hs-identifier hs-type">castSafeHash</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679240754"><span class="annot"><a href="#local-6989586621679240754"><span class="hs-identifier hs-type">i</span></a></span></span><span> </span><span id="local-6989586621679240753"><span class="annot"><a href="#local-6989586621679240753"><span class="hs-identifier hs-type">j</span></a></span></span><span> </span><span id="local-6989586621679240752"><span class="annot"><a href="#local-6989586621679240752"><span class="hs-identifier hs-type">c</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#SafeHash"><span class="hs-identifier hs-type">SafeHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240752"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240754"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#SafeHash"><span class="hs-identifier hs-type">SafeHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240752"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240753"><span class="hs-identifier hs-type">j</span></a></span><span>
</span><span id="line-71"></span><span id="castSafeHash"><span class="annot"><span class="annottext">castSafeHash :: SafeHash c i -&gt; SafeHash c j
</span><a href="Cardano.Ledger.SafeHash.html#castSafeHash"><span class="hs-identifier hs-var hs-var">castSafeHash</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#SafeHash"><span class="hs-identifier hs-type">SafeHash</span></a></span><span> </span><span id="local-6989586621679240751"><span class="annot"><span class="annottext">Hash (HASH c) i
</span><a href="#local-6989586621679240751"><span class="hs-identifier hs-var">h</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Hash (HASH c) j -&gt; SafeHash c j
forall crypto index.
Hash (HASH crypto) index -&gt; SafeHash crypto index
</span><a href="Cardano.Ledger.SafeHash.html#SafeHash"><span class="hs-identifier hs-var">SafeHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Hash (HASH c) i -&gt; Hash (HASH c) j
forall h a b. Hash h a -&gt; Hash h b
</span><a href="../../../../cardano-crypto-class/html/src"><span class="hs-identifier hs-var">Hash.castHash</span></a></span><span> </span><span class="annot"><span class="annottext">Hash (HASH c) i
</span><a href="#local-6989586621679240751"><span class="hs-identifier hs-var">h</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-72"></span><span>
</span><span id="line-73"></span><span class="hs-comment">-- Don't use this except in Testing to make Arbitrary instances, etc.</span><span>
</span><span id="line-74"></span><span id="local-6989586621679240748"><span id="local-6989586621679240749"><span class="annot"><a href="Cardano.Ledger.SafeHash.html#unsafeMakeSafeHash"><span class="hs-identifier hs-type">unsafeMakeSafeHash</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-crypto-class/html/src"><span class="hs-identifier hs-type">Hash.Hash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Crypto.html#HASH"><span class="hs-identifier hs-type">CC.HASH</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240749"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679240748"><span class="hs-identifier hs-type">index</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#SafeHash"><span class="hs-identifier hs-type">SafeHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240749"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240748"><span class="hs-identifier hs-type">index</span></a></span></span></span><span>
</span><span id="line-75"></span><span id="unsafeMakeSafeHash"><span class="annot"><span class="annottext">unsafeMakeSafeHash :: Hash (HASH crypto) index -&gt; SafeHash crypto index
</span><a href="Cardano.Ledger.SafeHash.html#unsafeMakeSafeHash"><span class="hs-identifier hs-var hs-var">unsafeMakeSafeHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Hash (HASH crypto) index -&gt; SafeHash crypto index
forall crypto index.
Hash (HASH crypto) index -&gt; SafeHash crypto index
</span><a href="Cardano.Ledger.SafeHash.html#SafeHash"><span class="hs-identifier hs-var">SafeHash</span></a></span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span class="hs-comment">-- =====================================================================</span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span class="hs-comment">-- | Only Types that preserve their serialisation bytes are members of the</span><span>
</span><span id="line-80"></span><span class="hs-comment">--   class SafeToHash. There are only a limited number of primitive direct</span><span>
</span><span id="line-81"></span><span class="hs-comment">--   instances of SafeToHash, all but two of them are present in this file. Instead</span><span>
</span><span id="line-82"></span><span class="hs-comment">--   of making explicit instances, we almost always use a newtype (around a type S)</span><span>
</span><span id="line-83"></span><span class="hs-comment">--   where their is already an instance (SafeToHash S). In that case the newtype</span><span>
</span><span id="line-84"></span><span class="hs-comment">--   has its SafeToHash instance derived using newtype deriving. The only exceptions</span><span>
</span><span id="line-85"></span><span class="hs-comment">--   are the legacy Shelley types: Metadata and Tx, that preserve their serialisation bytes</span><span>
</span><span id="line-86"></span><span class="hs-comment">--   using a different mechanism than MemoBytes.  SafeToHash is a superclass</span><span>
</span><span id="line-87"></span><span class="hs-comment">--   requirement of the classes HashAnnotated and HashWithCrypto (below) which</span><span>
</span><span id="line-88"></span><span class="hs-comment">--   provide more convenient ways to construct SafeHashes than using makeHashWithExplicitProxys.</span><span>
</span><span id="line-89"></span><span class="hs-keyword">class</span><span> </span><span id="SafeToHash"><span class="annot"><a href="Cardano.Ledger.SafeHash.html#SafeToHash"><span class="hs-identifier hs-var">SafeToHash</span></a></span></span><span> </span><span id="local-6989586621679240920"><span class="annot"><a href="#local-6989586621679240920"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-90"></span><span>  </span><span id="originalBytes"><span class="annot"><a href="Cardano.Ledger.SafeHash.html#originalBytes"><span class="hs-identifier hs-type">originalBytes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679240920"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">ByteString</span></a></span><span>
</span><span id="line-91"></span><span>  </span><span id="local-6989586621679240922"><span id="local-6989586621679240924"><span id="makeHashWithExplicitProxys"><span class="annot"><a href="Cardano.Ledger.SafeHash.html#makeHashWithExplicitProxys"><span class="hs-identifier hs-type">makeHashWithExplicitProxys</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#HasAlgorithm"><span class="hs-identifier hs-type">HasAlgorithm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240924"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240924"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240922"><span class="hs-identifier hs-type">index</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679240920"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#SafeHash"><span class="hs-identifier hs-type">SafeHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240924"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240922"><span class="hs-identifier hs-type">index</span></a></span></span></span><span>
</span><span id="line-92"></span><span>  </span><span id="local-6989586621679240745"><span class="annot"><a href="Cardano.Ledger.SafeHash.html#makeHashWithExplicitProxys"><span class="hs-identifier hs-var hs-var">makeHashWithExplicitProxys</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy c
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Proxy index
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679240744"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679240744"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Hash (HASH c) index -&gt; SafeHash c index
forall crypto index.
Hash (HASH crypto) index -&gt; SafeHash crypto index
</span><a href="Cardano.Ledger.SafeHash.html#SafeHash"><span class="hs-identifier hs-var">SafeHash</span></a></span><span> </span><span class="annot"><span class="annottext">(Hash (HASH c) index -&gt; SafeHash c index)
-&gt; Hash (HASH c) index -&gt; SafeHash c index
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Hash (HASH c) t -&gt; Hash (HASH c) index
forall h a b. Hash h a -&gt; Hash h b
</span><a href="../../../../cardano-crypto-class/html/src"><span class="hs-identifier hs-var">Hash.castHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(t -&gt; ByteString) -&gt; t -&gt; Hash (HASH c) t
forall h a. HashAlgorithm h =&gt; (a -&gt; ByteString) -&gt; a -&gt; Hash h a
</span><a href="../../../../cardano-crypto-class/html/src"><span class="hs-identifier hs-var">Hash.hashWith</span></a></span><span> </span><span class="annot"><span class="annottext">t -&gt; ByteString
forall t. SafeToHash t =&gt; t -&gt; ByteString
</span><a href="Cardano.Ledger.SafeHash.html#originalBytes"><span class="hs-identifier hs-var">originalBytes</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679240744"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-93"></span><span>
</span><span id="line-94"></span><span class="hs-comment">-- There are a limited number of direct instances. Everything else should come</span><span>
</span><span id="line-95"></span><span class="hs-comment">-- from newtype deriving.</span><span>
</span><span id="line-96"></span><span>
</span><span id="line-97"></span><span id="local-6989586621679240742"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679240739"><span class="annot"><a href="Cardano.Ledger.SafeHash.html#SafeToHash"><span class="hs-identifier hs-type">SafeToHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-data/html/src"><span class="hs-identifier hs-type">MemoBytes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240742"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-98"></span><span>  </span><span id="local-6989586621679240738"><span class="annot"><span class="annottext">originalBytes :: MemoBytes t -&gt; ByteString
</span><a href="#local-6989586621679240738"><span class="hs-identifier hs-var hs-var hs-var hs-var">originalBytes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; ByteString
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">fromShort</span></a></span><span> </span><span class="annot"><span class="annottext">(ShortByteString -&gt; ByteString)
-&gt; (MemoBytes t -&gt; ShortByteString) -&gt; MemoBytes t -&gt; ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">MemoBytes t -&gt; ShortByteString
forall t. MemoBytes t -&gt; ShortByteString
</span><a href="../../../../cardano-data/html/src"><span class="hs-identifier hs-var hs-var">memobytes</span></a></span></span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679240733"><span class="annot"><a href="Cardano.Ledger.SafeHash.html#SafeToHash"><span class="hs-identifier hs-type">SafeToHash</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">ShortByteString</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-101"></span><span>  </span><span id="local-6989586621679240732"><span class="annot"><span class="annottext">originalBytes :: ShortByteString -&gt; ByteString
</span><a href="#local-6989586621679240732"><span class="hs-identifier hs-var hs-var hs-var hs-var">originalBytes</span></a></span></span><span> </span><span id="local-6989586621679240731"><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679240731"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; ByteString
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">fromShort</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679240731"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-102"></span><span>
</span><span id="line-103"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679240728"><span class="annot"><a href="Cardano.Ledger.SafeHash.html#SafeToHash"><span class="hs-identifier hs-type">SafeToHash</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">ByteString</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-104"></span><span>  </span><span id="local-6989586621679240727"><span class="annot"><span class="annottext">originalBytes :: ByteString -&gt; ByteString
</span><a href="#local-6989586621679240727"><span class="hs-identifier hs-var hs-var hs-var hs-var">originalBytes</span></a></span></span><span> </span><span id="local-6989586621679240726"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679240726"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679240726"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-105"></span><span>
</span><span id="line-106"></span><span class="hs-comment">-- If one looks at the deriving clause in the definitions of SafeHash, we see that we</span><span>
</span><span id="line-107"></span><span class="hs-comment">-- derive that it is SafeToHash. We can derive this instance because SafeHash is</span><span>
</span><span id="line-108"></span><span class="hs-comment">-- a newtype around (Hash.Hash c i) which is a primitive SafeToHash type.</span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span id="local-6989586621679240724"><span id="local-6989586621679240725"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679240721"><span class="annot"><a href="../../../../cardano-crypto-class/html/src"><span class="hs-identifier hs-type">Hash.HashAlgorithm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240725"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#SafeToHash"><span class="hs-identifier hs-type">SafeToHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-crypto-class/html/src"><span class="hs-identifier hs-type">Hash.Hash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240725"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240724"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-111"></span><span>  </span><span id="local-6989586621679240720"><span class="annot"><span class="annottext">originalBytes :: Hash c i -&gt; ByteString
</span><a href="#local-6989586621679240720"><span class="hs-identifier hs-var hs-var hs-var hs-var">originalBytes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Hash c i -&gt; ByteString
forall h a. Hash h a -&gt; ByteString
</span><a href="../../../../cardano-crypto-class/html/src"><span class="hs-identifier hs-var">Hash.hashToBytes</span></a></span></span></span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span class="hs-comment">-- =====================================================================</span><span>
</span><span id="line-114"></span><span class="hs-comment">{- Types that are SafeToHash, AND have both of the following two invariants,
     are made members of the HashAnnotated class. The preconditions are:
     1) The type uniquely determines the 'index' type tag of (SafeHash crypto index)
     2) The type uniquely determines the 'crypto' type of (SafeHash crytop index)

     The SafeToHash and the HashAnnotated classes are designed so that their
     instances can be easily derived (because their methods have default methods
     when the type is a newtype around a type that is SafeToHash). For example,
     given (SafeToHash S) then:

     newtype T era = T S
        deriving Eq
        deriving newtype SafeToHash   -- Uses {-# LANGUAGE DerivingStrategies #-}

     instance HashAnnotated (T era) Index (Crypto era)

     After these declarations. One specialization of 'hashAnnotated' is
     hashAnnotated :: Era e =&gt; T e -&gt; SafeHash (Crypto e) Index
-}</span><span>
</span><span id="line-133"></span><span>
</span><span id="line-134"></span><span class="hs-comment">-- | Determine the index from the type 'x'</span><span>
</span><span id="line-135"></span><span class="hs-keyword">class</span><span> </span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#SafeToHash"><span class="hs-identifier hs-type">SafeToHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240858"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="HashAnnotated"><span class="annot"><a href="Cardano.Ledger.SafeHash.html#HashAnnotated"><span class="hs-identifier hs-var">HashAnnotated</span></a></span></span><span> </span><span id="local-6989586621679240858"><span class="annot"><a href="#local-6989586621679240858"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span id="local-6989586621679240857"><span class="annot"><a href="#local-6989586621679240857"><span class="hs-identifier hs-type">index</span></a></span></span><span> </span><span id="local-6989586621679240718"><span class="annot"><a href="#local-6989586621679240718"><span class="hs-identifier hs-type">crypto</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="#local-6989586621679240858"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679240857"><span class="hs-identifier hs-type">index</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240718"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-136"></span><span>  </span><span id="indexProxy"><span class="annot"><a href="Cardano.Ledger.SafeHash.html#indexProxy"><span class="hs-identifier hs-type">indexProxy</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679240858"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240857"><span class="hs-identifier hs-type">index</span></a></span><span>
</span><span id="line-137"></span><span>  </span><span id="local-6989586621679240717"><span class="annot"><a href="Cardano.Ledger.SafeHash.html#indexProxy"><span class="hs-identifier hs-var hs-var">indexProxy</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy index
forall k (t :: k). Proxy t
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679240857"><span class="hs-identifier hs-type">index</span></a></span></span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#hashAnnotated"><span class="hs-identifier hs-type">hashAnnotated</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679240715"><span class="annot"><a href="#local-6989586621679240715"><span class="hs-identifier hs-type">c</span></a></span></span><span> </span><span id="local-6989586621679240714"><span class="annot"><a href="#local-6989586621679240714"><span class="hs-identifier hs-type">i</span></a></span></span><span> </span><span id="local-6989586621679240713"><span class="annot"><a href="#local-6989586621679240713"><span class="hs-identifier hs-type">x</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#HasAlgorithm"><span class="hs-identifier hs-type">HasAlgorithm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240715"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#HashAnnotated"><span class="hs-identifier hs-type">HashAnnotated</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240713"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240714"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240715"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679240713"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#SafeHash"><span class="hs-identifier hs-type">SafeHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240715"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240714"><span class="hs-identifier hs-type">i</span></a></span><span>
</span><span id="line-140"></span><span id="hashAnnotated"><span class="annot"><span class="annottext">hashAnnotated :: x -&gt; SafeHash c i
</span><a href="Cardano.Ledger.SafeHash.html#hashAnnotated"><span class="hs-identifier hs-var hs-var">hashAnnotated</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy c -&gt; Proxy i -&gt; x -&gt; SafeHash c i
forall t c index.
(SafeToHash t, HasAlgorithm c) =&gt;
Proxy c -&gt; Proxy index -&gt; t -&gt; SafeHash c index
</span><a href="Cardano.Ledger.SafeHash.html#makeHashWithExplicitProxys"><span class="hs-identifier hs-var">makeHashWithExplicitProxys</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy c
forall k (t :: k). Proxy t
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679240715"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy i
forall k (t :: k). Proxy t
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679240714"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-141"></span><span>
</span><span id="line-142"></span><span class="hs-comment">-- ========================================================================</span><span>
</span><span id="line-143"></span><span>
</span><span id="line-144"></span><span class="hs-comment">-- | When the type being hashed: 'x' determines the 'index' tag but not the 'crypto'</span><span>
</span><span id="line-145"></span><span class="hs-keyword">class</span><span> </span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#SafeToHash"><span class="hs-identifier hs-type">SafeToHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240850"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="HashWithCrypto"><span class="annot"><a href="Cardano.Ledger.SafeHash.html#HashWithCrypto"><span class="hs-identifier hs-var">HashWithCrypto</span></a></span></span><span> </span><span id="local-6989586621679240850"><span class="annot"><a href="#local-6989586621679240850"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span id="local-6989586621679240849"><span class="annot"><a href="#local-6989586621679240849"><span class="hs-identifier hs-type">index</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="#local-6989586621679240850"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679240849"><span class="hs-identifier hs-type">index</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-146"></span><span>  </span><span id="hashWithCrypto"><span class="annot"><a href="Cardano.Ledger.SafeHash.html#hashWithCrypto"><span class="hs-identifier hs-type">hashWithCrypto</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679240711"><span class="annot"><a href="#local-6989586621679240711"><span class="hs-identifier hs-type">crypto</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#HasAlgorithm"><span class="hs-identifier hs-type">HasAlgorithm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240711"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240711"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679240850"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#SafeHash"><span class="hs-identifier hs-type">SafeHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240711"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240849"><span class="hs-identifier hs-type">index</span></a></span><span>
</span><span id="line-147"></span><span>  </span><span id="local-6989586621679240710"><span class="annot"><a href="Cardano.Ledger.SafeHash.html#hashWithCrypto"><span class="hs-identifier hs-var hs-var">hashWithCrypto</span></a></span><span> </span><span id="local-6989586621679240709"><span class="annot"><span class="annottext">Proxy crypto
</span><a href="#local-6989586621679240709"><span class="hs-identifier hs-var">proxy</span></a></span></span><span> </span><span id="local-6989586621679240708"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679240708"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy crypto -&gt; Proxy index -&gt; x -&gt; SafeHash crypto index
forall t c index.
(SafeToHash t, HasAlgorithm c) =&gt;
Proxy c -&gt; Proxy index -&gt; t -&gt; SafeHash c index
</span><a href="Cardano.Ledger.SafeHash.html#makeHashWithExplicitProxys"><span class="hs-identifier hs-var">makeHashWithExplicitProxys</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy crypto
</span><a href="#local-6989586621679240709"><span class="hs-identifier hs-var">proxy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy index
forall k (t :: k). Proxy t
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679240849"><span class="hs-identifier hs-type">index</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679240708"><span class="hs-identifier hs-var">y</span></a></span></span><span>
</span><span id="line-148"></span><span>
</span><span id="line-149"></span><span class="hs-comment">-- ======================================================================</span><span>
</span><span id="line-150"></span><span>
</span><span id="line-151"></span><span class="hs-comment">-- | Sometimes one wants to hash multiple things, simply by concatenating</span><span>
</span><span id="line-152"></span><span class="hs-comment">--   all the bytes. This abstraction allows one to do that safely.</span><span>
</span><span id="line-153"></span><span class="hs-keyword">data</span><span> </span><span id="Safe"><span class="annot"><a href="Cardano.Ledger.SafeHash.html#Safe"><span class="hs-identifier hs-var">Safe</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-154"></span><span>  </span><span id="local-6989586621679240707"><span id="Safe"><span class="annot"><a href="Cardano.Ledger.SafeHash.html#Safe"><span class="hs-identifier hs-var">Safe</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#SafeToHash"><span class="hs-identifier hs-type">SafeToHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240707"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679240707"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#Safe"><span class="hs-identifier hs-type">Safe</span></a></span></span><span>
</span><span id="line-155"></span><span>
</span><span id="line-156"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679240703"><span class="annot"><a href="Cardano.Ledger.SafeHash.html#SafeToHash"><span class="hs-identifier hs-type">SafeToHash</span></a></span><span> </span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#Safe"><span class="hs-identifier hs-type">Safe</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-157"></span><span>  </span><span id="local-6989586621679240702"><span class="annot"><span class="annottext">originalBytes :: Safe -&gt; ByteString
</span><a href="#local-6989586621679240702"><span class="hs-identifier hs-var hs-var hs-var hs-var">originalBytes</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#Safe"><span class="hs-identifier hs-type">Safe</span></a></span><span> </span><span id="local-6989586621679240701"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679240701"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x -&gt; ByteString
forall t. SafeToHash t =&gt; t -&gt; ByteString
</span><a href="Cardano.Ledger.SafeHash.html#originalBytes"><span class="hs-identifier hs-var">originalBytes</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679240701"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span id="local-6989586621679240699"><span id="local-6989586621679240700"><span class="annot"><a href="Cardano.Ledger.SafeHash.html#hashSafeList"><span class="hs-identifier hs-type">hashSafeList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#HasAlgorithm"><span class="hs-identifier hs-type">HasAlgorithm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240700"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240700"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240699"><span class="hs-identifier hs-type">index</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#Safe"><span class="hs-identifier hs-type">Safe</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.SafeHash.html#SafeHash"><span class="hs-identifier hs-type">SafeHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240700"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679240699"><span class="hs-identifier hs-type">index</span></a></span></span></span><span>
</span><span id="line-160"></span><span id="hashSafeList"><span class="annot"><span class="annottext">hashSafeList :: Proxy c -&gt; Proxy index -&gt; [Safe] -&gt; SafeHash c index
</span><a href="Cardano.Ledger.SafeHash.html#hashSafeList"><span class="hs-identifier hs-var hs-var">hashSafeList</span></a></span></span><span> </span><span id="local-6989586621679240698"><span class="annot"><span class="annottext">Proxy c
</span><a href="#local-6989586621679240698"><span class="hs-identifier hs-var">pc</span></a></span></span><span> </span><span id="local-6989586621679240697"><span class="annot"><span class="annottext">Proxy index
</span><a href="#local-6989586621679240697"><span class="hs-identifier hs-var">pindex</span></a></span></span><span> </span><span id="local-6989586621679240696"><span class="annot"><span class="annottext">[Safe]
</span><a href="#local-6989586621679240696"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy c -&gt; Proxy index -&gt; ByteString -&gt; SafeHash c index
forall t c index.
(SafeToHash t, HasAlgorithm c) =&gt;
Proxy c -&gt; Proxy index -&gt; t -&gt; SafeHash c index
</span><a href="Cardano.Ledger.SafeHash.html#makeHashWithExplicitProxys"><span class="hs-identifier hs-var">makeHashWithExplicitProxys</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy c
</span><a href="#local-6989586621679240698"><span class="hs-identifier hs-var">pc</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy index
</span><a href="#local-6989586621679240697"><span class="hs-identifier hs-var">pindex</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[ByteString] -&gt; ByteString
forall (t :: * -&gt; *) m. (Foldable t, Monoid m) =&gt; t m -&gt; m
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fold</span></a></span><span> </span><span class="annot"><span class="annottext">([ByteString] -&gt; ByteString) -&gt; [ByteString] -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Safe -&gt; ByteString
forall t. SafeToHash t =&gt; t -&gt; ByteString
</span><a href="Cardano.Ledger.SafeHash.html#originalBytes"><span class="hs-identifier hs-var">originalBytes</span></a></span><span> </span><span class="annot"><span class="annottext">(Safe -&gt; ByteString) -&gt; [Safe] -&gt; [ByteString]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Safe]
</span><a href="#local-6989586621679240696"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-161"></span></pre></body></html>