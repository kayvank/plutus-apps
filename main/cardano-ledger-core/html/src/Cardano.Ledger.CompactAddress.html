<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE BangPatterns #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE BinaryLiterals #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DeriveFunctor #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-8"></span><span>
</span><span id="line-9"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Cardano.Ledger.CompactAddress</span><span>
</span><span id="line-10"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#compactAddr"><span class="hs-identifier">compactAddr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decompactAddr"><span class="hs-identifier">decompactAddr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#CompactAddr"><span class="hs-identifier">CompactAddr</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#substring"><span class="hs-identifier">substring</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#isPayCredScriptCompactAddr"><span class="hs-identifier">isPayCredScriptCompactAddr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#isBootstrapCompactAddr"><span class="hs-identifier">isBootstrapCompactAddr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>    </span><span class="hs-comment">-- Faster Address deserialization</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodeAddr"><span class="hs-identifier">decodeAddr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodeAddrShort"><span class="hs-identifier">decodeAddrShort</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodeAddrEither"><span class="hs-identifier">decodeAddrEither</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodeAddrShortEither"><span class="hs-identifier">decodeAddrShortEither</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#fromCborAddr"><span class="hs-identifier">fromCborAddr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#fromCborBothAddr"><span class="hs-identifier">fromCborBothAddr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#fromCborCompactAddr"><span class="hs-identifier">fromCborCompactAddr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#fromCborBackwardsBothAddr"><span class="hs-identifier">fromCborBackwardsBothAddr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodeRewardAcnt"><span class="hs-identifier">decodeRewardAcnt</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#fromCborRewardAcnt"><span class="hs-identifier">fromCborRewardAcnt</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>
</span><span id="line-28"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Exported for benchmarking only</span></span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#fromCborCompactAddrOld"><span class="hs-identifier">fromCborCompactAddrOld</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decompactAddrLazy"><span class="hs-identifier">decompactAddrLazy</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span class="hs-keyword">where</span><span>
</span><span id="line-33"></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier">Cardano.Binary</span></a></span><span>
</span><span id="line-35"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier">Decoder</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>    </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier">DecoderError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>    </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier">FromCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>    </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier">ToCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>    </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier">decodeFull'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../cardano-crypto-class/html/src"><span class="hs-identifier">Cardano.Crypto.Hash.Class</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Hash</span></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Address.html"><span class="hs-identifier">Cardano.Ledger.Address</span></a></span><span>
</span><span id="line-43"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Cardano.Ledger.Address.html#Addr"><span class="hs-identifier">Addr</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.Address.html#BootstrapAddress"><span class="hs-identifier">BootstrapAddress</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.Address.html#RewardAcnt"><span class="hs-identifier">RewardAcnt</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.Address.html#Word7"><span class="hs-identifier">Word7</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.Address.html#byron"><span class="hs-identifier">byron</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.Address.html#getAddr"><span class="hs-identifier">getAddr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.Address.html#isEnterpriseAddr"><span class="hs-identifier">isEnterpriseAddr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.Address.html#notBaseAddr"><span class="hs-identifier">notBaseAddr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.Address.html#payCredIsScript"><span class="hs-identifier">payCredIsScript</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.Address.html#serialiseAddr"><span class="hs-identifier">serialiseAddr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.Address.html#stakeCredIsScript"><span class="hs-identifier">stakeCredIsScript</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.Address.html#toWord7"><span class="hs-identifier">toWord7</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.Address.html#word7sToWord64"><span class="hs-identifier">word7sToWord64</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.BaseTypes.html"><span class="hs-identifier">Cardano.Ledger.BaseTypes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.BaseTypes.html#CertIx"><span class="hs-identifier">CertIx</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.BaseTypes.html#Network"><span class="hs-identifier">Network</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.BaseTypes.html#TxIx"><span class="hs-identifier">TxIx</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.BaseTypes.html#word8ToNetwork"><span class="hs-identifier">word8ToNetwork</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Credential.html"><span class="hs-identifier">Cardano.Ledger.Credential</span></a></span><span>
</span><span id="line-59"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier">Credential</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#KeyHashObj"><span class="hs-identifier">KeyHashObj</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Credential.html#ScriptHashObj"><span class="hs-identifier">ScriptHashObj</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.Credential.html#PaymentCredential"><span class="hs-identifier">PaymentCredential</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.Credential.html#Ptr"><span class="hs-identifier">Ptr</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.Credential.html#StakeReference"><span class="hs-identifier">StakeReference</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html"><span class="hs-identifier">Cardano.Ledger.Crypto</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Crypto.html#ADDRHASH"><span class="hs-identifier">ADDRHASH</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html"><span class="hs-identifier">Cardano.Ledger.Crypto</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CC</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier">Crypto</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Hashes.html"><span class="hs-identifier">Cardano.Ledger.Hashes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Hashes.html#ScriptHash"><span class="hs-identifier">ScriptHash</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Keys.html"><span class="hs-identifier">Cardano.Ledger.Keys</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Keys.html#KeyHash"><span class="hs-identifier">KeyHash</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Slot.html"><span class="hs-identifier">Cardano.Ledger.Slot</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-slotting/html/src"><span class="hs-identifier">SlotNo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-prelude/html/src"><span class="hs-identifier">Cardano.Prelude</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../protolude/html/src"><span class="hs-identifier">panic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/deepseq-1.4.4.0/src"><span class="hs-identifier">Control.DeepSeq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/deepseq-1.4.4.0/src"><span class="hs-identifier">NFData</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Monad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">ap</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">guard</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">unless</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">when</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Monad.Fail</span></a></span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier">Control.Monad.Trans.State</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier">StateT</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier">evalStateT</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier">get</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier">modify'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier">state</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../binary/html/src"><span class="hs-identifier">Data.Binary.Get</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">B</span></span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Bits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Bits</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">clearBit</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">shiftL</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">testBit</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator">(.&amp;.)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator">(.|.)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier">Data.ByteString</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BS</span></span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier">Data.ByteString.Lazy</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BSL</span></span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier">Data.ByteString.Short</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SBS</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier">fromShort</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier">index</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier">length</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier">toShort</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier">Data.ByteString.Short.Internal</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SBS</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier">ShortByteString</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier">SBS</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier">unsafeIndex</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier">Data.ByteString.Unsafe</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BS</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier">unsafeDrop</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier">unsafeIndex</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-data/html/src"><span class="hs-identifier">Data.Coders</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-data/html/src"><span class="hs-identifier">cborError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">fromMaybe</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../primitive/html/src"><span class="hs-identifier">Data.Primitive.ByteArray</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BA</span></span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Proxy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Proxy</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.String</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">fromString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier">Data.Text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier">Text</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Word</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Word16</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Word32</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Word64</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Word8</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">GHC.Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">intToDigit</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Numeric</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">showIntAtBase</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span class="hs-keyword">newtype</span><span> </span><span id="CompactAddr"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#CompactAddr"><span class="hs-identifier hs-var">CompactAddr</span></a></span></span><span> </span><span id="local-6989586621679246518"><span class="annot"><a href="#local-6989586621679246518"><span class="hs-identifier hs-type">crypto</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="UnsafeCompactAddr"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#UnsafeCompactAddr"><span class="hs-identifier hs-var">UnsafeCompactAddr</span></a></span></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">ShortByteString</span></a></span><span>
</span><span id="line-92"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679246116"><span id="local-6989586621679246118"><span class="annot"><span class="annottext">CompactAddr crypto -&gt; CompactAddr crypto -&gt; Bool
(CompactAddr crypto -&gt; CompactAddr crypto -&gt; Bool)
-&gt; (CompactAddr crypto -&gt; CompactAddr crypto -&gt; Bool)
-&gt; Eq (CompactAddr crypto)
forall crypto. CompactAddr crypto -&gt; CompactAddr crypto -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: CompactAddr crypto -&gt; CompactAddr crypto -&gt; Bool
$c/= :: forall crypto. CompactAddr crypto -&gt; CompactAddr crypto -&gt; Bool
== :: CompactAddr crypto -&gt; CompactAddr crypto -&gt; Bool
$c== :: forall crypto. CompactAddr crypto -&gt; CompactAddr crypto -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679246100"><span id="local-6989586621679246102"><span id="local-6989586621679246104"><span id="local-6989586621679246106"><span id="local-6989586621679246108"><span id="local-6989586621679246110"><span id="local-6989586621679246112"><span class="annot"><span class="annottext">Eq (CompactAddr crypto)
Eq (CompactAddr crypto)
-&gt; (CompactAddr crypto -&gt; CompactAddr crypto -&gt; Ordering)
-&gt; (CompactAddr crypto -&gt; CompactAddr crypto -&gt; Bool)
-&gt; (CompactAddr crypto -&gt; CompactAddr crypto -&gt; Bool)
-&gt; (CompactAddr crypto -&gt; CompactAddr crypto -&gt; Bool)
-&gt; (CompactAddr crypto -&gt; CompactAddr crypto -&gt; Bool)
-&gt; (CompactAddr crypto -&gt; CompactAddr crypto -&gt; CompactAddr crypto)
-&gt; (CompactAddr crypto -&gt; CompactAddr crypto -&gt; CompactAddr crypto)
-&gt; Ord (CompactAddr crypto)
CompactAddr crypto -&gt; CompactAddr crypto -&gt; Bool
CompactAddr crypto -&gt; CompactAddr crypto -&gt; Ordering
CompactAddr crypto -&gt; CompactAddr crypto -&gt; CompactAddr crypto
forall crypto. Eq (CompactAddr crypto)
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall crypto. CompactAddr crypto -&gt; CompactAddr crypto -&gt; Bool
forall crypto. CompactAddr crypto -&gt; CompactAddr crypto -&gt; Ordering
forall crypto.
CompactAddr crypto -&gt; CompactAddr crypto -&gt; CompactAddr crypto
min :: CompactAddr crypto -&gt; CompactAddr crypto -&gt; CompactAddr crypto
$cmin :: forall crypto.
CompactAddr crypto -&gt; CompactAddr crypto -&gt; CompactAddr crypto
max :: CompactAddr crypto -&gt; CompactAddr crypto -&gt; CompactAddr crypto
$cmax :: forall crypto.
CompactAddr crypto -&gt; CompactAddr crypto -&gt; CompactAddr crypto
&gt;= :: CompactAddr crypto -&gt; CompactAddr crypto -&gt; Bool
$c&gt;= :: forall crypto. CompactAddr crypto -&gt; CompactAddr crypto -&gt; Bool
&gt; :: CompactAddr crypto -&gt; CompactAddr crypto -&gt; Bool
$c&gt; :: forall crypto. CompactAddr crypto -&gt; CompactAddr crypto -&gt; Bool
&lt;= :: CompactAddr crypto -&gt; CompactAddr crypto -&gt; Bool
$c&lt;= :: forall crypto. CompactAddr crypto -&gt; CompactAddr crypto -&gt; Bool
&lt; :: CompactAddr crypto -&gt; CompactAddr crypto -&gt; Bool
$c&lt; :: forall crypto. CompactAddr crypto -&gt; CompactAddr crypto -&gt; Bool
compare :: CompactAddr crypto -&gt; CompactAddr crypto -&gt; Ordering
$ccompare :: forall crypto. CompactAddr crypto -&gt; CompactAddr crypto -&gt; Ordering
$cp1Ord :: forall crypto. Eq (CompactAddr crypto)
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679246097"><span class="annot"><span class="annottext">CompactAddr crypto -&gt; ()
(CompactAddr crypto -&gt; ()) -&gt; NFData (CompactAddr crypto)
forall crypto. CompactAddr crypto -&gt; ()
forall a. (a -&gt; ()) -&gt; NFData a
rnf :: CompactAddr crypto -&gt; ()
$crnf :: forall crypto. CompactAddr crypto -&gt; ()
</span><a href="../../../../ghc/html/libraries/deepseq-1.4.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span>
</span><span id="line-94"></span><span id="local-6989586621679246095"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679246090"><span id="local-6989586621679246093"><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246095"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#CompactAddr"><span class="hs-identifier hs-type">CompactAddr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246095"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-95"></span><span>  </span><span id="local-6989586621679246088"><span class="annot"><span class="annottext">show :: CompactAddr c -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span id="local-6989586621679246086"><span class="annot"><span class="annottext">CompactAddr c
</span><a href="#local-6989586621679246086"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Addr c -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CompactAddr c -&gt; Addr c
forall crypto. Crypto crypto =&gt; CompactAddr crypto -&gt; Addr crypto
</span><a href="Cardano.Ledger.CompactAddress.html#decompactAddr"><span class="hs-identifier hs-var">decompactAddr</span></a></span><span> </span><span class="annot"><span class="annottext">CompactAddr c
</span><a href="#local-6989586621679246086"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-96"></span><span>
</span><span id="line-97"></span><span id="local-6989586621679246085"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#compactAddr"><span class="hs-identifier hs-type">compactAddr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.Address.html#Addr"><span class="hs-identifier hs-type">Addr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246085"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#CompactAddr"><span class="hs-identifier hs-type">CompactAddr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246085"><span class="hs-identifier hs-type">crypto</span></a></span></span><span>
</span><span id="line-98"></span><span id="compactAddr"><span class="annot"><span class="annottext">compactAddr :: Addr crypto -&gt; CompactAddr crypto
</span><a href="Cardano.Ledger.CompactAddress.html#compactAddr"><span class="hs-identifier hs-var hs-var">compactAddr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; CompactAddr crypto
forall crypto. ShortByteString -&gt; CompactAddr crypto
</span><a href="Cardano.Ledger.CompactAddress.html#UnsafeCompactAddr"><span class="hs-identifier hs-var">UnsafeCompactAddr</span></a></span><span> </span><span class="annot"><span class="annottext">(ShortByteString -&gt; CompactAddr crypto)
-&gt; (Addr crypto -&gt; ShortByteString)
-&gt; Addr crypto
-&gt; CompactAddr crypto
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ShortByteString
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">SBS.toShort</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; ShortByteString)
-&gt; (Addr crypto -&gt; ByteString) -&gt; Addr crypto -&gt; ShortByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Addr crypto -&gt; ByteString
forall crypto. Addr crypto -&gt; ByteString
</span><a href="Cardano.Ledger.Address.html#serialiseAddr"><span class="hs-identifier hs-var">serialiseAddr</span></a></span><span>
</span><span id="line-99"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#compactAddr"><span class="hs-pragma hs-type">compactAddr</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-100"></span><span>
</span><span id="line-101"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decompactAddr"><span class="hs-identifier hs-type">decompactAddr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679246521"><span class="annot"><a href="#local-6989586621679246521"><span class="hs-identifier hs-type">crypto</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246521"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#CompactAddr"><span class="hs-identifier hs-type">CompactAddr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246521"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.Address.html#Addr"><span class="hs-identifier hs-type">Addr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246521"><span class="hs-identifier hs-type">crypto</span></a></span><span>
</span><span id="line-102"></span><span id="decompactAddr"><span class="annot"><span class="annottext">decompactAddr :: CompactAddr crypto -&gt; Addr crypto
</span><a href="Cardano.Ledger.CompactAddress.html#decompactAddr"><span class="hs-identifier hs-var hs-var">decompactAddr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#UnsafeCompactAddr"><span class="hs-identifier hs-type">UnsafeCompactAddr</span></a></span><span> </span><span id="local-6989586621679246083"><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679246083"><span class="hs-identifier hs-var">sbs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-103"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Maybe (Addr crypto)
forall crypto (m :: * -&gt; *).
(Crypto crypto, MonadFail m) =&gt;
ShortByteString -&gt; m (Addr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#decodeAddrShort"><span class="hs-identifier hs-var">decodeAddrShort</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679246083"><span class="hs-identifier hs-var">sbs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-104"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679246082"><span class="annot"><span class="annottext">Addr crypto
</span><a href="#local-6989586621679246082"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Addr crypto
</span><a href="#local-6989586621679246082"><span class="hs-identifier hs-var">addr</span></a></span><span>
</span><span id="line-105"></span><span>    </span><span class="annot"><span class="annottext">Maybe (Addr crypto)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Addr crypto
forall crypto. Crypto crypto =&gt; ShortByteString -&gt; Addr crypto
</span><a href="Cardano.Ledger.CompactAddress.html#decompactAddrOld"><span class="hs-identifier hs-var">decompactAddrOld</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679246083"><span class="hs-identifier hs-var">sbs</span></a></span><span>
</span><span id="line-106"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decompactAddr"><span class="hs-pragma hs-type">decompactAddr</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-107"></span><span>
</span><span id="line-108"></span><span id="local-6989586621679246509"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decompactAddrOld"><span class="hs-identifier hs-type">decompactAddrOld</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246509"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">ShortByteString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.Address.html#Addr"><span class="hs-identifier hs-type">Addr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246509"><span class="hs-identifier hs-type">crypto</span></a></span></span><span>
</span><span id="line-109"></span><span id="decompactAddrOld"><span class="annot"><span class="annottext">decompactAddrOld :: ShortByteString -&gt; Addr crypto
</span><a href="Cardano.Ledger.CompactAddress.html#decompactAddrOld"><span class="hs-identifier hs-var hs-var">decompactAddrOld</span></a></span></span><span> </span><span id="local-6989586621679246080"><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679246080"><span class="hs-identifier hs-var">short</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int, Addr crypto) -&gt; Addr crypto
forall a b. (a, b) -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">((Int, Addr crypto) -&gt; Addr crypto)
-&gt; (Maybe (Int, Addr crypto) -&gt; (Int, Addr crypto))
-&gt; Maybe (Int, Addr crypto)
-&gt; Addr crypto
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe (Int, Addr crypto) -&gt; (Int, Addr crypto)
forall a. Text -&gt; Maybe a -&gt; a
</span><a href="#local-6989586621679246079"><span class="hs-identifier hs-var">unwrap</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;CompactAddr&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (Int, Addr crypto) -&gt; Addr crypto)
-&gt; Maybe (Int, Addr crypto) -&gt; Addr crypto
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">GetShort (Addr crypto)
-&gt; Int -&gt; ShortByteString -&gt; Maybe (Int, Addr crypto)
forall a. GetShort a -&gt; Int -&gt; ShortByteString -&gt; Maybe (Int, a)
</span><a href="Cardano.Ledger.CompactAddress.html#runGetShort"><span class="hs-identifier hs-var hs-var">runGetShort</span></a></span><span> </span><span class="annot"><span class="annottext">GetShort (Addr crypto)
forall crypto. Crypto crypto =&gt; GetShort (Addr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#getShortAddr"><span class="hs-identifier hs-var">getShortAddr</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679246080"><span class="hs-identifier hs-var">short</span></a></span><span>
</span><span id="line-110"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-111"></span><span>    </span><span class="hs-comment">-- The reason failure is impossible here is that the only way to call this code</span><span>
</span><span id="line-112"></span><span>    </span><span class="hs-comment">-- is using a CompactAddr, which can only be constructed using compactAddr.</span><span>
</span><span id="line-113"></span><span>    </span><span class="hs-comment">-- compactAddr serializes an Addr, so this is guaranteed to work.</span><span>
</span><span id="line-114"></span><span>    </span><span class="annot"><a href="#local-6989586621679246079"><span class="hs-identifier hs-type">unwrap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679246504"><span class="annot"><a href="#local-6989586621679246504"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246504"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679246504"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-115"></span><span>    </span><span id="local-6989586621679246079"><span class="annot"><span class="annottext">unwrap :: Text -&gt; Maybe a -&gt; a
</span><a href="#local-6989586621679246079"><span class="hs-identifier hs-var hs-var">unwrap</span></a></span></span><span> </span><span id="local-6989586621679246076"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679246076"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Maybe a -&gt; a
forall a. a -&gt; Maybe a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; a
forall a. HasCallStack =&gt; Text -&gt; a
</span><a href="../../../../protolude/html/src"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; a) -&gt; Text -&gt; a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Impossible failure when decoding &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679246076"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span class="hs-pragma">{-# NOINLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decompactAddrOld"><span class="hs-pragma hs-type">decompactAddrOld</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span class="hs-comment">------------------------------------------------------------------------------------------</span><span>
</span><span id="line-119"></span><span class="hs-comment">-- Fast Address Serializer ---------------------------------------------------------------</span><span>
</span><span id="line-120"></span><span class="hs-comment">------------------------------------------------------------------------------------------</span><span>
</span><span id="line-121"></span><span>
</span><span id="line-122"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#fromCborAddr"><span class="hs-identifier hs-type">fromCborAddr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679246075"><span class="annot"><a href="#local-6989586621679246075"><span class="hs-identifier hs-type">crypto</span></a></span></span><span> </span><span id="local-6989586621679246074"><span class="annot"><a href="#local-6989586621679246074"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246075"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246074"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Address.html#Addr"><span class="hs-identifier hs-type">Addr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246075"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-123"></span><span id="fromCborAddr"><span class="annot"><span class="annottext">fromCborAddr :: Decoder s (Addr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#fromCborAddr"><span class="hs-identifier hs-var hs-var">fromCborAddr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-124"></span><span>  </span><span id="local-6989586621679246073"><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679246073"><span class="hs-identifier hs-var">sbs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s ShortByteString
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span>
</span><span id="line-125"></span><span>  </span><span class="annot"><span class="annottext">ShortByteString -&gt; Decoder s (Addr crypto)
forall crypto (m :: * -&gt; *).
(Crypto crypto, MonadFail m) =&gt;
ShortByteString -&gt; m (Addr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#decodeAddrShort"><span class="hs-identifier hs-var">decodeAddrShort</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679246075"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679246073"><span class="hs-identifier hs-var">sbs</span></a></span><span>
</span><span id="line-126"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#fromCborAddr"><span class="hs-pragma hs-type">fromCborAddr</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-127"></span><span>
</span><span id="line-128"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#fromCborBothAddr"><span class="hs-identifier hs-type">fromCborBothAddr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679246480"><span class="annot"><a href="#local-6989586621679246480"><span class="hs-identifier hs-type">crypto</span></a></span></span><span> </span><span id="local-6989586621679246479"><span class="annot"><a href="#local-6989586621679246479"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246480"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246479"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Address.html#Addr"><span class="hs-identifier hs-type">Addr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246480"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#CompactAddr"><span class="hs-identifier hs-type">CompactAddr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246480"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-129"></span><span id="fromCborBothAddr"><span class="annot"><span class="annottext">fromCborBothAddr :: Decoder s (Addr crypto, CompactAddr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#fromCborBothAddr"><span class="hs-identifier hs-var hs-var">fromCborBothAddr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-130"></span><span>  </span><span id="local-6989586621679246071"><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679246071"><span class="hs-identifier hs-var">sbs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s ShortByteString
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span>
</span><span id="line-131"></span><span>  </span><span id="local-6989586621679246070"><span class="annot"><span class="annottext">Addr crypto
</span><a href="#local-6989586621679246070"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Decoder s (Addr crypto)
forall crypto (m :: * -&gt; *).
(Crypto crypto, MonadFail m) =&gt;
ShortByteString -&gt; m (Addr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#decodeAddrShort"><span class="hs-identifier hs-var">decodeAddrShort</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679246480"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679246071"><span class="hs-identifier hs-var">sbs</span></a></span><span>
</span><span id="line-132"></span><span>  </span><span class="annot"><span class="annottext">(Addr crypto, CompactAddr crypto)
-&gt; Decoder s (Addr crypto, CompactAddr crypto)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Addr crypto
</span><a href="#local-6989586621679246070"><span class="hs-identifier hs-var">addr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; CompactAddr crypto
forall crypto. ShortByteString -&gt; CompactAddr crypto
</span><a href="Cardano.Ledger.CompactAddress.html#UnsafeCompactAddr"><span class="hs-identifier hs-var">UnsafeCompactAddr</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679246071"><span class="hs-identifier hs-var">sbs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-133"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#fromCborBothAddr"><span class="hs-pragma hs-type">fromCborBothAddr</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-134"></span><span>
</span><span id="line-135"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#fromCborCompactAddr"><span class="hs-identifier hs-type">fromCborCompactAddr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679246069"><span class="annot"><a href="#local-6989586621679246069"><span class="hs-identifier hs-type">crypto</span></a></span></span><span> </span><span id="local-6989586621679246068"><span class="annot"><a href="#local-6989586621679246068"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246069"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246068"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#CompactAddr"><span class="hs-identifier hs-type">CompactAddr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246069"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-136"></span><span id="fromCborCompactAddr"><span class="annot"><span class="annottext">fromCborCompactAddr :: Decoder s (CompactAddr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#fromCborCompactAddr"><span class="hs-identifier hs-var hs-var">fromCborCompactAddr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-137"></span><span>  </span><span class="hs-comment">-- Ensure bytes can be decoded as Addr</span><span>
</span><span id="line-138"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621679246067"><span class="annot"><span class="annottext">Addr crypto
</span><a href="#local-6989586621679246067"><span class="hs-identifier hs-var">_addr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679246066"><span class="annot"><span class="annottext">CompactAddr crypto
</span><a href="#local-6989586621679246066"><span class="hs-identifier hs-var">cAddr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s (Addr crypto, CompactAddr crypto)
forall crypto s.
Crypto crypto =&gt;
Decoder s (Addr crypto, CompactAddr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#fromCborBothAddr"><span class="hs-identifier hs-var">fromCborBothAddr</span></a></span><span>
</span><span id="line-139"></span><span>  </span><span class="annot"><span class="annottext">CompactAddr crypto -&gt; Decoder s (CompactAddr crypto)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">CompactAddr crypto
</span><a href="#local-6989586621679246066"><span class="hs-identifier hs-var">cAddr</span></a></span><span>
</span><span id="line-140"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#fromCborCompactAddr"><span class="hs-pragma hs-type">fromCborCompactAddr</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-141"></span><span>
</span><span id="line-142"></span><span class="hs-comment">-- This is a fallback deserializer that preserves old behavior. It will almost never be</span><span>
</span><span id="line-143"></span><span class="hs-comment">-- invoked, that is why it is not inlined.</span><span>
</span><span id="line-144"></span><span id="local-6989586621679246459"><span id="local-6989586621679246460"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#fromCborAddrFallback"><span class="hs-identifier hs-type">fromCborAddrFallback</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246460"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">ShortByteString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246459"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Address.html#Addr"><span class="hs-identifier hs-type">Addr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246460"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-145"></span><span id="fromCborAddrFallback"><span class="annot"><span class="annottext">fromCborAddrFallback :: ShortByteString -&gt; Decoder s (Addr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#fromCborAddrFallback"><span class="hs-identifier hs-var hs-var">fromCborAddrFallback</span></a></span></span><span> </span><span id="local-6989586621679246064"><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679246064"><span class="hs-identifier hs-var">sbs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-146"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Get (Addr crypto)
-&gt; ByteString
-&gt; Either
     (ByteString, ByteOffset, String)
     (ByteString, ByteOffset, Addr crypto)
forall a.
Get a
-&gt; ByteString
-&gt; Either
     (ByteString, ByteOffset, String) (ByteString, ByteOffset, a)
</span><a href="../../../../binary/html/src"><span class="hs-identifier hs-var">B.runGetOrFail</span></a></span><span> </span><span class="annot"><span class="annottext">Get (Addr crypto)
forall crypto. Crypto crypto =&gt; Get (Addr crypto)
</span><a href="Cardano.Ledger.Address.html#getAddr"><span class="hs-identifier hs-var">getAddr</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString
 -&gt; Either
      (ByteString, ByteOffset, String)
      (ByteString, ByteOffset, Addr crypto))
-&gt; ByteString
-&gt; Either
     (ByteString, ByteOffset, String)
     (ByteString, ByteOffset, Addr crypto)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">BSL.fromStrict</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; ByteString) -&gt; ByteString -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; ByteString
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">SBS.fromShort</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679246064"><span class="hs-identifier hs-var">sbs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-147"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679246061"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679246061"><span class="hs-identifier hs-var">_remaining</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679246060"><span class="annot"><span class="annottext">ByteOffset
</span><a href="#local-6989586621679246060"><span class="hs-identifier hs-var">_offset</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679246059"><span class="annot"><span class="annottext">Addr crypto
</span><a href="#local-6989586621679246059"><span class="hs-identifier hs-var">value</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Addr crypto -&gt; Decoder s (Addr crypto)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Addr crypto
</span><a href="#local-6989586621679246059"><span class="hs-identifier hs-var">value</span></a></span><span>
</span><span id="line-148"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679246058"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679246058"><span class="hs-identifier hs-var">_remaining</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679246057"><span class="annot"><span class="annottext">ByteOffset
</span><a href="#local-6989586621679246057"><span class="hs-identifier hs-var">_offset</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679246056"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679246056"><span class="hs-identifier hs-var">message</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-149"></span><span>      </span><span class="annot"><span class="annottext">DecoderError -&gt; Decoder s (Addr crypto)
forall e s a. Buildable e =&gt; e -&gt; Decoder s a
</span><a href="../../../../cardano-data/html/src"><span class="hs-identifier hs-var">cborError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; DecoderError
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">DecoderErrorCustom</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Addr&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; DecoderError) -&gt; Text -&gt; DecoderError
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
forall a. IsString a =&gt; String -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromString</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679246056"><span class="hs-identifier hs-var">message</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-150"></span><span class="hs-pragma">{-# NOINLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#fromCborAddrFallback"><span class="hs-pragma hs-type">fromCborAddrFallback</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-151"></span><span>
</span><span id="line-152"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#fromCborCompactAddrOld"><span class="hs-identifier hs-type">fromCborCompactAddrOld</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679246054"><span class="annot"><a href="#local-6989586621679246054"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621679246053"><span class="annot"><a href="#local-6989586621679246053"><span class="hs-identifier hs-type">crypto</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246053"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246054"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#CompactAddr"><span class="hs-identifier hs-type">CompactAddr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246053"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-153"></span><span id="fromCborCompactAddrOld"><span class="annot"><span class="annottext">fromCborCompactAddrOld :: Decoder s (CompactAddr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#fromCborCompactAddrOld"><span class="hs-identifier hs-var hs-var">fromCborCompactAddrOld</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-154"></span><span>  </span><span id="local-6989586621679246052"><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679246052"><span class="hs-identifier hs-var">sbs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s ShortByteString
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span>
</span><span id="line-155"></span><span>  </span><span class="annot"><span class="annottext">ShortByteString -&gt; CompactAddr crypto
forall crypto. ShortByteString -&gt; CompactAddr crypto
</span><a href="Cardano.Ledger.CompactAddress.html#UnsafeCompactAddr"><span class="hs-identifier hs-var">UnsafeCompactAddr</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679246052"><span class="hs-identifier hs-var">sbs</span></a></span><span> </span><span class="annot"><span class="annottext">CompactAddr crypto
-&gt; Decoder s (Addr crypto) -&gt; Decoder s (CompactAddr crypto)
forall (f :: * -&gt; *) a b. Functor f =&gt; a -&gt; f b -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Decoder s (Addr crypto)
forall crypto s.
Crypto crypto =&gt;
ShortByteString -&gt; Decoder s (Addr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#fromCborAddrFallback"><span class="hs-identifier hs-var">fromCborAddrFallback</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679246053"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679246052"><span class="hs-identifier hs-var">sbs</span></a></span><span>
</span><span id="line-156"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#fromCborCompactAddrOld"><span class="hs-pragma hs-type">fromCborCompactAddrOld</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-157"></span><span>
</span><span id="line-158"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#fromCborBackwardsBothAddr"><span class="hs-identifier hs-type">fromCborBackwardsBothAddr</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-159"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679246050"><span class="annot"><a href="#local-6989586621679246050"><span class="hs-identifier hs-type">crypto</span></a></span></span><span> </span><span id="local-6989586621679246049"><span class="annot"><a href="#local-6989586621679246049"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-160"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246050"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-161"></span><span>  </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246049"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Address.html#Addr"><span class="hs-identifier hs-type">Addr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246050"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#CompactAddr"><span class="hs-identifier hs-type">CompactAddr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246050"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-162"></span><span id="fromCborBackwardsBothAddr"><span class="annot"><span class="annottext">fromCborBackwardsBothAddr :: Decoder s (Addr crypto, CompactAddr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#fromCborBackwardsBothAddr"><span class="hs-identifier hs-var hs-var">fromCborBackwardsBothAddr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-163"></span><span>  </span><span id="local-6989586621679246048"><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679246048"><span class="hs-identifier hs-var">sbs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s ShortByteString
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span>
</span><span id="line-164"></span><span>  </span><span id="local-6989586621679246047"><span class="annot"><span class="annottext">Addr crypto
</span><a href="#local-6989586621679246047"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-165"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Either String (Addr crypto)
forall crypto.
Crypto crypto =&gt;
ShortByteString -&gt; Either String (Addr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#decodeAddrShortEither"><span class="hs-identifier hs-var">decodeAddrShortEither</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679246050"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679246048"><span class="hs-identifier hs-var">sbs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-166"></span><span>      </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621679246046"><span class="annot"><span class="annottext">Addr crypto
</span><a href="#local-6989586621679246046"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Addr crypto -&gt; Decoder s (Addr crypto)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Addr crypto
</span><a href="#local-6989586621679246046"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-167"></span><span>      </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621679246045"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679246045"><span class="hs-identifier hs-var">_err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Decoder s (Addr crypto)
forall crypto s.
Crypto crypto =&gt;
ShortByteString -&gt; Decoder s (Addr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#fromCborAddrFallback"><span class="hs-identifier hs-var">fromCborAddrFallback</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679246048"><span class="hs-identifier hs-var">sbs</span></a></span><span>
</span><span id="line-168"></span><span>  </span><span class="annot"><span class="annottext">(Addr crypto, CompactAddr crypto)
-&gt; Decoder s (Addr crypto, CompactAddr crypto)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Addr crypto
</span><a href="#local-6989586621679246047"><span class="hs-identifier hs-var">addr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; CompactAddr crypto
forall crypto. ShortByteString -&gt; CompactAddr crypto
</span><a href="Cardano.Ledger.CompactAddress.html#UnsafeCompactAddr"><span class="hs-identifier hs-var">UnsafeCompactAddr</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679246048"><span class="hs-identifier hs-var">sbs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-169"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#fromCborBackwardsBothAddr"><span class="hs-pragma hs-type">fromCborBackwardsBothAddr</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-170"></span><span>
</span><span id="line-171"></span><span class="hs-keyword">class</span><span> </span><span id="AddressBuffer"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#AddressBuffer"><span class="hs-identifier hs-var">AddressBuffer</span></a></span></span><span> </span><span id="local-6989586621679246450"><span class="annot"><a href="#local-6989586621679246450"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-172"></span><span>  </span><span id="bufLength"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#bufLength"><span class="hs-identifier hs-type">bufLength</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679246450"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span>  </span><span id="bufUnsafeIndex"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#bufUnsafeIndex"><span class="hs-identifier hs-type">bufUnsafeIndex</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679246450"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word8</span></a></span><span>
</span><span id="line-175"></span><span>
</span><span id="line-176"></span><span>  </span><span id="bufToByteString"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#bufToByteString"><span class="hs-identifier hs-type">bufToByteString</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679246450"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">BS.ByteString</span></a></span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span>  </span><span id="local-6989586621679246453"><span id="local-6989586621679246455"><span id="bufGetHash"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#bufGetHash"><span class="hs-identifier hs-type">bufGetHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cardano-crypto-class/html/src"><span class="hs-identifier hs-type">Hash.HashAlgorithm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246455"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679246450"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-crypto-class/html/src"><span class="hs-identifier hs-type">Hash.Hash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246455"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246453"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-179"></span><span>
</span><span id="line-180"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#AddressBuffer"><span class="hs-identifier hs-type">AddressBuffer</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">ShortByteString</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-181"></span><span>  </span><span id="local-6989586621679246035"><span class="annot"><span class="annottext">bufLength :: ShortByteString -&gt; Int
</span><a href="#local-6989586621679246035"><span class="hs-identifier hs-var hs-var hs-var hs-var">bufLength</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Int
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">SBS.length</span></a></span><span>
</span><span id="line-182"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#bufLength"><span class="hs-pragma hs-type">bufLength</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-183"></span><span>  </span><span id="local-6989586621679246034"><span class="annot"><span class="annottext">bufUnsafeIndex :: ShortByteString -&gt; Int -&gt; Word8
</span><a href="#local-6989586621679246034"><span class="hs-identifier hs-var hs-var hs-var hs-var">bufUnsafeIndex</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Int -&gt; Word8
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">SBS.unsafeIndex</span></a></span><span>
</span><span id="line-184"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#bufUnsafeIndex"><span class="hs-pragma hs-type">bufUnsafeIndex</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-185"></span><span>  </span><span id="local-6989586621679246033"><span class="annot"><span class="annottext">bufToByteString :: ShortByteString -&gt; ByteString
</span><a href="#local-6989586621679246033"><span class="hs-identifier hs-var hs-var hs-var hs-var">bufToByteString</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; ByteString
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">SBS.fromShort</span></a></span><span>
</span><span id="line-186"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#bufToByteString"><span class="hs-pragma hs-type">bufToByteString</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-187"></span><span>  </span><span id="local-6989586621679246032"><span class="annot"><span class="annottext">bufGetHash :: ShortByteString -&gt; Int -&gt; Maybe (Hash h a)
</span><a href="#local-6989586621679246032"><span class="hs-identifier hs-var hs-var hs-var hs-var">bufGetHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Int -&gt; Maybe (Hash h a)
forall h a.
HashAlgorithm h =&gt;
ShortByteString -&gt; Int -&gt; Maybe (Hash h a)
</span><a href="../../../../cardano-crypto-class/html/src"><span class="hs-identifier hs-var">Hash.hashFromOffsetBytesShort</span></a></span><span>
</span><span id="line-188"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#bufGetHash"><span class="hs-pragma hs-type">bufGetHash</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-189"></span><span>
</span><span id="line-190"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#AddressBuffer"><span class="hs-identifier hs-type">AddressBuffer</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">BS.ByteString</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-191"></span><span>  </span><span id="local-6989586621679246026"><span class="annot"><span class="annottext">bufLength :: ByteString -&gt; Int
</span><a href="#local-6989586621679246026"><span class="hs-identifier hs-var hs-var hs-var hs-var">bufLength</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Int
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">BS.length</span></a></span><span>
</span><span id="line-192"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#bufLength"><span class="hs-pragma hs-type">bufLength</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-193"></span><span>  </span><span id="local-6989586621679246024"><span class="annot"><span class="annottext">bufUnsafeIndex :: ByteString -&gt; Int -&gt; Word8
</span><a href="#local-6989586621679246024"><span class="hs-identifier hs-var hs-var hs-var hs-var">bufUnsafeIndex</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Int -&gt; Word8
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">BS.unsafeIndex</span></a></span><span>
</span><span id="line-194"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#bufUnsafeIndex"><span class="hs-pragma hs-type">bufUnsafeIndex</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-195"></span><span>  </span><span id="local-6989586621679246023"><span class="annot"><span class="annottext">bufToByteString :: ByteString -&gt; ByteString
</span><a href="#local-6989586621679246023"><span class="hs-identifier hs-var hs-var hs-var hs-var">bufToByteString</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
forall a. a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-196"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#bufToByteString"><span class="hs-pragma hs-type">bufToByteString</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-197"></span><span>  </span><span id="local-6989586621679246021"><span class="annot"><span class="annottext">bufGetHash :: ByteString -&gt; Int -&gt; Maybe (Hash h a)
</span><a href="#local-6989586621679246021"><span class="hs-identifier hs-var hs-var hs-var hs-var">bufGetHash</span></a></span></span><span> </span><span id="local-6989586621679246020"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679246020"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span id="local-6989586621679246019"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679246019"><span class="hs-identifier hs-var">offset</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-198"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; Maybe ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">guard</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679246019"><span class="hs-identifier hs-var">offset</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679246019"><span class="hs-identifier hs-var">offset</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Int
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">BS.length</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679246020"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-199"></span><span>    </span><span class="annot"><span class="annottext">ByteString -&gt; Maybe (Hash h a)
forall h a. HashAlgorithm h =&gt; ByteString -&gt; Maybe (Hash h a)
</span><a href="../../../../cardano-crypto-class/html/src"><span class="hs-identifier hs-var">Hash.hashFromBytes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; ByteString -&gt; ByteString
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">BS.unsafeDrop</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679246019"><span class="hs-identifier hs-var">offset</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679246020"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-200"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#bufGetHash"><span class="hs-pragma hs-type">bufGetHash</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-201"></span><span>
</span><span id="line-202"></span><span class="hs-comment">-- | Address header byte truth table:</span><span>
</span><span id="line-203"></span><span class="hs-keyword">newtype</span><span> </span><span id="Header"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#Header"><span class="hs-identifier hs-var">Header</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Header"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#Header"><span class="hs-identifier hs-var">Header</span></a></span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word8</span></a></span><span>
</span><span id="line-204"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679246011"><span id="local-6989586621679246013"><span class="annot"><span class="annottext">Header -&gt; Header -&gt; Bool
(Header -&gt; Header -&gt; Bool)
-&gt; (Header -&gt; Header -&gt; Bool) -&gt; Eq Header
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Header -&gt; Header -&gt; Bool
$c/= :: Header -&gt; Header -&gt; Bool
== :: Header -&gt; Header -&gt; Bool
$c== :: Header -&gt; Header -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679245996"><span id="local-6989586621679245998"><span id="local-6989586621679246000"><span id="local-6989586621679246002"><span id="local-6989586621679246004"><span id="local-6989586621679246006"><span id="local-6989586621679246008"><span class="annot"><span class="annottext">Eq Header
Eq Header
-&gt; (Header -&gt; Header -&gt; Ordering)
-&gt; (Header -&gt; Header -&gt; Bool)
-&gt; (Header -&gt; Header -&gt; Bool)
-&gt; (Header -&gt; Header -&gt; Bool)
-&gt; (Header -&gt; Header -&gt; Bool)
-&gt; (Header -&gt; Header -&gt; Header)
-&gt; (Header -&gt; Header -&gt; Header)
-&gt; Ord Header
Header -&gt; Header -&gt; Bool
Header -&gt; Header -&gt; Ordering
Header -&gt; Header -&gt; Header
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: Header -&gt; Header -&gt; Header
$cmin :: Header -&gt; Header -&gt; Header
max :: Header -&gt; Header -&gt; Header
$cmax :: Header -&gt; Header -&gt; Header
&gt;= :: Header -&gt; Header -&gt; Bool
$c&gt;= :: Header -&gt; Header -&gt; Bool
&gt; :: Header -&gt; Header -&gt; Bool
$c&gt; :: Header -&gt; Header -&gt; Bool
&lt;= :: Header -&gt; Header -&gt; Bool
$c&lt;= :: Header -&gt; Header -&gt; Bool
&lt; :: Header -&gt; Header -&gt; Bool
$c&lt; :: Header -&gt; Header -&gt; Bool
compare :: Header -&gt; Header -&gt; Ordering
$ccompare :: Header -&gt; Header -&gt; Ordering
$cp1Ord :: Eq Header
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679245951"><span id="local-6989586621679245953"><span id="local-6989586621679245955"><span id="local-6989586621679245957"><span id="local-6989586621679245959"><span id="local-6989586621679245961"><span id="local-6989586621679245963"><span id="local-6989586621679245965"><span id="local-6989586621679245967"><span id="local-6989586621679245969"><span id="local-6989586621679245971"><span id="local-6989586621679245973"><span id="local-6989586621679245975"><span id="local-6989586621679245977"><span id="local-6989586621679245979"><span id="local-6989586621679245981"><span id="local-6989586621679245983"><span id="local-6989586621679245985"><span id="local-6989586621679245987"><span id="local-6989586621679245989"><span id="local-6989586621679245991"><span id="local-6989586621679245993"><span class="annot"><span class="annottext">Eq Header
Header
Eq Header
-&gt; (Header -&gt; Header -&gt; Header)
-&gt; (Header -&gt; Header -&gt; Header)
-&gt; (Header -&gt; Header -&gt; Header)
-&gt; (Header -&gt; Header)
-&gt; (Header -&gt; Int -&gt; Header)
-&gt; (Header -&gt; Int -&gt; Header)
-&gt; Header
-&gt; (Int -&gt; Header)
-&gt; (Header -&gt; Int -&gt; Header)
-&gt; (Header -&gt; Int -&gt; Header)
-&gt; (Header -&gt; Int -&gt; Header)
-&gt; (Header -&gt; Int -&gt; Bool)
-&gt; (Header -&gt; Maybe Int)
-&gt; (Header -&gt; Int)
-&gt; (Header -&gt; Bool)
-&gt; (Header -&gt; Int -&gt; Header)
-&gt; (Header -&gt; Int -&gt; Header)
-&gt; (Header -&gt; Int -&gt; Header)
-&gt; (Header -&gt; Int -&gt; Header)
-&gt; (Header -&gt; Int -&gt; Header)
-&gt; (Header -&gt; Int -&gt; Header)
-&gt; (Header -&gt; Int)
-&gt; Bits Header
Int -&gt; Header
Header -&gt; Bool
Header -&gt; Int
Header -&gt; Maybe Int
Header -&gt; Header
Header -&gt; Int -&gt; Bool
Header -&gt; Int -&gt; Header
Header -&gt; Header -&gt; Header
forall a.
Eq a
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (a -&gt; Int -&gt; a)
-&gt; (a -&gt; Int -&gt; a)
-&gt; a
-&gt; (Int -&gt; a)
-&gt; (a -&gt; Int -&gt; a)
-&gt; (a -&gt; Int -&gt; a)
-&gt; (a -&gt; Int -&gt; a)
-&gt; (a -&gt; Int -&gt; Bool)
-&gt; (a -&gt; Maybe Int)
-&gt; (a -&gt; Int)
-&gt; (a -&gt; Bool)
-&gt; (a -&gt; Int -&gt; a)
-&gt; (a -&gt; Int -&gt; a)
-&gt; (a -&gt; Int -&gt; a)
-&gt; (a -&gt; Int -&gt; a)
-&gt; (a -&gt; Int -&gt; a)
-&gt; (a -&gt; Int -&gt; a)
-&gt; (a -&gt; Int)
-&gt; Bits a
popCount :: Header -&gt; Int
$cpopCount :: Header -&gt; Int
rotateR :: Header -&gt; Int -&gt; Header
$crotateR :: Header -&gt; Int -&gt; Header
rotateL :: Header -&gt; Int -&gt; Header
$crotateL :: Header -&gt; Int -&gt; Header
unsafeShiftR :: Header -&gt; Int -&gt; Header
$cunsafeShiftR :: Header -&gt; Int -&gt; Header
shiftR :: Header -&gt; Int -&gt; Header
$cshiftR :: Header -&gt; Int -&gt; Header
unsafeShiftL :: Header -&gt; Int -&gt; Header
$cunsafeShiftL :: Header -&gt; Int -&gt; Header
shiftL :: Header -&gt; Int -&gt; Header
$cshiftL :: Header -&gt; Int -&gt; Header
isSigned :: Header -&gt; Bool
$cisSigned :: Header -&gt; Bool
bitSize :: Header -&gt; Int
$cbitSize :: Header -&gt; Int
bitSizeMaybe :: Header -&gt; Maybe Int
$cbitSizeMaybe :: Header -&gt; Maybe Int
testBit :: Header -&gt; Int -&gt; Bool
$ctestBit :: Header -&gt; Int -&gt; Bool
complementBit :: Header -&gt; Int -&gt; Header
$ccomplementBit :: Header -&gt; Int -&gt; Header
clearBit :: Header -&gt; Int -&gt; Header
$cclearBit :: Header -&gt; Int -&gt; Header
setBit :: Header -&gt; Int -&gt; Header
$csetBit :: Header -&gt; Int -&gt; Header
bit :: Int -&gt; Header
$cbit :: Int -&gt; Header
zeroBits :: Header
$czeroBits :: Header
rotate :: Header -&gt; Int -&gt; Header
$crotate :: Header -&gt; Int -&gt; Header
shift :: Header -&gt; Int -&gt; Header
$cshift :: Header -&gt; Int -&gt; Header
complement :: Header -&gt; Header
$ccomplement :: Header -&gt; Header
xor :: Header -&gt; Header -&gt; Header
$cxor :: Header -&gt; Header -&gt; Header
.|. :: Header -&gt; Header -&gt; Header
$c.|. :: Header -&gt; Header -&gt; Header
.&amp;. :: Header -&gt; Header -&gt; Header
$c.&amp;. :: Header -&gt; Header -&gt; Header
$cp1Bits :: Eq Header
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Bits</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679245936"><span id="local-6989586621679245938"><span id="local-6989586621679245940"><span id="local-6989586621679245942"><span id="local-6989586621679245944"><span id="local-6989586621679245946"><span id="local-6989586621679245948"><span class="annot"><span class="annottext">Integer -&gt; Header
Header -&gt; Header
Header -&gt; Header -&gt; Header
(Header -&gt; Header -&gt; Header)
-&gt; (Header -&gt; Header -&gt; Header)
-&gt; (Header -&gt; Header -&gt; Header)
-&gt; (Header -&gt; Header)
-&gt; (Header -&gt; Header)
-&gt; (Header -&gt; Header)
-&gt; (Integer -&gt; Header)
-&gt; Num Header
forall a.
(a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (Integer -&gt; a)
-&gt; Num a
fromInteger :: Integer -&gt; Header
$cfromInteger :: Integer -&gt; Header
signum :: Header -&gt; Header
$csignum :: Header -&gt; Header
abs :: Header -&gt; Header
$cabs :: Header -&gt; Header
negate :: Header -&gt; Header
$cnegate :: Header -&gt; Header
* :: Header -&gt; Header -&gt; Header
$c* :: Header -&gt; Header -&gt; Header
- :: Header -&gt; Header -&gt; Header
$c- :: Header -&gt; Header -&gt; Header
+ :: Header -&gt; Header -&gt; Header
$c+ :: Header -&gt; Header -&gt; Header
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Num</span></a></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-205"></span><span>
</span><span id="line-206"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679245930"><span id="local-6989586621679245933"><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#Header"><span class="hs-identifier hs-type">Header</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-207"></span><span>  </span><span id="local-6989586621679245929"><span class="annot"><span class="annottext">show :: Header -&gt; String
</span><a href="#local-6989586621679245929"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#Header"><span class="hs-identifier hs-type">Header</span></a></span><span> </span><span id="local-6989586621679245928"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679245928"><span class="hs-identifier hs-var">header</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;0b&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; (Int -&gt; Char) -&gt; Word8 -&gt; ShowS
forall a. (Integral a, Show a) =&gt; a -&gt; (Int -&gt; Char) -&gt; a -&gt; ShowS
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">showIntAtBase</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Char
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">intToDigit</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679245928"><span class="hs-identifier hs-var">header</span></a></span><span> </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-208"></span><span>
</span><span id="line-209"></span><span class="hs-comment">-- | Every Byron address starts with @[TkListLen 2]@, which encodes as 130 (or 0x80)</span><span>
</span><span id="line-210"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#headerByron"><span class="hs-identifier hs-type">headerByron</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#Header"><span class="hs-identifier hs-type">Header</span></a></span><span>
</span><span id="line-211"></span><span id="headerByron"><span class="annot"><span class="annottext">headerByron :: Header
</span><a href="Cardano.Ledger.CompactAddress.html#headerByron"><span class="hs-identifier hs-var hs-var">headerByron</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Header
</span><span class="hs-number">0b10000010</span></span><span> </span><span class="hs-comment">-- 0x80</span><span>
</span><span id="line-212"></span><span>
</span><span id="line-213"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#isByronAddress"><span class="hs-identifier hs-type">isByronAddress</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#Header"><span class="hs-identifier hs-type">Header</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-214"></span><span id="isByronAddress"><span class="annot"><span class="annottext">isByronAddress :: Header -&gt; Bool
</span><a href="Cardano.Ledger.CompactAddress.html#isByronAddress"><span class="hs-identifier hs-var hs-var">isByronAddress</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Header -&gt; Header -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Header
</span><a href="Cardano.Ledger.CompactAddress.html#headerByron"><span class="hs-identifier hs-var">headerByron</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-215"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#isByronAddress"><span class="hs-pragma hs-type">isByronAddress</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#headerNonShelleyBits"><span class="hs-identifier hs-type">headerNonShelleyBits</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#Header"><span class="hs-identifier hs-type">Header</span></a></span><span>
</span><span id="line-218"></span><span id="headerNonShelleyBits"><span class="annot"><span class="annottext">headerNonShelleyBits :: Header
</span><a href="Cardano.Ledger.CompactAddress.html#headerNonShelleyBits"><span class="hs-identifier hs-var hs-var">headerNonShelleyBits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Header
</span><a href="Cardano.Ledger.CompactAddress.html#headerByron"><span class="hs-identifier hs-var">headerByron</span></a></span><span> </span><span class="annot"><span class="annottext">Header -&gt; Header -&gt; Header
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.|.</span></a></span><span> </span><span class="annot"><span class="annottext">Header
</span><span class="hs-number">0b00001100</span></span><span>
</span><span id="line-219"></span><span>
</span><span id="line-220"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#headerNetworkId"><span class="hs-identifier hs-type">headerNetworkId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#Header"><span class="hs-identifier hs-type">Header</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.BaseTypes.html#Network"><span class="hs-identifier hs-type">Network</span></a></span><span>
</span><span id="line-221"></span><span id="headerNetworkId"><span class="annot"><span class="annottext">headerNetworkId :: Header -&gt; Network
</span><a href="Cardano.Ledger.CompactAddress.html#headerNetworkId"><span class="hs-identifier hs-var hs-var">headerNetworkId</span></a></span></span><span> </span><span id="local-6989586621679245923"><span class="annot"><span class="annottext">Header
</span><a href="#local-6989586621679245923"><span class="hs-identifier hs-var">header</span></a></span></span><span>
</span><span id="line-222"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Header
</span><a href="#local-6989586621679245923"><span class="hs-identifier hs-var">header</span></a></span><span> </span><span class="annot"><span class="annottext">Header -&gt; Int -&gt; Bool
forall a. Bits a =&gt; a -&gt; Int -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`testBit`</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Network
</span><a href="Cardano.Ledger.BaseTypes.html#Mainnet"><span class="hs-identifier hs-var">Mainnet</span></a></span><span>
</span><span id="line-223"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Network
</span><a href="Cardano.Ledger.BaseTypes.html#Testnet"><span class="hs-identifier hs-var">Testnet</span></a></span><span>
</span><span id="line-224"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#headerNetworkId"><span class="hs-pragma hs-type">headerNetworkId</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-225"></span><span>
</span><span id="line-226"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#headerIsPaymentScript"><span class="hs-identifier hs-type">headerIsPaymentScript</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#Header"><span class="hs-identifier hs-type">Header</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-227"></span><span id="headerIsPaymentScript"><span class="annot"><span class="annottext">headerIsPaymentScript :: Header -&gt; Bool
</span><a href="Cardano.Ledger.CompactAddress.html#headerIsPaymentScript"><span class="hs-identifier hs-var hs-var">headerIsPaymentScript</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Header -&gt; Int -&gt; Bool
forall a. Bits a =&gt; a -&gt; Int -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`testBit`</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span class="hs-special">)</span><span>
</span><span id="line-228"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#headerIsPaymentScript"><span class="hs-pragma hs-type">headerIsPaymentScript</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-229"></span><span>
</span><span id="line-230"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#headerIsEnterpriseAddr"><span class="hs-identifier hs-type">headerIsEnterpriseAddr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#Header"><span class="hs-identifier hs-type">Header</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-231"></span><span id="headerIsEnterpriseAddr"><span class="annot"><span class="annottext">headerIsEnterpriseAddr :: Header -&gt; Bool
</span><a href="Cardano.Ledger.CompactAddress.html#headerIsEnterpriseAddr"><span class="hs-identifier hs-var hs-var">headerIsEnterpriseAddr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Header -&gt; Int -&gt; Bool
forall a. Bits a =&gt; a -&gt; Int -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`testBit`</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">5</span></span><span class="hs-special">)</span><span>
</span><span id="line-232"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#headerIsEnterpriseAddr"><span class="hs-pragma hs-type">headerIsEnterpriseAddr</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-233"></span><span>
</span><span id="line-234"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#headerIsStakingScript"><span class="hs-identifier hs-type">headerIsStakingScript</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#Header"><span class="hs-identifier hs-type">Header</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-235"></span><span id="headerIsStakingScript"><span class="annot"><span class="annottext">headerIsStakingScript :: Header -&gt; Bool
</span><a href="Cardano.Ledger.CompactAddress.html#headerIsStakingScript"><span class="hs-identifier hs-var hs-var">headerIsStakingScript</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Header -&gt; Int -&gt; Bool
forall a. Bits a =&gt; a -&gt; Int -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`testBit`</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">5</span></span><span class="hs-special">)</span><span>
</span><span id="line-236"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#headerIsStakingScript"><span class="hs-pragma hs-type">headerIsStakingScript</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-237"></span><span>
</span><span id="line-238"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#headerIsBaseAddress"><span class="hs-identifier hs-type">headerIsBaseAddress</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#Header"><span class="hs-identifier hs-type">Header</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-239"></span><span id="headerIsBaseAddress"><span class="annot"><span class="annottext">headerIsBaseAddress :: Header -&gt; Bool
</span><a href="Cardano.Ledger.CompactAddress.html#headerIsBaseAddress"><span class="hs-identifier hs-var hs-var">headerIsBaseAddress</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">not</span></a></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; (Header -&gt; Bool) -&gt; Header -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Header -&gt; Int -&gt; Bool
forall a. Bits a =&gt; a -&gt; Int -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`testBit`</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">6</span></span><span class="hs-special">)</span><span>
</span><span id="line-240"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#headerIsBaseAddress"><span class="hs-pragma hs-type">headerIsBaseAddress</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-241"></span><span>
</span><span id="line-242"></span><span class="hs-keyword">newtype</span><span> </span><span id="Fail"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#Fail"><span class="hs-identifier hs-var">Fail</span></a></span></span><span> </span><span id="local-6989586621679246392"><span class="annot"><a href="#local-6989586621679246392"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Fail"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#Fail"><span class="hs-identifier hs-var">Fail</span></a></span></span><span> </span><span class="hs-special">{</span><span id="runFail"><span class="annot"><span class="annottext">Fail a -&gt; Either String a
</span><a href="Cardano.Ledger.CompactAddress.html#runFail"><span class="hs-identifier hs-var hs-var">runFail</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246392"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-243"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679245910"><span id="local-6989586621679245912"><span class="annot"><span class="annottext">a -&gt; Fail b -&gt; Fail a
(a -&gt; b) -&gt; Fail a -&gt; Fail b
(forall a b. (a -&gt; b) -&gt; Fail a -&gt; Fail b)
-&gt; (forall a b. a -&gt; Fail b -&gt; Fail a) -&gt; Functor Fail
forall a b. a -&gt; Fail b -&gt; Fail a
forall a b. (a -&gt; b) -&gt; Fail a -&gt; Fail b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
&lt;$ :: a -&gt; Fail b -&gt; Fail a
$c&lt;$ :: forall a b. a -&gt; Fail b -&gt; Fail a
fmap :: (a -&gt; b) -&gt; Fail a -&gt; Fail b
$cfmap :: forall a b. (a -&gt; b) -&gt; Fail a -&gt; Fail b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679245898"><span id="local-6989586621679245900"><span id="local-6989586621679245902"><span id="local-6989586621679245904"><span id="local-6989586621679245906"><span class="annot"><span class="annottext">Functor Fail
a -&gt; Fail a
Functor Fail
-&gt; (forall a. a -&gt; Fail a)
-&gt; (forall a b. Fail (a -&gt; b) -&gt; Fail a -&gt; Fail b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; Fail a -&gt; Fail b -&gt; Fail c)
-&gt; (forall a b. Fail a -&gt; Fail b -&gt; Fail b)
-&gt; (forall a b. Fail a -&gt; Fail b -&gt; Fail a)
-&gt; Applicative Fail
Fail a -&gt; Fail b -&gt; Fail b
Fail a -&gt; Fail b -&gt; Fail a
Fail (a -&gt; b) -&gt; Fail a -&gt; Fail b
(a -&gt; b -&gt; c) -&gt; Fail a -&gt; Fail b -&gt; Fail c
forall a. a -&gt; Fail a
forall a b. Fail a -&gt; Fail b -&gt; Fail a
forall a b. Fail a -&gt; Fail b -&gt; Fail b
forall a b. Fail (a -&gt; b) -&gt; Fail a -&gt; Fail b
forall a b c. (a -&gt; b -&gt; c) -&gt; Fail a -&gt; Fail b -&gt; Fail c
forall (f :: * -&gt; *).
Functor f
-&gt; (forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
&lt;* :: Fail a -&gt; Fail b -&gt; Fail a
$c&lt;* :: forall a b. Fail a -&gt; Fail b -&gt; Fail a
*&gt; :: Fail a -&gt; Fail b -&gt; Fail b
$c*&gt; :: forall a b. Fail a -&gt; Fail b -&gt; Fail b
liftA2 :: (a -&gt; b -&gt; c) -&gt; Fail a -&gt; Fail b -&gt; Fail c
$cliftA2 :: forall a b c. (a -&gt; b -&gt; c) -&gt; Fail a -&gt; Fail b -&gt; Fail c
&lt;*&gt; :: Fail (a -&gt; b) -&gt; Fail a -&gt; Fail b
$c&lt;*&gt; :: forall a b. Fail (a -&gt; b) -&gt; Fail a -&gt; Fail b
pure :: a -&gt; Fail a
$cpure :: forall a. a -&gt; Fail a
$cp1Applicative :: Functor Fail
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></a></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679245890"><span id="local-6989586621679245892"><span id="local-6989586621679245894"><span class="annot"><span class="annottext">Applicative Fail
a -&gt; Fail a
Applicative Fail
-&gt; (forall a b. Fail a -&gt; (a -&gt; Fail b) -&gt; Fail b)
-&gt; (forall a b. Fail a -&gt; Fail b -&gt; Fail b)
-&gt; (forall a. a -&gt; Fail a)
-&gt; Monad Fail
Fail a -&gt; (a -&gt; Fail b) -&gt; Fail b
Fail a -&gt; Fail b -&gt; Fail b
forall a. a -&gt; Fail a
forall a b. Fail a -&gt; Fail b -&gt; Fail b
forall a b. Fail a -&gt; (a -&gt; Fail b) -&gt; Fail b
forall (m :: * -&gt; *).
Applicative m
-&gt; (forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
return :: a -&gt; Fail a
$creturn :: forall a. a -&gt; Fail a
&gt;&gt; :: Fail a -&gt; Fail b -&gt; Fail b
$c&gt;&gt; :: forall a b. Fail a -&gt; Fail b -&gt; Fail b
&gt;&gt;= :: Fail a -&gt; (a -&gt; Fail b) -&gt; Fail b
$c&gt;&gt;= :: forall a b. Fail a -&gt; (a -&gt; Fail b) -&gt; Fail b
$cp1Monad :: Applicative Fail
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-244"></span><span>
</span><span id="line-245"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadFail</span></a></span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#Fail"><span class="hs-identifier hs-type">Fail</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-246"></span><span>  </span><span id="local-6989586621679245885"><span class="annot"><span class="annottext">fail :: String -&gt; Fail a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">fail</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Either String a -&gt; Fail a
forall a. Either String a -&gt; Fail a
</span><a href="Cardano.Ledger.CompactAddress.html#Fail"><span class="hs-identifier hs-var">Fail</span></a></span><span> </span><span class="annot"><span class="annottext">(Either String a -&gt; Fail a)
-&gt; (String -&gt; Either String a) -&gt; String -&gt; Fail a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Either String a
forall a b. a -&gt; Either a b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Left</span></a></span><span>
</span><span id="line-247"></span><span>
</span><span id="line-248"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodeAddrEither"><span class="hs-identifier hs-type">decodeAddrEither</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-249"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679245884"><span class="annot"><a href="#local-6989586621679245884"><span class="hs-identifier hs-type">crypto</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-250"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679245884"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-251"></span><span>  </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">BS.ByteString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-252"></span><span>  </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Address.html#Addr"><span class="hs-identifier hs-type">Addr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679245884"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-253"></span><span id="decodeAddrEither"><span class="annot"><span class="annottext">decodeAddrEither :: ByteString -&gt; Either String (Addr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#decodeAddrEither"><span class="hs-identifier hs-var hs-var">decodeAddrEither</span></a></span></span><span> </span><span id="local-6989586621679245883"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679245883"><span class="hs-identifier hs-var">sbs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fail (Addr crypto) -&gt; Either String (Addr crypto)
forall a. Fail a -&gt; Either String a
</span><a href="Cardano.Ledger.CompactAddress.html#runFail"><span class="hs-identifier hs-var hs-var">runFail</span></a></span><span> </span><span class="annot"><span class="annottext">(Fail (Addr crypto) -&gt; Either String (Addr crypto))
-&gt; Fail (Addr crypto) -&gt; Either String (Addr crypto)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">StateT Int Fail (Addr crypto) -&gt; Int -&gt; Fail (Addr crypto)
forall (m :: * -&gt; *) s a. Monad m =&gt; StateT s m a -&gt; s -&gt; m a
</span><a href="../../../../transformers/html/src"><span class="hs-identifier hs-var">evalStateT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; StateT Int Fail (Addr crypto)
forall crypto (m :: * -&gt; *) b.
(Crypto crypto, MonadFail m, AddressBuffer b) =&gt;
b -&gt; StateT Int m (Addr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#decodeAddrStateT"><span class="hs-identifier hs-var">decodeAddrStateT</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679245883"><span class="hs-identifier hs-var">sbs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-254"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodeAddrEither"><span class="hs-pragma hs-type">decodeAddrEither</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-255"></span><span>
</span><span id="line-256"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodeAddrShortEither"><span class="hs-identifier hs-type">decodeAddrShortEither</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-257"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679246456"><span class="annot"><a href="#local-6989586621679246456"><span class="hs-identifier hs-type">crypto</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-258"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246456"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-259"></span><span>  </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">ShortByteString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-260"></span><span>  </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Address.html#Addr"><span class="hs-identifier hs-type">Addr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246456"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-261"></span><span id="decodeAddrShortEither"><span class="annot"><span class="annottext">decodeAddrShortEither :: ShortByteString -&gt; Either String (Addr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#decodeAddrShortEither"><span class="hs-identifier hs-var hs-var">decodeAddrShortEither</span></a></span></span><span> </span><span id="local-6989586621679245881"><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245881"><span class="hs-identifier hs-var">sbs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fail (Addr crypto) -&gt; Either String (Addr crypto)
forall a. Fail a -&gt; Either String a
</span><a href="Cardano.Ledger.CompactAddress.html#runFail"><span class="hs-identifier hs-var hs-var">runFail</span></a></span><span> </span><span class="annot"><span class="annottext">(Fail (Addr crypto) -&gt; Either String (Addr crypto))
-&gt; Fail (Addr crypto) -&gt; Either String (Addr crypto)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">StateT Int Fail (Addr crypto) -&gt; Int -&gt; Fail (Addr crypto)
forall (m :: * -&gt; *) s a. Monad m =&gt; StateT s m a -&gt; s -&gt; m a
</span><a href="../../../../transformers/html/src"><span class="hs-identifier hs-var">evalStateT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShortByteString -&gt; StateT Int Fail (Addr crypto)
forall crypto (m :: * -&gt; *) b.
(Crypto crypto, MonadFail m, AddressBuffer b) =&gt;
b -&gt; StateT Int m (Addr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#decodeAddrStateT"><span class="hs-identifier hs-var">decodeAddrStateT</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245881"><span class="hs-identifier hs-var">sbs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-262"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodeAddrShortEither"><span class="hs-pragma hs-type">decodeAddrShortEither</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-263"></span><span>
</span><span id="line-264"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodeAddrShort"><span class="hs-identifier hs-type">decodeAddrShort</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-265"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679246511"><span class="annot"><a href="#local-6989586621679246511"><span class="hs-identifier hs-type">crypto</span></a></span></span><span> </span><span id="local-6989586621679246510"><span class="annot"><a href="#local-6989586621679246510"><span class="hs-identifier hs-type">m</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-266"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246511"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadFail</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246510"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-267"></span><span>  </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">ShortByteString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-268"></span><span>  </span><span class="annot"><a href="#local-6989586621679246510"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Address.html#Addr"><span class="hs-identifier hs-type">Addr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246511"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-269"></span><span id="decodeAddrShort"><span class="annot"><span class="annottext">decodeAddrShort :: ShortByteString -&gt; m (Addr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#decodeAddrShort"><span class="hs-identifier hs-var hs-var">decodeAddrShort</span></a></span></span><span> </span><span id="local-6989586621679245880"><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245880"><span class="hs-identifier hs-var">sbs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StateT Int m (Addr crypto) -&gt; Int -&gt; m (Addr crypto)
forall (m :: * -&gt; *) s a. Monad m =&gt; StateT s m a -&gt; s -&gt; m a
</span><a href="../../../../transformers/html/src"><span class="hs-identifier hs-var">evalStateT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShortByteString -&gt; StateT Int m (Addr crypto)
forall crypto (m :: * -&gt; *) b.
(Crypto crypto, MonadFail m, AddressBuffer b) =&gt;
b -&gt; StateT Int m (Addr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#decodeAddrStateT"><span class="hs-identifier hs-var">decodeAddrStateT</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245880"><span class="hs-identifier hs-var">sbs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-270"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodeAddrShort"><span class="hs-pragma hs-type">decodeAddrShort</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-271"></span><span>
</span><span id="line-272"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodeAddr"><span class="hs-identifier hs-type">decodeAddr</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-273"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679245879"><span class="annot"><a href="#local-6989586621679245879"><span class="hs-identifier hs-type">crypto</span></a></span></span><span> </span><span id="local-6989586621679245878"><span class="annot"><a href="#local-6989586621679245878"><span class="hs-identifier hs-type">m</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-274"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679245879"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadFail</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679245878"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-275"></span><span>  </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">BS.ByteString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-276"></span><span>  </span><span class="annot"><a href="#local-6989586621679245878"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Address.html#Addr"><span class="hs-identifier hs-type">Addr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679245879"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-277"></span><span id="decodeAddr"><span class="annot"><span class="annottext">decodeAddr :: ByteString -&gt; m (Addr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#decodeAddr"><span class="hs-identifier hs-var hs-var">decodeAddr</span></a></span></span><span> </span><span id="local-6989586621679245877"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679245877"><span class="hs-identifier hs-var">sbs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StateT Int m (Addr crypto) -&gt; Int -&gt; m (Addr crypto)
forall (m :: * -&gt; *) s a. Monad m =&gt; StateT s m a -&gt; s -&gt; m a
</span><a href="../../../../transformers/html/src"><span class="hs-identifier hs-var">evalStateT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; StateT Int m (Addr crypto)
forall crypto (m :: * -&gt; *) b.
(Crypto crypto, MonadFail m, AddressBuffer b) =&gt;
b -&gt; StateT Int m (Addr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#decodeAddrStateT"><span class="hs-identifier hs-var">decodeAddrStateT</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679245877"><span class="hs-identifier hs-var">sbs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-278"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodeAddr"><span class="hs-pragma hs-type">decodeAddr</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-279"></span><span>
</span><span id="line-280"></span><span class="hs-comment">-- | While decoding an Addr the header (the first byte in the buffer) is</span><span>
</span><span id="line-281"></span><span class="hs-comment">-- expected to be in a certain format. Here are the meaning of all the bits:</span><span>
</span><span id="line-282"></span><span class="hs-comment">--</span><span>
</span><span id="line-283"></span><span class="hs-comment">-- @@@</span><span>
</span><span id="line-284"></span><span class="hs-comment">--</span><span>
</span><span id="line-285"></span><span class="hs-comment">-- &#9487;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9523;&#9473;&#9519;&#9473;&#9519;&#9473;&#9519;&#9473;&#9519;&#9473;&#9519;&#9473;&#9519;&#9473;&#9519;&#9473;&#9491;</span><span>
</span><span id="line-286"></span><span class="hs-comment">-- &#9475;  Byron Address &#9475;1&#9482;0&#9482;0&#9482;0&#9482;0&#9482;0&#9482;1&#9482;0&#9475;</span><span>
</span><span id="line-287"></span><span class="hs-comment">-- &#9507;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9547;&#9473;&#9535;&#9473;&#9535;&#9473;&#9535;&#9473;&#9535;&#9473;&#9535;&#9473;&#9535;&#9473;&#9535;&#9473;&#9515;</span><span>
</span><span id="line-288"></span><span class="hs-comment">-- &#9475;Shelley Address &#9475;0&#9482;x&#9482;x&#9482;x&#9482;0&#9482;0&#9482;0&#9482;x&#9475;</span><span>
</span><span id="line-289"></span><span class="hs-comment">-- &#9495;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9547;&#9473;&#9535;&#9473;&#9535;&#9473;&#9535;&#9473;&#9535;&#9473;&#9535;&#9473;&#9535;&#9473;&#9535;&#9473;&#9547;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9491;</span><span>
</span><span id="line-290"></span><span class="hs-comment">--                  &#9475;0&#9482;0&#9482;0&#9482;0&#9482;0&#9482;0&#9482;0&#9482;0&#9475; Testnet PaymentKey    StakingKey    &#9475;</span><span>
</span><span id="line-291"></span><span class="hs-comment">--                  &#9475;0&#9482;0&#9482;0&#9482;0&#9482;0&#9482;0&#9482;0&#9482;1&#9475; Mainnet PaymentKey    StakingKey    &#9475;</span><span>
</span><span id="line-292"></span><span class="hs-comment">--                  &#9475;0&#9482;0&#9482;0&#9482;1&#9482;0&#9482;0&#9482;0&#9482;0&#9475; Testnet PaymentScript StakingKey    &#9475;</span><span>
</span><span id="line-293"></span><span class="hs-comment">--                  &#9475;0&#9482;0&#9482;0&#9482;1&#9482;0&#9482;0&#9482;0&#9482;1&#9475; Mainnet PaymentScript StakingKey    &#9475;</span><span>
</span><span id="line-294"></span><span class="hs-comment">--                  &#9475;0&#9482;0&#9482;1&#9482;0&#9482;0&#9482;0&#9482;0&#9482;0&#9475; Testnet PaymentKey    StakingScript &#9475;</span><span>
</span><span id="line-295"></span><span class="hs-comment">--                  &#9475;0&#9482;0&#9482;1&#9482;0&#9482;0&#9482;0&#9482;0&#9482;1&#9475; Mainnet PaymentKey    StakingScript &#9475;</span><span>
</span><span id="line-296"></span><span class="hs-comment">--                  &#9475;0&#9482;0&#9482;1&#9482;1&#9482;0&#9482;0&#9482;0&#9482;0&#9475; Testnet PaymentScript StakingScript &#9475;</span><span>
</span><span id="line-297"></span><span class="hs-comment">--                  &#9475;0&#9482;0&#9482;1&#9482;1&#9482;0&#9482;0&#9482;0&#9482;1&#9475; Mainnet PaymentScript StakingScript &#9475;</span><span>
</span><span id="line-298"></span><span class="hs-comment">--                  &#9475;0&#9482;1&#9482;0&#9482;0&#9482;0&#9482;0&#9482;0&#9482;0&#9475; Testnet PaymentKey    StakingPtr    &#9475;</span><span>
</span><span id="line-299"></span><span class="hs-comment">--                  &#9475;0&#9482;1&#9482;0&#9482;0&#9482;0&#9482;0&#9482;0&#9482;1&#9475; Mainnet PaymentKey    StakingPtr    &#9475;</span><span>
</span><span id="line-300"></span><span class="hs-comment">--                  &#9475;0&#9482;1&#9482;0&#9482;1&#9482;0&#9482;0&#9482;0&#9482;0&#9475; Testnet PaymentScript StakingPtr    &#9475;</span><span>
</span><span id="line-301"></span><span class="hs-comment">--                  &#9475;0&#9482;1&#9482;0&#9482;1&#9482;0&#9482;0&#9482;0&#9482;1&#9475; Mainnet PaymentScript StakingPtr    &#9475;</span><span>
</span><span id="line-302"></span><span class="hs-comment">--                  &#9475;0&#9482;1&#9482;1&#9482;0&#9482;0&#9482;0&#9482;0&#9482;0&#9475; Testnet PaymentKey    StakingNull   &#9475;</span><span>
</span><span id="line-303"></span><span class="hs-comment">--                  &#9475;0&#9482;1&#9482;1&#9482;0&#9482;0&#9482;0&#9482;0&#9482;1&#9475; Mainnet PaymentKey    StakingNull   &#9475;</span><span>
</span><span id="line-304"></span><span class="hs-comment">--                  &#9475;0&#9482;1&#9482;1&#9482;1&#9482;0&#9482;0&#9482;0&#9482;0&#9475; Testnet PaymentScript StakingNull   &#9475;</span><span>
</span><span id="line-305"></span><span class="hs-comment">--                  &#9475;0&#9482;1&#9482;1&#9482;1&#9482;0&#9482;0&#9482;0&#9482;1&#9475; Mainnet PaymentScript StakingNull   &#9475;</span><span>
</span><span id="line-306"></span><span class="hs-comment">--                  &#9495;&#9473;&#9527;&#9473;&#9527;&#9473;&#9527;&#9473;&#9527;&#9473;&#9527;&#9473;&#9527;&#9473;&#9527;&#9473;&#9531;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9499;</span><span>
</span><span id="line-307"></span><span class="hs-comment">--                      \ \ \       \</span><span>
</span><span id="line-308"></span><span class="hs-comment">--                       \ \ \       `Is Mainnet Address</span><span>
</span><span id="line-309"></span><span class="hs-comment">--                        \ \ `Payment Credential is a Script</span><span>
</span><span id="line-310"></span><span class="hs-comment">--                         \ `Staking Credential is a Script / No Staking Credential</span><span>
</span><span id="line-311"></span><span class="hs-comment">--                          `Not a Base Address</span><span>
</span><span id="line-312"></span><span class="hs-comment">-- @@@</span><span>
</span><span id="line-313"></span><span id="local-6989586621679246382"><span id="local-6989586621679246383"><span id="local-6989586621679246384"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodeAddrStateT"><span class="hs-identifier hs-type">decodeAddrStateT</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-314"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246384"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadFail</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246383"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#AddressBuffer"><span class="hs-identifier hs-type">AddressBuffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246382"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-315"></span><span>  </span><span class="annot"><a href="#local-6989586621679246382"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-316"></span><span>  </span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier hs-type">StateT</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246383"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Address.html#Addr"><span class="hs-identifier hs-type">Addr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246384"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-317"></span><span id="decodeAddrStateT"><span class="annot"><span class="annottext">decodeAddrStateT :: b -&gt; StateT Int m (Addr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#decodeAddrStateT"><span class="hs-identifier hs-var hs-var">decodeAddrStateT</span></a></span></span><span> </span><span id="local-6989586621679245876"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245876"><span class="hs-identifier hs-var">buf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-318"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; b -&gt; StateT Int m ()
forall (m :: * -&gt; *) b.
(MonadFail m, AddressBuffer b) =&gt;
String -&gt; Int -&gt; b -&gt; StateT Int m ()
</span><a href="Cardano.Ledger.CompactAddress.html#guardLength"><span class="hs-identifier hs-var">guardLength</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Header&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245876"><span class="hs-identifier hs-var">buf</span></a></span><span>
</span><span id="line-319"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679245874"><span class="annot"><span class="annottext">header :: Header
</span><a href="#local-6989586621679245874"><span class="hs-identifier hs-var hs-var">header</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Header
</span><a href="Cardano.Ledger.CompactAddress.html#Header"><span class="hs-identifier hs-var">Header</span></a></span><span> </span><span class="annot"><span class="annottext">(Word8 -&gt; Header) -&gt; Word8 -&gt; Header
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; Int -&gt; Word8
forall b. AddressBuffer b =&gt; b -&gt; Int -&gt; Word8
</span><a href="Cardano.Ledger.CompactAddress.html#bufUnsafeIndex"><span class="hs-identifier hs-var">bufUnsafeIndex</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245876"><span class="hs-identifier hs-var">buf</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-320"></span><span>  </span><span id="local-6989586621679245873"><span class="annot"><span class="annottext">Addr crypto
</span><a href="#local-6989586621679245873"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-321"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Header -&gt; Bool
</span><a href="Cardano.Ledger.CompactAddress.html#isByronAddress"><span class="hs-identifier hs-var">isByronAddress</span></a></span><span> </span><span class="annot"><span class="annottext">Header
</span><a href="#local-6989586621679245874"><span class="hs-identifier hs-var">header</span></a></span><span>
</span><span id="line-322"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">BootstrapAddress crypto -&gt; Addr crypto
forall crypto. BootstrapAddress crypto -&gt; Addr crypto
</span><a href="Cardano.Ledger.Address.html#AddrBootstrap"><span class="hs-identifier hs-var">AddrBootstrap</span></a></span><span> </span><span class="annot"><span class="annottext">(BootstrapAddress crypto -&gt; Addr crypto)
-&gt; StateT Int m (BootstrapAddress crypto)
-&gt; StateT Int m (Addr crypto)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; StateT Int m (BootstrapAddress crypto)
forall crypto (m :: * -&gt; *) b.
(MonadFail m, AddressBuffer b) =&gt;
b -&gt; StateT Int m (BootstrapAddress crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#decodeBootstrapAddress"><span class="hs-identifier hs-var">decodeBootstrapAddress</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245876"><span class="hs-identifier hs-var">buf</span></a></span><span>
</span><span id="line-323"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-324"></span><span>        </span><span class="hs-comment">-- Ensure there are no unexpected bytes in the header</span><span>
</span><span id="line-325"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; StateT Int m () -&gt; StateT Int m ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Header
</span><a href="#local-6989586621679245874"><span class="hs-identifier hs-var">header</span></a></span><span> </span><span class="annot"><span class="annottext">Header -&gt; Header -&gt; Header
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.&amp;.</span></a></span><span> </span><span class="annot"><span class="annottext">Header
</span><a href="Cardano.Ledger.CompactAddress.html#headerNonShelleyBits"><span class="hs-identifier hs-var">headerNonShelleyBits</span></a></span><span> </span><span class="annot"><span class="annottext">Header -&gt; Header -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Header
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(StateT Int m () -&gt; StateT Int m ())
-&gt; StateT Int m () -&gt; StateT Int m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-326"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; String -&gt; StateT Int m ()
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; String -&gt; m a
</span><a href="Cardano.Ledger.CompactAddress.html#failDecoding"><span class="hs-identifier hs-var">failDecoding</span></a></span><span>
</span><span id="line-327"></span><span>            </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Shelley Address&quot;</span></span><span>
</span><span id="line-328"></span><span>            </span><span class="annot"><span class="annottext">(String -&gt; StateT Int m ()) -&gt; String -&gt; StateT Int m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Invalid header. Unused bits are not suppose to be set: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Header -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Header
</span><a href="#local-6989586621679245874"><span class="hs-identifier hs-var">header</span></a></span><span>
</span><span id="line-329"></span><span>        </span><span class="hs-comment">-- Advance one byte for the consumed header</span><span>
</span><span id="line-330"></span><span>        </span><span class="annot"><span class="annottext">(Int -&gt; Int) -&gt; StateT Int m ()
forall (m :: * -&gt; *) s. Monad m =&gt; (s -&gt; s) -&gt; StateT s m ()
</span><a href="../../../../transformers/html/src"><span class="hs-identifier hs-var">modify'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-331"></span><span>        </span><span id="local-6989586621679245867"><span class="annot"><span class="annottext">PaymentCredential crypto
</span><a href="#local-6989586621679245867"><span class="hs-identifier hs-var">payment</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Header -&gt; b -&gt; StateT Int m (PaymentCredential crypto)
forall crypto (m :: * -&gt; *) b.
(Crypto crypto, MonadFail m, AddressBuffer b) =&gt;
Header -&gt; b -&gt; StateT Int m (PaymentCredential crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#decodePaymentCredential"><span class="hs-identifier hs-var">decodePaymentCredential</span></a></span><span> </span><span class="annot"><span class="annottext">Header
</span><a href="#local-6989586621679245874"><span class="hs-identifier hs-var">header</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245876"><span class="hs-identifier hs-var">buf</span></a></span><span>
</span><span id="line-332"></span><span>        </span><span id="local-6989586621679245865"><span class="annot"><span class="annottext">StakeReference crypto
</span><a href="#local-6989586621679245865"><span class="hs-identifier hs-var">staking</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Header -&gt; b -&gt; StateT Int m (StakeReference crypto)
forall crypto (m :: * -&gt; *) b.
(Crypto crypto, MonadFail m, AddressBuffer b) =&gt;
Header -&gt; b -&gt; StateT Int m (StakeReference crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#decodeStakeReference"><span class="hs-identifier hs-var">decodeStakeReference</span></a></span><span> </span><span class="annot"><span class="annottext">Header
</span><a href="#local-6989586621679245874"><span class="hs-identifier hs-var">header</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245876"><span class="hs-identifier hs-var">buf</span></a></span><span>
</span><span id="line-333"></span><span>        </span><span class="annot"><span class="annottext">Addr crypto -&gt; StateT Int m (Addr crypto)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Addr crypto -&gt; StateT Int m (Addr crypto))
-&gt; Addr crypto -&gt; StateT Int m (Addr crypto)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Network
-&gt; PaymentCredential crypto -&gt; StakeReference crypto -&gt; Addr crypto
forall crypto.
Network
-&gt; PaymentCredential crypto -&gt; StakeReference crypto -&gt; Addr crypto
</span><a href="Cardano.Ledger.Address.html#Addr"><span class="hs-identifier hs-var">Addr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Header -&gt; Network
</span><a href="Cardano.Ledger.CompactAddress.html#headerNetworkId"><span class="hs-identifier hs-var">headerNetworkId</span></a></span><span> </span><span class="annot"><span class="annottext">Header
</span><a href="#local-6989586621679245874"><span class="hs-identifier hs-var">header</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PaymentCredential crypto
</span><a href="#local-6989586621679245867"><span class="hs-identifier hs-var">payment</span></a></span><span> </span><span class="annot"><span class="annottext">StakeReference crypto
</span><a href="#local-6989586621679245865"><span class="hs-identifier hs-var">staking</span></a></span><span>
</span><span id="line-334"></span><span>  </span><span class="annot"><span class="annottext">Addr crypto
</span><a href="#local-6989586621679245873"><span class="hs-identifier hs-var">addr</span></a></span><span> </span><span class="annot"><span class="annottext">Addr crypto -&gt; StateT Int m () -&gt; StateT Int m (Addr crypto)
forall (f :: * -&gt; *) a b. Functor f =&gt; a -&gt; f b -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; b -&gt; StateT Int m ()
forall (m :: * -&gt; *) b.
(MonadFail m, AddressBuffer b) =&gt;
String -&gt; b -&gt; StateT Int m ()
</span><a href="Cardano.Ledger.CompactAddress.html#ensureBufIsConsumed"><span class="hs-identifier hs-var">ensureBufIsConsumed</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Addr&quot;</span></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245876"><span class="hs-identifier hs-var">buf</span></a></span><span>
</span><span id="line-335"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodeAddrStateT"><span class="hs-pragma hs-type">decodeAddrStateT</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-336"></span><span>
</span><span id="line-337"></span><span class="hs-comment">-- | Checks that the current offset is exactly at the end of the buffer.</span><span>
</span><span id="line-338"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#ensureBufIsConsumed"><span class="hs-identifier hs-type">ensureBufIsConsumed</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-339"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679246350"><span class="annot"><a href="#local-6989586621679246350"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679246349"><span class="annot"><a href="#local-6989586621679246349"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-340"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadFail</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246350"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#AddressBuffer"><span class="hs-identifier hs-type">AddressBuffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246349"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-341"></span><span>  </span><span class="hs-comment">-- | Name for error reporting</span><span>
</span><span id="line-342"></span><span>  </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-343"></span><span>  </span><span class="hs-comment">-- | Buffer that should have been consumed.</span><span>
</span><span id="line-344"></span><span>  </span><span class="annot"><a href="#local-6989586621679246349"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-345"></span><span>  </span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier hs-type">StateT</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246350"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-346"></span><span id="ensureBufIsConsumed"><span class="annot"><span class="annottext">ensureBufIsConsumed :: String -&gt; b -&gt; StateT Int m ()
</span><a href="Cardano.Ledger.CompactAddress.html#ensureBufIsConsumed"><span class="hs-identifier hs-var hs-var">ensureBufIsConsumed</span></a></span></span><span> </span><span id="local-6989586621679245861"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679245861"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679245860"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245860"><span class="hs-identifier hs-var">buf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-347"></span><span>  </span><span id="local-6989586621679245859"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245859"><span class="hs-identifier hs-var">lastOffset</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StateT Int m Int
forall (m :: * -&gt; *) s. Monad m =&gt; StateT s m s
</span><a href="../../../../transformers/html/src"><span class="hs-identifier hs-var">get</span></a></span><span>
</span><span id="line-348"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679245858"><span class="annot"><span class="annottext">len :: Int
</span><a href="#local-6989586621679245858"><span class="hs-identifier hs-var hs-var">len</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">b -&gt; Int
forall b. AddressBuffer b =&gt; b -&gt; Int
</span><a href="Cardano.Ledger.CompactAddress.html#bufLength"><span class="hs-identifier hs-var">bufLength</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245860"><span class="hs-identifier hs-var">buf</span></a></span><span>
</span><span id="line-349"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; StateT Int m () -&gt; StateT Int m ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245859"><span class="hs-identifier hs-var">lastOffset</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245858"><span class="hs-identifier hs-var">len</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(StateT Int m () -&gt; StateT Int m ())
-&gt; StateT Int m () -&gt; StateT Int m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-350"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; String -&gt; StateT Int m ()
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; String -&gt; m a
</span><a href="Cardano.Ledger.CompactAddress.html#failDecoding"><span class="hs-identifier hs-var">failDecoding</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679245861"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; StateT Int m ()) -&gt; String -&gt; StateT Int m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Left over bytes: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245858"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245859"><span class="hs-identifier hs-var">lastOffset</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-351"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#ensureBufIsConsumed"><span class="hs-pragma hs-type">ensureBufIsConsumed</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-352"></span><span>
</span><span id="line-353"></span><span class="hs-comment">-- | This decoder assumes the whole `ShortByteString` is occupied by the `BootstrapAddress`</span><span>
</span><span id="line-354"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodeBootstrapAddress"><span class="hs-identifier hs-type">decodeBootstrapAddress</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-355"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679246364"><span class="annot"><a href="#local-6989586621679246364"><span class="hs-identifier hs-type">crypto</span></a></span></span><span> </span><span id="local-6989586621679246366"><span class="annot"><a href="#local-6989586621679246366"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679246365"><span class="annot"><a href="#local-6989586621679246365"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-356"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadFail</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246366"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#AddressBuffer"><span class="hs-identifier hs-type">AddressBuffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246365"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-357"></span><span>  </span><span class="annot"><a href="#local-6989586621679246365"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-358"></span><span>  </span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier hs-type">StateT</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246366"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Address.html#BootstrapAddress"><span class="hs-identifier hs-type">BootstrapAddress</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246364"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-359"></span><span id="decodeBootstrapAddress"><span class="annot"><span class="annottext">decodeBootstrapAddress :: b -&gt; StateT Int m (BootstrapAddress crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#decodeBootstrapAddress"><span class="hs-identifier hs-var hs-var">decodeBootstrapAddress</span></a></span></span><span> </span><span id="local-6989586621679245857"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245857"><span class="hs-identifier hs-var">buf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-360"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either DecoderError Address
forall a. FromCBOR a =&gt; ByteString -&gt; Either DecoderError a
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">decodeFull'</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Either DecoderError Address)
-&gt; ByteString -&gt; Either DecoderError Address
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; ByteString
forall b. AddressBuffer b =&gt; b -&gt; ByteString
</span><a href="Cardano.Ledger.CompactAddress.html#bufToByteString"><span class="hs-identifier hs-var">bufToByteString</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245857"><span class="hs-identifier hs-var">buf</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-361"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621679245856"><span class="annot"><span class="annottext">DecoderError
</span><a href="#local-6989586621679245856"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; StateT Int m (BootstrapAddress crypto)
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fail</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; StateT Int m (BootstrapAddress crypto))
-&gt; String -&gt; StateT Int m (BootstrapAddress crypto)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">DecoderError -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">DecoderError
</span><a href="#local-6989586621679245856"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-362"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621679245855"><span class="annot"><span class="annottext">Address
</span><a href="#local-6989586621679245855"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Address -&gt; BootstrapAddress crypto
forall crypto. Address -&gt; BootstrapAddress crypto
</span><a href="Cardano.Ledger.Address.html#BootstrapAddress"><span class="hs-identifier hs-var">BootstrapAddress</span></a></span><span> </span><span class="annot"><span class="annottext">Address
</span><a href="#local-6989586621679245855"><span class="hs-identifier hs-var">addr</span></a></span><span> </span><span class="annot"><span class="annottext">BootstrapAddress crypto
-&gt; StateT Int m () -&gt; StateT Int m (BootstrapAddress crypto)
forall (f :: * -&gt; *) a b. Functor f =&gt; a -&gt; f b -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Int) -&gt; StateT Int m ()
forall (m :: * -&gt; *) s. Monad m =&gt; (s -&gt; s) -&gt; StateT s m ()
</span><a href="../../../../transformers/html/src"><span class="hs-identifier hs-var">modify'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; Int
forall b. AddressBuffer b =&gt; b -&gt; Int
</span><a href="Cardano.Ledger.CompactAddress.html#bufLength"><span class="hs-identifier hs-var">bufLength</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245857"><span class="hs-identifier hs-var">buf</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-363"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodeBootstrapAddress"><span class="hs-pragma hs-type">decodeBootstrapAddress</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-364"></span><span>
</span><span id="line-365"></span><span id="local-6989586621679246355"><span id="local-6989586621679246356"><span id="local-6989586621679246357"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodePaymentCredential"><span class="hs-identifier hs-type">decodePaymentCredential</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-366"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246357"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadFail</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246356"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#AddressBuffer"><span class="hs-identifier hs-type">AddressBuffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246355"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-367"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#Header"><span class="hs-identifier hs-type">Header</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-368"></span><span>  </span><span class="annot"><a href="#local-6989586621679246355"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-369"></span><span>  </span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier hs-type">StateT</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246356"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#PaymentCredential"><span class="hs-identifier hs-type">PaymentCredential</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246357"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-370"></span><span id="decodePaymentCredential"><span class="annot"><span class="annottext">decodePaymentCredential :: Header -&gt; b -&gt; StateT Int m (PaymentCredential crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#decodePaymentCredential"><span class="hs-identifier hs-var hs-var">decodePaymentCredential</span></a></span></span><span> </span><span id="local-6989586621679245853"><span class="annot"><span class="annottext">Header
</span><a href="#local-6989586621679245853"><span class="hs-identifier hs-var">header</span></a></span></span><span> </span><span id="local-6989586621679245852"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245852"><span class="hs-identifier hs-var">buf</span></a></span></span><span>
</span><span id="line-371"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Header -&gt; Bool
</span><a href="Cardano.Ledger.CompactAddress.html#headerIsPaymentScript"><span class="hs-identifier hs-var">headerIsPaymentScript</span></a></span><span> </span><span class="annot"><span class="annottext">Header
</span><a href="#local-6989586621679245853"><span class="hs-identifier hs-var">header</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScriptHash crypto -&gt; PaymentCredential crypto
forall (kr :: KeyRole) crypto.
ScriptHash crypto -&gt; Credential kr crypto
</span><a href="Cardano.Ledger.Credential.html#ScriptHashObj"><span class="hs-identifier hs-var">ScriptHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">(ScriptHash crypto -&gt; PaymentCredential crypto)
-&gt; StateT Int m (ScriptHash crypto)
-&gt; StateT Int m (PaymentCredential crypto)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; StateT Int m (ScriptHash crypto)
forall crypto (m :: * -&gt; *) b.
(Crypto crypto, MonadFail m, AddressBuffer b) =&gt;
b -&gt; StateT Int m (ScriptHash crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#decodeScriptHash"><span class="hs-identifier hs-var">decodeScriptHash</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245852"><span class="hs-identifier hs-var">buf</span></a></span><span>
</span><span id="line-372"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">KeyHash 'Payment crypto -&gt; PaymentCredential crypto
forall (kr :: KeyRole) crypto.
KeyHash kr crypto -&gt; Credential kr crypto
</span><a href="Cardano.Ledger.Credential.html#KeyHashObj"><span class="hs-identifier hs-var">KeyHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">(KeyHash 'Payment crypto -&gt; PaymentCredential crypto)
-&gt; StateT Int m (KeyHash 'Payment crypto)
-&gt; StateT Int m (PaymentCredential crypto)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; StateT Int m (KeyHash 'Payment crypto)
forall crypto (m :: * -&gt; *) b (kr :: KeyRole).
(Crypto crypto, MonadFail m, AddressBuffer b) =&gt;
b -&gt; StateT Int m (KeyHash kr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#decodeKeyHash"><span class="hs-identifier hs-var">decodeKeyHash</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245852"><span class="hs-identifier hs-var">buf</span></a></span><span>
</span><span id="line-373"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodePaymentCredential"><span class="hs-pragma hs-type">decodePaymentCredential</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-374"></span><span>
</span><span id="line-375"></span><span id="local-6989586621679246351"><span id="local-6989586621679246352"><span id="local-6989586621679246353"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodeStakeReference"><span class="hs-identifier hs-type">decodeStakeReference</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-376"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246353"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadFail</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246352"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#AddressBuffer"><span class="hs-identifier hs-type">AddressBuffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246351"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-377"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#Header"><span class="hs-identifier hs-type">Header</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-378"></span><span>  </span><span class="annot"><a href="#local-6989586621679246351"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-379"></span><span>  </span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier hs-type">StateT</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246352"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#StakeReference"><span class="hs-identifier hs-type">StakeReference</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246353"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-380"></span><span id="decodeStakeReference"><span class="annot"><span class="annottext">decodeStakeReference :: Header -&gt; b -&gt; StateT Int m (StakeReference crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#decodeStakeReference"><span class="hs-identifier hs-var hs-var">decodeStakeReference</span></a></span></span><span> </span><span id="local-6989586621679245849"><span class="annot"><span class="annottext">Header
</span><a href="#local-6989586621679245849"><span class="hs-identifier hs-var">header</span></a></span></span><span> </span><span id="local-6989586621679245848"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245848"><span class="hs-identifier hs-var">buf</span></a></span></span><span>
</span><span id="line-381"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Header -&gt; Bool
</span><a href="Cardano.Ledger.CompactAddress.html#headerIsBaseAddress"><span class="hs-identifier hs-var">headerIsBaseAddress</span></a></span><span> </span><span class="annot"><span class="annottext">Header
</span><a href="#local-6989586621679245849"><span class="hs-identifier hs-var">header</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-382"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Header -&gt; Bool
</span><a href="Cardano.Ledger.CompactAddress.html#headerIsStakingScript"><span class="hs-identifier hs-var">headerIsStakingScript</span></a></span><span> </span><span class="annot"><span class="annottext">Header
</span><a href="#local-6989586621679245849"><span class="hs-identifier hs-var">header</span></a></span><span>
</span><span id="line-383"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">StakeCredential crypto -&gt; StakeReference crypto
forall crypto. StakeCredential crypto -&gt; StakeReference crypto
</span><a href="Cardano.Ledger.Credential.html#StakeRefBase"><span class="hs-identifier hs-var">StakeRefBase</span></a></span><span> </span><span class="annot"><span class="annottext">(StakeCredential crypto -&gt; StakeReference crypto)
-&gt; (ScriptHash crypto -&gt; StakeCredential crypto)
-&gt; ScriptHash crypto
-&gt; StakeReference crypto
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash crypto -&gt; StakeCredential crypto
forall (kr :: KeyRole) crypto.
ScriptHash crypto -&gt; Credential kr crypto
</span><a href="Cardano.Ledger.Credential.html#ScriptHashObj"><span class="hs-identifier hs-var">ScriptHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">(ScriptHash crypto -&gt; StakeReference crypto)
-&gt; StateT Int m (ScriptHash crypto)
-&gt; StateT Int m (StakeReference crypto)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; StateT Int m (ScriptHash crypto)
forall crypto (m :: * -&gt; *) b.
(Crypto crypto, MonadFail m, AddressBuffer b) =&gt;
b -&gt; StateT Int m (ScriptHash crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#decodeScriptHash"><span class="hs-identifier hs-var">decodeScriptHash</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245848"><span class="hs-identifier hs-var">buf</span></a></span><span>
</span><span id="line-384"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">StakeCredential crypto -&gt; StakeReference crypto
forall crypto. StakeCredential crypto -&gt; StakeReference crypto
</span><a href="Cardano.Ledger.Credential.html#StakeRefBase"><span class="hs-identifier hs-var">StakeRefBase</span></a></span><span> </span><span class="annot"><span class="annottext">(StakeCredential crypto -&gt; StakeReference crypto)
-&gt; (KeyHash 'Staking crypto -&gt; StakeCredential crypto)
-&gt; KeyHash 'Staking crypto
-&gt; StakeReference crypto
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'Staking crypto -&gt; StakeCredential crypto
forall (kr :: KeyRole) crypto.
KeyHash kr crypto -&gt; Credential kr crypto
</span><a href="Cardano.Ledger.Credential.html#KeyHashObj"><span class="hs-identifier hs-var">KeyHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">(KeyHash 'Staking crypto -&gt; StakeReference crypto)
-&gt; StateT Int m (KeyHash 'Staking crypto)
-&gt; StateT Int m (StakeReference crypto)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; StateT Int m (KeyHash 'Staking crypto)
forall crypto (m :: * -&gt; *) b (kr :: KeyRole).
(Crypto crypto, MonadFail m, AddressBuffer b) =&gt;
b -&gt; StateT Int m (KeyHash kr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#decodeKeyHash"><span class="hs-identifier hs-var">decodeKeyHash</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245848"><span class="hs-identifier hs-var">buf</span></a></span><span>
</span><span id="line-385"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-386"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Header -&gt; Bool
</span><a href="Cardano.Ledger.CompactAddress.html#headerIsEnterpriseAddr"><span class="hs-identifier hs-var">headerIsEnterpriseAddr</span></a></span><span> </span><span class="annot"><span class="annottext">Header
</span><a href="#local-6989586621679245849"><span class="hs-identifier hs-var">header</span></a></span><span>
</span><span id="line-387"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">StakeReference crypto -&gt; StateT Int m (StakeReference crypto)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">StakeReference crypto
forall crypto. StakeReference crypto
</span><a href="Cardano.Ledger.Credential.html#StakeRefNull"><span class="hs-identifier hs-var">StakeRefNull</span></a></span><span>
</span><span id="line-388"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Ptr -&gt; StakeReference crypto
forall crypto. Ptr -&gt; StakeReference crypto
</span><a href="Cardano.Ledger.Credential.html#StakeRefPtr"><span class="hs-identifier hs-var">StakeRefPtr</span></a></span><span> </span><span class="annot"><span class="annottext">(Ptr -&gt; StakeReference crypto)
-&gt; StateT Int m Ptr -&gt; StateT Int m (StakeReference crypto)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; StateT Int m Ptr
forall (m :: * -&gt; *) b.
(MonadFail m, AddressBuffer b) =&gt;
b -&gt; StateT Int m Ptr
</span><a href="Cardano.Ledger.CompactAddress.html#decodePtr"><span class="hs-identifier hs-var">decodePtr</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245848"><span class="hs-identifier hs-var">buf</span></a></span><span>
</span><span id="line-389"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodeStakeReference"><span class="hs-pragma hs-type">decodeStakeReference</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-390"></span><span>
</span><span id="line-391"></span><span id="local-6989586621679246322"><span id="local-6989586621679246323"><span id="local-6989586621679246324"><span id="local-6989586621679246325"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodeKeyHash"><span class="hs-identifier hs-type">decodeKeyHash</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-392"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246325"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadFail</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246324"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#AddressBuffer"><span class="hs-identifier hs-type">AddressBuffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246323"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-393"></span><span>  </span><span class="annot"><a href="#local-6989586621679246323"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-394"></span><span>  </span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier hs-type">StateT</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246324"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Keys.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246322"><span class="hs-identifier hs-type">kr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246325"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-395"></span><span id="decodeKeyHash"><span class="annot"><span class="annottext">decodeKeyHash :: b -&gt; StateT Int m (KeyHash kr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#decodeKeyHash"><span class="hs-identifier hs-var hs-var">decodeKeyHash</span></a></span></span><span> </span><span id="local-6989586621679245843"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245843"><span class="hs-identifier hs-var">buf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Hash (ADDRHASH crypto) (VerKeyDSIGN (DSIGN crypto))
-&gt; KeyHash kr crypto
forall (discriminator :: KeyRole) crypto.
Hash (ADDRHASH crypto) (VerKeyDSIGN (DSIGN crypto))
-&gt; KeyHash discriminator crypto
</span><a href="Cardano.Ledger.Keys.html#KeyHash"><span class="hs-identifier hs-var">KeyHash</span></a></span><span> </span><span class="annot"><span class="annottext">(Hash (ADDRHASH crypto) (VerKeyDSIGN (DSIGN crypto))
 -&gt; KeyHash kr crypto)
-&gt; StateT
     Int m (Hash (ADDRHASH crypto) (VerKeyDSIGN (DSIGN crypto)))
-&gt; StateT Int m (KeyHash kr crypto)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">b
-&gt; StateT
     Int m (Hash (ADDRHASH crypto) (VerKeyDSIGN (DSIGN crypto)))
forall a h (m :: * -&gt; *) b.
(HashAlgorithm h, MonadFail m, AddressBuffer b) =&gt;
b -&gt; StateT Int m (Hash h a)
</span><a href="Cardano.Ledger.CompactAddress.html#decodeHash"><span class="hs-identifier hs-var">decodeHash</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245843"><span class="hs-identifier hs-var">buf</span></a></span><span>
</span><span id="line-396"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodeKeyHash"><span class="hs-pragma hs-type">decodeKeyHash</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-397"></span><span>
</span><span id="line-398"></span><span id="local-6989586621679246328"><span id="local-6989586621679246329"><span id="local-6989586621679246330"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodeScriptHash"><span class="hs-identifier hs-type">decodeScriptHash</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-399"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246330"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadFail</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246329"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#AddressBuffer"><span class="hs-identifier hs-type">AddressBuffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246328"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-400"></span><span>  </span><span class="annot"><a href="#local-6989586621679246328"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-401"></span><span>  </span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier hs-type">StateT</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246329"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Hashes.html#ScriptHash"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246330"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-402"></span><span id="decodeScriptHash"><span class="annot"><span class="annottext">decodeScriptHash :: b -&gt; StateT Int m (ScriptHash crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#decodeScriptHash"><span class="hs-identifier hs-var hs-var">decodeScriptHash</span></a></span></span><span> </span><span id="local-6989586621679245840"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245840"><span class="hs-identifier hs-var">buf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Hash (ADDRHASH crypto) EraIndependentScript -&gt; ScriptHash crypto
forall crypto.
Hash (ADDRHASH crypto) EraIndependentScript -&gt; ScriptHash crypto
</span><a href="Cardano.Ledger.Hashes.html#ScriptHash"><span class="hs-identifier hs-var">ScriptHash</span></a></span><span> </span><span class="annot"><span class="annottext">(Hash (ADDRHASH crypto) EraIndependentScript -&gt; ScriptHash crypto)
-&gt; StateT Int m (Hash (ADDRHASH crypto) EraIndependentScript)
-&gt; StateT Int m (ScriptHash crypto)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; StateT Int m (Hash (ADDRHASH crypto) EraIndependentScript)
forall a h (m :: * -&gt; *) b.
(HashAlgorithm h, MonadFail m, AddressBuffer b) =&gt;
b -&gt; StateT Int m (Hash h a)
</span><a href="Cardano.Ledger.CompactAddress.html#decodeHash"><span class="hs-identifier hs-var">decodeHash</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245840"><span class="hs-identifier hs-var">buf</span></a></span><span>
</span><span id="line-403"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodeScriptHash"><span class="hs-pragma hs-type">decodeScriptHash</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-404"></span><span>
</span><span id="line-405"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodeHash"><span class="hs-identifier hs-type">decodeHash</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-406"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679246300"><span class="annot"><a href="#local-6989586621679246300"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679246303"><span class="annot"><a href="#local-6989586621679246303"><span class="hs-identifier hs-type">h</span></a></span></span><span> </span><span id="local-6989586621679246302"><span class="annot"><a href="#local-6989586621679246302"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679246301"><span class="annot"><a href="#local-6989586621679246301"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-407"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-crypto-class/html/src"><span class="hs-identifier hs-type">Hash.HashAlgorithm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246303"><span class="hs-identifier hs-type">h</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadFail</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246302"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#AddressBuffer"><span class="hs-identifier hs-type">AddressBuffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246301"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-408"></span><span>  </span><span class="annot"><a href="#local-6989586621679246301"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-409"></span><span>  </span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier hs-type">StateT</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246302"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-crypto-class/html/src"><span class="hs-identifier hs-type">Hash.Hash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246303"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246300"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-410"></span><span id="decodeHash"><span class="annot"><span class="annottext">decodeHash :: b -&gt; StateT Int m (Hash h a)
</span><a href="Cardano.Ledger.CompactAddress.html#decodeHash"><span class="hs-identifier hs-var hs-var">decodeHash</span></a></span></span><span> </span><span id="local-6989586621679245838"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245838"><span class="hs-identifier hs-var">buf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-411"></span><span>  </span><span id="local-6989586621679245837"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245837"><span class="hs-identifier hs-var">offset</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StateT Int m Int
forall (m :: * -&gt; *) s. Monad m =&gt; StateT s m s
</span><a href="../../../../transformers/html/src"><span class="hs-identifier hs-var">get</span></a></span><span>
</span><span id="line-412"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">b -&gt; Int -&gt; Maybe (Hash h a)
forall b h a.
(AddressBuffer b, HashAlgorithm h) =&gt;
b -&gt; Int -&gt; Maybe (Hash h a)
</span><a href="Cardano.Ledger.CompactAddress.html#bufGetHash"><span class="hs-identifier hs-var">bufGetHash</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245838"><span class="hs-identifier hs-var">buf</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245837"><span class="hs-identifier hs-var">offset</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-413"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679245836"><span class="annot"><span class="annottext">Hash h a
</span><a href="#local-6989586621679245836"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Hash h a
</span><a href="#local-6989586621679245836"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">Hash h a -&gt; StateT Int m () -&gt; StateT Int m (Hash h a)
forall (f :: * -&gt; *) a b. Functor f =&gt; a -&gt; f b -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Int) -&gt; StateT Int m ()
forall (m :: * -&gt; *) s. Monad m =&gt; (s -&gt; s) -&gt; StateT s m ()
</span><a href="../../../../transformers/html/src"><span class="hs-identifier hs-var">modify'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245835"><span class="hs-identifier hs-var">hashLen</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-414"></span><span>    </span><span class="annot"><span class="annottext">Maybe (Hash h a)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-415"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245837"><span class="hs-identifier hs-var">offset</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-416"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; String -&gt; StateT Int m (Hash h a)
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; String -&gt; m a
</span><a href="Cardano.Ledger.CompactAddress.html#failDecoding"><span class="hs-identifier hs-var">failDecoding</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Hash&quot;</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; StateT Int m (Hash h a))
-&gt; String -&gt; StateT Int m (Hash h a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-417"></span><span>            </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Not enough bytes supplied: &quot;</span></span><span>
</span><span id="line-418"></span><span>              </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b -&gt; Int
forall b. AddressBuffer b =&gt; b -&gt; Int
</span><a href="Cardano.Ledger.CompactAddress.html#bufLength"><span class="hs-identifier hs-var">bufLength</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245838"><span class="hs-identifier hs-var">buf</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245837"><span class="hs-identifier hs-var">offset</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-419"></span><span>              </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;. Expected: &quot;</span></span><span>
</span><span id="line-420"></span><span>              </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245835"><span class="hs-identifier hs-var">hashLen</span></a></span><span>
</span><span id="line-421"></span><span>    </span><span class="annot"><span class="annottext">Maybe (Hash h a)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; StateT Int m (Hash h a)
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fail</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Impossible: Negative offset&quot;</span></span><span>
</span><span id="line-422"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-423"></span><span>    </span><span class="annot"><a href="#local-6989586621679245835"><span class="hs-identifier hs-type">hashLen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-424"></span><span>    </span><span id="local-6989586621679245835"><span class="annot"><span class="annottext">hashLen :: Int
</span><a href="#local-6989586621679245835"><span class="hs-identifier hs-var hs-var">hashLen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy h -&gt; Word
forall h (proxy :: * -&gt; *). HashAlgorithm h =&gt; proxy h -&gt; Word
</span><a href="../../../../cardano-crypto-class/html/src"><span class="hs-identifier hs-var">Hash.sizeHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy h
forall k (t :: k). Proxy t
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246303"><span class="hs-identifier hs-type">h</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-425"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodeHash"><span class="hs-pragma hs-type">decodeHash</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-426"></span><span>
</span><span id="line-427"></span><span id="local-6989586621679246313"><span id="local-6989586621679246314"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodePtr"><span class="hs-identifier hs-type">decodePtr</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-428"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadFail</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246314"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#AddressBuffer"><span class="hs-identifier hs-type">AddressBuffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246313"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-429"></span><span>  </span><span class="annot"><a href="#local-6989586621679246313"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-430"></span><span>  </span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier hs-type">StateT</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246314"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Cardano.Ledger.Credential.html#Ptr"><span class="hs-identifier hs-type">Ptr</span></a></span></span></span><span>
</span><span id="line-431"></span><span id="decodePtr"><span class="annot"><span class="annottext">decodePtr :: b -&gt; StateT Int m Ptr
</span><a href="Cardano.Ledger.CompactAddress.html#decodePtr"><span class="hs-identifier hs-var hs-var">decodePtr</span></a></span></span><span> </span><span id="local-6989586621679245832"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245832"><span class="hs-identifier hs-var">buf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-432"></span><span>  </span><span class="annot"><span class="annottext">SlotNo -&gt; TxIx -&gt; CertIx -&gt; Ptr
</span><a href="Cardano.Ledger.Credential.html#Ptr"><span class="hs-identifier hs-var">Ptr</span></a></span><span>
</span><span id="line-433"></span><span>    </span><span class="annot"><span class="annottext">(SlotNo -&gt; TxIx -&gt; CertIx -&gt; Ptr)
-&gt; StateT Int m SlotNo -&gt; StateT Int m (TxIx -&gt; CertIx -&gt; Ptr)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; SlotNo
</span><a href="../../../../cardano-slotting/html/src"><span class="hs-identifier hs-var">SlotNo</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; SlotNo) -&gt; (Word32 -&gt; Word64) -&gt; Word32 -&gt; SlotNo
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word32 -&gt; Word64
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Word32 -&gt; SlotNo) -&gt; StateT Int m Word32 -&gt; StateT Int m SlotNo
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; b -&gt; StateT Int m Word32
forall (m :: * -&gt; *) b.
(MonadFail m, AddressBuffer b) =&gt;
String -&gt; b -&gt; StateT Int m Word32
</span><a href="Cardano.Ledger.CompactAddress.html#decodeVariableLengthWord32"><span class="hs-identifier hs-var">decodeVariableLengthWord32</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;SlotNo&quot;</span></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245832"><span class="hs-identifier hs-var">buf</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-434"></span><span>    </span><span class="annot"><span class="annottext">StateT Int m (TxIx -&gt; CertIx -&gt; Ptr)
-&gt; StateT Int m TxIx -&gt; StateT Int m (CertIx -&gt; Ptr)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; TxIx
</span><a href="Cardano.Ledger.BaseTypes.html#TxIx"><span class="hs-identifier hs-var">TxIx</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; TxIx) -&gt; (Word16 -&gt; Word64) -&gt; Word16 -&gt; TxIx
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word16 -&gt; Word64
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word16</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Word16 -&gt; TxIx) -&gt; StateT Int m Word16 -&gt; StateT Int m TxIx
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; b -&gt; StateT Int m Word16
forall (m :: * -&gt; *) b.
(MonadFail m, AddressBuffer b) =&gt;
String -&gt; b -&gt; StateT Int m Word16
</span><a href="Cardano.Ledger.CompactAddress.html#decodeVariableLengthWord16"><span class="hs-identifier hs-var">decodeVariableLengthWord16</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;TxIx&quot;</span></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245832"><span class="hs-identifier hs-var">buf</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-435"></span><span>    </span><span class="annot"><span class="annottext">StateT Int m (CertIx -&gt; Ptr)
-&gt; StateT Int m CertIx -&gt; StateT Int m Ptr
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; CertIx
</span><a href="Cardano.Ledger.BaseTypes.html#CertIx"><span class="hs-identifier hs-var">CertIx</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; CertIx) -&gt; (Word16 -&gt; Word64) -&gt; Word16 -&gt; CertIx
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word16 -&gt; Word64
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word16</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Word16 -&gt; CertIx) -&gt; StateT Int m Word16 -&gt; StateT Int m CertIx
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; b -&gt; StateT Int m Word16
forall (m :: * -&gt; *) b.
(MonadFail m, AddressBuffer b) =&gt;
String -&gt; b -&gt; StateT Int m Word16
</span><a href="Cardano.Ledger.CompactAddress.html#decodeVariableLengthWord16"><span class="hs-identifier hs-var">decodeVariableLengthWord16</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;CertIx&quot;</span></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245832"><span class="hs-identifier hs-var">buf</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-436"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodePtr"><span class="hs-pragma hs-type">decodePtr</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-437"></span><span>
</span><span id="line-438"></span><span id="local-6989586621679246372"><span id="local-6989586621679246373"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#guardLength"><span class="hs-identifier hs-type">guardLength</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-439"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadFail</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246373"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#AddressBuffer"><span class="hs-identifier hs-type">AddressBuffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246372"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-440"></span><span>  </span><span class="hs-comment">-- | Name for what is being decoded for the error message</span><span>
</span><span id="line-441"></span><span>  </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-442"></span><span>  </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-443"></span><span>  </span><span class="annot"><a href="#local-6989586621679246372"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-444"></span><span>  </span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier hs-type">StateT</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246373"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-445"></span><span id="guardLength"><span class="annot"><span class="annottext">guardLength :: String -&gt; Int -&gt; b -&gt; StateT Int m ()
</span><a href="Cardano.Ledger.CompactAddress.html#guardLength"><span class="hs-identifier hs-var hs-var">guardLength</span></a></span></span><span> </span><span id="local-6989586621679245825"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679245825"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679245824"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245824"><span class="hs-identifier hs-var">expectedLength</span></a></span></span><span> </span><span id="local-6989586621679245823"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245823"><span class="hs-identifier hs-var">buf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-446"></span><span>  </span><span id="local-6989586621679245822"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245822"><span class="hs-identifier hs-var">offset</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StateT Int m Int
forall (m :: * -&gt; *) s. Monad m =&gt; StateT s m s
</span><a href="../../../../transformers/html/src"><span class="hs-identifier hs-var">get</span></a></span><span>
</span><span id="line-447"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; StateT Int m () -&gt; StateT Int m ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245822"><span class="hs-identifier hs-var">offset</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; Int
forall b. AddressBuffer b =&gt; b -&gt; Int
</span><a href="Cardano.Ledger.CompactAddress.html#bufLength"><span class="hs-identifier hs-var">bufLength</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245823"><span class="hs-identifier hs-var">buf</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245824"><span class="hs-identifier hs-var">expectedLength</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(StateT Int m () -&gt; StateT Int m ())
-&gt; StateT Int m () -&gt; StateT Int m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-448"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; String -&gt; StateT Int m ()
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; String -&gt; m a
</span><a href="Cardano.Ledger.CompactAddress.html#failDecoding"><span class="hs-identifier hs-var">failDecoding</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679245825"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Not enough bytes for decoding&quot;</span></span><span>
</span><span id="line-449"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#guardLength"><span class="hs-pragma hs-type">guardLength</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-450"></span><span>
</span><span id="line-451"></span><span class="hs-comment">-- | Decode a variable length integral value that is encoded with 7 bits of data</span><span>
</span><span id="line-452"></span><span class="hs-comment">-- and the most significant bit (MSB), the 8th bit is set whenever there are</span><span>
</span><span id="line-453"></span><span class="hs-comment">-- more bits following. Continuation style allows us to avoid</span><span>
</span><span id="line-454"></span><span class="hs-comment">-- rucursion. Removing loops is good for performance.</span><span>
</span><span id="line-455"></span><span id="local-6989586621679246260"><span id="local-6989586621679246261"><span id="local-6989586621679246262"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decode7BitVarLength"><span class="hs-identifier hs-type">decode7BitVarLength</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-456"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Num</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246262"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Bits</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246262"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#AddressBuffer"><span class="hs-identifier hs-type">AddressBuffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246261"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadFail</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246260"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-457"></span><span>  </span><span class="hs-comment">-- | Name of what is being decoded for error reporting</span><span>
</span><span id="line-458"></span><span>  </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-459"></span><span>  </span><span class="hs-comment">-- | Buffer that contains encoded number</span><span>
</span><span id="line-460"></span><span>  </span><span class="annot"><a href="#local-6989586621679246261"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-461"></span><span>  </span><span class="hs-comment">-- | Continuation that will be invoked if MSB is set</span><span>
</span><span id="line-462"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679246262"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier hs-type">StateT</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246260"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246262"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-463"></span><span>  </span><span class="hs-comment">-- | Accumulator</span><span>
</span><span id="line-464"></span><span>  </span><span class="annot"><a href="#local-6989586621679246262"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-465"></span><span>  </span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier hs-type">StateT</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246260"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246262"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-466"></span><span id="decode7BitVarLength"><span class="annot"><span class="annottext">decode7BitVarLength :: String -&gt; b -&gt; (a -&gt; StateT Int m a) -&gt; a -&gt; StateT Int m a
</span><a href="Cardano.Ledger.CompactAddress.html#decode7BitVarLength"><span class="hs-identifier hs-var hs-var">decode7BitVarLength</span></a></span></span><span> </span><span id="local-6989586621679245819"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679245819"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679245818"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245818"><span class="hs-identifier hs-var">buf</span></a></span></span><span> </span><span id="local-6989586621679245817"><span class="annot"><span class="annottext">a -&gt; StateT Int m a
</span><a href="#local-6989586621679245817"><span class="hs-identifier hs-var">cont</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679245816"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679245816"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-467"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; b -&gt; StateT Int m ()
forall (m :: * -&gt; *) b.
(MonadFail m, AddressBuffer b) =&gt;
String -&gt; Int -&gt; b -&gt; StateT Int m ()
</span><a href="Cardano.Ledger.CompactAddress.html#guardLength"><span class="hs-identifier hs-var">guardLength</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679245819"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245818"><span class="hs-identifier hs-var">buf</span></a></span><span>
</span><span id="line-468"></span><span>  </span><span id="local-6989586621679245815"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245815"><span class="hs-identifier hs-var">offset</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; (Int, Int)) -&gt; StateT Int m Int
forall (m :: * -&gt; *) s a. Monad m =&gt; (s -&gt; (a, s)) -&gt; StateT s m a
</span><a href="../../../../transformers/html/src"><span class="hs-identifier hs-var">state</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679245814"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245814"><span class="hs-identifier hs-var">off</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245814"><span class="hs-identifier hs-var">off</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245814"><span class="hs-identifier hs-var">off</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-469"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679245813"><span class="annot"><span class="annottext">b8 :: Word8
</span><a href="#local-6989586621679245813"><span class="hs-identifier hs-var hs-var">b8</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">b -&gt; Int -&gt; Word8
forall b. AddressBuffer b =&gt; b -&gt; Int -&gt; Word8
</span><a href="Cardano.Ledger.CompactAddress.html#bufUnsafeIndex"><span class="hs-identifier hs-var">bufUnsafeIndex</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245818"><span class="hs-identifier hs-var">buf</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245815"><span class="hs-identifier hs-var">offset</span></a></span><span>
</span><span id="line-470"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679245813"><span class="hs-identifier hs-var">b8</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Int -&gt; Bool
forall a. Bits a =&gt; a -&gt; Int -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`testBit`</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">7</span></span><span>
</span><span id="line-471"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">a -&gt; StateT Int m a
</span><a href="#local-6989586621679245817"><span class="hs-identifier hs-var">cont</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679245816"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Int -&gt; a
forall a. Bits a =&gt; a -&gt; Int -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`shiftL`</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">7</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.|.</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; a
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679245813"><span class="hs-identifier hs-var">b8</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Int -&gt; Word8
forall a. Bits a =&gt; a -&gt; Int -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`clearBit`</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">7</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-472"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">a -&gt; StateT Int m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679245816"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Int -&gt; a
forall a. Bits a =&gt; a -&gt; Int -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`shiftL`</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">7</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.|.</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; a
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679245813"><span class="hs-identifier hs-var">b8</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-473"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decode7BitVarLength"><span class="hs-pragma hs-type">decode7BitVarLength</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-474"></span><span>
</span><span id="line-475"></span><span id="local-6989586621679246361"><span id="local-6989586621679246362"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#failDecoding"><span class="hs-identifier hs-type">failDecoding</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadFail</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246362"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679246362"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246361"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-476"></span><span id="failDecoding"><span class="annot"><span class="annottext">failDecoding :: String -&gt; String -&gt; m a
</span><a href="Cardano.Ledger.CompactAddress.html#failDecoding"><span class="hs-identifier hs-var hs-var">failDecoding</span></a></span></span><span> </span><span id="local-6989586621679245812"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679245812"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679245811"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679245811"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; m a
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fail</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; m a) -&gt; String -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Decoding &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679245812"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679245811"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-477"></span><span class="hs-pragma">{-# NOINLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#failDecoding"><span class="hs-pragma hs-type">failDecoding</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-478"></span><span>
</span><span id="line-479"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodeVariableLengthWord16"><span class="hs-identifier hs-type">decodeVariableLengthWord16</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-480"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679246276"><span class="annot"><a href="#local-6989586621679246276"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679246275"><span class="annot"><a href="#local-6989586621679246275"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-481"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadFail</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246276"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#AddressBuffer"><span class="hs-identifier hs-type">AddressBuffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246275"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-482"></span><span>  </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-483"></span><span>  </span><span class="annot"><a href="#local-6989586621679246275"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-484"></span><span>  </span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier hs-type">StateT</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246276"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word16</span></a></span><span>
</span><span id="line-485"></span><span id="decodeVariableLengthWord16"><span class="annot"><span class="annottext">decodeVariableLengthWord16 :: String -&gt; b -&gt; StateT Int m Word16
</span><a href="Cardano.Ledger.CompactAddress.html#decodeVariableLengthWord16"><span class="hs-identifier hs-var hs-var">decodeVariableLengthWord16</span></a></span></span><span> </span><span id="local-6989586621679245810"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679245810"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679245809"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245809"><span class="hs-identifier hs-var">buf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-486"></span><span>  </span><span id="local-6989586621679245808"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245808"><span class="hs-identifier hs-var">off0</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StateT Int m Int
forall (m :: * -&gt; *) s. Monad m =&gt; StateT s m s
</span><a href="../../../../transformers/html/src"><span class="hs-identifier hs-var">get</span></a></span><span>
</span><span id="line-487"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679245807"><span class="annot"><span class="annottext">d7 :: (Word16 -&gt; StateT Int m Word16) -&gt; Word16 -&gt; StateT Int m Word16
</span><a href="#local-6989586621679245807"><span class="hs-identifier hs-var hs-var">d7</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; b
-&gt; (Word16 -&gt; StateT Int m Word16)
-&gt; Word16
-&gt; StateT Int m Word16
forall a b (m :: * -&gt; *).
(Num a, Bits a, AddressBuffer b, MonadFail m) =&gt;
String -&gt; b -&gt; (a -&gt; StateT Int m a) -&gt; a -&gt; StateT Int m a
</span><a href="Cardano.Ledger.CompactAddress.html#decode7BitVarLength"><span class="hs-identifier hs-var">decode7BitVarLength</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679245810"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245809"><span class="hs-identifier hs-var">buf</span></a></span><span>
</span><span id="line-488"></span><span>      </span><span class="annot"><a href="#local-6989586621679245806"><span class="hs-identifier hs-type">d7last</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word16</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier hs-type">StateT</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246276"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word16</span></a></span><span>
</span><span id="line-489"></span><span>      </span><span id="local-6989586621679245806"><span class="annot"><span class="annottext">d7last :: Word16 -&gt; StateT Int m Word16
</span><a href="#local-6989586621679245806"><span class="hs-identifier hs-var hs-var">d7last</span></a></span></span><span> </span><span id="local-6989586621679245805"><span class="annot"><span class="annottext">Word16
</span><a href="#local-6989586621679245805"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-490"></span><span>        </span><span id="local-6989586621679245804"><span class="annot"><span class="annottext">Word16
</span><a href="#local-6989586621679245804"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String
-&gt; b
-&gt; (Word16 -&gt; StateT Int m Word16)
-&gt; Word16
-&gt; StateT Int m Word16
forall a b (m :: * -&gt; *).
(Num a, Bits a, AddressBuffer b, MonadFail m) =&gt;
String -&gt; b -&gt; (a -&gt; StateT Int m a) -&gt; a -&gt; StateT Int m a
</span><a href="Cardano.Ledger.CompactAddress.html#decode7BitVarLength"><span class="hs-identifier hs-var">decode7BitVarLength</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679245810"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245809"><span class="hs-identifier hs-var">buf</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Word16
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; StateT Int m Word16
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; String -&gt; m a
</span><a href="Cardano.Ledger.CompactAddress.html#failDecoding"><span class="hs-identifier hs-var">failDecoding</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679245810"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;too many bytes.&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word16
</span><a href="#local-6989586621679245805"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-491"></span><span>        </span><span class="hs-comment">-- Only while decoding the last 7bits we check if there was too many</span><span>
</span><span id="line-492"></span><span>        </span><span class="hs-comment">-- bits supplied at the beginning.</span><span>
</span><span id="line-493"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; StateT Int m () -&gt; StateT Int m ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b -&gt; Int -&gt; Word8
forall b. AddressBuffer b =&gt; b -&gt; Int -&gt; Word8
</span><a href="Cardano.Ledger.CompactAddress.html#bufUnsafeIndex"><span class="hs-identifier hs-var">bufUnsafeIndex</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245809"><span class="hs-identifier hs-var">buf</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245808"><span class="hs-identifier hs-var">off0</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Word8
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.&amp;.</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0b01111100</span></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(StateT Int m () -&gt; StateT Int m ())
-&gt; StateT Int m () -&gt; StateT Int m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-494"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; String -&gt; StateT Int m ()
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; String -&gt; m a
</span><a href="Cardano.Ledger.CompactAddress.html#failDecoding"><span class="hs-identifier hs-var">failDecoding</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679245810"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;More than 16bits was supplied&quot;</span></span><span>
</span><span id="line-495"></span><span>        </span><span class="annot"><span class="annottext">Word16 -&gt; StateT Int m Word16
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Word16
</span><a href="#local-6989586621679245804"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-496"></span><span>  </span><span class="annot"><span class="annottext">(Word16 -&gt; StateT Int m Word16) -&gt; Word16 -&gt; StateT Int m Word16
</span><a href="#local-6989586621679245807"><span class="hs-identifier hs-var">d7</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Word16 -&gt; StateT Int m Word16) -&gt; Word16 -&gt; StateT Int m Word16
</span><a href="#local-6989586621679245807"><span class="hs-identifier hs-var">d7</span></a></span><span> </span><span class="annot"><span class="annottext">Word16 -&gt; StateT Int m Word16
</span><a href="#local-6989586621679245806"><span class="hs-identifier hs-var">d7last</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word16
</span><span class="hs-number">0</span></span><span>
</span><span id="line-497"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodeVariableLengthWord16"><span class="hs-pragma hs-type">decodeVariableLengthWord16</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-498"></span><span>
</span><span id="line-499"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodeVariableLengthWord32"><span class="hs-identifier hs-type">decodeVariableLengthWord32</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-500"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679246278"><span class="annot"><a href="#local-6989586621679246278"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679246277"><span class="annot"><a href="#local-6989586621679246277"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-501"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadFail</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246278"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#AddressBuffer"><span class="hs-identifier hs-type">AddressBuffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246277"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-502"></span><span>  </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-503"></span><span>  </span><span class="annot"><a href="#local-6989586621679246277"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-504"></span><span>  </span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier hs-type">StateT</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246278"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word32</span></a></span><span>
</span><span id="line-505"></span><span id="decodeVariableLengthWord32"><span class="annot"><span class="annottext">decodeVariableLengthWord32 :: String -&gt; b -&gt; StateT Int m Word32
</span><a href="Cardano.Ledger.CompactAddress.html#decodeVariableLengthWord32"><span class="hs-identifier hs-var hs-var">decodeVariableLengthWord32</span></a></span></span><span> </span><span id="local-6989586621679245803"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679245803"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679245802"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245802"><span class="hs-identifier hs-var">buf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-506"></span><span>  </span><span id="local-6989586621679245801"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245801"><span class="hs-identifier hs-var">off0</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StateT Int m Int
forall (m :: * -&gt; *) s. Monad m =&gt; StateT s m s
</span><a href="../../../../transformers/html/src"><span class="hs-identifier hs-var">get</span></a></span><span>
</span><span id="line-507"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679245800"><span class="annot"><span class="annottext">d7 :: (Word32 -&gt; StateT Int m Word32) -&gt; Word32 -&gt; StateT Int m Word32
</span><a href="#local-6989586621679245800"><span class="hs-identifier hs-var hs-var">d7</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; b
-&gt; (Word32 -&gt; StateT Int m Word32)
-&gt; Word32
-&gt; StateT Int m Word32
forall a b (m :: * -&gt; *).
(Num a, Bits a, AddressBuffer b, MonadFail m) =&gt;
String -&gt; b -&gt; (a -&gt; StateT Int m a) -&gt; a -&gt; StateT Int m a
</span><a href="Cardano.Ledger.CompactAddress.html#decode7BitVarLength"><span class="hs-identifier hs-var">decode7BitVarLength</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679245803"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245802"><span class="hs-identifier hs-var">buf</span></a></span><span>
</span><span id="line-508"></span><span>      </span><span class="annot"><a href="#local-6989586621679245799"><span class="hs-identifier hs-type">d7last</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier hs-type">StateT</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246278"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word32</span></a></span><span>
</span><span id="line-509"></span><span>      </span><span id="local-6989586621679245799"><span class="annot"><span class="annottext">d7last :: Word32 -&gt; StateT Int m Word32
</span><a href="#local-6989586621679245799"><span class="hs-identifier hs-var hs-var">d7last</span></a></span></span><span> </span><span id="local-6989586621679245798"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679245798"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-510"></span><span>        </span><span id="local-6989586621679245797"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679245797"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String
-&gt; b
-&gt; (Word32 -&gt; StateT Int m Word32)
-&gt; Word32
-&gt; StateT Int m Word32
forall a b (m :: * -&gt; *).
(Num a, Bits a, AddressBuffer b, MonadFail m) =&gt;
String -&gt; b -&gt; (a -&gt; StateT Int m a) -&gt; a -&gt; StateT Int m a
</span><a href="Cardano.Ledger.CompactAddress.html#decode7BitVarLength"><span class="hs-identifier hs-var">decode7BitVarLength</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679245803"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245802"><span class="hs-identifier hs-var">buf</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Word32
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; StateT Int m Word32
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; String -&gt; m a
</span><a href="Cardano.Ledger.CompactAddress.html#failDecoding"><span class="hs-identifier hs-var">failDecoding</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679245803"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;too many bytes.&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679245798"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-511"></span><span>        </span><span class="hs-comment">-- Only while decoding the last 7bits we check if there was too many</span><span>
</span><span id="line-512"></span><span>        </span><span class="hs-comment">-- bits supplied at the beginning.</span><span>
</span><span id="line-513"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; StateT Int m () -&gt; StateT Int m ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b -&gt; Int -&gt; Word8
forall b. AddressBuffer b =&gt; b -&gt; Int -&gt; Word8
</span><a href="Cardano.Ledger.CompactAddress.html#bufUnsafeIndex"><span class="hs-identifier hs-var">bufUnsafeIndex</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245802"><span class="hs-identifier hs-var">buf</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245801"><span class="hs-identifier hs-var">off0</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Word8
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.&amp;.</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0b01110000</span></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(StateT Int m () -&gt; StateT Int m ())
-&gt; StateT Int m () -&gt; StateT Int m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-514"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; String -&gt; StateT Int m ()
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; String -&gt; m a
</span><a href="Cardano.Ledger.CompactAddress.html#failDecoding"><span class="hs-identifier hs-var">failDecoding</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679245803"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;More than 32bits was supplied&quot;</span></span><span>
</span><span id="line-515"></span><span>        </span><span class="annot"><span class="annottext">Word32 -&gt; StateT Int m Word32
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679245797"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-516"></span><span>  </span><span class="annot"><span class="annottext">(Word32 -&gt; StateT Int m Word32) -&gt; Word32 -&gt; StateT Int m Word32
</span><a href="#local-6989586621679245800"><span class="hs-identifier hs-var">d7</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Word32 -&gt; StateT Int m Word32) -&gt; Word32 -&gt; StateT Int m Word32
</span><a href="#local-6989586621679245800"><span class="hs-identifier hs-var">d7</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Word32 -&gt; StateT Int m Word32) -&gt; Word32 -&gt; StateT Int m Word32
</span><a href="#local-6989586621679245800"><span class="hs-identifier hs-var">d7</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Word32 -&gt; StateT Int m Word32) -&gt; Word32 -&gt; StateT Int m Word32
</span><a href="#local-6989586621679245800"><span class="hs-identifier hs-var">d7</span></a></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; StateT Int m Word32
</span><a href="#local-6989586621679245799"><span class="hs-identifier hs-var">d7last</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">0</span></span><span>
</span><span id="line-517"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodeVariableLengthWord32"><span class="hs-pragma hs-type">decodeVariableLengthWord32</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-518"></span><span>
</span><span id="line-519"></span><span class="hs-comment">------------------------------------------------------------------------------------------</span><span>
</span><span id="line-520"></span><span class="hs-comment">-- Reward Account Deserializer -----------------------------------------------------------</span><span>
</span><span id="line-521"></span><span class="hs-comment">------------------------------------------------------------------------------------------</span><span>
</span><span id="line-522"></span><span>
</span><span id="line-523"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodeRewardAcnt"><span class="hs-identifier hs-type">decodeRewardAcnt</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-524"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679246248"><span class="annot"><a href="#local-6989586621679246248"><span class="hs-identifier hs-type">crypto</span></a></span></span><span> </span><span id="local-6989586621679246247"><span class="annot"><a href="#local-6989586621679246247"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621679246246"><span class="annot"><a href="#local-6989586621679246246"><span class="hs-identifier hs-type">m</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-525"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246248"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#AddressBuffer"><span class="hs-identifier hs-type">AddressBuffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246247"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadFail</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246246"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-526"></span><span>  </span><span class="annot"><a href="#local-6989586621679246247"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-527"></span><span>  </span><span class="annot"><a href="#local-6989586621679246246"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Address.html#RewardAcnt"><span class="hs-identifier hs-type">RewardAcnt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246248"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-528"></span><span id="decodeRewardAcnt"><span class="annot"><span class="annottext">decodeRewardAcnt :: b -&gt; m (RewardAcnt crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#decodeRewardAcnt"><span class="hs-identifier hs-var hs-var">decodeRewardAcnt</span></a></span></span><span> </span><span id="local-6989586621679245796"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245796"><span class="hs-identifier hs-var">buf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StateT Int m (RewardAcnt crypto) -&gt; Int -&gt; m (RewardAcnt crypto)
forall (m :: * -&gt; *) s a. Monad m =&gt; StateT s m a -&gt; s -&gt; m a
</span><a href="../../../../transformers/html/src"><span class="hs-identifier hs-var">evalStateT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b -&gt; StateT Int m (RewardAcnt crypto)
forall (m :: * -&gt; *) crypto b.
(MonadFail m, Crypto crypto, AddressBuffer b) =&gt;
b -&gt; StateT Int m (RewardAcnt crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#decodeRewardAccountT"><span class="hs-identifier hs-var">decodeRewardAccountT</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245796"><span class="hs-identifier hs-var">buf</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-529"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodeRewardAcnt"><span class="hs-pragma hs-type">decodeRewardAcnt</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-530"></span><span>
</span><span id="line-531"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#fromCborRewardAcnt"><span class="hs-identifier hs-type">fromCborRewardAcnt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679245794"><span class="annot"><a href="#local-6989586621679245794"><span class="hs-identifier hs-type">crypto</span></a></span></span><span> </span><span id="local-6989586621679245793"><span class="annot"><a href="#local-6989586621679245793"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679245794"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../cborg/html/src"><span class="hs-identifier hs-type">Decoder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679245793"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Address.html#RewardAcnt"><span class="hs-identifier hs-type">RewardAcnt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679245794"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-532"></span><span id="fromCborRewardAcnt"><span class="annot"><span class="annottext">fromCborRewardAcnt :: Decoder s (RewardAcnt crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#fromCborRewardAcnt"><span class="hs-identifier hs-var hs-var">fromCborRewardAcnt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-533"></span><span>  </span><span id="local-6989586621679245792"><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245792"><span class="hs-identifier hs-var">sbs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">ShortByteString</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s ShortByteString
forall a s. FromCBOR a =&gt; Decoder s a
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">fromCBOR</span></a></span><span>
</span><span id="line-534"></span><span>  </span><span class="annot"><span class="annottext">ShortByteString -&gt; Decoder s (RewardAcnt crypto)
forall crypto b (m :: * -&gt; *).
(Crypto crypto, AddressBuffer b, MonadFail m) =&gt;
b -&gt; m (RewardAcnt crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#decodeRewardAcnt"><span class="hs-identifier hs-var">decodeRewardAcnt</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679245794"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245792"><span class="hs-identifier hs-var">sbs</span></a></span><span>
</span><span id="line-535"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#fromCborRewardAcnt"><span class="hs-pragma hs-type">fromCborRewardAcnt</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-536"></span><span>
</span><span id="line-537"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#headerIsRewardAccount"><span class="hs-identifier hs-type">headerIsRewardAccount</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#Header"><span class="hs-identifier hs-type">Header</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-538"></span><span id="headerIsRewardAccount"><span class="annot"><span class="annottext">headerIsRewardAccount :: Header -&gt; Bool
</span><a href="Cardano.Ledger.CompactAddress.html#headerIsRewardAccount"><span class="hs-identifier hs-var hs-var">headerIsRewardAccount</span></a></span></span><span> </span><span id="local-6989586621679245790"><span class="annot"><span class="annottext">Header
</span><a href="#local-6989586621679245790"><span class="hs-identifier hs-var">header</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Header
</span><a href="#local-6989586621679245790"><span class="hs-identifier hs-var">header</span></a></span><span> </span><span class="annot"><span class="annottext">Header -&gt; Header -&gt; Header
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.&amp;.</span></a></span><span> </span><span class="annot"><span class="annottext">Header
</span><span class="hs-number">0b11101110</span></span><span> </span><span class="annot"><span class="annottext">Header -&gt; Header -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Header
</span><span class="hs-number">0b11100000</span></span><span>
</span><span id="line-539"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#headerIsRewardAccount"><span class="hs-pragma hs-type">headerIsRewardAccount</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-540"></span><span>
</span><span id="line-541"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#headerRewardAccountIsScript"><span class="hs-identifier hs-type">headerRewardAccountIsScript</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#Header"><span class="hs-identifier hs-type">Header</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-542"></span><span id="headerRewardAccountIsScript"><span class="annot"><span class="annottext">headerRewardAccountIsScript :: Header -&gt; Bool
</span><a href="Cardano.Ledger.CompactAddress.html#headerRewardAccountIsScript"><span class="hs-identifier hs-var hs-var">headerRewardAccountIsScript</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Header -&gt; Int -&gt; Bool
forall a. Bits a =&gt; a -&gt; Int -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`testBit`</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span class="hs-special">)</span><span>
</span><span id="line-543"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#headerRewardAccountIsScript"><span class="hs-pragma hs-type">headerRewardAccountIsScript</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-544"></span><span>
</span><span id="line-545"></span><span class="hs-comment">-- | Reward Account Header.</span><span>
</span><span id="line-546"></span><span class="hs-comment">--</span><span>
</span><span id="line-547"></span><span class="hs-comment">-- @@@</span><span>
</span><span id="line-548"></span><span class="hs-comment">--</span><span>
</span><span id="line-549"></span><span class="hs-comment">-- &#9487;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9523;&#9473;&#9519;&#9473;&#9519;&#9473;&#9519;&#9473;&#9519;&#9473;&#9519;&#9473;&#9519;&#9473;&#9519;&#9473;&#9491;</span><span>
</span><span id="line-550"></span><span class="hs-comment">-- &#9475; Reward Account &#9475;1&#9482;1&#9482;1&#9482;x&#9482;0&#9482;0&#9482;0&#9482;x&#9475;</span><span>
</span><span id="line-551"></span><span class="hs-comment">-- &#9495;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9547;&#9473;&#9535;&#9473;&#9535;&#9473;&#9535;&#9473;&#9535;&#9473;&#9535;&#9473;&#9535;&#9473;&#9535;&#9473;&#9547;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9491;</span><span>
</span><span id="line-552"></span><span class="hs-comment">--                  &#9475;1&#9482;1&#9482;1&#9482;0&#9482;0&#9482;0&#9482;0&#9482;0&#9475; Testnet PaymentKey    StakingKey    &#9475;</span><span>
</span><span id="line-553"></span><span class="hs-comment">--                  &#9475;1&#9482;1&#9482;1&#9482;0&#9482;0&#9482;0&#9482;0&#9482;1&#9475; Mainnet PaymentKey    StakingKey    &#9475;</span><span>
</span><span id="line-554"></span><span class="hs-comment">--                  &#9475;1&#9482;1&#9482;1&#9482;1&#9482;0&#9482;0&#9482;0&#9482;0&#9475; Testnet PaymentScript StakingKey    &#9475;</span><span>
</span><span id="line-555"></span><span class="hs-comment">--                  &#9475;1&#9482;1&#9482;1&#9482;1&#9482;0&#9482;0&#9482;0&#9482;1&#9475; Mainnet PaymentScript StakingKey    &#9475;</span><span>
</span><span id="line-556"></span><span class="hs-comment">--                  &#9495;&#9473;&#9527;&#9473;&#9527;&#9473;&#9527;&#9473;&#9527;&#9473;&#9527;&#9473;&#9527;&#9473;&#9527;&#9473;&#9531;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9473;&#9499;</span><span>
</span><span id="line-557"></span><span class="hs-comment">--                          \       \</span><span>
</span><span id="line-558"></span><span class="hs-comment">--                           \       `Is Mainnet Address</span><span>
</span><span id="line-559"></span><span class="hs-comment">--                            `Account Credential is a Script</span><span>
</span><span id="line-560"></span><span class="hs-comment">-- @@@</span><span>
</span><span id="line-561"></span><span id="local-6989586621679246251"><span id="local-6989586621679246252"><span id="local-6989586621679246253"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodeRewardAccountT"><span class="hs-identifier hs-type">decodeRewardAccountT</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-562"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadFail</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246253"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246252"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#AddressBuffer"><span class="hs-identifier hs-type">AddressBuffer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246251"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-563"></span><span>  </span><span class="annot"><a href="#local-6989586621679246251"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-564"></span><span>  </span><span class="annot"><a href="../../../../transformers/html/src"><span class="hs-identifier hs-type">StateT</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246253"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Address.html#RewardAcnt"><span class="hs-identifier hs-type">RewardAcnt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246252"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-565"></span><span id="decodeRewardAccountT"><span class="annot"><span class="annottext">decodeRewardAccountT :: b -&gt; StateT Int m (RewardAcnt crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#decodeRewardAccountT"><span class="hs-identifier hs-var hs-var">decodeRewardAccountT</span></a></span></span><span> </span><span id="local-6989586621679245788"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245788"><span class="hs-identifier hs-var">buf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-566"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; b -&gt; StateT Int m ()
forall (m :: * -&gt; *) b.
(MonadFail m, AddressBuffer b) =&gt;
String -&gt; Int -&gt; b -&gt; StateT Int m ()
</span><a href="Cardano.Ledger.CompactAddress.html#guardLength"><span class="hs-identifier hs-var">guardLength</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Header&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245788"><span class="hs-identifier hs-var">buf</span></a></span><span>
</span><span id="line-567"></span><span>  </span><span class="annot"><span class="annottext">(Int -&gt; Int) -&gt; StateT Int m ()
forall (m :: * -&gt; *) s. Monad m =&gt; (s -&gt; s) -&gt; StateT s m ()
</span><a href="../../../../transformers/html/src"><span class="hs-identifier hs-var">modify'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-568"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679245787"><span class="annot"><span class="annottext">header :: Header
</span><a href="#local-6989586621679245787"><span class="hs-identifier hs-var hs-var">header</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Header
</span><a href="Cardano.Ledger.CompactAddress.html#Header"><span class="hs-identifier hs-var">Header</span></a></span><span> </span><span class="annot"><span class="annottext">(Word8 -&gt; Header) -&gt; Word8 -&gt; Header
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; Int -&gt; Word8
forall b. AddressBuffer b =&gt; b -&gt; Int -&gt; Word8
</span><a href="Cardano.Ledger.CompactAddress.html#bufUnsafeIndex"><span class="hs-identifier hs-var">bufUnsafeIndex</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245788"><span class="hs-identifier hs-var">buf</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-569"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; StateT Int m () -&gt; StateT Int m ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Header -&gt; Bool
</span><a href="Cardano.Ledger.CompactAddress.html#headerIsRewardAccount"><span class="hs-identifier hs-var">headerIsRewardAccount</span></a></span><span> </span><span class="annot"><span class="annottext">Header
</span><a href="#local-6989586621679245787"><span class="hs-identifier hs-var">header</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(StateT Int m () -&gt; StateT Int m ())
-&gt; StateT Int m () -&gt; StateT Int m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-570"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; StateT Int m ()
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fail</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; StateT Int m ()) -&gt; String -&gt; StateT Int m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Invalid header for the reward account: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Header -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Header
</span><a href="#local-6989586621679245787"><span class="hs-identifier hs-var">header</span></a></span><span>
</span><span id="line-571"></span><span>  </span><span id="local-6989586621679245786"><span class="annot"><span class="annottext">Credential 'Staking crypto
</span><a href="#local-6989586621679245786"><span class="hs-identifier hs-var">account</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-572"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Header -&gt; Bool
</span><a href="Cardano.Ledger.CompactAddress.html#headerRewardAccountIsScript"><span class="hs-identifier hs-var">headerRewardAccountIsScript</span></a></span><span> </span><span class="annot"><span class="annottext">Header
</span><a href="#local-6989586621679245787"><span class="hs-identifier hs-var">header</span></a></span><span>
</span><span id="line-573"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">ScriptHash crypto -&gt; Credential 'Staking crypto
forall (kr :: KeyRole) crypto.
ScriptHash crypto -&gt; Credential kr crypto
</span><a href="Cardano.Ledger.Credential.html#ScriptHashObj"><span class="hs-identifier hs-var">ScriptHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">(ScriptHash crypto -&gt; Credential 'Staking crypto)
-&gt; StateT Int m (ScriptHash crypto)
-&gt; StateT Int m (Credential 'Staking crypto)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; StateT Int m (ScriptHash crypto)
forall crypto (m :: * -&gt; *) b.
(Crypto crypto, MonadFail m, AddressBuffer b) =&gt;
b -&gt; StateT Int m (ScriptHash crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#decodeScriptHash"><span class="hs-identifier hs-var">decodeScriptHash</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245788"><span class="hs-identifier hs-var">buf</span></a></span><span>
</span><span id="line-574"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">KeyHash 'Staking crypto -&gt; Credential 'Staking crypto
forall (kr :: KeyRole) crypto.
KeyHash kr crypto -&gt; Credential kr crypto
</span><a href="Cardano.Ledger.Credential.html#KeyHashObj"><span class="hs-identifier hs-var">KeyHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">(KeyHash 'Staking crypto -&gt; Credential 'Staking crypto)
-&gt; StateT Int m (KeyHash 'Staking crypto)
-&gt; StateT Int m (Credential 'Staking crypto)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; StateT Int m (KeyHash 'Staking crypto)
forall crypto (m :: * -&gt; *) b (kr :: KeyRole).
(Crypto crypto, MonadFail m, AddressBuffer b) =&gt;
b -&gt; StateT Int m (KeyHash kr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#decodeKeyHash"><span class="hs-identifier hs-var">decodeKeyHash</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245788"><span class="hs-identifier hs-var">buf</span></a></span><span>
</span><span id="line-575"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; b -&gt; StateT Int m ()
forall (m :: * -&gt; *) b.
(MonadFail m, AddressBuffer b) =&gt;
String -&gt; b -&gt; StateT Int m ()
</span><a href="Cardano.Ledger.CompactAddress.html#ensureBufIsConsumed"><span class="hs-identifier hs-var">ensureBufIsConsumed</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;RewardsAcnt&quot;</span></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679245788"><span class="hs-identifier hs-var">buf</span></a></span><span>
</span><span id="line-576"></span><span>  </span><span class="annot"><span class="annottext">RewardAcnt crypto -&gt; StateT Int m (RewardAcnt crypto)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(RewardAcnt crypto -&gt; StateT Int m (RewardAcnt crypto))
-&gt; RewardAcnt crypto -&gt; StateT Int m (RewardAcnt crypto)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">Network -&gt; Credential 'Staking crypto -&gt; RewardAcnt crypto
forall crypto.
Network -&gt; Credential 'Staking crypto -&gt; RewardAcnt crypto
</span><a href="Cardano.Ledger.Address.html#RewardAcnt"><span class="hs-identifier hs-var">RewardAcnt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Header -&gt; Network
</span><a href="Cardano.Ledger.CompactAddress.html#headerNetworkId"><span class="hs-identifier hs-var">headerNetworkId</span></a></span><span> </span><span class="annot"><span class="annottext">Header
</span><a href="#local-6989586621679245787"><span class="hs-identifier hs-var">header</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking crypto
</span><a href="#local-6989586621679245786"><span class="hs-identifier hs-var">account</span></a></span><span>
</span><span id="line-577"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decodeRewardAccountT"><span class="hs-pragma hs-type">decodeRewardAccountT</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-578"></span><span>
</span><span id="line-579"></span><span class="hs-comment">------------------------------------------------------------------------------------------</span><span>
</span><span id="line-580"></span><span class="hs-comment">-- Old Address Deserializer --------------------------------------------------------------</span><span>
</span><span id="line-581"></span><span class="hs-comment">------------------------------------------------------------------------------------------</span><span>
</span><span id="line-582"></span><span>
</span><span id="line-583"></span><span class="hs-comment">-- | This lazy deserializer is kept around purely for benchmarking, so we can</span><span>
</span><span id="line-584"></span><span class="hs-comment">-- verify that new deserializer `decodeAddrStateT` is doing the work lazily.</span><span>
</span><span id="line-585"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#decompactAddrLazy"><span class="hs-identifier hs-type">decompactAddrLazy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679245783"><span class="annot"><a href="#local-6989586621679245783"><span class="hs-identifier hs-type">crypto</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679245783"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#CompactAddr"><span class="hs-identifier hs-type">CompactAddr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679245783"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.Address.html#Addr"><span class="hs-identifier hs-type">Addr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679245783"><span class="hs-identifier hs-type">crypto</span></a></span><span>
</span><span id="line-586"></span><span id="decompactAddrLazy"><span class="annot"><span class="annottext">decompactAddrLazy :: CompactAddr crypto -&gt; Addr crypto
</span><a href="Cardano.Ledger.CompactAddress.html#decompactAddrLazy"><span class="hs-identifier hs-var hs-var">decompactAddrLazy</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#UnsafeCompactAddr"><span class="hs-identifier hs-type">UnsafeCompactAddr</span></a></span><span> </span><span id="local-6989586621679245782"><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245782"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-587"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Int -&gt; Bool
forall a. Bits a =&gt; a -&gt; Int -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">testBit</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679245781"><span class="hs-identifier hs-var">header</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="Cardano.Ledger.Address.html#byron"><span class="hs-identifier hs-var">byron</span></a></span><span>
</span><span id="line-588"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">BootstrapAddress crypto -&gt; Addr crypto
forall crypto. BootstrapAddress crypto -&gt; Addr crypto
</span><a href="Cardano.Ledger.Address.html#AddrBootstrap"><span class="hs-identifier hs-var">AddrBootstrap</span></a></span><span> </span><span class="annot"><span class="annottext">(BootstrapAddress crypto -&gt; Addr crypto)
-&gt; BootstrapAddress crypto -&gt; Addr crypto
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text
-&gt; Int
-&gt; ShortByteString
-&gt; GetShort (BootstrapAddress crypto)
-&gt; BootstrapAddress crypto
forall a. Text -&gt; Int -&gt; ShortByteString -&gt; GetShort a -&gt; a
</span><a href="#local-6989586621679245780"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;byron address&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245782"><span class="hs-identifier hs-var">bytes</span></a></span><span> </span><span class="annot"><span class="annottext">GetShort (BootstrapAddress crypto)
forall crypto. GetShort (BootstrapAddress crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#getBootstrapAddress"><span class="hs-identifier hs-var">getBootstrapAddress</span></a></span><span>
</span><span id="line-589"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Network
-&gt; PaymentCredential crypto -&gt; StakeReference crypto -&gt; Addr crypto
forall crypto.
Network
-&gt; PaymentCredential crypto -&gt; StakeReference crypto -&gt; Addr crypto
</span><a href="Cardano.Ledger.Address.html#Addr"><span class="hs-identifier hs-var">Addr</span></a></span><span> </span><span class="annot"><span class="annottext">Network
</span><a href="#local-6989586621679245778"><span class="hs-identifier hs-var">addrNetId</span></a></span><span> </span><span class="annot"><span class="annottext">PaymentCredential crypto
</span><a href="#local-6989586621679245777"><span class="hs-identifier hs-var">paycred</span></a></span><span> </span><span class="annot"><span class="annottext">StakeReference crypto
</span><a href="#local-6989586621679245776"><span class="hs-identifier hs-var">stakecred</span></a></span><span>
</span><span id="line-590"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-591"></span><span>    </span><span class="annot"><a href="#local-6989586621679245780"><span class="hs-identifier hs-type">run</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679246240"><span class="annot"><a href="#local-6989586621679246240"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">ShortByteString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#GetShort"><span class="hs-identifier hs-type">GetShort</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246240"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679246240"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-592"></span><span>    </span><span id="local-6989586621679245780"><span class="annot"><span class="annottext">run :: Text -&gt; Int -&gt; ShortByteString -&gt; GetShort a -&gt; a
</span><a href="#local-6989586621679245780"><span class="hs-identifier hs-var hs-var">run</span></a></span></span><span> </span><span id="local-6989586621679245775"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679245775"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679245774"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245774"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679245773"><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245773"><span class="hs-identifier hs-var">sbs</span></a></span></span><span> </span><span id="local-6989586621679245772"><span class="annot"><span class="annottext">GetShort a
</span><a href="#local-6989586621679245772"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int, a) -&gt; a
forall a b. (a, b) -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">((Int, a) -&gt; a)
-&gt; (Maybe (Int, a) -&gt; (Int, a)) -&gt; Maybe (Int, a) -&gt; a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe (Int, a) -&gt; (Int, a)
forall a. Text -&gt; Maybe a -&gt; a
</span><a href="#local-6989586621679245771"><span class="hs-identifier hs-var">unwrap</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679245775"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (Int, a) -&gt; a) -&gt; Maybe (Int, a) -&gt; a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">GetShort a -&gt; Int -&gt; ShortByteString -&gt; Maybe (Int, a)
forall a. GetShort a -&gt; Int -&gt; ShortByteString -&gt; Maybe (Int, a)
</span><a href="Cardano.Ledger.CompactAddress.html#runGetShort"><span class="hs-identifier hs-var hs-var">runGetShort</span></a></span><span> </span><span class="annot"><span class="annottext">GetShort a
</span><a href="#local-6989586621679245772"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245774"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245773"><span class="hs-identifier hs-var">sbs</span></a></span><span>
</span><span id="line-593"></span><span>    </span><span class="hs-comment">-- The reason failure is impossible here is that the only way to call this code</span><span>
</span><span id="line-594"></span><span>    </span><span class="hs-comment">-- is using a CompactAddr, which can only be constructed using compactAddr.</span><span>
</span><span id="line-595"></span><span>    </span><span class="hs-comment">-- compactAddr serializes an Addr, so this is guaranteed to work.</span><span>
</span><span id="line-596"></span><span>    </span><span class="annot"><a href="#local-6989586621679245771"><span class="hs-identifier hs-type">unwrap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679245770"><span class="annot"><a href="#local-6989586621679245770"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679245770"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679245770"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-597"></span><span>    </span><span id="local-6989586621679245771"><span class="annot"><span class="annottext">unwrap :: Text -&gt; Maybe a -&gt; a
</span><a href="#local-6989586621679245771"><span class="hs-identifier hs-var hs-var">unwrap</span></a></span></span><span> </span><span id="local-6989586621679245769"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679245769"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Maybe a -&gt; a
forall a. a -&gt; Maybe a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; a
forall a. HasCallStack =&gt; Text -&gt; a
</span><a href="../../../../protolude/html/src"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; a) -&gt; Text -&gt; a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Impossible failure when decoding &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679245769"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-598"></span><span>    </span><span id="local-6989586621679245781"><span class="annot"><span class="annottext">header :: Word8
</span><a href="#local-6989586621679245781"><span class="hs-identifier hs-var hs-var">header</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Int -&gt; ShortByteString -&gt; GetShort Word8 -&gt; Word8
forall a. Text -&gt; Int -&gt; ShortByteString -&gt; GetShort a -&gt; a
</span><a href="#local-6989586621679245780"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;address header&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245782"><span class="hs-identifier hs-var">bytes</span></a></span><span> </span><span class="annot"><span class="annottext">GetShort Word8
</span><a href="Cardano.Ledger.CompactAddress.html#getWord"><span class="hs-identifier hs-var">getWord</span></a></span><span>
</span><span id="line-599"></span><span>    </span><span id="local-6989586621679245778"><span class="annot"><span class="annottext">addrNetId :: Network
</span><a href="#local-6989586621679245778"><span class="hs-identifier hs-var hs-var">addrNetId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-600"></span><span>      </span><span class="annot"><span class="annottext">Text -&gt; Maybe Network -&gt; Network
forall a. Text -&gt; Maybe a -&gt; a
</span><a href="#local-6989586621679245771"><span class="hs-identifier hs-var">unwrap</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;address network id&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Network -&gt; Network) -&gt; Maybe Network -&gt; Network
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-601"></span><span>        </span><span class="annot"><span class="annottext">Word8 -&gt; Maybe Network
</span><a href="Cardano.Ledger.BaseTypes.html#word8ToNetwork"><span class="hs-identifier hs-var">word8ToNetwork</span></a></span><span> </span><span class="annot"><span class="annottext">(Word8 -&gt; Maybe Network) -&gt; Word8 -&gt; Maybe Network
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679245781"><span class="hs-identifier hs-var">header</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Word8
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.&amp;.</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x0F</span></span><span> </span><span class="hs-comment">-- 0b00001111 is the mask for the network id</span><span>
</span><span id="line-602"></span><span>        </span><span class="hs-comment">-- The address format is</span><span>
</span><span id="line-603"></span><span>        </span><span class="hs-comment">-- header | pay cred | stake cred</span><span>
</span><span id="line-604"></span><span>        </span><span class="hs-comment">-- where the header is 1 byte</span><span>
</span><span id="line-605"></span><span>        </span><span class="hs-comment">-- the pay cred is (sizeHash (ADDRHASH crypto)) bytes</span><span>
</span><span id="line-606"></span><span>        </span><span class="hs-comment">-- and the stake cred can vary</span><span>
</span><span id="line-607"></span><span>    </span><span id="local-6989586621679245777"><span class="annot"><span class="annottext">paycred :: PaymentCredential crypto
</span><a href="#local-6989586621679245777"><span class="hs-identifier hs-var hs-var">paycred</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
-&gt; Int
-&gt; ShortByteString
-&gt; GetShort (PaymentCredential crypto)
-&gt; PaymentCredential crypto
forall a. Text -&gt; Int -&gt; ShortByteString -&gt; GetShort a -&gt; a
</span><a href="#local-6989586621679245780"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;payment credential&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245782"><span class="hs-identifier hs-var">bytes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word8 -&gt; GetShort (PaymentCredential crypto)
forall crypto.
Crypto crypto =&gt;
Word8 -&gt; GetShort (PaymentCredential crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#getPayCred"><span class="hs-identifier hs-var">getPayCred</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679245781"><span class="hs-identifier hs-var">header</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-608"></span><span>    </span><span id="local-6989586621679245776"><span class="annot"><span class="annottext">stakecred :: StakeReference crypto
</span><a href="#local-6989586621679245776"><span class="hs-identifier hs-var hs-var">stakecred</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
-&gt; Int
-&gt; ShortByteString
-&gt; GetShort (StakeReference crypto)
-&gt; StakeReference crypto
forall a. Text -&gt; Int -&gt; ShortByteString -&gt; GetShort a -&gt; a
</span><a href="#local-6989586621679245780"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;staking credential&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245782"><span class="hs-identifier hs-var">bytes</span></a></span><span> </span><span class="annot"><span class="annottext">(GetShort (StakeReference crypto) -&gt; StakeReference crypto)
-&gt; GetShort (StakeReference crypto) -&gt; StakeReference crypto
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-609"></span><span>      </span><span class="annot"><span class="annottext">[ADDRHASH crypto] -&gt; GetShort ()
forall (proxy :: * -&gt; *) h.
HashAlgorithm h =&gt;
proxy h -&gt; GetShort ()
</span><a href="#local-6989586621679245766"><span class="hs-identifier hs-var">skipHash</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Crypto.html#ADDRHASH"><span class="hs-identifier hs-type">ADDRHASH</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679245783"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-610"></span><span>      </span><span class="annot"><span class="annottext">Word8 -&gt; GetShort (StakeReference crypto)
forall crypto.
Crypto crypto =&gt;
Word8 -&gt; GetShort (StakeReference crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#getStakeReference"><span class="hs-identifier hs-var">getStakeReference</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679245781"><span class="hs-identifier hs-var">header</span></a></span><span>
</span><span id="line-611"></span><span>    </span><span class="annot"><a href="#local-6989586621679245766"><span class="hs-identifier hs-type">skipHash</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679246234"><span class="annot"><a href="#local-6989586621679246234"><span class="hs-identifier hs-type">proxy</span></a></span></span><span> </span><span id="local-6989586621679246235"><span class="annot"><a href="#local-6989586621679246235"><span class="hs-identifier hs-type">h</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../../../../cardano-crypto-class/html/src"><span class="hs-identifier hs-type">Hash.HashAlgorithm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246235"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679246234"><span class="hs-identifier hs-type">proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246235"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#GetShort"><span class="hs-identifier hs-type">GetShort</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-612"></span><span>    </span><span id="local-6989586621679245766"><span class="annot"><span class="annottext">skipHash :: proxy h -&gt; GetShort ()
</span><a href="#local-6989586621679245766"><span class="hs-identifier hs-var hs-var">skipHash</span></a></span></span><span> </span><span id="local-6989586621679245764"><span class="annot"><span class="annottext">proxy h
</span><a href="#local-6989586621679245764"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; GetShort ()
</span><a href="#local-6989586621679245763"><span class="hs-identifier hs-var">skip</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; GetShort ()) -&gt; (Word -&gt; Int) -&gt; Word -&gt; GetShort ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word -&gt; GetShort ()) -&gt; Word -&gt; GetShort ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">proxy h -&gt; Word
forall h (proxy :: * -&gt; *). HashAlgorithm h =&gt; proxy h -&gt; Word
</span><a href="../../../../cardano-crypto-class/html/src"><span class="hs-identifier hs-var">Hash.sizeHash</span></a></span><span> </span><span class="annot"><span class="annottext">proxy h
</span><a href="#local-6989586621679245764"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-613"></span><span>    </span><span class="annot"><a href="#local-6989586621679245763"><span class="hs-identifier hs-type">skip</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#GetShort"><span class="hs-identifier hs-type">GetShort</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-614"></span><span>    </span><span id="local-6989586621679245763"><span class="annot"><span class="annottext">skip :: Int -&gt; GetShort ()
</span><a href="#local-6989586621679245763"><span class="hs-identifier hs-var hs-var">skip</span></a></span></span><span> </span><span id="local-6989586621679245762"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245762"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; ShortByteString -&gt; Maybe (Int, ())) -&gt; GetShort ()
forall a. (Int -&gt; ShortByteString -&gt; Maybe (Int, a)) -&gt; GetShort a
</span><a href="Cardano.Ledger.CompactAddress.html#GetShort"><span class="hs-identifier hs-var">GetShort</span></a></span><span> </span><span class="annot"><span class="annottext">((Int -&gt; ShortByteString -&gt; Maybe (Int, ())) -&gt; GetShort ())
-&gt; (Int -&gt; ShortByteString -&gt; Maybe (Int, ())) -&gt; GetShort ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679245760"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245760"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679245759"><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245759"><span class="hs-identifier hs-var">sbs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-615"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679245758"><span class="annot"><span class="annottext">offsetStop :: Int
</span><a href="#local-6989586621679245758"><span class="hs-identifier hs-var hs-var">offsetStop</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245760"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245762"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-616"></span><span>       </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245758"><span class="hs-identifier hs-var">offsetStop</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Int
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">SBS.length</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245759"><span class="hs-identifier hs-var">sbs</span></a></span><span>
</span><span id="line-617"></span><span>            </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">(Int, ()) -&gt; Maybe (Int, ())
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245758"><span class="hs-identifier hs-var">offsetStop</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-618"></span><span>            </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Maybe (Int, ())
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-619"></span><span>
</span><span id="line-620"></span><span id="local-6989586621679245756"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679245750"><span id="local-6989586621679245752"><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679245756"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#CompactAddr"><span class="hs-identifier hs-type">CompactAddr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679245756"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-621"></span><span>  </span><span id="local-6989586621679245748"><span class="annot"><span class="annottext">toCBOR :: CompactAddr crypto -&gt; Encoding
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">toCBOR</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#UnsafeCompactAddr"><span class="hs-identifier hs-type">UnsafeCompactAddr</span></a></span><span> </span><span id="local-6989586621679245746"><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245746"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Encoding
forall a. ToCBOR a =&gt; a -&gt; Encoding
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">toCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245746"><span class="hs-identifier hs-var">bytes</span></a></span></span><span>
</span><span id="line-622"></span><span>
</span><span id="line-623"></span><span id="local-6989586621679245745"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679245741"><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679245745"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#CompactAddr"><span class="hs-identifier hs-type">CompactAddr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679245745"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-624"></span><span>  </span><span id="local-6989586621679245739"><span class="annot"><span class="annottext">fromCBOR :: Decoder s (CompactAddr crypto)
</span><a href="#local-6989586621679245739"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromCBOR</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-625"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679245738"><span class="annot"><span class="annottext">Addr crypto
</span><a href="#local-6989586621679245738"><span class="hs-identifier hs-var">_addr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679245737"><span class="annot"><span class="annottext">CompactAddr crypto
</span><a href="#local-6989586621679245737"><span class="hs-identifier hs-var">cAddr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s (Addr crypto, CompactAddr crypto)
forall crypto s.
Crypto crypto =&gt;
Decoder s (Addr crypto, CompactAddr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#fromCborBackwardsBothAddr"><span class="hs-identifier hs-var">fromCborBackwardsBothAddr</span></a></span><span>
</span><span id="line-626"></span><span>    </span><span class="annot"><span class="annottext">CompactAddr crypto -&gt; Decoder s (CompactAddr crypto)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">CompactAddr crypto
</span><a href="#local-6989586621679245737"><span class="hs-identifier hs-var">cAddr</span></a></span><span>
</span><span id="line-627"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="../../../../cardano-binary/html/src"><span class="hs-pragma hs-type">fromCBOR</span></a></span><span> </span><span class="hs-pragma">#-}</span></span><span>
</span><span id="line-628"></span><span>
</span><span id="line-629"></span><span class="hs-keyword">newtype</span><span> </span><span id="GetShort"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#GetShort"><span class="hs-identifier hs-var">GetShort</span></a></span></span><span> </span><span id="local-6989586621679246499"><span class="annot"><a href="#local-6989586621679246499"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="GetShort"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#GetShort"><span class="hs-identifier hs-var">GetShort</span></a></span></span><span> </span><span class="hs-special">{</span><span id="runGetShort"><span class="annot"><span class="annottext">GetShort a -&gt; Int -&gt; ShortByteString -&gt; Maybe (Int, a)
</span><a href="Cardano.Ledger.CompactAddress.html#runGetShort"><span class="hs-identifier hs-var hs-var">runGetShort</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">ShortByteString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679246499"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-630"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679245733"><span id="local-6989586621679245735"><span class="annot"><span class="annottext">a -&gt; GetShort b -&gt; GetShort a
(a -&gt; b) -&gt; GetShort a -&gt; GetShort b
(forall a b. (a -&gt; b) -&gt; GetShort a -&gt; GetShort b)
-&gt; (forall a b. a -&gt; GetShort b -&gt; GetShort a) -&gt; Functor GetShort
forall a b. a -&gt; GetShort b -&gt; GetShort a
forall a b. (a -&gt; b) -&gt; GetShort a -&gt; GetShort b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
&lt;$ :: a -&gt; GetShort b -&gt; GetShort a
$c&lt;$ :: forall a b. a -&gt; GetShort b -&gt; GetShort a
fmap :: (a -&gt; b) -&gt; GetShort a -&gt; GetShort b
$cfmap :: forall a b. (a -&gt; b) -&gt; GetShort a -&gt; GetShort b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-631"></span><span>
</span><span id="line-632"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679245724"><span id="local-6989586621679245726"><span id="local-6989586621679245728"><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Applicative</span></a></span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#GetShort"><span class="hs-identifier hs-type">GetShort</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-633"></span><span>  </span><span id="local-6989586621679245723"><span class="annot"><span class="annottext">pure :: a -&gt; GetShort a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">pure</span></a></span></span><span> </span><span id="local-6989586621679245722"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679245722"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; ShortByteString -&gt; Maybe (Int, a)) -&gt; GetShort a
forall a. (Int -&gt; ShortByteString -&gt; Maybe (Int, a)) -&gt; GetShort a
</span><a href="Cardano.Ledger.CompactAddress.html#GetShort"><span class="hs-identifier hs-var">GetShort</span></a></span><span> </span><span class="annot"><span class="annottext">((Int -&gt; ShortByteString -&gt; Maybe (Int, a)) -&gt; GetShort a)
-&gt; (Int -&gt; ShortByteString -&gt; Maybe (Int, a)) -&gt; GetShort a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679245721"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245721"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679245720"><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245720"><span class="hs-identifier hs-var">_sbs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Int, a) -&gt; Maybe (Int, a)
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245721"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679245722"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-634"></span><span>  </span><span id="local-6989586621679245719"><span class="annot"><span class="annottext">&lt;*&gt; :: GetShort (a -&gt; b) -&gt; GetShort a -&gt; GetShort b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">(&lt;*&gt;)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GetShort (a -&gt; b) -&gt; GetShort a -&gt; GetShort b
forall (m :: * -&gt; *) a b. Monad m =&gt; m (a -&gt; b) -&gt; m a -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">ap</span></a></span><span>
</span><span id="line-635"></span><span>
</span><span id="line-636"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679245713"><span id="local-6989586621679245715"><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Monad</span></a></span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#GetShort"><span class="hs-identifier hs-type">GetShort</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-637"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#GetShort"><span class="hs-identifier hs-type">GetShort</span></a></span><span> </span><span id="local-6989586621679245712"><span class="annot"><span class="annottext">Int -&gt; ShortByteString -&gt; Maybe (Int, a)
</span><a href="#local-6989586621679245712"><span class="hs-identifier hs-var">g</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679245711"><span class="annot"><span class="annottext">&gt;&gt;= :: GetShort a -&gt; (a -&gt; GetShort b) -&gt; GetShort b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">&gt;&gt;=</span></a></span></span><span> </span><span id="local-6989586621679245710"><span class="annot"><span class="annottext">a -&gt; GetShort b
</span><a href="#local-6989586621679245710"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; ShortByteString -&gt; Maybe (Int, b)) -&gt; GetShort b
forall a. (Int -&gt; ShortByteString -&gt; Maybe (Int, a)) -&gt; GetShort a
</span><a href="Cardano.Ledger.CompactAddress.html#GetShort"><span class="hs-identifier hs-var">GetShort</span></a></span><span> </span><span class="annot"><span class="annottext">((Int -&gt; ShortByteString -&gt; Maybe (Int, b)) -&gt; GetShort b)
-&gt; (Int -&gt; ShortByteString -&gt; Maybe (Int, b)) -&gt; GetShort b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679245709"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245709"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679245708"><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245708"><span class="hs-identifier hs-var">sbs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-638"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Int -&gt; ShortByteString -&gt; Maybe (Int, a)
</span><a href="#local-6989586621679245712"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245709"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245708"><span class="hs-identifier hs-var">sbs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-639"></span><span>      </span><span class="annot"><span class="annottext">Maybe (Int, a)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Int, b)
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-640"></span><span>      </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679245707"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245707"><span class="hs-identifier hs-var">i'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679245706"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679245706"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GetShort b -&gt; Int -&gt; ShortByteString -&gt; Maybe (Int, b)
forall a. GetShort a -&gt; Int -&gt; ShortByteString -&gt; Maybe (Int, a)
</span><a href="Cardano.Ledger.CompactAddress.html#runGetShort"><span class="hs-identifier hs-var hs-var">runGetShort</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; GetShort b
</span><a href="#local-6989586621679245710"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679245706"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245707"><span class="hs-identifier hs-var">i'</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245708"><span class="hs-identifier hs-var">sbs</span></a></span><span>
</span><span id="line-641"></span><span>
</span><span id="line-642"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Control.Monad.Fail.MonadFail</span></a></span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#GetShort"><span class="hs-identifier hs-type">GetShort</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-643"></span><span>  </span><span id="local-6989586621679245703"><span class="annot"><span class="annottext">fail :: String -&gt; GetShort a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">fail</span></a></span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; ShortByteString -&gt; Maybe (Int, a)) -&gt; GetShort a
forall a. (Int -&gt; ShortByteString -&gt; Maybe (Int, a)) -&gt; GetShort a
</span><a href="Cardano.Ledger.CompactAddress.html#GetShort"><span class="hs-identifier hs-var">GetShort</span></a></span><span> </span><span class="annot"><span class="annottext">((Int -&gt; ShortByteString -&gt; Maybe (Int, a)) -&gt; GetShort a)
-&gt; (Int -&gt; ShortByteString -&gt; Maybe (Int, a)) -&gt; GetShort a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Int, a)
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-644"></span><span>
</span><span id="line-645"></span><span id="local-6989586621679246498"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#getShortAddr"><span class="hs-identifier hs-type">getShortAddr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246498"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#GetShort"><span class="hs-identifier hs-type">GetShort</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Address.html#Addr"><span class="hs-identifier hs-type">Addr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246498"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-646"></span><span id="getShortAddr"><span class="annot"><span class="annottext">getShortAddr :: GetShort (Addr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#getShortAddr"><span class="hs-identifier hs-var hs-var">getShortAddr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-647"></span><span>  </span><span id="local-6989586621679245702"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679245702"><span class="hs-identifier hs-var">header</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GetShort Word8
</span><a href="Cardano.Ledger.CompactAddress.html#peekWord8"><span class="hs-identifier hs-var">peekWord8</span></a></span><span>
</span><span id="line-648"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Int -&gt; Bool
forall a. Bits a =&gt; a -&gt; Int -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">testBit</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679245702"><span class="hs-identifier hs-var">header</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="Cardano.Ledger.Address.html#byron"><span class="hs-identifier hs-var">byron</span></a></span><span>
</span><span id="line-649"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">BootstrapAddress crypto -&gt; Addr crypto
forall crypto. BootstrapAddress crypto -&gt; Addr crypto
</span><a href="Cardano.Ledger.Address.html#AddrBootstrap"><span class="hs-identifier hs-var">AddrBootstrap</span></a></span><span> </span><span class="annot"><span class="annottext">(BootstrapAddress crypto -&gt; Addr crypto)
-&gt; GetShort (BootstrapAddress crypto) -&gt; GetShort (Addr crypto)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GetShort (BootstrapAddress crypto)
forall crypto. GetShort (BootstrapAddress crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#getBootstrapAddress"><span class="hs-identifier hs-var">getBootstrapAddress</span></a></span><span>
</span><span id="line-650"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-651"></span><span>      </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GetShort Word8
</span><a href="Cardano.Ledger.CompactAddress.html#getWord"><span class="hs-identifier hs-var">getWord</span></a></span><span> </span><span class="hs-comment">-- read past the header byte</span><span>
</span><span id="line-652"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679245700"><span class="annot"><span class="annottext">addrNetId :: Word8
</span><a href="#local-6989586621679245700"><span class="hs-identifier hs-var hs-var">addrNetId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679245702"><span class="hs-identifier hs-var">header</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Word8
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.&amp;.</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x0F</span></span><span> </span><span class="hs-comment">-- 0b00001111 is the mask for the network id</span><span>
</span><span id="line-653"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Maybe Network
</span><a href="Cardano.Ledger.BaseTypes.html#word8ToNetwork"><span class="hs-identifier hs-var">word8ToNetwork</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679245700"><span class="hs-identifier hs-var">addrNetId</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-654"></span><span>        </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679245699"><span class="annot"><span class="annottext">Network
</span><a href="#local-6989586621679245699"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-655"></span><span>          </span><span id="local-6989586621679245698"><span class="annot"><span class="annottext">PaymentCredential crypto
</span><a href="#local-6989586621679245698"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; GetShort (PaymentCredential crypto)
forall crypto.
Crypto crypto =&gt;
Word8 -&gt; GetShort (PaymentCredential crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#getPayCred"><span class="hs-identifier hs-var">getPayCred</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679245702"><span class="hs-identifier hs-var">header</span></a></span><span>
</span><span id="line-656"></span><span>          </span><span id="local-6989586621679245697"><span class="annot"><span class="annottext">StakeReference crypto
</span><a href="#local-6989586621679245697"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; GetShort (StakeReference crypto)
forall crypto.
Crypto crypto =&gt;
Word8 -&gt; GetShort (StakeReference crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#getStakeReference"><span class="hs-identifier hs-var">getStakeReference</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679245702"><span class="hs-identifier hs-var">header</span></a></span><span>
</span><span id="line-657"></span><span>          </span><span class="annot"><span class="annottext">Addr crypto -&gt; GetShort (Addr crypto)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Network
-&gt; PaymentCredential crypto -&gt; StakeReference crypto -&gt; Addr crypto
forall crypto.
Network
-&gt; PaymentCredential crypto -&gt; StakeReference crypto -&gt; Addr crypto
</span><a href="Cardano.Ledger.Address.html#Addr"><span class="hs-identifier hs-var">Addr</span></a></span><span> </span><span class="annot"><span class="annottext">Network
</span><a href="#local-6989586621679245699"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">PaymentCredential crypto
</span><a href="#local-6989586621679245698"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">StakeReference crypto
</span><a href="#local-6989586621679245697"><span class="hs-identifier hs-var">h</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-658"></span><span>        </span><span class="annot"><span class="annottext">Maybe Network
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-659"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; GetShort (Addr crypto)
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fail</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; GetShort (Addr crypto))
-&gt; String -&gt; GetShort (Addr crypto)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-660"></span><span>            </span><span class="annot"><span class="annottext">[String] -&gt; String
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">concat</span></a></span><span>
</span><span id="line-661"></span><span>              </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Address with unknown network Id. (&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679245700"><span class="hs-identifier hs-var">addrNetId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;)&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-662"></span><span>
</span><span id="line-663"></span><span id="local-6989586621679246239"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#getBootstrapAddress"><span class="hs-identifier hs-type">getBootstrapAddress</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#GetShort"><span class="hs-identifier hs-type">GetShort</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Address.html#BootstrapAddress"><span class="hs-identifier hs-type">BootstrapAddress</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246239"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-664"></span><span id="getBootstrapAddress"><span class="annot"><span class="annottext">getBootstrapAddress :: GetShort (BootstrapAddress crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#getBootstrapAddress"><span class="hs-identifier hs-var hs-var">getBootstrapAddress</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-665"></span><span>  </span><span id="local-6989586621679245695"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679245695"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GetShort ByteString
</span><a href="Cardano.Ledger.CompactAddress.html#getRemainingAsByteString"><span class="hs-identifier hs-var">getRemainingAsByteString</span></a></span><span>
</span><span id="line-666"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either DecoderError Address
forall a. FromCBOR a =&gt; ByteString -&gt; Either DecoderError a
</span><a href="../../../../cardano-binary/html/src"><span class="hs-identifier hs-var">decodeFull'</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679245695"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-667"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621679245693"><span class="annot"><span class="annottext">DecoderError
</span><a href="#local-6989586621679245693"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; GetShort (BootstrapAddress crypto)
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fail</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; GetShort (BootstrapAddress crypto))
-&gt; String -&gt; GetShort (BootstrapAddress crypto)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">DecoderError -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">DecoderError
</span><a href="#local-6989586621679245693"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-668"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621679245692"><span class="annot"><span class="annottext">Address
</span><a href="#local-6989586621679245692"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BootstrapAddress crypto -&gt; GetShort (BootstrapAddress crypto)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(BootstrapAddress crypto -&gt; GetShort (BootstrapAddress crypto))
-&gt; BootstrapAddress crypto -&gt; GetShort (BootstrapAddress crypto)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Address -&gt; BootstrapAddress crypto
forall crypto. Address -&gt; BootstrapAddress crypto
</span><a href="Cardano.Ledger.Address.html#BootstrapAddress"><span class="hs-identifier hs-var">BootstrapAddress</span></a></span><span> </span><span class="annot"><span class="annottext">Address
</span><a href="#local-6989586621679245692"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-669"></span><span>
</span><span id="line-670"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#getWord"><span class="hs-identifier hs-type">getWord</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#GetShort"><span class="hs-identifier hs-type">GetShort</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word8</span></a></span><span>
</span><span id="line-671"></span><span id="getWord"><span class="annot"><span class="annottext">getWord :: GetShort Word8
</span><a href="Cardano.Ledger.CompactAddress.html#getWord"><span class="hs-identifier hs-var hs-var">getWord</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; ShortByteString -&gt; Maybe (Int, Word8)) -&gt; GetShort Word8
forall a. (Int -&gt; ShortByteString -&gt; Maybe (Int, a)) -&gt; GetShort a
</span><a href="Cardano.Ledger.CompactAddress.html#GetShort"><span class="hs-identifier hs-var">GetShort</span></a></span><span> </span><span class="annot"><span class="annottext">((Int -&gt; ShortByteString -&gt; Maybe (Int, Word8)) -&gt; GetShort Word8)
-&gt; (Int -&gt; ShortByteString -&gt; Maybe (Int, Word8)) -&gt; GetShort Word8
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679245691"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245691"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679245690"><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245690"><span class="hs-identifier hs-var">sbs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-672"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245691"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Int
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">SBS.length</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245690"><span class="hs-identifier hs-var">sbs</span></a></span><span>
</span><span id="line-673"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">(Int, Word8) -&gt; Maybe (Int, Word8)
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245691"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Int -&gt; Word8
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">SBS.index</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245690"><span class="hs-identifier hs-var">sbs</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245691"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-674"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Maybe (Int, Word8)
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-675"></span><span>
</span><span id="line-676"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#peekWord8"><span class="hs-identifier hs-type">peekWord8</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#GetShort"><span class="hs-identifier hs-type">GetShort</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word8</span></a></span><span>
</span><span id="line-677"></span><span id="peekWord8"><span class="annot"><span class="annottext">peekWord8 :: GetShort Word8
</span><a href="Cardano.Ledger.CompactAddress.html#peekWord8"><span class="hs-identifier hs-var hs-var">peekWord8</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; ShortByteString -&gt; Maybe (Int, Word8)) -&gt; GetShort Word8
forall a. (Int -&gt; ShortByteString -&gt; Maybe (Int, a)) -&gt; GetShort a
</span><a href="Cardano.Ledger.CompactAddress.html#GetShort"><span class="hs-identifier hs-var">GetShort</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; ShortByteString -&gt; Maybe (Int, Word8)
</span><a href="#local-6989586621679245689"><span class="hs-identifier hs-var">peek</span></a></span><span>
</span><span id="line-678"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-679"></span><span>    </span><span id="local-6989586621679245689"><span class="annot"><span class="annottext">peek :: Int -&gt; ShortByteString -&gt; Maybe (Int, Word8)
</span><a href="#local-6989586621679245689"><span class="hs-identifier hs-var hs-var">peek</span></a></span></span><span> </span><span id="local-6989586621679245688"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245688"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679245687"><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245687"><span class="hs-identifier hs-var">sbs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245688"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Int
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">SBS.length</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245687"><span class="hs-identifier hs-var">sbs</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">(Int, Word8) -&gt; Maybe (Int, Word8)
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245688"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Int -&gt; Word8
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">SBS.index</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245687"><span class="hs-identifier hs-var">sbs</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245688"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Maybe (Int, Word8)
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-680"></span><span>
</span><span id="line-681"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#getRemainingAsByteString"><span class="hs-identifier hs-type">getRemainingAsByteString</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#GetShort"><span class="hs-identifier hs-type">GetShort</span></a></span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">BS.ByteString</span></a></span><span>
</span><span id="line-682"></span><span id="getRemainingAsByteString"><span class="annot"><span class="annottext">getRemainingAsByteString :: GetShort ByteString
</span><a href="Cardano.Ledger.CompactAddress.html#getRemainingAsByteString"><span class="hs-identifier hs-var hs-var">getRemainingAsByteString</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; ShortByteString -&gt; Maybe (Int, ByteString))
-&gt; GetShort ByteString
forall a. (Int -&gt; ShortByteString -&gt; Maybe (Int, a)) -&gt; GetShort a
</span><a href="Cardano.Ledger.CompactAddress.html#GetShort"><span class="hs-identifier hs-var">GetShort</span></a></span><span> </span><span class="annot"><span class="annottext">((Int -&gt; ShortByteString -&gt; Maybe (Int, ByteString))
 -&gt; GetShort ByteString)
-&gt; (Int -&gt; ShortByteString -&gt; Maybe (Int, ByteString))
-&gt; GetShort ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679245686"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245686"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679245685"><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245685"><span class="hs-identifier hs-var">sbs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-683"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679245684"><span class="annot"><span class="annottext">l :: Int
</span><a href="#local-6989586621679245684"><span class="hs-identifier hs-var hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Int
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">SBS.length</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245685"><span class="hs-identifier hs-var">sbs</span></a></span><span>
</span><span id="line-684"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245686"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245684"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-685"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">(Int, ByteString) -&gt; Maybe (Int, ByteString)
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245684"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; ByteString
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">SBS.fromShort</span></a></span><span> </span><span class="annot"><span class="annottext">(ShortByteString -&gt; ByteString) -&gt; ShortByteString -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Int -&gt; Int -&gt; ShortByteString
</span><a href="Cardano.Ledger.CompactAddress.html#substring"><span class="hs-identifier hs-var">substring</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245685"><span class="hs-identifier hs-var">sbs</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245686"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245684"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-686"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Maybe (Int, ByteString)
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-687"></span><span>
</span><span id="line-688"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#getHash"><span class="hs-identifier hs-type">getHash</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679246184"><span class="annot"><a href="#local-6989586621679246184"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679246185"><span class="annot"><a href="#local-6989586621679246185"><span class="hs-identifier hs-type">h</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../../../../cardano-crypto-class/html/src"><span class="hs-identifier hs-type">Hash.HashAlgorithm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246185"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#GetShort"><span class="hs-identifier hs-type">GetShort</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cardano-crypto-class/html/src"><span class="hs-identifier hs-type">Hash.Hash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246185"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246184"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-689"></span><span id="getHash"><span class="annot"><span class="annottext">getHash :: GetShort (Hash h a)
</span><a href="Cardano.Ledger.CompactAddress.html#getHash"><span class="hs-identifier hs-var hs-var">getHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; ShortByteString -&gt; Maybe (Int, Hash h a))
-&gt; GetShort (Hash h a)
forall a. (Int -&gt; ShortByteString -&gt; Maybe (Int, a)) -&gt; GetShort a
</span><a href="Cardano.Ledger.CompactAddress.html#GetShort"><span class="hs-identifier hs-var">GetShort</span></a></span><span> </span><span class="annot"><span class="annottext">((Int -&gt; ShortByteString -&gt; Maybe (Int, Hash h a))
 -&gt; GetShort (Hash h a))
-&gt; (Int -&gt; ShortByteString -&gt; Maybe (Int, Hash h a))
-&gt; GetShort (Hash h a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679245682"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245682"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679245681"><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245681"><span class="hs-identifier hs-var">sbs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-690"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679245680"><span class="annot"><span class="annottext">hashLen :: Word
</span><a href="#local-6989586621679245680"><span class="hs-identifier hs-var hs-var">hashLen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[h] -&gt; Word
forall h (proxy :: * -&gt; *). HashAlgorithm h =&gt; proxy h -&gt; Word
</span><a href="../../../../cardano-crypto-class/html/src"><span class="hs-identifier hs-var">Hash.sizeHash</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679246185"><span class="hs-identifier hs-type">h</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-691"></span><span>      </span><span id="local-6989586621679245679"><span class="annot"><span class="annottext">offsetStop :: Int
</span><a href="#local-6989586621679245679"><span class="hs-identifier hs-var hs-var">offsetStop</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245682"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679245680"><span class="hs-identifier hs-var">hashLen</span></a></span><span>
</span><span id="line-692"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245679"><span class="hs-identifier hs-var">offsetStop</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Int
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">SBS.length</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245681"><span class="hs-identifier hs-var">sbs</span></a></span><span>
</span><span id="line-693"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-694"></span><span>          </span><span id="local-6989586621679245678"><span class="annot"><span class="annottext">Hash h a
</span><a href="#local-6989586621679245678"><span class="hs-identifier hs-var">hash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Maybe (Hash h a)
forall h a. HashAlgorithm h =&gt; ShortByteString -&gt; Maybe (Hash h a)
</span><a href="../../../../cardano-crypto-class/html/src"><span class="hs-identifier hs-var">Hash.hashFromBytesShort</span></a></span><span> </span><span class="annot"><span class="annottext">(ShortByteString -&gt; Maybe (Hash h a))
-&gt; ShortByteString -&gt; Maybe (Hash h a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Int -&gt; Int -&gt; ShortByteString
</span><a href="Cardano.Ledger.CompactAddress.html#substring"><span class="hs-identifier hs-var">substring</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245681"><span class="hs-identifier hs-var">sbs</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245682"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245679"><span class="hs-identifier hs-var">offsetStop</span></a></span><span>
</span><span id="line-695"></span><span>          </span><span class="annot"><span class="annottext">(Int, Hash h a) -&gt; Maybe (Int, Hash h a)
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245679"><span class="hs-identifier hs-var">offsetStop</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Hash h a
</span><a href="#local-6989586621679245678"><span class="hs-identifier hs-var">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-696"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Maybe (Int, Hash h a)
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-697"></span><span>
</span><span id="line-698"></span><span class="hs-comment">-- start is the first index copied</span><span>
</span><span id="line-699"></span><span class="hs-comment">-- stop is the index after the last index copied</span><span>
</span><span id="line-700"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#substring"><span class="hs-identifier hs-type">substring</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">ShortByteString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">ShortByteString</span></a></span><span>
</span><span id="line-701"></span><span id="substring"><span class="annot"><span class="annottext">substring :: ShortByteString -&gt; Int -&gt; Int -&gt; ShortByteString
</span><a href="Cardano.Ledger.CompactAddress.html#substring"><span class="hs-identifier hs-var hs-var">substring</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-type">SBS</span></a></span><span> </span><span id="local-6989586621679245676"><span class="annot"><span class="annottext">ByteArray#
</span><a href="#local-6989586621679245676"><span class="hs-identifier hs-var">ba</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679245675"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245675"><span class="hs-identifier hs-var">start</span></a></span></span><span> </span><span id="local-6989586621679245674"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245674"><span class="hs-identifier hs-var">stop</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-702"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ByteArray -&gt; Int -&gt; Int -&gt; ByteArray
</span><a href="../../../../primitive/html/src"><span class="hs-identifier hs-var">BA.cloneByteArray</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteArray# -&gt; ByteArray
</span><a href="../../../../primitive/html/src"><span class="hs-identifier hs-var">BA.ByteArray</span></a></span><span> </span><span class="annot"><span class="annottext">ByteArray#
</span><a href="#local-6989586621679245676"><span class="hs-identifier hs-var">ba</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245675"><span class="hs-identifier hs-var">start</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245674"><span class="hs-identifier hs-var">stop</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679245675"><span class="hs-identifier hs-var">start</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-703"></span><span>    </span><span class="annot"><a href="../../../../primitive/html/src"><span class="hs-identifier hs-type">BA.ByteArray</span></a></span><span> </span><span id="local-6989586621679245671"><span class="annot"><span class="annottext">ByteArray#
</span><a href="#local-6989586621679245671"><span class="hs-identifier hs-var">ba'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ByteArray# -&gt; ShortByteString
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">SBS</span></a></span><span> </span><span class="annot"><span class="annottext">ByteArray#
</span><a href="#local-6989586621679245671"><span class="hs-identifier hs-var">ba'</span></a></span><span>
</span><span id="line-704"></span><span>
</span><span id="line-705"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#getWord7s"><span class="hs-identifier hs-type">getWord7s</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#GetShort"><span class="hs-identifier hs-type">GetShort</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Cardano.Ledger.Address.html#Word7"><span class="hs-identifier hs-type">Word7</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-706"></span><span id="getWord7s"><span class="annot"><span class="annottext">getWord7s :: GetShort [Word7]
</span><a href="Cardano.Ledger.CompactAddress.html#getWord7s"><span class="hs-identifier hs-var hs-var">getWord7s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-707"></span><span>  </span><span id="local-6989586621679245669"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679245669"><span class="hs-identifier hs-var">next</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GetShort Word8
</span><a href="Cardano.Ledger.CompactAddress.html#getWord"><span class="hs-identifier hs-var">getWord</span></a></span><span>
</span><span id="line-708"></span><span>  </span><span class="hs-comment">-- is the high bit set?</span><span>
</span><span id="line-709"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Int -&gt; Bool
forall a. Bits a =&gt; a -&gt; Int -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">testBit</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679245669"><span class="hs-identifier hs-var">next</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">7</span></span><span>
</span><span id="line-710"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="hs-comment">-- if so, grab more words</span><span>
</span><span id="line-711"></span><span>      </span><span class="hs-special">(</span><span class="hs-glyph">:</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word8 -&gt; Word7
</span><a href="Cardano.Ledger.Address.html#toWord7"><span class="hs-identifier hs-var">toWord7</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679245669"><span class="hs-identifier hs-var">next</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Word7] -&gt; [Word7]) -&gt; GetShort [Word7] -&gt; GetShort [Word7]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GetShort [Word7]
</span><a href="Cardano.Ledger.CompactAddress.html#getWord7s"><span class="hs-identifier hs-var">getWord7s</span></a></span><span>
</span><span id="line-712"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="hs-comment">-- otherwise, this is the last one</span><span>
</span><span id="line-713"></span><span>      </span><span class="annot"><span class="annottext">[Word7] -&gt; GetShort [Word7]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Word8 -&gt; Word7
</span><a href="Cardano.Ledger.Address.html#Word7"><span class="hs-identifier hs-var">Word7</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679245669"><span class="hs-identifier hs-var">next</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-714"></span><span>
</span><span id="line-715"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#getVariableLengthWord64"><span class="hs-identifier hs-type">getVariableLengthWord64</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#GetShort"><span class="hs-identifier hs-type">GetShort</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span>
</span><span id="line-716"></span><span id="getVariableLengthWord64"><span class="annot"><span class="annottext">getVariableLengthWord64 :: GetShort Word64
</span><a href="Cardano.Ledger.CompactAddress.html#getVariableLengthWord64"><span class="hs-identifier hs-var hs-var">getVariableLengthWord64</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Word7] -&gt; Word64
</span><a href="Cardano.Ledger.Address.html#word7sToWord64"><span class="hs-identifier hs-var">word7sToWord64</span></a></span><span> </span><span class="annot"><span class="annottext">([Word7] -&gt; Word64) -&gt; GetShort [Word7] -&gt; GetShort Word64
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GetShort [Word7]
</span><a href="Cardano.Ledger.CompactAddress.html#getWord7s"><span class="hs-identifier hs-var">getWord7s</span></a></span><span>
</span><span id="line-717"></span><span>
</span><span id="line-718"></span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#getPtr"><span class="hs-identifier hs-type">getPtr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#GetShort"><span class="hs-identifier hs-type">GetShort</span></a></span><span> </span><span class="annot"><a href="Cardano.Ledger.Credential.html#Ptr"><span class="hs-identifier hs-type">Ptr</span></a></span><span>
</span><span id="line-719"></span><span id="getPtr"><span class="annot"><span class="annottext">getPtr :: GetShort Ptr
</span><a href="Cardano.Ledger.CompactAddress.html#getPtr"><span class="hs-identifier hs-var hs-var">getPtr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-720"></span><span>  </span><span class="annot"><span class="annottext">SlotNo -&gt; TxIx -&gt; CertIx -&gt; Ptr
</span><a href="Cardano.Ledger.Credential.html#Ptr"><span class="hs-identifier hs-var">Ptr</span></a></span><span> </span><span class="annot"><span class="annottext">(SlotNo -&gt; TxIx -&gt; CertIx -&gt; Ptr)
-&gt; GetShort SlotNo -&gt; GetShort (TxIx -&gt; CertIx -&gt; Ptr)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; SlotNo
</span><a href="../../../../cardano-slotting/html/src"><span class="hs-identifier hs-var">SlotNo</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; SlotNo) -&gt; GetShort Word64 -&gt; GetShort SlotNo
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GetShort Word64
</span><a href="Cardano.Ledger.CompactAddress.html#getVariableLengthWord64"><span class="hs-identifier hs-var">getVariableLengthWord64</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-721"></span><span>    </span><span class="annot"><span class="annottext">GetShort (TxIx -&gt; CertIx -&gt; Ptr)
-&gt; GetShort TxIx -&gt; GetShort (CertIx -&gt; Ptr)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; TxIx
</span><a href="Cardano.Ledger.BaseTypes.html#TxIx"><span class="hs-identifier hs-var">TxIx</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; TxIx) -&gt; (Word64 -&gt; Word64) -&gt; Word64 -&gt; TxIx
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; TxIx) -&gt; GetShort Word64 -&gt; GetShort TxIx
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GetShort Word64
</span><a href="Cardano.Ledger.CompactAddress.html#getVariableLengthWord64"><span class="hs-identifier hs-var">getVariableLengthWord64</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-722"></span><span>    </span><span class="annot"><span class="annottext">GetShort (CertIx -&gt; Ptr) -&gt; GetShort CertIx -&gt; GetShort Ptr
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; CertIx
</span><a href="Cardano.Ledger.BaseTypes.html#CertIx"><span class="hs-identifier hs-var">CertIx</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; CertIx) -&gt; (Word64 -&gt; Word64) -&gt; Word64 -&gt; CertIx
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; CertIx) -&gt; GetShort Word64 -&gt; GetShort CertIx
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GetShort Word64
</span><a href="Cardano.Ledger.CompactAddress.html#getVariableLengthWord64"><span class="hs-identifier hs-var">getVariableLengthWord64</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-723"></span><span>
</span><span id="line-724"></span><span id="local-6989586621679245664"><span id="local-6989586621679245665"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#getKeyHash"><span class="hs-identifier hs-type">getKeyHash</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679245665"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#GetShort"><span class="hs-identifier hs-type">GetShort</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679245664"><span class="hs-identifier hs-type">kr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679245665"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-725"></span><span id="getKeyHash"><span class="annot"><span class="annottext">getKeyHash :: GetShort (Credential kr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#getKeyHash"><span class="hs-identifier hs-var hs-var">getKeyHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">KeyHash kr crypto -&gt; Credential kr crypto
forall (kr :: KeyRole) crypto.
KeyHash kr crypto -&gt; Credential kr crypto
</span><a href="Cardano.Ledger.Credential.html#KeyHashObj"><span class="hs-identifier hs-var">KeyHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">(KeyHash kr crypto -&gt; Credential kr crypto)
-&gt; (Hash (ADDRHASH crypto) (VerKeyDSIGN (DSIGN crypto))
    -&gt; KeyHash kr crypto)
-&gt; Hash (ADDRHASH crypto) (VerKeyDSIGN (DSIGN crypto))
-&gt; Credential kr crypto
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Hash (ADDRHASH crypto) (VerKeyDSIGN (DSIGN crypto))
-&gt; KeyHash kr crypto
forall (discriminator :: KeyRole) crypto.
Hash (ADDRHASH crypto) (VerKeyDSIGN (DSIGN crypto))
-&gt; KeyHash discriminator crypto
</span><a href="Cardano.Ledger.Keys.html#KeyHash"><span class="hs-identifier hs-var">KeyHash</span></a></span><span> </span><span class="annot"><span class="annottext">(Hash (ADDRHASH crypto) (VerKeyDSIGN (DSIGN crypto))
 -&gt; Credential kr crypto)
-&gt; GetShort (Hash (ADDRHASH crypto) (VerKeyDSIGN (DSIGN crypto)))
-&gt; GetShort (Credential kr crypto)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GetShort (Hash (ADDRHASH crypto) (VerKeyDSIGN (DSIGN crypto)))
forall a h. HashAlgorithm h =&gt; GetShort (Hash h a)
</span><a href="Cardano.Ledger.CompactAddress.html#getHash"><span class="hs-identifier hs-var">getHash</span></a></span><span>
</span><span id="line-726"></span><span>
</span><span id="line-727"></span><span id="local-6989586621679246179"><span id="local-6989586621679246180"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#getScriptHash"><span class="hs-identifier hs-type">getScriptHash</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246180"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#GetShort"><span class="hs-identifier hs-type">GetShort</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246179"><span class="hs-identifier hs-type">kr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246180"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-728"></span><span id="getScriptHash"><span class="annot"><span class="annottext">getScriptHash :: GetShort (Credential kr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#getScriptHash"><span class="hs-identifier hs-var hs-var">getScriptHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScriptHash crypto -&gt; Credential kr crypto
forall (kr :: KeyRole) crypto.
ScriptHash crypto -&gt; Credential kr crypto
</span><a href="Cardano.Ledger.Credential.html#ScriptHashObj"><span class="hs-identifier hs-var">ScriptHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">(ScriptHash crypto -&gt; Credential kr crypto)
-&gt; (Hash (ADDRHASH crypto) EraIndependentScript
    -&gt; ScriptHash crypto)
-&gt; Hash (ADDRHASH crypto) EraIndependentScript
-&gt; Credential kr crypto
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Hash (ADDRHASH crypto) EraIndependentScript -&gt; ScriptHash crypto
forall crypto.
Hash (ADDRHASH crypto) EraIndependentScript -&gt; ScriptHash crypto
</span><a href="Cardano.Ledger.Hashes.html#ScriptHash"><span class="hs-identifier hs-var">ScriptHash</span></a></span><span> </span><span class="annot"><span class="annottext">(Hash (ADDRHASH crypto) EraIndependentScript
 -&gt; Credential kr crypto)
-&gt; GetShort (Hash (ADDRHASH crypto) EraIndependentScript)
-&gt; GetShort (Credential kr crypto)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GetShort (Hash (ADDRHASH crypto) EraIndependentScript)
forall a h. HashAlgorithm h =&gt; GetShort (Hash h a)
</span><a href="Cardano.Ledger.CompactAddress.html#getHash"><span class="hs-identifier hs-var">getHash</span></a></span><span>
</span><span id="line-729"></span><span>
</span><span id="line-730"></span><span id="local-6989586621679246232"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#getStakeReference"><span class="hs-identifier hs-type">getStakeReference</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246232"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word8</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#GetShort"><span class="hs-identifier hs-type">GetShort</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#StakeReference"><span class="hs-identifier hs-type">StakeReference</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246232"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-731"></span><span id="getStakeReference"><span class="annot"><span class="annottext">getStakeReference :: Word8 -&gt; GetShort (StakeReference crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#getStakeReference"><span class="hs-identifier hs-var hs-var">getStakeReference</span></a></span></span><span> </span><span id="local-6989586621679245661"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679245661"><span class="hs-identifier hs-var">header</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Int -&gt; Bool
forall a. Bits a =&gt; a -&gt; Int -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">testBit</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679245661"><span class="hs-identifier hs-var">header</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="Cardano.Ledger.Address.html#notBaseAddr"><span class="hs-identifier hs-var">notBaseAddr</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-732"></span><span>  </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Int -&gt; Bool
forall a. Bits a =&gt; a -&gt; Int -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">testBit</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679245661"><span class="hs-identifier hs-var">header</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="Cardano.Ledger.Address.html#isEnterpriseAddr"><span class="hs-identifier hs-var">isEnterpriseAddr</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-733"></span><span>    </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">StakeReference crypto -&gt; GetShort (StakeReference crypto)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">StakeReference crypto
forall crypto. StakeReference crypto
</span><a href="Cardano.Ledger.Credential.html#StakeRefNull"><span class="hs-identifier hs-var">StakeRefNull</span></a></span><span>
</span><span id="line-734"></span><span>    </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ptr -&gt; StakeReference crypto
forall crypto. Ptr -&gt; StakeReference crypto
</span><a href="Cardano.Ledger.Credential.html#StakeRefPtr"><span class="hs-identifier hs-var">StakeRefPtr</span></a></span><span> </span><span class="annot"><span class="annottext">(Ptr -&gt; StakeReference crypto)
-&gt; GetShort Ptr -&gt; GetShort (StakeReference crypto)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GetShort Ptr
</span><a href="Cardano.Ledger.CompactAddress.html#getPtr"><span class="hs-identifier hs-var">getPtr</span></a></span><span>
</span><span id="line-735"></span><span>  </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Int -&gt; Bool
forall a. Bits a =&gt; a -&gt; Int -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">testBit</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679245661"><span class="hs-identifier hs-var">header</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="Cardano.Ledger.Address.html#stakeCredIsScript"><span class="hs-identifier hs-var">stakeCredIsScript</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-736"></span><span>    </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">StakeCredential crypto -&gt; StakeReference crypto
forall crypto. StakeCredential crypto -&gt; StakeReference crypto
</span><a href="Cardano.Ledger.Credential.html#StakeRefBase"><span class="hs-identifier hs-var">StakeRefBase</span></a></span><span> </span><span class="annot"><span class="annottext">(StakeCredential crypto -&gt; StakeReference crypto)
-&gt; GetShort (StakeCredential crypto)
-&gt; GetShort (StakeReference crypto)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GetShort (StakeCredential crypto)
forall crypto (kr :: KeyRole).
Crypto crypto =&gt;
GetShort (Credential kr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#getScriptHash"><span class="hs-identifier hs-var">getScriptHash</span></a></span><span>
</span><span id="line-737"></span><span>    </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">StakeCredential crypto -&gt; StakeReference crypto
forall crypto. StakeCredential crypto -&gt; StakeReference crypto
</span><a href="Cardano.Ledger.Credential.html#StakeRefBase"><span class="hs-identifier hs-var">StakeRefBase</span></a></span><span> </span><span class="annot"><span class="annottext">(StakeCredential crypto -&gt; StakeReference crypto)
-&gt; GetShort (StakeCredential crypto)
-&gt; GetShort (StakeReference crypto)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GetShort (StakeCredential crypto)
forall crypto (kr :: KeyRole).
Crypto crypto =&gt;
GetShort (Credential kr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#getKeyHash"><span class="hs-identifier hs-var">getKeyHash</span></a></span><span>
</span><span id="line-738"></span><span>
</span><span id="line-739"></span><span id="local-6989586621679246236"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#getPayCred"><span class="hs-identifier hs-type">getPayCred</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">CC.Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246236"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word8</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#GetShort"><span class="hs-identifier hs-type">GetShort</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#PaymentCredential"><span class="hs-identifier hs-type">PaymentCredential</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679246236"><span class="hs-identifier hs-type">crypto</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-740"></span><span id="getPayCred"><span class="annot"><span class="annottext">getPayCred :: Word8 -&gt; GetShort (PaymentCredential crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#getPayCred"><span class="hs-identifier hs-var hs-var">getPayCred</span></a></span></span><span> </span><span id="local-6989586621679245660"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679245660"><span class="hs-identifier hs-var">header</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Int -&gt; Bool
forall a. Bits a =&gt; a -&gt; Int -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">testBit</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679245660"><span class="hs-identifier hs-var">header</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="Cardano.Ledger.Address.html#payCredIsScript"><span class="hs-identifier hs-var">payCredIsScript</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-741"></span><span>  </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GetShort (PaymentCredential crypto)
forall crypto (kr :: KeyRole).
Crypto crypto =&gt;
GetShort (Credential kr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#getScriptHash"><span class="hs-identifier hs-var">getScriptHash</span></a></span><span>
</span><span id="line-742"></span><span>  </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">False</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GetShort (PaymentCredential crypto)
forall crypto (kr :: KeyRole).
Crypto crypto =&gt;
GetShort (Credential kr crypto)
</span><a href="Cardano.Ledger.CompactAddress.html#getKeyHash"><span class="hs-identifier hs-var">getKeyHash</span></a></span><span>
</span><span id="line-743"></span><span>
</span><span id="line-744"></span><span class="hs-comment">-- | Efficiently check whether compated adddress is an address with a credential</span><span>
</span><span id="line-745"></span><span class="hs-comment">-- that is a payment script.</span><span>
</span><span id="line-746"></span><span id="local-6989586621679245659"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#isPayCredScriptCompactAddr"><span class="hs-identifier hs-type">isPayCredScriptCompactAddr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#CompactAddr"><span class="hs-identifier hs-type">CompactAddr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679245659"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span></span><span>
</span><span id="line-747"></span><span id="isPayCredScriptCompactAddr"><span class="annot"><span class="annottext">isPayCredScriptCompactAddr :: CompactAddr crypto -&gt; Bool
</span><a href="Cardano.Ledger.CompactAddress.html#isPayCredScriptCompactAddr"><span class="hs-identifier hs-var hs-var">isPayCredScriptCompactAddr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#UnsafeCompactAddr"><span class="hs-identifier hs-type">UnsafeCompactAddr</span></a></span><span> </span><span id="local-6989586621679245658"><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245658"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-748"></span><span>  </span><span class="annot"><span class="annottext">Word8 -&gt; Int -&gt; Bool
forall a. Bits a =&gt; a -&gt; Int -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">testBit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShortByteString -&gt; Int -&gt; Word8
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">SBS.index</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245658"><span class="hs-identifier hs-var">bytes</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="Cardano.Ledger.Address.html#payCredIsScript"><span class="hs-identifier hs-var">payCredIsScript</span></a></span><span>
</span><span id="line-749"></span><span>
</span><span id="line-750"></span><span class="hs-comment">-- | Efficiently check whether compated adddress is a Byron address.</span><span>
</span><span id="line-751"></span><span id="local-6989586621679245657"><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#isBootstrapCompactAddr"><span class="hs-identifier hs-type">isBootstrapCompactAddr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#CompactAddr"><span class="hs-identifier hs-type">CompactAddr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679245657"><span class="hs-identifier hs-type">crypto</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span></span><span>
</span><span id="line-752"></span><span id="isBootstrapCompactAddr"><span class="annot"><span class="annottext">isBootstrapCompactAddr :: CompactAddr crypto -&gt; Bool
</span><a href="Cardano.Ledger.CompactAddress.html#isBootstrapCompactAddr"><span class="hs-identifier hs-var hs-var">isBootstrapCompactAddr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CompactAddress.html#UnsafeCompactAddr"><span class="hs-identifier hs-type">UnsafeCompactAddr</span></a></span><span> </span><span id="local-6989586621679245656"><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245656"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Int -&gt; Bool
forall a. Bits a =&gt; a -&gt; Int -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">testBit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShortByteString -&gt; Int -&gt; Word8
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">SBS.index</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679245656"><span class="hs-identifier hs-var">bytes</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="Cardano.Ledger.Address.html#byron"><span class="hs-identifier hs-var">byron</span></a></span><span>
</span><span id="line-753"></span></pre></body></html>