<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Marconi.Sidechain.Api.Query.Indexers.EpochState</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">marconi-sidechain-1.2.0.0</span><ul class="links" id="page-menu"><li><a href="src/Marconi.Sidechain.Api.Query.Indexers.EpochState.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Marconi.Sidechain.Api.Query.Indexers.EpochState</p></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:initializeEnv">initializeEnv</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="Marconi-Sidechain-Api-Types.html#t:EpochStateIndexerEnv" title="Marconi.Sidechain.Api.Types">EpochStateIndexerEnv</a></li><li class="src short"><a href="#v:updateEnvState">updateEnvState</a> :: <a href="../../stm/html/Control-Concurrent-STM-TMVar.html#t:TMVar" title="Control.Concurrent.STM.TMVar">TMVar</a> (<a href="../../marconi-core/html/Marconi-Core-Storable.html#t:State" title="Marconi.Core.Storable">State</a> <a href="../../marconi-chain-index/html/Marconi-ChainIndex-Indexers-EpochState.html#t:EpochStateHandle" title="Marconi.ChainIndex.Indexers.EpochState">EpochStateHandle</a>) -&gt; <a href="../../marconi-core/html/Marconi-Core-Storable.html#t:State" title="Marconi.Core.Storable">State</a> <a href="../../marconi-chain-index/html/Marconi-ChainIndex-Indexers-EpochState.html#t:EpochStateHandle" title="Marconi.ChainIndex.Indexers.EpochState">EpochStateHandle</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Conc.html#t:STM" title="GHC.Conc">STM</a> ()</li><li class="src short"><a href="#v:querySDDByEpochNo">querySDDByEpochNo</a> :: <a href="Marconi-Sidechain-Api-Types.html#t:SidechainEnv" title="Marconi.Sidechain.Api.Types">SidechainEnv</a> -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Word64" title="Distribution.Compat.Prelude.Internal">Word64</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Either" title="Distribution.Compat.Prelude.Internal">Either</a> <a href="Marconi-Sidechain-Api-Types.html#t:QueryExceptions" title="Marconi.Sidechain.Api.Types">QueryExceptions</a> <a href="Marconi-Sidechain-Api-Routes.html#t:EpochStakePoolDelegationResult" title="Marconi.Sidechain.Api.Routes">EpochStakePoolDelegationResult</a>)</li><li class="src short"><a href="#v:queryNonceByEpochNo">queryNonceByEpochNo</a> :: <a href="Marconi-Sidechain-Api-Types.html#t:SidechainEnv" title="Marconi.Sidechain.Api.Types">SidechainEnv</a> -&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Word64" title="Distribution.Compat.Prelude.Internal">Word64</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Either" title="Distribution.Compat.Prelude.Internal">Either</a> <a href="Marconi-Sidechain-Api-Types.html#t:QueryExceptions" title="Marconi.Sidechain.Api.Types">QueryExceptions</a> <a href="Marconi-Sidechain-Api-Routes.html#t:EpochNonceResult" title="Marconi.Sidechain.Api.Routes">EpochNonceResult</a>)</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:initializeEnv" class="def">initializeEnv</a> <a href="src/Marconi.Sidechain.Api.Query.Indexers.EpochState.html#initializeEnv" class="link">Source</a> <a href="#v:initializeEnv" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="Marconi-Sidechain-Api-Types.html#t:EpochStateIndexerEnv" title="Marconi.Sidechain.Api.Types">EpochStateIndexerEnv</a></td><td class="doc"><p>returns Query runtime environment</p></td></tr></table></div><div class="doc"><p>Bootstraps the EpochState query environment.
 The module is responsible for accessing SQLite for queries.
 The main issue we try to avoid here is mixing inserts and quries in SQLite to avoid locking the database</p></div></div><div class="top"><p class="src"><a id="v:updateEnvState" class="def">updateEnvState</a> :: <a href="../../stm/html/Control-Concurrent-STM-TMVar.html#t:TMVar" title="Control.Concurrent.STM.TMVar">TMVar</a> (<a href="../../marconi-core/html/Marconi-Core-Storable.html#t:State" title="Marconi.Core.Storable">State</a> <a href="../../marconi-chain-index/html/Marconi-ChainIndex-Indexers-EpochState.html#t:EpochStateHandle" title="Marconi.ChainIndex.Indexers.EpochState">EpochStateHandle</a>) -&gt; <a href="../../marconi-core/html/Marconi-Core-Storable.html#t:State" title="Marconi.Core.Storable">State</a> <a href="../../marconi-chain-index/html/Marconi-ChainIndex-Indexers-EpochState.html#t:EpochStateHandle" title="Marconi.ChainIndex.Indexers.EpochState">EpochStateHandle</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/GHC-Conc.html#t:STM" title="GHC.Conc">STM</a> () <a href="src/Marconi.Sidechain.Api.Query.Indexers.EpochState.html#updateEnvState" class="link">Source</a> <a href="#v:updateEnvState" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:querySDDByEpochNo" class="def">querySDDByEpochNo</a> <a href="src/Marconi.Sidechain.Api.Query.Indexers.EpochState.html#querySDDByEpochNo" class="link">Source</a> <a href="#v:querySDDByEpochNo" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Marconi-Sidechain-Api-Types.html#t:SidechainEnv" title="Marconi.Sidechain.Api.Types">SidechainEnv</a></td><td class="doc"><p>Query run time environment</p></td></tr><tr><td class="src">-&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Word64" title="Distribution.Compat.Prelude.Internal">Word64</a></td><td class="doc"><p>Bech32 Address</p></td></tr><tr><td class="src">-&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Either" title="Distribution.Compat.Prelude.Internal">Either</a> <a href="Marconi-Sidechain-Api-Types.html#t:QueryExceptions" title="Marconi.Sidechain.Api.Types">QueryExceptions</a> <a href="Marconi-Sidechain-Api-Routes.html#t:EpochStakePoolDelegationResult" title="Marconi.Sidechain.Api.Routes">EpochStakePoolDelegationResult</a>)</td><td class="doc"><p>Plutus address conversion error may occur</p></td></tr></table></div><div class="doc"><p>Retrieve SDD (stakepool delegation distribution) associated at the given <code>EpochNo</code>.
 We return an empty list if the <code>EpochNo</code> is not found.</p></div></div><div class="top"><p class="src"><a id="v:queryNonceByEpochNo" class="def">queryNonceByEpochNo</a> <a href="src/Marconi.Sidechain.Api.Query.Indexers.EpochState.html#queryNonceByEpochNo" class="link">Source</a> <a href="#v:queryNonceByEpochNo" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Marconi-Sidechain-Api-Types.html#t:SidechainEnv" title="Marconi.Sidechain.Api.Types">SidechainEnv</a></td><td class="doc"><p>Query run time environment</p></td></tr><tr><td class="src">-&gt; <a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Word64" title="Distribution.Compat.Prelude.Internal">Word64</a></td><td class="doc"><p>Bech32 Address</p></td></tr><tr><td class="src">-&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../../Cabal/html/Distribution-Compat-Prelude-Internal.html#t:Either" title="Distribution.Compat.Prelude.Internal">Either</a> <a href="Marconi-Sidechain-Api-Types.html#t:QueryExceptions" title="Marconi.Sidechain.Api.Types">QueryExceptions</a> <a href="Marconi-Sidechain-Api-Routes.html#t:EpochNonceResult" title="Marconi.Sidechain.Api.Routes">EpochNonceResult</a>)</td><td class="doc"><p>Plutus address conversion error may occur</p></td></tr></table></div><div class="doc"><p>Retrieve the nonce associated at the given <code>EpochNo</code>
 We return an empty list if the <code>EpochNo</code> is not found.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.2</p></div></body></html>