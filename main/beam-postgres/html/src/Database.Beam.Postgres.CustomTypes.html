<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DeriveAnyClass #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE EmptyCase #-}</span><span>
</span><span id="line-5"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Database.Beam.Postgres.CustomTypes</span><span>
</span><span id="line-6"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgType"><span class="hs-identifier">PgType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgTypeCheck"><span class="hs-identifier">PgTypeCheck</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-7"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgDataTypeSchema"><span class="hs-identifier">PgDataTypeSchema</span></a></span><span>
</span><span id="line-8"></span><span>
</span><span id="line-9"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#IsPgCustomDataType"><span class="hs-identifier">IsPgCustomDataType</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Syntax.html#PgHasEnum"><span class="hs-identifier">PgHasEnum</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier">HasSqlValueSyntax</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier">FromBackendRow</span></a></span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#pgCustomEnumSchema"><span class="hs-identifier">pgCustomEnumSchema</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#pgBoundedEnumSchema"><span class="hs-identifier">pgBoundedEnumSchema</span></a></span><span>
</span><span id="line-16"></span><span>
</span><span id="line-17"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#pgCustomEnumActionProvider"><span class="hs-identifier">pgCustomEnumActionProvider</span></a></span><span>
</span><span id="line-18"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#pgCreateEnumActionProvider"><span class="hs-identifier">pgCreateEnumActionProvider</span></a></span><span>
</span><span id="line-19"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#pgDropEnumActionProvider"><span class="hs-identifier">pgDropEnumActionProvider</span></a></span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#pgChecksForTypeSchema"><span class="hs-identifier">pgChecksForTypeSchema</span></a></span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#pgEnumValueSyntax"><span class="hs-identifier">pgEnumValueSyntax</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#pgParseEnum"><span class="hs-identifier">pgParseEnum</span></a></span><span>
</span><span id="line-24"></span><span>
</span><span id="line-25"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#createEnum"><span class="hs-identifier">createEnum</span></a></span><span>
</span><span id="line-26"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#beamTypeForCustomPg"><span class="hs-identifier">beamTypeForCustomPg</span></a></span><span>
</span><span id="line-27"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier">Database.Beam</span></a></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier">Database.Beam.Schema.Tables</span></a></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier">Database.Beam.Backend.SQL</span></a></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../../../../beam-migrate/html/src"><span class="hs-identifier">Database.Beam.Migrate</span></a></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Database.Beam.Postgres.Types.html"><span class="hs-identifier">Database.Beam.Postgres.Types</span></a></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Database.Beam.Postgres.Syntax.html"><span class="hs-identifier">Database.Beam.Postgres.Syntax</span></a></span><span>
</span><span id="line-35"></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Monad</span></a></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../../../../free/html/src"><span class="hs-identifier">Control.Monad.Free.Church</span></a></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../../../../aeson/html/src"><span class="hs-identifier">Data.Aeson</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../aeson/html/src"><span class="hs-identifier">object</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../aeson/html/src"><span class="hs-operator">(.=)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../bytestring/html/src"><span class="hs-identifier">Data.ByteString.Char8</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BC</span></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Functor.Const</span></a></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../unordered-containers/html/src"><span class="hs-identifier">Data.HashSet</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">HS</span></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Proxy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Proxy</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-cpp">
#if !MIN_VERSION_base(4,11,0)
</span><span class="hs-keyword">import</span><span>           </span><span class="hs-identifier">Data.Semigroup</span><span class="hs-cpp">
#endif
</span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier">Data.Text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier">Text</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier">Data.Text.Encoding</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TE</span></span><span>
</span><span id="line-48"></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier">Database.PostgreSQL.Simple.FromField</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Pg</span></span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span class="hs-keyword">data</span><span> </span><span id="PgType"><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgType"><span class="hs-identifier hs-var">PgType</span></a></span></span><span> </span><span id="local-6989586621679189600"><span class="annot"><a href="#local-6989586621679189600"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-52"></span><span class="hs-keyword">newtype</span><span> </span><span id="PgTypeCheck"><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgTypeCheck"><span class="hs-identifier hs-var">PgTypeCheck</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PgTypeCheck"><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgTypeCheck"><span class="hs-identifier hs-var">PgTypeCheck</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../beam-migrate/html/src"><span class="hs-identifier hs-type">SomeDatabasePredicate</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span>
</span><span id="line-54"></span><span class="hs-keyword">data</span><span> </span><span id="PgDataTypeSchema"><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgDataTypeSchema"><span class="hs-identifier hs-var">PgDataTypeSchema</span></a></span></span><span> </span><span id="local-6989586621679189598"><span class="annot"><a href="#local-6989586621679189598"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-55"></span><span>    </span><span id="local-6989586621679189766"><span id="PgDataTypeEnum"><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgDataTypeEnum"><span class="hs-identifier hs-var">PgDataTypeEnum</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">HasSqlValueSyntax</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Syntax.html#PgValueSyntax"><span class="hs-identifier hs-type">PgValueSyntax</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189766"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679189766"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgDataTypeSchema"><span class="hs-identifier hs-type">PgDataTypeSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189766"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span><span class="hs-keyword">class</span><span> </span><span id="IsPgCustomDataType"><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#IsPgCustomDataType"><span class="hs-identifier hs-var">IsPgCustomDataType</span></a></span></span><span> </span><span id="local-6989586621679189677"><span class="annot"><a href="#local-6989586621679189677"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-58"></span><span>    </span><span id="pgDataTypeName"><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#pgDataTypeName"><span class="hs-identifier hs-type">pgDataTypeName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189677"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-59"></span><span>    </span><span id="pgDataTypeDescription"><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#pgDataTypeDescription"><span class="hs-identifier hs-type">pgDataTypeDescription</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgDataTypeSchema"><span class="hs-identifier hs-type">PgDataTypeSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189677"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-60"></span><span>
</span><span id="line-61"></span><span id="local-6989586621679189594"><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#pgCustomEnumSchema"><span class="hs-identifier hs-type">pgCustomEnumSchema</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">HasSqlValueSyntax</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Syntax.html#PgValueSyntax"><span class="hs-identifier hs-type">PgValueSyntax</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189594"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679189594"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgDataTypeSchema"><span class="hs-identifier hs-type">PgDataTypeSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189594"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-62"></span><span id="pgCustomEnumSchema"><span class="annot"><span class="annottext">pgCustomEnumSchema :: [a] -&gt; PgDataTypeSchema a
</span><a href="Database.Beam.Postgres.CustomTypes.html#pgCustomEnumSchema"><span class="hs-identifier hs-var hs-var">pgCustomEnumSchema</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; PgDataTypeSchema a
forall a.
HasSqlValueSyntax PgValueSyntax a =&gt;
[a] -&gt; PgDataTypeSchema a
</span><a href="Database.Beam.Postgres.CustomTypes.html#PgDataTypeEnum"><span class="hs-identifier hs-var">PgDataTypeEnum</span></a></span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span id="local-6989586621679189593"><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#pgBoundedEnumSchema"><span class="hs-identifier hs-type">pgBoundedEnumSchema</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Enum</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189593"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Bounded</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189593"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">HasSqlValueSyntax</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Syntax.html#PgValueSyntax"><span class="hs-identifier hs-type">PgValueSyntax</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189593"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span>                    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgDataTypeSchema"><span class="hs-identifier hs-type">PgDataTypeSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189593"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-66"></span><span id="pgBoundedEnumSchema"><span class="annot"><span class="annottext">pgBoundedEnumSchema :: PgDataTypeSchema a
</span><a href="Database.Beam.Postgres.CustomTypes.html#pgBoundedEnumSchema"><span class="hs-identifier hs-var hs-var">pgBoundedEnumSchema</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; PgDataTypeSchema a
forall a.
HasSqlValueSyntax PgValueSyntax a =&gt;
[a] -&gt; PgDataTypeSchema a
</span><a href="Database.Beam.Postgres.CustomTypes.html#pgCustomEnumSchema"><span class="hs-identifier hs-var">pgCustomEnumSchema</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">a
forall a. Bounded a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">minBound</span></a></span><span class="hs-glyph">..</span><span class="annot"><span class="annottext">a
forall a. Bounded a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maxBound</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#pgCustomEnumActionProvider"><span class="hs-identifier hs-type">pgCustomEnumActionProvider</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../beam-migrate/html/src"><span class="hs-identifier hs-type">ActionProvider</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span>
</span><span id="line-69"></span><span id="pgCustomEnumActionProvider"><span class="annot"><span class="annottext">pgCustomEnumActionProvider :: ActionProvider Postgres
</span><a href="Database.Beam.Postgres.CustomTypes.html#pgCustomEnumActionProvider"><span class="hs-identifier hs-var hs-var">pgCustomEnumActionProvider</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ActionProvider Postgres
</span><a href="Database.Beam.Postgres.CustomTypes.html#pgCreateEnumActionProvider"><span class="hs-identifier hs-var">pgCreateEnumActionProvider</span></a></span><span> </span><span class="annot"><span class="annottext">ActionProvider Postgres
-&gt; ActionProvider Postgres -&gt; ActionProvider Postgres
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ActionProvider Postgres
</span><a href="Database.Beam.Postgres.CustomTypes.html#pgDropEnumActionProvider"><span class="hs-identifier hs-var">pgDropEnumActionProvider</span></a></span><span>
</span><span id="line-70"></span><span>
</span><span id="line-71"></span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#pgCreateEnumActionProvider"><span class="hs-identifier hs-type">pgCreateEnumActionProvider</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../beam-migrate/html/src"><span class="hs-identifier hs-type">ActionProvider</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span>
</span><span id="line-72"></span><span id="pgCreateEnumActionProvider"><span class="annot"><span class="annottext">pgCreateEnumActionProvider :: ActionProvider Postgres
</span><a href="Database.Beam.Postgres.CustomTypes.html#pgCreateEnumActionProvider"><span class="hs-identifier hs-var hs-var">pgCreateEnumActionProvider</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-73"></span><span>  </span><span class="annot"><span class="annottext">ActionProviderFn Postgres -&gt; ActionProvider Postgres
forall be. ActionProviderFn be -&gt; ActionProvider be
</span><a href="../../../../beam-migrate/html/src"><span class="hs-identifier hs-var">ActionProvider</span></a></span><span> </span><span class="annot"><span class="annottext">(ActionProviderFn Postgres -&gt; ActionProvider Postgres)
-&gt; ActionProviderFn Postgres -&gt; ActionProvider Postgres
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679189589"><span class="annot"><span class="annottext">forall preCondition. Typeable preCondition =&gt; [preCondition]
</span><a href="#local-6989586621679189589"><span class="hs-identifier hs-var">findPre</span></a></span></span><span> </span><span id="local-6989586621679189588"><span class="annot"><span class="annottext">forall preCondition. Typeable preCondition =&gt; [preCondition]
</span><a href="#local-6989586621679189588"><span class="hs-identifier hs-var">findPost</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-74"></span><span>  </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679189587"><span class="annot"><span class="annottext">enumP :: PgHasEnum
</span><a href="#local-6989586621679189587"><span class="hs-identifier hs-var">enumP</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.Syntax.html#PgHasEnum"><span class="hs-identifier hs-type">PgHasEnum</span></a></span><span> </span><span id="local-6989586621679189585"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679189585"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span id="local-6989586621679189584"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679189584"><span class="hs-identifier hs-var">vals</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[PgHasEnum]
forall preCondition. Typeable preCondition =&gt; [preCondition]
</span><a href="#local-6989586621679189588"><span class="hs-identifier hs-var">findPost</span></a></span><span>
</span><span id="line-75"></span><span>     </span><span class="annot"><span class="annottext">[()] -&gt; [()]
forall (m :: * -&gt; *) a. Alternative m =&gt; [a] -&gt; m ()
</span><a href="../../../../beam-migrate/html/src"><span class="hs-identifier hs-var">ensuringNot_</span></a></span><span> </span><span class="annot"><span class="annottext">([()] -&gt; [()]) -&gt; [()] -&gt; [()]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-76"></span><span>      </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.Syntax.html#PgHasEnum"><span class="hs-identifier hs-type">PgHasEnum</span></a></span><span> </span><span id="local-6989586621679189582"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679189582"><span class="hs-identifier hs-var">beforeNm</span></a></span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[PgHasEnum]
forall preCondition. Typeable preCondition =&gt; [preCondition]
</span><a href="#local-6989586621679189589"><span class="hs-identifier hs-var">findPre</span></a></span><span>
</span><span id="line-77"></span><span>         </span><span class="annot"><span class="annottext">Bool -&gt; [()]
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">guard</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679189582"><span class="hs-identifier hs-var">beforeNm</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679189585"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span>     </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679189581"><span class="annot"><span class="annottext">cmd :: PgCommandSyntax
</span><a href="#local-6989586621679189581"><span class="hs-identifier hs-var hs-var">cmd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; [PgValueSyntax] -&gt; PgCommandSyntax
</span><a href="Database.Beam.Postgres.Syntax.html#pgCreateEnumSyntax"><span class="hs-identifier hs-var">pgCreateEnumSyntax</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679189585"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Text -&gt; PgValueSyntax) -&gt; [Text] -&gt; [PgValueSyntax]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; PgValueSyntax
forall expr ty. HasSqlValueSyntax expr ty =&gt; ty -&gt; expr
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">sqlValueSyntax</span></a></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679189584"><span class="hs-identifier hs-var">vals</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span>     </span><span class="annot"><span class="annottext">PotentialAction Postgres -&gt; [PotentialAction Postgres]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HashSet SomeDatabasePredicate
-&gt; HashSet SomeDatabasePredicate
-&gt; Seq (MigrationCommand Postgres)
-&gt; Text
-&gt; Int
-&gt; PotentialAction Postgres
forall be.
HashSet SomeDatabasePredicate
-&gt; HashSet SomeDatabasePredicate
-&gt; Seq (MigrationCommand be)
-&gt; Text
-&gt; Int
-&gt; PotentialAction be
</span><a href="../../../../beam-migrate/html/src"><span class="hs-identifier hs-var">PotentialAction</span></a></span><span> </span><span class="annot"><span class="annottext">HashSet SomeDatabasePredicate
forall a. Monoid a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SomeDatabasePredicate] -&gt; HashSet SomeDatabasePredicate
forall a. (Eq a, Hashable a) =&gt; [a] -&gt; HashSet a
</span><a href="../../../../unordered-containers/html/src"><span class="hs-identifier hs-var">HS.fromList</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">PgHasEnum -&gt; SomeDatabasePredicate
forall p. DatabasePredicate p =&gt; p -&gt; SomeDatabasePredicate
</span><a href="../../../../beam-migrate/html/src"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">PgHasEnum
</span><a href="#local-6989586621679189587"><span class="hs-identifier hs-var">enumP</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MigrationCommand Postgres -&gt; Seq (MigrationCommand Postgres)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BeamSqlBackendSyntax Postgres
-&gt; MigrationDataLoss -&gt; MigrationCommand Postgres
forall be.
BeamSqlBackendSyntax be -&gt; MigrationDataLoss -&gt; MigrationCommand be
</span><a href="../../../../beam-migrate/html/src"><span class="hs-identifier hs-var">MigrationCommand</span></a></span><span> </span><span class="annot"><span class="annottext">BeamSqlBackendSyntax Postgres
PgCommandSyntax
</span><a href="#local-6989586621679189581"><span class="hs-identifier hs-var">cmd</span></a></span><span> </span><span class="annot"><span class="annottext">MigrationDataLoss
</span><a href="../../../../beam-migrate/html/src"><span class="hs-identifier hs-var">MigrationKeepsData</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Create the enumeration &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679189585"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#pgDropEnumActionProvider"><span class="hs-identifier hs-type">pgDropEnumActionProvider</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../beam-migrate/html/src"><span class="hs-identifier hs-type">ActionProvider</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span>
</span><span id="line-85"></span><span id="pgDropEnumActionProvider"><span class="annot"><span class="annottext">pgDropEnumActionProvider :: ActionProvider Postgres
</span><a href="Database.Beam.Postgres.CustomTypes.html#pgDropEnumActionProvider"><span class="hs-identifier hs-var hs-var">pgDropEnumActionProvider</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-86"></span><span>  </span><span class="annot"><span class="annottext">ActionProviderFn Postgres -&gt; ActionProvider Postgres
forall be. ActionProviderFn be -&gt; ActionProvider be
</span><a href="../../../../beam-migrate/html/src"><span class="hs-identifier hs-var">ActionProvider</span></a></span><span> </span><span class="annot"><span class="annottext">(ActionProviderFn Postgres -&gt; ActionProvider Postgres)
-&gt; ActionProviderFn Postgres -&gt; ActionProvider Postgres
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679189573"><span class="annot"><span class="annottext">forall preCondition. Typeable preCondition =&gt; [preCondition]
</span><a href="#local-6989586621679189573"><span class="hs-identifier hs-var">findPre</span></a></span></span><span> </span><span id="local-6989586621679189572"><span class="annot"><span class="annottext">forall preCondition. Typeable preCondition =&gt; [preCondition]
</span><a href="#local-6989586621679189572"><span class="hs-identifier hs-var">findPost</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-87"></span><span>  </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679189571"><span class="annot"><span class="annottext">enumP :: PgHasEnum
</span><a href="#local-6989586621679189571"><span class="hs-identifier hs-var">enumP</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.Syntax.html#PgHasEnum"><span class="hs-identifier hs-type">PgHasEnum</span></a></span><span> </span><span id="local-6989586621679189570"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679189570"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[PgHasEnum]
forall preCondition. Typeable preCondition =&gt; [preCondition]
</span><a href="#local-6989586621679189573"><span class="hs-identifier hs-var">findPre</span></a></span><span>
</span><span id="line-88"></span><span>     </span><span class="annot"><span class="annottext">[()] -&gt; [()]
forall (m :: * -&gt; *) a. Alternative m =&gt; [a] -&gt; m ()
</span><a href="../../../../beam-migrate/html/src"><span class="hs-identifier hs-var">ensuringNot_</span></a></span><span> </span><span class="annot"><span class="annottext">([()] -&gt; [()]) -&gt; [()] -&gt; [()]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-89"></span><span>      </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.Syntax.html#PgHasEnum"><span class="hs-identifier hs-type">PgHasEnum</span></a></span><span> </span><span id="local-6989586621679189569"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679189569"><span class="hs-identifier hs-var">afterNm</span></a></span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[PgHasEnum]
forall preCondition. Typeable preCondition =&gt; [preCondition]
</span><a href="#local-6989586621679189572"><span class="hs-identifier hs-var">findPost</span></a></span><span>
</span><span id="line-90"></span><span>         </span><span class="annot"><span class="annottext">Bool -&gt; [()]
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">guard</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679189569"><span class="hs-identifier hs-var">afterNm</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679189570"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span>     </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679189568"><span class="annot"><span class="annottext">cmd :: PgCommandSyntax
</span><a href="#local-6989586621679189568"><span class="hs-identifier hs-var hs-var">cmd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; PgCommandSyntax
</span><a href="Database.Beam.Postgres.Syntax.html#pgDropTypeSyntax"><span class="hs-identifier hs-var">pgDropTypeSyntax</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679189570"><span class="hs-identifier hs-var">nm</span></a></span><span>
</span><span id="line-93"></span><span>     </span><span class="annot"><span class="annottext">PotentialAction Postgres -&gt; [PotentialAction Postgres]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HashSet SomeDatabasePredicate
-&gt; HashSet SomeDatabasePredicate
-&gt; Seq (MigrationCommand Postgres)
-&gt; Text
-&gt; Int
-&gt; PotentialAction Postgres
forall be.
HashSet SomeDatabasePredicate
-&gt; HashSet SomeDatabasePredicate
-&gt; Seq (MigrationCommand be)
-&gt; Text
-&gt; Int
-&gt; PotentialAction be
</span><a href="../../../../beam-migrate/html/src"><span class="hs-identifier hs-var">PotentialAction</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SomeDatabasePredicate] -&gt; HashSet SomeDatabasePredicate
forall a. (Eq a, Hashable a) =&gt; [a] -&gt; HashSet a
</span><a href="../../../../unordered-containers/html/src"><span class="hs-identifier hs-var">HS.fromList</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">PgHasEnum -&gt; SomeDatabasePredicate
forall p. DatabasePredicate p =&gt; p -&gt; SomeDatabasePredicate
</span><a href="../../../../beam-migrate/html/src"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">PgHasEnum
</span><a href="#local-6989586621679189571"><span class="hs-identifier hs-var">enumP</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashSet SomeDatabasePredicate
forall a. Monoid a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-94"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MigrationCommand Postgres -&gt; Seq (MigrationCommand Postgres)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BeamSqlBackendSyntax Postgres
-&gt; MigrationDataLoss -&gt; MigrationCommand Postgres
forall be.
BeamSqlBackendSyntax be -&gt; MigrationDataLoss -&gt; MigrationCommand be
</span><a href="../../../../beam-migrate/html/src"><span class="hs-identifier hs-var">MigrationCommand</span></a></span><span> </span><span class="annot"><span class="annottext">BeamSqlBackendSyntax Postgres
PgCommandSyntax
</span><a href="#local-6989586621679189568"><span class="hs-identifier hs-var">cmd</span></a></span><span> </span><span class="annot"><span class="annottext">MigrationDataLoss
</span><a href="../../../../beam-migrate/html/src"><span class="hs-identifier hs-var">MigrationKeepsData</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-95"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Drop the enumeration type &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679189570"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span>
</span><span id="line-97"></span><span id="local-6989586621679189658"><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#pgChecksForTypeSchema"><span class="hs-identifier hs-type">pgChecksForTypeSchema</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgDataTypeSchema"><span class="hs-identifier hs-type">PgDataTypeSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189658"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgTypeCheck"><span class="hs-identifier hs-type">PgTypeCheck</span></a></span><span> </span><span class="hs-special">]</span></span><span>
</span><span id="line-98"></span><span id="pgChecksForTypeSchema"><span class="annot"><span class="annottext">pgChecksForTypeSchema :: PgDataTypeSchema a -&gt; [PgTypeCheck]
</span><a href="Database.Beam.Postgres.CustomTypes.html#pgChecksForTypeSchema"><span class="hs-identifier hs-var hs-var">pgChecksForTypeSchema</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgDataTypeEnum"><span class="hs-identifier hs-type">PgDataTypeEnum</span></a></span><span> </span><span id="local-6989586621679189566"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679189566"><span class="hs-identifier hs-var">vals</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-99"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679189565"><span class="annot"><span class="annottext">valTxts :: [Text]
</span><a href="#local-6989586621679189565"><span class="hs-identifier hs-var hs-var">valTxts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; Text) -&gt; [a] -&gt; [Text]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Text
forall ty. HasSqlValueSyntax PgValueSyntax ty =&gt; ty -&gt; Text
</span><a href="#local-6989586621679189564"><span class="hs-identifier hs-var">encodeToString</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679189566"><span class="hs-identifier hs-var">vals</span></a></span><span>
</span><span id="line-100"></span><span>
</span><span id="line-101"></span><span>      </span><span class="hs-comment">-- TODO better reporting</span><span>
</span><span id="line-102"></span><span>      </span><span id="local-6989586621679189564"><span class="annot"><span class="annottext">encodeToString :: ty -&gt; Text
</span><a href="#local-6989586621679189564"><span class="hs-identifier hs-var hs-var">encodeToString</span></a></span></span><span> </span><span id="local-6989586621679189563"><span class="annot"><span class="annottext">ty
</span><a href="#local-6989586621679189563"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-103"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Syntax.html#PgValueSyntax"><span class="hs-identifier hs-type">PgValueSyntax</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.Syntax.html#PgSyntax"><span class="hs-identifier hs-type">PgSyntax</span></a></span><span> </span><span id="local-6989586621679189560"><span class="annot"><span class="annottext">PgSyntaxM ()
</span><a href="#local-6989586621679189560"><span class="hs-identifier hs-var">syntax</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ty -&gt; PgValueSyntax
forall expr ty. HasSqlValueSyntax expr ty =&gt; ty -&gt; expr
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">sqlValueSyntax</span></a></span><span> </span><span class="annot"><span class="annottext">ty
</span><a href="#local-6989586621679189563"><span class="hs-identifier hs-var">val</span></a></span><span>
</span><span id="line-104"></span><span>        </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">PgSyntaxM () -&gt; (() -&gt; Text) -&gt; (PgSyntaxF Text -&gt; Text) -&gt; Text
forall (f :: * -&gt; *) a.
F f a -&gt; forall r. (a -&gt; r) -&gt; (f r -&gt; r) -&gt; r
</span><a href="../../../../free/html/src"><span class="hs-identifier hs-var hs-var">runF</span></a></span><span> </span><span class="annot"><span class="annottext">PgSyntaxM ()
</span><a href="#local-6989586621679189560"><span class="hs-identifier hs-var">syntax</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Text
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Expecting a simple text encoding for enumeration type&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-105"></span><span>                       </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-106"></span><span>                           </span><span class="annot"><a href="Database.Beam.Postgres.Syntax.html#EmitByteString"><span class="hs-identifier hs-type">EmitByteString</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;'&quot;</span></span><span> </span><span id="local-6989586621679189556"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679189556"><span class="hs-identifier hs-var">next</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679189556"><span class="hs-identifier hs-var">next</span></a></span><span>
</span><span id="line-107"></span><span>                           </span><span class="annot"><a href="Database.Beam.Postgres.Syntax.html#EscapeString"><span class="hs-identifier hs-type">EscapeString</span></a></span><span> </span><span id="local-6989586621679189554"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679189554"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><a href="../../../../text/html/src"><span class="hs-identifier hs-var">TE.decodeUtf8</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679189554"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-comment">-- TODO Make this more robust</span><span>
</span><span id="line-108"></span><span>                           </span><span class="annot"><span class="annottext">PgSyntaxF Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Text
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Expecting a simple text encoding for enumeration type&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-109"></span><span>  </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">(Text -&gt; SomeDatabasePredicate) -&gt; PgTypeCheck
</span><a href="Database.Beam.Postgres.CustomTypes.html#PgTypeCheck"><span class="hs-identifier hs-var">PgTypeCheck</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679189552"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679189552"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PgHasEnum -&gt; SomeDatabasePredicate
forall p. DatabasePredicate p =&gt; p -&gt; SomeDatabasePredicate
</span><a href="../../../../beam-migrate/html/src"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; [Text] -&gt; PgHasEnum
</span><a href="Database.Beam.Postgres.Syntax.html#PgHasEnum"><span class="hs-identifier hs-var">PgHasEnum</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679189552"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679189565"><span class="hs-identifier hs-var">valTxts</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span id="local-6989586621679189551"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">IsDatabaseEntity</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgType"><span class="hs-identifier hs-type">PgType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189551"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span>  </span><span class="hs-keyword">data</span><span> </span><span id="DatabaseEntityDescriptor"><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">DatabaseEntityDescriptor</span></a></span></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgType"><span class="hs-identifier hs-type">PgType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189551"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-114"></span><span>      </span><span id="local-6989586621679189695"><span id="PgTypeDescriptor"><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgTypeDescriptor"><span class="hs-identifier hs-var">PgTypeDescriptor</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Syntax.html#PgDataTypeSyntax"><span class="hs-identifier hs-type">PgDataTypeSyntax</span></a></span><span>
</span><span id="line-115"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">DatabaseEntityDescriptor</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgType"><span class="hs-identifier hs-type">PgType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189695"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="DatabaseEntityDefaultRequirements"><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">DatabaseEntityDefaultRequirements</span></a></span></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgType"><span class="hs-identifier hs-type">PgType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189551"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-118"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">HasSqlValueSyntax</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Syntax.html#PgValueSyntax"><span class="hs-identifier hs-type">PgValueSyntax</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189551"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-119"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">FromBackendRow</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189551"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-120"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#IsPgCustomDataType"><span class="hs-identifier hs-type">IsPgCustomDataType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189551"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-121"></span><span>
</span><span id="line-122"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="DatabaseEntityRegularRequirements"><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">DatabaseEntityRegularRequirements</span></a></span></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgType"><span class="hs-identifier hs-type">PgType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189551"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-123"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">HasSqlValueSyntax</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Syntax.html#PgValueSyntax"><span class="hs-identifier hs-type">PgValueSyntax</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189551"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-124"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">FromBackendRow</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189551"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-125"></span><span>
</span><span id="line-126"></span><span>  </span><span id="local-6989586621679189543"><span class="annot"><span class="annottext">dbEntityName :: (Text -&gt; f Text)
-&gt; DatabaseEntityDescriptor Postgres (PgType a)
-&gt; f (DatabaseEntityDescriptor Postgres (PgType a))
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">dbEntityName</span></a></span></span><span> </span><span id="local-6989586621679189541"><span class="annot"><span class="annottext">Text -&gt; f Text
</span><a href="#local-6989586621679189541"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgTypeDescriptor"><span class="hs-identifier hs-type">PgTypeDescriptor</span></a></span><span> </span><span id="local-6989586621679189540"><span class="annot"><a href="#local-6989586621679189540"><span class="hs-identifier hs-var">sch</span></a></span></span><span> </span><span id="local-6989586621679189539"><span class="annot"><a href="#local-6989586621679189539"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span id="local-6989586621679189538"><span class="annot"><a href="#local-6989586621679189538"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679189537"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679189537"><span class="hs-identifier hs-var">nm'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Text
-&gt; Text
-&gt; PgDataTypeSyntax
-&gt; DatabaseEntityDescriptor Postgres (PgType a)
forall a.
Maybe Text
-&gt; Text
-&gt; PgDataTypeSyntax
-&gt; DatabaseEntityDescriptor Postgres (PgType a)
</span><a href="Database.Beam.Postgres.CustomTypes.html#PgTypeDescriptor"><span class="hs-identifier hs-var">PgTypeDescriptor</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679189540"><span class="hs-identifier hs-var">sch</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679189537"><span class="hs-identifier hs-var">nm'</span></a></span><span> </span><span class="annot"><span class="annottext">PgDataTypeSyntax
</span><a href="#local-6989586621679189538"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Text -&gt; DatabaseEntityDescriptor Postgres (PgType a))
-&gt; f Text -&gt; f (DatabaseEntityDescriptor Postgres (PgType a))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; f Text
</span><a href="#local-6989586621679189541"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679189539"><span class="hs-identifier hs-var">nm</span></a></span><span>
</span><span id="line-127"></span><span>  </span><span id="local-6989586621679189535"><span class="annot"><span class="annottext">dbEntitySchema :: (Maybe Text -&gt; f (Maybe Text))
-&gt; DatabaseEntityDescriptor Postgres (PgType a)
-&gt; f (DatabaseEntityDescriptor Postgres (PgType a))
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">dbEntitySchema</span></a></span></span><span> </span><span id="local-6989586621679189533"><span class="annot"><span class="annottext">Maybe Text -&gt; f (Maybe Text)
</span><a href="#local-6989586621679189533"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgTypeDescriptor"><span class="hs-identifier hs-type">PgTypeDescriptor</span></a></span><span> </span><span id="local-6989586621679189532"><span class="annot"><a href="#local-6989586621679189532"><span class="hs-identifier hs-var">sch</span></a></span></span><span> </span><span id="local-6989586621679189531"><span class="annot"><a href="#local-6989586621679189531"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span id="local-6989586621679189530"><span class="annot"><a href="#local-6989586621679189530"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Text
-&gt; Text
-&gt; PgDataTypeSyntax
-&gt; DatabaseEntityDescriptor Postgres (PgType a)
forall a.
Maybe Text
-&gt; Text
-&gt; PgDataTypeSyntax
-&gt; DatabaseEntityDescriptor Postgres (PgType a)
</span><a href="Database.Beam.Postgres.CustomTypes.html#PgTypeDescriptor"><span class="hs-identifier hs-var">PgTypeDescriptor</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Text
 -&gt; Text
 -&gt; PgDataTypeSyntax
 -&gt; DatabaseEntityDescriptor Postgres (PgType a))
-&gt; f (Maybe Text)
-&gt; f (Text
      -&gt; PgDataTypeSyntax
      -&gt; DatabaseEntityDescriptor Postgres (PgType a))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text -&gt; f (Maybe Text)
</span><a href="#local-6989586621679189533"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679189532"><span class="hs-identifier hs-var">sch</span></a></span><span> </span><span class="annot"><span class="annottext">f (Text
   -&gt; PgDataTypeSyntax
   -&gt; DatabaseEntityDescriptor Postgres (PgType a))
-&gt; f Text
-&gt; f (PgDataTypeSyntax
      -&gt; DatabaseEntityDescriptor Postgres (PgType a))
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; f Text
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679189531"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="annot"><span class="annottext">f (PgDataTypeSyntax
   -&gt; DatabaseEntityDescriptor Postgres (PgType a))
-&gt; f PgDataTypeSyntax
-&gt; f (DatabaseEntityDescriptor Postgres (PgType a))
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">PgDataTypeSyntax -&gt; f PgDataTypeSyntax
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">PgDataTypeSyntax
</span><a href="#local-6989586621679189530"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-128"></span><span>  </span><span id="local-6989586621679189529"><span class="annot"><span class="annottext">dbEntityAuto :: Text -&gt; DatabaseEntityDescriptor Postgres (PgType a)
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">dbEntityAuto</span></a></span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Text
-&gt; Text
-&gt; PgDataTypeSyntax
-&gt; DatabaseEntityDescriptor Postgres (PgType a)
forall a.
Maybe Text
-&gt; Text
-&gt; PgDataTypeSyntax
-&gt; DatabaseEntityDescriptor Postgres (PgType a)
</span><a href="Database.Beam.Postgres.CustomTypes.html#PgTypeDescriptor"><span class="hs-identifier hs-var">PgTypeDescriptor</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679189527"><span class="hs-identifier hs-var">typeName</span></a></span><span>
</span><span id="line-129"></span><span>                                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PgDataTypeDescr
-&gt; PgSyntax -&gt; BeamSerializedDataType -&gt; PgDataTypeSyntax
</span><a href="Database.Beam.Postgres.Syntax.html#PgDataTypeSyntax"><span class="hs-identifier hs-var">PgDataTypeSyntax</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; PgDataTypeDescr
</span><a href="Database.Beam.Postgres.Syntax.html#PgDataTypeDescrDomain"><span class="hs-identifier hs-var">PgDataTypeDescrDomain</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679189527"><span class="hs-identifier hs-var">typeName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span>                                                      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; PgSyntax
</span><a href="Database.Beam.Postgres.Syntax.html#pgQuotedIdentifier"><span class="hs-identifier hs-var">pgQuotedIdentifier</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679189527"><span class="hs-identifier hs-var">typeName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-131"></span><span>                                                      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value -&gt; BeamSerializedDataType
</span><a href="Database.Beam.Postgres.Syntax.html#pgDataTypeJSON"><span class="hs-identifier hs-var">pgDataTypeJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><a href="../../../../aeson/html/src"><span class="hs-identifier hs-var">object</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;customType&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Text -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="../../../../aeson/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679189527"><span class="hs-identifier hs-var">typeName</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-133"></span><span>        </span><span id="local-6989586621679189527"><span class="annot"><span class="annottext">typeName :: Text
</span><a href="#local-6989586621679189527"><span class="hs-identifier hs-var hs-var">typeName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy a -&gt; Text
forall a. IsPgCustomDataType a =&gt; Proxy a -&gt; Text
</span><a href="Database.Beam.Postgres.CustomTypes.html#pgDataTypeName"><span class="hs-identifier hs-var">pgDataTypeName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy a
forall k (t :: k). Proxy t
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679189551"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-134"></span><span>
</span><span id="line-135"></span><span id="local-6989586621679189521"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679189518"><span class="annot"><a href="../../../../beam-migrate/html/src"><span class="hs-identifier hs-type">IsCheckedDatabaseEntity</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgType"><span class="hs-identifier hs-type">PgType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189521"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-136"></span><span>    </span><span class="hs-keyword">data</span><span> </span><span id="CheckedDatabaseEntityDescriptor"><span class="annot"><a href="../../../../beam-migrate/html/src"><span class="hs-identifier hs-var">CheckedDatabaseEntityDescriptor</span></a></span></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgType"><span class="hs-identifier hs-type">PgType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189521"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-137"></span><span>        </span><span id="local-6989586621679189666"><span id="CheckedPgTypeDescriptor"><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#CheckedPgTypeDescriptor"><span class="hs-identifier hs-var">CheckedPgTypeDescriptor</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">DatabaseEntityDescriptor</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgType"><span class="hs-identifier hs-type">PgType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189666"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span>                                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgTypeCheck"><span class="hs-identifier hs-type">PgTypeCheck</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-139"></span><span>                                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../beam-migrate/html/src"><span class="hs-identifier hs-type">CheckedDatabaseEntityDescriptor</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgType"><span class="hs-identifier hs-type">PgType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189666"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-140"></span><span>    </span><span class="hs-keyword">type</span><span> </span><span id="CheckedDatabaseEntityDefaultRequirements"><span class="annot"><a href="../../../../beam-migrate/html/src"><span class="hs-identifier hs-var">CheckedDatabaseEntityDefaultRequirements</span></a></span></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgType"><span class="hs-identifier hs-type">PgType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189521"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-141"></span><span>        </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">DatabaseEntityDefaultRequirements</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgType"><span class="hs-identifier hs-type">PgType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189521"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span>    </span><span id="local-6989586621679189512"><span class="annot"><span class="annottext">unChecked :: (DatabaseEntityDescriptor Postgres (PgType a)
 -&gt; f (DatabaseEntityDescriptor Postgres (PgType a)))
-&gt; CheckedDatabaseEntityDescriptor Postgres (PgType a)
-&gt; f (CheckedDatabaseEntityDescriptor Postgres (PgType a))
</span><a href="../../../../beam-migrate/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">unChecked</span></a></span></span><span> </span><span id="local-6989586621679189510"><span class="annot"><span class="annottext">DatabaseEntityDescriptor Postgres (PgType a)
-&gt; f (DatabaseEntityDescriptor Postgres (PgType a))
</span><a href="#local-6989586621679189510"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#CheckedPgTypeDescriptor"><span class="hs-identifier hs-type">CheckedPgTypeDescriptor</span></a></span><span> </span><span id="local-6989586621679189509"><span class="annot"><a href="#local-6989586621679189509"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621679189508"><span class="annot"><a href="#local-6989586621679189508"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(DatabaseEntityDescriptor Postgres (PgType a)
 -&gt; CheckedDatabaseEntityDescriptor Postgres (PgType a))
-&gt; f (DatabaseEntityDescriptor Postgres (PgType a))
-&gt; f (CheckedDatabaseEntityDescriptor Postgres (PgType a))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679189507"><span class="annot"><span class="annottext">DatabaseEntityDescriptor Postgres (PgType a)
</span><a href="#local-6989586621679189507"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DatabaseEntityDescriptor Postgres (PgType a)
-&gt; [PgTypeCheck]
-&gt; CheckedDatabaseEntityDescriptor Postgres (PgType a)
forall a.
DatabaseEntityDescriptor Postgres (PgType a)
-&gt; [PgTypeCheck]
-&gt; CheckedDatabaseEntityDescriptor Postgres (PgType a)
</span><a href="Database.Beam.Postgres.CustomTypes.html#CheckedPgTypeDescriptor"><span class="hs-identifier hs-var">CheckedPgTypeDescriptor</span></a></span><span> </span><span class="annot"><span class="annottext">DatabaseEntityDescriptor Postgres (PgType a)
</span><a href="#local-6989586621679189507"><span class="hs-identifier hs-var">ty'</span></a></span><span> </span><span class="annot"><span class="annottext">[PgTypeCheck]
</span><a href="#local-6989586621679189508"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DatabaseEntityDescriptor Postgres (PgType a)
-&gt; f (DatabaseEntityDescriptor Postgres (PgType a))
</span><a href="#local-6989586621679189510"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">DatabaseEntityDescriptor Postgres (PgType a)
</span><a href="#local-6989586621679189509"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span>    </span><span id="local-6989586621679189506"><span class="annot"><span class="annottext">collectEntityChecks :: CheckedDatabaseEntityDescriptor Postgres (PgType a)
-&gt; [SomeDatabasePredicate]
</span><a href="../../../../beam-migrate/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">collectEntityChecks</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#CheckedPgTypeDescriptor"><span class="hs-identifier hs-type">CheckedPgTypeDescriptor</span></a></span><span> </span><span id="local-6989586621679189504"><span class="annot"><a href="#local-6989586621679189504"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621679189503"><span class="annot"><a href="#local-6989586621679189503"><span class="hs-identifier hs-var">chks</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-145"></span><span>        </span><span class="annot"><span class="annottext">(PgTypeCheck -&gt; SomeDatabasePredicate)
-&gt; [PgTypeCheck] -&gt; [SomeDatabasePredicate]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgTypeCheck"><span class="hs-identifier hs-type">PgTypeCheck</span></a></span><span> </span><span id="local-6989586621679189502"><span class="annot"><span class="annottext">Text -&gt; SomeDatabasePredicate
</span><a href="#local-6989586621679189502"><span class="hs-identifier hs-var">mkCheck</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; SomeDatabasePredicate
</span><a href="#local-6989586621679189502"><span class="hs-identifier hs-var">mkCheck</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Const Text (DatabaseEntityDescriptor Postgres (PgType a)) -&gt; Text
forall a k (b :: k). Const a b -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var">getConst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Text -&gt; Const Text Text)
-&gt; DatabaseEntityDescriptor Postgres (PgType a)
-&gt; Const Text (DatabaseEntityDescriptor Postgres (PgType a))
forall be entityType.
IsDatabaseEntity be entityType =&gt;
Lens' (DatabaseEntityDescriptor be entityType) Text
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">dbEntityName</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Const Text Text
forall k a (b :: k). a -&gt; Const a b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Const</span></a></span><span> </span><span class="annot"><span class="annottext">DatabaseEntityDescriptor Postgres (PgType a)
</span><a href="#local-6989586621679189504"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[PgTypeCheck]
</span><a href="#local-6989586621679189503"><span class="hs-identifier hs-var">chks</span></a></span><span>
</span><span id="line-146"></span><span>    </span><span id="local-6989586621679189499"><span class="annot"><span class="annottext">checkedDbEntityAuto :: Text -&gt; CheckedDatabaseEntityDescriptor Postgres (PgType a)
</span><a href="../../../../beam-migrate/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">checkedDbEntityAuto</span></a></span></span><span> </span><span id="local-6989586621679189497"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679189497"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DatabaseEntityDescriptor Postgres (PgType a)
-&gt; [PgTypeCheck]
-&gt; CheckedDatabaseEntityDescriptor Postgres (PgType a)
forall a.
DatabaseEntityDescriptor Postgres (PgType a)
-&gt; [PgTypeCheck]
-&gt; CheckedDatabaseEntityDescriptor Postgres (PgType a)
</span><a href="Database.Beam.Postgres.CustomTypes.html#CheckedPgTypeDescriptor"><span class="hs-identifier hs-var">CheckedPgTypeDescriptor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; DatabaseEntityDescriptor Postgres (PgType a)
forall be entityType.
(IsDatabaseEntity be entityType,
 DatabaseEntityDefaultRequirements be entityType) =&gt;
Text -&gt; DatabaseEntityDescriptor be entityType
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">dbEntityAuto</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679189497"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span>                                                     </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PgDataTypeSchema a -&gt; [PgTypeCheck]
forall a. PgDataTypeSchema a -&gt; [PgTypeCheck]
</span><a href="Database.Beam.Postgres.CustomTypes.html#pgChecksForTypeSchema"><span class="hs-identifier hs-var">pgChecksForTypeSchema</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IsPgCustomDataType a =&gt; PgDataTypeSchema a
forall a. IsPgCustomDataType a =&gt; PgDataTypeSchema a
</span><a href="Database.Beam.Postgres.CustomTypes.html#pgDataTypeDescription"><span class="hs-identifier hs-var">pgDataTypeDescription</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679189521"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-148"></span><span>
</span><span id="line-149"></span><span id="local-6989586621679189496"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">RenamableWithRule</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">FieldRenamer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">DatabaseEntityDescriptor</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgType"><span class="hs-identifier hs-type">PgType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189496"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-150"></span><span>    </span><span id="local-6989586621679189493"><span class="annot"><span class="annottext">renamingFields :: (NonEmpty Text -&gt; Text)
-&gt; FieldRenamer (DatabaseEntityDescriptor Postgres (PgType a))
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">renamingFields</span></a></span></span><span> </span><span class="annot"><span class="annottext">NonEmpty Text -&gt; Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(DatabaseEntityDescriptor Postgres (PgType a)
 -&gt; DatabaseEntityDescriptor Postgres (PgType a))
-&gt; FieldRenamer (DatabaseEntityDescriptor Postgres (PgType a))
forall entity. (entity -&gt; entity) -&gt; FieldRenamer entity
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">FieldRenamer</span></a></span><span> </span><span class="annot"><span class="annottext">DatabaseEntityDescriptor Postgres (PgType a)
-&gt; DatabaseEntityDescriptor Postgres (PgType a)
forall a. a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">id</span></a></span></span><span>
</span><span id="line-151"></span><span>
</span><span id="line-152"></span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#createEnum"><span class="hs-identifier hs-type">createEnum</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679189489"><span class="annot"><a href="#local-6989586621679189489"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679189488"><span class="annot"><a href="#local-6989586621679189488"><span class="hs-identifier hs-type">db</span></a></span></span><span>
</span><span id="line-153"></span><span>            </span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">HasSqlValueSyntax</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Syntax.html#PgValueSyntax"><span class="hs-identifier hs-type">PgValueSyntax</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189489"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-154"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Enum</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189489"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Bounded</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189489"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span>           </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../text/html/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../beam-migrate/html/src"><span class="hs-identifier hs-type">Migration</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-migrate/html/src"><span class="hs-identifier hs-type">CheckedDatabaseEntity</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189488"><span class="hs-identifier hs-type">db</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgType"><span class="hs-identifier hs-type">PgType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189489"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-156"></span><span id="createEnum"><span class="annot"><span class="annottext">createEnum :: Text
-&gt; Migration
     Postgres (CheckedDatabaseEntity Postgres db (PgType a))
</span><a href="Database.Beam.Postgres.CustomTypes.html#createEnum"><span class="hs-identifier hs-var hs-var">createEnum</span></a></span></span><span> </span><span id="local-6989586621679189487"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679189487"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-157"></span><span>  </span><span class="annot"><span class="annottext">BeamSqlBackendSyntax Postgres
-&gt; Maybe (BeamSqlBackendSyntax Postgres) -&gt; Migration Postgres ()
forall be.
BeamSqlBackendSyntax be
-&gt; Maybe (BeamSqlBackendSyntax be) -&gt; Migration be ()
</span><a href="../../../../beam-migrate/html/src"><span class="hs-identifier hs-var">upDown</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; [PgValueSyntax] -&gt; PgCommandSyntax
</span><a href="Database.Beam.Postgres.Syntax.html#pgCreateEnumSyntax"><span class="hs-identifier hs-var">pgCreateEnumSyntax</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679189487"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; PgValueSyntax) -&gt; [a] -&gt; [PgValueSyntax]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; PgValueSyntax
forall expr ty. HasSqlValueSyntax expr ty =&gt; ty -&gt; expr
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">sqlValueSyntax</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">a
forall a. Bounded a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">minBound</span></a></span><span class="hs-glyph">..</span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
forall a. Bounded a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maxBound</span></a></span><span class="hs-glyph">::</span><span class="annot"><a href="#local-6989586621679189489"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-158"></span><span>         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PgCommandSyntax -&gt; Maybe PgCommandSyntax
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; PgCommandSyntax
</span><a href="Database.Beam.Postgres.Syntax.html#pgDropTypeSyntax"><span class="hs-identifier hs-var">pgDropTypeSyntax</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679189487"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-159"></span><span>
</span><span id="line-160"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679189485"><span class="annot"><span class="annottext">tyDesc :: DatabaseEntityDescriptor Postgres (PgType a)
</span><a href="#local-6989586621679189485"><span class="hs-identifier hs-var hs-var">tyDesc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Text
-&gt; Text
-&gt; PgDataTypeSyntax
-&gt; DatabaseEntityDescriptor Postgres (PgType a)
forall a.
Maybe Text
-&gt; Text
-&gt; PgDataTypeSyntax
-&gt; DatabaseEntityDescriptor Postgres (PgType a)
</span><a href="Database.Beam.Postgres.CustomTypes.html#PgTypeDescriptor"><span class="hs-identifier hs-var">PgTypeDescriptor</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679189487"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="annot"><span class="annottext">(PgDataTypeSyntax -&gt; DatabaseEntityDescriptor Postgres (PgType a))
-&gt; PgDataTypeSyntax -&gt; DatabaseEntityDescriptor Postgres (PgType a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-161"></span><span>               </span><span class="annot"><span class="annottext">PgDataTypeDescr
-&gt; PgSyntax -&gt; BeamSerializedDataType -&gt; PgDataTypeSyntax
</span><a href="Database.Beam.Postgres.Syntax.html#PgDataTypeSyntax"><span class="hs-identifier hs-var">PgDataTypeSyntax</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; PgDataTypeDescr
</span><a href="Database.Beam.Postgres.Syntax.html#PgDataTypeDescrDomain"><span class="hs-identifier hs-var">PgDataTypeDescrDomain</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679189487"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-162"></span><span>                                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; PgSyntax
</span><a href="Database.Beam.Postgres.Syntax.html#pgQuotedIdentifier"><span class="hs-identifier hs-var">pgQuotedIdentifier</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679189487"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-163"></span><span>                                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value -&gt; BeamSerializedDataType
</span><a href="Database.Beam.Postgres.Syntax.html#pgDataTypeJSON"><span class="hs-identifier hs-var">pgDataTypeJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><a href="../../../../aeson/html/src"><span class="hs-identifier hs-var">object</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;customType&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Text -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="../../../../aeson/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679189487"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-164"></span><span>
</span><span id="line-165"></span><span>  </span><span class="annot"><span class="annottext">CheckedDatabaseEntity Postgres db (PgType a)
-&gt; Migration
     Postgres (CheckedDatabaseEntity Postgres db (PgType a))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CheckedDatabaseEntityDescriptor Postgres (PgType a)
-&gt; [SomeDatabasePredicate]
-&gt; CheckedDatabaseEntity Postgres db (PgType a)
forall be entityType (db :: (* -&gt; *) -&gt; *).
IsCheckedDatabaseEntity be entityType =&gt;
CheckedDatabaseEntityDescriptor be entityType
-&gt; [SomeDatabasePredicate]
-&gt; CheckedDatabaseEntity be db entityType
</span><a href="../../../../beam-migrate/html/src"><span class="hs-identifier hs-var">CheckedDatabaseEntity</span></a></span><span>
</span><span id="line-166"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DatabaseEntityDescriptor Postgres (PgType a)
-&gt; [PgTypeCheck]
-&gt; CheckedDatabaseEntityDescriptor Postgres (PgType a)
forall a.
DatabaseEntityDescriptor Postgres (PgType a)
-&gt; [PgTypeCheck]
-&gt; CheckedDatabaseEntityDescriptor Postgres (PgType a)
</span><a href="Database.Beam.Postgres.CustomTypes.html#CheckedPgTypeDescriptor"><span class="hs-identifier hs-var">CheckedPgTypeDescriptor</span></a></span><span> </span><span class="annot"><span class="annottext">DatabaseEntityDescriptor Postgres (PgType a)
</span><a href="#local-6989586621679189485"><span class="hs-identifier hs-var">tyDesc</span></a></span><span>
</span><span id="line-167"></span><span>             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PgDataTypeSchema a -&gt; [PgTypeCheck]
forall a. PgDataTypeSchema a -&gt; [PgTypeCheck]
</span><a href="Database.Beam.Postgres.CustomTypes.html#pgChecksForTypeSchema"><span class="hs-identifier hs-var">pgChecksForTypeSchema</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[a] -&gt; PgDataTypeSchema a
forall a.
HasSqlValueSyntax PgValueSyntax a =&gt;
[a] -&gt; PgDataTypeSchema a
</span><a href="Database.Beam.Postgres.CustomTypes.html#PgDataTypeEnum"><span class="hs-identifier hs-var">PgDataTypeEnum</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">a
forall a. Bounded a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">minBound</span></a></span><span class="hs-glyph">..</span><span class="annot"><span class="annottext">a
forall a. Bounded a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maxBound</span></a></span><span class="hs-glyph">::</span><span class="annot"><a href="#local-6989586621679189489"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-168"></span><span>          </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span>
</span><span id="line-171"></span><span id="local-6989586621679189483"><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#pgEnumValueSyntax"><span class="hs-identifier hs-type">pgEnumValueSyntax</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679189483"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679189483"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Syntax.html#PgValueSyntax"><span class="hs-identifier hs-type">PgValueSyntax</span></a></span></span><span>
</span><span id="line-172"></span><span id="pgEnumValueSyntax"><span class="annot"><span class="annottext">pgEnumValueSyntax :: (a -&gt; [Char]) -&gt; a -&gt; PgValueSyntax
</span><a href="Database.Beam.Postgres.CustomTypes.html#pgEnumValueSyntax"><span class="hs-identifier hs-var hs-var">pgEnumValueSyntax</span></a></span></span><span> </span><span id="local-6989586621679189481"><span class="annot"><span class="annottext">a -&gt; [Char]
</span><a href="#local-6989586621679189481"><span class="hs-identifier hs-var">namer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; PgValueSyntax
forall expr ty. HasSqlValueSyntax expr ty =&gt; ty -&gt; expr
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">sqlValueSyntax</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; PgValueSyntax) -&gt; (a -&gt; [Char]) -&gt; a -&gt; PgValueSyntax
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; [Char]
</span><a href="#local-6989586621679189481"><span class="hs-identifier hs-var">namer</span></a></span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span class="hs-keyword">newtype</span><span> </span><span id="PgRawString"><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgRawString"><span class="hs-identifier hs-var">PgRawString</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PgRawString"><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgRawString"><span class="hs-identifier hs-var">PgRawString</span></a></span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-175"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679189474"><span id="local-6989586621679189476"><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">FromBackendRow</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgRawString"><span class="hs-identifier hs-type">PgRawString</span></a></span></span></span><span>
</span><span id="line-176"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier hs-type">Pg.FromField</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgRawString"><span class="hs-identifier hs-type">PgRawString</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-177"></span><span>    </span><span id="local-6989586621679189470"><span class="annot"><span class="annottext">fromField :: FieldParser PgRawString
</span><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromField</span></a></span></span><span> </span><span id="local-6989586621679189468"><span class="annot"><span class="annottext">Field
</span><a href="#local-6989586621679189468"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe ByteString
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; Maybe Oid -&gt; [Char] -&gt; [Char] -&gt; [Char] -&gt; ResultError)
-&gt; Field -&gt; [Char] -&gt; Conversion PgRawString
forall a err.
(Typeable a, Exception err) =&gt;
([Char] -&gt; Maybe Oid -&gt; [Char] -&gt; [Char] -&gt; [Char] -&gt; err)
-&gt; Field -&gt; [Char] -&gt; Conversion a
</span><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier hs-var">Pg.returnError</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Maybe Oid -&gt; [Char] -&gt; [Char] -&gt; [Char] -&gt; ResultError
</span><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier hs-var">Pg.UnexpectedNull</span></a></span><span> </span><span class="annot"><span class="annottext">Field
</span><a href="#local-6989586621679189468"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;When parsing enumeration string&quot;</span></span><span>
</span><span id="line-178"></span><span>    </span><span class="annot"><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier hs-var">fromField</span></a></span><span> </span><span class="annot"><span class="annottext">Field
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679189465"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679189465"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PgRawString -&gt; Conversion PgRawString
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char] -&gt; PgRawString
</span><a href="Database.Beam.Postgres.CustomTypes.html#PgRawString"><span class="hs-identifier hs-var">PgRawString</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; [Char]
</span><a href="../../../../bytestring/html/src"><span class="hs-identifier hs-var">BC.unpack</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679189465"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-179"></span><span>
</span><span id="line-180"></span><span id="local-6989586621679189463"><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#pgParseEnum"><span class="hs-identifier hs-type">pgParseEnum</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Enum</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189463"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Bounded</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189463"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679189463"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-181"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">FromBackendRowM</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189463"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-182"></span><span id="pgParseEnum"><span class="annot"><span class="annottext">pgParseEnum :: (a -&gt; [Char]) -&gt; FromBackendRowM Postgres a
</span><a href="Database.Beam.Postgres.CustomTypes.html#pgParseEnum"><span class="hs-identifier hs-var hs-var">pgParseEnum</span></a></span></span><span> </span><span id="local-6989586621679189462"><span class="annot"><span class="annottext">a -&gt; [Char]
</span><a href="#local-6989586621679189462"><span class="hs-identifier hs-var">namer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-183"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679189461"><span class="annot"><span class="annottext">allNames :: [([Char], a)]
</span><a href="#local-6989586621679189461"><span class="hs-identifier hs-var hs-var">allNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; ([Char], a)) -&gt; [a] -&gt; [([Char], a)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679189460"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679189460"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; [Char]
</span><a href="#local-6989586621679189462"><span class="hs-identifier hs-var">namer</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679189460"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679189460"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">a
forall a. Bounded a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">minBound</span></a></span><span class="hs-glyph">..</span><span class="annot"><span class="annottext">a
forall a. Bounded a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maxBound</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-184"></span><span>  </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-185"></span><span>    </span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgRawString"><span class="hs-identifier hs-type">PgRawString</span></a></span><span> </span><span id="local-6989586621679189459"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679189459"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FromBackendRowM Postgres PgRawString
forall be a. FromBackendRow be a =&gt; FromBackendRowM be a
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">fromBackendRow</span></a></span><span>
</span><span id="line-186"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [([Char], a)] -&gt; Maybe a
forall a b. Eq a =&gt; a -&gt; [(a, b)] -&gt; Maybe b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">lookup</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679189459"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">[([Char], a)]
</span><a href="#local-6989586621679189461"><span class="hs-identifier hs-var">allNames</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-187"></span><span>      </span><span class="annot"><span class="annottext">Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; FromBackendRowM Postgres a
forall (m :: * -&gt; *) a. MonadFail m =&gt; [Char] -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fail</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Invalid postgres enumeration value: &quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679189459"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-188"></span><span>      </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span>  </span><span id="local-6989586621679189456"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679189456"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; FromBackendRowM Postgres a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679189456"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-189"></span><span>
</span><span id="line-190"></span><span id="local-6989586621679189454"><span id="local-6989586621679189455"><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#beamTypeForCustomPg"><span class="hs-identifier hs-type">beamTypeForCustomPg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../beam-migrate/html/src"><span class="hs-identifier hs-type">CheckedDatabaseEntity</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189455"><span class="hs-identifier hs-type">db</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgType"><span class="hs-identifier hs-type">PgType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189454"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">DataType</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679189454"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-191"></span><span id="beamTypeForCustomPg"><span class="annot"><span class="annottext">beamTypeForCustomPg :: CheckedDatabaseEntity Postgres db (PgType a) -&gt; DataType Postgres a
</span><a href="Database.Beam.Postgres.CustomTypes.html#beamTypeForCustomPg"><span class="hs-identifier hs-var hs-var">beamTypeForCustomPg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-migrate/html/src"><span class="hs-identifier hs-type">CheckedDatabaseEntity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#CheckedPgTypeDescriptor"><span class="hs-identifier hs-type">CheckedPgTypeDescriptor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.CustomTypes.html#PgTypeDescriptor"><span class="hs-identifier hs-type">PgTypeDescriptor</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679189453"><span class="annot"><a href="#local-6989586621679189453"><span class="hs-identifier hs-var">dt</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[SomeDatabasePredicate]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-192"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BeamSqlBackendCastTargetSyntax Postgres -&gt; DataType Postgres a
forall be a. BeamSqlBackendCastTargetSyntax be -&gt; DataType be a
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">DataType</span></a></span><span> </span><span class="annot"><span class="annottext">BeamSqlBackendCastTargetSyntax Postgres
PgDataTypeSyntax
</span><a href="#local-6989586621679189453"><span class="hs-identifier hs-var">dt</span></a></span><span>
</span><span id="line-193"></span></pre></body></html>