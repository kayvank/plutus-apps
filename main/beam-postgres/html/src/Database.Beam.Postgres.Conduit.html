<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns #-}</span><span>
</span><span id="line-4"></span><span>
</span><span id="line-5"></span><span class="hs-comment">-- | More efficient query execution functions for @beam-postgres@. These</span><span>
</span><span id="line-6"></span><span class="hs-comment">-- functions use the @conduit@ package, to execute @beam-postgres@ statements in</span><span>
</span><span id="line-7"></span><span class="hs-comment">-- an arbitrary 'MonadIO'. These functions may be more efficient for streaming</span><span>
</span><span id="line-8"></span><span class="hs-comment">-- operations than 'MonadBeam'.</span><span>
</span><span id="line-9"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Database.Beam.Postgres.Conduit</span><span>
</span><span id="line-10"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#streamingRunSelect"><span class="hs-identifier">streamingRunSelect</span></a></span><span>
</span><span id="line-11"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#runInsert"><span class="hs-identifier">runInsert</span></a></span><span>
</span><span id="line-12"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#streamingRunInsertReturning"><span class="hs-identifier">streamingRunInsertReturning</span></a></span><span>
</span><span id="line-13"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#runUpdate"><span class="hs-identifier">runUpdate</span></a></span><span>
</span><span id="line-14"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#streamingRunUpdateReturning"><span class="hs-identifier">streamingRunUpdateReturning</span></a></span><span>
</span><span id="line-15"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#runDelete"><span class="hs-identifier">runDelete</span></a></span><span>
</span><span id="line-16"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#streamingRunDeleteReturning"><span class="hs-identifier">streamingRunDeleteReturning</span></a></span><span>
</span><span id="line-17"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#executeStatement"><span class="hs-identifier">executeStatement</span></a></span><span>
</span><span id="line-18"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#streamingRunQueryReturning"><span class="hs-identifier">streamingRunQueryReturning</span></a></span><span>
</span><span id="line-19"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Deprecated streaming variants</span></span><span>
</span><span id="line-20"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#runSelect"><span class="hs-identifier">runSelect</span></a></span><span>
</span><span id="line-21"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#runInsertReturning"><span class="hs-identifier">runInsertReturning</span></a></span><span>
</span><span id="line-22"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#runUpdateReturning"><span class="hs-identifier">runUpdateReturning</span></a></span><span>
</span><span id="line-23"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#runDeleteReturning"><span class="hs-identifier">runDeleteReturning</span></a></span><span>
</span><span id="line-24"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#runQueryReturning"><span class="hs-identifier">runQueryReturning</span></a></span><span>
</span><span id="line-25"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier">Database.Beam</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier">runInsert</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier">runUpdate</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier">runDelete</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Database.Beam.Postgres.Connection.html"><span class="hs-identifier">Database.Beam.Postgres.Connection</span></a></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Database.Beam.Postgres.Full.html"><span class="hs-identifier">Database.Beam.Postgres.Full</span></a></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Database.Beam.Postgres.Syntax.html"><span class="hs-identifier">Database.Beam.Postgres.Syntax</span></a></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Database.Beam.Postgres.Types.html"><span class="hs-identifier">Database.Beam.Postgres.Types</span></a></span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Concurrent.MVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">takeMVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">putMVar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Exception.Base</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">bracket</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">throwIO</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../../../../lifted-base/html/src"><span class="hs-identifier">Control.Exception.Lifted</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../lifted-base/html/src"><span class="hs-identifier">finally</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../lifted-base/html/src"><span class="hs-identifier">Control.Exception.Lifted</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Lifted</span></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../lifted-base/html/src"><span class="hs-identifier">Control.Concurrent.MVar.Lifted</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Lifted</span></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../../../../monad-control/html/src"><span class="hs-identifier">Control.Monad.Trans.Control</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../monad-control/html/src"><span class="hs-identifier">MonadBaseControl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier">Database.PostgreSQL.LibPQ</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Pg</span></span><span> </span><span class="hs-keyword">hiding</span><span>
</span><span id="line-41"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier">Connection</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier">escapeStringConn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier">escapeIdentifier</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier">escapeByteaConn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier">exec</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier">Database.PostgreSQL.LibPQ</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Pq</span></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier">Database.PostgreSQL.Simple</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Pg</span></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier">Database.PostgreSQL.Simple.Internal</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Pg</span></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier">Database.PostgreSQL.Simple.Internal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier">connectionHandle</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier">Database.PostgreSQL.Simple.Types</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Pg</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier">Query</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../conduit/html/src"><span class="hs-identifier">Conduit</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">C</span></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Int</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Int64</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">fromMaybe</span></a></span><span class="hs-special">)</span><span class="hs-cpp">
#if !MIN_VERSION_base(4, 11, 0)
</span><span class="hs-keyword">import</span><span>           </span><span class="hs-identifier">Data.Semigroup</span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Monad.Fail</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Fail</span></span><span class="hs-cpp">

#if MIN_VERSION_conduit(1,3,0)
</span><span class="hs-cpp">#define CONDUIT_TRANSFORMER C.ConduitT
</span><span class="hs-cpp">#else
</span><span class="hs-cpp">#define CONDUIT_TRANSFORMER C.ConduitM
</span><span class="hs-cpp">#endif
</span><span>
</span><span id="line-63"></span><span class="hs-comment">-- * @SELECT@</span><span>
</span><span id="line-64"></span><span>
</span><span id="line-65"></span><span class="hs-comment">-- | Run a PostgreSQL @SELECT@ statement in any 'C.MonadResource'.</span><span>
</span><span id="line-66"></span><span id="local-6989586621679191301"><span id="local-6989586621679191302"><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#streamingRunSelect"><span class="hs-identifier hs-type">streamingRunSelect</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../resourcet/html/src"><span class="hs-identifier hs-type">C.MonadResource</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191302"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Fail.MonadFail</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191302"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">FromBackendRow</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191301"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span>                   </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier hs-type">Pg.Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">SqlSelect</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191301"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-68"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">CONDUIT_TRANSFORMER</span><span> </span></span></span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">a</span><span> </span><span class="hs-identifier">m</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span id="streamingRunSelect"><span class="annot"><span class="annottext">streamingRunSelect :: Connection -&gt; SqlSelect Postgres a -&gt; ConduitT () a m ()
</span><a href="Database.Beam.Postgres.Conduit.html#streamingRunSelect"><span class="hs-identifier hs-var hs-var">streamingRunSelect</span></a></span></span><span> </span><span id="local-6989586621679191300"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191300"><span class="hs-identifier hs-var">conn</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">SqlSelect</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.Syntax.html#PgSelectSyntax"><span class="hs-identifier hs-type">PgSelectSyntax</span></a></span><span> </span><span id="local-6989586621679191297"><span class="annot"><a href="#local-6989586621679191297"><span class="hs-identifier hs-var">syntax</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-70"></span><span>  </span><span class="annot"><span class="annottext">Connection -&gt; PgSyntax -&gt; ConduitT () a m ()
forall (m :: * -&gt; *) r.
(MonadResource m, MonadFail m, FromBackendRow Postgres r) =&gt;
Connection -&gt; PgSyntax -&gt; ConduitT () r m ()
</span><a href="Database.Beam.Postgres.Conduit.html#streamingRunQueryReturning"><span class="hs-identifier hs-var">streamingRunQueryReturning</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191300"><span class="hs-identifier hs-var">conn</span></a></span><span> </span><span class="annot"><span class="annottext">PgSyntax
</span><a href="#local-6989586621679191297"><span class="hs-identifier hs-var">syntax</span></a></span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span class="hs-comment">-- | Run a PostgreSQL @SELECT@ statement in any 'MonadIO'.</span><span>
</span><span id="line-73"></span><span id="local-6989586621679191294"><span id="local-6989586621679191295"><span id="local-6989586621679191296"><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#runSelect"><span class="hs-identifier hs-type">runSelect</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191296"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Fail.MonadFail</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191296"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../monad-control/html/src"><span class="hs-identifier hs-type">MonadBaseControl</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191296"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">FromBackendRow</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191295"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span>          </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier hs-type">Pg.Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">SqlSelect</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191295"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-75"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">CONDUIT_TRANSFORMER</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">a</span><span> </span><span class="hs-identifier">m</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">m</span><span> </span></span></span></span><span class="hs-identifier">b</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">m</span><span> </span><span class="hs-identifier">b</span><span>
</span><span id="line-76"></span><span id="runSelect"><span class="annot"><span class="annottext">runSelect :: Connection
-&gt; SqlSelect Postgres a -&gt; (ConduitT () a m () -&gt; m b) -&gt; m b
</span><a href="Database.Beam.Postgres.Conduit.html#runSelect"><span class="hs-identifier hs-var hs-var">runSelect</span></a></span></span><span> </span><span id="local-6989586621679191293"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191293"><span class="hs-identifier hs-var">conn</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">SqlSelect</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.Syntax.html#PgSelectSyntax"><span class="hs-identifier hs-type">PgSelectSyntax</span></a></span><span> </span><span id="local-6989586621679191292"><span class="annot"><a href="#local-6989586621679191292"><span class="hs-identifier hs-var">syntax</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621679191291"><span class="annot"><span class="annottext">ConduitT () a m () -&gt; m b
</span><a href="#local-6989586621679191291"><span class="hs-identifier hs-var">withSrc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-77"></span><span>  </span><span class="annot"><span class="annottext">Connection -&gt; PgSyntax -&gt; (ConduitT () a m () -&gt; m b) -&gt; m b
forall (m :: * -&gt; *) r b.
(MonadIO m, MonadFail m, MonadBaseControl IO m, Functor m,
 FromBackendRow Postgres r) =&gt;
Connection -&gt; PgSyntax -&gt; (ConduitT () r m () -&gt; m b) -&gt; m b
</span><a href="Database.Beam.Postgres.Conduit.html#runQueryReturning"><span class="hs-identifier hs-var">runQueryReturning</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191293"><span class="hs-identifier hs-var">conn</span></a></span><span> </span><span class="annot"><span class="annottext">PgSyntax
</span><a href="#local-6989586621679191292"><span class="hs-identifier hs-var">syntax</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT () a m () -&gt; m b
</span><a href="#local-6989586621679191291"><span class="hs-identifier hs-var">withSrc</span></a></span><span>
</span><span id="line-78"></span><span class="hs-pragma">{-# DEPRECATED</span><span> </span><span class="hs-pragma">runSelect</span><span> </span><span class="hs-pragma">&quot;Use streamingRunSelect&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span class="hs-comment">-- * @INSERT@</span><span>
</span><span id="line-82"></span><span>
</span><span id="line-83"></span><span class="hs-comment">-- | Run a PostgreSQL @INSERT@ statement in any 'MonadIO'. Returns the number of</span><span>
</span><span id="line-84"></span><span class="hs-comment">-- rows affected.</span><span>
</span><span id="line-85"></span><span id="local-6989586621679191289"><span id="local-6989586621679191290"><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#runInsert"><span class="hs-identifier hs-type">runInsert</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191290"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-86"></span><span>          </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier hs-type">Pg.Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">SqlInsert</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191289"><span class="hs-identifier hs-type">tbl</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679191290"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Int64</span></a></span></span></span><span>
</span><span id="line-87"></span><span id="runInsert"><span class="annot"><span class="annottext">runInsert :: Connection -&gt; SqlInsert Postgres tbl -&gt; m Int64
</span><a href="Database.Beam.Postgres.Conduit.html#runInsert"><span class="hs-identifier hs-var hs-var">runInsert</span></a></span></span><span> </span><span class="annot"><span class="annottext">Connection
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SqlInsert Postgres tbl
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">SqlInsertNoRows</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; m Int64
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Int64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-88"></span><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#runInsert"><span class="hs-identifier hs-var">runInsert</span></a></span><span> </span><span id="local-6989586621679191287"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191287"><span class="hs-identifier hs-var">conn</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">SqlInsert</span></a></span><span> </span><span class="annot"><span class="annottext">TableSettings tbl
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.Syntax.html#PgInsertSyntax"><span class="hs-identifier hs-type">PgInsertSyntax</span></a></span><span> </span><span id="local-6989586621679191284"><span class="annot"><a href="#local-6989586621679191284"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-89"></span><span>  </span><span class="annot"><span class="annottext">Connection -&gt; PgSyntax -&gt; m Int64
forall (m :: * -&gt; *).
MonadIO m =&gt;
Connection -&gt; PgSyntax -&gt; m Int64
</span><a href="Database.Beam.Postgres.Conduit.html#executeStatement"><span class="hs-identifier hs-var">executeStatement</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191287"><span class="hs-identifier hs-var">conn</span></a></span><span> </span><span class="annot"><span class="annottext">PgSyntax
</span><a href="#local-6989586621679191284"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span class="hs-comment">-- | Run a PostgreSQL @INSERT ... RETURNING ...@ statement in any 'C.MonadResource' and</span><span>
</span><span id="line-92"></span><span class="hs-comment">-- get a 'C.Source' of the newly inserted rows.</span><span>
</span><span id="line-93"></span><span id="local-6989586621679191282"><span id="local-6989586621679191283"><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#streamingRunInsertReturning"><span class="hs-identifier hs-type">streamingRunInsertReturning</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../resourcet/html/src"><span class="hs-identifier hs-type">C.MonadResource</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191283"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Fail.MonadFail</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191283"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">FromBackendRow</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191282"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-94"></span><span>                            </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier hs-type">Pg.Connection</span></a></span><span>
</span><span id="line-95"></span><span>                            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Full.html#PgInsertReturning"><span class="hs-identifier hs-type">PgInsertReturning</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191282"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-96"></span><span>                            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">CONDUIT_TRANSFORMER</span><span> </span></span></span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">a</span><span> </span><span class="hs-identifier">m</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span id="streamingRunInsertReturning"><span class="annot"><span class="annottext">streamingRunInsertReturning :: Connection -&gt; PgInsertReturning a -&gt; ConduitT () a m ()
</span><a href="Database.Beam.Postgres.Conduit.html#streamingRunInsertReturning"><span class="hs-identifier hs-var hs-var">streamingRunInsertReturning</span></a></span></span><span> </span><span class="annot"><span class="annottext">Connection
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PgInsertReturning a
</span><a href="Database.Beam.Postgres.Full.html#PgInsertReturningEmpty"><span class="hs-identifier hs-var">PgInsertReturningEmpty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; ConduitT () a m ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-98"></span><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#streamingRunInsertReturning"><span class="hs-identifier hs-var">streamingRunInsertReturning</span></a></span><span> </span><span id="local-6989586621679191280"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191280"><span class="hs-identifier hs-var">conn</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.Full.html#PgInsertReturning"><span class="hs-identifier hs-type">PgInsertReturning</span></a></span><span> </span><span id="local-6989586621679191278"><span class="annot"><span class="annottext">PgSyntax
</span><a href="#local-6989586621679191278"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-99"></span><span>    </span><span class="annot"><span class="annottext">Connection -&gt; PgSyntax -&gt; ConduitT () a m ()
forall (m :: * -&gt; *) r.
(MonadResource m, MonadFail m, FromBackendRow Postgres r) =&gt;
Connection -&gt; PgSyntax -&gt; ConduitT () r m ()
</span><a href="Database.Beam.Postgres.Conduit.html#streamingRunQueryReturning"><span class="hs-identifier hs-var">streamingRunQueryReturning</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191280"><span class="hs-identifier hs-var">conn</span></a></span><span> </span><span class="annot"><span class="annottext">PgSyntax
</span><a href="#local-6989586621679191278"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-100"></span><span>
</span><span id="line-101"></span><span class="hs-comment">-- | Run a PostgreSQL @INSERT ... RETURNING ...@ statement in any 'MonadIO' and</span><span>
</span><span id="line-102"></span><span class="hs-comment">-- get a 'C.Source' of the newly inserted rows.</span><span>
</span><span id="line-103"></span><span id="local-6989586621679191275"><span id="local-6989586621679191276"><span id="local-6989586621679191277"><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#runInsertReturning"><span class="hs-identifier hs-type">runInsertReturning</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191277"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Fail.MonadFail</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191277"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../monad-control/html/src"><span class="hs-identifier hs-type">MonadBaseControl</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191277"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">FromBackendRow</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191276"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-104"></span><span>                   </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier hs-type">Pg.Connection</span></a></span><span>
</span><span id="line-105"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Full.html#PgInsertReturning"><span class="hs-identifier hs-type">PgInsertReturning</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191276"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-106"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">CONDUIT_TRANSFORMER</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">a</span><span> </span><span class="hs-identifier">m</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">m</span><span> </span><span class="hs-identifier">b</span><span class="hs-special">)</span><span>
</span><span id="line-107"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679191277"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191275"><span class="hs-identifier hs-type">b</span></a></span></span></span></span><span>
</span><span id="line-108"></span><span id="runInsertReturning"><span class="annot"><span class="annottext">runInsertReturning :: Connection
-&gt; PgInsertReturning a -&gt; (ConduitT () a m () -&gt; m b) -&gt; m b
</span><a href="Database.Beam.Postgres.Conduit.html#runInsertReturning"><span class="hs-identifier hs-var hs-var">runInsertReturning</span></a></span></span><span> </span><span class="annot"><span class="annottext">Connection
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PgInsertReturning a
</span><a href="Database.Beam.Postgres.Full.html#PgInsertReturningEmpty"><span class="hs-identifier hs-var">PgInsertReturningEmpty</span></a></span><span> </span><span id="local-6989586621679191274"><span class="annot"><span class="annottext">ConduitT () a m () -&gt; m b
</span><a href="#local-6989586621679191274"><span class="hs-identifier hs-var">withSrc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConduitT () a m () -&gt; m b
</span><a href="#local-6989586621679191274"><span class="hs-identifier hs-var">withSrc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; ConduitT () a m ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-109"></span><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#runInsertReturning"><span class="hs-identifier hs-var">runInsertReturning</span></a></span><span> </span><span id="local-6989586621679191273"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191273"><span class="hs-identifier hs-var">conn</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.Full.html#PgInsertReturning"><span class="hs-identifier hs-type">PgInsertReturning</span></a></span><span> </span><span id="local-6989586621679191272"><span class="annot"><span class="annottext">PgSyntax
</span><a href="#local-6989586621679191272"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679191271"><span class="annot"><span class="annottext">ConduitT () a m () -&gt; m b
</span><a href="#local-6989586621679191271"><span class="hs-identifier hs-var">withSrc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-110"></span><span>    </span><span class="annot"><span class="annottext">Connection -&gt; PgSyntax -&gt; (ConduitT () a m () -&gt; m b) -&gt; m b
forall (m :: * -&gt; *) r b.
(MonadIO m, MonadFail m, MonadBaseControl IO m, Functor m,
 FromBackendRow Postgres r) =&gt;
Connection -&gt; PgSyntax -&gt; (ConduitT () r m () -&gt; m b) -&gt; m b
</span><a href="Database.Beam.Postgres.Conduit.html#runQueryReturning"><span class="hs-identifier hs-var">runQueryReturning</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191273"><span class="hs-identifier hs-var">conn</span></a></span><span> </span><span class="annot"><span class="annottext">PgSyntax
</span><a href="#local-6989586621679191272"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT () a m () -&gt; m b
</span><a href="#local-6989586621679191271"><span class="hs-identifier hs-var">withSrc</span></a></span><span>
</span><span id="line-111"></span><span class="hs-pragma">{-# DEPRECATED</span><span> </span><span class="hs-pragma">runInsertReturning</span><span> </span><span class="hs-pragma">&quot;Use streamingRunInsertReturning&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span class="hs-comment">-- * @UPDATE@</span><span>
</span><span id="line-114"></span><span>
</span><span id="line-115"></span><span class="hs-comment">-- | Run a PostgreSQL @UPDATE@ statement in any 'MonadIO'. Returns the number of</span><span>
</span><span id="line-116"></span><span class="hs-comment">-- rows affected.</span><span>
</span><span id="line-117"></span><span id="local-6989586621679191269"><span id="local-6989586621679191270"><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#runUpdate"><span class="hs-identifier hs-type">runUpdate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191270"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-118"></span><span>          </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier hs-type">Pg.Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">SqlUpdate</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191269"><span class="hs-identifier hs-type">tbl</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679191270"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Int64</span></a></span></span></span><span>
</span><span id="line-119"></span><span id="runUpdate"><span class="annot"><span class="annottext">runUpdate :: Connection -&gt; SqlUpdate Postgres tbl -&gt; m Int64
</span><a href="Database.Beam.Postgres.Conduit.html#runUpdate"><span class="hs-identifier hs-var hs-var">runUpdate</span></a></span></span><span> </span><span class="annot"><span class="annottext">Connection
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SqlUpdate Postgres tbl
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">SqlIdentityUpdate</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; m Int64
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Int64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-120"></span><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#runUpdate"><span class="hs-identifier hs-var">runUpdate</span></a></span><span> </span><span id="local-6989586621679191267"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191267"><span class="hs-identifier hs-var">conn</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">SqlUpdate</span></a></span><span> </span><span class="annot"><span class="annottext">TableSettings tbl
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.Syntax.html#PgUpdateSyntax"><span class="hs-identifier hs-type">PgUpdateSyntax</span></a></span><span> </span><span id="local-6989586621679191264"><span class="annot"><a href="#local-6989586621679191264"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-121"></span><span>    </span><span class="annot"><span class="annottext">Connection -&gt; PgSyntax -&gt; m Int64
forall (m :: * -&gt; *).
MonadIO m =&gt;
Connection -&gt; PgSyntax -&gt; m Int64
</span><a href="Database.Beam.Postgres.Conduit.html#executeStatement"><span class="hs-identifier hs-var">executeStatement</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191267"><span class="hs-identifier hs-var">conn</span></a></span><span> </span><span class="annot"><span class="annottext">PgSyntax
</span><a href="#local-6989586621679191264"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-122"></span><span>
</span><span id="line-123"></span><span class="hs-comment">-- | Run a PostgreSQL @UPDATE ... RETURNING ...@ statement in any 'C.MonadResource' and</span><span>
</span><span id="line-124"></span><span class="hs-comment">-- get a 'C.Source' of the newly updated rows.</span><span>
</span><span id="line-125"></span><span id="local-6989586621679191262"><span id="local-6989586621679191263"><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#streamingRunUpdateReturning"><span class="hs-identifier hs-type">streamingRunUpdateReturning</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../resourcet/html/src"><span class="hs-identifier hs-type">C.MonadResource</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191263"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Fail.MonadFail</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191263"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">FromBackendRow</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191262"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-126"></span><span>                            </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier hs-type">Pg.Connection</span></a></span><span>
</span><span id="line-127"></span><span>                            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Full.html#PgUpdateReturning"><span class="hs-identifier hs-type">PgUpdateReturning</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191262"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-128"></span><span>                            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">CONDUIT_TRANSFORMER</span><span> </span></span></span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">a</span><span> </span><span class="hs-identifier">m</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-129"></span><span id="streamingRunUpdateReturning"><span class="annot"><span class="annottext">streamingRunUpdateReturning :: Connection -&gt; PgUpdateReturning a -&gt; ConduitT () a m ()
</span><a href="Database.Beam.Postgres.Conduit.html#streamingRunUpdateReturning"><span class="hs-identifier hs-var hs-var">streamingRunUpdateReturning</span></a></span></span><span> </span><span class="annot"><span class="annottext">Connection
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PgUpdateReturning a
</span><a href="Database.Beam.Postgres.Full.html#PgUpdateReturningEmpty"><span class="hs-identifier hs-var">PgUpdateReturningEmpty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; ConduitT () a m ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#streamingRunUpdateReturning"><span class="hs-identifier hs-var">streamingRunUpdateReturning</span></a></span><span> </span><span id="local-6989586621679191260"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191260"><span class="hs-identifier hs-var">conn</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.Full.html#PgUpdateReturning"><span class="hs-identifier hs-type">PgUpdateReturning</span></a></span><span> </span><span id="local-6989586621679191258"><span class="annot"><span class="annottext">PgSyntax
</span><a href="#local-6989586621679191258"><span class="hs-identifier hs-var">u</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-131"></span><span>  </span><span class="annot"><span class="annottext">Connection -&gt; PgSyntax -&gt; ConduitT () a m ()
forall (m :: * -&gt; *) r.
(MonadResource m, MonadFail m, FromBackendRow Postgres r) =&gt;
Connection -&gt; PgSyntax -&gt; ConduitT () r m ()
</span><a href="Database.Beam.Postgres.Conduit.html#streamingRunQueryReturning"><span class="hs-identifier hs-var">streamingRunQueryReturning</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191260"><span class="hs-identifier hs-var">conn</span></a></span><span> </span><span class="annot"><span class="annottext">PgSyntax
</span><a href="#local-6989586621679191258"><span class="hs-identifier hs-var">u</span></a></span><span>
</span><span id="line-132"></span><span>
</span><span id="line-133"></span><span class="hs-comment">-- | Run a PostgreSQL @UPDATE ... RETURNING ...@ statement in any 'MonadIO' and</span><span>
</span><span id="line-134"></span><span class="hs-comment">-- get a 'C.Source' of the newly updated rows.</span><span>
</span><span id="line-135"></span><span id="local-6989586621679191255"><span id="local-6989586621679191256"><span id="local-6989586621679191257"><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#runUpdateReturning"><span class="hs-identifier hs-type">runUpdateReturning</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191257"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Fail.MonadFail</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191257"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../monad-control/html/src"><span class="hs-identifier hs-type">MonadBaseControl</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191257"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">FromBackendRow</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191256"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-136"></span><span>                   </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier hs-type">Pg.Connection</span></a></span><span>
</span><span id="line-137"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Full.html#PgUpdateReturning"><span class="hs-identifier hs-type">PgUpdateReturning</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191256"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-138"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">CONDUIT_TRANSFORMER</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">a</span><span> </span><span class="hs-identifier">m</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">m</span><span> </span><span class="hs-identifier">b</span><span class="hs-special">)</span><span>
</span><span id="line-139"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679191257"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191255"><span class="hs-identifier hs-type">b</span></a></span></span></span></span><span>
</span><span id="line-140"></span><span id="runUpdateReturning"><span class="annot"><span class="annottext">runUpdateReturning :: Connection
-&gt; PgUpdateReturning a -&gt; (ConduitT () a m () -&gt; m b) -&gt; m b
</span><a href="Database.Beam.Postgres.Conduit.html#runUpdateReturning"><span class="hs-identifier hs-var hs-var">runUpdateReturning</span></a></span></span><span> </span><span class="annot"><span class="annottext">Connection
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PgUpdateReturning a
</span><a href="Database.Beam.Postgres.Full.html#PgUpdateReturningEmpty"><span class="hs-identifier hs-var">PgUpdateReturningEmpty</span></a></span><span> </span><span id="local-6989586621679191254"><span class="annot"><span class="annottext">ConduitT () a m () -&gt; m b
</span><a href="#local-6989586621679191254"><span class="hs-identifier hs-var">withSrc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConduitT () a m () -&gt; m b
</span><a href="#local-6989586621679191254"><span class="hs-identifier hs-var">withSrc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; ConduitT () a m ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-141"></span><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#runUpdateReturning"><span class="hs-identifier hs-var">runUpdateReturning</span></a></span><span> </span><span id="local-6989586621679191253"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191253"><span class="hs-identifier hs-var">conn</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.Full.html#PgUpdateReturning"><span class="hs-identifier hs-type">PgUpdateReturning</span></a></span><span> </span><span id="local-6989586621679191252"><span class="annot"><span class="annottext">PgSyntax
</span><a href="#local-6989586621679191252"><span class="hs-identifier hs-var">u</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679191251"><span class="annot"><span class="annottext">ConduitT () a m () -&gt; m b
</span><a href="#local-6989586621679191251"><span class="hs-identifier hs-var">withSrc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-142"></span><span>  </span><span class="annot"><span class="annottext">Connection -&gt; PgSyntax -&gt; (ConduitT () a m () -&gt; m b) -&gt; m b
forall (m :: * -&gt; *) r b.
(MonadIO m, MonadFail m, MonadBaseControl IO m, Functor m,
 FromBackendRow Postgres r) =&gt;
Connection -&gt; PgSyntax -&gt; (ConduitT () r m () -&gt; m b) -&gt; m b
</span><a href="Database.Beam.Postgres.Conduit.html#runQueryReturning"><span class="hs-identifier hs-var">runQueryReturning</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191253"><span class="hs-identifier hs-var">conn</span></a></span><span> </span><span class="annot"><span class="annottext">PgSyntax
</span><a href="#local-6989586621679191252"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT () a m () -&gt; m b
</span><a href="#local-6989586621679191251"><span class="hs-identifier hs-var">withSrc</span></a></span><span>
</span><span id="line-143"></span><span class="hs-pragma">{-# DEPRECATED</span><span> </span><span class="hs-pragma">runUpdateReturning</span><span> </span><span class="hs-pragma">&quot;Use streamingRunUpdateReturning&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-144"></span><span>
</span><span id="line-145"></span><span class="hs-comment">-- * @DELETE@</span><span>
</span><span id="line-146"></span><span>
</span><span id="line-147"></span><span class="hs-comment">-- | Run a PostgreSQL @DELETE@ statement in any 'MonadIO'. Returns the number of</span><span>
</span><span id="line-148"></span><span class="hs-comment">-- rows affected.</span><span>
</span><span id="line-149"></span><span id="local-6989586621679191249"><span id="local-6989586621679191250"><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#runDelete"><span class="hs-identifier hs-type">runDelete</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191250"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-150"></span><span>          </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier hs-type">Pg.Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">SqlDelete</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191249"><span class="hs-identifier hs-type">tbl</span></a></span><span>
</span><span id="line-151"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679191250"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Int64</span></a></span></span></span><span>
</span><span id="line-152"></span><span id="runDelete"><span class="annot"><span class="annottext">runDelete :: Connection -&gt; SqlDelete Postgres tbl -&gt; m Int64
</span><a href="Database.Beam.Postgres.Conduit.html#runDelete"><span class="hs-identifier hs-var hs-var">runDelete</span></a></span></span><span> </span><span id="local-6989586621679191248"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191248"><span class="hs-identifier hs-var">conn</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">SqlDelete</span></a></span><span> </span><span class="annot"><span class="annottext">TableSettings tbl
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.Syntax.html#PgDeleteSyntax"><span class="hs-identifier hs-type">PgDeleteSyntax</span></a></span><span> </span><span id="local-6989586621679191245"><span class="annot"><a href="#local-6989586621679191245"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-153"></span><span>    </span><span class="annot"><span class="annottext">Connection -&gt; PgSyntax -&gt; m Int64
forall (m :: * -&gt; *).
MonadIO m =&gt;
Connection -&gt; PgSyntax -&gt; m Int64
</span><a href="Database.Beam.Postgres.Conduit.html#executeStatement"><span class="hs-identifier hs-var">executeStatement</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191248"><span class="hs-identifier hs-var">conn</span></a></span><span> </span><span class="annot"><span class="annottext">PgSyntax
</span><a href="#local-6989586621679191245"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span class="hs-comment">-- | Run a PostgreSQl @DELETE ... RETURNING ...@ statement in any</span><span>
</span><span id="line-156"></span><span class="hs-comment">-- 'C.MonadResource' and get a 'C.Source' of the deleted rows.</span><span>
</span><span id="line-157"></span><span id="local-6989586621679191243"><span id="local-6989586621679191244"><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#streamingRunDeleteReturning"><span class="hs-identifier hs-type">streamingRunDeleteReturning</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../resourcet/html/src"><span class="hs-identifier hs-type">C.MonadResource</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191244"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Fail.MonadFail</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191244"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">FromBackendRow</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191243"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-158"></span><span>                            </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier hs-type">Pg.Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Full.html#PgDeleteReturning"><span class="hs-identifier hs-type">PgDeleteReturning</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191243"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-159"></span><span>                            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">CONDUIT_TRANSFORMER</span><span> </span></span></span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">a</span><span> </span><span class="hs-identifier">m</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-160"></span><span id="streamingRunDeleteReturning"><span class="annot"><span class="annottext">streamingRunDeleteReturning :: Connection -&gt; PgDeleteReturning a -&gt; ConduitT () a m ()
</span><a href="Database.Beam.Postgres.Conduit.html#streamingRunDeleteReturning"><span class="hs-identifier hs-var hs-var">streamingRunDeleteReturning</span></a></span></span><span> </span><span id="local-6989586621679191242"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191242"><span class="hs-identifier hs-var">conn</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.Full.html#PgDeleteReturning"><span class="hs-identifier hs-type">PgDeleteReturning</span></a></span><span> </span><span id="local-6989586621679191240"><span class="annot"><span class="annottext">PgSyntax
</span><a href="#local-6989586621679191240"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-161"></span><span>  </span><span class="annot"><span class="annottext">Connection -&gt; PgSyntax -&gt; ConduitT () a m ()
forall (m :: * -&gt; *) r.
(MonadResource m, MonadFail m, FromBackendRow Postgres r) =&gt;
Connection -&gt; PgSyntax -&gt; ConduitT () r m ()
</span><a href="Database.Beam.Postgres.Conduit.html#streamingRunQueryReturning"><span class="hs-identifier hs-var">streamingRunQueryReturning</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191242"><span class="hs-identifier hs-var">conn</span></a></span><span> </span><span class="annot"><span class="annottext">PgSyntax
</span><a href="#local-6989586621679191240"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-162"></span><span>
</span><span id="line-163"></span><span class="hs-comment">-- | Run a PostgreSQl @DELETE ... RETURNING ...@ statement in any</span><span>
</span><span id="line-164"></span><span class="hs-comment">-- 'MonadIO' and get a 'C.Source' of the deleted rows.</span><span>
</span><span id="line-165"></span><span id="local-6989586621679191237"><span id="local-6989586621679191238"><span id="local-6989586621679191239"><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#runDeleteReturning"><span class="hs-identifier hs-type">runDeleteReturning</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191239"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Fail.MonadFail</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191239"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../monad-control/html/src"><span class="hs-identifier hs-type">MonadBaseControl</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191239"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">FromBackendRow</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191238"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-166"></span><span>                   </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier hs-type">Pg.Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Full.html#PgDeleteReturning"><span class="hs-identifier hs-type">PgDeleteReturning</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191238"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-167"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">CONDUIT_TRANSFORMER</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">a</span><span> </span><span class="hs-identifier">m</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">m</span><span> </span></span></span></span><span class="hs-identifier">b</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">m</span><span> </span><span class="hs-identifier">b</span><span>
</span><span id="line-168"></span><span id="runDeleteReturning"><span class="annot"><span class="annottext">runDeleteReturning :: Connection
-&gt; PgDeleteReturning a -&gt; (ConduitT () a m () -&gt; m b) -&gt; m b
</span><a href="Database.Beam.Postgres.Conduit.html#runDeleteReturning"><span class="hs-identifier hs-var hs-var">runDeleteReturning</span></a></span></span><span> </span><span id="local-6989586621679191236"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191236"><span class="hs-identifier hs-var">conn</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Beam.Postgres.Full.html#PgDeleteReturning"><span class="hs-identifier hs-type">PgDeleteReturning</span></a></span><span> </span><span id="local-6989586621679191235"><span class="annot"><span class="annottext">PgSyntax
</span><a href="#local-6989586621679191235"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679191234"><span class="annot"><span class="annottext">ConduitT () a m () -&gt; m b
</span><a href="#local-6989586621679191234"><span class="hs-identifier hs-var">withSrc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-169"></span><span>  </span><span class="annot"><span class="annottext">Connection -&gt; PgSyntax -&gt; (ConduitT () a m () -&gt; m b) -&gt; m b
forall (m :: * -&gt; *) r b.
(MonadIO m, MonadFail m, MonadBaseControl IO m, Functor m,
 FromBackendRow Postgres r) =&gt;
Connection -&gt; PgSyntax -&gt; (ConduitT () r m () -&gt; m b) -&gt; m b
</span><a href="Database.Beam.Postgres.Conduit.html#runQueryReturning"><span class="hs-identifier hs-var">runQueryReturning</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191236"><span class="hs-identifier hs-var">conn</span></a></span><span> </span><span class="annot"><span class="annottext">PgSyntax
</span><a href="#local-6989586621679191235"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT () a m () -&gt; m b
</span><a href="#local-6989586621679191234"><span class="hs-identifier hs-var">withSrc</span></a></span><span>
</span><span id="line-170"></span><span class="hs-pragma">{-# DEPRECATED</span><span> </span><span class="hs-pragma">runDeleteReturning</span><span> </span><span class="hs-pragma">&quot;Use streamingRunDeleteReturning&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-171"></span><span>
</span><span id="line-172"></span><span class="hs-comment">-- * Convenience functions</span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span class="hs-comment">-- | Run any DML statement. Return the number of rows affected</span><span>
</span><span id="line-175"></span><span id="local-6989586621679191436"><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#executeStatement"><span class="hs-identifier hs-type">executeStatement</span></a></span><span> </span><span class="hs-glyph">::</span><span>  </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191436"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier hs-type">Pg.Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Syntax.html#PgSyntax"><span class="hs-identifier hs-type">PgSyntax</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679191436"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Int64</span></a></span></span><span>
</span><span id="line-176"></span><span id="executeStatement"><span class="annot"><span class="annottext">executeStatement :: Connection -&gt; PgSyntax -&gt; m Int64
</span><a href="Database.Beam.Postgres.Conduit.html#executeStatement"><span class="hs-identifier hs-var hs-var">executeStatement</span></a></span></span><span> </span><span id="local-6989586621679191233"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191233"><span class="hs-identifier hs-var">conn</span></a></span></span><span> </span><span id="local-6989586621679191232"><span class="annot"><span class="annottext">PgSyntax
</span><a href="#local-6989586621679191232"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-177"></span><span>  </span><span class="annot"><span class="annottext">IO Int64 -&gt; m Int64
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO Int64 -&gt; m Int64) -&gt; IO Int64 -&gt; m Int64
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-178"></span><span>    </span><span id="local-6989586621679191230"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679191230"><span class="hs-identifier hs-var">syntax</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; PgSyntax -&gt; IO ByteString
</span><a href="Database.Beam.Postgres.Connection.html#pgRenderSyntax"><span class="hs-identifier hs-var">pgRenderSyntax</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191233"><span class="hs-identifier hs-var">conn</span></a></span><span> </span><span class="annot"><span class="annottext">PgSyntax
</span><a href="#local-6989586621679191232"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-179"></span><span>    </span><span class="annot"><span class="annottext">Connection -&gt; Query -&gt; IO Int64
</span><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier hs-var">Pg.execute_</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191233"><span class="hs-identifier hs-var">conn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; Query
</span><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier hs-var">Pg.Query</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679191230"><span class="hs-identifier hs-var">syntax</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-180"></span><span>
</span><span id="line-181"></span><span>
</span><span id="line-182"></span><span class="hs-comment">-- | Runs any query that returns a set of values</span><span>
</span><span id="line-183"></span><span id="local-6989586621679191453"><span id="local-6989586621679191455"><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#streamingRunQueryReturning"><span class="hs-identifier hs-type">streamingRunQueryReturning</span></a></span><span>
</span><span id="line-184"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../resourcet/html/src"><span class="hs-identifier hs-type">C.MonadResource</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191455"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Fail.MonadFail</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191455"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">FromBackendRow</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191453"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-185"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier hs-type">Pg.Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Syntax.html#PgSyntax"><span class="hs-identifier hs-type">PgSyntax</span></a></span><span>
</span><span id="line-186"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">CONDUIT_TRANSFORMER</span><span> </span></span></span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">r</span><span> </span><span class="hs-identifier">m</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span id="streamingRunQueryReturning"><span class="annot"><span class="annottext">streamingRunQueryReturning :: Connection -&gt; PgSyntax -&gt; ConduitT () r m ()
</span><a href="Database.Beam.Postgres.Conduit.html#streamingRunQueryReturning"><span class="hs-identifier hs-var hs-var">streamingRunQueryReturning</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679191226"><span class="annot"><span class="annottext">conn :: Connection
</span><a href="#local-6989586621679191226"><span class="hs-identifier hs-var">conn</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier hs-type">Pg.Connection</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679191224"><span class="annot"><span class="annottext">MVar Connection
connectionHandle :: MVar Connection
connectionHandle :: Connection -&gt; MVar Connection
</span><a href="#local-6989586621679191224"><span class="hs-identifier hs-var hs-var">connectionHandle</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621679191223"><span class="annot"><span class="annottext">PgSyntax
</span><a href="#local-6989586621679191223"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-188"></span><span>  </span><span id="local-6989586621679191222"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679191222"><span class="hs-identifier hs-var">syntax</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO ByteString -&gt; ConduitT () r m ByteString
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO ByteString -&gt; ConduitT () r m ByteString)
-&gt; IO ByteString -&gt; ConduitT () r m ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Connection -&gt; PgSyntax -&gt; IO ByteString
</span><a href="Database.Beam.Postgres.Connection.html#pgRenderSyntax"><span class="hs-identifier hs-var">pgRenderSyntax</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191226"><span class="hs-identifier hs-var">conn</span></a></span><span> </span><span class="annot"><span class="annottext">PgSyntax
</span><a href="#local-6989586621679191223"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-189"></span><span>  </span><span class="hs-comment">-- We need to own the connection for the duration of the conduit's</span><span>
</span><span id="line-190"></span><span>  </span><span class="hs-comment">-- lifetime, since it will be in a streaming state until we clean up</span><span>
</span><span id="line-191"></span><span>  </span><span class="annot"><span class="annottext">IO Connection
-&gt; (Connection -&gt; IO ())
-&gt; (Connection -&gt; ConduitT () r m ())
-&gt; ConduitT () r m ()
forall (m :: * -&gt; *) a i o r.
MonadResource m =&gt;
IO a -&gt; (a -&gt; IO ()) -&gt; (a -&gt; ConduitT i o m r) -&gt; ConduitT i o m r
</span><a href="../../../../conduit/html/src"><span class="hs-identifier hs-var">C.bracketP</span></a></span><span>
</span><span id="line-192"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MVar Connection -&gt; IO Connection
forall a. MVar a -&gt; IO a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">takeMVar</span></a></span><span> </span><span class="annot"><span class="annottext">MVar Connection
</span><a href="#local-6989586621679191224"><span class="hs-identifier hs-var">connectionHandle</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-193"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MVar Connection -&gt; Connection -&gt; IO ()
forall a. MVar a -&gt; a -&gt; IO ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">putMVar</span></a></span><span> </span><span class="annot"><span class="annottext">MVar Connection
</span><a href="#local-6989586621679191224"><span class="hs-identifier hs-var">connectionHandle</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-194"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679191220"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191220"><span class="hs-identifier hs-var">conn'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-195"></span><span>      </span><span id="local-6989586621679191219"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679191219"><span class="hs-identifier hs-var">success</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO Bool -&gt; ConduitT () r m Bool
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO Bool -&gt; ConduitT () r m Bool)
-&gt; IO Bool -&gt; ConduitT () r m Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-196"></span><span>        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; Bool
</span><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier hs-var">Pg.isNullConnection</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191220"><span class="hs-identifier hs-var">conn'</span></a></span><span>
</span><span id="line-197"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">SqlError -&gt; IO Bool
forall e a. Exception e =&gt; e -&gt; IO a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">throwIO</span></a></span><span> </span><span class="annot"><span class="annottext">SqlError
</span><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier hs-var">Pg.disconnectedError</span></a></span><span>
</span><span id="line-198"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; ByteString -&gt; IO Bool
</span><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier hs-var">Pg.sendQuery</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191220"><span class="hs-identifier hs-var">conn'</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679191222"><span class="hs-identifier hs-var">syntax</span></a></span><span>
</span><span id="line-199"></span><span>
</span><span id="line-200"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679191219"><span class="hs-identifier hs-var">success</span></a></span><span>
</span><span id="line-201"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-202"></span><span>          </span><span id="local-6989586621679191215"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679191215"><span class="hs-identifier hs-var">singleRowModeSet</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO Bool -&gt; ConduitT () r m Bool
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO Bool -&gt; ConduitT () r m Bool)
-&gt; IO Bool -&gt; ConduitT () r m Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Connection -&gt; IO Bool
</span><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier hs-var">Pg.setSingleRowMode</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191220"><span class="hs-identifier hs-var">conn'</span></a></span><span>
</span><span id="line-203"></span><span>          </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679191215"><span class="hs-identifier hs-var">singleRowModeSet</span></a></span><span>
</span><span id="line-204"></span><span>            </span><span class="hs-keyword">then</span><span>
</span><span id="line-205"></span><span>              </span><span class="annot"><span class="annottext">IO ()
-&gt; (() -&gt; IO ())
-&gt; (() -&gt; ConduitT () r m ())
-&gt; ConduitT () r m ()
forall (m :: * -&gt; *) a i o r.
MonadResource m =&gt;
IO a -&gt; (a -&gt; IO ()) -&gt; (a -&gt; ConduitT i o m r) -&gt; ConduitT i o m r
</span><a href="../../../../conduit/html/src"><span class="hs-identifier hs-var">C.bracketP</span></a></span><span>
</span><span id="line-206"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-207"></span><span>                </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; IO ()
</span><a href="Database.Beam.Postgres.Conduit.html#gracefulShutdown"><span class="hs-identifier hs-var">gracefulShutdown</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191220"><span class="hs-identifier hs-var">conn'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-208"></span><span>                </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; Connection -&gt; Maybe [Field] -&gt; ConduitT () r m ()
forall (m :: * -&gt; *) r i.
(MonadFail m, FromBackendRow Postgres r, MonadIO m) =&gt;
Connection -&gt; Connection -&gt; Maybe [Field] -&gt; ConduitT i r m ()
</span><a href="Database.Beam.Postgres.Conduit.html#streamResults"><span class="hs-identifier hs-var">streamResults</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191226"><span class="hs-identifier hs-var">conn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191220"><span class="hs-identifier hs-var">conn'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [Field]
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-209"></span><span>            </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">String -&gt; ConduitT () r m ()
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Fail.fail</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Could not enable single row mode&quot;</span></span><span>
</span><span id="line-210"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-211"></span><span>          </span><span id="local-6989586621679191211"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679191211"><span class="hs-identifier hs-var">errMsg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Maybe ByteString -&gt; ByteString
forall a. a -&gt; Maybe a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;No libpq error provided&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Maybe ByteString -&gt; ByteString)
-&gt; ConduitT () r m (Maybe ByteString) -&gt; ConduitT () r m ByteString
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IO (Maybe ByteString) -&gt; ConduitT () r m (Maybe ByteString)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Connection -&gt; IO (Maybe ByteString)
</span><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier hs-var">Pg.errorMessage</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191220"><span class="hs-identifier hs-var">conn'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-212"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; ConduitT () r m ()
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Fail.fail</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679191211"><span class="hs-identifier hs-var">errMsg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span id="local-6989586621679191383"><span id="local-6989586621679191384"><span id="local-6989586621679191385"><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#streamResults"><span class="hs-identifier hs-type">streamResults</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Fail.MonadFail</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191385"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">FromBackendRow</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191384"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191385"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier hs-type">Pg.Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier hs-type">Pq.Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier hs-type">Pg.Field</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../conduit/html/src"><span class="hs-identifier hs-type">C.ConduitT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191383"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191384"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191385"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-215"></span><span id="streamResults"><span class="annot"><span class="annottext">streamResults :: Connection -&gt; Connection -&gt; Maybe [Field] -&gt; ConduitT i r m ()
</span><a href="Database.Beam.Postgres.Conduit.html#streamResults"><span class="hs-identifier hs-var hs-var">streamResults</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679191207"><span class="annot"><span class="annottext">conn :: Connection
</span><a href="#local-6989586621679191207"><span class="hs-identifier hs-var">conn</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier hs-type">Pg.Connection</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679191206"><span class="annot"><span class="annottext">MVar Connection
connectionHandle :: MVar Connection
connectionHandle :: Connection -&gt; MVar Connection
</span><a href="#local-6989586621679191206"><span class="hs-identifier hs-var hs-var">connectionHandle</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621679191205"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191205"><span class="hs-identifier hs-var">conn'</span></a></span></span><span> </span><span id="local-6989586621679191204"><span class="annot"><span class="annottext">Maybe [Field]
</span><a href="#local-6989586621679191204"><span class="hs-identifier hs-var">fields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-216"></span><span>  </span><span id="local-6989586621679191203"><span class="annot"><span class="annottext">Maybe Result
</span><a href="#local-6989586621679191203"><span class="hs-identifier hs-var">nextRow</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (Maybe Result) -&gt; ConduitT i r m (Maybe Result)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Connection -&gt; IO (Maybe Result)
</span><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier hs-var">Pg.getResult</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191205"><span class="hs-identifier hs-var">conn'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-217"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Result
</span><a href="#local-6989586621679191203"><span class="hs-identifier hs-var">nextRow</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-218"></span><span>    </span><span class="annot"><span class="annottext">Maybe Result
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; ConduitT i r m ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-219"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679191201"><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679191201"><span class="hs-identifier hs-var">row</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-220"></span><span>      </span><span class="annot"><span class="annottext">IO ExecStatus -&gt; ConduitT i r m ExecStatus
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Result -&gt; IO ExecStatus
</span><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier hs-var">Pg.resultStatus</span></a></span><span> </span><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679191201"><span class="hs-identifier hs-var">row</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ConduitT i r m ExecStatus
-&gt; (ExecStatus -&gt; ConduitT i r m ()) -&gt; ConduitT i r m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span>
</span><span id="line-221"></span><span>      </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-222"></span><span>        </span><span class="annot"><span class="annottext">ExecStatus
</span><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier hs-var">Pg.SingleTuple</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-223"></span><span>          </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679191198"><span class="annot"><span class="annottext">[Field]
</span><a href="#local-6989586621679191198"><span class="hs-identifier hs-var">fields'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO [Field] -&gt; ConduitT i r m [Field]
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IO [Field]
-&gt; ([Field] -&gt; IO [Field]) -&gt; Maybe [Field] -&gt; IO [Field]
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Result -&gt; IO [Field]
</span><a href="Database.Beam.Postgres.Connection.html#getFields"><span class="hs-identifier hs-var">getFields</span></a></span><span> </span><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679191201"><span class="hs-identifier hs-var">row</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Field] -&gt; IO [Field]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [Field]
</span><a href="#local-6989586621679191204"><span class="hs-identifier hs-var">fields</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-224"></span><span>             </span><span id="local-6989586621679191195"><span class="annot"><span class="annottext">Either BeamRowReadError r
</span><a href="#local-6989586621679191195"><span class="hs-identifier hs-var">parsedRow</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (Either BeamRowReadError r)
-&gt; ConduitT i r m (Either BeamRowReadError r)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Either BeamRowReadError r)
 -&gt; ConduitT i r m (Either BeamRowReadError r))
-&gt; IO (Either BeamRowReadError r)
-&gt; ConduitT i r m (Either BeamRowReadError r)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">IO ()
-&gt; (() -&gt; IO Connection)
-&gt; (() -&gt; IO (Either BeamRowReadError r))
-&gt; IO (Either BeamRowReadError r)
forall a b c. IO a -&gt; (a -&gt; IO b) -&gt; (a -&gt; IO c) -&gt; IO c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">bracket</span></a></span><span>
</span><span id="line-225"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MVar Connection -&gt; Connection -&gt; IO ()
forall a. MVar a -&gt; a -&gt; IO ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">putMVar</span></a></span><span> </span><span class="annot"><span class="annottext">MVar Connection
</span><a href="#local-6989586621679191206"><span class="hs-identifier hs-var">connectionHandle</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191205"><span class="hs-identifier hs-var">conn'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-226"></span><span>               </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MVar Connection -&gt; IO Connection
forall a. MVar a -&gt; IO a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">takeMVar</span></a></span><span> </span><span class="annot"><span class="annottext">MVar Connection
</span><a href="#local-6989586621679191206"><span class="hs-identifier hs-var">connectionHandle</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-227"></span><span>               </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Connection
-&gt; Row
-&gt; Result
-&gt; [Field]
-&gt; FromBackendRowM Postgres r
-&gt; IO (Either BeamRowReadError r)
forall a.
Connection
-&gt; Row
-&gt; Result
-&gt; [Field]
-&gt; FromBackendRowM Postgres a
-&gt; IO (Either BeamRowReadError a)
</span><a href="Database.Beam.Postgres.Connection.html#runPgRowReader"><span class="hs-identifier hs-var">runPgRowReader</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191207"><span class="hs-identifier hs-var">conn</span></a></span><span> </span><span class="annot"><span class="annottext">Row
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679191201"><span class="hs-identifier hs-var">row</span></a></span><span> </span><span class="annot"><span class="annottext">[Field]
</span><a href="#local-6989586621679191198"><span class="hs-identifier hs-var">fields'</span></a></span><span> </span><span class="annot"><span class="annottext">FromBackendRowM Postgres r
forall be a. FromBackendRow be a =&gt; FromBackendRowM be a
</span><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-var">fromBackendRow</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-228"></span><span>             </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either BeamRowReadError r
</span><a href="#local-6989586621679191195"><span class="hs-identifier hs-var">parsedRow</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-229"></span><span>               </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621679191192"><span class="annot"><span class="annottext">BeamRowReadError
</span><a href="#local-6989586621679191192"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; ConduitT i r m ()
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Connection -&gt; Result -&gt; String -&gt; IO ()
forall a. Connection -&gt; Result -&gt; String -&gt; IO a
</span><a href="Database.Beam.Postgres.Conduit.html#bailEarly"><span class="hs-identifier hs-var">bailEarly</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191205"><span class="hs-identifier hs-var">conn'</span></a></span><span> </span><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679191201"><span class="hs-identifier hs-var">row</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Could not read row: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">BeamRowReadError -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">BeamRowReadError
</span><a href="#local-6989586621679191192"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-230"></span><span>               </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621679191190"><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679191190"><span class="hs-identifier hs-var">parsedRow'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-231"></span><span>                 </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">r -&gt; ConduitT i r m ()
forall (m :: * -&gt; *) o i. Monad m =&gt; o -&gt; ConduitT i o m ()
</span><a href="../../../../conduit/html/src"><span class="hs-identifier hs-var">C.yield</span></a></span><span> </span><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679191190"><span class="hs-identifier hs-var">parsedRow'</span></a></span><span>
</span><span id="line-232"></span><span>                    </span><span class="annot"><span class="annottext">Connection -&gt; Connection -&gt; Maybe [Field] -&gt; ConduitT i r m ()
forall (m :: * -&gt; *) r i.
(MonadFail m, FromBackendRow Postgres r, MonadIO m) =&gt;
Connection -&gt; Connection -&gt; Maybe [Field] -&gt; ConduitT i r m ()
</span><a href="Database.Beam.Postgres.Conduit.html#streamResults"><span class="hs-identifier hs-var">streamResults</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191207"><span class="hs-identifier hs-var">conn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191205"><span class="hs-identifier hs-var">conn'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Field] -&gt; Maybe [Field]
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">[Field]
</span><a href="#local-6989586621679191198"><span class="hs-identifier hs-var">fields'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-233"></span><span>        </span><span class="annot"><span class="annottext">ExecStatus
</span><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier hs-var">Pg.TuplesOk</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; ConduitT i r m ()
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Connection -&gt; IO ()
</span><a href="Database.Beam.Postgres.Conduit.html#finishQuery"><span class="hs-identifier hs-var">finishQuery</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191205"><span class="hs-identifier hs-var">conn'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-234"></span><span>        </span><span class="annot"><span class="annottext">ExecStatus
</span><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier hs-var">Pg.EmptyQuery</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; ConduitT i r m ()
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Fail.fail</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;No query&quot;</span></span><span>
</span><span id="line-235"></span><span>        </span><span class="annot"><span class="annottext">ExecStatus
</span><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier hs-var">Pg.CommandOk</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; ConduitT i r m ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-236"></span><span>        </span><span id="local-6989586621679191184"><span class="annot"><span class="annottext">status :: ExecStatus
</span><a href="#local-6989586621679191184"><span class="hs-identifier hs-var">status</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><span class="annottext">ExecStatus
</span><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier hs-var">Pg.BadResponse</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; ConduitT i r m ()
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; Result -&gt; ExecStatus -&gt; IO ()
forall a. ByteString -&gt; Result -&gt; ExecStatus -&gt; IO a
</span><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier hs-var">Pg.throwResultError</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;streamResults&quot;</span></span><span> </span><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679191201"><span class="hs-identifier hs-var">row</span></a></span><span> </span><span class="annot"><span class="annottext">ExecStatus
</span><a href="#local-6989586621679191184"><span class="hs-identifier hs-var">status</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-237"></span><span>        </span><span id="local-6989586621679191181"><span class="annot"><span class="annottext">status :: ExecStatus
</span><a href="#local-6989586621679191181"><span class="hs-identifier hs-var">status</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><span class="annottext">ExecStatus
</span><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier hs-var">Pg.NonfatalError</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; ConduitT i r m ()
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; Result -&gt; ExecStatus -&gt; IO ()
forall a. ByteString -&gt; Result -&gt; ExecStatus -&gt; IO a
</span><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier hs-var">Pg.throwResultError</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;streamResults&quot;</span></span><span> </span><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679191201"><span class="hs-identifier hs-var">row</span></a></span><span> </span><span class="annot"><span class="annottext">ExecStatus
</span><a href="#local-6989586621679191181"><span class="hs-identifier hs-var">status</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-238"></span><span>        </span><span id="local-6989586621679191179"><span class="annot"><span class="annottext">status :: ExecStatus
</span><a href="#local-6989586621679191179"><span class="hs-identifier hs-var">status</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><span class="annottext">ExecStatus
</span><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier hs-var">Pg.FatalError</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; ConduitT i r m ()
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; Result -&gt; ExecStatus -&gt; IO ()
forall a. ByteString -&gt; Result -&gt; ExecStatus -&gt; IO a
</span><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier hs-var">Pg.throwResultError</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;streamResults&quot;</span></span><span> </span><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679191201"><span class="hs-identifier hs-var">row</span></a></span><span> </span><span class="annot"><span class="annottext">ExecStatus
</span><a href="#local-6989586621679191179"><span class="hs-identifier hs-var">status</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-239"></span><span>        </span><span class="annot"><span class="annottext">ExecStatus
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679191177"><span class="annot"><span class="annottext">Maybe ByteString
</span><a href="#local-6989586621679191177"><span class="hs-identifier hs-var">errMsg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (Maybe ByteString) -&gt; ConduitT i r m (Maybe ByteString)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Result -&gt; IO (Maybe ByteString)
</span><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier hs-var">Pg.resultErrorMessage</span></a></span><span> </span><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679191201"><span class="hs-identifier hs-var">row</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-240"></span><span>                </span><span class="annot"><span class="annottext">String -&gt; ConduitT i r m ()
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Fail.fail</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Postgres error: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ByteString -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ByteString
</span><a href="#local-6989586621679191177"><span class="hs-identifier hs-var">errMsg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-241"></span><span>
</span><span id="line-242"></span><span id="local-6989586621679191354"><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#bailEarly"><span class="hs-identifier hs-type">bailEarly</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier hs-type">Pq.Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier hs-type">Pg.Result</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191354"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-243"></span><span id="bailEarly"><span class="annot"><span class="annottext">bailEarly :: Connection -&gt; Result -&gt; String -&gt; IO a
</span><a href="Database.Beam.Postgres.Conduit.html#bailEarly"><span class="hs-identifier hs-var hs-var">bailEarly</span></a></span></span><span> </span><span id="local-6989586621679191175"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191175"><span class="hs-identifier hs-var">conn'</span></a></span></span><span> </span><span id="local-6989586621679191174"><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679191174"><span class="hs-identifier hs-var">row</span></a></span></span><span> </span><span id="local-6989586621679191173"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679191173"><span class="hs-identifier hs-var">errorString</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-244"></span><span>  </span><span class="annot"><span class="annottext">Result -&gt; IO ()
</span><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier hs-var">Pg.unsafeFreeResult</span></a></span><span> </span><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679191174"><span class="hs-identifier hs-var">row</span></a></span><span>
</span><span id="line-245"></span><span>  </span><span class="annot"><span class="annottext">Connection -&gt; IO ()
</span><a href="Database.Beam.Postgres.Conduit.html#cancelQuery"><span class="hs-identifier hs-var">cancelQuery</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191175"><span class="hs-identifier hs-var">conn'</span></a></span><span>
</span><span id="line-246"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; IO a
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Fail.fail</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679191173"><span class="hs-identifier hs-var">errorString</span></a></span><span>
</span><span id="line-247"></span><span>
</span><span id="line-248"></span><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#cancelQuery"><span class="hs-identifier hs-type">cancelQuery</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier hs-type">Pq.Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-249"></span><span id="cancelQuery"><span class="annot"><span class="annottext">cancelQuery :: Connection -&gt; IO ()
</span><a href="Database.Beam.Postgres.Conduit.html#cancelQuery"><span class="hs-identifier hs-var hs-var">cancelQuery</span></a></span></span><span> </span><span id="local-6989586621679191170"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191170"><span class="hs-identifier hs-var">conn'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-250"></span><span>  </span><span id="local-6989586621679191169"><span class="annot"><span class="annottext">Maybe Cancel
</span><a href="#local-6989586621679191169"><span class="hs-identifier hs-var">cancel</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; IO (Maybe Cancel)
</span><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier hs-var">Pg.getCancel</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191170"><span class="hs-identifier hs-var">conn'</span></a></span><span>
</span><span id="line-251"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Cancel
</span><a href="#local-6989586621679191169"><span class="hs-identifier hs-var">cancel</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-252"></span><span>    </span><span class="annot"><span class="annottext">Maybe Cancel
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-253"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679191167"><span class="annot"><span class="annottext">Cancel
</span><a href="#local-6989586621679191167"><span class="hs-identifier hs-var">cancel'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-254"></span><span>      </span><span id="local-6989586621679191166"><span class="annot"><span class="annottext">Either ByteString ()
</span><a href="#local-6989586621679191166"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Cancel -&gt; IO (Either ByteString ())
</span><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier hs-var">Pg.cancel</span></a></span><span> </span><span class="annot"><span class="annottext">Cancel
</span><a href="#local-6989586621679191167"><span class="hs-identifier hs-var">cancel'</span></a></span><span>
</span><span id="line-255"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either ByteString ()
</span><a href="#local-6989586621679191166"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-256"></span><span>        </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IO ()
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Connection -&gt; IO ()
</span><a href="Database.Beam.Postgres.Conduit.html#finishQuery"><span class="hs-identifier hs-var">finishQuery</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191170"><span class="hs-identifier hs-var">conn'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-257"></span><span>        </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621679191164"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679191164"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Fail.fail</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Could not cancel: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679191164"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-258"></span><span>
</span><span id="line-259"></span><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#finishQuery"><span class="hs-identifier hs-type">finishQuery</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier hs-type">Pq.Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-260"></span><span id="finishQuery"><span class="annot"><span class="annottext">finishQuery :: Connection -&gt; IO ()
</span><a href="Database.Beam.Postgres.Conduit.html#finishQuery"><span class="hs-identifier hs-var hs-var">finishQuery</span></a></span></span><span> </span><span id="local-6989586621679191163"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191163"><span class="hs-identifier hs-var">conn'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-261"></span><span>  </span><span id="local-6989586621679191162"><span class="annot"><span class="annottext">Maybe Result
</span><a href="#local-6989586621679191162"><span class="hs-identifier hs-var">nextRow</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; IO (Maybe Result)
</span><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier hs-var">Pg.getResult</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191163"><span class="hs-identifier hs-var">conn'</span></a></span><span>
</span><span id="line-262"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Result
</span><a href="#local-6989586621679191162"><span class="hs-identifier hs-var">nextRow</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-263"></span><span>    </span><span class="annot"><span class="annottext">Maybe Result
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-264"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Result
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; IO ()
</span><a href="Database.Beam.Postgres.Conduit.html#finishQuery"><span class="hs-identifier hs-var">finishQuery</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191163"><span class="hs-identifier hs-var">conn'</span></a></span><span>
</span><span id="line-265"></span><span>
</span><span id="line-266"></span><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#gracefulShutdown"><span class="hs-identifier hs-type">gracefulShutdown</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier hs-type">Pq.Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-267"></span><span id="gracefulShutdown"><span class="annot"><span class="annottext">gracefulShutdown :: Connection -&gt; IO ()
</span><a href="Database.Beam.Postgres.Conduit.html#gracefulShutdown"><span class="hs-identifier hs-var hs-var">gracefulShutdown</span></a></span></span><span> </span><span id="local-6989586621679191161"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191161"><span class="hs-identifier hs-var">conn'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-268"></span><span>  </span><span id="local-6989586621679191160"><span class="annot"><span class="annottext">TransactionStatus
</span><a href="#local-6989586621679191160"><span class="hs-identifier hs-var">sts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; IO TransactionStatus
</span><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier hs-var">Pg.transactionStatus</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191161"><span class="hs-identifier hs-var">conn'</span></a></span><span>
</span><span id="line-269"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TransactionStatus
</span><a href="#local-6989586621679191160"><span class="hs-identifier hs-var">sts</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-270"></span><span>    </span><span class="annot"><span class="annottext">TransactionStatus
</span><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier hs-var">Pg.TransIdle</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-271"></span><span>    </span><span class="annot"><span class="annottext">TransactionStatus
</span><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier hs-var">Pg.TransInTrans</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-272"></span><span>    </span><span class="annot"><span class="annottext">TransactionStatus
</span><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier hs-var">Pg.TransInError</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-273"></span><span>    </span><span class="annot"><span class="annottext">TransactionStatus
</span><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier hs-var">Pg.TransUnknown</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-274"></span><span>    </span><span class="annot"><span class="annottext">TransactionStatus
</span><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier hs-var">Pg.TransActive</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; IO ()
</span><a href="Database.Beam.Postgres.Conduit.html#cancelQuery"><span class="hs-identifier hs-var">cancelQuery</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191161"><span class="hs-identifier hs-var">conn'</span></a></span><span>
</span><span id="line-275"></span><span>
</span><span id="line-276"></span><span class="hs-comment">-- | Runs any query that returns a set of values</span><span>
</span><span id="line-277"></span><span id="local-6989586621679191444"><span id="local-6989586621679191445"><span id="local-6989586621679191448"><span class="annot"><a href="Database.Beam.Postgres.Conduit.html#runQueryReturning"><span class="hs-identifier hs-type">runQueryReturning</span></a></span><span>
</span><span id="line-278"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191448"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Fail.MonadFail</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191448"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../monad-control/html/src"><span class="hs-identifier hs-type">MonadBaseControl</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191448"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191448"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../beam-core/html/src"><span class="hs-identifier hs-type">FromBackendRow</span></a></span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Types.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191445"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-279"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier hs-type">Pg.Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Beam.Postgres.Syntax.html#PgSyntax"><span class="hs-identifier hs-type">PgSyntax</span></a></span><span>
</span><span id="line-280"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">CONDUIT_TRANSFORMER</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">r</span><span> </span><span class="hs-identifier">m</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">m</span><span> </span><span class="hs-identifier">b</span><span class="hs-special">)</span><span>
</span><span id="line-281"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679191448"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679191444"><span class="hs-identifier hs-type">b</span></a></span></span></span></span><span>
</span><span id="line-282"></span><span id="runQueryReturning"><span class="annot"><span class="annottext">runQueryReturning :: Connection -&gt; PgSyntax -&gt; (ConduitT () r m () -&gt; m b) -&gt; m b
</span><a href="Database.Beam.Postgres.Conduit.html#runQueryReturning"><span class="hs-identifier hs-var hs-var">runQueryReturning</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679191153"><span class="annot"><span class="annottext">conn :: Connection
</span><a href="#local-6989586621679191153"><span class="hs-identifier hs-var">conn</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="../../../../postgresql-simple/html/src"><span class="hs-identifier hs-type">Pg.Connection</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679191152"><span class="annot"><span class="annottext">MVar Connection
connectionHandle :: MVar Connection
connectionHandle :: Connection -&gt; MVar Connection
</span><a href="#local-6989586621679191152"><span class="hs-identifier hs-var hs-var">connectionHandle</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621679191151"><span class="annot"><span class="annottext">PgSyntax
</span><a href="#local-6989586621679191151"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679191150"><span class="annot"><span class="annottext">ConduitT () r m () -&gt; m b
</span><a href="#local-6989586621679191150"><span class="hs-identifier hs-var">withSrc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-283"></span><span>  </span><span id="local-6989586621679191149"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679191149"><span class="hs-identifier hs-var">syntax</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO ByteString -&gt; m ByteString
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO ByteString -&gt; m ByteString) -&gt; IO ByteString -&gt; m ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Connection -&gt; PgSyntax -&gt; IO ByteString
</span><a href="Database.Beam.Postgres.Connection.html#pgRenderSyntax"><span class="hs-identifier hs-var">pgRenderSyntax</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191153"><span class="hs-identifier hs-var">conn</span></a></span><span> </span><span class="annot"><span class="annottext">PgSyntax
</span><a href="#local-6989586621679191151"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-284"></span><span>
</span><span id="line-285"></span><span>  </span><span class="annot"><span class="annottext">m Connection -&gt; (Connection -&gt; m ()) -&gt; (Connection -&gt; m b) -&gt; m b
forall (m :: * -&gt; *) a b c.
MonadBaseControl IO m =&gt;
m a -&gt; (a -&gt; m b) -&gt; (a -&gt; m c) -&gt; m c
</span><a href="../../../../lifted-base/html/src"><span class="hs-identifier hs-var">Lifted.bracket</span></a></span><span>
</span><span id="line-286"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MVar Connection -&gt; m Connection
forall (m :: * -&gt; *) a. MonadBase IO m =&gt; MVar a -&gt; m a
</span><a href="../../../../lifted-base/html/src"><span class="hs-identifier hs-var">Lifted.takeMVar</span></a></span><span> </span><span class="annot"><span class="annottext">MVar Connection
</span><a href="#local-6989586621679191152"><span class="hs-identifier hs-var">connectionHandle</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-287"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MVar Connection -&gt; Connection -&gt; m ()
forall (m :: * -&gt; *) a. MonadBase IO m =&gt; MVar a -&gt; a -&gt; m ()
</span><a href="../../../../lifted-base/html/src"><span class="hs-identifier hs-var">Lifted.putMVar</span></a></span><span> </span><span class="annot"><span class="annottext">MVar Connection
</span><a href="#local-6989586621679191152"><span class="hs-identifier hs-var">connectionHandle</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-288"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679191145"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191145"><span class="hs-identifier hs-var">conn'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-289"></span><span>      </span><span id="local-6989586621679191144"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679191144"><span class="hs-identifier hs-var">success</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO Bool -&gt; m Bool
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO Bool -&gt; m Bool) -&gt; IO Bool -&gt; m Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Connection -&gt; ByteString -&gt; IO Bool
</span><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier hs-var">Pg.sendQuery</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191145"><span class="hs-identifier hs-var">conn'</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679191149"><span class="hs-identifier hs-var">syntax</span></a></span><span>
</span><span id="line-290"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679191144"><span class="hs-identifier hs-var">success</span></a></span><span>
</span><span id="line-291"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-292"></span><span>          </span><span id="local-6989586621679191143"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679191143"><span class="hs-identifier hs-var">singleRowModeSet</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO Bool -&gt; m Bool
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Connection -&gt; IO Bool
</span><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier hs-var">Pg.setSingleRowMode</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191145"><span class="hs-identifier hs-var">conn'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-293"></span><span>          </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679191143"><span class="hs-identifier hs-var">singleRowModeSet</span></a></span><span>
</span><span id="line-294"></span><span>             </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">ConduitT () r m () -&gt; m b
</span><a href="#local-6989586621679191150"><span class="hs-identifier hs-var">withSrc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Connection -&gt; Connection -&gt; Maybe [Field] -&gt; ConduitT () r m ()
forall (m :: * -&gt; *) r i.
(MonadFail m, FromBackendRow Postgres r, MonadIO m) =&gt;
Connection -&gt; Connection -&gt; Maybe [Field] -&gt; ConduitT i r m ()
</span><a href="Database.Beam.Postgres.Conduit.html#streamResults"><span class="hs-identifier hs-var">streamResults</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191153"><span class="hs-identifier hs-var">conn</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191145"><span class="hs-identifier hs-var">conn'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [Field]
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">m b -&gt; m () -&gt; m b
forall (m :: * -&gt; *) a b.
MonadBaseControl IO m =&gt;
m a -&gt; m b -&gt; m a
</span><a href="../../../../lifted-base/html/src"><span class="hs-operator hs-var">`finally`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IO () -&gt; m ()
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; m ()) -&gt; IO () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Connection -&gt; IO ()
</span><a href="Database.Beam.Postgres.Conduit.html#gracefulShutdown"><span class="hs-identifier hs-var">gracefulShutdown</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191145"><span class="hs-identifier hs-var">conn'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-295"></span><span>             </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">String -&gt; m b
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Fail.fail</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Could not enable single row mode&quot;</span></span><span>
</span><span id="line-296"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-297"></span><span>          </span><span id="local-6989586621679191142"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679191142"><span class="hs-identifier hs-var">errMsg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Maybe ByteString -&gt; ByteString
forall a. a -&gt; Maybe a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;No libpq error provided&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Maybe ByteString -&gt; ByteString)
-&gt; m (Maybe ByteString) -&gt; m ByteString
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IO (Maybe ByteString) -&gt; m (Maybe ByteString)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Connection -&gt; IO (Maybe ByteString)
</span><a href="../../../../postgresql-libpq/html/src"><span class="hs-identifier hs-var">Pg.errorMessage</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679191145"><span class="hs-identifier hs-var">conn'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-298"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; m b
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Fail.fail</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679191142"><span class="hs-identifier hs-var">errMsg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-299"></span><span class="hs-pragma">{-# DEPRECATED</span><span> </span><span class="hs-pragma">runQueryReturning</span><span> </span><span class="hs-pragma">&quot;Use streamingRunQueryReturning&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-300"></span></pre></body></html>