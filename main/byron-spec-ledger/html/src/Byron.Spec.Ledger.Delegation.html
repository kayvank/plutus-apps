<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DeriveAnyClass #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DeriveDataTypeable #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DeriveGeneric #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE FunctionalDependencies #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE StrictData #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE TemplateHaskell #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Byron.Spec.Ledger.Delegation</span><span>
</span><span id="line-15"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * Delegation scheduling</span></span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEG"><span class="hs-identifier">SDELEG</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEGS"><span class="hs-identifier">SDELEGS</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSState"><span class="hs-identifier">DSState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSState"><span class="hs-identifier">DSState</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#_dSStateScheduledDelegations"><span class="hs-identifier">_dSStateScheduledDelegations</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#_dSStateKeyEpochDelegations"><span class="hs-identifier">_dSStateKeyEpochDelegations</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier">DCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier">DCert</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#delegator"><span class="hs-identifier">delegator</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#delegate"><span class="hs-identifier">delegate</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#depoch"><span class="hs-identifier">depoch</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#dwho"><span class="hs-identifier">dwho</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#mkDCert"><span class="hs-identifier">mkDCert</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#signature"><span class="hs-keyword">signature</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Delegation activation</span></span><span>
</span><span id="line-30"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEG"><span class="hs-identifier">ADELEG</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEGS"><span class="hs-identifier">ADELEGS</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSEnv"><span class="hs-identifier">DSEnv</span></a></span><span>
</span><span id="line-33"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSEnv"><span class="hs-identifier">DSEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>        </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#_dSEnvAllowedDelegators"><span class="hs-identifier">_dSEnvAllowedDelegators</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>        </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#_dSEnvEpoch"><span class="hs-identifier">_dSEnvEpoch</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>        </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#_dSEnvSlot"><span class="hs-identifier">_dSEnvSlot</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>        </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#_dSEnvK"><span class="hs-identifier">_dSEnvK</span></a></span><span>
</span><span id="line-38"></span><span>      </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#allowedDelegators"><span class="hs-identifier">allowedDelegators</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DState"><span class="hs-identifier">DState</span></a></span><span>
</span><span id="line-41"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DState"><span class="hs-identifier">DState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>        </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#_dStateDelegationMap"><span class="hs-identifier">_dStateDelegationMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>        </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#_dStateLastDelegation"><span class="hs-identifier">_dStateLastDelegation</span></a></span><span>
</span><span id="line-44"></span><span>      </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Delegation interface</span></span><span>
</span><span id="line-47"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DELEG"><span class="hs-identifier">DELEG</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DIEnv"><span class="hs-identifier">DIEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DIState"><span class="hs-identifier">DIState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DIState"><span class="hs-identifier">DIState</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#_dIStateDelegationMap"><span class="hs-identifier">_dIStateDelegationMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#_dIStateLastDelegation"><span class="hs-identifier">_dIStateLastDelegation</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#_dIStateScheduledDelegations"><span class="hs-identifier">_dIStateScheduledDelegations</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#_dIStateKeyEpochDelegations"><span class="hs-identifier">_dIStateKeyEpochDelegations</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#liveAfter"><span class="hs-identifier">liveAfter</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#EpochDiff"><span class="hs-identifier">EpochDiff</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span><span>    </span><span class="annot"><span class="hs-comment">-- * State lens fields</span></span><span>
</span><span id="line-58"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#slot"><span class="hs-identifier">slot</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#epoch"><span class="hs-identifier">epoch</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#delegationMap"><span class="hs-identifier">delegationMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span>    </span><span class="annot"><span class="hs-comment">-- * State lens type classes</span></span><span>
</span><span id="line-63"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#HasScheduledDelegations"><span class="hs-identifier">HasScheduledDelegations</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#scheduledDelegations"><span class="hs-identifier">scheduledDelegations</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#dmsL"><span class="hs-identifier">dmsL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span>
</span><span id="line-67"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Generators</span></span><span>
</span><span id="line-68"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#dcertGen"><span class="hs-identifier">dcertGen</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-69"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#dcertsGen"><span class="hs-identifier">dcertsGen</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-70"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#initialEnvFromGenesisKeys"><span class="hs-identifier">initialEnvFromGenesisKeys</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-71"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#randomDCertGen"><span class="hs-identifier">randomDCertGen</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-72"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#goblinGensDELEG"><span class="hs-identifier">goblinGensDELEG</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-73"></span><span>
</span><span id="line-74"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Functions on delegation state</span></span><span>
</span><span id="line-75"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#delegatorOf"><span class="hs-identifier">delegatorOf</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Support Functions for delegation properties</span></span><span>
</span><span id="line-78"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#delegatorDelegate"><span class="hs-identifier">delegatorDelegate</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-79"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#emptyDelegationPayloadRatio"><span class="hs-identifier">emptyDelegationPayloadRatio</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-80"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#thisEpochDelegationsRatio"><span class="hs-identifier">thisEpochDelegationsRatio</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-81"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#nextEpochDelegationsRatio"><span class="hs-identifier">nextEpochDelegationsRatio</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-82"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#selfDelegationsRatio"><span class="hs-identifier">selfDelegationsRatio</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-83"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#multipleDelegationsRatio"><span class="hs-identifier">multipleDelegationsRatio</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-84"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#maxDelegationsTo"><span class="hs-identifier">maxDelegationsTo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-85"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#changedDelegationsRatio"><span class="hs-identifier">changedDelegationsRatio</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-86"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#maxChangedDelegations"><span class="hs-identifier">maxChangedDelegations</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-87"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#repeatedDelegationsRatio"><span class="hs-identifier">repeatedDelegationsRatio</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-88"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#maxRepeatedDelegations"><span class="hs-identifier">maxRepeatedDelegations</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-89"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#maxCertsPerBlock"><span class="hs-identifier">maxCertsPerBlock</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Predicate failures</span></span><span>
</span><span id="line-92"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#AdelegPredicateFailure"><span class="hs-identifier">AdelegPredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-93"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#AdelegsPredicateFailure"><span class="hs-identifier">AdelegsPredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-94"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SdelegPredicateFailure"><span class="hs-identifier">SdelegPredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-95"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SdelegsPredicateFailure"><span class="hs-identifier">SdelegsPredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-96"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#MsdelegPredicateFailure"><span class="hs-identifier">MsdelegPredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-97"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DelegPredicateFailure"><span class="hs-identifier">DelegPredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-98"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#tamperedDcerts"><span class="hs-identifier">tamperedDcerts</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-99"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-100"></span><span class="hs-keyword">where</span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html"><span class="hs-identifier">Byron.Spec.Ledger.Core</span></a></span><span>
</span><span id="line-103"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#BlockCount"><span class="hs-identifier">BlockCount</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-104"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier">Epoch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier">Epoch</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-105"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#HasHash"><span class="hs-identifier">HasHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-106"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Hash"><span class="hs-identifier">Hash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Hash"><span class="hs-identifier">Hash</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-107"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Owner"><span class="hs-identifier">Owner</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Owner"><span class="hs-identifier">Owner</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-108"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Sig"><span class="hs-identifier">Sig</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-109"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier">Slot</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier">Slot</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-110"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#SlotCount"><span class="hs-identifier">SlotCount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#SlotCount"><span class="hs-identifier">SlotCount</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-111"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier">VKey</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier">VKey</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-112"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier">VKeyGenesis</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier">VKeyGenesis</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-113"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#addSlot"><span class="hs-identifier">addSlot</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-114"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#hash"><span class="hs-identifier">hash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-115"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#mkVkGenesisSet"><span class="hs-identifier">mkVkGenesisSet</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-116"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#owner"><span class="hs-identifier">owner</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-117"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#range"><span class="hs-identifier">range</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-118"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#unBlockCount"><span class="hs-identifier">unBlockCount</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-119"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#unVKeyGenesis"><span class="hs-identifier">unVKeyGenesis</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-120"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#verify"><span class="hs-identifier">verify</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-121"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#%2208"><span class="hs-operator">(&#8712;)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-122"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#%2209"><span class="hs-operator">(&#8713;)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-123"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#%2A03"><span class="hs-operator">(&#10755;)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-124"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-125"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.Generators.html"><span class="hs-identifier">Byron.Spec.Ledger.Core.Generators</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.Generators.html#epochGen"><span class="hs-identifier">epochGen</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.Generators.html#slotGen"><span class="hs-identifier">slotGen</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-126"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.Generators.html"><span class="hs-identifier">Byron.Spec.Ledger.Core.Generators</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CoreGen</span></span><span>
</span><span id="line-127"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.Omniscient.html"><span class="hs-identifier">Byron.Spec.Ledger.Core.Omniscient</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.Omniscient.html#signWithGenesisKey"><span class="hs-identifier">signWithGenesisKey</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-128"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Util.html"><span class="hs-identifier">Byron.Spec.Ledger.Util</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Util.html#mkGoblinGens"><span class="hs-identifier">mkGoblinGens</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-129"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Arrow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator">(&amp;&amp;&amp;)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier">Control.State.Transition</span></a></span><span>
</span><span id="line-131"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier">Embed</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-132"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier">Environment</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-133"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier">IRC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier">IRC</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-134"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier">PredicateFailure</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-135"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier">STS</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-136"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier">Signal</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-137"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier">State</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-138"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier">TRC</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-139"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier">initialRules</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-140"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier">judgmentContext</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-141"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier">trans</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-142"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier">transitionRules</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-143"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier">wrapFailed</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-144"></span><span>    </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-operator">(?!)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-145"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-146"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../small-steps-test/html/src"><span class="hs-identifier">Control.State.Transition.Generator</span></a></span><span>
</span><span id="line-147"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../small-steps-test/html/src"><span class="hs-identifier">HasTrace</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-148"></span><span>    </span><span class="annot"><a href="../../../../small-steps-test/html/src"><span class="hs-identifier">SignalGenerator</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-149"></span><span>    </span><span class="annot"><a href="../../../../small-steps-test/html/src"><span class="hs-identifier">envGen</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-150"></span><span>    </span><span class="annot"><a href="../../../../small-steps-test/html/src"><span class="hs-identifier">genTrace</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-151"></span><span>    </span><span class="annot"><a href="../../../../small-steps-test/html/src"><span class="hs-identifier">sigGen</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-152"></span><span>    </span><span class="annot"><a href="../../../../small-steps-test/html/src"><span class="hs-identifier">tinkerWithSigGen</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-153"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-154"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../small-steps-test/html/src"><span class="hs-identifier">Control.State.Transition.Trace</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../small-steps-test/html/src"><span class="hs-identifier">TraceOrder</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../small-steps-test/html/src"><span class="hs-identifier">OldestFirst</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../small-steps-test/html/src"><span class="hs-identifier">traceSignals</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cardano-data/html/src"><span class="hs-identifier">Data.AbstractSize</span></a></span><span>
</span><span id="line-156"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../bimap/html/src"><span class="hs-identifier">Data.Bimap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../bimap/html/src"><span class="hs-identifier">Bimap</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../bimap/html/src"><span class="hs-operator">(!&gt;)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-157"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../bimap/html/src"><span class="hs-identifier">Data.Bimap</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Bimap</span></span><span>
</span><span id="line-158"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Data</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Typeable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-159"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../hashable/html/src"><span class="hs-identifier">Data.Hashable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../hashable/html/src"><span class="hs-identifier">Hashable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-160"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../hashable/html/src"><span class="hs-identifier">Data.Hashable</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">H</span></span><span>
</span><span id="line-161"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.List</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">List</span></span><span>
</span><span id="line-162"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../Unique/html/src"><span class="hs-identifier">Data.List.Unique</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../Unique/html/src"><span class="hs-identifier">count</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-163"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier">Data.Map.Strict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier">Map</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-164"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier">Data.Map.Strict</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-165"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">catMaybes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-166"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier">Set</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-operator">(\\)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-167"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-168"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Word</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Word64</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Word8</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-169"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">GHC.Generics</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-170"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../hedgehog/html/src"><span class="hs-identifier">Hedgehog</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../hedgehog/html/src"><span class="hs-identifier">Gen</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-171"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../hedgehog/html/src"><span class="hs-identifier">Hedgehog.Gen</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Gen</span></span><span>
</span><span id="line-172"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../../../hedgehog/html/src"><span class="hs-identifier">Hedgehog.Range</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Range</span></span><span>
</span><span id="line-173"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../microlens/html/src"><span class="hs-identifier">Lens.Micro</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../microlens/html/src"><span class="hs-identifier">Lens'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../microlens/html/src"><span class="hs-identifier">lens</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../microlens/html/src"><span class="hs-identifier">to</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../microlens/html/src"><span class="hs-operator">(%~)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator">(&amp;)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../microlens/html/src"><span class="hs-operator">(.~)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../microlens/html/src"><span class="hs-operator">(&lt;&gt;~)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../microlens/html/src"><span class="hs-operator">(^.)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../microlens/html/src"><span class="hs-identifier">_1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-174"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../microlens-th/html/src"><span class="hs-identifier">Lens.Micro.TH</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../microlens-th/html/src"><span class="hs-identifier">makeFields</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-175"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../nothunks/html/src"><span class="hs-identifier">NoThunks.Class</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../nothunks/html/src"><span class="hs-identifier">NoThunks</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../nothunks/html/src"><span class="hs-identifier">allNoThunks</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../nothunks/html/src"><span class="hs-identifier">noThunksInKeysAndValues</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-176"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../goblins/html/src"><span class="hs-identifier">Test.Goblin</span></a></span><span>
</span><span id="line-177"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../../../goblins/html/src"><span class="hs-identifier">AddShrinks</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-178"></span><span>    </span><span class="annot"><a href="../../../../goblins/html/src"><span class="hs-identifier">Goblin</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-179"></span><span>    </span><span class="annot"><a href="../../../../goblins/html/src"><span class="hs-identifier">GoblinData</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-180"></span><span>    </span><span class="annot"><a href="../../../../goblins/html/src"><span class="hs-identifier">SeedGoblin</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-181"></span><span>    </span><span class="annot"><a href="../../../../goblins/html/src"><span class="hs-identifier">mkEmptyGoblin</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-182"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-183"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../goblins/html/src"><span class="hs-identifier">Test.Goblin.TH</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../goblins/html/src"><span class="hs-identifier">deriveAddShrinks</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../goblins/html/src"><span class="hs-identifier">deriveGoblin</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../goblins/html/src"><span class="hs-identifier">deriveSeedGoblin</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-184"></span><span>
</span><span id="line-185"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-186"></span><span class="hs-comment">-- Abstract types</span><span>
</span><span id="line-187"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-188"></span><span>
</span><span id="line-189"></span><span class="hs-comment">-- | A delegation certificate.</span><span>
</span><span id="line-190"></span><span id="local-6989586621679585746"><span id="local-6989586621679585747"></span></span><span class="hs-keyword">data</span><span> </span><span id="DCert"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-var">DCert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DCert"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-var">DCert</span></a></span></span><span>
</span><span id="line-191"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- | Key that delegates</span><span>
</span><span id="line-192"></span><span>    </span><span id="delegator"><span class="annot"><span class="annottext">DCert -&gt; VKeyGenesis
</span><a href="Byron.Spec.Ledger.Delegation.html#delegator"><span class="hs-identifier hs-var hs-var">delegator</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-193"></span><span>    </span><span class="hs-comment">-- | Key that the delegator is delegating to</span><span>
</span><span id="line-194"></span><span>    </span><span id="delegate"><span class="annot"><span class="annottext">DCert -&gt; VKey
</span><a href="Byron.Spec.Ledger.Delegation.html#delegate"><span class="hs-identifier hs-var hs-var">delegate</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-195"></span><span>    </span><span class="hs-comment">-- | Certificate epoch</span><span>
</span><span id="line-196"></span><span>    </span><span id="depoch"><span class="annot"><span class="annottext">DCert -&gt; Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#depoch"><span class="hs-identifier hs-var hs-var">depoch</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-197"></span><span>    </span><span class="hs-comment">-- | Witness for the delegation certificate</span><span>
</span><span id="line-198"></span><span>    </span><span id="signature"><span class="annot"><span class="annottext">DCert -&gt; Sig (VKey, Epoch)
</span><a href="Byron.Spec.Ledger.Delegation.html#signature"><span class="hs-keyword hs-var hs-var">signature</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Sig"><span class="hs-identifier hs-type">Sig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-199"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-200"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679585740"><span id="local-6989586621679585742"><span id="local-6989586621679585744"><span class="annot"><span class="annottext">Int -&gt; DCert -&gt; ShowS
[DCert] -&gt; ShowS
DCert -&gt; String
(Int -&gt; DCert -&gt; ShowS)
-&gt; (DCert -&gt; String) -&gt; ([DCert] -&gt; ShowS) -&gt; Show DCert
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [DCert] -&gt; ShowS
$cshowList :: [DCert] -&gt; ShowS
show :: DCert -&gt; String
$cshow :: DCert -&gt; String
showsPrec :: Int -&gt; DCert -&gt; ShowS
$cshowsPrec :: Int -&gt; DCert -&gt; ShowS
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679585735"><span id="local-6989586621679585737"><span class="annot"><span class="annottext">DCert -&gt; DCert -&gt; Bool
(DCert -&gt; DCert -&gt; Bool) -&gt; (DCert -&gt; DCert -&gt; Bool) -&gt; Eq DCert
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: DCert -&gt; DCert -&gt; Bool
$c/= :: DCert -&gt; DCert -&gt; Bool
== :: DCert -&gt; DCert -&gt; Bool
$c== :: DCert -&gt; DCert -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679585719"><span id="local-6989586621679585721"><span id="local-6989586621679585723"><span id="local-6989586621679585725"><span id="local-6989586621679585727"><span id="local-6989586621679585729"><span id="local-6989586621679585731"><span class="annot"><span class="annottext">Eq DCert
Eq DCert
-&gt; (DCert -&gt; DCert -&gt; Ordering)
-&gt; (DCert -&gt; DCert -&gt; Bool)
-&gt; (DCert -&gt; DCert -&gt; Bool)
-&gt; (DCert -&gt; DCert -&gt; Bool)
-&gt; (DCert -&gt; DCert -&gt; Bool)
-&gt; (DCert -&gt; DCert -&gt; DCert)
-&gt; (DCert -&gt; DCert -&gt; DCert)
-&gt; Ord DCert
DCert -&gt; DCert -&gt; Bool
DCert -&gt; DCert -&gt; Ordering
DCert -&gt; DCert -&gt; DCert
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: DCert -&gt; DCert -&gt; DCert
$cmin :: DCert -&gt; DCert -&gt; DCert
max :: DCert -&gt; DCert -&gt; DCert
$cmax :: DCert -&gt; DCert -&gt; DCert
&gt;= :: DCert -&gt; DCert -&gt; Bool
$c&gt;= :: DCert -&gt; DCert -&gt; Bool
&gt; :: DCert -&gt; DCert -&gt; Bool
$c&gt; :: DCert -&gt; DCert -&gt; Bool
&lt;= :: DCert -&gt; DCert -&gt; Bool
$c&lt;= :: DCert -&gt; DCert -&gt; Bool
&lt; :: DCert -&gt; DCert -&gt; Bool
$c&lt; :: DCert -&gt; DCert -&gt; Bool
compare :: DCert -&gt; DCert -&gt; Ordering
$ccompare :: DCert -&gt; DCert -&gt; Ordering
$cp1Ord :: Eq DCert
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. DCert -&gt; Rep DCert x)
-&gt; (forall x. Rep DCert x -&gt; DCert) -&gt; Generic DCert
forall x. Rep DCert x -&gt; DCert
forall x. DCert -&gt; Rep DCert x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep DCert x -&gt; DCert
$cfrom :: forall x. DCert -&gt; Rep DCert x
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679585711"><span id="local-6989586621679585713"><span class="annot"><span class="annottext">Int -&gt; DCert -&gt; Int
DCert -&gt; Int
(Int -&gt; DCert -&gt; Int) -&gt; (DCert -&gt; Int) -&gt; Hashable DCert
forall a. (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
hash :: DCert -&gt; Int
$chash :: DCert -&gt; Int
hashWithSalt :: Int -&gt; DCert -&gt; Int
$chashWithSalt :: Int -&gt; DCert -&gt; Int
</span><a href="../../../../hashable/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cDCert"><span id="%24tDCert"><span id="local-6989586621679585681"><span id="local-6989586621679585683"><span id="local-6989586621679585685"><span id="local-6989586621679585687"><span id="local-6989586621679585689"><span id="local-6989586621679585691"><span id="local-6989586621679585693"><span id="local-6989586621679585695"><span id="local-6989586621679585697"><span id="local-6989586621679585699"><span id="local-6989586621679585701"><span id="local-6989586621679585703"><span id="local-6989586621679585705"><span id="local-6989586621679585707"><span class="annot"><span class="annottext">Typeable DCert
DataType
Constr
Typeable DCert
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; DCert -&gt; c DCert)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c DCert)
-&gt; (DCert -&gt; Constr)
-&gt; (DCert -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c DCert))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c DCert))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; DCert -&gt; DCert)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DCert -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DCert -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; DCert -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; DCert -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; DCert -&gt; m DCert)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; DCert -&gt; m DCert)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; DCert -&gt; m DCert)
-&gt; Data DCert
DCert -&gt; DataType
DCert -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; DCert -&gt; DCert
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; DCert -&gt; c DCert
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c DCert
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; DCert -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; DCert -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DCert -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DCert -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; DCert -&gt; m DCert
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; DCert -&gt; m DCert
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c DCert
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; DCert -&gt; c DCert
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c DCert)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c DCert)
$cDCert :: Constr
$tDCert :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; DCert -&gt; m DCert
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; DCert -&gt; m DCert
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; DCert -&gt; m DCert
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; DCert -&gt; m DCert
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; DCert -&gt; m DCert
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; DCert -&gt; m DCert
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; DCert -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; DCert -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; DCert -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; DCert -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DCert -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DCert -&gt; r
gmapQl :: (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DCert -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DCert -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; DCert -&gt; DCert
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; DCert -&gt; DCert
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c DCert)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c DCert)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c DCert)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c DCert)
dataTypeOf :: DCert -&gt; DataType
$cdataTypeOf :: DCert -&gt; DataType
toConstr :: DCert -&gt; Constr
$ctoConstr :: DCert -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c DCert
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c DCert
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; DCert -&gt; c DCert
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; DCert -&gt; c DCert
$cp1Data :: Typeable DCert
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679585672"><span id="local-6989586621679585674"><span id="local-6989586621679585676"><span class="annot"><span class="annottext">Context -&gt; DCert -&gt; IO (Maybe ThunkInfo)
Proxy DCert -&gt; String
(Context -&gt; DCert -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; DCert -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy DCert -&gt; String)
-&gt; NoThunks DCert
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy DCert -&gt; String
$cshowTypeOf :: Proxy DCert -&gt; String
wNoThunks :: Context -&gt; DCert -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; DCert -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; DCert -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; DCert -&gt; IO (Maybe ThunkInfo)
</span><a href="../../../../nothunks/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-201"></span><span>
</span><span id="line-202"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679585669"><span class="annot"><a href="../../../../cardano-data/html/src"><span class="hs-identifier hs-type">HasTypeReps</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span></span><span>
</span><span id="line-203"></span><span>
</span><span id="line-204"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#HasHash"><span class="hs-identifier hs-type">HasHash</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-205"></span><span>  </span><span id="local-6989586621679585665"><span class="annot"><span class="annottext">hash :: [DCert] -&gt; Hash
</span><a href="#local-6989586621679585665"><span class="hs-identifier hs-var hs-var hs-var hs-var">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Int -&gt; Hash
</span><a href="Byron.Spec.Ledger.Core.html#Hash"><span class="hs-identifier hs-var">Hash</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Int -&gt; Hash) -&gt; ([DCert] -&gt; Maybe Int) -&gt; [DCert] -&gt; Hash
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Maybe Int) -&gt; ([DCert] -&gt; Int) -&gt; [DCert] -&gt; Maybe Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[DCert] -&gt; Int
forall a. Hashable a =&gt; a -&gt; Int
</span><a href="../../../../hashable/html/src"><span class="hs-identifier hs-var">H.hash</span></a></span><span>
</span><span id="line-206"></span><span>
</span><span id="line-207"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#mkDCert"><span class="hs-identifier hs-type">mkDCert</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-208"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-209"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Sig"><span class="hs-identifier hs-type">Sig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-210"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-211"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-212"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span>
</span><span id="line-213"></span><span id="mkDCert"><span class="annot"><span class="annottext">mkDCert :: VKeyGenesis -&gt; Sig (VKey, Epoch) -&gt; VKey -&gt; Epoch -&gt; DCert
</span><a href="Byron.Spec.Ledger.Delegation.html#mkDCert"><span class="hs-identifier hs-var hs-var">mkDCert</span></a></span></span><span> </span><span id="local-6989586621679585662"><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679585662"><span class="hs-identifier hs-var">vkg</span></a></span></span><span> </span><span id="local-6989586621679585661"><span class="annot"><span class="annottext">Sig (VKey, Epoch)
</span><a href="#local-6989586621679585661"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621679585660"><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679585660"><span class="hs-identifier hs-var">vkd</span></a></span></span><span> </span><span id="local-6989586621679585659"><span class="annot"><span class="annottext">Epoch
</span><a href="#local-6989586621679585659"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-214"></span><span>  </span><span class="annot"><span class="annottext">DCert :: VKeyGenesis -&gt; VKey -&gt; Epoch -&gt; Sig (VKey, Epoch) -&gt; DCert
</span><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span>
</span><span id="line-215"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">delegator :: VKeyGenesis
</span><a href="Byron.Spec.Ledger.Delegation.html#delegator"><span class="hs-identifier hs-var">delegator</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679585662"><span class="hs-identifier hs-var">vkg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-216"></span><span>      </span><span class="annot"><span class="annottext">delegate :: VKey
</span><a href="Byron.Spec.Ledger.Delegation.html#delegate"><span class="hs-identifier hs-var">delegate</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679585660"><span class="hs-identifier hs-var">vkd</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-217"></span><span>      </span><span class="annot"><span class="annottext">depoch :: Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#depoch"><span class="hs-identifier hs-var">depoch</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Epoch
</span><a href="#local-6989586621679585659"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-218"></span><span>      </span><span class="annot"><span class="annottext">signature :: Sig (VKey, Epoch)
</span><a href="Byron.Spec.Ledger.Delegation.html#signature"><span class="hs-keyword hs-var">signature</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Sig (VKey, Epoch)
</span><a href="#local-6989586621679585661"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-219"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-220"></span><span>
</span><span id="line-221"></span><span class="hs-comment">-- | Who is delegating to whom.</span><span>
</span><span id="line-222"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#dwho"><span class="hs-identifier hs-type">dwho</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-223"></span><span id="dwho"><span class="annot"><span class="annottext">dwho :: DCert -&gt; (VKeyGenesis, VKey)
</span><a href="Byron.Spec.Ledger.Delegation.html#dwho"><span class="hs-identifier hs-var hs-var">dwho</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DCert -&gt; VKeyGenesis
</span><a href="Byron.Spec.Ledger.Delegation.html#delegator"><span class="hs-identifier hs-var hs-var">delegator</span></a></span><span> </span><span class="annot"><span class="annottext">(DCert -&gt; VKeyGenesis)
-&gt; (DCert -&gt; VKey) -&gt; DCert -&gt; (VKeyGenesis, VKey)
forall (a :: * -&gt; * -&gt; *) b c c'.
Arrow a =&gt;
a b c -&gt; a b c' -&gt; a b (c, c')
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; VKey
</span><a href="Byron.Spec.Ledger.Delegation.html#delegate"><span class="hs-identifier hs-var hs-var">delegate</span></a></span><span>
</span><span id="line-224"></span><span>
</span><span id="line-225"></span><span class="hs-comment">-- | Part of the delegation certificate that is signed by the delegator.</span><span>
</span><span id="line-226"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#dbody"><span class="hs-identifier hs-type">dbody</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-227"></span><span id="dbody"><span class="annot"><span class="annottext">dbody :: DCert -&gt; (VKey, Epoch)
</span><a href="Byron.Spec.Ledger.Delegation.html#dbody"><span class="hs-identifier hs-var hs-var">dbody</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DCert -&gt; VKey
</span><a href="Byron.Spec.Ledger.Delegation.html#delegate"><span class="hs-identifier hs-var hs-var">delegate</span></a></span><span> </span><span class="annot"><span class="annottext">(DCert -&gt; VKey) -&gt; (DCert -&gt; Epoch) -&gt; DCert -&gt; (VKey, Epoch)
forall (a :: * -&gt; * -&gt; *) b c c'.
Arrow a =&gt;
a b c -&gt; a b c' -&gt; a b (c, c')
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#depoch"><span class="hs-identifier hs-var hs-var">depoch</span></a></span><span>
</span><span id="line-228"></span><span>
</span><span id="line-229"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-230"></span><span class="hs-comment">-- Derived types</span><span>
</span><span id="line-231"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-232"></span><span>
</span><span id="line-233"></span><span class="hs-comment">-- | Delegation scheduling environment</span><span>
</span><span id="line-234"></span><span id="local-6989586621679585656"><span id="local-6989586621679585657"></span></span><span class="hs-keyword">data</span><span> </span><span id="DSEnv"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSEnv"><span class="hs-identifier hs-var">DSEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DSEnv"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSEnv"><span class="hs-identifier hs-var">DSEnv</span></a></span></span><span>
</span><span id="line-235"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- | Set of allowed delegators</span><span>
</span><span id="line-236"></span><span>    </span><span id="_dSEnvAllowedDelegators"><span class="annot"><span class="annottext">DSEnv -&gt; Set VKeyGenesis
</span><a href="Byron.Spec.Ledger.Delegation.html#_dSEnvAllowedDelegators"><span class="hs-identifier hs-var hs-var">_dSEnvAllowedDelegators</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-237"></span><span>    </span><span class="hs-comment">-- | Current epoch</span><span>
</span><span id="line-238"></span><span>    </span><span id="_dSEnvEpoch"><span class="annot"><span class="annottext">DSEnv -&gt; Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#_dSEnvEpoch"><span class="hs-identifier hs-var hs-var">_dSEnvEpoch</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-239"></span><span>    </span><span class="hs-comment">-- | Current slot</span><span>
</span><span id="line-240"></span><span>    </span><span id="_dSEnvSlot"><span class="annot"><span class="annottext">DSEnv -&gt; Slot
</span><a href="Byron.Spec.Ledger.Delegation.html#_dSEnvSlot"><span class="hs-identifier hs-var hs-var">_dSEnvSlot</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Slot</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-241"></span><span>    </span><span class="hs-comment">-- | Chain stability parameter</span><span>
</span><span id="line-242"></span><span>    </span><span id="_dSEnvK"><span class="annot"><span class="annottext">DSEnv -&gt; BlockCount
</span><a href="Byron.Spec.Ledger.Delegation.html#_dSEnvK"><span class="hs-identifier hs-var hs-var">_dSEnvK</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#BlockCount"><span class="hs-identifier hs-type">BlockCount</span></a></span><span>
</span><span id="line-243"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-244"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679585650"><span id="local-6989586621679585652"><span id="local-6989586621679585654"><span class="annot"><span class="annottext">Int -&gt; DSEnv -&gt; ShowS
[DSEnv] -&gt; ShowS
DSEnv -&gt; String
(Int -&gt; DSEnv -&gt; ShowS)
-&gt; (DSEnv -&gt; String) -&gt; ([DSEnv] -&gt; ShowS) -&gt; Show DSEnv
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [DSEnv] -&gt; ShowS
$cshowList :: [DSEnv] -&gt; ShowS
show :: DSEnv -&gt; String
$cshow :: DSEnv -&gt; String
showsPrec :: Int -&gt; DSEnv -&gt; ShowS
$cshowsPrec :: Int -&gt; DSEnv -&gt; ShowS
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679585646"><span id="local-6989586621679585648"><span class="annot"><span class="annottext">DSEnv -&gt; DSEnv -&gt; Bool
(DSEnv -&gt; DSEnv -&gt; Bool) -&gt; (DSEnv -&gt; DSEnv -&gt; Bool) -&gt; Eq DSEnv
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: DSEnv -&gt; DSEnv -&gt; Bool
$c/= :: DSEnv -&gt; DSEnv -&gt; Bool
== :: DSEnv -&gt; DSEnv -&gt; Bool
$c== :: DSEnv -&gt; DSEnv -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. DSEnv -&gt; Rep DSEnv x)
-&gt; (forall x. Rep DSEnv x -&gt; DSEnv) -&gt; Generic DSEnv
forall x. Rep DSEnv x -&gt; DSEnv
forall x. DSEnv -&gt; Rep DSEnv x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep DSEnv x -&gt; DSEnv
$cfrom :: forall x. DSEnv -&gt; Rep DSEnv x
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679585638"><span id="local-6989586621679585640"><span id="local-6989586621679585642"><span class="annot"><span class="annottext">Context -&gt; DSEnv -&gt; IO (Maybe ThunkInfo)
Proxy DSEnv -&gt; String
(Context -&gt; DSEnv -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; DSEnv -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy DSEnv -&gt; String)
-&gt; NoThunks DSEnv
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy DSEnv -&gt; String
$cshowTypeOf :: Proxy DSEnv -&gt; String
wNoThunks :: Context -&gt; DSEnv -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; DSEnv -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; DSEnv -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; DSEnv -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679585638"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-245"></span><span>
</span><span id="line-246"></span><span id="k"><span id="local-6989586621679585630"><span id="local-6989586621679585632"><span id="local-6989586621679585634"><span id="local-6989586621679585636"><span id="epoch"><span id="slot"><span id="allowedDelegators"><span id="local-6989586621679586318"><span id="local-6989586621679586319"><span id="local-6989586621679586320"><span id="local-6989586621679586321"><span id="local-6989586621679586322"><span id="local-6989586621679586323"><span id="local-6989586621679586324"><span id="local-6989586621679586325"><span id="HasEpoch"><span id="HasSlot"><span id="HasK"><span id="HasAllowedDelegators"><span class="hs-identifier">makeFields</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">DSEnv</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-247"></span><span>
</span><span id="line-248"></span><span class="hs-comment">-- | Delegation scheduling state</span><span>
</span><span id="line-249"></span><span id="local-6989586621679585623"><span id="local-6989586621679585624"></span></span><span class="hs-keyword">data</span><span> </span><span id="DSState"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSState"><span class="hs-identifier hs-var">DSState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DSState"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSState"><span class="hs-identifier hs-var">DSState</span></a></span></span><span>
</span><span id="line-250"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_dSStateScheduledDelegations"><span class="annot"><span class="annottext">DSState -&gt; [(Slot, (VKeyGenesis, VKey))]
</span><a href="Byron.Spec.Ledger.Delegation.html#_dSStateScheduledDelegations"><span class="hs-identifier hs-var hs-var">_dSStateScheduledDelegations</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Slot</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-251"></span><span>    </span><span id="_dSStateKeyEpochDelegations"><span class="annot"><span class="annottext">DSState -&gt; Set (Epoch, VKeyGenesis)
</span><a href="Byron.Spec.Ledger.Delegation.html#_dSStateKeyEpochDelegations"><span class="hs-identifier hs-var hs-var">_dSStateKeyEpochDelegations</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-253"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679585617"><span id="local-6989586621679585619"><span id="local-6989586621679585621"><span class="annot"><span class="annottext">Int -&gt; DSState -&gt; ShowS
[DSState] -&gt; ShowS
DSState -&gt; String
(Int -&gt; DSState -&gt; ShowS)
-&gt; (DSState -&gt; String) -&gt; ([DSState] -&gt; ShowS) -&gt; Show DSState
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [DSState] -&gt; ShowS
$cshowList :: [DSState] -&gt; ShowS
show :: DSState -&gt; String
$cshow :: DSState -&gt; String
showsPrec :: Int -&gt; DSState -&gt; ShowS
$cshowsPrec :: Int -&gt; DSState -&gt; ShowS
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679585613"><span id="local-6989586621679585615"><span class="annot"><span class="annottext">DSState -&gt; DSState -&gt; Bool
(DSState -&gt; DSState -&gt; Bool)
-&gt; (DSState -&gt; DSState -&gt; Bool) -&gt; Eq DSState
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: DSState -&gt; DSState -&gt; Bool
$c/= :: DSState -&gt; DSState -&gt; Bool
== :: DSState -&gt; DSState -&gt; Bool
$c== :: DSState -&gt; DSState -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. DSState -&gt; Rep DSState x)
-&gt; (forall x. Rep DSState x -&gt; DSState) -&gt; Generic DSState
forall x. Rep DSState x -&gt; DSState
forall x. DSState -&gt; Rep DSState x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep DSState x -&gt; DSState
$cfrom :: forall x. DSState -&gt; Rep DSState x
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679585605"><span id="local-6989586621679585607"><span id="local-6989586621679585609"><span class="annot"><span class="annottext">Context -&gt; DSState -&gt; IO (Maybe ThunkInfo)
Proxy DSState -&gt; String
(Context -&gt; DSState -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; DSState -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy DSState -&gt; String)
-&gt; NoThunks DSState
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy DSState -&gt; String
$cshowTypeOf :: Proxy DSState -&gt; String
wNoThunks :: Context -&gt; DSState -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; DSState -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; DSState -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; DSState -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679585605"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-254"></span><span>
</span><span id="line-255"></span><span id="keyEpochDelegations"><span id="local-6989586621679585601"><span id="local-6989586621679585603"><span id="scheduledDelegations"><span id="local-6989586621679586307"><span id="local-6989586621679586308"><span id="local-6989586621679586309"><span id="local-6989586621679586310"><span id="HasKeyEpochDelegations"><span id="HasScheduledDelegations"><span class="hs-identifier">makeFields</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">DSState</span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-256"></span><span>
</span><span id="line-257"></span><span class="hs-comment">-- | Delegation state</span><span>
</span><span id="line-258"></span><span id="local-6989586621679585596"><span id="local-6989586621679585597"></span></span><span class="hs-keyword">data</span><span> </span><span id="DState"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DState"><span class="hs-identifier hs-var">DState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DState"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DState"><span class="hs-identifier hs-var">DState</span></a></span></span><span>
</span><span id="line-259"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_dStateDelegationMap"><span class="annot"><span class="annottext">DState -&gt; Bimap VKeyGenesis VKey
</span><a href="Byron.Spec.Ledger.Delegation.html#_dStateDelegationMap"><span class="hs-identifier hs-var hs-var">_dStateDelegationMap</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../bimap/html/src"><span class="hs-identifier hs-type">Bimap</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-260"></span><span>    </span><span class="hs-comment">-- | When was the last time each genesis key delegated.</span><span>
</span><span id="line-261"></span><span>    </span><span id="_dStateLastDelegation"><span class="annot"><span class="annottext">DState -&gt; Map VKeyGenesis Slot
</span><a href="Byron.Spec.Ledger.Delegation.html#_dStateLastDelegation"><span class="hs-identifier hs-var hs-var">_dStateLastDelegation</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Slot</span></a></span><span>
</span><span id="line-262"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-263"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679585592"><span id="local-6989586621679585594"><span class="annot"><span class="annottext">DState -&gt; DState -&gt; Bool
(DState -&gt; DState -&gt; Bool)
-&gt; (DState -&gt; DState -&gt; Bool) -&gt; Eq DState
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: DState -&gt; DState -&gt; Bool
$c/= :: DState -&gt; DState -&gt; Bool
== :: DState -&gt; DState -&gt; Bool
$c== :: DState -&gt; DState -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679585586"><span id="local-6989586621679585588"><span id="local-6989586621679585590"><span class="annot"><span class="annottext">Int -&gt; DState -&gt; ShowS
[DState] -&gt; ShowS
DState -&gt; String
(Int -&gt; DState -&gt; ShowS)
-&gt; (DState -&gt; String) -&gt; ([DState] -&gt; ShowS) -&gt; Show DState
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [DState] -&gt; ShowS
$cshowList :: [DState] -&gt; ShowS
show :: DState -&gt; String
$cshow :: DState -&gt; String
showsPrec :: Int -&gt; DState -&gt; ShowS
$cshowsPrec :: Int -&gt; DState -&gt; ShowS
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. DState -&gt; Rep DState x)
-&gt; (forall x. Rep DState x -&gt; DState) -&gt; Generic DState
forall x. Rep DState x -&gt; DState
forall x. DState -&gt; Rep DState x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep DState x -&gt; DState
$cfrom :: forall x. DState -&gt; Rep DState x
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-264"></span><span>
</span><span id="line-265"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679585579"><span id="local-6989586621679585582"><span class="annot"><a href="../../../../nothunks/html/src"><span class="hs-identifier hs-type">NoThunks</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DState"><span class="hs-identifier hs-type">DState</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-266"></span><span>  </span><span id="local-6989586621679585578"><span class="annot"><span class="annottext">wNoThunks :: Context -&gt; DState -&gt; IO (Maybe ThunkInfo)
</span><a href="../../../../nothunks/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">wNoThunks</span></a></span></span><span> </span><span id="local-6989586621679585576"><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679585576"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span id="local-6989586621679585575"><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><a href="#local-6989586621679585575"><span class="hs-identifier hs-var">dmap</span></a></span></span><span> </span><span id="local-6989586621679585574"><span class="annot"><span class="annottext">Map VKeyGenesis Slot
</span><a href="#local-6989586621679585574"><span class="hs-identifier hs-var">lastDeleg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-267"></span><span>    </span><span class="annot"><span class="annottext">[IO (Maybe ThunkInfo)] -&gt; IO (Maybe ThunkInfo)
</span><a href="../../../../nothunks/html/src"><span class="hs-identifier hs-var">allNoThunks</span></a></span><span>
</span><span id="line-268"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Context -&gt; [(VKeyGenesis, VKey)] -&gt; IO (Maybe ThunkInfo)
forall k v.
(NoThunks k, NoThunks v) =&gt;
Context -&gt; [(k, v)] -&gt; IO (Maybe ThunkInfo)
</span><a href="../../../../nothunks/html/src"><span class="hs-identifier hs-var">noThunksInKeysAndValues</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679585576"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">([(VKeyGenesis, VKey)] -&gt; IO (Maybe ThunkInfo))
-&gt; [(VKeyGenesis, VKey)] -&gt; IO (Maybe ThunkInfo)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey -&gt; [(VKeyGenesis, VKey)]
forall a b. Bimap a b -&gt; [(a, b)]
</span><a href="../../../../bimap/html/src"><span class="hs-identifier hs-var">Bimap.toList</span></a></span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><a href="#local-6989586621679585575"><span class="hs-identifier hs-var">dmap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-269"></span><span>        </span><span class="annot"><span class="annottext">Context -&gt; [(VKeyGenesis, Slot)] -&gt; IO (Maybe ThunkInfo)
forall k v.
(NoThunks k, NoThunks v) =&gt;
Context -&gt; [(k, v)] -&gt; IO (Maybe ThunkInfo)
</span><a href="../../../../nothunks/html/src"><span class="hs-identifier hs-var">noThunksInKeysAndValues</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679585576"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">([(VKeyGenesis, Slot)] -&gt; IO (Maybe ThunkInfo))
-&gt; [(VKeyGenesis, Slot)] -&gt; IO (Maybe ThunkInfo)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Map VKeyGenesis Slot -&gt; [(VKeyGenesis, Slot)]
forall k a. Map k a -&gt; [(k, a)]
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Map.toList</span></a></span><span> </span><span class="annot"><span class="annottext">Map VKeyGenesis Slot
</span><a href="#local-6989586621679585574"><span class="hs-identifier hs-var">lastDeleg</span></a></span><span>
</span><span id="line-270"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-271"></span><span>
</span><span id="line-272"></span><span id="lastDelegation"><span id="local-6989586621679585568"><span id="local-6989586621679585570"><span id="delegationMap"><span id="local-6989586621679586285"><span id="local-6989586621679586286"><span id="local-6989586621679586287"><span id="local-6989586621679586288"><span id="HasDelegationMap"><span id="HasLastDelegation"><span class="hs-identifier">makeFields</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">DState</span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-273"></span><span>
</span><span id="line-274"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#delegatorOf"><span class="hs-identifier hs-type">delegatorOf</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../bimap/html/src"><span class="hs-identifier hs-type">Bimap</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span>
</span><span id="line-275"></span><span id="delegatorOf"><span class="annot"><span class="annottext">delegatorOf :: Bimap VKeyGenesis VKey -&gt; VKey -&gt; Maybe VKeyGenesis
</span><a href="Byron.Spec.Ledger.Delegation.html#delegatorOf"><span class="hs-identifier hs-var hs-var">delegatorOf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(VKey -&gt; Bimap VKeyGenesis VKey -&gt; Maybe VKeyGenesis)
-&gt; Bimap VKeyGenesis VKey -&gt; VKey -&gt; Maybe VKeyGenesis
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">VKey -&gt; Bimap VKeyGenesis VKey -&gt; Maybe VKeyGenesis
forall a b (m :: * -&gt; *).
(Ord a, Ord b, MonadThrow m) =&gt;
b -&gt; Bimap a b -&gt; m a
</span><a href="../../../../bimap/html/src"><span class="hs-identifier hs-var">Bimap.lookupR</span></a></span><span>
</span><span id="line-276"></span><span>
</span><span id="line-277"></span><span class="hs-comment">-- | Interface environment is the same as scheduling environment.</span><span>
</span><span id="line-278"></span><span class="hs-keyword">type</span><span> </span><span id="DIEnv"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DIEnv"><span class="hs-identifier hs-var">DIEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSEnv"><span class="hs-identifier hs-type">DSEnv</span></a></span><span>
</span><span id="line-279"></span><span>
</span><span id="line-280"></span><span id="local-6989586621679585561"><span id="local-6989586621679585562"></span></span><span class="hs-keyword">data</span><span> </span><span id="DIState"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DIState"><span class="hs-identifier hs-var">DIState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DIState"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DIState"><span class="hs-identifier hs-var">DIState</span></a></span></span><span>
</span><span id="line-281"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_dIStateDelegationMap"><span class="annot"><span class="annottext">DIState -&gt; Bimap VKeyGenesis VKey
</span><a href="Byron.Spec.Ledger.Delegation.html#_dIStateDelegationMap"><span class="hs-identifier hs-var hs-var">_dIStateDelegationMap</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../bimap/html/src"><span class="hs-identifier hs-type">Bimap</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-282"></span><span>    </span><span id="_dIStateLastDelegation"><span class="annot"><span class="annottext">DIState -&gt; Map VKeyGenesis Slot
</span><a href="Byron.Spec.Ledger.Delegation.html#_dIStateLastDelegation"><span class="hs-identifier hs-var hs-var">_dIStateLastDelegation</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Slot</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-283"></span><span>    </span><span id="_dIStateScheduledDelegations"><span class="annot"><span class="annottext">DIState -&gt; [(Slot, (VKeyGenesis, VKey))]
</span><a href="Byron.Spec.Ledger.Delegation.html#_dIStateScheduledDelegations"><span class="hs-identifier hs-var hs-var">_dIStateScheduledDelegations</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Slot</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-284"></span><span>    </span><span id="_dIStateKeyEpochDelegations"><span class="annot"><span class="annottext">DIState -&gt; Set (Epoch, VKeyGenesis)
</span><a href="Byron.Spec.Ledger.Delegation.html#_dIStateKeyEpochDelegations"><span class="hs-identifier hs-var hs-var">_dIStateKeyEpochDelegations</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-285"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-286"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679585555"><span id="local-6989586621679585557"><span id="local-6989586621679585559"><span class="annot"><span class="annottext">Int -&gt; DIState -&gt; ShowS
[DIState] -&gt; ShowS
DIState -&gt; String
(Int -&gt; DIState -&gt; ShowS)
-&gt; (DIState -&gt; String) -&gt; ([DIState] -&gt; ShowS) -&gt; Show DIState
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [DIState] -&gt; ShowS
$cshowList :: [DIState] -&gt; ShowS
show :: DIState -&gt; String
$cshow :: DIState -&gt; String
showsPrec :: Int -&gt; DIState -&gt; ShowS
$cshowsPrec :: Int -&gt; DIState -&gt; ShowS
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679585551"><span id="local-6989586621679585553"><span class="annot"><span class="annottext">DIState -&gt; DIState -&gt; Bool
(DIState -&gt; DIState -&gt; Bool)
-&gt; (DIState -&gt; DIState -&gt; Bool) -&gt; Eq DIState
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: DIState -&gt; DIState -&gt; Bool
$c/= :: DIState -&gt; DIState -&gt; Bool
== :: DIState -&gt; DIState -&gt; Bool
$c== :: DIState -&gt; DIState -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. DIState -&gt; Rep DIState x)
-&gt; (forall x. Rep DIState x -&gt; DIState) -&gt; Generic DIState
forall x. Rep DIState x -&gt; DIState
forall x. DIState -&gt; Rep DIState x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep DIState x -&gt; DIState
$cfrom :: forall x. DIState -&gt; Rep DIState x
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-287"></span><span>
</span><span id="line-288"></span><span id="local-6989586621679585541"><span id="local-6989586621679585543"><span id="local-6989586621679585545"><span id="local-6989586621679585547"><span class="hs-identifier">makeFields</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">DIState</span></span></span></span></span><span>
</span><span id="line-289"></span><span>
</span><span id="line-290"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679585536"><span id="local-6989586621679585539"><span class="annot"><a href="../../../../nothunks/html/src"><span class="hs-identifier hs-type">NoThunks</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DIState"><span class="hs-identifier hs-type">DIState</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-291"></span><span>  </span><span id="local-6989586621679585535"><span class="annot"><span class="annottext">wNoThunks :: Context -&gt; DIState -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679585535"><span class="hs-identifier hs-var hs-var hs-var hs-var">wNoThunks</span></a></span></span><span> </span><span id="local-6989586621679585534"><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679585534"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DIState"><span class="hs-identifier hs-type">DIState</span></a></span><span> </span><span id="local-6989586621679585533"><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><a href="#local-6989586621679585533"><span class="hs-identifier hs-var">dmap</span></a></span></span><span> </span><span id="local-6989586621679585532"><span class="annot"><span class="annottext">Map VKeyGenesis Slot
</span><a href="#local-6989586621679585532"><span class="hs-identifier hs-var">lastDeleg</span></a></span></span><span> </span><span id="local-6989586621679585531"><span class="annot"><span class="annottext">[(Slot, (VKeyGenesis, VKey))]
</span><a href="#local-6989586621679585531"><span class="hs-identifier hs-var">sds</span></a></span></span><span> </span><span id="local-6989586621679585530"><span class="annot"><span class="annottext">Set (Epoch, VKeyGenesis)
</span><a href="#local-6989586621679585530"><span class="hs-identifier hs-var">sked</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-292"></span><span>    </span><span class="annot"><span class="annottext">[IO (Maybe ThunkInfo)] -&gt; IO (Maybe ThunkInfo)
</span><a href="../../../../nothunks/html/src"><span class="hs-identifier hs-var">allNoThunks</span></a></span><span>
</span><span id="line-293"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Context -&gt; [(VKeyGenesis, VKey)] -&gt; IO (Maybe ThunkInfo)
forall k v.
(NoThunks k, NoThunks v) =&gt;
Context -&gt; [(k, v)] -&gt; IO (Maybe ThunkInfo)
</span><a href="../../../../nothunks/html/src"><span class="hs-identifier hs-var">noThunksInKeysAndValues</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679585534"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">([(VKeyGenesis, VKey)] -&gt; IO (Maybe ThunkInfo))
-&gt; [(VKeyGenesis, VKey)] -&gt; IO (Maybe ThunkInfo)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey -&gt; [(VKeyGenesis, VKey)]
forall a b. Bimap a b -&gt; [(a, b)]
</span><a href="../../../../bimap/html/src"><span class="hs-identifier hs-var">Bimap.toList</span></a></span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><a href="#local-6989586621679585533"><span class="hs-identifier hs-var">dmap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-294"></span><span>        </span><span class="annot"><span class="annottext">Context -&gt; [(VKeyGenesis, Slot)] -&gt; IO (Maybe ThunkInfo)
forall k v.
(NoThunks k, NoThunks v) =&gt;
Context -&gt; [(k, v)] -&gt; IO (Maybe ThunkInfo)
</span><a href="../../../../nothunks/html/src"><span class="hs-identifier hs-var">noThunksInKeysAndValues</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679585534"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">([(VKeyGenesis, Slot)] -&gt; IO (Maybe ThunkInfo))
-&gt; [(VKeyGenesis, Slot)] -&gt; IO (Maybe ThunkInfo)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Map VKeyGenesis Slot -&gt; [(VKeyGenesis, Slot)]
forall k a. Map k a -&gt; [(k, a)]
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Map.toList</span></a></span><span> </span><span class="annot"><span class="annottext">Map VKeyGenesis Slot
</span><a href="#local-6989586621679585532"><span class="hs-identifier hs-var">lastDeleg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-295"></span><span>        </span><span class="annot"><span class="annottext">Context -&gt; [(Slot, (VKeyGenesis, VKey))] -&gt; IO (Maybe ThunkInfo)
forall a. NoThunks a =&gt; Context -&gt; a -&gt; IO (Maybe ThunkInfo)
</span><a href="../../../../nothunks/html/src"><span class="hs-identifier hs-var">wNoThunks</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679585534"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">[(Slot, (VKeyGenesis, VKey))]
</span><a href="#local-6989586621679585531"><span class="hs-identifier hs-var">sds</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-296"></span><span>        </span><span class="annot"><span class="annottext">Context -&gt; Set (Epoch, VKeyGenesis) -&gt; IO (Maybe ThunkInfo)
forall a. NoThunks a =&gt; Context -&gt; a -&gt; IO (Maybe ThunkInfo)
</span><a href="../../../../nothunks/html/src"><span class="hs-identifier hs-var">wNoThunks</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679585534"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Set (Epoch, VKeyGenesis)
</span><a href="#local-6989586621679585530"><span class="hs-identifier hs-var">sked</span></a></span><span>
</span><span id="line-297"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-298"></span><span>
</span><span id="line-299"></span><span id="local-6989586621679585529"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#dmsL"><span class="hs-identifier hs-type">dmsL</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-300"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#HasDelegationMap"><span class="hs-identifier hs-type">HasDelegationMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679585529"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../bimap/html/src"><span class="hs-identifier hs-type">Bimap</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-301"></span><span>  </span><span class="annot"><a href="../../../../microlens/html/src"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679585529"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../bimap/html/src"><span class="hs-identifier hs-type">Bimap</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-302"></span><span id="dmsL"><span class="annot"><span class="annottext">dmsL :: Lens' a (Bimap VKeyGenesis VKey)
</span><a href="Byron.Spec.Ledger.Delegation.html#dmsL"><span class="hs-identifier hs-var hs-var">dmsL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Bimap VKeyGenesis VKey -&gt; f (Bimap VKeyGenesis VKey)) -&gt; a -&gt; f a
forall s a. HasDelegationMap s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#delegationMap"><span class="hs-identifier hs-var">delegationMap</span></a></span><span>
</span><span id="line-303"></span><span>
</span><span id="line-304"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#dIStateDSState"><span class="hs-identifier hs-type">dIStateDSState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../microlens/html/src"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DIState"><span class="hs-identifier hs-type">DIState</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSState"><span class="hs-identifier hs-type">DSState</span></a></span><span>
</span><span id="line-305"></span><span id="dIStateDSState"><span class="annot"><span class="annottext">dIStateDSState :: (DSState -&gt; f DSState) -&gt; DIState -&gt; f DIState
</span><a href="Byron.Spec.Ledger.Delegation.html#dIStateDSState"><span class="hs-identifier hs-var hs-var">dIStateDSState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-306"></span><span>  </span><span class="annot"><span class="annottext">(DIState -&gt; DSState)
-&gt; (DIState -&gt; DSState -&gt; DIState)
-&gt; Lens DIState DIState DSState DSState
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><a href="../../../../microlens/html/src"><span class="hs-identifier hs-var">lens</span></a></span><span>
</span><span id="line-307"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679585527"><span class="annot"><span class="annottext">DIState
</span><a href="#local-6989586621679585527"><span class="hs-identifier hs-var">dis</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[(Slot, (VKeyGenesis, VKey))]
-&gt; Set (Epoch, VKeyGenesis) -&gt; DSState
</span><a href="Byron.Spec.Ledger.Delegation.html#DSState"><span class="hs-identifier hs-var">DSState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DIState
</span><a href="#local-6989586621679585527"><span class="hs-identifier hs-var">dis</span></a></span><span> </span><span class="annot"><span class="annottext">DIState
-&gt; Getting
     [(Slot, (VKeyGenesis, VKey))] DIState [(Slot, (VKeyGenesis, VKey))]
-&gt; [(Slot, (VKeyGenesis, VKey))]
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting
  [(Slot, (VKeyGenesis, VKey))] DIState [(Slot, (VKeyGenesis, VKey))]
forall s a. HasScheduledDelegations s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#scheduledDelegations"><span class="hs-identifier hs-var">scheduledDelegations</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DIState
</span><a href="#local-6989586621679585527"><span class="hs-identifier hs-var">dis</span></a></span><span> </span><span class="annot"><span class="annottext">DIState
-&gt; Getting
     (Set (Epoch, VKeyGenesis)) DIState (Set (Epoch, VKeyGenesis))
-&gt; Set (Epoch, VKeyGenesis)
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting
  (Set (Epoch, VKeyGenesis)) DIState (Set (Epoch, VKeyGenesis))
forall s a. HasKeyEpochDelegations s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#keyEpochDelegations"><span class="hs-identifier hs-var">keyEpochDelegations</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-308"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679585526"><span class="annot"><span class="annottext">DIState
</span><a href="#local-6989586621679585526"><span class="hs-identifier hs-var">dis</span></a></span></span><span> </span><span id="local-6989586621679585525"><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679585525"><span class="hs-identifier hs-var">dss</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-309"></span><span>        </span><span class="annot"><span class="annottext">DIState
</span><a href="#local-6989586621679585526"><span class="hs-identifier hs-var">dis</span></a></span><span>
</span><span id="line-310"></span><span>          </span><span class="annot"><span class="annottext">DIState -&gt; (DIState -&gt; DIState) -&gt; DIState
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">([(Slot, (VKeyGenesis, VKey))]
 -&gt; Identity [(Slot, (VKeyGenesis, VKey))])
-&gt; DIState -&gt; Identity DIState
forall s a. HasScheduledDelegations s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#scheduledDelegations"><span class="hs-identifier hs-var">scheduledDelegations</span></a></span><span>
</span><span id="line-311"></span><span>          </span><span class="annot"><span class="annottext">(([(Slot, (VKeyGenesis, VKey))]
  -&gt; Identity [(Slot, (VKeyGenesis, VKey))])
 -&gt; DIState -&gt; Identity DIState)
-&gt; [(Slot, (VKeyGenesis, VKey))] -&gt; DIState -&gt; DIState
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679585525"><span class="hs-identifier hs-var">dss</span></a></span><span>
</span><span id="line-312"></span><span>          </span><span class="annot"><span class="annottext">DSState
-&gt; Getting
     [(Slot, (VKeyGenesis, VKey))] DSState [(Slot, (VKeyGenesis, VKey))]
-&gt; [(Slot, (VKeyGenesis, VKey))]
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting
  [(Slot, (VKeyGenesis, VKey))] DSState [(Slot, (VKeyGenesis, VKey))]
forall s a. HasScheduledDelegations s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#scheduledDelegations"><span class="hs-identifier hs-var">scheduledDelegations</span></a></span><span>
</span><span id="line-313"></span><span>          </span><span class="annot"><span class="annottext">DIState -&gt; (DIState -&gt; DIState) -&gt; DIState
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(Set (Epoch, VKeyGenesis) -&gt; Identity (Set (Epoch, VKeyGenesis)))
-&gt; DIState -&gt; Identity DIState
forall s a. HasKeyEpochDelegations s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#keyEpochDelegations"><span class="hs-identifier hs-var">keyEpochDelegations</span></a></span><span>
</span><span id="line-314"></span><span>          </span><span class="annot"><span class="annottext">((Set (Epoch, VKeyGenesis) -&gt; Identity (Set (Epoch, VKeyGenesis)))
 -&gt; DIState -&gt; Identity DIState)
-&gt; Set (Epoch, VKeyGenesis) -&gt; DIState -&gt; DIState
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679585525"><span class="hs-identifier hs-var">dss</span></a></span><span>
</span><span id="line-315"></span><span>          </span><span class="annot"><span class="annottext">DSState
-&gt; Getting
     (Set (Epoch, VKeyGenesis)) DSState (Set (Epoch, VKeyGenesis))
-&gt; Set (Epoch, VKeyGenesis)
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting
  (Set (Epoch, VKeyGenesis)) DSState (Set (Epoch, VKeyGenesis))
forall s a. HasKeyEpochDelegations s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#keyEpochDelegations"><span class="hs-identifier hs-var">keyEpochDelegations</span></a></span><span>
</span><span id="line-316"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-317"></span><span>
</span><span id="line-318"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#dIStateDState"><span class="hs-identifier hs-type">dIStateDState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../microlens/html/src"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DIState"><span class="hs-identifier hs-type">DIState</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span>
</span><span id="line-319"></span><span id="dIStateDState"><span class="annot"><span class="annottext">dIStateDState :: (DState -&gt; f DState) -&gt; DIState -&gt; f DIState
</span><a href="Byron.Spec.Ledger.Delegation.html#dIStateDState"><span class="hs-identifier hs-var hs-var">dIStateDState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-320"></span><span>  </span><span class="annot"><span class="annottext">(DIState -&gt; DState)
-&gt; (DIState -&gt; DState -&gt; DIState)
-&gt; Lens DIState DIState DState DState
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><a href="../../../../microlens/html/src"><span class="hs-identifier hs-var">lens</span></a></span><span>
</span><span id="line-321"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679585523"><span class="annot"><span class="annottext">DIState
</span><a href="#local-6989586621679585523"><span class="hs-identifier hs-var">dis</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey -&gt; Map VKeyGenesis Slot -&gt; DState
</span><a href="Byron.Spec.Ledger.Delegation.html#DState"><span class="hs-identifier hs-var">DState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DIState
</span><a href="#local-6989586621679585523"><span class="hs-identifier hs-var">dis</span></a></span><span> </span><span class="annot"><span class="annottext">DIState
-&gt; Getting
     (Bimap VKeyGenesis VKey) DIState (Bimap VKeyGenesis VKey)
-&gt; Bimap VKeyGenesis VKey
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (Bimap VKeyGenesis VKey) DIState (Bimap VKeyGenesis VKey)
forall s a. HasDelegationMap s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#delegationMap"><span class="hs-identifier hs-var">delegationMap</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DIState
</span><a href="#local-6989586621679585523"><span class="hs-identifier hs-var">dis</span></a></span><span> </span><span class="annot"><span class="annottext">DIState
-&gt; Getting (Map VKeyGenesis Slot) DIState (Map VKeyGenesis Slot)
-&gt; Map VKeyGenesis Slot
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (Map VKeyGenesis Slot) DIState (Map VKeyGenesis Slot)
forall s a. HasLastDelegation s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#lastDelegation"><span class="hs-identifier hs-var">lastDelegation</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-322"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679585522"><span class="annot"><span class="annottext">DIState
</span><a href="#local-6989586621679585522"><span class="hs-identifier hs-var">dis</span></a></span></span><span> </span><span id="local-6989586621679585521"><span class="annot"><span class="annottext">DState
</span><a href="#local-6989586621679585521"><span class="hs-identifier hs-var">dss</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-323"></span><span>        </span><span class="annot"><span class="annottext">DIState
</span><a href="#local-6989586621679585522"><span class="hs-identifier hs-var">dis</span></a></span><span>
</span><span id="line-324"></span><span>          </span><span class="annot"><span class="annottext">DIState -&gt; (DIState -&gt; DIState) -&gt; DIState
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(Bimap VKeyGenesis VKey -&gt; Identity (Bimap VKeyGenesis VKey))
-&gt; DIState -&gt; Identity DIState
forall s a. HasDelegationMap s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#delegationMap"><span class="hs-identifier hs-var">delegationMap</span></a></span><span>
</span><span id="line-325"></span><span>          </span><span class="annot"><span class="annottext">((Bimap VKeyGenesis VKey -&gt; Identity (Bimap VKeyGenesis VKey))
 -&gt; DIState -&gt; Identity DIState)
-&gt; Bimap VKeyGenesis VKey -&gt; DIState -&gt; DIState
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">DState
</span><a href="#local-6989586621679585521"><span class="hs-identifier hs-var">dss</span></a></span><span>
</span><span id="line-326"></span><span>          </span><span class="annot"><span class="annottext">DState
-&gt; Getting (Bimap VKeyGenesis VKey) DState (Bimap VKeyGenesis VKey)
-&gt; Bimap VKeyGenesis VKey
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (Bimap VKeyGenesis VKey) DState (Bimap VKeyGenesis VKey)
forall s a. HasDelegationMap s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#delegationMap"><span class="hs-identifier hs-var">delegationMap</span></a></span><span>
</span><span id="line-327"></span><span>          </span><span class="annot"><span class="annottext">DIState -&gt; (DIState -&gt; DIState) -&gt; DIState
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(Map VKeyGenesis Slot -&gt; Identity (Map VKeyGenesis Slot))
-&gt; DIState -&gt; Identity DIState
forall s a. HasLastDelegation s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#lastDelegation"><span class="hs-identifier hs-var">lastDelegation</span></a></span><span>
</span><span id="line-328"></span><span>          </span><span class="annot"><span class="annottext">((Map VKeyGenesis Slot -&gt; Identity (Map VKeyGenesis Slot))
 -&gt; DIState -&gt; Identity DIState)
-&gt; Map VKeyGenesis Slot -&gt; DIState -&gt; DIState
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">DState
</span><a href="#local-6989586621679585521"><span class="hs-identifier hs-var">dss</span></a></span><span>
</span><span id="line-329"></span><span>          </span><span class="annot"><span class="annottext">DState
-&gt; Getting (Map VKeyGenesis Slot) DState (Map VKeyGenesis Slot)
-&gt; Map VKeyGenesis Slot
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (Map VKeyGenesis Slot) DState (Map VKeyGenesis Slot)
forall s a. HasLastDelegation s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#lastDelegation"><span class="hs-identifier hs-var">lastDelegation</span></a></span><span>
</span><span id="line-330"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-331"></span><span>
</span><span id="line-332"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-333"></span><span class="hs-comment">-- Transition systems</span><span>
</span><span id="line-334"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-335"></span><span>
</span><span id="line-336"></span><span class="hs-comment">-- | Delegation scheduling rules</span><span>
</span><span id="line-337"></span><span class="hs-keyword">data</span><span> </span><span id="SDELEG"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEG"><span class="hs-identifier hs-var">SDELEG</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="%24tSDELEG"><span id="local-6989586621679585492"><span id="local-6989586621679585494"><span id="local-6989586621679585496"><span id="local-6989586621679585498"><span id="local-6989586621679585500"><span id="local-6989586621679585502"><span id="local-6989586621679585504"><span id="local-6989586621679585506"><span id="local-6989586621679585508"><span id="local-6989586621679585510"><span id="local-6989586621679585512"><span id="local-6989586621679585514"><span id="local-6989586621679585516"><span id="local-6989586621679585518"><span class="annot"><span class="annottext">Typeable SDELEG
DataType
Typeable SDELEG
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; SDELEG -&gt; c SDELEG)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SDELEG)
-&gt; (SDELEG -&gt; Constr)
-&gt; (SDELEG -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c SDELEG))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c SDELEG))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; SDELEG -&gt; SDELEG)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SDELEG -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SDELEG -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; SDELEG -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; SDELEG -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEG -&gt; m SDELEG)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEG -&gt; m SDELEG)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEG -&gt; m SDELEG)
-&gt; Data SDELEG
SDELEG -&gt; DataType
SDELEG -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; SDELEG -&gt; SDELEG
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; SDELEG -&gt; c SDELEG
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SDELEG
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; SDELEG -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; SDELEG -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SDELEG -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SDELEG -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEG -&gt; m SDELEG
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEG -&gt; m SDELEG
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SDELEG
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; SDELEG -&gt; c SDELEG
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c SDELEG)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c SDELEG)
$tSDELEG :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEG -&gt; m SDELEG
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEG -&gt; m SDELEG
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEG -&gt; m SDELEG
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEG -&gt; m SDELEG
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEG -&gt; m SDELEG
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEG -&gt; m SDELEG
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; SDELEG -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; SDELEG -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; SDELEG -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; SDELEG -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SDELEG -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SDELEG -&gt; r
gmapQl :: (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SDELEG -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SDELEG -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; SDELEG -&gt; SDELEG
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; SDELEG -&gt; SDELEG
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c SDELEG)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c SDELEG)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c SDELEG)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c SDELEG)
dataTypeOf :: SDELEG -&gt; DataType
$cdataTypeOf :: SDELEG -&gt; DataType
toConstr :: SDELEG -&gt; Constr
$ctoConstr :: SDELEG -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SDELEG
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SDELEG
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; SDELEG -&gt; c SDELEG
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; SDELEG -&gt; c SDELEG
$cp1Data :: Typeable SDELEG
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-338"></span><span>
</span><span id="line-339"></span><span id="local-6989586621679585489"><span id="local-6989586621679585490"></span></span><span class="hs-keyword">data</span><span> </span><span id="EpochDiff"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#EpochDiff"><span class="hs-identifier hs-var">EpochDiff</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="EpochDiff"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#EpochDiff"><span class="hs-identifier hs-var">EpochDiff</span></a></span></span><span> </span><span class="hs-special">{</span><span id="currentEpoch"><span class="annot"><span class="annottext">EpochDiff -&gt; Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#currentEpoch"><span class="hs-identifier hs-var hs-var">currentEpoch</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span class="hs-special">,</span><span> </span><span id="certEpoch"><span class="annot"><span class="annottext">EpochDiff -&gt; Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#certEpoch"><span class="hs-identifier hs-var hs-var">certEpoch</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-340"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679585482"><span id="local-6989586621679585484"><span class="annot"><span class="annottext">EpochDiff -&gt; EpochDiff -&gt; Bool
(EpochDiff -&gt; EpochDiff -&gt; Bool)
-&gt; (EpochDiff -&gt; EpochDiff -&gt; Bool) -&gt; Eq EpochDiff
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: EpochDiff -&gt; EpochDiff -&gt; Bool
$c/= :: EpochDiff -&gt; EpochDiff -&gt; Bool
== :: EpochDiff -&gt; EpochDiff -&gt; Bool
$c== :: EpochDiff -&gt; EpochDiff -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679585476"><span id="local-6989586621679585478"><span id="local-6989586621679585480"><span class="annot"><span class="annottext">Int -&gt; EpochDiff -&gt; ShowS
[EpochDiff] -&gt; ShowS
EpochDiff -&gt; String
(Int -&gt; EpochDiff -&gt; ShowS)
-&gt; (EpochDiff -&gt; String)
-&gt; ([EpochDiff] -&gt; ShowS)
-&gt; Show EpochDiff
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [EpochDiff] -&gt; ShowS
$cshowList :: [EpochDiff] -&gt; ShowS
show :: EpochDiff -&gt; String
$cshow :: EpochDiff -&gt; String
showsPrec :: Int -&gt; EpochDiff -&gt; ShowS
$cshowsPrec :: Int -&gt; EpochDiff -&gt; ShowS
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cEpochDiff"><span id="%24tEpochDiff"><span id="local-6989586621679585447"><span id="local-6989586621679585449"><span id="local-6989586621679585451"><span id="local-6989586621679585453"><span id="local-6989586621679585455"><span id="local-6989586621679585457"><span id="local-6989586621679585459"><span id="local-6989586621679585461"><span id="local-6989586621679585463"><span id="local-6989586621679585465"><span id="local-6989586621679585467"><span id="local-6989586621679585469"><span id="local-6989586621679585471"><span id="local-6989586621679585473"><span class="annot"><span class="annottext">Typeable EpochDiff
DataType
Constr
Typeable EpochDiff
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; EpochDiff -&gt; c EpochDiff)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c EpochDiff)
-&gt; (EpochDiff -&gt; Constr)
-&gt; (EpochDiff -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c EpochDiff))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c EpochDiff))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; EpochDiff -&gt; EpochDiff)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EpochDiff -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EpochDiff -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; EpochDiff -&gt; [u])
-&gt; (forall u.
    Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; EpochDiff -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; EpochDiff -&gt; m EpochDiff)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; EpochDiff -&gt; m EpochDiff)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; EpochDiff -&gt; m EpochDiff)
-&gt; Data EpochDiff
EpochDiff -&gt; DataType
EpochDiff -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; EpochDiff -&gt; EpochDiff
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; EpochDiff -&gt; c EpochDiff
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c EpochDiff
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; EpochDiff -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; EpochDiff -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EpochDiff -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EpochDiff -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EpochDiff -&gt; m EpochDiff
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EpochDiff -&gt; m EpochDiff
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c EpochDiff
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; EpochDiff -&gt; c EpochDiff
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c EpochDiff)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c EpochDiff)
$cEpochDiff :: Constr
$tEpochDiff :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; EpochDiff -&gt; m EpochDiff
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EpochDiff -&gt; m EpochDiff
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; EpochDiff -&gt; m EpochDiff
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EpochDiff -&gt; m EpochDiff
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; EpochDiff -&gt; m EpochDiff
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EpochDiff -&gt; m EpochDiff
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; EpochDiff -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; EpochDiff -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; EpochDiff -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; EpochDiff -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EpochDiff -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EpochDiff -&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EpochDiff -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EpochDiff -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; EpochDiff -&gt; EpochDiff
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; EpochDiff -&gt; EpochDiff
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c EpochDiff)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c EpochDiff)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c EpochDiff)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c EpochDiff)
dataTypeOf :: EpochDiff -&gt; DataType
$cdataTypeOf :: EpochDiff -&gt; DataType
toConstr :: EpochDiff -&gt; Constr
$ctoConstr :: EpochDiff -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c EpochDiff
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c EpochDiff
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; EpochDiff -&gt; c EpochDiff
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; EpochDiff -&gt; c EpochDiff
$cp1Data :: Typeable EpochDiff
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. EpochDiff -&gt; Rep EpochDiff x)
-&gt; (forall x. Rep EpochDiff x -&gt; EpochDiff) -&gt; Generic EpochDiff
forall x. Rep EpochDiff x -&gt; EpochDiff
forall x. EpochDiff -&gt; Rep EpochDiff x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep EpochDiff x -&gt; EpochDiff
$cfrom :: forall x. EpochDiff -&gt; Rep EpochDiff x
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679585437"><span id="local-6989586621679585439"><span id="local-6989586621679585441"><span class="annot"><span class="annottext">Context -&gt; EpochDiff -&gt; IO (Maybe ThunkInfo)
Proxy EpochDiff -&gt; String
(Context -&gt; EpochDiff -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; EpochDiff -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy EpochDiff -&gt; String)
-&gt; NoThunks EpochDiff
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy EpochDiff -&gt; String
$cshowTypeOf :: Proxy EpochDiff -&gt; String
wNoThunks :: Context -&gt; EpochDiff -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; EpochDiff -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; EpochDiff -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; EpochDiff -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679585437"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-341"></span><span>
</span><span id="line-342"></span><span class="hs-comment">-- | These `PredicateFailure`s are all &quot;throwable&quot;. The disjunction of the</span><span>
</span><span id="line-343"></span><span class="hs-comment">--   rules' preconditions is not `True` - the `PredicateFailure`s represent</span><span>
</span><span id="line-344"></span><span class="hs-comment">--   `False` cases.</span><span>
</span><span id="line-345"></span><span id="local-6989586621679585435"><span id="local-6989586621679585436"></span></span><span class="hs-keyword">data</span><span> </span><span id="SdelegPredicateFailure"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SdelegPredicateFailure"><span class="hs-identifier hs-var">SdelegPredicateFailure</span></a></span></span><span>
</span><span id="line-346"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="IsNotGenesisKey"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#IsNotGenesisKey"><span class="hs-identifier hs-var">IsNotGenesisKey</span></a></span></span><span>
</span><span id="line-347"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="EpochInThePast"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#EpochInThePast"><span class="hs-identifier hs-var">EpochInThePast</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#EpochDiff"><span class="hs-identifier hs-type">EpochDiff</span></a></span><span>
</span><span id="line-348"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="EpochPastNextEpoch"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#EpochPastNextEpoch"><span class="hs-identifier hs-var">EpochPastNextEpoch</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#EpochDiff"><span class="hs-identifier hs-type">EpochDiff</span></a></span><span>
</span><span id="line-349"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="HasAlreadyDelegated"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#HasAlreadyDelegated"><span class="hs-identifier hs-var">HasAlreadyDelegated</span></a></span></span><span>
</span><span id="line-350"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="IsAlreadyScheduled"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#IsAlreadyScheduled"><span class="hs-identifier hs-var">IsAlreadyScheduled</span></a></span></span><span>
</span><span id="line-351"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="DoesNotVerify"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DoesNotVerify"><span class="hs-identifier hs-var">DoesNotVerify</span></a></span></span><span>
</span><span id="line-352"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679585425"><span id="local-6989586621679585427"><span class="annot"><span class="annottext">SdelegPredicateFailure -&gt; SdelegPredicateFailure -&gt; Bool
(SdelegPredicateFailure -&gt; SdelegPredicateFailure -&gt; Bool)
-&gt; (SdelegPredicateFailure -&gt; SdelegPredicateFailure -&gt; Bool)
-&gt; Eq SdelegPredicateFailure
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: SdelegPredicateFailure -&gt; SdelegPredicateFailure -&gt; Bool
$c/= :: SdelegPredicateFailure -&gt; SdelegPredicateFailure -&gt; Bool
== :: SdelegPredicateFailure -&gt; SdelegPredicateFailure -&gt; Bool
$c== :: SdelegPredicateFailure -&gt; SdelegPredicateFailure -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679585419"><span id="local-6989586621679585421"><span id="local-6989586621679585423"><span class="annot"><span class="annottext">Int -&gt; SdelegPredicateFailure -&gt; ShowS
[SdelegPredicateFailure] -&gt; ShowS
SdelegPredicateFailure -&gt; String
(Int -&gt; SdelegPredicateFailure -&gt; ShowS)
-&gt; (SdelegPredicateFailure -&gt; String)
-&gt; ([SdelegPredicateFailure] -&gt; ShowS)
-&gt; Show SdelegPredicateFailure
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [SdelegPredicateFailure] -&gt; ShowS
$cshowList :: [SdelegPredicateFailure] -&gt; ShowS
show :: SdelegPredicateFailure -&gt; String
$cshow :: SdelegPredicateFailure -&gt; String
showsPrec :: Int -&gt; SdelegPredicateFailure -&gt; ShowS
$cshowsPrec :: Int -&gt; SdelegPredicateFailure -&gt; ShowS
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cDoesNotVerify"><span id="%24cIsAlreadyScheduled"><span id="%24cHasAlreadyDelegated"><span id="%24cEpochPastNextEpoch"><span id="%24cEpochInThePast"><span id="%24cIsNotGenesisKey"><span id="%24tSdelegPredicateFailure"><span id="local-6989586621679585390"><span id="local-6989586621679585392"><span id="local-6989586621679585394"><span id="local-6989586621679585396"><span id="local-6989586621679585398"><span id="local-6989586621679585400"><span id="local-6989586621679585402"><span id="local-6989586621679585404"><span id="local-6989586621679585406"><span id="local-6989586621679585408"><span id="local-6989586621679585410"><span id="local-6989586621679585412"><span id="local-6989586621679585414"><span id="local-6989586621679585416"><span class="annot"><span class="annottext">Typeable SdelegPredicateFailure
DataType
Constr
Typeable SdelegPredicateFailure
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g)
    -&gt; SdelegPredicateFailure
    -&gt; c SdelegPredicateFailure)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SdelegPredicateFailure)
-&gt; (SdelegPredicateFailure -&gt; Constr)
-&gt; (SdelegPredicateFailure -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c SdelegPredicateFailure))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c SdelegPredicateFailure))
-&gt; ((forall b. Data b =&gt; b -&gt; b)
    -&gt; SdelegPredicateFailure -&gt; SdelegPredicateFailure)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; SdelegPredicateFailure
    -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; SdelegPredicateFailure
    -&gt; r)
-&gt; (forall u.
    (forall d. Data d =&gt; d -&gt; u) -&gt; SdelegPredicateFailure -&gt; [u])
-&gt; (forall u.
    Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; SdelegPredicateFailure -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; SdelegPredicateFailure -&gt; m SdelegPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; SdelegPredicateFailure -&gt; m SdelegPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; SdelegPredicateFailure -&gt; m SdelegPredicateFailure)
-&gt; Data SdelegPredicateFailure
SdelegPredicateFailure -&gt; DataType
SdelegPredicateFailure -&gt; Constr
(forall b. Data b =&gt; b -&gt; b)
-&gt; SdelegPredicateFailure -&gt; SdelegPredicateFailure
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; SdelegPredicateFailure
-&gt; c SdelegPredicateFailure
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SdelegPredicateFailure
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; SdelegPredicateFailure -&gt; u
forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; SdelegPredicateFailure -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; SdelegPredicateFailure
-&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; SdelegPredicateFailure
-&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; SdelegPredicateFailure -&gt; m SdelegPredicateFailure
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; SdelegPredicateFailure -&gt; m SdelegPredicateFailure
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SdelegPredicateFailure
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; SdelegPredicateFailure
-&gt; c SdelegPredicateFailure
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c SdelegPredicateFailure)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c SdelegPredicateFailure)
$cDoesNotVerify :: Constr
$cIsAlreadyScheduled :: Constr
$cHasAlreadyDelegated :: Constr
$cEpochPastNextEpoch :: Constr
$cEpochInThePast :: Constr
$cIsNotGenesisKey :: Constr
$tSdelegPredicateFailure :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; SdelegPredicateFailure -&gt; m SdelegPredicateFailure
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; SdelegPredicateFailure -&gt; m SdelegPredicateFailure
gmapMp :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; SdelegPredicateFailure -&gt; m SdelegPredicateFailure
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; SdelegPredicateFailure -&gt; m SdelegPredicateFailure
gmapM :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; SdelegPredicateFailure -&gt; m SdelegPredicateFailure
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; SdelegPredicateFailure -&gt; m SdelegPredicateFailure
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; SdelegPredicateFailure -&gt; u
$cgmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; SdelegPredicateFailure -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; SdelegPredicateFailure -&gt; [u]
$cgmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; SdelegPredicateFailure -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; SdelegPredicateFailure
-&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; SdelegPredicateFailure
-&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; SdelegPredicateFailure
-&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; SdelegPredicateFailure
-&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; SdelegPredicateFailure -&gt; SdelegPredicateFailure
$cgmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; SdelegPredicateFailure -&gt; SdelegPredicateFailure
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c SdelegPredicateFailure)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c SdelegPredicateFailure)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c SdelegPredicateFailure)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c SdelegPredicateFailure)
dataTypeOf :: SdelegPredicateFailure -&gt; DataType
$cdataTypeOf :: SdelegPredicateFailure -&gt; DataType
toConstr :: SdelegPredicateFailure -&gt; Constr
$ctoConstr :: SdelegPredicateFailure -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SdelegPredicateFailure
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SdelegPredicateFailure
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; SdelegPredicateFailure
-&gt; c SdelegPredicateFailure
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; SdelegPredicateFailure
-&gt; c SdelegPredicateFailure
$cp1Data :: Typeable SdelegPredicateFailure
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. SdelegPredicateFailure -&gt; Rep SdelegPredicateFailure x)
-&gt; (forall x.
    Rep SdelegPredicateFailure x -&gt; SdelegPredicateFailure)
-&gt; Generic SdelegPredicateFailure
forall x. Rep SdelegPredicateFailure x -&gt; SdelegPredicateFailure
forall x. SdelegPredicateFailure -&gt; Rep SdelegPredicateFailure x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep SdelegPredicateFailure x -&gt; SdelegPredicateFailure
$cfrom :: forall x. SdelegPredicateFailure -&gt; Rep SdelegPredicateFailure x
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679585375"><span id="local-6989586621679585377"><span id="local-6989586621679585379"><span class="annot"><span class="annottext">Context -&gt; SdelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
Proxy SdelegPredicateFailure -&gt; String
(Context -&gt; SdelegPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; SdelegPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy SdelegPredicateFailure -&gt; String)
-&gt; NoThunks SdelegPredicateFailure
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy SdelegPredicateFailure -&gt; String
$cshowTypeOf :: Proxy SdelegPredicateFailure -&gt; String
wNoThunks :: Context -&gt; SdelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; SdelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; SdelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; SdelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679585375"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-353"></span><span>
</span><span id="line-354"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679585365"><span id="local-6989586621679585367"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEG"><span class="hs-identifier hs-type">SDELEG</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-355"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="State"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">State</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEG"><span class="hs-identifier hs-type">SDELEG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSState"><span class="hs-identifier hs-type">DSState</span></a></span><span>
</span><span id="line-356"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Signal"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">Signal</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEG"><span class="hs-identifier hs-type">SDELEG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span>
</span><span id="line-357"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Environment"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">Environment</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEG"><span class="hs-identifier hs-type">SDELEG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSEnv"><span class="hs-identifier hs-type">DSEnv</span></a></span><span>
</span><span id="line-358"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PredicateFailure"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">PredicateFailure</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEG"><span class="hs-identifier hs-type">SDELEG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SdelegPredicateFailure"><span class="hs-identifier hs-type">SdelegPredicateFailure</span></a></span><span>
</span><span id="line-359"></span><span>
</span><span id="line-360"></span><span>  </span><span id="local-6989586621679585363"><span class="annot"><span class="annottext">initialRules :: [InitialRule SDELEG]
</span><a href="#local-6989586621679585363"><span class="hs-identifier hs-var hs-var hs-var hs-var">initialRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-361"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">DSState -&gt; F (Clause SDELEG 'Initial) DSState
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span>
</span><span id="line-362"></span><span>        </span><span class="annot"><span class="annottext">DSState :: [(Slot, (VKeyGenesis, VKey))]
-&gt; Set (Epoch, VKeyGenesis) -&gt; DSState
</span><a href="Byron.Spec.Ledger.Delegation.html#DSState"><span class="hs-identifier hs-type">DSState</span></a></span><span>
</span><span id="line-363"></span><span>          </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_dSStateScheduledDelegations :: [(Slot, (VKeyGenesis, VKey))]
</span><a href="Byron.Spec.Ledger.Delegation.html#_dSStateScheduledDelegations"><span class="hs-identifier hs-var">_dSStateScheduledDelegations</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-364"></span><span>            </span><span class="annot"><span class="annottext">_dSStateKeyEpochDelegations :: Set (Epoch, VKeyGenesis)
</span><a href="Byron.Spec.Ledger.Delegation.html#_dSStateKeyEpochDelegations"><span class="hs-identifier hs-var">_dSStateKeyEpochDelegations</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set (Epoch, VKeyGenesis)
forall a. Set a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Set.empty</span></a></span><span>
</span><span id="line-365"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-366"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-367"></span><span>  </span><span id="local-6989586621679585361"><span class="annot"><span class="annottext">transitionRules :: [TransitionRule SDELEG]
</span><a href="#local-6989586621679585361"><span class="hs-identifier hs-var hs-var hs-var hs-var">transitionRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-368"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-369"></span><span>        </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">TRC</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679585360"><span class="annot"><span class="annottext">Environment SDELEG
</span><a href="#local-6989586621679585360"><span class="hs-identifier hs-var">env</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679585359"><span class="annot"><span class="annottext">State SDELEG
</span><a href="#local-6989586621679585359"><span class="hs-identifier hs-var">st</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679585358"><span class="annot"><span class="annottext">Signal SDELEG
</span><a href="#local-6989586621679585358"><span class="hs-identifier hs-var">cert</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">F (Clause SDELEG 'Transition) (TRC SDELEG)
forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-370"></span><span>        </span><span class="annot"><span class="annottext">VKey -&gt; (VKey, Epoch) -&gt; Sig (VKey, Epoch) -&gt; Bool
forall a. Eq a =&gt; VKey -&gt; a -&gt; Sig a -&gt; Bool
</span><a href="Byron.Spec.Ledger.Core.html#verify"><span class="hs-identifier hs-var">verify</span></a></span><span>
</span><span id="line-371"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VKeyGenesis -&gt; VKey
</span><a href="Byron.Spec.Ledger.Core.html#unVKeyGenesis"><span class="hs-identifier hs-var hs-var">unVKeyGenesis</span></a></span><span> </span><span class="annot"><span class="annottext">(VKeyGenesis -&gt; VKey) -&gt; VKeyGenesis -&gt; VKey
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; VKeyGenesis
</span><a href="Byron.Spec.Ledger.Delegation.html#delegator"><span class="hs-identifier hs-var hs-var">delegator</span></a></span><span> </span><span class="annot"><span class="annottext">Signal SDELEG
DCert
</span><a href="#local-6989586621679585358"><span class="hs-identifier hs-var">cert</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-372"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DCert -&gt; (VKey, Epoch)
</span><a href="Byron.Spec.Ledger.Delegation.html#dbody"><span class="hs-identifier hs-var">dbody</span></a></span><span> </span><span class="annot"><span class="annottext">Signal SDELEG
DCert
</span><a href="#local-6989586621679585358"><span class="hs-identifier hs-var">cert</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-373"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DCert -&gt; Sig (VKey, Epoch)
</span><a href="Byron.Spec.Ledger.Delegation.html#signature"><span class="hs-keyword hs-var hs-var">signature</span></a></span><span> </span><span class="annot"><span class="annottext">Signal SDELEG
DCert
</span><a href="#local-6989586621679585358"><span class="hs-identifier hs-var">cert</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-374"></span><span>          </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure SDELEG -&gt; Rule SDELEG 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../../../../small-steps/html/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">PredicateFailure SDELEG
SdelegPredicateFailure
</span><a href="Byron.Spec.Ledger.Delegation.html#DoesNotVerify"><span class="hs-identifier hs-var">DoesNotVerify</span></a></span><span>
</span><span id="line-375"></span><span>        </span><span class="annot"><span class="annottext">DSState -&gt; DCert -&gt; Bool
</span><a href="#local-6989586621679585357"><span class="hs-identifier hs-var">notAlreadyDelegated</span></a></span><span> </span><span class="annot"><span class="annottext">State SDELEG
DSState
</span><a href="#local-6989586621679585359"><span class="hs-identifier hs-var">st</span></a></span><span> </span><span class="annot"><span class="annottext">Signal SDELEG
DCert
</span><a href="#local-6989586621679585358"><span class="hs-identifier hs-var">cert</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure SDELEG -&gt; Rule SDELEG 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../../../../small-steps/html/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">PredicateFailure SDELEG
SdelegPredicateFailure
</span><a href="Byron.Spec.Ledger.Delegation.html#HasAlreadyDelegated"><span class="hs-identifier hs-var">HasAlreadyDelegated</span></a></span><span>
</span><span id="line-376"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679585356"><span class="annot"><span class="annottext">d :: SlotCount
</span><a href="#local-6989586621679585356"><span class="hs-identifier hs-var hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockCount -&gt; SlotCount
</span><a href="Byron.Spec.Ledger.Delegation.html#liveAfter"><span class="hs-identifier hs-var">liveAfter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment SDELEG
DSEnv
</span><a href="#local-6989586621679585360"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">DSEnv -&gt; Getting BlockCount DSEnv BlockCount -&gt; BlockCount
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting BlockCount DSEnv BlockCount
forall s a. HasK s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#k"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-377"></span><span>        </span><span class="annot"><span class="annottext">SlotCount -&gt; DSEnv -&gt; DSState -&gt; DCert -&gt; Bool
</span><a href="#local-6989586621679585355"><span class="hs-identifier hs-var">notAlreadyScheduled</span></a></span><span> </span><span class="annot"><span class="annottext">SlotCount
</span><a href="#local-6989586621679585356"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Environment SDELEG
DSEnv
</span><a href="#local-6989586621679585360"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">State SDELEG
DSState
</span><a href="#local-6989586621679585359"><span class="hs-identifier hs-var">st</span></a></span><span> </span><span class="annot"><span class="annottext">Signal SDELEG
DCert
</span><a href="#local-6989586621679585358"><span class="hs-identifier hs-var">cert</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure SDELEG -&gt; Rule SDELEG 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../../../../small-steps/html/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">PredicateFailure SDELEG
SdelegPredicateFailure
</span><a href="Byron.Spec.Ledger.Delegation.html#IsAlreadyScheduled"><span class="hs-identifier hs-var">IsAlreadyScheduled</span></a></span><span>
</span><span id="line-378"></span><span>        </span><span class="annot"><span class="annottext">VKeyGenesis -&gt; Set VKeyGenesis -&gt; Bool
forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Set.member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Signal SDELEG
DCert
</span><a href="#local-6989586621679585358"><span class="hs-identifier hs-var">cert</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; Getting VKeyGenesis DCert VKeyGenesis -&gt; VKeyGenesis
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(DCert -&gt; (VKeyGenesis, VKey))
-&gt; SimpleGetter DCert (VKeyGenesis, VKey)
forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><a href="../../../../microlens/html/src"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; (VKeyGenesis, VKey)
</span><a href="Byron.Spec.Ledger.Delegation.html#dwho"><span class="hs-identifier hs-var">dwho</span></a></span><span> </span><span class="annot"><span class="annottext">Getting VKeyGenesis DCert (VKeyGenesis, VKey)
-&gt; ((VKeyGenesis -&gt; Const VKeyGenesis VKeyGenesis)
    -&gt; (VKeyGenesis, VKey) -&gt; Const VKeyGenesis (VKeyGenesis, VKey))
-&gt; Getting VKeyGenesis DCert VKeyGenesis
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(VKeyGenesis -&gt; Const VKeyGenesis VKeyGenesis)
-&gt; (VKeyGenesis, VKey) -&gt; Const VKeyGenesis (VKeyGenesis, VKey)
forall s t a b. Field1 s t a b =&gt; Lens s t a b
</span><a href="../../../../microlens/html/src"><span class="hs-identifier hs-var">_1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment SDELEG
DSEnv
</span><a href="#local-6989586621679585360"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">DSEnv
-&gt; Getting (Set VKeyGenesis) DSEnv (Set VKeyGenesis)
-&gt; Set VKeyGenesis
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (Set VKeyGenesis) DSEnv (Set VKeyGenesis)
forall s a. HasAllowedDelegators s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#allowedDelegators"><span class="hs-identifier hs-var">allowedDelegators</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure SDELEG -&gt; Rule SDELEG 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../../../../small-steps/html/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">PredicateFailure SDELEG
SdelegPredicateFailure
</span><a href="Byron.Spec.Ledger.Delegation.html#IsNotGenesisKey"><span class="hs-identifier hs-var">IsNotGenesisKey</span></a></span><span>
</span><span id="line-379"></span><span>        </span><span class="annot"><span class="annottext">Environment SDELEG
DSEnv
</span><a href="#local-6989586621679585360"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">DSEnv -&gt; Getting Epoch DSEnv Epoch -&gt; Epoch
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting Epoch DSEnv Epoch
forall s a. HasEpoch s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#epoch"><span class="hs-identifier hs-var">epoch</span></a></span><span> </span><span class="annot"><span class="annottext">Epoch -&gt; Epoch -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Signal SDELEG
DCert
</span><a href="#local-6989586621679585358"><span class="hs-identifier hs-var">cert</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; Getting Epoch DCert Epoch -&gt; Epoch
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(DCert -&gt; Epoch) -&gt; SimpleGetter DCert Epoch
forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><a href="../../../../microlens/html/src"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#depoch"><span class="hs-identifier hs-var hs-var">depoch</span></a></span><span>
</span><span id="line-380"></span><span>          </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure SDELEG -&gt; Rule SDELEG 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../../../../small-steps/html/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">EpochDiff -&gt; SdelegPredicateFailure
</span><a href="Byron.Spec.Ledger.Delegation.html#EpochInThePast"><span class="hs-identifier hs-var">EpochInThePast</span></a></span><span>
</span><span id="line-381"></span><span>            </span><span class="annot"><span class="annottext">EpochDiff :: Epoch -&gt; Epoch -&gt; EpochDiff
</span><a href="Byron.Spec.Ledger.Delegation.html#EpochDiff"><span class="hs-identifier hs-type">EpochDiff</span></a></span><span>
</span><span id="line-382"></span><span>              </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">currentEpoch :: Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#currentEpoch"><span class="hs-identifier hs-var">currentEpoch</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Environment SDELEG
DSEnv
</span><a href="#local-6989586621679585360"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">DSEnv -&gt; Getting Epoch DSEnv Epoch -&gt; Epoch
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting Epoch DSEnv Epoch
forall s a. HasEpoch s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#epoch"><span class="hs-identifier hs-var">epoch</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-383"></span><span>                </span><span class="annot"><span class="annottext">certEpoch :: Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#certEpoch"><span class="hs-identifier hs-var">certEpoch</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Signal SDELEG
DCert
</span><a href="#local-6989586621679585358"><span class="hs-identifier hs-var">cert</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; Getting Epoch DCert Epoch -&gt; Epoch
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(DCert -&gt; Epoch) -&gt; SimpleGetter DCert Epoch
forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><a href="../../../../microlens/html/src"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#depoch"><span class="hs-identifier hs-var hs-var">depoch</span></a></span><span>
</span><span id="line-384"></span><span>              </span><span class="hs-special">}</span><span>
</span><span id="line-385"></span><span>        </span><span class="annot"><span class="annottext">Signal SDELEG
DCert
</span><a href="#local-6989586621679585358"><span class="hs-identifier hs-var">cert</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; Getting Epoch DCert Epoch -&gt; Epoch
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(DCert -&gt; Epoch) -&gt; SimpleGetter DCert Epoch
forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><a href="../../../../microlens/html/src"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#depoch"><span class="hs-identifier hs-var hs-var">depoch</span></a></span><span> </span><span class="annot"><span class="annottext">Epoch -&gt; Epoch -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Environment SDELEG
DSEnv
</span><a href="#local-6989586621679585360"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">DSEnv -&gt; Getting Epoch DSEnv Epoch -&gt; Epoch
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting Epoch DSEnv Epoch
forall s a. HasEpoch s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#epoch"><span class="hs-identifier hs-var">epoch</span></a></span><span> </span><span class="annot"><span class="annottext">Epoch -&gt; Epoch -&gt; Epoch
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Epoch
</span><span class="hs-number">1</span></span><span>
</span><span id="line-386"></span><span>          </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure SDELEG -&gt; Rule SDELEG 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../../../../small-steps/html/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">EpochDiff -&gt; SdelegPredicateFailure
</span><a href="Byron.Spec.Ledger.Delegation.html#EpochPastNextEpoch"><span class="hs-identifier hs-var">EpochPastNextEpoch</span></a></span><span>
</span><span id="line-387"></span><span>            </span><span class="annot"><span class="annottext">EpochDiff :: Epoch -&gt; Epoch -&gt; EpochDiff
</span><a href="Byron.Spec.Ledger.Delegation.html#EpochDiff"><span class="hs-identifier hs-type">EpochDiff</span></a></span><span>
</span><span id="line-388"></span><span>              </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">currentEpoch :: Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#currentEpoch"><span class="hs-identifier hs-var">currentEpoch</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Environment SDELEG
DSEnv
</span><a href="#local-6989586621679585360"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">DSEnv -&gt; Getting Epoch DSEnv Epoch -&gt; Epoch
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting Epoch DSEnv Epoch
forall s a. HasEpoch s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#epoch"><span class="hs-identifier hs-var">epoch</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-389"></span><span>                </span><span class="annot"><span class="annottext">certEpoch :: Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#certEpoch"><span class="hs-identifier hs-var">certEpoch</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Signal SDELEG
DCert
</span><a href="#local-6989586621679585358"><span class="hs-identifier hs-var">cert</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; Getting Epoch DCert Epoch -&gt; Epoch
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(DCert -&gt; Epoch) -&gt; SimpleGetter DCert Epoch
forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><a href="../../../../microlens/html/src"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#depoch"><span class="hs-identifier hs-var hs-var">depoch</span></a></span><span>
</span><span id="line-390"></span><span>              </span><span class="hs-special">}</span><span>
</span><span id="line-391"></span><span>        </span><span class="annot"><span class="annottext">DSState -&gt; F (Clause SDELEG 'Transition) DSState
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(DSState -&gt; F (Clause SDELEG 'Transition) DSState)
-&gt; DSState -&gt; F (Clause SDELEG 'Transition) DSState
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-392"></span><span>          </span><span class="annot"><span class="annottext">State SDELEG
DSState
</span><a href="#local-6989586621679585359"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-393"></span><span>            </span><span class="annot"><span class="annottext">DSState -&gt; (DSState -&gt; DSState) -&gt; DSState
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">([(Slot, (VKeyGenesis, VKey))]
 -&gt; Identity [(Slot, (VKeyGenesis, VKey))])
-&gt; DSState -&gt; Identity DSState
forall s a. HasScheduledDelegations s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#scheduledDelegations"><span class="hs-identifier hs-var">scheduledDelegations</span></a></span><span>
</span><span id="line-394"></span><span>              </span><span class="annot"><span class="annottext">(([(Slot, (VKeyGenesis, VKey))]
  -&gt; Identity [(Slot, (VKeyGenesis, VKey))])
 -&gt; DSState -&gt; Identity DSState)
-&gt; [(Slot, (VKeyGenesis, VKey))] -&gt; DSState -&gt; DSState
forall a s t. Monoid a =&gt; ASetter s t a a -&gt; a -&gt; s -&gt; t
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">&lt;&gt;~</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment SDELEG
DSEnv
</span><a href="#local-6989586621679585360"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">DSEnv -&gt; Getting Slot DSEnv Slot -&gt; Slot
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting Slot DSEnv Slot
forall s a. HasSlot s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#slot"><span class="hs-identifier hs-var">slot</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Slot -&gt; SlotCount -&gt; Slot
</span><a href="Byron.Spec.Ledger.Core.html#addSlot"><span class="hs-operator hs-var">`addSlot`</span></a></span><span> </span><span class="annot"><span class="annottext">SlotCount
</span><a href="#local-6989586621679585356"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-395"></span><span>                      </span><span class="annot"><span class="annottext">Signal SDELEG
DCert
</span><a href="#local-6989586621679585358"><span class="hs-identifier hs-var">cert</span></a></span><span> </span><span class="annot"><span class="annottext">DCert
-&gt; Getting (VKeyGenesis, VKey) DCert (VKeyGenesis, VKey)
-&gt; (VKeyGenesis, VKey)
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(DCert -&gt; (VKeyGenesis, VKey))
-&gt; SimpleGetter DCert (VKeyGenesis, VKey)
forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><a href="../../../../microlens/html/src"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; (VKeyGenesis, VKey)
</span><a href="Byron.Spec.Ledger.Delegation.html#dwho"><span class="hs-identifier hs-var">dwho</span></a></span><span>
</span><span id="line-396"></span><span>                    </span><span class="hs-special">)</span><span>
</span><span id="line-397"></span><span>                  </span><span class="hs-special">]</span><span>
</span><span id="line-398"></span><span>            </span><span class="annot"><span class="annottext">DSState -&gt; (DSState -&gt; DSState) -&gt; DSState
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">(Set (Epoch, VKeyGenesis) -&gt; Identity (Set (Epoch, VKeyGenesis)))
-&gt; DSState -&gt; Identity DSState
forall s a. HasKeyEpochDelegations s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#keyEpochDelegations"><span class="hs-identifier hs-var">keyEpochDelegations</span></a></span><span> </span><span class="annot"><span class="annottext">((Set (Epoch, VKeyGenesis) -&gt; Identity (Set (Epoch, VKeyGenesis)))
 -&gt; DSState -&gt; Identity DSState)
-&gt; (Set (Epoch, VKeyGenesis) -&gt; Set (Epoch, VKeyGenesis))
-&gt; DSState
-&gt; DSState
forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">%~</span></a></span><span> </span><span class="annot"><span class="annottext">(Epoch, VKeyGenesis)
-&gt; Set (Epoch, VKeyGenesis) -&gt; Set (Epoch, VKeyGenesis)
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Set.insert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DCert -&gt; (Epoch, VKeyGenesis)
</span><a href="#local-6989586621679585350"><span class="hs-identifier hs-var">epochDelegator</span></a></span><span> </span><span class="annot"><span class="annottext">Signal SDELEG
DCert
</span><a href="#local-6989586621679585358"><span class="hs-identifier hs-var">cert</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-399"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-400"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-401"></span><span>      </span><span class="hs-comment">-- Check that this delegator hasn't already delegated this epoch</span><span>
</span><span id="line-402"></span><span>      </span><span class="annot"><a href="#local-6989586621679585357"><span class="hs-identifier hs-type">notAlreadyDelegated</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSState"><span class="hs-identifier hs-type">DSState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-403"></span><span>      </span><span id="local-6989586621679585357"><span class="annot"><span class="annottext">notAlreadyDelegated :: DSState -&gt; DCert -&gt; Bool
</span><a href="#local-6989586621679585357"><span class="hs-identifier hs-var hs-var">notAlreadyDelegated</span></a></span></span><span> </span><span id="local-6989586621679585349"><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679585349"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span id="local-6989586621679585348"><span class="annot"><span class="annottext">DCert
</span><a href="#local-6989586621679585348"><span class="hs-identifier hs-var">cert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-404"></span><span>        </span><span class="annot"><span class="annottext">(Epoch, VKeyGenesis) -&gt; Set (Epoch, VKeyGenesis) -&gt; Bool
forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Set.notMember</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DCert -&gt; (Epoch, VKeyGenesis)
</span><a href="#local-6989586621679585350"><span class="hs-identifier hs-var">epochDelegator</span></a></span><span> </span><span class="annot"><span class="annottext">DCert
</span><a href="#local-6989586621679585348"><span class="hs-identifier hs-var">cert</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679585349"><span class="hs-identifier hs-var">st</span></a></span><span> </span><span class="annot"><span class="annottext">DSState
-&gt; Getting
     (Set (Epoch, VKeyGenesis)) DSState (Set (Epoch, VKeyGenesis))
-&gt; Set (Epoch, VKeyGenesis)
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting
  (Set (Epoch, VKeyGenesis)) DSState (Set (Epoch, VKeyGenesis))
forall s a. HasKeyEpochDelegations s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#keyEpochDelegations"><span class="hs-identifier hs-var">keyEpochDelegations</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-405"></span><span>
</span><span id="line-406"></span><span>      </span><span class="annot"><a href="#local-6989586621679585350"><span class="hs-identifier hs-type">epochDelegator</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-407"></span><span>      </span><span id="local-6989586621679585350"><span class="annot"><span class="annottext">epochDelegator :: DCert -&gt; (Epoch, VKeyGenesis)
</span><a href="#local-6989586621679585350"><span class="hs-identifier hs-var hs-var">epochDelegator</span></a></span></span><span> </span><span id="local-6989586621679585346"><span class="annot"><span class="annottext">DCert
</span><a href="#local-6989586621679585346"><span class="hs-identifier hs-var">cert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DCert
</span><a href="#local-6989586621679585346"><span class="hs-identifier hs-var">cert</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; Getting Epoch DCert Epoch -&gt; Epoch
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(DCert -&gt; Epoch) -&gt; SimpleGetter DCert Epoch
forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><a href="../../../../microlens/html/src"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#depoch"><span class="hs-identifier hs-var hs-var">depoch</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DCert
</span><a href="#local-6989586621679585346"><span class="hs-identifier hs-var">cert</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; Getting VKeyGenesis DCert VKeyGenesis -&gt; VKeyGenesis
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(DCert -&gt; (VKeyGenesis, VKey))
-&gt; SimpleGetter DCert (VKeyGenesis, VKey)
forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><a href="../../../../microlens/html/src"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; (VKeyGenesis, VKey)
</span><a href="Byron.Spec.Ledger.Delegation.html#dwho"><span class="hs-identifier hs-var">dwho</span></a></span><span> </span><span class="annot"><span class="annottext">Getting VKeyGenesis DCert (VKeyGenesis, VKey)
-&gt; ((VKeyGenesis -&gt; Const VKeyGenesis VKeyGenesis)
    -&gt; (VKeyGenesis, VKey) -&gt; Const VKeyGenesis (VKeyGenesis, VKey))
-&gt; Getting VKeyGenesis DCert VKeyGenesis
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(VKeyGenesis -&gt; Const VKeyGenesis VKeyGenesis)
-&gt; (VKeyGenesis, VKey) -&gt; Const VKeyGenesis (VKeyGenesis, VKey)
forall s t a b. Field1 s t a b =&gt; Lens s t a b
</span><a href="../../../../microlens/html/src"><span class="hs-identifier hs-var">_1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-408"></span><span>
</span><span id="line-409"></span><span>      </span><span class="hs-comment">-- Check whether there is a scheduled delegation from this key</span><span>
</span><span id="line-410"></span><span>      </span><span class="annot"><a href="#local-6989586621679585355"><span class="hs-identifier hs-type">notAlreadyScheduled</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#SlotCount"><span class="hs-identifier hs-type">SlotCount</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSEnv"><span class="hs-identifier hs-type">DSEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSState"><span class="hs-identifier hs-type">DSState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-411"></span><span>      </span><span id="local-6989586621679585355"><span class="annot"><span class="annottext">notAlreadyScheduled :: SlotCount -&gt; DSEnv -&gt; DSState -&gt; DCert -&gt; Bool
</span><a href="#local-6989586621679585355"><span class="hs-identifier hs-var hs-var">notAlreadyScheduled</span></a></span></span><span> </span><span id="local-6989586621679585345"><span class="annot"><span class="annottext">SlotCount
</span><a href="#local-6989586621679585345"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621679585344"><span class="annot"><span class="annottext">DSEnv
</span><a href="#local-6989586621679585344"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621679585343"><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679585343"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span id="local-6989586621679585342"><span class="annot"><span class="annottext">DCert
</span><a href="#local-6989586621679585342"><span class="hs-identifier hs-var">cert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-412"></span><span>        </span><span class="annot"><span class="annottext">(Slot, VKeyGenesis) -&gt; [(Slot, VKeyGenesis)] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">List.notElem</span></a></span><span>
</span><span id="line-413"></span><span>          </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">DSEnv
</span><a href="#local-6989586621679585344"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">DSEnv -&gt; Getting Slot DSEnv Slot -&gt; Slot
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting Slot DSEnv Slot
forall s a. HasSlot s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#slot"><span class="hs-identifier hs-var">slot</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Slot -&gt; SlotCount -&gt; Slot
</span><a href="Byron.Spec.Ledger.Core.html#addSlot"><span class="hs-operator hs-var">`addSlot`</span></a></span><span> </span><span class="annot"><span class="annottext">SlotCount
</span><a href="#local-6989586621679585345"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DCert
</span><a href="#local-6989586621679585342"><span class="hs-identifier hs-var">cert</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; Getting VKeyGenesis DCert VKeyGenesis -&gt; VKeyGenesis
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(DCert -&gt; (VKeyGenesis, VKey))
-&gt; SimpleGetter DCert (VKeyGenesis, VKey)
forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><a href="../../../../microlens/html/src"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; (VKeyGenesis, VKey)
</span><a href="Byron.Spec.Ledger.Delegation.html#dwho"><span class="hs-identifier hs-var">dwho</span></a></span><span> </span><span class="annot"><span class="annottext">Getting VKeyGenesis DCert (VKeyGenesis, VKey)
-&gt; ((VKeyGenesis -&gt; Const VKeyGenesis VKeyGenesis)
    -&gt; (VKeyGenesis, VKey) -&gt; Const VKeyGenesis (VKeyGenesis, VKey))
-&gt; Getting VKeyGenesis DCert VKeyGenesis
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(VKeyGenesis -&gt; Const VKeyGenesis VKeyGenesis)
-&gt; (VKeyGenesis, VKey) -&gt; Const VKeyGenesis (VKeyGenesis, VKey)
forall s t a b. Field1 s t a b =&gt; Lens s t a b
</span><a href="../../../../microlens/html/src"><span class="hs-identifier hs-var">_1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-414"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679585343"><span class="hs-identifier hs-var">st</span></a></span><span> </span><span class="annot"><span class="annottext">DSState
-&gt; Getting [(Slot, VKeyGenesis)] DSState [(Slot, VKeyGenesis)]
-&gt; [(Slot, VKeyGenesis)]
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">([(Slot, (VKeyGenesis, VKey))]
 -&gt; Const [(Slot, VKeyGenesis)] [(Slot, (VKeyGenesis, VKey))])
-&gt; DSState -&gt; Const [(Slot, VKeyGenesis)] DSState
forall s a. HasScheduledDelegations s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#scheduledDelegations"><span class="hs-identifier hs-var">scheduledDelegations</span></a></span><span> </span><span class="annot"><span class="annottext">(([(Slot, (VKeyGenesis, VKey))]
  -&gt; Const [(Slot, VKeyGenesis)] [(Slot, (VKeyGenesis, VKey))])
 -&gt; DSState -&gt; Const [(Slot, VKeyGenesis)] DSState)
-&gt; (([(Slot, VKeyGenesis)]
     -&gt; Const [(Slot, VKeyGenesis)] [(Slot, VKeyGenesis)])
    -&gt; [(Slot, (VKeyGenesis, VKey))]
    -&gt; Const [(Slot, VKeyGenesis)] [(Slot, (VKeyGenesis, VKey))])
-&gt; Getting [(Slot, VKeyGenesis)] DSState [(Slot, VKeyGenesis)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">([(Slot, (VKeyGenesis, VKey))] -&gt; [(Slot, VKeyGenesis)])
-&gt; SimpleGetter [(Slot, (VKeyGenesis, VKey))] [(Slot, VKeyGenesis)]
forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><a href="../../../../microlens/html/src"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Slot, (VKeyGenesis, VKey)) -&gt; (Slot, VKeyGenesis))
-&gt; [(Slot, (VKeyGenesis, VKey))] -&gt; [(Slot, VKeyGenesis)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">(((Slot, (VKeyGenesis, VKey)) -&gt; (Slot, VKeyGenesis))
 -&gt; [(Slot, (VKeyGenesis, VKey))] -&gt; [(Slot, VKeyGenesis)])
-&gt; ((Slot, (VKeyGenesis, VKey)) -&gt; (Slot, VKeyGenesis))
-&gt; [(Slot, (VKeyGenesis, VKey))]
-&gt; [(Slot, VKeyGenesis)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">((VKeyGenesis, VKey) -&gt; VKeyGenesis)
-&gt; (Slot, (VKeyGenesis, VKey)) -&gt; (Slot, VKeyGenesis)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">(VKeyGenesis, VKey) -&gt; VKeyGenesis
forall a b. (a, b) -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fst</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-415"></span><span>
</span><span id="line-416"></span><span class="hs-comment">-- | Compute after which slot the delegation certificate will become live,</span><span>
</span><span id="line-417"></span><span class="hs-comment">-- using the chain stability parameter.</span><span>
</span><span id="line-418"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#liveAfter"><span class="hs-identifier hs-type">liveAfter</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#BlockCount"><span class="hs-identifier hs-type">BlockCount</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#SlotCount"><span class="hs-identifier hs-type">SlotCount</span></a></span><span>
</span><span id="line-419"></span><span id="liveAfter"><span class="annot"><span class="annottext">liveAfter :: BlockCount -&gt; SlotCount
</span><a href="Byron.Spec.Ledger.Delegation.html#liveAfter"><span class="hs-identifier hs-var hs-var">liveAfter</span></a></span></span><span> </span><span id="local-6989586621679585340"><span class="annot"><span class="annottext">BlockCount
</span><a href="#local-6989586621679585340"><span class="hs-identifier hs-var">bc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; SlotCount
</span><a href="Byron.Spec.Ledger.Core.html#SlotCount"><span class="hs-identifier hs-var">SlotCount</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; SlotCount) -&gt; Word64 -&gt; SlotCount
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; Word64
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">BlockCount -&gt; Word64
</span><a href="Byron.Spec.Ledger.Core.html#unBlockCount"><span class="hs-identifier hs-var hs-var">unBlockCount</span></a></span><span> </span><span class="annot"><span class="annottext">BlockCount
</span><a href="#local-6989586621679585340"><span class="hs-identifier hs-var">bc</span></a></span><span>
</span><span id="line-420"></span><span>
</span><span id="line-421"></span><span class="hs-comment">-- | None of these `PredicateFailure`s are actually &quot;throwable&quot;. The</span><span>
</span><span id="line-422"></span><span class="hs-comment">--   disjuction of the rules' preconditions is `True`, which means that one of</span><span>
</span><span id="line-423"></span><span class="hs-comment">--   them will pass. The `PredicateFailure` just act as switches to direct</span><span>
</span><span id="line-424"></span><span class="hs-comment">--   control flow to the successful one.</span><span>
</span><span id="line-425"></span><span id="local-6989586621679585337"><span id="local-6989586621679585338"></span></span><span class="hs-keyword">data</span><span> </span><span id="AdelegPredicateFailure"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#AdelegPredicateFailure"><span class="hs-identifier hs-var">AdelegPredicateFailure</span></a></span></span><span>
</span><span id="line-426"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="S_BeforeExistingDelegation"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#S_BeforeExistingDelegation"><span class="hs-identifier hs-var">S_BeforeExistingDelegation</span></a></span></span><span>
</span><span id="line-427"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="S_NoLastDelegation"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#S_NoLastDelegation"><span class="hs-identifier hs-var">S_NoLastDelegation</span></a></span></span><span>
</span><span id="line-428"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="S_AfterExistingDelegation"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#S_AfterExistingDelegation"><span class="hs-identifier hs-var">S_AfterExistingDelegation</span></a></span></span><span>
</span><span id="line-429"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="S_AlreadyADelegateOf"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#S_AlreadyADelegateOf"><span class="hs-identifier hs-var">S_AlreadyADelegateOf</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span>
</span><span id="line-430"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679585329"><span id="local-6989586621679585331"><span class="annot"><span class="annottext">AdelegPredicateFailure -&gt; AdelegPredicateFailure -&gt; Bool
(AdelegPredicateFailure -&gt; AdelegPredicateFailure -&gt; Bool)
-&gt; (AdelegPredicateFailure -&gt; AdelegPredicateFailure -&gt; Bool)
-&gt; Eq AdelegPredicateFailure
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: AdelegPredicateFailure -&gt; AdelegPredicateFailure -&gt; Bool
$c/= :: AdelegPredicateFailure -&gt; AdelegPredicateFailure -&gt; Bool
== :: AdelegPredicateFailure -&gt; AdelegPredicateFailure -&gt; Bool
$c== :: AdelegPredicateFailure -&gt; AdelegPredicateFailure -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679585323"><span id="local-6989586621679585325"><span id="local-6989586621679585327"><span class="annot"><span class="annottext">Int -&gt; AdelegPredicateFailure -&gt; ShowS
[AdelegPredicateFailure] -&gt; ShowS
AdelegPredicateFailure -&gt; String
(Int -&gt; AdelegPredicateFailure -&gt; ShowS)
-&gt; (AdelegPredicateFailure -&gt; String)
-&gt; ([AdelegPredicateFailure] -&gt; ShowS)
-&gt; Show AdelegPredicateFailure
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [AdelegPredicateFailure] -&gt; ShowS
$cshowList :: [AdelegPredicateFailure] -&gt; ShowS
show :: AdelegPredicateFailure -&gt; String
$cshow :: AdelegPredicateFailure -&gt; String
showsPrec :: Int -&gt; AdelegPredicateFailure -&gt; ShowS
$cshowsPrec :: Int -&gt; AdelegPredicateFailure -&gt; ShowS
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cS_AlreadyADelegateOf"><span id="%24cS_AfterExistingDelegation"><span id="%24cS_NoLastDelegation"><span id="%24cS_BeforeExistingDelegation"><span id="%24tAdelegPredicateFailure"><span id="local-6989586621679585294"><span id="local-6989586621679585296"><span id="local-6989586621679585298"><span id="local-6989586621679585300"><span id="local-6989586621679585302"><span id="local-6989586621679585304"><span id="local-6989586621679585306"><span id="local-6989586621679585308"><span id="local-6989586621679585310"><span id="local-6989586621679585312"><span id="local-6989586621679585314"><span id="local-6989586621679585316"><span id="local-6989586621679585318"><span id="local-6989586621679585320"><span class="annot"><span class="annottext">Typeable AdelegPredicateFailure
DataType
Constr
Typeable AdelegPredicateFailure
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g)
    -&gt; AdelegPredicateFailure
    -&gt; c AdelegPredicateFailure)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c AdelegPredicateFailure)
-&gt; (AdelegPredicateFailure -&gt; Constr)
-&gt; (AdelegPredicateFailure -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c AdelegPredicateFailure))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c AdelegPredicateFailure))
-&gt; ((forall b. Data b =&gt; b -&gt; b)
    -&gt; AdelegPredicateFailure -&gt; AdelegPredicateFailure)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; AdelegPredicateFailure
    -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; AdelegPredicateFailure
    -&gt; r)
-&gt; (forall u.
    (forall d. Data d =&gt; d -&gt; u) -&gt; AdelegPredicateFailure -&gt; [u])
-&gt; (forall u.
    Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; AdelegPredicateFailure -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; AdelegPredicateFailure -&gt; m AdelegPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; AdelegPredicateFailure -&gt; m AdelegPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; AdelegPredicateFailure -&gt; m AdelegPredicateFailure)
-&gt; Data AdelegPredicateFailure
AdelegPredicateFailure -&gt; DataType
AdelegPredicateFailure -&gt; Constr
(forall b. Data b =&gt; b -&gt; b)
-&gt; AdelegPredicateFailure -&gt; AdelegPredicateFailure
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; AdelegPredicateFailure
-&gt; c AdelegPredicateFailure
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c AdelegPredicateFailure
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; AdelegPredicateFailure -&gt; u
forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; AdelegPredicateFailure -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; AdelegPredicateFailure
-&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; AdelegPredicateFailure
-&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; AdelegPredicateFailure -&gt; m AdelegPredicateFailure
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; AdelegPredicateFailure -&gt; m AdelegPredicateFailure
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c AdelegPredicateFailure
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; AdelegPredicateFailure
-&gt; c AdelegPredicateFailure
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c AdelegPredicateFailure)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c AdelegPredicateFailure)
$cS_AlreadyADelegateOf :: Constr
$cS_AfterExistingDelegation :: Constr
$cS_NoLastDelegation :: Constr
$cS_BeforeExistingDelegation :: Constr
$tAdelegPredicateFailure :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; AdelegPredicateFailure -&gt; m AdelegPredicateFailure
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; AdelegPredicateFailure -&gt; m AdelegPredicateFailure
gmapMp :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; AdelegPredicateFailure -&gt; m AdelegPredicateFailure
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; AdelegPredicateFailure -&gt; m AdelegPredicateFailure
gmapM :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; AdelegPredicateFailure -&gt; m AdelegPredicateFailure
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; AdelegPredicateFailure -&gt; m AdelegPredicateFailure
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; AdelegPredicateFailure -&gt; u
$cgmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; AdelegPredicateFailure -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; AdelegPredicateFailure -&gt; [u]
$cgmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; AdelegPredicateFailure -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; AdelegPredicateFailure
-&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; AdelegPredicateFailure
-&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; AdelegPredicateFailure
-&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; AdelegPredicateFailure
-&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; AdelegPredicateFailure -&gt; AdelegPredicateFailure
$cgmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; AdelegPredicateFailure -&gt; AdelegPredicateFailure
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c AdelegPredicateFailure)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c AdelegPredicateFailure)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c AdelegPredicateFailure)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c AdelegPredicateFailure)
dataTypeOf :: AdelegPredicateFailure -&gt; DataType
$cdataTypeOf :: AdelegPredicateFailure -&gt; DataType
toConstr :: AdelegPredicateFailure -&gt; Constr
$ctoConstr :: AdelegPredicateFailure -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c AdelegPredicateFailure
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c AdelegPredicateFailure
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; AdelegPredicateFailure
-&gt; c AdelegPredicateFailure
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; AdelegPredicateFailure
-&gt; c AdelegPredicateFailure
$cp1Data :: Typeable AdelegPredicateFailure
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. AdelegPredicateFailure -&gt; Rep AdelegPredicateFailure x)
-&gt; (forall x.
    Rep AdelegPredicateFailure x -&gt; AdelegPredicateFailure)
-&gt; Generic AdelegPredicateFailure
forall x. Rep AdelegPredicateFailure x -&gt; AdelegPredicateFailure
forall x. AdelegPredicateFailure -&gt; Rep AdelegPredicateFailure x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep AdelegPredicateFailure x -&gt; AdelegPredicateFailure
$cfrom :: forall x. AdelegPredicateFailure -&gt; Rep AdelegPredicateFailure x
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679585281"><span id="local-6989586621679585283"><span id="local-6989586621679585285"><span class="annot"><span class="annottext">Context -&gt; AdelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
Proxy AdelegPredicateFailure -&gt; String
(Context -&gt; AdelegPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; AdelegPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy AdelegPredicateFailure -&gt; String)
-&gt; NoThunks AdelegPredicateFailure
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy AdelegPredicateFailure -&gt; String
$cshowTypeOf :: Proxy AdelegPredicateFailure -&gt; String
wNoThunks :: Context -&gt; AdelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; AdelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; AdelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; AdelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679585281"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-431"></span><span>
</span><span id="line-432"></span><span class="hs-comment">-- | Delegation rules</span><span>
</span><span id="line-433"></span><span class="hs-keyword">data</span><span> </span><span id="ADELEG"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEG"><span class="hs-identifier hs-var">ADELEG</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="%24tADELEG"><span id="local-6989586621679585252"><span id="local-6989586621679585254"><span id="local-6989586621679585256"><span id="local-6989586621679585258"><span id="local-6989586621679585260"><span id="local-6989586621679585262"><span id="local-6989586621679585264"><span id="local-6989586621679585266"><span id="local-6989586621679585268"><span id="local-6989586621679585270"><span id="local-6989586621679585272"><span id="local-6989586621679585274"><span id="local-6989586621679585276"><span id="local-6989586621679585278"><span class="annot"><span class="annottext">Typeable ADELEG
DataType
Typeable ADELEG
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; ADELEG -&gt; c ADELEG)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ADELEG)
-&gt; (ADELEG -&gt; Constr)
-&gt; (ADELEG -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ADELEG))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c ADELEG))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; ADELEG -&gt; ADELEG)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADELEG -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADELEG -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ADELEG -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ADELEG -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEG -&gt; m ADELEG)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEG -&gt; m ADELEG)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEG -&gt; m ADELEG)
-&gt; Data ADELEG
ADELEG -&gt; DataType
ADELEG -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; ADELEG -&gt; ADELEG
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ADELEG -&gt; c ADELEG
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ADELEG
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ADELEG -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ADELEG -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADELEG -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADELEG -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEG -&gt; m ADELEG
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEG -&gt; m ADELEG
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ADELEG
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ADELEG -&gt; c ADELEG
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ADELEG)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c ADELEG)
$tADELEG :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEG -&gt; m ADELEG
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEG -&gt; m ADELEG
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEG -&gt; m ADELEG
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEG -&gt; m ADELEG
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEG -&gt; m ADELEG
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEG -&gt; m ADELEG
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ADELEG -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ADELEG -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; ADELEG -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ADELEG -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADELEG -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADELEG -&gt; r
gmapQl :: (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADELEG -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADELEG -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; ADELEG -&gt; ADELEG
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; ADELEG -&gt; ADELEG
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c ADELEG)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c ADELEG)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ADELEG)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ADELEG)
dataTypeOf :: ADELEG -&gt; DataType
$cdataTypeOf :: ADELEG -&gt; DataType
toConstr :: ADELEG -&gt; Constr
$ctoConstr :: ADELEG -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ADELEG
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ADELEG
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ADELEG -&gt; c ADELEG
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ADELEG -&gt; c ADELEG
$cp1Data :: Typeable ADELEG
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-434"></span><span>
</span><span id="line-435"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679585241"><span id="local-6989586621679585243"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEG"><span class="hs-identifier hs-type">ADELEG</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-436"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="State"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">State</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEG"><span class="hs-identifier hs-type">ADELEG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span>
</span><span id="line-437"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Signal"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">Signal</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEG"><span class="hs-identifier hs-type">ADELEG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Slot</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-438"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Environment"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">Environment</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEG"><span class="hs-identifier hs-type">ADELEG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span>
</span><span id="line-439"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PredicateFailure"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">PredicateFailure</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEG"><span class="hs-identifier hs-type">ADELEG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#AdelegPredicateFailure"><span class="hs-identifier hs-type">AdelegPredicateFailure</span></a></span><span>
</span><span id="line-440"></span><span>
</span><span id="line-441"></span><span>  </span><span id="local-6989586621679585240"><span class="annot"><span class="annottext">initialRules :: [InitialRule ADELEG]
</span><a href="#local-6989586621679585240"><span class="hs-identifier hs-var hs-var hs-var hs-var">initialRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-442"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-443"></span><span>        </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">IRC</span></a></span><span> </span><span id="local-6989586621679585239"><span class="annot"><span class="annottext">Environment ADELEG
</span><a href="#local-6989586621679585239"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">F (Clause ADELEG 'Initial) (IRC ADELEG)
forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-444"></span><span>        </span><span class="annot"><span class="annottext">DState -&gt; F (Clause ADELEG 'Initial) DState
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span>
</span><span id="line-445"></span><span>          </span><span class="annot"><span class="annottext">DState :: Bimap VKeyGenesis VKey -&gt; Map VKeyGenesis Slot -&gt; DState
</span><a href="Byron.Spec.Ledger.Delegation.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span>
</span><span id="line-446"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_dStateDelegationMap :: Bimap VKeyGenesis VKey
</span><a href="Byron.Spec.Ledger.Delegation.html#_dStateDelegationMap"><span class="hs-identifier hs-var">_dStateDelegationMap</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-447"></span><span>                </span><span class="annot"><span class="annottext">[(VKeyGenesis, VKey)] -&gt; Bimap VKeyGenesis VKey
forall a b. (Ord a, Ord b) =&gt; [(a, b)] -&gt; Bimap a b
</span><a href="../../../../bimap/html/src"><span class="hs-identifier hs-var">Bimap.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">([(VKeyGenesis, VKey)] -&gt; Bimap VKeyGenesis VKey)
-&gt; [(VKeyGenesis, VKey)] -&gt; Bimap VKeyGenesis VKey
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-448"></span><span>                  </span><span class="annot"><span class="annottext">(VKeyGenesis -&gt; (VKeyGenesis, VKey))
-&gt; [VKeyGenesis] -&gt; [(VKeyGenesis, VKey)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679585237"><span class="annot"><span class="annottext">vkg :: VKeyGenesis
</span><a href="#local-6989586621679585237"><span class="hs-identifier hs-var">vkg</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span> </span><span id="local-6989586621679585236"><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679585236"><span class="hs-identifier hs-var">key</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679585237"><span class="hs-identifier hs-var">vkg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679585236"><span class="hs-identifier hs-var">key</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set VKeyGenesis -&gt; [VKeyGenesis]
forall a. Set a -&gt; [a]
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Set.toList</span></a></span><span> </span><span class="annot"><span class="annottext">Set VKeyGenesis
Environment ADELEG
</span><a href="#local-6989586621679585239"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-449"></span><span>              </span><span class="annot"><span class="annottext">_dStateLastDelegation :: Map VKeyGenesis Slot
</span><a href="Byron.Spec.Ledger.Delegation.html#_dStateLastDelegation"><span class="hs-identifier hs-var">_dStateLastDelegation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(VKeyGenesis -&gt; Slot) -&gt; Set VKeyGenesis -&gt; Map VKeyGenesis Slot
forall k a. (k -&gt; a) -&gt; Set k -&gt; Map k a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Map.fromSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Slot -&gt; VKeyGenesis -&gt; Slot
forall a b. a -&gt; b -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; Slot
</span><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-var">Slot</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set VKeyGenesis
Environment ADELEG
</span><a href="#local-6989586621679585239"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-450"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-451"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-452"></span><span>
</span><span id="line-453"></span><span>  </span><span id="local-6989586621679585232"><span class="annot"><span class="annottext">transitionRules :: [TransitionRule ADELEG]
</span><a href="#local-6989586621679585232"><span class="hs-identifier hs-var hs-var hs-var hs-var">transitionRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-454"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-455"></span><span>        </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">TRC</span></a></span><span>
</span><span id="line-456"></span><span>          </span><span class="hs-special">(</span><span> </span><span id="local-6989586621679585231"><span class="annot"><span class="annottext">Environment ADELEG
</span><a href="#local-6989586621679585231"><span class="hs-identifier hs-var">_env</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-457"></span><span>            </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span>
</span><span id="line-458"></span><span>              </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#_dStateDelegationMap"><span class="hs-identifier hs-var">_dStateDelegationMap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679585230"><span class="annot"><a href="#local-6989586621679585230"><span class="hs-identifier hs-var">dms</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-459"></span><span>                </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#_dStateLastDelegation"><span class="hs-identifier hs-var">_dStateLastDelegation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679585229"><span class="annot"><a href="#local-6989586621679585229"><span class="hs-identifier hs-var">dws</span></a></span></span><span>
</span><span id="line-460"></span><span>              </span><span class="hs-special">}</span><span class="hs-special">,</span><span>
</span><span id="line-461"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621679585228"><span class="annot"><a href="#local-6989586621679585228"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679585227"><span class="annot"><a href="#local-6989586621679585227"><span class="hs-identifier hs-var">vks</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679585226"><span class="annot"><a href="#local-6989586621679585226"><span class="hs-identifier hs-var">vkd</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-462"></span><span>            </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-463"></span><span>          </span><span class="annot"><span class="annottext">F (Clause ADELEG 'Transition) (TRC ADELEG)
forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-464"></span><span>        </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679585226"><span class="hs-identifier hs-var">vkd</span></a></span><span> </span><span class="annot"><span class="annottext">VKey -&gt; Set VKey -&gt; Bool
forall a (f :: * -&gt; *). (Eq a, Foldable f) =&gt; a -&gt; f a -&gt; Bool
</span><a href="Byron.Spec.Ledger.Core.html#%2209"><span class="hs-operator hs-var">&#8713;</span></a></span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey -&gt; Set (Range (Bimap VKeyGenesis VKey))
forall m. (Relation m, Ord (Range m)) =&gt; m -&gt; Set (Range m)
</span><a href="Byron.Spec.Ledger.Core.html#range"><span class="hs-identifier hs-var">range</span></a></span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><a href="#local-6989586621679585230"><span class="hs-identifier hs-var">dms</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure ADELEG -&gt; Rule ADELEG 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../../../../small-steps/html/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">VKey -&gt; VKeyGenesis -&gt; AdelegPredicateFailure
</span><a href="Byron.Spec.Ledger.Delegation.html#S_AlreadyADelegateOf"><span class="hs-identifier hs-var">S_AlreadyADelegateOf</span></a></span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679585226"><span class="hs-identifier hs-var">vkd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><a href="#local-6989586621679585230"><span class="hs-identifier hs-var">dms</span></a></span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey -&gt; VKey -&gt; VKeyGenesis
forall a b. (Ord a, Ord b) =&gt; Bimap a b -&gt; b -&gt; a
</span><a href="../../../../bimap/html/src"><span class="hs-operator hs-var">!&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679585226"><span class="hs-identifier hs-var">vkd</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-465"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">VKeyGenesis -&gt; Map VKeyGenesis Slot -&gt; Maybe Slot
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679585227"><span class="hs-identifier hs-var">vks</span></a></span><span> </span><span class="annot"><span class="annottext">Map VKeyGenesis Slot
</span><a href="#local-6989586621679585229"><span class="hs-identifier hs-var">dws</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-466"></span><span>          </span><span class="annot"><span class="annottext">Maybe Slot
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; Rule ADELEG 'Transition ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- If vks hasn't delegated, then we proceed and</span><span>
</span><span id="line-467"></span><span>          </span><span class="hs-comment">-- update the @ADELEG@ state.</span><span>
</span><span id="line-468"></span><span>          </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679585224"><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679585224"><span class="hs-identifier hs-var">sp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679585224"><span class="hs-identifier hs-var">sp</span></a></span><span> </span><span class="annot"><span class="annottext">Slot -&gt; Slot -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679585228"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure ADELEG -&gt; Rule ADELEG 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../../../../small-steps/html/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">PredicateFailure ADELEG
AdelegPredicateFailure
</span><a href="Byron.Spec.Ledger.Delegation.html#S_BeforeExistingDelegation"><span class="hs-identifier hs-var">S_BeforeExistingDelegation</span></a></span><span>
</span><span id="line-469"></span><span>        </span><span class="annot"><span class="annottext">DState -&gt; F (Clause ADELEG 'Transition) DState
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span>
</span><span id="line-470"></span><span>          </span><span class="annot"><span class="annottext">(DState -&gt; F (Clause ADELEG 'Transition) DState)
-&gt; DState -&gt; F (Clause ADELEG 'Transition) DState
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">DState :: Bimap VKeyGenesis VKey -&gt; Map VKeyGenesis Slot -&gt; DState
</span><a href="Byron.Spec.Ledger.Delegation.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span>
</span><span id="line-471"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_dStateDelegationMap :: Bimap VKeyGenesis VKey
</span><a href="Byron.Spec.Ledger.Delegation.html#_dStateDelegationMap"><span class="hs-identifier hs-var">_dStateDelegationMap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><a href="#local-6989586621679585230"><span class="hs-identifier hs-var">dms</span></a></span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
-&gt; [(Domain (Bimap VKeyGenesis VKey),
     Range (Bimap VKeyGenesis VKey))]
-&gt; Bimap VKeyGenesis VKey
forall m (f :: * -&gt; *).
(Relation m, Ord (Domain m), Ord (Range m), Foldable f) =&gt;
m -&gt; f (Domain m, Range m) -&gt; m
</span><a href="Byron.Spec.Ledger.Core.html#%2A03"><span class="hs-operator hs-var">&#10755;</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679585227"><span class="hs-identifier hs-var">vks</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679585226"><span class="hs-identifier hs-var">vkd</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-472"></span><span>              </span><span class="annot"><span class="annottext">_dStateLastDelegation :: Map VKeyGenesis Slot
</span><a href="Byron.Spec.Ledger.Delegation.html#_dStateLastDelegation"><span class="hs-identifier hs-var">_dStateLastDelegation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map VKeyGenesis Slot
</span><a href="#local-6989586621679585229"><span class="hs-identifier hs-var">dws</span></a></span><span> </span><span class="annot"><span class="annottext">Map VKeyGenesis Slot
-&gt; [(Domain (Map VKeyGenesis Slot), Range (Map VKeyGenesis Slot))]
-&gt; Map VKeyGenesis Slot
forall m (f :: * -&gt; *).
(Relation m, Ord (Domain m), Ord (Range m), Foldable f) =&gt;
m -&gt; f (Domain m, Range m) -&gt; m
</span><a href="Byron.Spec.Ledger.Core.html#%2A03"><span class="hs-operator hs-var">&#10755;</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679585227"><span class="hs-identifier hs-var">vks</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679585228"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-473"></span><span>            </span><span class="hs-special">}</span><span class="hs-special">,</span><span>
</span><span id="line-474"></span><span>      </span><span class="hs-keyword">do</span><span>
</span><span id="line-475"></span><span>        </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">TRC</span></a></span><span>
</span><span id="line-476"></span><span>          </span><span class="hs-special">(</span><span> </span><span id="local-6989586621679585221"><span class="annot"><span class="annottext">Environment ADELEG
</span><a href="#local-6989586621679585221"><span class="hs-identifier hs-var">_env</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-477"></span><span>            </span><span id="local-6989586621679585220"><span class="annot"><span class="annottext">st :: State ADELEG
</span><a href="#local-6989586621679585220"><span class="hs-identifier hs-var">st</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span>
</span><span id="line-478"></span><span>              </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#_dStateDelegationMap"><span class="hs-identifier hs-var">_dStateDelegationMap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679585219"><span class="annot"><a href="#local-6989586621679585219"><span class="hs-identifier hs-var">dms</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-479"></span><span>                </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#_dStateLastDelegation"><span class="hs-identifier hs-var">_dStateLastDelegation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679585218"><span class="annot"><a href="#local-6989586621679585218"><span class="hs-identifier hs-var">dws</span></a></span></span><span>
</span><span id="line-480"></span><span>              </span><span class="hs-special">}</span><span class="hs-special">,</span><span>
</span><span id="line-481"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621679585217"><span class="annot"><a href="#local-6989586621679585217"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679585216"><span class="annot"><a href="#local-6989586621679585216"><span class="hs-identifier hs-var">vks</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679585215"><span class="annot"><a href="#local-6989586621679585215"><span class="hs-identifier hs-var">vkd</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-482"></span><span>            </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-483"></span><span>          </span><span class="annot"><span class="annottext">F (Clause ADELEG 'Transition) (TRC ADELEG)
forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-484"></span><span>        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679585215"><span class="hs-identifier hs-var">vkd</span></a></span><span> </span><span class="annot"><span class="annottext">VKey -&gt; Set VKey -&gt; Bool
forall a (f :: * -&gt; *). (Eq a, Foldable f) =&gt; a -&gt; f a -&gt; Bool
</span><a href="Byron.Spec.Ledger.Core.html#%2208"><span class="hs-operator hs-var">&#8712;</span></a></span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey -&gt; Set (Range (Bimap VKeyGenesis VKey))
forall m. (Relation m, Ord (Range m)) =&gt; m -&gt; Set (Range m)
</span><a href="Byron.Spec.Ledger.Core.html#range"><span class="hs-identifier hs-var">range</span></a></span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><a href="#local-6989586621679585219"><span class="hs-identifier hs-var">dms</span></a></span><span>
</span><span id="line-485"></span><span>          </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">DState -&gt; F (Clause ADELEG 'Transition) DState
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">State ADELEG
DState
</span><a href="#local-6989586621679585220"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-486"></span><span>          </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-487"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">VKeyGenesis -&gt; Map VKeyGenesis Slot -&gt; Maybe Slot
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679585216"><span class="hs-identifier hs-var">vks</span></a></span><span> </span><span class="annot"><span class="annottext">Map VKeyGenesis Slot
</span><a href="#local-6989586621679585218"><span class="hs-identifier hs-var">dws</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-488"></span><span>              </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679585214"><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679585214"><span class="hs-identifier hs-var">sp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679585214"><span class="hs-identifier hs-var">sp</span></a></span><span> </span><span class="annot"><span class="annottext">Slot -&gt; Slot -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679585217"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PredicateFailure ADELEG -&gt; Rule ADELEG 'Transition ()
forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../../../../small-steps/html/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">PredicateFailure ADELEG
AdelegPredicateFailure
</span><a href="Byron.Spec.Ledger.Delegation.html#S_AfterExistingDelegation"><span class="hs-identifier hs-var">S_AfterExistingDelegation</span></a></span><span>
</span><span id="line-489"></span><span>              </span><span class="annot"><span class="annottext">Maybe Slot
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-490"></span><span>                </span><span class="annot"><span class="annottext">String -&gt; Rule ADELEG 'Transition ()
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Rule ADELEG 'Transition ())
-&gt; String -&gt; Rule ADELEG 'Transition ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-491"></span><span>                  </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;This can't happen since otherwise &quot;</span></span><span>
</span><span id="line-492"></span><span>                    </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;the previous rule would have been triggered.&quot;</span></span><span>
</span><span id="line-493"></span><span>            </span><span class="annot"><span class="annottext">DState -&gt; F (Clause ADELEG 'Transition) DState
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">State ADELEG
DState
</span><a href="#local-6989586621679585220"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-494"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-495"></span><span>
</span><span id="line-496"></span><span class="hs-comment">-- | Delegation scheduling sequencing</span><span>
</span><span id="line-497"></span><span class="hs-keyword">data</span><span> </span><span id="SDELEGS"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEGS"><span class="hs-identifier hs-var">SDELEGS</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="%24tSDELEGS"><span id="local-6989586621679585184"><span id="local-6989586621679585186"><span id="local-6989586621679585188"><span id="local-6989586621679585190"><span id="local-6989586621679585192"><span id="local-6989586621679585194"><span id="local-6989586621679585196"><span id="local-6989586621679585198"><span id="local-6989586621679585200"><span id="local-6989586621679585202"><span id="local-6989586621679585204"><span id="local-6989586621679585206"><span id="local-6989586621679585208"><span id="local-6989586621679585210"><span class="annot"><span class="annottext">Typeable SDELEGS
DataType
Typeable SDELEGS
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; SDELEGS -&gt; c SDELEGS)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SDELEGS)
-&gt; (SDELEGS -&gt; Constr)
-&gt; (SDELEGS -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c SDELEGS))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c SDELEGS))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; SDELEGS -&gt; SDELEGS)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SDELEGS -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SDELEGS -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; SDELEGS -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; SDELEGS -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEGS -&gt; m SDELEGS)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEGS -&gt; m SDELEGS)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEGS -&gt; m SDELEGS)
-&gt; Data SDELEGS
SDELEGS -&gt; DataType
SDELEGS -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; SDELEGS -&gt; SDELEGS
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; SDELEGS -&gt; c SDELEGS
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SDELEGS
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; SDELEGS -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; SDELEGS -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SDELEGS -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SDELEGS -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEGS -&gt; m SDELEGS
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEGS -&gt; m SDELEGS
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SDELEGS
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; SDELEGS -&gt; c SDELEGS
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c SDELEGS)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c SDELEGS)
$tSDELEGS :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEGS -&gt; m SDELEGS
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEGS -&gt; m SDELEGS
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEGS -&gt; m SDELEGS
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEGS -&gt; m SDELEGS
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEGS -&gt; m SDELEGS
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEGS -&gt; m SDELEGS
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; SDELEGS -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; SDELEGS -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; SDELEGS -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; SDELEGS -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SDELEGS -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SDELEGS -&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SDELEGS -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SDELEGS -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; SDELEGS -&gt; SDELEGS
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; SDELEGS -&gt; SDELEGS
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c SDELEGS)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c SDELEGS)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c SDELEGS)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c SDELEGS)
dataTypeOf :: SDELEGS -&gt; DataType
$cdataTypeOf :: SDELEGS -&gt; DataType
toConstr :: SDELEGS -&gt; Constr
$ctoConstr :: SDELEGS -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SDELEGS
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SDELEGS
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; SDELEGS -&gt; c SDELEGS
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; SDELEGS -&gt; c SDELEGS
$cp1Data :: Typeable SDELEGS
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-498"></span><span>
</span><span id="line-499"></span><span id="local-6989586621679585181"><span id="local-6989586621679585182"></span></span><span class="hs-keyword">data</span><span> </span><span id="SdelegsPredicateFailure"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SdelegsPredicateFailure"><span class="hs-identifier hs-var">SdelegsPredicateFailure</span></a></span></span><span>
</span><span id="line-500"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="SDelegFailure"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDelegFailure"><span class="hs-identifier hs-var">SDelegFailure</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEG"><span class="hs-identifier hs-type">SDELEG</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-501"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679585176"><span id="local-6989586621679585178"><span class="annot"><span class="annottext">SdelegsPredicateFailure -&gt; SdelegsPredicateFailure -&gt; Bool
(SdelegsPredicateFailure -&gt; SdelegsPredicateFailure -&gt; Bool)
-&gt; (SdelegsPredicateFailure -&gt; SdelegsPredicateFailure -&gt; Bool)
-&gt; Eq SdelegsPredicateFailure
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: SdelegsPredicateFailure -&gt; SdelegsPredicateFailure -&gt; Bool
$c/= :: SdelegsPredicateFailure -&gt; SdelegsPredicateFailure -&gt; Bool
== :: SdelegsPredicateFailure -&gt; SdelegsPredicateFailure -&gt; Bool
$c== :: SdelegsPredicateFailure -&gt; SdelegsPredicateFailure -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679585170"><span id="local-6989586621679585172"><span id="local-6989586621679585174"><span class="annot"><span class="annottext">Int -&gt; SdelegsPredicateFailure -&gt; ShowS
[SdelegsPredicateFailure] -&gt; ShowS
SdelegsPredicateFailure -&gt; String
(Int -&gt; SdelegsPredicateFailure -&gt; ShowS)
-&gt; (SdelegsPredicateFailure -&gt; String)
-&gt; ([SdelegsPredicateFailure] -&gt; ShowS)
-&gt; Show SdelegsPredicateFailure
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [SdelegsPredicateFailure] -&gt; ShowS
$cshowList :: [SdelegsPredicateFailure] -&gt; ShowS
show :: SdelegsPredicateFailure -&gt; String
$cshow :: SdelegsPredicateFailure -&gt; String
showsPrec :: Int -&gt; SdelegsPredicateFailure -&gt; ShowS
$cshowsPrec :: Int -&gt; SdelegsPredicateFailure -&gt; ShowS
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cSDelegFailure"><span id="%24tSdelegsPredicateFailure"><span id="local-6989586621679585141"><span id="local-6989586621679585143"><span id="local-6989586621679585145"><span id="local-6989586621679585147"><span id="local-6989586621679585149"><span id="local-6989586621679585151"><span id="local-6989586621679585153"><span id="local-6989586621679585155"><span id="local-6989586621679585157"><span id="local-6989586621679585159"><span id="local-6989586621679585161"><span id="local-6989586621679585163"><span id="local-6989586621679585165"><span id="local-6989586621679585167"><span class="annot"><span class="annottext">Typeable SdelegsPredicateFailure
DataType
Constr
Typeable SdelegsPredicateFailure
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g)
    -&gt; SdelegsPredicateFailure
    -&gt; c SdelegsPredicateFailure)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SdelegsPredicateFailure)
-&gt; (SdelegsPredicateFailure -&gt; Constr)
-&gt; (SdelegsPredicateFailure -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c SdelegsPredicateFailure))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c SdelegsPredicateFailure))
-&gt; ((forall b. Data b =&gt; b -&gt; b)
    -&gt; SdelegsPredicateFailure -&gt; SdelegsPredicateFailure)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; SdelegsPredicateFailure
    -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; SdelegsPredicateFailure
    -&gt; r)
-&gt; (forall u.
    (forall d. Data d =&gt; d -&gt; u) -&gt; SdelegsPredicateFailure -&gt; [u])
-&gt; (forall u.
    Int
    -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; SdelegsPredicateFailure -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; SdelegsPredicateFailure -&gt; m SdelegsPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; SdelegsPredicateFailure -&gt; m SdelegsPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; SdelegsPredicateFailure -&gt; m SdelegsPredicateFailure)
-&gt; Data SdelegsPredicateFailure
SdelegsPredicateFailure -&gt; DataType
SdelegsPredicateFailure -&gt; Constr
(forall b. Data b =&gt; b -&gt; b)
-&gt; SdelegsPredicateFailure -&gt; SdelegsPredicateFailure
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; SdelegsPredicateFailure
-&gt; c SdelegsPredicateFailure
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SdelegsPredicateFailure
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; SdelegsPredicateFailure -&gt; u
forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; SdelegsPredicateFailure -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; SdelegsPredicateFailure
-&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; SdelegsPredicateFailure
-&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; SdelegsPredicateFailure -&gt; m SdelegsPredicateFailure
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; SdelegsPredicateFailure -&gt; m SdelegsPredicateFailure
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SdelegsPredicateFailure
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; SdelegsPredicateFailure
-&gt; c SdelegsPredicateFailure
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c SdelegsPredicateFailure)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c SdelegsPredicateFailure)
$cSDelegFailure :: Constr
$tSdelegsPredicateFailure :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; SdelegsPredicateFailure -&gt; m SdelegsPredicateFailure
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; SdelegsPredicateFailure -&gt; m SdelegsPredicateFailure
gmapMp :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; SdelegsPredicateFailure -&gt; m SdelegsPredicateFailure
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; SdelegsPredicateFailure -&gt; m SdelegsPredicateFailure
gmapM :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; SdelegsPredicateFailure -&gt; m SdelegsPredicateFailure
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; SdelegsPredicateFailure -&gt; m SdelegsPredicateFailure
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; SdelegsPredicateFailure -&gt; u
$cgmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; SdelegsPredicateFailure -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; SdelegsPredicateFailure -&gt; [u]
$cgmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; SdelegsPredicateFailure -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; SdelegsPredicateFailure
-&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; SdelegsPredicateFailure
-&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; SdelegsPredicateFailure
-&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; SdelegsPredicateFailure
-&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; SdelegsPredicateFailure -&gt; SdelegsPredicateFailure
$cgmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; SdelegsPredicateFailure -&gt; SdelegsPredicateFailure
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c SdelegsPredicateFailure)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c SdelegsPredicateFailure)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c SdelegsPredicateFailure)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c SdelegsPredicateFailure)
dataTypeOf :: SdelegsPredicateFailure -&gt; DataType
$cdataTypeOf :: SdelegsPredicateFailure -&gt; DataType
toConstr :: SdelegsPredicateFailure -&gt; Constr
$ctoConstr :: SdelegsPredicateFailure -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SdelegsPredicateFailure
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SdelegsPredicateFailure
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; SdelegsPredicateFailure
-&gt; c SdelegsPredicateFailure
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; SdelegsPredicateFailure
-&gt; c SdelegsPredicateFailure
$cp1Data :: Typeable SdelegsPredicateFailure
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x.
 SdelegsPredicateFailure -&gt; Rep SdelegsPredicateFailure x)
-&gt; (forall x.
    Rep SdelegsPredicateFailure x -&gt; SdelegsPredicateFailure)
-&gt; Generic SdelegsPredicateFailure
forall x. Rep SdelegsPredicateFailure x -&gt; SdelegsPredicateFailure
forall x. SdelegsPredicateFailure -&gt; Rep SdelegsPredicateFailure x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep SdelegsPredicateFailure x -&gt; SdelegsPredicateFailure
$cfrom :: forall x. SdelegsPredicateFailure -&gt; Rep SdelegsPredicateFailure x
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679585131"><span id="local-6989586621679585133"><span id="local-6989586621679585135"><span class="annot"><span class="annottext">Context -&gt; SdelegsPredicateFailure -&gt; IO (Maybe ThunkInfo)
Proxy SdelegsPredicateFailure -&gt; String
(Context -&gt; SdelegsPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; SdelegsPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy SdelegsPredicateFailure -&gt; String)
-&gt; NoThunks SdelegsPredicateFailure
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy SdelegsPredicateFailure -&gt; String
$cshowTypeOf :: Proxy SdelegsPredicateFailure -&gt; String
wNoThunks :: Context -&gt; SdelegsPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; SdelegsPredicateFailure -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; SdelegsPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; SdelegsPredicateFailure -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679585131"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-502"></span><span>
</span><span id="line-503"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679585121"><span id="local-6989586621679585123"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEGS"><span class="hs-identifier hs-type">SDELEGS</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-504"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="State"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">State</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEGS"><span class="hs-identifier hs-type">SDELEGS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSState"><span class="hs-identifier hs-type">DSState</span></a></span><span>
</span><span id="line-505"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Signal"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">Signal</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEGS"><span class="hs-identifier hs-type">SDELEGS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-506"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Environment"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">Environment</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEGS"><span class="hs-identifier hs-type">SDELEGS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSEnv"><span class="hs-identifier hs-type">DSEnv</span></a></span><span>
</span><span id="line-507"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PredicateFailure"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">PredicateFailure</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEGS"><span class="hs-identifier hs-type">SDELEGS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SdelegsPredicateFailure"><span class="hs-identifier hs-type">SdelegsPredicateFailure</span></a></span><span>
</span><span id="line-508"></span><span>
</span><span id="line-509"></span><span>  </span><span id="local-6989586621679585120"><span class="annot"><span class="annottext">initialRules :: [InitialRule SDELEGS]
</span><a href="#local-6989586621679585120"><span class="hs-identifier hs-var hs-var hs-var hs-var">initialRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-510"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-511"></span><span>        </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">IRC</span></a></span><span> </span><span id="local-6989586621679585119"><span class="annot"><span class="annottext">Environment SDELEGS
</span><a href="#local-6989586621679585119"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">F (Clause SDELEGS 'Initial) (IRC SDELEGS)
forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-512"></span><span>        </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
forall super (rtype :: RuleType).
Embed SDELEG super =&gt;
RuleContext rtype SDELEG -&gt; Rule super rtype (State SDELEG)
</span><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEG"><span class="hs-identifier hs-type">SDELEG</span></a></span><span> </span><span class="annot"><span class="annottext">(RuleContext 'Initial SDELEG
 -&gt; Rule SDELEGS 'Initial (State SDELEG))
-&gt; RuleContext 'Initial SDELEG
-&gt; Rule SDELEGS 'Initial (State SDELEG)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Environment SDELEG -&gt; IRC SDELEG
forall sts. Environment sts -&gt; IRC sts
</span><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">IRC</span></a></span><span> </span><span class="annot"><span class="annottext">Environment SDELEGS
Environment SDELEG
</span><a href="#local-6989586621679585119"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-513"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-514"></span><span>  </span><span id="local-6989586621679585118"><span class="annot"><span class="annottext">transitionRules :: [TransitionRule SDELEGS]
</span><a href="#local-6989586621679585118"><span class="hs-identifier hs-var hs-var hs-var hs-var">transitionRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-515"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-516"></span><span>        </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">TRC</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679585117"><span class="annot"><span class="annottext">Environment SDELEGS
</span><a href="#local-6989586621679585117"><span class="hs-identifier hs-var">env</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679585116"><span class="annot"><span class="annottext">State SDELEGS
</span><a href="#local-6989586621679585116"><span class="hs-identifier hs-var">st</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679585115"><span class="annot"><span class="annottext">Signal SDELEGS
</span><a href="#local-6989586621679585115"><span class="hs-identifier hs-var">sig</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">F (Clause SDELEGS 'Transition) (TRC SDELEGS)
forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-517"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Signal SDELEGS
</span><a href="#local-6989586621679585115"><span class="hs-identifier hs-var">sig</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-518"></span><span>          </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DSState -&gt; F (Clause SDELEGS 'Transition) DSState
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">State SDELEGS
DSState
</span><a href="#local-6989586621679585116"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-519"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621679585114"><span class="annot"><a href="#local-6989586621679585114"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">:</span></a></span><span> </span><span id="local-6989586621679585113"><span class="annot"><a href="#local-6989586621679585113"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-520"></span><span>            </span><span id="local-6989586621679585112"><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679585112"><span class="hs-identifier hs-var">dss'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
forall super (rtype :: RuleType).
Embed SDELEG super =&gt;
RuleContext rtype SDELEG -&gt; Rule super rtype (State SDELEG)
</span><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEG"><span class="hs-identifier hs-type">SDELEG</span></a></span><span> </span><span class="annot"><span class="annottext">(RuleContext 'Transition SDELEG
 -&gt; Rule SDELEGS 'Transition (State SDELEG))
-&gt; RuleContext 'Transition SDELEG
-&gt; Rule SDELEGS 'Transition (State SDELEG)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Environment SDELEG, State SDELEG, Signal SDELEG) -&gt; TRC SDELEG
forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment SDELEGS
Environment SDELEG
</span><a href="#local-6989586621679585117"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">State SDELEGS
State SDELEG
</span><a href="#local-6989586621679585116"><span class="hs-identifier hs-var">st</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Signal SDELEG
DCert
</span><a href="#local-6989586621679585114"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-521"></span><span>            </span><span id="local-6989586621679585111"><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679585111"><span class="hs-identifier hs-var">dss''</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
forall super (rtype :: RuleType).
Embed SDELEGS super =&gt;
RuleContext rtype SDELEGS -&gt; Rule super rtype (State SDELEGS)
</span><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEGS"><span class="hs-identifier hs-type">SDELEGS</span></a></span><span> </span><span class="annot"><span class="annottext">(RuleContext 'Transition SDELEGS -&gt; TransitionRule SDELEGS)
-&gt; RuleContext 'Transition SDELEGS -&gt; TransitionRule SDELEGS
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Environment SDELEGS, State SDELEGS, Signal SDELEGS) -&gt; TRC SDELEGS
forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment SDELEGS
</span><a href="#local-6989586621679585117"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">State SDELEGS
DSState
</span><a href="#local-6989586621679585112"><span class="hs-identifier hs-var">dss'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[DCert]
Signal SDELEGS
</span><a href="#local-6989586621679585113"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-522"></span><span>            </span><span class="annot"><span class="annottext">DSState -&gt; F (Clause SDELEGS 'Transition) DSState
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679585111"><span class="hs-identifier hs-var">dss''</span></a></span><span>
</span><span id="line-523"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-524"></span><span>
</span><span id="line-525"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679585106"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">Embed</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEG"><span class="hs-identifier hs-type">SDELEG</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEGS"><span class="hs-identifier hs-type">SDELEGS</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-526"></span><span>  </span><span id="local-6989586621679585104"><span class="annot"><span class="annottext">wrapFailed :: PredicateFailure SDELEG -&gt; PredicateFailure SDELEGS
</span><a href="#local-6989586621679585104"><span class="hs-identifier hs-var hs-var hs-var hs-var">wrapFailed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PredicateFailure SDELEG -&gt; PredicateFailure SDELEGS
PredicateFailure SDELEG -&gt; SdelegsPredicateFailure
</span><a href="Byron.Spec.Ledger.Delegation.html#SDelegFailure"><span class="hs-identifier hs-var">SDelegFailure</span></a></span><span>
</span><span id="line-527"></span><span>
</span><span id="line-528"></span><span class="hs-comment">-- | Delegation rules sequencing</span><span>
</span><span id="line-529"></span><span class="hs-keyword">data</span><span> </span><span id="ADELEGS"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEGS"><span class="hs-identifier hs-var">ADELEGS</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="%24tADELEGS"><span id="local-6989586621679585075"><span id="local-6989586621679585077"><span id="local-6989586621679585079"><span id="local-6989586621679585081"><span id="local-6989586621679585083"><span id="local-6989586621679585085"><span id="local-6989586621679585087"><span id="local-6989586621679585089"><span id="local-6989586621679585091"><span id="local-6989586621679585093"><span id="local-6989586621679585095"><span id="local-6989586621679585097"><span id="local-6989586621679585099"><span id="local-6989586621679585101"><span class="annot"><span class="annottext">Typeable ADELEGS
DataType
Typeable ADELEGS
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; ADELEGS -&gt; c ADELEGS)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ADELEGS)
-&gt; (ADELEGS -&gt; Constr)
-&gt; (ADELEGS -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ADELEGS))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c ADELEGS))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; ADELEGS -&gt; ADELEGS)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADELEGS -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADELEGS -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ADELEGS -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ADELEGS -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEGS -&gt; m ADELEGS)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEGS -&gt; m ADELEGS)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEGS -&gt; m ADELEGS)
-&gt; Data ADELEGS
ADELEGS -&gt; DataType
ADELEGS -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; ADELEGS -&gt; ADELEGS
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ADELEGS -&gt; c ADELEGS
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ADELEGS
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ADELEGS -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ADELEGS -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADELEGS -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADELEGS -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEGS -&gt; m ADELEGS
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEGS -&gt; m ADELEGS
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ADELEGS
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ADELEGS -&gt; c ADELEGS
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ADELEGS)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c ADELEGS)
$tADELEGS :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEGS -&gt; m ADELEGS
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEGS -&gt; m ADELEGS
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEGS -&gt; m ADELEGS
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEGS -&gt; m ADELEGS
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEGS -&gt; m ADELEGS
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEGS -&gt; m ADELEGS
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ADELEGS -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ADELEGS -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; ADELEGS -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ADELEGS -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADELEGS -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADELEGS -&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADELEGS -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADELEGS -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; ADELEGS -&gt; ADELEGS
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; ADELEGS -&gt; ADELEGS
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c ADELEGS)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c ADELEGS)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ADELEGS)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ADELEGS)
dataTypeOf :: ADELEGS -&gt; DataType
$cdataTypeOf :: ADELEGS -&gt; DataType
toConstr :: ADELEGS -&gt; Constr
$ctoConstr :: ADELEGS -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ADELEGS
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ADELEGS
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ADELEGS -&gt; c ADELEGS
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ADELEGS -&gt; c ADELEGS
$cp1Data :: Typeable ADELEGS
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-530"></span><span>
</span><span id="line-531"></span><span id="local-6989586621679585072"><span id="local-6989586621679585073"></span></span><span class="hs-keyword">data</span><span> </span><span id="AdelegsPredicateFailure"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#AdelegsPredicateFailure"><span class="hs-identifier hs-var">AdelegsPredicateFailure</span></a></span></span><span>
</span><span id="line-532"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="ADelegFailure"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADelegFailure"><span class="hs-identifier hs-var">ADelegFailure</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEG"><span class="hs-identifier hs-type">ADELEG</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-533"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679585067"><span id="local-6989586621679585069"><span class="annot"><span class="annottext">AdelegsPredicateFailure -&gt; AdelegsPredicateFailure -&gt; Bool
(AdelegsPredicateFailure -&gt; AdelegsPredicateFailure -&gt; Bool)
-&gt; (AdelegsPredicateFailure -&gt; AdelegsPredicateFailure -&gt; Bool)
-&gt; Eq AdelegsPredicateFailure
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: AdelegsPredicateFailure -&gt; AdelegsPredicateFailure -&gt; Bool
$c/= :: AdelegsPredicateFailure -&gt; AdelegsPredicateFailure -&gt; Bool
== :: AdelegsPredicateFailure -&gt; AdelegsPredicateFailure -&gt; Bool
$c== :: AdelegsPredicateFailure -&gt; AdelegsPredicateFailure -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679585061"><span id="local-6989586621679585063"><span id="local-6989586621679585065"><span class="annot"><span class="annottext">Int -&gt; AdelegsPredicateFailure -&gt; ShowS
[AdelegsPredicateFailure] -&gt; ShowS
AdelegsPredicateFailure -&gt; String
(Int -&gt; AdelegsPredicateFailure -&gt; ShowS)
-&gt; (AdelegsPredicateFailure -&gt; String)
-&gt; ([AdelegsPredicateFailure] -&gt; ShowS)
-&gt; Show AdelegsPredicateFailure
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [AdelegsPredicateFailure] -&gt; ShowS
$cshowList :: [AdelegsPredicateFailure] -&gt; ShowS
show :: AdelegsPredicateFailure -&gt; String
$cshow :: AdelegsPredicateFailure -&gt; String
showsPrec :: Int -&gt; AdelegsPredicateFailure -&gt; ShowS
$cshowsPrec :: Int -&gt; AdelegsPredicateFailure -&gt; ShowS
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cADelegFailure"><span id="%24tAdelegsPredicateFailure"><span id="local-6989586621679585032"><span id="local-6989586621679585034"><span id="local-6989586621679585036"><span id="local-6989586621679585038"><span id="local-6989586621679585040"><span id="local-6989586621679585042"><span id="local-6989586621679585044"><span id="local-6989586621679585046"><span id="local-6989586621679585048"><span id="local-6989586621679585050"><span id="local-6989586621679585052"><span id="local-6989586621679585054"><span id="local-6989586621679585056"><span id="local-6989586621679585058"><span class="annot"><span class="annottext">Typeable AdelegsPredicateFailure
DataType
Constr
Typeable AdelegsPredicateFailure
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g)
    -&gt; AdelegsPredicateFailure
    -&gt; c AdelegsPredicateFailure)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c AdelegsPredicateFailure)
-&gt; (AdelegsPredicateFailure -&gt; Constr)
-&gt; (AdelegsPredicateFailure -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c AdelegsPredicateFailure))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c AdelegsPredicateFailure))
-&gt; ((forall b. Data b =&gt; b -&gt; b)
    -&gt; AdelegsPredicateFailure -&gt; AdelegsPredicateFailure)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; AdelegsPredicateFailure
    -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; AdelegsPredicateFailure
    -&gt; r)
-&gt; (forall u.
    (forall d. Data d =&gt; d -&gt; u) -&gt; AdelegsPredicateFailure -&gt; [u])
-&gt; (forall u.
    Int
    -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; AdelegsPredicateFailure -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; AdelegsPredicateFailure -&gt; m AdelegsPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; AdelegsPredicateFailure -&gt; m AdelegsPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; AdelegsPredicateFailure -&gt; m AdelegsPredicateFailure)
-&gt; Data AdelegsPredicateFailure
AdelegsPredicateFailure -&gt; DataType
AdelegsPredicateFailure -&gt; Constr
(forall b. Data b =&gt; b -&gt; b)
-&gt; AdelegsPredicateFailure -&gt; AdelegsPredicateFailure
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; AdelegsPredicateFailure
-&gt; c AdelegsPredicateFailure
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c AdelegsPredicateFailure
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; AdelegsPredicateFailure -&gt; u
forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; AdelegsPredicateFailure -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; AdelegsPredicateFailure
-&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; AdelegsPredicateFailure
-&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; AdelegsPredicateFailure -&gt; m AdelegsPredicateFailure
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; AdelegsPredicateFailure -&gt; m AdelegsPredicateFailure
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c AdelegsPredicateFailure
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; AdelegsPredicateFailure
-&gt; c AdelegsPredicateFailure
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c AdelegsPredicateFailure)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c AdelegsPredicateFailure)
$cADelegFailure :: Constr
$tAdelegsPredicateFailure :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; AdelegsPredicateFailure -&gt; m AdelegsPredicateFailure
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; AdelegsPredicateFailure -&gt; m AdelegsPredicateFailure
gmapMp :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; AdelegsPredicateFailure -&gt; m AdelegsPredicateFailure
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; AdelegsPredicateFailure -&gt; m AdelegsPredicateFailure
gmapM :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; AdelegsPredicateFailure -&gt; m AdelegsPredicateFailure
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; AdelegsPredicateFailure -&gt; m AdelegsPredicateFailure
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; AdelegsPredicateFailure -&gt; u
$cgmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; AdelegsPredicateFailure -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; AdelegsPredicateFailure -&gt; [u]
$cgmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; AdelegsPredicateFailure -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; AdelegsPredicateFailure
-&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; AdelegsPredicateFailure
-&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; AdelegsPredicateFailure
-&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; AdelegsPredicateFailure
-&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; AdelegsPredicateFailure -&gt; AdelegsPredicateFailure
$cgmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; AdelegsPredicateFailure -&gt; AdelegsPredicateFailure
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c AdelegsPredicateFailure)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c AdelegsPredicateFailure)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c AdelegsPredicateFailure)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c AdelegsPredicateFailure)
dataTypeOf :: AdelegsPredicateFailure -&gt; DataType
$cdataTypeOf :: AdelegsPredicateFailure -&gt; DataType
toConstr :: AdelegsPredicateFailure -&gt; Constr
$ctoConstr :: AdelegsPredicateFailure -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c AdelegsPredicateFailure
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c AdelegsPredicateFailure
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; AdelegsPredicateFailure
-&gt; c AdelegsPredicateFailure
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; AdelegsPredicateFailure
-&gt; c AdelegsPredicateFailure
$cp1Data :: Typeable AdelegsPredicateFailure
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x.
 AdelegsPredicateFailure -&gt; Rep AdelegsPredicateFailure x)
-&gt; (forall x.
    Rep AdelegsPredicateFailure x -&gt; AdelegsPredicateFailure)
-&gt; Generic AdelegsPredicateFailure
forall x. Rep AdelegsPredicateFailure x -&gt; AdelegsPredicateFailure
forall x. AdelegsPredicateFailure -&gt; Rep AdelegsPredicateFailure x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep AdelegsPredicateFailure x -&gt; AdelegsPredicateFailure
$cfrom :: forall x. AdelegsPredicateFailure -&gt; Rep AdelegsPredicateFailure x
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679585022"><span id="local-6989586621679585024"><span id="local-6989586621679585026"><span class="annot"><span class="annottext">Context -&gt; AdelegsPredicateFailure -&gt; IO (Maybe ThunkInfo)
Proxy AdelegsPredicateFailure -&gt; String
(Context -&gt; AdelegsPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; AdelegsPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy AdelegsPredicateFailure -&gt; String)
-&gt; NoThunks AdelegsPredicateFailure
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy AdelegsPredicateFailure -&gt; String
$cshowTypeOf :: Proxy AdelegsPredicateFailure -&gt; String
wNoThunks :: Context -&gt; AdelegsPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; AdelegsPredicateFailure -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; AdelegsPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; AdelegsPredicateFailure -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679585022"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-534"></span><span>
</span><span id="line-535"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679585012"><span id="local-6989586621679585014"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEGS"><span class="hs-identifier hs-type">ADELEGS</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-536"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="State"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">State</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEGS"><span class="hs-identifier hs-type">ADELEGS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span>
</span><span id="line-537"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Signal"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">Signal</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEGS"><span class="hs-identifier hs-type">ADELEGS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Slot</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-538"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Environment"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">Environment</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEGS"><span class="hs-identifier hs-type">ADELEGS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span>
</span><span id="line-539"></span><span>
</span><span id="line-540"></span><span>  </span><span class="hs-keyword">type</span><span>
</span><span id="line-541"></span><span>    </span><span id="PredicateFailure"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">PredicateFailure</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEGS"><span class="hs-identifier hs-type">ADELEGS</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-542"></span><span>      </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#AdelegsPredicateFailure"><span class="hs-identifier hs-type">AdelegsPredicateFailure</span></a></span><span>
</span><span id="line-543"></span><span>
</span><span id="line-544"></span><span>  </span><span id="local-6989586621679585011"><span class="annot"><span class="annottext">initialRules :: [InitialRule ADELEGS]
</span><a href="#local-6989586621679585011"><span class="hs-identifier hs-var hs-var hs-var hs-var">initialRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-545"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-546"></span><span>        </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">IRC</span></a></span><span> </span><span id="local-6989586621679585010"><span class="annot"><span class="annottext">Environment ADELEGS
</span><a href="#local-6989586621679585010"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">F (Clause ADELEGS 'Initial) (IRC ADELEGS)
forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-547"></span><span>        </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
forall super (rtype :: RuleType).
Embed ADELEG super =&gt;
RuleContext rtype ADELEG -&gt; Rule super rtype (State ADELEG)
</span><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEG"><span class="hs-identifier hs-type">ADELEG</span></a></span><span> </span><span class="annot"><span class="annottext">(RuleContext 'Initial ADELEG
 -&gt; Rule ADELEGS 'Initial (State ADELEG))
-&gt; RuleContext 'Initial ADELEG
-&gt; Rule ADELEGS 'Initial (State ADELEG)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Environment ADELEG -&gt; IRC ADELEG
forall sts. Environment sts -&gt; IRC sts
</span><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">IRC</span></a></span><span> </span><span class="annot"><span class="annottext">Environment ADELEGS
Environment ADELEG
</span><a href="#local-6989586621679585010"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-548"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-549"></span><span>  </span><span id="local-6989586621679585009"><span class="annot"><span class="annottext">transitionRules :: [TransitionRule ADELEGS]
</span><a href="#local-6989586621679585009"><span class="hs-identifier hs-var hs-var hs-var hs-var">transitionRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-550"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-551"></span><span>        </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">TRC</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679585008"><span class="annot"><span class="annottext">Environment ADELEGS
</span><a href="#local-6989586621679585008"><span class="hs-identifier hs-var">env</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679585007"><span class="annot"><span class="annottext">State ADELEGS
</span><a href="#local-6989586621679585007"><span class="hs-identifier hs-var">st</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679585006"><span class="annot"><span class="annottext">Signal ADELEGS
</span><a href="#local-6989586621679585006"><span class="hs-identifier hs-var">sig</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">F (Clause ADELEGS 'Transition) (TRC ADELEGS)
forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-552"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Signal ADELEGS
</span><a href="#local-6989586621679585006"><span class="hs-identifier hs-var">sig</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-553"></span><span>          </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DState -&gt; F (Clause ADELEGS 'Transition) DState
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">State ADELEGS
DState
</span><a href="#local-6989586621679585007"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-554"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621679585005"><span class="annot"><a href="#local-6989586621679585005"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">:</span></a></span><span> </span><span id="local-6989586621679585004"><span class="annot"><a href="#local-6989586621679585004"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-555"></span><span>            </span><span id="local-6989586621679585003"><span class="annot"><span class="annottext">DState
</span><a href="#local-6989586621679585003"><span class="hs-identifier hs-var">ds'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
forall super (rtype :: RuleType).
Embed ADELEG super =&gt;
RuleContext rtype ADELEG -&gt; Rule super rtype (State ADELEG)
</span><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEG"><span class="hs-identifier hs-type">ADELEG</span></a></span><span> </span><span class="annot"><span class="annottext">(RuleContext 'Transition ADELEG
 -&gt; Rule ADELEGS 'Transition (State ADELEG))
-&gt; RuleContext 'Transition ADELEG
-&gt; Rule ADELEGS 'Transition (State ADELEG)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Environment ADELEG, State ADELEG, Signal ADELEG) -&gt; TRC ADELEG
forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment ADELEGS
Environment ADELEG
</span><a href="#local-6989586621679585008"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">State ADELEGS
State ADELEG
</span><a href="#local-6989586621679585007"><span class="hs-identifier hs-var">st</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(Slot, (VKeyGenesis, VKey))
Signal ADELEG
</span><a href="#local-6989586621679585005"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-556"></span><span>            </span><span id="local-6989586621679585002"><span class="annot"><span class="annottext">DState
</span><a href="#local-6989586621679585002"><span class="hs-identifier hs-var">ds''</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
forall super (rtype :: RuleType).
Embed ADELEGS super =&gt;
RuleContext rtype ADELEGS -&gt; Rule super rtype (State ADELEGS)
</span><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEGS"><span class="hs-identifier hs-type">ADELEGS</span></a></span><span> </span><span class="annot"><span class="annottext">(RuleContext 'Transition ADELEGS -&gt; TransitionRule ADELEGS)
-&gt; RuleContext 'Transition ADELEGS -&gt; TransitionRule ADELEGS
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Environment ADELEGS, State ADELEGS, Signal ADELEGS) -&gt; TRC ADELEGS
forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment ADELEGS
</span><a href="#local-6989586621679585008"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">State ADELEGS
DState
</span><a href="#local-6989586621679585003"><span class="hs-identifier hs-var">ds'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(Slot, (VKeyGenesis, VKey))]
Signal ADELEGS
</span><a href="#local-6989586621679585004"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-557"></span><span>            </span><span class="annot"><span class="annottext">DState -&gt; F (Clause ADELEGS 'Transition) DState
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">DState
</span><a href="#local-6989586621679585002"><span class="hs-identifier hs-var">ds''</span></a></span><span>
</span><span id="line-558"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-559"></span><span>
</span><span id="line-560"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679584997"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">Embed</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEG"><span class="hs-identifier hs-type">ADELEG</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEGS"><span class="hs-identifier hs-type">ADELEGS</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-561"></span><span>  </span><span id="local-6989586621679584996"><span class="annot"><span class="annottext">wrapFailed :: PredicateFailure ADELEG -&gt; PredicateFailure ADELEGS
</span><a href="#local-6989586621679584996"><span class="hs-identifier hs-var hs-var hs-var hs-var">wrapFailed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PredicateFailure ADELEG -&gt; PredicateFailure ADELEGS
PredicateFailure ADELEG -&gt; AdelegsPredicateFailure
</span><a href="Byron.Spec.Ledger.Delegation.html#ADelegFailure"><span class="hs-identifier hs-var">ADelegFailure</span></a></span><span>
</span><span id="line-562"></span><span>
</span><span id="line-563"></span><span class="hs-comment">-- | Delegation interface</span><span>
</span><span id="line-564"></span><span class="hs-keyword">data</span><span> </span><span id="DELEG"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DELEG"><span class="hs-identifier hs-var">DELEG</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="%24tDELEG"><span id="local-6989586621679584967"><span id="local-6989586621679584969"><span id="local-6989586621679584971"><span id="local-6989586621679584973"><span id="local-6989586621679584975"><span id="local-6989586621679584977"><span id="local-6989586621679584979"><span id="local-6989586621679584981"><span id="local-6989586621679584983"><span id="local-6989586621679584985"><span id="local-6989586621679584987"><span id="local-6989586621679584989"><span id="local-6989586621679584991"><span id="local-6989586621679584993"><span class="annot"><span class="annottext">Typeable DELEG
DataType
Typeable DELEG
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; DELEG -&gt; c DELEG)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c DELEG)
-&gt; (DELEG -&gt; Constr)
-&gt; (DELEG -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c DELEG))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c DELEG))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; DELEG -&gt; DELEG)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DELEG -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DELEG -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; DELEG -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; DELEG -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; DELEG -&gt; m DELEG)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; DELEG -&gt; m DELEG)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; DELEG -&gt; m DELEG)
-&gt; Data DELEG
DELEG -&gt; DataType
DELEG -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; DELEG -&gt; DELEG
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; DELEG -&gt; c DELEG
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c DELEG
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; DELEG -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; DELEG -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DELEG -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DELEG -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; DELEG -&gt; m DELEG
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; DELEG -&gt; m DELEG
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c DELEG
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; DELEG -&gt; c DELEG
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c DELEG)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c DELEG)
$tDELEG :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; DELEG -&gt; m DELEG
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; DELEG -&gt; m DELEG
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; DELEG -&gt; m DELEG
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; DELEG -&gt; m DELEG
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; DELEG -&gt; m DELEG
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; DELEG -&gt; m DELEG
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; DELEG -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; DELEG -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; DELEG -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; DELEG -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DELEG -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DELEG -&gt; r
gmapQl :: (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DELEG -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DELEG -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; DELEG -&gt; DELEG
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; DELEG -&gt; DELEG
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c DELEG)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c DELEG)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c DELEG)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c DELEG)
dataTypeOf :: DELEG -&gt; DataType
$cdataTypeOf :: DELEG -&gt; DataType
toConstr :: DELEG -&gt; Constr
$ctoConstr :: DELEG -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c DELEG
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c DELEG
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; DELEG -&gt; c DELEG
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; DELEG -&gt; c DELEG
$cp1Data :: Typeable DELEG
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-565"></span><span>
</span><span id="line-566"></span><span id="local-6989586621679584964"><span id="local-6989586621679584965"></span></span><span class="hs-keyword">data</span><span> </span><span id="DelegPredicateFailure"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DelegPredicateFailure"><span class="hs-identifier hs-var">DelegPredicateFailure</span></a></span></span><span>
</span><span id="line-567"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="SDelegSFailure"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDelegSFailure"><span class="hs-identifier hs-var">SDelegSFailure</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEGS"><span class="hs-identifier hs-type">SDELEGS</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-568"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ADelegSFailure"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADelegSFailure"><span class="hs-identifier hs-var">ADelegSFailure</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEGS"><span class="hs-identifier hs-type">ADELEGS</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-569"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679584958"><span id="local-6989586621679584960"><span class="annot"><span class="annottext">DelegPredicateFailure -&gt; DelegPredicateFailure -&gt; Bool
(DelegPredicateFailure -&gt; DelegPredicateFailure -&gt; Bool)
-&gt; (DelegPredicateFailure -&gt; DelegPredicateFailure -&gt; Bool)
-&gt; Eq DelegPredicateFailure
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: DelegPredicateFailure -&gt; DelegPredicateFailure -&gt; Bool
$c/= :: DelegPredicateFailure -&gt; DelegPredicateFailure -&gt; Bool
== :: DelegPredicateFailure -&gt; DelegPredicateFailure -&gt; Bool
$c== :: DelegPredicateFailure -&gt; DelegPredicateFailure -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679584952"><span id="local-6989586621679584954"><span id="local-6989586621679584956"><span class="annot"><span class="annottext">Int -&gt; DelegPredicateFailure -&gt; ShowS
[DelegPredicateFailure] -&gt; ShowS
DelegPredicateFailure -&gt; String
(Int -&gt; DelegPredicateFailure -&gt; ShowS)
-&gt; (DelegPredicateFailure -&gt; String)
-&gt; ([DelegPredicateFailure] -&gt; ShowS)
-&gt; Show DelegPredicateFailure
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [DelegPredicateFailure] -&gt; ShowS
$cshowList :: [DelegPredicateFailure] -&gt; ShowS
show :: DelegPredicateFailure -&gt; String
$cshow :: DelegPredicateFailure -&gt; String
showsPrec :: Int -&gt; DelegPredicateFailure -&gt; ShowS
$cshowsPrec :: Int -&gt; DelegPredicateFailure -&gt; ShowS
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cADelegSFailure"><span id="%24cSDelegSFailure"><span id="%24tDelegPredicateFailure"><span id="local-6989586621679584923"><span id="local-6989586621679584925"><span id="local-6989586621679584927"><span id="local-6989586621679584929"><span id="local-6989586621679584931"><span id="local-6989586621679584933"><span id="local-6989586621679584935"><span id="local-6989586621679584937"><span id="local-6989586621679584939"><span id="local-6989586621679584941"><span id="local-6989586621679584943"><span id="local-6989586621679584945"><span id="local-6989586621679584947"><span id="local-6989586621679584949"><span class="annot"><span class="annottext">Typeable DelegPredicateFailure
DataType
Constr
Typeable DelegPredicateFailure
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g)
    -&gt; DelegPredicateFailure
    -&gt; c DelegPredicateFailure)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c DelegPredicateFailure)
-&gt; (DelegPredicateFailure -&gt; Constr)
-&gt; (DelegPredicateFailure -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c DelegPredicateFailure))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c DelegPredicateFailure))
-&gt; ((forall b. Data b =&gt; b -&gt; b)
    -&gt; DelegPredicateFailure -&gt; DelegPredicateFailure)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; DelegPredicateFailure
    -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; DelegPredicateFailure
    -&gt; r)
-&gt; (forall u.
    (forall d. Data d =&gt; d -&gt; u) -&gt; DelegPredicateFailure -&gt; [u])
-&gt; (forall u.
    Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; DelegPredicateFailure -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; DelegPredicateFailure -&gt; m DelegPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; DelegPredicateFailure -&gt; m DelegPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; DelegPredicateFailure -&gt; m DelegPredicateFailure)
-&gt; Data DelegPredicateFailure
DelegPredicateFailure -&gt; DataType
DelegPredicateFailure -&gt; Constr
(forall b. Data b =&gt; b -&gt; b)
-&gt; DelegPredicateFailure -&gt; DelegPredicateFailure
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; DelegPredicateFailure
-&gt; c DelegPredicateFailure
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c DelegPredicateFailure
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; DelegPredicateFailure -&gt; u
forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; DelegPredicateFailure -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DelegPredicateFailure -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DelegPredicateFailure -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; DelegPredicateFailure -&gt; m DelegPredicateFailure
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; DelegPredicateFailure -&gt; m DelegPredicateFailure
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c DelegPredicateFailure
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; DelegPredicateFailure
-&gt; c DelegPredicateFailure
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c DelegPredicateFailure)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c DelegPredicateFailure)
$cADelegSFailure :: Constr
$cSDelegSFailure :: Constr
$tDelegPredicateFailure :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; DelegPredicateFailure -&gt; m DelegPredicateFailure
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; DelegPredicateFailure -&gt; m DelegPredicateFailure
gmapMp :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; DelegPredicateFailure -&gt; m DelegPredicateFailure
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; DelegPredicateFailure -&gt; m DelegPredicateFailure
gmapM :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; DelegPredicateFailure -&gt; m DelegPredicateFailure
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; DelegPredicateFailure -&gt; m DelegPredicateFailure
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; DelegPredicateFailure -&gt; u
$cgmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; DelegPredicateFailure -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; DelegPredicateFailure -&gt; [u]
$cgmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; DelegPredicateFailure -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DelegPredicateFailure -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DelegPredicateFailure -&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DelegPredicateFailure -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DelegPredicateFailure -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; DelegPredicateFailure -&gt; DelegPredicateFailure
$cgmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; DelegPredicateFailure -&gt; DelegPredicateFailure
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c DelegPredicateFailure)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c DelegPredicateFailure)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c DelegPredicateFailure)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c DelegPredicateFailure)
dataTypeOf :: DelegPredicateFailure -&gt; DataType
$cdataTypeOf :: DelegPredicateFailure -&gt; DataType
toConstr :: DelegPredicateFailure -&gt; Constr
$ctoConstr :: DelegPredicateFailure -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c DelegPredicateFailure
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c DelegPredicateFailure
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; DelegPredicateFailure
-&gt; c DelegPredicateFailure
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; DelegPredicateFailure
-&gt; c DelegPredicateFailure
$cp1Data :: Typeable DelegPredicateFailure
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. DelegPredicateFailure -&gt; Rep DelegPredicateFailure x)
-&gt; (forall x. Rep DelegPredicateFailure x -&gt; DelegPredicateFailure)
-&gt; Generic DelegPredicateFailure
forall x. Rep DelegPredicateFailure x -&gt; DelegPredicateFailure
forall x. DelegPredicateFailure -&gt; Rep DelegPredicateFailure x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep DelegPredicateFailure x -&gt; DelegPredicateFailure
$cfrom :: forall x. DelegPredicateFailure -&gt; Rep DelegPredicateFailure x
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679584912"><span id="local-6989586621679584914"><span id="local-6989586621679584916"><span class="annot"><span class="annottext">Context -&gt; DelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
Proxy DelegPredicateFailure -&gt; String
(Context -&gt; DelegPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; DelegPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy DelegPredicateFailure -&gt; String)
-&gt; NoThunks DelegPredicateFailure
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy DelegPredicateFailure -&gt; String
$cshowTypeOf :: Proxy DelegPredicateFailure -&gt; String
wNoThunks :: Context -&gt; DelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; DelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; DelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; DelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679584912"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-570"></span><span>
</span><span id="line-571"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679584902"><span id="local-6989586621679584904"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DELEG"><span class="hs-identifier hs-type">DELEG</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-572"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="State"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">State</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DELEG"><span class="hs-identifier hs-type">DELEG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DIState"><span class="hs-identifier hs-type">DIState</span></a></span><span>
</span><span id="line-573"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Signal"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">Signal</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DELEG"><span class="hs-identifier hs-type">DELEG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-574"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Environment"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">Environment</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DELEG"><span class="hs-identifier hs-type">DELEG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DIEnv"><span class="hs-identifier hs-type">DIEnv</span></a></span><span>
</span><span id="line-575"></span><span>
</span><span id="line-576"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PredicateFailure"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">PredicateFailure</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DELEG"><span class="hs-identifier hs-type">DELEG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DelegPredicateFailure"><span class="hs-identifier hs-type">DelegPredicateFailure</span></a></span><span>
</span><span id="line-577"></span><span>
</span><span id="line-578"></span><span>  </span><span id="local-6989586621679584901"><span class="annot"><span class="annottext">initialRules :: [InitialRule DELEG]
</span><a href="#local-6989586621679584901"><span class="hs-identifier hs-var hs-var hs-var hs-var">initialRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-579"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-580"></span><span>        </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">IRC</span></a></span><span> </span><span id="local-6989586621679584900"><span class="annot"><span class="annottext">Environment DELEG
</span><a href="#local-6989586621679584900"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">F (Clause DELEG 'Initial) (IRC DELEG)
forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-581"></span><span>        </span><span id="local-6989586621679584899"><span class="annot"><span class="annottext">DState
</span><a href="#local-6989586621679584899"><span class="hs-identifier hs-var">initADelegsState</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
forall super (rtype :: RuleType).
Embed ADELEGS super =&gt;
RuleContext rtype ADELEGS -&gt; Rule super rtype (State ADELEGS)
</span><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEGS"><span class="hs-identifier hs-type">ADELEGS</span></a></span><span> </span><span class="annot"><span class="annottext">(RuleContext 'Initial ADELEGS
 -&gt; Rule DELEG 'Initial (State ADELEGS))
-&gt; RuleContext 'Initial ADELEGS
-&gt; Rule DELEG 'Initial (State ADELEGS)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Environment ADELEGS -&gt; IRC ADELEGS
forall sts. Environment sts -&gt; IRC sts
</span><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">IRC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment DELEG
DSEnv
</span><a href="#local-6989586621679584900"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">DSEnv
-&gt; Getting (Set VKeyGenesis) DSEnv (Set VKeyGenesis)
-&gt; Set VKeyGenesis
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (Set VKeyGenesis) DSEnv (Set VKeyGenesis)
forall s a. HasAllowedDelegators s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#allowedDelegators"><span class="hs-identifier hs-var">allowedDelegators</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-582"></span><span>        </span><span id="local-6989586621679584898"><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679584898"><span class="hs-identifier hs-var">initSDelegsState</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
forall super (rtype :: RuleType).
Embed SDELEGS super =&gt;
RuleContext rtype SDELEGS -&gt; Rule super rtype (State SDELEGS)
</span><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEGS"><span class="hs-identifier hs-type">SDELEGS</span></a></span><span> </span><span class="annot"><span class="annottext">(RuleContext 'Initial SDELEGS
 -&gt; Rule DELEG 'Initial (State SDELEGS))
-&gt; RuleContext 'Initial SDELEGS
-&gt; Rule DELEG 'Initial (State SDELEGS)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Environment SDELEGS -&gt; IRC SDELEGS
forall sts. Environment sts -&gt; IRC sts
</span><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">IRC</span></a></span><span> </span><span class="annot"><span class="annottext">Environment DELEG
Environment SDELEGS
</span><a href="#local-6989586621679584900"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-583"></span><span>        </span><span class="annot"><span class="annottext">DIState -&gt; F (Clause DELEG 'Initial) DIState
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span>
</span><span id="line-584"></span><span>          </span><span class="annot"><span class="annottext">(DIState -&gt; F (Clause DELEG 'Initial) DIState)
-&gt; DIState -&gt; F (Clause DELEG 'Initial) DIState
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">DIState :: Bimap VKeyGenesis VKey
-&gt; Map VKeyGenesis Slot
-&gt; [(Slot, (VKeyGenesis, VKey))]
-&gt; Set (Epoch, VKeyGenesis)
-&gt; DIState
</span><a href="Byron.Spec.Ledger.Delegation.html#DIState"><span class="hs-identifier hs-type">DIState</span></a></span><span>
</span><span id="line-585"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_dIStateDelegationMap :: Bimap VKeyGenesis VKey
</span><a href="Byron.Spec.Ledger.Delegation.html#_dIStateDelegationMap"><span class="hs-identifier hs-var">_dIStateDelegationMap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DState
</span><a href="#local-6989586621679584899"><span class="hs-identifier hs-var">initADelegsState</span></a></span><span> </span><span class="annot"><span class="annottext">DState
-&gt; Getting (Bimap VKeyGenesis VKey) DState (Bimap VKeyGenesis VKey)
-&gt; Bimap VKeyGenesis VKey
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (Bimap VKeyGenesis VKey) DState (Bimap VKeyGenesis VKey)
forall s a. HasDelegationMap s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#delegationMap"><span class="hs-identifier hs-var">delegationMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-586"></span><span>              </span><span class="annot"><span class="annottext">_dIStateLastDelegation :: Map VKeyGenesis Slot
</span><a href="Byron.Spec.Ledger.Delegation.html#_dIStateLastDelegation"><span class="hs-identifier hs-var">_dIStateLastDelegation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DState
</span><a href="#local-6989586621679584899"><span class="hs-identifier hs-var">initADelegsState</span></a></span><span> </span><span class="annot"><span class="annottext">DState
-&gt; Getting (Map VKeyGenesis Slot) DState (Map VKeyGenesis Slot)
-&gt; Map VKeyGenesis Slot
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (Map VKeyGenesis Slot) DState (Map VKeyGenesis Slot)
forall s a. HasLastDelegation s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#lastDelegation"><span class="hs-identifier hs-var">lastDelegation</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-587"></span><span>              </span><span class="annot"><span class="annottext">_dIStateScheduledDelegations :: [(Slot, (VKeyGenesis, VKey))]
</span><a href="Byron.Spec.Ledger.Delegation.html#_dIStateScheduledDelegations"><span class="hs-identifier hs-var">_dIStateScheduledDelegations</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679584898"><span class="hs-identifier hs-var">initSDelegsState</span></a></span><span> </span><span class="annot"><span class="annottext">DSState
-&gt; Getting
     [(Slot, (VKeyGenesis, VKey))] DSState [(Slot, (VKeyGenesis, VKey))]
-&gt; [(Slot, (VKeyGenesis, VKey))]
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting
  [(Slot, (VKeyGenesis, VKey))] DSState [(Slot, (VKeyGenesis, VKey))]
forall s a. HasScheduledDelegations s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#scheduledDelegations"><span class="hs-identifier hs-var">scheduledDelegations</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-588"></span><span>              </span><span class="annot"><span class="annottext">_dIStateKeyEpochDelegations :: Set (Epoch, VKeyGenesis)
</span><a href="Byron.Spec.Ledger.Delegation.html#_dIStateKeyEpochDelegations"><span class="hs-identifier hs-var">_dIStateKeyEpochDelegations</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679584898"><span class="hs-identifier hs-var">initSDelegsState</span></a></span><span> </span><span class="annot"><span class="annottext">DSState
-&gt; Getting
     (Set (Epoch, VKeyGenesis)) DSState (Set (Epoch, VKeyGenesis))
-&gt; Set (Epoch, VKeyGenesis)
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting
  (Set (Epoch, VKeyGenesis)) DSState (Set (Epoch, VKeyGenesis))
forall s a. HasKeyEpochDelegations s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#keyEpochDelegations"><span class="hs-identifier hs-var">keyEpochDelegations</span></a></span><span>
</span><span id="line-589"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-590"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-591"></span><span>  </span><span id="local-6989586621679584897"><span class="annot"><span class="annottext">transitionRules :: [TransitionRule DELEG]
</span><a href="#local-6989586621679584897"><span class="hs-identifier hs-var hs-var hs-var hs-var">transitionRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-592"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-593"></span><span>        </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">TRC</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679584896"><span class="annot"><span class="annottext">Environment DELEG
</span><a href="#local-6989586621679584896"><span class="hs-identifier hs-var">env</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679584895"><span class="annot"><span class="annottext">State DELEG
</span><a href="#local-6989586621679584895"><span class="hs-identifier hs-var">st</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679584894"><span class="annot"><span class="annottext">Signal DELEG
</span><a href="#local-6989586621679584894"><span class="hs-identifier hs-var">sig</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">F (Clause DELEG 'Transition) (TRC DELEG)
forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-594"></span><span>        </span><span id="local-6989586621679584893"><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679584893"><span class="hs-identifier hs-var">sds</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
forall super (rtype :: RuleType).
Embed SDELEGS super =&gt;
RuleContext rtype SDELEGS -&gt; Rule super rtype (State SDELEGS)
</span><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEGS"><span class="hs-identifier hs-type">SDELEGS</span></a></span><span> </span><span class="annot"><span class="annottext">(RuleContext 'Transition SDELEGS
 -&gt; Rule DELEG 'Transition (State SDELEGS))
-&gt; RuleContext 'Transition SDELEGS
-&gt; Rule DELEG 'Transition (State SDELEGS)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Environment SDELEGS, State SDELEGS, Signal SDELEGS) -&gt; TRC SDELEGS
forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment DELEG
Environment SDELEGS
</span><a href="#local-6989586621679584896"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">State DELEG
DIState
</span><a href="#local-6989586621679584895"><span class="hs-identifier hs-var">st</span></a></span><span> </span><span class="annot"><span class="annottext">DIState -&gt; Getting DSState DIState DSState -&gt; DSState
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting DSState DIState DSState
Lens DIState DIState DSState DSState
</span><a href="Byron.Spec.Ledger.Delegation.html#dIStateDSState"><span class="hs-identifier hs-var">dIStateDSState</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Signal DELEG
Signal SDELEGS
</span><a href="#local-6989586621679584894"><span class="hs-identifier hs-var">sig</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-595"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679584892"><span class="annot"><span class="annottext">slots :: [(Slot, (VKeyGenesis, VKey))]
</span><a href="#local-6989586621679584892"><span class="hs-identifier hs-var hs-var">slots</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Slot, (VKeyGenesis, VKey)) -&gt; Bool)
-&gt; [(Slot, (VKeyGenesis, VKey))] -&gt; [(Slot, (VKeyGenesis, VKey))]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Slot -&gt; Slot -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&lt;=</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment DELEG
DSEnv
</span><a href="#local-6989586621679584896"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">DSEnv -&gt; Getting Slot DSEnv Slot -&gt; Slot
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting Slot DSEnv Slot
forall s a. HasSlot s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#slot"><span class="hs-identifier hs-var">slot</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Slot -&gt; Bool)
-&gt; ((Slot, (VKeyGenesis, VKey)) -&gt; Slot)
-&gt; (Slot, (VKeyGenesis, VKey))
-&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Slot, (VKeyGenesis, VKey)) -&gt; Slot
forall a b. (a, b) -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fst</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([(Slot, (VKeyGenesis, VKey))] -&gt; [(Slot, (VKeyGenesis, VKey))])
-&gt; [(Slot, (VKeyGenesis, VKey))] -&gt; [(Slot, (VKeyGenesis, VKey))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679584893"><span class="hs-identifier hs-var">sds</span></a></span><span> </span><span class="annot"><span class="annottext">DSState
-&gt; Getting
     [(Slot, (VKeyGenesis, VKey))] DSState [(Slot, (VKeyGenesis, VKey))]
-&gt; [(Slot, (VKeyGenesis, VKey))]
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting
  [(Slot, (VKeyGenesis, VKey))] DSState [(Slot, (VKeyGenesis, VKey))]
forall s a. HasScheduledDelegations s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#scheduledDelegations"><span class="hs-identifier hs-var">scheduledDelegations</span></a></span><span>
</span><span id="line-596"></span><span>        </span><span id="local-6989586621679584891"><span class="annot"><span class="annottext">DState
</span><a href="#local-6989586621679584891"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
forall super (rtype :: RuleType).
Embed ADELEGS super =&gt;
RuleContext rtype ADELEGS -&gt; Rule super rtype (State ADELEGS)
</span><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEGS"><span class="hs-identifier hs-type">ADELEGS</span></a></span><span> </span><span class="annot"><span class="annottext">(RuleContext 'Transition ADELEGS
 -&gt; Rule DELEG 'Transition (State ADELEGS))
-&gt; RuleContext 'Transition ADELEGS
-&gt; Rule DELEG 'Transition (State ADELEGS)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Environment ADELEGS, State ADELEGS, Signal ADELEGS) -&gt; TRC ADELEGS
forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment DELEG
DSEnv
</span><a href="#local-6989586621679584896"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">DSEnv
-&gt; Getting (Set VKeyGenesis) DSEnv (Set VKeyGenesis)
-&gt; Set VKeyGenesis
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (Set VKeyGenesis) DSEnv (Set VKeyGenesis)
forall s a. HasAllowedDelegators s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#allowedDelegators"><span class="hs-identifier hs-var">allowedDelegators</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">State DELEG
DIState
</span><a href="#local-6989586621679584895"><span class="hs-identifier hs-var">st</span></a></span><span> </span><span class="annot"><span class="annottext">DIState -&gt; Getting DState DIState DState -&gt; DState
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting DState DIState DState
Lens DIState DIState DState DState
</span><a href="Byron.Spec.Ledger.Delegation.html#dIStateDState"><span class="hs-identifier hs-var">dIStateDState</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(Slot, (VKeyGenesis, VKey))]
Signal ADELEGS
</span><a href="#local-6989586621679584892"><span class="hs-identifier hs-var">slots</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-597"></span><span>        </span><span class="annot"><span class="annottext">DIState -&gt; F (Clause DELEG 'Transition) DIState
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(DIState -&gt; F (Clause DELEG 'Transition) DIState)
-&gt; DIState -&gt; F (Clause DELEG 'Transition) DIState
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-598"></span><span>          </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
-&gt; Map VKeyGenesis Slot
-&gt; [(Slot, (VKeyGenesis, VKey))]
-&gt; Set (Epoch, VKeyGenesis)
-&gt; DIState
</span><a href="Byron.Spec.Ledger.Delegation.html#DIState"><span class="hs-identifier hs-var">DIState</span></a></span><span>
</span><span id="line-599"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DState
</span><a href="#local-6989586621679584891"><span class="hs-keyword hs-var">as</span></a></span><span> </span><span class="annot"><span class="annottext">DState
-&gt; Getting (Bimap VKeyGenesis VKey) DState (Bimap VKeyGenesis VKey)
-&gt; Bimap VKeyGenesis VKey
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (Bimap VKeyGenesis VKey) DState (Bimap VKeyGenesis VKey)
forall s a. HasDelegationMap s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#delegationMap"><span class="hs-identifier hs-var">delegationMap</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-600"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DState
</span><a href="#local-6989586621679584891"><span class="hs-keyword hs-var">as</span></a></span><span> </span><span class="annot"><span class="annottext">DState
-&gt; Getting (Map VKeyGenesis Slot) DState (Map VKeyGenesis Slot)
-&gt; Map VKeyGenesis Slot
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (Map VKeyGenesis Slot) DState (Map VKeyGenesis Slot)
forall s a. HasLastDelegation s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#lastDelegation"><span class="hs-identifier hs-var">lastDelegation</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-601"></span><span>            </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">((Slot, (VKeyGenesis, VKey)) -&gt; Bool)
-&gt; [(Slot, (VKeyGenesis, VKey))] -&gt; [(Slot, (VKeyGenesis, VKey))]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment DELEG
DSEnv
</span><a href="#local-6989586621679584896"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">DSEnv -&gt; Getting Slot DSEnv Slot -&gt; Slot
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting Slot DSEnv Slot
forall s a. HasSlot s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#slot"><span class="hs-identifier hs-var">slot</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Slot -&gt; SlotCount -&gt; Slot
</span><a href="Byron.Spec.Ledger.Core.html#addSlot"><span class="hs-operator hs-var">`addSlot`</span></a></span><span> </span><span class="annot"><span class="annottext">SlotCount
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Slot -&gt; Slot -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&lt;=</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Slot -&gt; Bool)
-&gt; ((Slot, (VKeyGenesis, VKey)) -&gt; Slot)
-&gt; (Slot, (VKeyGenesis, VKey))
-&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Slot, (VKeyGenesis, VKey)) -&gt; Slot
forall a b. (a, b) -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fst</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([(Slot, (VKeyGenesis, VKey))] -&gt; [(Slot, (VKeyGenesis, VKey))])
-&gt; [(Slot, (VKeyGenesis, VKey))] -&gt; [(Slot, (VKeyGenesis, VKey))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-602"></span><span>                </span><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679584893"><span class="hs-identifier hs-var">sds</span></a></span><span> </span><span class="annot"><span class="annottext">DSState
-&gt; Getting
     [(Slot, (VKeyGenesis, VKey))] DSState [(Slot, (VKeyGenesis, VKey))]
-&gt; [(Slot, (VKeyGenesis, VKey))]
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting
  [(Slot, (VKeyGenesis, VKey))] DSState [(Slot, (VKeyGenesis, VKey))]
forall s a. HasScheduledDelegations s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#scheduledDelegations"><span class="hs-identifier hs-var">scheduledDelegations</span></a></span><span>
</span><span id="line-603"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-604"></span><span>            </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">((Epoch, VKeyGenesis) -&gt; Bool)
-&gt; Set (Epoch, VKeyGenesis) -&gt; Set (Epoch, VKeyGenesis)
forall a. (a -&gt; Bool) -&gt; Set a -&gt; Set a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Set.filter</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment DELEG
DSEnv
</span><a href="#local-6989586621679584896"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">DSEnv -&gt; Getting Epoch DSEnv Epoch -&gt; Epoch
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting Epoch DSEnv Epoch
forall s a. HasEpoch s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#epoch"><span class="hs-identifier hs-var">epoch</span></a></span><span> </span><span class="annot"><span class="annottext">Epoch -&gt; Epoch -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&lt;=</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Epoch -&gt; Bool)
-&gt; ((Epoch, VKeyGenesis) -&gt; Epoch) -&gt; (Epoch, VKeyGenesis) -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Epoch, VKeyGenesis) -&gt; Epoch
forall a b. (a, b) -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fst</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Set (Epoch, VKeyGenesis) -&gt; Set (Epoch, VKeyGenesis))
-&gt; Set (Epoch, VKeyGenesis) -&gt; Set (Epoch, VKeyGenesis)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-605"></span><span>                </span><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679584893"><span class="hs-identifier hs-var">sds</span></a></span><span> </span><span class="annot"><span class="annottext">DSState
-&gt; Getting
     (Set (Epoch, VKeyGenesis)) DSState (Set (Epoch, VKeyGenesis))
-&gt; Set (Epoch, VKeyGenesis)
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting
  (Set (Epoch, VKeyGenesis)) DSState (Set (Epoch, VKeyGenesis))
forall s a. HasKeyEpochDelegations s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#keyEpochDelegations"><span class="hs-identifier hs-var">keyEpochDelegations</span></a></span><span>
</span><span id="line-606"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-607"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-608"></span><span>
</span><span id="line-609"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679584885"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">Embed</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEGS"><span class="hs-identifier hs-type">SDELEGS</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DELEG"><span class="hs-identifier hs-type">DELEG</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-610"></span><span>  </span><span id="local-6989586621679584884"><span class="annot"><span class="annottext">wrapFailed :: PredicateFailure SDELEGS -&gt; PredicateFailure DELEG
</span><a href="#local-6989586621679584884"><span class="hs-identifier hs-var hs-var hs-var hs-var">wrapFailed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PredicateFailure SDELEGS -&gt; PredicateFailure DELEG
PredicateFailure SDELEGS -&gt; DelegPredicateFailure
</span><a href="Byron.Spec.Ledger.Delegation.html#SDelegSFailure"><span class="hs-identifier hs-var">SDelegSFailure</span></a></span><span>
</span><span id="line-611"></span><span>
</span><span id="line-612"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679584879"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">Embed</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEGS"><span class="hs-identifier hs-type">ADELEGS</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DELEG"><span class="hs-identifier hs-type">DELEG</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-613"></span><span>  </span><span id="local-6989586621679584878"><span class="annot"><span class="annottext">wrapFailed :: PredicateFailure ADELEGS -&gt; PredicateFailure DELEG
</span><a href="#local-6989586621679584878"><span class="hs-identifier hs-var hs-var hs-var hs-var">wrapFailed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PredicateFailure ADELEGS -&gt; PredicateFailure DELEG
PredicateFailure ADELEGS -&gt; DelegPredicateFailure
</span><a href="Byron.Spec.Ledger.Delegation.html#ADelegSFailure"><span class="hs-identifier hs-var">ADelegSFailure</span></a></span><span>
</span><span id="line-614"></span><span>
</span><span id="line-615"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-616"></span><span class="hs-comment">-- Generators</span><span>
</span><span id="line-617"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-618"></span><span>
</span><span id="line-619"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#dcertGen"><span class="hs-identifier hs-type">dcertGen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSEnv"><span class="hs-identifier hs-type">DSEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../hedgehog/html/src"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-620"></span><span id="dcertGen"><span class="annot"><span class="annottext">dcertGen :: DSEnv -&gt; Set (Epoch, VKeyGenesis) -&gt; Gen (Maybe DCert)
</span><a href="Byron.Spec.Ledger.Delegation.html#dcertGen"><span class="hs-identifier hs-var hs-var">dcertGen</span></a></span></span><span> </span><span id="local-6989586621679584877"><span class="annot"><span class="annottext">DSEnv
</span><a href="#local-6989586621679584877"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621679584876"><span class="annot"><span class="annottext">Set (Epoch, VKeyGenesis)
</span><a href="#local-6989586621679584876"><span class="hs-identifier hs-var">eks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-621"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621679584875"><span class="hs-identifier hs-type">allowed</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-622"></span><span>      </span><span id="local-6989586621679584875"><span class="annot"><span class="annottext">allowed :: [VKeyGenesis]
</span><a href="#local-6989586621679584875"><span class="hs-identifier hs-var hs-var">allowed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set VKeyGenesis -&gt; [VKeyGenesis]
forall a. Set a -&gt; [a]
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Set.toList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DSEnv -&gt; Set VKeyGenesis
</span><a href="Byron.Spec.Ledger.Delegation.html#_dSEnvAllowedDelegators"><span class="hs-identifier hs-var hs-var">_dSEnvAllowedDelegators</span></a></span><span> </span><span class="annot"><span class="annottext">DSEnv
</span><a href="#local-6989586621679584877"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-623"></span><span>      </span><span class="hs-comment">-- We can generate delegation certificates using the allowed delegators,</span><span>
</span><span id="line-624"></span><span>      </span><span class="hs-comment">-- and we can delegate for the current or next epoch only.</span><span>
</span><span id="line-625"></span><span>      </span><span class="annot"><a href="#local-6989586621679584874"><span class="hs-identifier hs-type">preCandidates</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../containers/html/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-626"></span><span>      </span><span id="local-6989586621679584874"><span class="annot"><span class="annottext">preCandidates :: Set (Epoch, VKeyGenesis)
</span><a href="#local-6989586621679584874"><span class="hs-identifier hs-var hs-var">preCandidates</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-627"></span><span>        </span><span class="annot"><span class="annottext">[(Epoch, VKeyGenesis)] -&gt; Set (Epoch, VKeyGenesis)
forall a. Ord a =&gt; [a] -&gt; Set a
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Set.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">([(Epoch, VKeyGenesis)] -&gt; Set (Epoch, VKeyGenesis))
-&gt; [(Epoch, VKeyGenesis)] -&gt; Set (Epoch, VKeyGenesis)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-628"></span><span>          </span><span class="annot"><span class="annottext">[Epoch] -&gt; [VKeyGenesis] -&gt; [(Epoch, VKeyGenesis)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">zip</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Epoch -&gt; [Epoch]
forall a. a -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">repeat</span></a></span><span> </span><span class="annot"><span class="annottext">(Epoch -&gt; [Epoch]) -&gt; Epoch -&gt; [Epoch]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">DSEnv -&gt; Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#_dSEnvEpoch"><span class="hs-identifier hs-var hs-var">_dSEnvEpoch</span></a></span><span> </span><span class="annot"><span class="annottext">DSEnv
</span><a href="#local-6989586621679584877"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[VKeyGenesis]
</span><a href="#local-6989586621679584875"><span class="hs-identifier hs-var">allowed</span></a></span><span>
</span><span id="line-629"></span><span>            </span><span class="annot"><span class="annottext">[(Epoch, VKeyGenesis)]
-&gt; [(Epoch, VKeyGenesis)] -&gt; [(Epoch, VKeyGenesis)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Epoch] -&gt; [VKeyGenesis] -&gt; [(Epoch, VKeyGenesis)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">zip</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Epoch -&gt; [Epoch]
forall a. a -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">repeat</span></a></span><span> </span><span class="annot"><span class="annottext">(Epoch -&gt; [Epoch]) -&gt; Epoch -&gt; [Epoch]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">DSEnv -&gt; Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#_dSEnvEpoch"><span class="hs-identifier hs-var hs-var">_dSEnvEpoch</span></a></span><span> </span><span class="annot"><span class="annottext">DSEnv
</span><a href="#local-6989586621679584877"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Epoch -&gt; Epoch -&gt; Epoch
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Epoch
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[VKeyGenesis]
</span><a href="#local-6989586621679584875"><span class="hs-identifier hs-var">allowed</span></a></span><span>
</span><span id="line-630"></span><span>      </span><span class="hs-comment">-- We obtain the candidates by removing the ones that already delegated in</span><span>
</span><span id="line-631"></span><span>      </span><span class="hs-comment">-- this or next epoch.</span><span>
</span><span id="line-632"></span><span>      </span><span class="annot"><a href="#local-6989586621679584871"><span class="hs-identifier hs-type">candidates</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-633"></span><span>      </span><span id="local-6989586621679584871"><span class="annot"><span class="annottext">candidates :: [(Epoch, VKeyGenesis)]
</span><a href="#local-6989586621679584871"><span class="hs-identifier hs-var hs-var">candidates</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set (Epoch, VKeyGenesis) -&gt; [(Epoch, VKeyGenesis)]
forall a. Set a -&gt; [a]
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Set.toList</span></a></span><span> </span><span class="annot"><span class="annottext">(Set (Epoch, VKeyGenesis) -&gt; [(Epoch, VKeyGenesis)])
-&gt; Set (Epoch, VKeyGenesis) -&gt; [(Epoch, VKeyGenesis)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Set (Epoch, VKeyGenesis)
</span><a href="#local-6989586621679584874"><span class="hs-identifier hs-var">preCandidates</span></a></span><span> </span><span class="annot"><span class="annottext">Set (Epoch, VKeyGenesis)
-&gt; Set (Epoch, VKeyGenesis) -&gt; Set (Epoch, VKeyGenesis)
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="../../../../containers/html/src"><span class="hs-operator hs-var">\\</span></a></span><span> </span><span class="annot"><span class="annottext">Set (Epoch, VKeyGenesis)
</span><a href="#local-6989586621679584876"><span class="hs-identifier hs-var">eks</span></a></span><span>
</span><span id="line-634"></span><span>      </span><span class="hs-comment">-- Next, we choose to whom these keys delegate.</span><span>
</span><span id="line-635"></span><span>      </span><span class="annot"><a href="#local-6989586621679584870"><span class="hs-identifier hs-type">target</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-636"></span><span>      </span><span class="hs-comment">-- NOTE: we might want to make this configurable for now we chose an upper</span><span>
</span><span id="line-637"></span><span>      </span><span class="hs-comment">-- bound equal to two times the number of genesis keys to increase the</span><span>
</span><span id="line-638"></span><span>      </span><span class="hs-comment">-- chance of having two genesis keys delegating to the same key.</span><span>
</span><span id="line-639"></span><span>      </span><span id="local-6989586621679584870"><span class="annot"><span class="annottext">target :: [VKey]
</span><a href="#local-6989586621679584870"><span class="hs-identifier hs-var hs-var">target</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Owner -&gt; VKey
</span><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-var">VKey</span></a></span><span> </span><span class="annot"><span class="annottext">(Owner -&gt; VKey) -&gt; (Natural -&gt; Owner) -&gt; Natural -&gt; VKey
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Owner
</span><a href="Byron.Spec.Ledger.Core.html#Owner"><span class="hs-identifier hs-var">Owner</span></a></span><span> </span><span class="annot"><span class="annottext">(Natural -&gt; VKey) -&gt; [Natural] -&gt; [VKey]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Natural
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VKeyGenesis] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[VKeyGenesis]
</span><a href="#local-6989586621679584875"><span class="hs-identifier hs-var">allowed</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-640"></span><span>
</span><span id="line-641"></span><span>      </span><span id="local-6989586621679584867"><span class="annot"><span class="annottext">mkDCert' :: ((Epoch, VKeyGenesis), VKey) -&gt; DCert
</span><a href="#local-6989586621679584867"><span class="hs-identifier hs-var hs-var">mkDCert'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621679584866"><span class="annot"><span class="annottext">Epoch
</span><a href="#local-6989586621679584866"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679584865"><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679584865"><span class="hs-identifier hs-var">vkg</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621679584864"><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679584864"><span class="hs-identifier hs-var">vk</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VKeyGenesis -&gt; Sig (VKey, Epoch) -&gt; VKey -&gt; Epoch -&gt; DCert
</span><a href="Byron.Spec.Ledger.Delegation.html#mkDCert"><span class="hs-identifier hs-var">mkDCert</span></a></span><span> </span><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679584865"><span class="hs-identifier hs-var">vkg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VKeyGenesis -&gt; (VKey, Epoch) -&gt; Sig (VKey, Epoch)
forall a. VKeyGenesis -&gt; a -&gt; Sig a
</span><a href="Byron.Spec.Ledger.Core.Omniscient.html#signWithGenesisKey"><span class="hs-identifier hs-var">signWithGenesisKey</span></a></span><span> </span><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679584865"><span class="hs-identifier hs-var">vkg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679584864"><span class="hs-identifier hs-var">vk</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Epoch
</span><a href="#local-6989586621679584866"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679584864"><span class="hs-identifier hs-var">vk</span></a></span><span> </span><span class="annot"><span class="annottext">Epoch
</span><a href="#local-6989586621679584866"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-642"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[(Epoch, VKeyGenesis)] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[(Epoch, VKeyGenesis)]
</span><a href="#local-6989586621679584871"><span class="hs-identifier hs-var">candidates</span></a></span><span>
</span><span id="line-643"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Maybe DCert -&gt; Gen (Maybe DCert)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe DCert
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-644"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">DCert -&gt; Maybe DCert
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(DCert -&gt; Maybe DCert) -&gt; GenT Identity DCert -&gt; Gen (Maybe DCert)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[DCert] -&gt; GenT Identity DCert
forall (m :: * -&gt; *) a. MonadGen m =&gt; [a] -&gt; m a
</span><a href="../../../../hedgehog/html/src"><span class="hs-identifier hs-var">Gen.element</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Epoch, VKeyGenesis), VKey) -&gt; DCert
</span><a href="#local-6989586621679584867"><span class="hs-identifier hs-var">mkDCert'</span></a></span><span> </span><span class="annot"><span class="annottext">(((Epoch, VKeyGenesis), VKey) -&gt; DCert)
-&gt; [((Epoch, VKeyGenesis), VKey)] -&gt; [DCert]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[(Epoch, VKeyGenesis)] -&gt; [VKey] -&gt; [((Epoch, VKeyGenesis), VKey)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">zip</span></a></span><span> </span><span class="annot"><span class="annottext">[(Epoch, VKeyGenesis)]
</span><a href="#local-6989586621679584871"><span class="hs-identifier hs-var">candidates</span></a></span><span> </span><span class="annot"><span class="annottext">[VKey]
</span><a href="#local-6989586621679584870"><span class="hs-identifier hs-var">target</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-645"></span><span>
</span><span id="line-646"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#dcertsGen"><span class="hs-identifier hs-type">dcertsGen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSEnv"><span class="hs-identifier hs-type">DSEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DIState"><span class="hs-identifier hs-type">DIState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../hedgehog/html/src"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-647"></span><span id="dcertsGen"><span class="annot"><span class="annottext">dcertsGen :: DSEnv -&gt; DIState -&gt; Gen [DCert]
</span><a href="Byron.Spec.Ledger.Delegation.html#dcertsGen"><span class="hs-identifier hs-var hs-var">dcertsGen</span></a></span></span><span> </span><span id="local-6989586621679584861"><span class="annot"><span class="annottext">DSEnv
</span><a href="#local-6989586621679584861"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621679584860"><span class="annot"><span class="annottext">DIState
</span><a href="#local-6989586621679584860"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-648"></span><span>  </span><span class="hs-comment">-- This generator can result in an empty list of delegation certificates if</span><span>
</span><span id="line-649"></span><span>  </span><span class="hs-comment">-- no delegation certificates can be produced, according to the delegation</span><span>
</span><span id="line-650"></span><span>  </span><span class="hs-comment">-- rules, given the initial state and environment.</span><span>
</span><span id="line-651"></span><span>  </span><span class="annot"><span class="annottext">[Maybe DCert] -&gt; [DCert]
forall a. [Maybe a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">catMaybes</span></a></span><span> </span><span class="annot"><span class="annottext">([Maybe DCert] -&gt; [DCert])
-&gt; (Trace MSDELEG -&gt; [Maybe DCert]) -&gt; Trace MSDELEG -&gt; [DCert]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TraceOrder -&gt; Trace MSDELEG -&gt; [Signal MSDELEG]
forall s. TraceOrder -&gt; Trace s -&gt; [Signal s]
</span><a href="../../../../small-steps-test/html/src"><span class="hs-identifier hs-var">traceSignals</span></a></span><span> </span><span class="annot"><span class="annottext">TraceOrder
</span><a href="../../../../small-steps-test/html/src"><span class="hs-identifier hs-var">OldestFirst</span></a></span><span> </span><span class="annot"><span class="annottext">(Trace MSDELEG -&gt; [DCert])
-&gt; GenT Identity (Trace MSDELEG) -&gt; Gen [DCert]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">BaseEnv MSDELEG
-&gt; Word64
-&gt; Environment MSDELEG
-&gt; State MSDELEG
-&gt; SignalGenerator MSDELEG
-&gt; GenT Identity (Trace MSDELEG)
forall s.
HasTrace s =&gt;
BaseEnv s
-&gt; Word64
-&gt; Environment s
-&gt; State s
-&gt; SignalGenerator s
-&gt; Gen (Trace s)
</span><a href="../../../../small-steps-test/html/src"><span class="hs-identifier hs-var">genTrace</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#MSDELEG"><span class="hs-identifier hs-type">MSDELEG</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679584859"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Environment MSDELEG
DSEnv
</span><a href="#local-6989586621679584861"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">State MSDELEG
DSState
</span><a href="#local-6989586621679584858"><span class="hs-identifier hs-var">subSt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasTrace MSDELEG =&gt; SignalGenerator MSDELEG
forall s. HasTrace s =&gt; SignalGenerator s
</span><a href="../../../../small-steps-test/html/src"><span class="hs-identifier hs-var">sigGen</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#MSDELEG"><span class="hs-identifier hs-type">MSDELEG</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-652"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-653"></span><span>    </span><span id="local-6989586621679584859"><span class="annot"><span class="annottext">n :: Word64
</span><a href="#local-6989586621679584859"><span class="hs-identifier hs-var hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DSEnv
</span><a href="#local-6989586621679584861"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">DSEnv -&gt; Getting Word64 DSEnv Word64 -&gt; Word64
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../../../../microlens/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(Set VKeyGenesis -&gt; Const Word64 (Set VKeyGenesis))
-&gt; DSEnv -&gt; Const Word64 DSEnv
forall s a. HasAllowedDelegators s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#allowedDelegators"><span class="hs-identifier hs-var">allowedDelegators</span></a></span><span> </span><span class="annot"><span class="annottext">((Set VKeyGenesis -&gt; Const Word64 (Set VKeyGenesis))
 -&gt; DSEnv -&gt; Const Word64 DSEnv)
-&gt; ((Word64 -&gt; Const Word64 Word64)
    -&gt; Set VKeyGenesis -&gt; Const Word64 (Set VKeyGenesis))
-&gt; Getting Word64 DSEnv Word64
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Set VKeyGenesis -&gt; Int) -&gt; SimpleGetter (Set VKeyGenesis) Int
forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><a href="../../../../microlens/html/src"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">Set VKeyGenesis -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">Getting Word64 (Set VKeyGenesis) Int
-&gt; ((Word64 -&gt; Const Word64 Word64) -&gt; Int -&gt; Const Word64 Int)
-&gt; (Word64 -&gt; Const Word64 Word64)
-&gt; Set VKeyGenesis
-&gt; Const Word64 (Set VKeyGenesis)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Word64) -&gt; SimpleGetter Int Word64
forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><a href="../../../../microlens/html/src"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Word64
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span>
</span><span id="line-654"></span><span>    </span><span id="local-6989586621679584858"><span class="annot"><span class="annottext">subSt :: DSState
</span><a href="#local-6989586621679584858"><span class="hs-identifier hs-var hs-var">subSt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-655"></span><span>      </span><span class="annot"><span class="annottext">DSState :: [(Slot, (VKeyGenesis, VKey))]
-&gt; Set (Epoch, VKeyGenesis) -&gt; DSState
</span><a href="Byron.Spec.Ledger.Delegation.html#DSState"><span class="hs-identifier hs-type">DSState</span></a></span><span>
</span><span id="line-656"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_dSStateScheduledDelegations :: [(Slot, (VKeyGenesis, VKey))]
</span><a href="Byron.Spec.Ledger.Delegation.html#_dSStateScheduledDelegations"><span class="hs-identifier hs-var">_dSStateScheduledDelegations</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DIState -&gt; [(Slot, (VKeyGenesis, VKey))]
</span><a href="Byron.Spec.Ledger.Delegation.html#_dIStateScheduledDelegations"><span class="hs-identifier hs-var hs-var">_dIStateScheduledDelegations</span></a></span><span> </span><span class="annot"><span class="annottext">DIState
</span><a href="#local-6989586621679584860"><span class="hs-identifier hs-var">st</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-657"></span><span>          </span><span class="annot"><span class="annottext">_dSStateKeyEpochDelegations :: Set (Epoch, VKeyGenesis)
</span><a href="Byron.Spec.Ledger.Delegation.html#_dSStateKeyEpochDelegations"><span class="hs-identifier hs-var">_dSStateKeyEpochDelegations</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DIState -&gt; Set (Epoch, VKeyGenesis)
</span><a href="Byron.Spec.Ledger.Delegation.html#_dIStateKeyEpochDelegations"><span class="hs-identifier hs-var hs-var">_dIStateKeyEpochDelegations</span></a></span><span> </span><span class="annot"><span class="annottext">DIState
</span><a href="#local-6989586621679584860"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-658"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-659"></span><span>
</span><span id="line-660"></span><span class="hs-comment">-- | Generate a random delegation certificate, which has a high probability of failing since</span><span>
</span><span id="line-661"></span><span class="hs-comment">-- we do not consider the current delegation state. So for instance, we could generate a</span><span>
</span><span id="line-662"></span><span class="hs-comment">-- delegation certificate for a genesis key that already delegated in this epoch.</span><span>
</span><span id="line-663"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#randomDCertGen"><span class="hs-identifier hs-type">randomDCertGen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">Environment</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DELEG"><span class="hs-identifier hs-type">DELEG</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../hedgehog/html/src"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span>
</span><span id="line-664"></span><span id="randomDCertGen"><span class="annot"><span class="annottext">randomDCertGen :: Environment DELEG -&gt; GenT Identity DCert
</span><a href="Byron.Spec.Ledger.Delegation.html#randomDCertGen"><span class="hs-identifier hs-var hs-var">randomDCertGen</span></a></span></span><span> </span><span id="local-6989586621679584857"><span class="annot"><span class="annottext">Environment DELEG
</span><a href="#local-6989586621679584857"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-665"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621679584856"><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679584856"><span class="hs-identifier hs-var">vkg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679584855"><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679584855"><span class="hs-identifier hs-var">vk</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679584854"><span class="annot"><span class="annottext">Epoch
</span><a href="#local-6989586621679584854"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(VKeyGenesis -&gt; VKey -&gt; Epoch -&gt; (VKeyGenesis, VKey, Epoch))
-&gt; GenT Identity VKeyGenesis
-&gt; GenT Identity (VKey -&gt; Epoch -&gt; (VKeyGenesis, VKey, Epoch))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GenT Identity VKeyGenesis
</span><a href="#local-6989586621679584853"><span class="hs-identifier hs-var">vkgGen'</span></a></span><span> </span><span class="annot"><span class="annottext">GenT Identity (VKey -&gt; Epoch -&gt; (VKeyGenesis, VKey, Epoch))
-&gt; GenT Identity VKey
-&gt; GenT Identity (Epoch -&gt; (VKeyGenesis, VKey, Epoch))
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GenT Identity VKey
</span><a href="#local-6989586621679584852"><span class="hs-identifier hs-var">vkGen'</span></a></span><span> </span><span class="annot"><span class="annottext">GenT Identity (Epoch -&gt; (VKeyGenesis, VKey, Epoch))
-&gt; GenT Identity Epoch -&gt; GenT Identity (VKeyGenesis, VKey, Epoch)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GenT Identity Epoch
</span><a href="#local-6989586621679584851"><span class="hs-identifier hs-var">epochGen'</span></a></span><span>
</span><span id="line-666"></span><span>  </span><span class="annot"><span class="annottext">DCert -&gt; GenT Identity DCert
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(DCert -&gt; GenT Identity DCert) -&gt; DCert -&gt; GenT Identity DCert
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">VKeyGenesis -&gt; Sig (VKey, Epoch) -&gt; VKey -&gt; Epoch -&gt; DCert
</span><a href="Byron.Spec.Ledger.Delegation.html#mkDCert"><span class="hs-identifier hs-var">mkDCert</span></a></span><span> </span><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679584856"><span class="hs-identifier hs-var">vkg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VKeyGenesis -&gt; (VKey, Epoch) -&gt; Sig (VKey, Epoch)
forall a. VKeyGenesis -&gt; a -&gt; Sig a
</span><a href="Byron.Spec.Ledger.Core.Omniscient.html#signWithGenesisKey"><span class="hs-identifier hs-var">signWithGenesisKey</span></a></span><span> </span><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679584856"><span class="hs-identifier hs-var">vkg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679584855"><span class="hs-identifier hs-var">vk</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Epoch
</span><a href="#local-6989586621679584854"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679584855"><span class="hs-identifier hs-var">vk</span></a></span><span> </span><span class="annot"><span class="annottext">Epoch
</span><a href="#local-6989586621679584854"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-667"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-668"></span><span>    </span><span id="local-6989586621679584853"><span class="annot"><span class="annottext">vkgGen' :: GenT Identity VKeyGenesis
</span><a href="#local-6989586621679584853"><span class="hs-identifier hs-var hs-var">vkgGen'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[VKeyGenesis] -&gt; GenT Identity VKeyGenesis
forall (m :: * -&gt; *) a. MonadGen m =&gt; [a] -&gt; m a
</span><a href="../../../../hedgehog/html/src"><span class="hs-identifier hs-var">Gen.element</span></a></span><span> </span><span class="annot"><span class="annottext">([VKeyGenesis] -&gt; GenT Identity VKeyGenesis)
-&gt; [VKeyGenesis] -&gt; GenT Identity VKeyGenesis
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Set VKeyGenesis -&gt; [VKeyGenesis]
forall a. Set a -&gt; [a]
</span><a href="../../../../containers/html/src"><span class="hs-identifier hs-var">Set.toList</span></a></span><span> </span><span class="annot"><span class="annottext">Set VKeyGenesis
</span><a href="#local-6989586621679584850"><span class="hs-identifier hs-var">allowed</span></a></span><span>
</span><span id="line-669"></span><span>    </span><span id="local-6989586621679584850"><span class="annot"><span class="annottext">allowed :: Set VKeyGenesis
</span><a href="#local-6989586621679584850"><span class="hs-identifier hs-var hs-var">allowed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DSEnv -&gt; Set VKeyGenesis
</span><a href="Byron.Spec.Ledger.Delegation.html#_dSEnvAllowedDelegators"><span class="hs-identifier hs-var hs-var">_dSEnvAllowedDelegators</span></a></span><span> </span><span class="annot"><span class="annottext">Environment DELEG
DSEnv
</span><a href="#local-6989586621679584857"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-670"></span><span>    </span><span id="local-6989586621679584852"><span class="annot"><span class="annottext">vkGen' :: GenT Identity VKey
</span><a href="#local-6989586621679584852"><span class="hs-identifier hs-var hs-var">vkGen'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[VKey] -&gt; GenT Identity VKey
forall (m :: * -&gt; *) a. MonadGen m =&gt; [a] -&gt; m a
</span><a href="../../../../hedgehog/html/src"><span class="hs-identifier hs-var">Gen.element</span></a></span><span> </span><span class="annot"><span class="annottext">([VKey] -&gt; GenT Identity VKey) -&gt; [VKey] -&gt; GenT Identity VKey
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Owner -&gt; VKey
</span><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-var">VKey</span></a></span><span> </span><span class="annot"><span class="annottext">(Owner -&gt; VKey) -&gt; (Natural -&gt; Owner) -&gt; Natural -&gt; VKey
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Owner
</span><a href="Byron.Spec.Ledger.Core.html#Owner"><span class="hs-identifier hs-var">Owner</span></a></span><span> </span><span class="annot"><span class="annottext">(Natural -&gt; VKey) -&gt; [Natural] -&gt; [VKey]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Natural
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set VKeyGenesis -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">Set VKeyGenesis
</span><a href="#local-6989586621679584850"><span class="hs-identifier hs-var">allowed</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-671"></span><span>    </span><span id="local-6989586621679584851"><span class="annot"><span class="annottext">epochGen' :: GenT Identity Epoch
</span><a href="#local-6989586621679584851"><span class="hs-identifier hs-var hs-var">epochGen'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-672"></span><span>      </span><span class="annot"><span class="annottext">Word64 -&gt; Epoch
</span><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-var">Epoch</span></a></span><span>
</span><span id="line-673"></span><span>        </span><span class="annot"><span class="annottext">(Word64 -&gt; Epoch) -&gt; (Int -&gt; Word64) -&gt; Int -&gt; Epoch
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Word64
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="hs-comment">-- We don't care about underflow. We want to generate large epochs anyway.</span><span>
</span><span id="line-674"></span><span>        </span><span class="annot"><span class="annottext">(Int -&gt; Word64) -&gt; (Int -&gt; Int) -&gt; Int -&gt; Word64
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679584849"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-675"></span><span>        </span><span class="annot"><span class="annottext">(Int -&gt; Epoch) -&gt; GenT Identity Int -&gt; GenT Identity Epoch
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Range Int -&gt; GenT Identity Int
forall (m :: * -&gt; *) a. (MonadGen m, Integral a) =&gt; Range a -&gt; m a
</span><a href="../../../../hedgehog/html/src"><span class="hs-identifier hs-var">Gen.integral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Range Int
forall a. a -&gt; a -&gt; Range a
</span><a href="../../../../hedgehog/html/src"><span class="hs-identifier hs-var">Range.constant</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span>
</span><span id="line-676"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-677"></span><span>        </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span> </span><span id="local-6989586621679584849"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679584849"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DSEnv -&gt; Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#_dSEnvEpoch"><span class="hs-identifier hs-var hs-var">_dSEnvEpoch</span></a></span><span> </span><span class="annot"><span class="annottext">Environment DELEG
DSEnv
</span><a href="#local-6989586621679584857"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-678"></span><span>
</span><span id="line-679"></span><span class="hs-comment">-- | Dummy transition system needed for generating sequences of delegation certificates.</span><span>
</span><span id="line-680"></span><span class="hs-keyword">data</span><span> </span><span id="MSDELEG"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#MSDELEG"><span class="hs-identifier hs-var">MSDELEG</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="%24tMSDELEG"><span id="local-6989586621679584818"><span id="local-6989586621679584820"><span id="local-6989586621679584822"><span id="local-6989586621679584824"><span id="local-6989586621679584826"><span id="local-6989586621679584828"><span id="local-6989586621679584830"><span id="local-6989586621679584832"><span id="local-6989586621679584834"><span id="local-6989586621679584836"><span id="local-6989586621679584838"><span id="local-6989586621679584840"><span id="local-6989586621679584842"><span id="local-6989586621679584844"><span class="annot"><span class="annottext">Typeable MSDELEG
DataType
Typeable MSDELEG
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; MSDELEG -&gt; c MSDELEG)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c MSDELEG)
-&gt; (MSDELEG -&gt; Constr)
-&gt; (MSDELEG -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c MSDELEG))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c MSDELEG))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; MSDELEG -&gt; MSDELEG)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; MSDELEG -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; MSDELEG -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; MSDELEG -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; MSDELEG -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; MSDELEG -&gt; m MSDELEG)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; MSDELEG -&gt; m MSDELEG)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; MSDELEG -&gt; m MSDELEG)
-&gt; Data MSDELEG
MSDELEG -&gt; DataType
MSDELEG -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; MSDELEG -&gt; MSDELEG
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; MSDELEG -&gt; c MSDELEG
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c MSDELEG
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; MSDELEG -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; MSDELEG -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; MSDELEG -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; MSDELEG -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; MSDELEG -&gt; m MSDELEG
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; MSDELEG -&gt; m MSDELEG
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c MSDELEG
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; MSDELEG -&gt; c MSDELEG
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c MSDELEG)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c MSDELEG)
$tMSDELEG :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; MSDELEG -&gt; m MSDELEG
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; MSDELEG -&gt; m MSDELEG
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; MSDELEG -&gt; m MSDELEG
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; MSDELEG -&gt; m MSDELEG
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; MSDELEG -&gt; m MSDELEG
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; MSDELEG -&gt; m MSDELEG
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; MSDELEG -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; MSDELEG -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; MSDELEG -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; MSDELEG -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; MSDELEG -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; MSDELEG -&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; MSDELEG -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; MSDELEG -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; MSDELEG -&gt; MSDELEG
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; MSDELEG -&gt; MSDELEG
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c MSDELEG)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c MSDELEG)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c MSDELEG)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c MSDELEG)
dataTypeOf :: MSDELEG -&gt; DataType
$cdataTypeOf :: MSDELEG -&gt; DataType
toConstr :: MSDELEG -&gt; Constr
$ctoConstr :: MSDELEG -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c MSDELEG
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c MSDELEG
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; MSDELEG -&gt; c MSDELEG
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; MSDELEG -&gt; c MSDELEG
$cp1Data :: Typeable MSDELEG
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-681"></span><span>
</span><span id="line-682"></span><span id="local-6989586621679584815"><span id="local-6989586621679584816"></span></span><span class="hs-keyword">data</span><span> </span><span id="MsdelegPredicateFailure"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#MsdelegPredicateFailure"><span class="hs-identifier hs-var">MsdelegPredicateFailure</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SDELEGFailure"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEGFailure"><span class="hs-identifier hs-var">SDELEGFailure</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEG"><span class="hs-identifier hs-type">SDELEG</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-683"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679584810"><span id="local-6989586621679584812"><span class="annot"><span class="annottext">MsdelegPredicateFailure -&gt; MsdelegPredicateFailure -&gt; Bool
(MsdelegPredicateFailure -&gt; MsdelegPredicateFailure -&gt; Bool)
-&gt; (MsdelegPredicateFailure -&gt; MsdelegPredicateFailure -&gt; Bool)
-&gt; Eq MsdelegPredicateFailure
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: MsdelegPredicateFailure -&gt; MsdelegPredicateFailure -&gt; Bool
$c/= :: MsdelegPredicateFailure -&gt; MsdelegPredicateFailure -&gt; Bool
== :: MsdelegPredicateFailure -&gt; MsdelegPredicateFailure -&gt; Bool
$c== :: MsdelegPredicateFailure -&gt; MsdelegPredicateFailure -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679584804"><span id="local-6989586621679584806"><span id="local-6989586621679584808"><span class="annot"><span class="annottext">Int -&gt; MsdelegPredicateFailure -&gt; ShowS
[MsdelegPredicateFailure] -&gt; ShowS
MsdelegPredicateFailure -&gt; String
(Int -&gt; MsdelegPredicateFailure -&gt; ShowS)
-&gt; (MsdelegPredicateFailure -&gt; String)
-&gt; ([MsdelegPredicateFailure] -&gt; ShowS)
-&gt; Show MsdelegPredicateFailure
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [MsdelegPredicateFailure] -&gt; ShowS
$cshowList :: [MsdelegPredicateFailure] -&gt; ShowS
show :: MsdelegPredicateFailure -&gt; String
$cshow :: MsdelegPredicateFailure -&gt; String
showsPrec :: Int -&gt; MsdelegPredicateFailure -&gt; ShowS
$cshowsPrec :: Int -&gt; MsdelegPredicateFailure -&gt; ShowS
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cSDELEGFailure"><span id="%24tMsdelegPredicateFailure"><span id="local-6989586621679584775"><span id="local-6989586621679584777"><span id="local-6989586621679584779"><span id="local-6989586621679584781"><span id="local-6989586621679584783"><span id="local-6989586621679584785"><span id="local-6989586621679584787"><span id="local-6989586621679584789"><span id="local-6989586621679584791"><span id="local-6989586621679584793"><span id="local-6989586621679584795"><span id="local-6989586621679584797"><span id="local-6989586621679584799"><span id="local-6989586621679584801"><span class="annot"><span class="annottext">Typeable MsdelegPredicateFailure
DataType
Constr
Typeable MsdelegPredicateFailure
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g)
    -&gt; MsdelegPredicateFailure
    -&gt; c MsdelegPredicateFailure)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c MsdelegPredicateFailure)
-&gt; (MsdelegPredicateFailure -&gt; Constr)
-&gt; (MsdelegPredicateFailure -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c MsdelegPredicateFailure))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c MsdelegPredicateFailure))
-&gt; ((forall b. Data b =&gt; b -&gt; b)
    -&gt; MsdelegPredicateFailure -&gt; MsdelegPredicateFailure)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; MsdelegPredicateFailure
    -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r
    -&gt; (forall d. Data d =&gt; d -&gt; r')
    -&gt; MsdelegPredicateFailure
    -&gt; r)
-&gt; (forall u.
    (forall d. Data d =&gt; d -&gt; u) -&gt; MsdelegPredicateFailure -&gt; [u])
-&gt; (forall u.
    Int
    -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; MsdelegPredicateFailure -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; MsdelegPredicateFailure -&gt; m MsdelegPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; MsdelegPredicateFailure -&gt; m MsdelegPredicateFailure)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; MsdelegPredicateFailure -&gt; m MsdelegPredicateFailure)
-&gt; Data MsdelegPredicateFailure
MsdelegPredicateFailure -&gt; DataType
MsdelegPredicateFailure -&gt; Constr
(forall b. Data b =&gt; b -&gt; b)
-&gt; MsdelegPredicateFailure -&gt; MsdelegPredicateFailure
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; MsdelegPredicateFailure
-&gt; c MsdelegPredicateFailure
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c MsdelegPredicateFailure
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; MsdelegPredicateFailure -&gt; u
forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; MsdelegPredicateFailure -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; MsdelegPredicateFailure
-&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; MsdelegPredicateFailure
-&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; MsdelegPredicateFailure -&gt; m MsdelegPredicateFailure
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; MsdelegPredicateFailure -&gt; m MsdelegPredicateFailure
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c MsdelegPredicateFailure
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; MsdelegPredicateFailure
-&gt; c MsdelegPredicateFailure
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c MsdelegPredicateFailure)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c MsdelegPredicateFailure)
$cSDELEGFailure :: Constr
$tMsdelegPredicateFailure :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; MsdelegPredicateFailure -&gt; m MsdelegPredicateFailure
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; MsdelegPredicateFailure -&gt; m MsdelegPredicateFailure
gmapMp :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; MsdelegPredicateFailure -&gt; m MsdelegPredicateFailure
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; MsdelegPredicateFailure -&gt; m MsdelegPredicateFailure
gmapM :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; MsdelegPredicateFailure -&gt; m MsdelegPredicateFailure
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; MsdelegPredicateFailure -&gt; m MsdelegPredicateFailure
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; MsdelegPredicateFailure -&gt; u
$cgmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; MsdelegPredicateFailure -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; MsdelegPredicateFailure -&gt; [u]
$cgmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; MsdelegPredicateFailure -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; MsdelegPredicateFailure
-&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; MsdelegPredicateFailure
-&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; MsdelegPredicateFailure
-&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; MsdelegPredicateFailure
-&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; MsdelegPredicateFailure -&gt; MsdelegPredicateFailure
$cgmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; MsdelegPredicateFailure -&gt; MsdelegPredicateFailure
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c MsdelegPredicateFailure)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c MsdelegPredicateFailure)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c MsdelegPredicateFailure)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c MsdelegPredicateFailure)
dataTypeOf :: MsdelegPredicateFailure -&gt; DataType
$cdataTypeOf :: MsdelegPredicateFailure -&gt; DataType
toConstr :: MsdelegPredicateFailure -&gt; Constr
$ctoConstr :: MsdelegPredicateFailure -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c MsdelegPredicateFailure
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c MsdelegPredicateFailure
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; MsdelegPredicateFailure
-&gt; c MsdelegPredicateFailure
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; MsdelegPredicateFailure
-&gt; c MsdelegPredicateFailure
$cp1Data :: Typeable MsdelegPredicateFailure
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x.
 MsdelegPredicateFailure -&gt; Rep MsdelegPredicateFailure x)
-&gt; (forall x.
    Rep MsdelegPredicateFailure x -&gt; MsdelegPredicateFailure)
-&gt; Generic MsdelegPredicateFailure
forall x. Rep MsdelegPredicateFailure x -&gt; MsdelegPredicateFailure
forall x. MsdelegPredicateFailure -&gt; Rep MsdelegPredicateFailure x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep MsdelegPredicateFailure x -&gt; MsdelegPredicateFailure
$cfrom :: forall x. MsdelegPredicateFailure -&gt; Rep MsdelegPredicateFailure x
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679584765"><span id="local-6989586621679584767"><span id="local-6989586621679584769"><span class="annot"><span class="annottext">Context -&gt; MsdelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
Proxy MsdelegPredicateFailure -&gt; String
(Context -&gt; MsdelegPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; MsdelegPredicateFailure -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy MsdelegPredicateFailure -&gt; String)
-&gt; NoThunks MsdelegPredicateFailure
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy MsdelegPredicateFailure -&gt; String
$cshowTypeOf :: Proxy MsdelegPredicateFailure -&gt; String
wNoThunks :: Context -&gt; MsdelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; MsdelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; MsdelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; MsdelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679584765"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-684"></span><span>
</span><span id="line-685"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679584755"><span id="local-6989586621679584757"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#MSDELEG"><span class="hs-identifier hs-type">MSDELEG</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-686"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Environment"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">Environment</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#MSDELEG"><span class="hs-identifier hs-type">MSDELEG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSEnv"><span class="hs-identifier hs-type">DSEnv</span></a></span><span>
</span><span id="line-687"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="State"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">State</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#MSDELEG"><span class="hs-identifier hs-type">MSDELEG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSState"><span class="hs-identifier hs-type">DSState</span></a></span><span>
</span><span id="line-688"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Signal"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">Signal</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#MSDELEG"><span class="hs-identifier hs-type">MSDELEG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span>
</span><span id="line-689"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PredicateFailure"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">PredicateFailure</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#MSDELEG"><span class="hs-identifier hs-type">MSDELEG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#MsdelegPredicateFailure"><span class="hs-identifier hs-type">MsdelegPredicateFailure</span></a></span><span>
</span><span id="line-690"></span><span>
</span><span id="line-691"></span><span>  </span><span id="local-6989586621679584754"><span class="annot"><span class="annottext">initialRules :: [InitialRule MSDELEG]
</span><a href="#local-6989586621679584754"><span class="hs-identifier hs-var hs-var hs-var hs-var">initialRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-692"></span><span>
</span><span id="line-693"></span><span>  </span><span id="local-6989586621679584753"><span class="annot"><span class="annottext">transitionRules :: [TransitionRule MSDELEG]
</span><a href="#local-6989586621679584753"><span class="hs-identifier hs-var hs-var hs-var hs-var">transitionRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-694"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-695"></span><span>        </span><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">TRC</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679584752"><span class="annot"><span class="annottext">Environment MSDELEG
</span><a href="#local-6989586621679584752"><span class="hs-identifier hs-var">env</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679584751"><span class="annot"><span class="annottext">State MSDELEG
</span><a href="#local-6989586621679584751"><span class="hs-identifier hs-var">st</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679584750"><span class="annot"><span class="annottext">Signal MSDELEG
</span><a href="#local-6989586621679584750"><span class="hs-identifier hs-var">msig</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">F (Clause MSDELEG 'Transition) (TRC MSDELEG)
forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-696"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Signal MSDELEG
</span><a href="#local-6989586621679584750"><span class="hs-identifier hs-var">msig</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-697"></span><span>          </span><span class="annot"><span class="annottext">Signal MSDELEG
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DSState -&gt; F (Clause MSDELEG 'Transition) DSState
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">State MSDELEG
DSState
</span><a href="#local-6989586621679584751"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-698"></span><span>          </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679584749"><span class="annot"><a href="#local-6989586621679584749"><span class="hs-identifier hs-var">sig</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
forall super (rtype :: RuleType).
Embed SDELEG super =&gt;
RuleContext rtype SDELEG -&gt; Rule super rtype (State SDELEG)
</span><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEG"><span class="hs-identifier hs-type">SDELEG</span></a></span><span> </span><span class="annot"><span class="annottext">(RuleContext 'Transition SDELEG
 -&gt; Rule MSDELEG 'Transition (State SDELEG))
-&gt; RuleContext 'Transition SDELEG
-&gt; Rule MSDELEG 'Transition (State SDELEG)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Environment SDELEG, State SDELEG, Signal SDELEG) -&gt; TRC SDELEG
forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment MSDELEG
Environment SDELEG
</span><a href="#local-6989586621679584752"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">State MSDELEG
State SDELEG
</span><a href="#local-6989586621679584751"><span class="hs-identifier hs-var">st</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Signal SDELEG
DCert
</span><a href="#local-6989586621679584749"><span class="hs-identifier hs-var">sig</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-699"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-700"></span><span>
</span><span id="line-701"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679584744"><span class="annot"><a href="../../../../small-steps/html/src"><span class="hs-identifier hs-type">Embed</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEG"><span class="hs-identifier hs-type">SDELEG</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#MSDELEG"><span class="hs-identifier hs-type">MSDELEG</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-702"></span><span>  </span><span id="local-6989586621679584743"><span class="annot"><span class="annottext">wrapFailed :: PredicateFailure SDELEG -&gt; PredicateFailure MSDELEG
</span><a href="#local-6989586621679584743"><span class="hs-identifier hs-var hs-var hs-var hs-var">wrapFailed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PredicateFailure SDELEG -&gt; PredicateFailure MSDELEG
PredicateFailure SDELEG -&gt; MsdelegPredicateFailure
</span><a href="Byron.Spec.Ledger.Delegation.html#SDELEGFailure"><span class="hs-identifier hs-var">SDELEGFailure</span></a></span><span>
</span><span id="line-703"></span><span>
</span><span id="line-704"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679584730"><span id="local-6989586621679584732"><span id="local-6989586621679584734"><span id="local-6989586621679584736"><span id="local-6989586621679584740"><span class="annot"><a href="../../../../small-steps-test/html/src"><span class="hs-identifier hs-type">HasTrace</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#MSDELEG"><span class="hs-identifier hs-type">MSDELEG</span></a></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-705"></span><span>  </span><span id="local-6989586621679584728"><span class="annot"><span class="annottext">envGen :: Word64 -&gt; Gen (Environment MSDELEG)
</span><a href="#local-6989586621679584728"><span class="hs-identifier hs-var hs-var hs-var hs-var">envGen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Gen (Environment MSDELEG)
Word64 -&gt; Gen DSEnv
</span><a href="Byron.Spec.Ledger.Delegation.html#delegEnvGen"><span class="hs-identifier hs-var">delegEnvGen</span></a></span><span>
</span><span id="line-706"></span><span>
</span><span id="line-707"></span><span>  </span><span id="local-6989586621679584726"><span class="annot"><span class="annottext">sigGen :: SignalGenerator MSDELEG
</span><a href="#local-6989586621679584726"><span class="hs-identifier hs-var hs-var hs-var hs-var">sigGen</span></a></span></span><span> </span><span id="local-6989586621679584725"><span class="annot"><span class="annottext">Environment MSDELEG
</span><a href="#local-6989586621679584725"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621679584724"><span class="annot"><span class="annottext">State MSDELEG
</span><a href="#local-6989586621679584724"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DSEnv -&gt; Set (Epoch, VKeyGenesis) -&gt; Gen (Maybe DCert)
</span><a href="Byron.Spec.Ledger.Delegation.html#dcertGen"><span class="hs-identifier hs-var">dcertGen</span></a></span><span> </span><span class="annot"><span class="annottext">Environment MSDELEG
DSEnv
</span><a href="#local-6989586621679584725"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DSState -&gt; Set (Epoch, VKeyGenesis)
</span><a href="Byron.Spec.Ledger.Delegation.html#_dSStateKeyEpochDelegations"><span class="hs-identifier hs-var hs-var">_dSStateKeyEpochDelegations</span></a></span><span> </span><span class="annot"><span class="annottext">State MSDELEG
DSState
</span><a href="#local-6989586621679584724"><span class="hs-identifier hs-var">st</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-708"></span><span>
</span><span id="line-709"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679584711"><span id="local-6989586621679584713"><span id="local-6989586621679584715"><span id="local-6989586621679584717"><span id="local-6989586621679584721"><span class="annot"><a href="../../../../small-steps-test/html/src"><span class="hs-identifier hs-type">HasTrace</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DELEG"><span class="hs-identifier hs-type">DELEG</span></a></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-710"></span><span>  </span><span id="local-6989586621679584710"><span class="annot"><span class="annottext">envGen :: Word64 -&gt; Gen (Environment DELEG)
</span><a href="#local-6989586621679584710"><span class="hs-identifier hs-var hs-var hs-var hs-var">envGen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Gen (Environment DELEG)
Word64 -&gt; Gen DSEnv
</span><a href="Byron.Spec.Ledger.Delegation.html#delegEnvGen"><span class="hs-identifier hs-var">delegEnvGen</span></a></span><span>
</span><span id="line-711"></span><span>
</span><span id="line-712"></span><span>  </span><span id="local-6989586621679584709"><span class="annot"><span class="annottext">sigGen :: SignalGenerator DELEG
</span><a href="#local-6989586621679584709"><span class="hs-identifier hs-var hs-var hs-var hs-var">sigGen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SignalGenerator DELEG
DSEnv -&gt; DIState -&gt; Gen [DCert]
</span><a href="Byron.Spec.Ledger.Delegation.html#dcertsGen"><span class="hs-identifier hs-var">dcertsGen</span></a></span><span>
</span><span id="line-713"></span><span>
</span><span id="line-714"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#delegEnvGen"><span class="hs-identifier hs-type">delegEnvGen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../hedgehog/html/src"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSEnv"><span class="hs-identifier hs-type">DSEnv</span></a></span><span>
</span><span id="line-715"></span><span id="delegEnvGen"><span class="annot"><span class="annottext">delegEnvGen :: Word64 -&gt; Gen DSEnv
</span><a href="Byron.Spec.Ledger.Delegation.html#delegEnvGen"><span class="hs-identifier hs-var hs-var">delegEnvGen</span></a></span></span><span> </span><span id="local-6989586621679584708"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679584708"><span class="hs-identifier hs-var">chainLength</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-716"></span><span>  </span><span id="local-6989586621679584707"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679584707"><span class="hs-identifier hs-var">ngk</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Range Word8 -&gt; GenT Identity Word8
forall (m :: * -&gt; *) a. (MonadGen m, Integral a) =&gt; Range a -&gt; m a
</span><a href="../../../../hedgehog/html/src"><span class="hs-identifier hs-var">Gen.integral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Range Word8
forall a. Integral a =&gt; a -&gt; a -&gt; Range a
</span><a href="../../../../hedgehog/html/src"><span class="hs-identifier hs-var">Range.linear</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">14</span></span><span class="hs-special">)</span><span>
</span><span id="line-717"></span><span>  </span><span class="annot"><span class="annottext">Word8 -&gt; Word64 -&gt; Gen DSEnv
</span><a href="Byron.Spec.Ledger.Delegation.html#initialEnvFromGenesisKeys"><span class="hs-identifier hs-var">initialEnvFromGenesisKeys</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679584707"><span class="hs-identifier hs-var">ngk</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679584708"><span class="hs-identifier hs-var">chainLength</span></a></span><span>
</span><span id="line-718"></span><span>
</span><span id="line-719"></span><span class="hs-comment">-- | Generate an initial 'DELEG' environment from the given number of genesis</span><span>
</span><span id="line-720"></span><span class="hs-comment">-- keys.</span><span>
</span><span id="line-721"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#initialEnvFromGenesisKeys"><span class="hs-identifier hs-type">initialEnvFromGenesisKeys</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-722"></span><span>  </span><span class="hs-comment">-- | Number of genesis keys.</span><span>
</span><span id="line-723"></span><span>  </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word8</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-724"></span><span>  </span><span class="hs-comment">-- | Chain length</span><span>
</span><span id="line-725"></span><span>  </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-726"></span><span>  </span><span class="annot"><a href="../../../../hedgehog/html/src"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSEnv"><span class="hs-identifier hs-type">DSEnv</span></a></span><span>
</span><span id="line-727"></span><span id="initialEnvFromGenesisKeys"><span class="annot"><span class="annottext">initialEnvFromGenesisKeys :: Word8 -&gt; Word64 -&gt; Gen DSEnv
</span><a href="Byron.Spec.Ledger.Delegation.html#initialEnvFromGenesisKeys"><span class="hs-identifier hs-var hs-var">initialEnvFromGenesisKeys</span></a></span></span><span> </span><span id="local-6989586621679584705"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679584705"><span class="hs-identifier hs-var">ngk</span></a></span></span><span> </span><span id="local-6989586621679584704"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679584704"><span class="hs-identifier hs-var">chainLength</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-728"></span><span>  </span><span class="annot"><span class="annottext">Set VKeyGenesis -&gt; Epoch -&gt; Slot -&gt; BlockCount -&gt; DSEnv
</span><a href="Byron.Spec.Ledger.Delegation.html#DSEnv"><span class="hs-identifier hs-var">DSEnv</span></a></span><span>
</span><span id="line-729"></span><span>    </span><span class="hs-comment">-- We need at least one delegator in the environment to be able to generate</span><span>
</span><span id="line-730"></span><span>    </span><span class="hs-comment">-- delegation certificates.</span><span>
</span><span id="line-731"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-732"></span><span>    </span><span class="hs-comment">-- The use of a linear generator and its bound is rather arbitrary. The</span><span>
</span><span id="line-733"></span><span>    </span><span class="hs-comment">-- sizes passed to the `Gen` monad would be around 100~300, so we rather</span><span>
</span><span id="line-734"></span><span>    </span><span class="hs-comment">-- arbitrarily decided that this size times 100 is a reasonable upper</span><span>
</span><span id="line-735"></span><span>    </span><span class="hs-comment">-- bounds for epochs.</span><span>
</span><span id="line-736"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-737"></span><span>    </span><span class="hs-comment">-- A similar remark applies to the ranges chosen for slot and slot count</span><span>
</span><span id="line-738"></span><span>    </span><span class="hs-comment">-- generators.</span><span>
</span><span id="line-739"></span><span>    </span><span class="annot"><span class="annottext">(Set VKeyGenesis -&gt; Epoch -&gt; Slot -&gt; BlockCount -&gt; DSEnv)
-&gt; GenT Identity (Set VKeyGenesis)
-&gt; GenT Identity (Epoch -&gt; Slot -&gt; BlockCount -&gt; DSEnv)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Set VKeyGenesis -&gt; GenT Identity (Set VKeyGenesis)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word8 -&gt; Set VKeyGenesis
</span><a href="Byron.Spec.Ledger.Core.html#mkVkGenesisSet"><span class="hs-identifier hs-var">mkVkGenesisSet</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679584705"><span class="hs-identifier hs-var">ngk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-740"></span><span>    </span><span class="annot"><span class="annottext">GenT Identity (Epoch -&gt; Slot -&gt; BlockCount -&gt; DSEnv)
-&gt; GenT Identity Epoch
-&gt; GenT Identity (Slot -&gt; BlockCount -&gt; DSEnv)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; GenT Identity Epoch
</span><a href="Byron.Spec.Ledger.Core.Generators.html#epochGen"><span class="hs-identifier hs-var">epochGen</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">10</span></span><span>
</span><span id="line-741"></span><span>    </span><span class="annot"><span class="annottext">GenT Identity (Slot -&gt; BlockCount -&gt; DSEnv)
-&gt; GenT Identity Slot -&gt; GenT Identity (BlockCount -&gt; DSEnv)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; GenT Identity Slot
</span><a href="Byron.Spec.Ledger.Core.Generators.html#slotGen"><span class="hs-identifier hs-var">slotGen</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">100</span></span><span>
</span><span id="line-742"></span><span>    </span><span class="annot"><span class="annottext">GenT Identity (BlockCount -&gt; DSEnv)
-&gt; GenT Identity BlockCount -&gt; Gen DSEnv
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; GenT Identity BlockCount
</span><a href="Byron.Spec.Ledger.Core.Generators.html#k"><span class="hs-identifier hs-var">CoreGen.k</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679584704"><span class="hs-identifier hs-var">chainLength</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679584704"><span class="hs-identifier hs-var">chainLength</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; Word64
forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`div`</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">10</span></span><span class="hs-special">)</span><span>
</span><span id="line-743"></span><span>
</span><span id="line-744"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-745"></span><span class="hs-comment">-- Shared support functions for Delegation Properties</span><span>
</span><span id="line-746"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-747"></span><span>
</span><span id="line-748"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#delegatorDelegate"><span class="hs-identifier hs-type">delegatorDelegate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-749"></span><span id="delegatorDelegate"><span class="annot"><span class="annottext">delegatorDelegate :: DCert -&gt; (VKeyGenesis, VKey)
</span><a href="Byron.Spec.Ledger.Delegation.html#delegatorDelegate"><span class="hs-identifier hs-var hs-var">delegatorDelegate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DCert -&gt; VKeyGenesis
</span><a href="Byron.Spec.Ledger.Delegation.html#delegator"><span class="hs-identifier hs-var hs-var">delegator</span></a></span><span> </span><span class="annot"><span class="annottext">(DCert -&gt; VKeyGenesis)
-&gt; (DCert -&gt; VKey) -&gt; DCert -&gt; (VKeyGenesis, VKey)
forall (a :: * -&gt; * -&gt; *) b c c'.
Arrow a =&gt;
a b c -&gt; a b c' -&gt; a b (c, c')
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; VKey
</span><a href="Byron.Spec.Ledger.Delegation.html#delegate"><span class="hs-identifier hs-var hs-var">delegate</span></a></span><span>
</span><span id="line-750"></span><span>
</span><span id="line-751"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ratioInt"><span class="hs-identifier hs-type">ratioInt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Double</span></a></span><span>
</span><span id="line-752"></span><span id="ratioInt"><span class="annot"><span class="annottext">ratioInt :: Int -&gt; Int -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#ratioInt"><span class="hs-identifier hs-var hs-var">ratioInt</span></a></span></span><span> </span><span id="local-6989586621679584700"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679584700"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679584699"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679584699"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-753"></span><span>  </span><span class="annot"><span class="annottext">Int -&gt; Double
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679584700"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Double -&gt; Double -&gt; Double
forall a. Fractional a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">/</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Double
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679584699"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-754"></span><span>
</span><span id="line-755"></span><span class="hs-comment">-- | Transforms the list and returns the ratio of lengths of</span><span>
</span><span id="line-756"></span><span class="hs-comment">-- the transformed and original lists.</span><span>
</span><span id="line-757"></span><span id="local-6989586621679585882"><span id="local-6989586621679585883"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#lenRatio"><span class="hs-identifier hs-type">lenRatio</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679585883"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679585882"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679585883"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Double</span></a></span></span></span><span>
</span><span id="line-758"></span><span id="lenRatio"><span class="annot"><span class="annottext">lenRatio :: ([a] -&gt; [b]) -&gt; [a] -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#lenRatio"><span class="hs-identifier hs-var hs-var">lenRatio</span></a></span></span><span> </span><span id="local-6989586621679584696"><span class="annot"><span class="annottext">[a] -&gt; [b]
</span><a href="#local-6989586621679584696"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679584695"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679584695"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-759"></span><span>  </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#ratioInt"><span class="hs-identifier hs-var">ratioInt</span></a></span><span>
</span><span id="line-760"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[b] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[a] -&gt; [b]
</span><a href="#local-6989586621679584696"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679584695"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-761"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679584695"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-762"></span><span>
</span><span id="line-763"></span><span class="hs-comment">-- | True if the tuple count (snd item) is &gt;= 2</span><span>
</span><span id="line-764"></span><span id="local-6989586621679585873"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#multiple"><span class="hs-identifier hs-type">multiple</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679585873"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span></span><span>
</span><span id="line-765"></span><span id="multiple"><span class="annot"><span class="annottext">multiple :: (a, Int) -&gt; Bool
</span><a href="Byron.Spec.Ledger.Delegation.html#multiple"><span class="hs-identifier hs-var hs-var">multiple</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&lt;=</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Bool) -&gt; ((a, Int) -&gt; Int) -&gt; (a, Int) -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(a, Int) -&gt; Int
forall a b. (a, b) -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span>
</span><span id="line-766"></span><span>
</span><span id="line-767"></span><span class="hs-comment">-- | Count the number of delegates/delegators in the given certificates</span><span>
</span><span id="line-768"></span><span id="local-6989586621679585884"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#delegateCounter"><span class="hs-identifier hs-type">delegateCounter</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-769"></span><span>  </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679585884"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-770"></span><span>  </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679585884"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-771"></span><span>  </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-772"></span><span>  </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679585884"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span></span><span>
</span><span id="line-773"></span><span id="delegateCounter"><span class="annot"><span class="annottext">delegateCounter :: ((VKeyGenesis, VKey) -&gt; a) -&gt; [DCert] -&gt; [(a, Int)]
</span><a href="Byron.Spec.Ledger.Delegation.html#delegateCounter"><span class="hs-identifier hs-var hs-var">delegateCounter</span></a></span></span><span> </span><span id="local-6989586621679584692"><span class="annot"><span class="annottext">(VKeyGenesis, VKey) -&gt; a
</span><a href="#local-6989586621679584692"><span class="hs-identifier hs-var">pick</span></a></span></span><span> </span><span id="local-6989586621679584691"><span class="annot"><span class="annottext">[DCert]
</span><a href="#local-6989586621679584691"><span class="hs-identifier hs-var">certs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-774"></span><span>  </span><span class="annot"><span class="annottext">(DCert -&gt; (VKeyGenesis, VKey)) -&gt; [DCert] -&gt; [(VKeyGenesis, VKey)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; (VKeyGenesis, VKey)
</span><a href="Byron.Spec.Ledger.Delegation.html#delegatorDelegate"><span class="hs-identifier hs-var">delegatorDelegate</span></a></span><span> </span><span class="annot"><span class="annottext">[DCert]
</span><a href="#local-6989586621679584691"><span class="hs-identifier hs-var">certs</span></a></span><span>
</span><span id="line-775"></span><span>    </span><span class="hs-comment">-- Remove duplicated elements, since we're not</span><span>
</span><span id="line-776"></span><span>    </span><span class="hs-comment">-- interested in repeated delegations</span><span>
</span><span id="line-777"></span><span>    </span><span class="annot"><span class="annottext">[(VKeyGenesis, VKey)]
-&gt; ([(VKeyGenesis, VKey)] -&gt; [(VKeyGenesis, VKey)])
-&gt; [(VKeyGenesis, VKey)]
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">[(VKeyGenesis, VKey)] -&gt; [(VKeyGenesis, VKey)]
forall a. Eq a =&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">List.nub</span></a></span><span>
</span><span id="line-778"></span><span>    </span><span class="hs-comment">-- Select the (unique) delegate/delegators</span><span>
</span><span id="line-779"></span><span>    </span><span class="annot"><span class="annottext">[(VKeyGenesis, VKey)] -&gt; ([(VKeyGenesis, VKey)] -&gt; [a]) -&gt; [a]
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">((VKeyGenesis, VKey) -&gt; a) -&gt; [(VKeyGenesis, VKey)] -&gt; [a]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">(VKeyGenesis, VKey) -&gt; a
</span><a href="#local-6989586621679584692"><span class="hs-identifier hs-var">pick</span></a></span><span>
</span><span id="line-780"></span><span>    </span><span class="hs-comment">-- If we have more than one occurrence, then there were</span><span>
</span><span id="line-781"></span><span>    </span><span class="hs-comment">-- multiple delegations from/to that delegate</span><span>
</span><span id="line-782"></span><span>    </span><span class="annot"><span class="annottext">[a] -&gt; ([a] -&gt; [(a, Int)]) -&gt; [(a, Int)]
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; [(a, Int)]
forall a. Ord a =&gt; [a] -&gt; [(a, Int)]
</span><a href="../../../../Unique/html/src"><span class="hs-identifier hs-var">count</span></a></span><span>
</span><span id="line-783"></span><span>
</span><span id="line-784"></span><span class="hs-comment">-- | Count the number of times each delegate was delegated to</span><span>
</span><span id="line-785"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#delegateCounts"><span class="hs-identifier hs-type">delegateCounts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-786"></span><span id="delegateCounts"><span class="annot"><span class="annottext">delegateCounts :: [DCert] -&gt; [(VKey, Int)]
</span><a href="Byron.Spec.Ledger.Delegation.html#delegateCounts"><span class="hs-identifier hs-var hs-var">delegateCounts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((VKeyGenesis, VKey) -&gt; VKey) -&gt; [DCert] -&gt; [(VKey, Int)]
forall a.
Ord a =&gt;
((VKeyGenesis, VKey) -&gt; a) -&gt; [DCert] -&gt; [(a, Int)]
</span><a href="Byron.Spec.Ledger.Delegation.html#delegateCounter"><span class="hs-identifier hs-var">delegateCounter</span></a></span><span> </span><span class="annot"><span class="annottext">(VKeyGenesis, VKey) -&gt; VKey
forall a b. (a, b) -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span>
</span><span id="line-787"></span><span>
</span><span id="line-788"></span><span class="hs-comment">-- | Count the number of times each delegator changed their delegation</span><span>
</span><span id="line-789"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#delegatorCounts"><span class="hs-identifier hs-type">delegatorCounts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-790"></span><span id="delegatorCounts"><span class="annot"><span class="annottext">delegatorCounts :: [DCert] -&gt; [(VKeyGenesis, Int)]
</span><a href="Byron.Spec.Ledger.Delegation.html#delegatorCounts"><span class="hs-identifier hs-var hs-var">delegatorCounts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((VKeyGenesis, VKey) -&gt; VKeyGenesis)
-&gt; [DCert] -&gt; [(VKeyGenesis, Int)]
forall a.
Ord a =&gt;
((VKeyGenesis, VKey) -&gt; a) -&gt; [DCert] -&gt; [(a, Int)]
</span><a href="Byron.Spec.Ledger.Delegation.html#delegateCounter"><span class="hs-identifier hs-var">delegateCounter</span></a></span><span> </span><span class="annot"><span class="annottext">(VKeyGenesis, VKey) -&gt; VKeyGenesis
forall a b. (a, b) -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fst</span></a></span><span>
</span><span id="line-791"></span><span>
</span><span id="line-792"></span><span class="hs-comment">-- | Ratio of certificate groups that are empty</span><span>
</span><span id="line-793"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#emptyDelegationPayloadRatio"><span class="hs-identifier hs-type">emptyDelegationPayloadRatio</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Double</span></a></span><span>
</span><span id="line-794"></span><span id="emptyDelegationPayloadRatio"><span class="annot"><span class="annottext">emptyDelegationPayloadRatio :: [[DCert]] -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#emptyDelegationPayloadRatio"><span class="hs-identifier hs-var hs-var">emptyDelegationPayloadRatio</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-795"></span><span>  </span><span class="annot"><span class="annottext">([[DCert]] -&gt; [[DCert]]) -&gt; [[DCert]] -&gt; Double
forall a b. ([a] -&gt; [b]) -&gt; [a] -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#lenRatio"><span class="hs-identifier hs-var">lenRatio</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([DCert] -&gt; Bool) -&gt; [[DCert]] -&gt; [[DCert]]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">[DCert] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">null</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-796"></span><span>
</span><span id="line-797"></span><span class="hs-comment">-- | Ratio of certificates that delegate to _this_ epoch, where</span><span>
</span><span id="line-798"></span><span class="hs-comment">--   each certificate is represented by (current epoch,cert epoch)</span><span>
</span><span id="line-799"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#thisEpochDelegationsRatio"><span class="hs-identifier hs-type">thisEpochDelegationsRatio</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Double</span></a></span><span>
</span><span id="line-800"></span><span id="thisEpochDelegationsRatio"><span class="annot"><span class="annottext">thisEpochDelegationsRatio :: [(Epoch, Epoch)] -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#thisEpochDelegationsRatio"><span class="hs-identifier hs-var hs-var">thisEpochDelegationsRatio</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-801"></span><span>  </span><span class="annot"><span class="annottext">([(Epoch, Epoch)] -&gt; [(Epoch, Epoch)])
-&gt; [(Epoch, Epoch)] -&gt; Double
forall a b. ([a] -&gt; [b]) -&gt; [a] -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#lenRatio"><span class="hs-identifier hs-var">lenRatio</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Epoch, Epoch) -&gt; Bool) -&gt; [(Epoch, Epoch)] -&gt; [(Epoch, Epoch)]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">(Epoch, Epoch) -&gt; Bool
</span><a href="#local-6989586621679584687"><span class="hs-identifier hs-var">thisEpoch</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-802"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-803"></span><span>    </span><span id="local-6989586621679584687"><span class="annot"><span class="annottext">thisEpoch :: (Epoch, Epoch) -&gt; Bool
</span><a href="#local-6989586621679584687"><span class="hs-identifier hs-var hs-var">thisEpoch</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Epoch -&gt; Epoch -&gt; Bool) -&gt; (Epoch, Epoch) -&gt; Bool
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">uncurry</span></a></span><span> </span><span class="annot"><span class="annottext">Epoch -&gt; Epoch -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">(==)</span></a></span><span>
</span><span id="line-804"></span><span>
</span><span id="line-805"></span><span class="hs-comment">-- | Ratio of certificates that delegate to the _next_ epoch, where</span><span>
</span><span id="line-806"></span><span class="hs-comment">--   each certificate is represented by (current epoch,cert epoch)</span><span>
</span><span id="line-807"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#nextEpochDelegationsRatio"><span class="hs-identifier hs-type">nextEpochDelegationsRatio</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Double</span></a></span><span>
</span><span id="line-808"></span><span id="nextEpochDelegationsRatio"><span class="annot"><span class="annottext">nextEpochDelegationsRatio :: [(Epoch, Epoch)] -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#nextEpochDelegationsRatio"><span class="hs-identifier hs-var hs-var">nextEpochDelegationsRatio</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-809"></span><span>  </span><span class="annot"><span class="annottext">([(Epoch, Epoch)] -&gt; [(Epoch, Epoch)])
-&gt; [(Epoch, Epoch)] -&gt; Double
forall a b. ([a] -&gt; [b]) -&gt; [a] -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#lenRatio"><span class="hs-identifier hs-var">lenRatio</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Epoch, Epoch) -&gt; Bool) -&gt; [(Epoch, Epoch)] -&gt; [(Epoch, Epoch)]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">(Epoch, Epoch) -&gt; Bool
forall a. (Eq a, Num a) =&gt; (a, a) -&gt; Bool
</span><a href="#local-6989586621679584685"><span class="hs-identifier hs-var">nextEpoch</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-810"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-811"></span><span>    </span><span id="local-6989586621679584685"><span class="annot"><span class="annottext">nextEpoch :: (a, a) -&gt; Bool
</span><a href="#local-6989586621679584685"><span class="hs-identifier hs-var hs-var">nextEpoch</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679584684"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679584684"><span class="hs-identifier hs-var">e0</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679584683"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679584683"><span class="hs-identifier hs-var">e1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679584684"><span class="hs-identifier hs-var">e0</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679584683"><span class="hs-identifier hs-var">e1</span></a></span><span>
</span><span id="line-812"></span><span>
</span><span id="line-813"></span><span class="hs-comment">-- | Ratio of certificates that &quot;delegate to self&quot;, that is,</span><span>
</span><span id="line-814"></span><span class="hs-comment">-- where the delegator and delegate are the same</span><span>
</span><span id="line-815"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#selfDelegationsRatio"><span class="hs-identifier hs-type">selfDelegationsRatio</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Double</span></a></span><span>
</span><span id="line-816"></span><span id="selfDelegationsRatio"><span class="annot"><span class="annottext">selfDelegationsRatio :: [DCert] -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#selfDelegationsRatio"><span class="hs-identifier hs-var hs-var">selfDelegationsRatio</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-817"></span><span>  </span><span class="annot"><span class="annottext">([DCert] -&gt; [(VKeyGenesis, VKey)]) -&gt; [DCert] -&gt; Double
forall a b. ([a] -&gt; [b]) -&gt; [a] -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#lenRatio"><span class="hs-identifier hs-var">lenRatio</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((VKeyGenesis, VKey) -&gt; Bool)
-&gt; [(VKeyGenesis, VKey)] -&gt; [(VKeyGenesis, VKey)]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">(VKeyGenesis, VKey) -&gt; Bool
forall a a. (HasOwner a, HasOwner a) =&gt; (a, a) -&gt; Bool
</span><a href="#local-6989586621679584682"><span class="hs-identifier hs-var">selfDeleg</span></a></span><span> </span><span class="annot"><span class="annottext">([(VKeyGenesis, VKey)] -&gt; [(VKeyGenesis, VKey)])
-&gt; ([DCert] -&gt; [(VKeyGenesis, VKey)])
-&gt; [DCert]
-&gt; [(VKeyGenesis, VKey)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(DCert -&gt; (VKeyGenesis, VKey)) -&gt; [DCert] -&gt; [(VKeyGenesis, VKey)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; (VKeyGenesis, VKey)
</span><a href="Byron.Spec.Ledger.Delegation.html#delegatorDelegate"><span class="hs-identifier hs-var">delegatorDelegate</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-818"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-819"></span><span>    </span><span id="local-6989586621679584682"><span class="annot"><span class="annottext">selfDeleg :: (a, a) -&gt; Bool
</span><a href="#local-6989586621679584682"><span class="hs-identifier hs-var hs-var">selfDeleg</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679584681"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679584681"><span class="hs-identifier hs-var">vks</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679584680"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679584680"><span class="hs-identifier hs-var">vk</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Owner
forall a. HasOwner a =&gt; a -&gt; Owner
</span><a href="Byron.Spec.Ledger.Core.html#owner"><span class="hs-identifier hs-var">owner</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679584681"><span class="hs-identifier hs-var">vks</span></a></span><span> </span><span class="annot"><span class="annottext">Owner -&gt; Owner -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Owner
forall a. HasOwner a =&gt; a -&gt; Owner
</span><a href="Byron.Spec.Ledger.Core.html#owner"><span class="hs-identifier hs-var">owner</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679584680"><span class="hs-identifier hs-var">vk</span></a></span><span>
</span><span id="line-820"></span><span>
</span><span id="line-821"></span><span class="hs-comment">-- | Ratio of delegates that have multiple delegators</span><span>
</span><span id="line-822"></span><span class="hs-comment">-- that are delegating to them</span><span>
</span><span id="line-823"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#multipleDelegationsRatio"><span class="hs-identifier hs-type">multipleDelegationsRatio</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Double</span></a></span><span>
</span><span id="line-824"></span><span id="multipleDelegationsRatio"><span class="annot"><span class="annottext">multipleDelegationsRatio :: [DCert] -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#multipleDelegationsRatio"><span class="hs-identifier hs-var hs-var">multipleDelegationsRatio</span></a></span></span><span> </span><span id="local-6989586621679584679"><span class="annot"><span class="annottext">[DCert]
</span><a href="#local-6989586621679584679"><span class="hs-identifier hs-var">dcerts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-825"></span><span>  </span><span class="annot"><span class="annottext">([(VKey, Int)] -&gt; [(VKey, Int)]) -&gt; [(VKey, Int)] -&gt; Double
forall a b. ([a] -&gt; [b]) -&gt; [a] -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#lenRatio"><span class="hs-identifier hs-var">lenRatio</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((VKey, Int) -&gt; Bool) -&gt; [(VKey, Int)] -&gt; [(VKey, Int)]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">(VKey, Int) -&gt; Bool
forall a. (a, Int) -&gt; Bool
</span><a href="Byron.Spec.Ledger.Delegation.html#multiple"><span class="hs-identifier hs-var">multiple</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[DCert] -&gt; [(VKey, Int)]
</span><a href="Byron.Spec.Ledger.Delegation.html#delegateCounts"><span class="hs-identifier hs-var">delegateCounts</span></a></span><span> </span><span class="annot"><span class="annottext">[DCert]
</span><a href="#local-6989586621679584679"><span class="hs-identifier hs-var">dcerts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-826"></span><span>
</span><span id="line-827"></span><span class="hs-comment">-- | The maximum number of delegators to any particular delegate</span><span>
</span><span id="line-828"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#maxDelegationsTo"><span class="hs-identifier hs-type">maxDelegationsTo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-829"></span><span id="maxDelegationsTo"><span class="annot"><span class="annottext">maxDelegationsTo :: [DCert] -&gt; Int
</span><a href="Byron.Spec.Ledger.Delegation.html#maxDelegationsTo"><span class="hs-identifier hs-var hs-var">maxDelegationsTo</span></a></span></span><span> </span><span id="local-6989586621679584678"><span class="annot"><span class="annottext">[DCert]
</span><a href="#local-6989586621679584678"><span class="hs-identifier hs-var">dcerts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-830"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">((VKey, Int) -&gt; Bool) -&gt; [(VKey, Int)] -&gt; [(VKey, Int)]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">(VKey, Int) -&gt; Bool
forall a. (a, Int) -&gt; Bool
</span><a href="Byron.Spec.Ledger.Delegation.html#multiple"><span class="hs-identifier hs-var">multiple</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[DCert] -&gt; [(VKey, Int)]
</span><a href="Byron.Spec.Ledger.Delegation.html#delegateCounts"><span class="hs-identifier hs-var">delegateCounts</span></a></span><span> </span><span class="annot"><span class="annottext">[DCert]
</span><a href="#local-6989586621679584678"><span class="hs-identifier hs-var">dcerts</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-831"></span><span>    </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-832"></span><span>    </span><span id="local-6989586621679584677"><span class="annot"><span class="annottext">[(VKey, Int)]
</span><a href="#local-6989586621679584677"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; Int
forall (t :: * -&gt; *) a. (Foldable t, Ord a) =&gt; t a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">List.maximum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(VKey, Int) -&gt; Int
forall a b. (a, b) -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">((VKey, Int) -&gt; Int) -&gt; [(VKey, Int)] -&gt; [Int]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[(VKey, Int)]
</span><a href="#local-6989586621679584677"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-833"></span><span>
</span><span id="line-834"></span><span class="hs-comment">-- | Ratio of delegators that have changed their delegations</span><span>
</span><span id="line-835"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#changedDelegationsRatio"><span class="hs-identifier hs-type">changedDelegationsRatio</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Double</span></a></span><span>
</span><span id="line-836"></span><span id="changedDelegationsRatio"><span class="annot"><span class="annottext">changedDelegationsRatio :: [DCert] -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#changedDelegationsRatio"><span class="hs-identifier hs-var hs-var">changedDelegationsRatio</span></a></span></span><span> </span><span id="local-6989586621679584675"><span class="annot"><span class="annottext">[DCert]
</span><a href="#local-6989586621679584675"><span class="hs-identifier hs-var">dcerts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-837"></span><span>  </span><span class="annot"><span class="annottext">([(VKeyGenesis, Int)] -&gt; [(VKeyGenesis, Int)])
-&gt; [(VKeyGenesis, Int)] -&gt; Double
forall a b. ([a] -&gt; [b]) -&gt; [a] -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#lenRatio"><span class="hs-identifier hs-var">lenRatio</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((VKeyGenesis, Int) -&gt; Bool)
-&gt; [(VKeyGenesis, Int)] -&gt; [(VKeyGenesis, Int)]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">(VKeyGenesis, Int) -&gt; Bool
forall a. (a, Int) -&gt; Bool
</span><a href="Byron.Spec.Ledger.Delegation.html#multiple"><span class="hs-identifier hs-var">multiple</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[DCert] -&gt; [(VKeyGenesis, Int)]
</span><a href="Byron.Spec.Ledger.Delegation.html#delegatorCounts"><span class="hs-identifier hs-var">delegatorCounts</span></a></span><span> </span><span class="annot"><span class="annottext">[DCert]
</span><a href="#local-6989586621679584675"><span class="hs-identifier hs-var">dcerts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-838"></span><span>
</span><span id="line-839"></span><span class="hs-comment">-- | The maximum number of change-of-delegate for any particular delegator</span><span>
</span><span id="line-840"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#maxChangedDelegations"><span class="hs-identifier hs-type">maxChangedDelegations</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-841"></span><span id="maxChangedDelegations"><span class="annot"><span class="annottext">maxChangedDelegations :: [DCert] -&gt; Int
</span><a href="Byron.Spec.Ledger.Delegation.html#maxChangedDelegations"><span class="hs-identifier hs-var hs-var">maxChangedDelegations</span></a></span></span><span> </span><span id="local-6989586621679584674"><span class="annot"><span class="annottext">[DCert]
</span><a href="#local-6989586621679584674"><span class="hs-identifier hs-var">dcerts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-842"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">((VKey, Int) -&gt; Bool) -&gt; [(VKey, Int)] -&gt; [(VKey, Int)]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">(VKey, Int) -&gt; Bool
forall a. (a, Int) -&gt; Bool
</span><a href="Byron.Spec.Ledger.Delegation.html#multiple"><span class="hs-identifier hs-var">multiple</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[DCert] -&gt; [(VKey, Int)]
</span><a href="Byron.Spec.Ledger.Delegation.html#delegateCounts"><span class="hs-identifier hs-var">delegateCounts</span></a></span><span> </span><span class="annot"><span class="annottext">[DCert]
</span><a href="#local-6989586621679584674"><span class="hs-identifier hs-var">dcerts</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-843"></span><span>    </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-844"></span><span>    </span><span id="local-6989586621679584673"><span class="annot"><span class="annottext">[(VKey, Int)]
</span><a href="#local-6989586621679584673"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; Int
forall (t :: * -&gt; *) a. (Foldable t, Ord a) =&gt; t a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">List.maximum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(VKey, Int) -&gt; Int
forall a b. (a, b) -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">((VKey, Int) -&gt; Int) -&gt; [(VKey, Int)] -&gt; [Int]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[(VKey, Int)]
</span><a href="#local-6989586621679584673"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-845"></span><span>
</span><span id="line-846"></span><span class="hs-comment">-- | Ratio of repeated delegations to all delegations</span><span>
</span><span id="line-847"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#repeatedDelegationsRatio"><span class="hs-identifier hs-type">repeatedDelegationsRatio</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Double</span></a></span><span>
</span><span id="line-848"></span><span id="repeatedDelegationsRatio"><span class="annot"><span class="annottext">repeatedDelegationsRatio :: [DCert] -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#repeatedDelegationsRatio"><span class="hs-identifier hs-var hs-var">repeatedDelegationsRatio</span></a></span></span><span> </span><span id="local-6989586621679584672"><span class="annot"><span class="annottext">[DCert]
</span><a href="#local-6989586621679584672"><span class="hs-identifier hs-var">dcerts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-849"></span><span>  </span><span class="annot"><span class="annottext">(DCert -&gt; (VKeyGenesis, VKey)) -&gt; [DCert] -&gt; [(VKeyGenesis, VKey)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; (VKeyGenesis, VKey)
</span><a href="Byron.Spec.Ledger.Delegation.html#delegatorDelegate"><span class="hs-identifier hs-var">delegatorDelegate</span></a></span><span> </span><span class="annot"><span class="annottext">[DCert]
</span><a href="#local-6989586621679584672"><span class="hs-identifier hs-var">dcerts</span></a></span><span>
</span><span id="line-850"></span><span>    </span><span class="annot"><span class="annottext">[(VKeyGenesis, VKey)]
-&gt; ([(VKeyGenesis, VKey)] -&gt; [((VKeyGenesis, VKey), Int)])
-&gt; [((VKeyGenesis, VKey), Int)]
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">[(VKeyGenesis, VKey)] -&gt; [((VKeyGenesis, VKey), Int)]
forall a. Ord a =&gt; [a] -&gt; [(a, Int)]
</span><a href="../../../../Unique/html/src"><span class="hs-identifier hs-var">count</span></a></span><span>
</span><span id="line-851"></span><span>    </span><span class="annot"><span class="annottext">[((VKeyGenesis, VKey), Int)]
-&gt; ([((VKeyGenesis, VKey), Int)] -&gt; Double) -&gt; Double
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">([((VKeyGenesis, VKey), Int)] -&gt; [((VKeyGenesis, VKey), Int)])
-&gt; [((VKeyGenesis, VKey), Int)] -&gt; Double
forall a b. ([a] -&gt; [b]) -&gt; [a] -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#lenRatio"><span class="hs-identifier hs-var">lenRatio</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(((VKeyGenesis, VKey), Int) -&gt; Bool)
-&gt; [((VKeyGenesis, VKey), Int)] -&gt; [((VKeyGenesis, VKey), Int)]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">((VKeyGenesis, VKey), Int) -&gt; Bool
forall a. (a, Int) -&gt; Bool
</span><a href="Byron.Spec.Ledger.Delegation.html#multiple"><span class="hs-identifier hs-var">multiple</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-852"></span><span>
</span><span id="line-853"></span><span class="hs-comment">-- | The maximum number of repeated delegations in the given certificates</span><span>
</span><span id="line-854"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#maxRepeatedDelegations"><span class="hs-identifier hs-type">maxRepeatedDelegations</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-855"></span><span id="maxRepeatedDelegations"><span class="annot"><span class="annottext">maxRepeatedDelegations :: [DCert] -&gt; Int
</span><a href="Byron.Spec.Ledger.Delegation.html#maxRepeatedDelegations"><span class="hs-identifier hs-var hs-var">maxRepeatedDelegations</span></a></span></span><span> </span><span id="local-6989586621679584671"><span class="annot"><span class="annottext">[DCert]
</span><a href="#local-6989586621679584671"><span class="hs-identifier hs-var">dcerts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-856"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">(((VKeyGenesis, VKey), Int) -&gt; Bool)
-&gt; [((VKeyGenesis, VKey), Int)] -&gt; [((VKeyGenesis, VKey), Int)]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">((VKeyGenesis, VKey), Int) -&gt; Bool
forall a. (a, Int) -&gt; Bool
</span><a href="Byron.Spec.Ledger.Delegation.html#multiple"><span class="hs-identifier hs-var">multiple</span></a></span><span> </span><span class="annot"><span class="annottext">[((VKeyGenesis, VKey), Int)]
</span><a href="#local-6989586621679584670"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-857"></span><span>    </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-858"></span><span>    </span><span id="local-6989586621679584669"><span class="annot"><span class="annottext">[((VKeyGenesis, VKey), Int)]
</span><a href="#local-6989586621679584669"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; Int
forall (t :: * -&gt; *) a. (Foldable t, Ord a) =&gt; t a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">List.maximum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((VKeyGenesis, VKey), Int) -&gt; Int
forall a b. (a, b) -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">(((VKeyGenesis, VKey), Int) -&gt; Int)
-&gt; [((VKeyGenesis, VKey), Int)] -&gt; [Int]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[((VKeyGenesis, VKey), Int)]
</span><a href="#local-6989586621679584669"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-859"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-860"></span><span>    </span><span id="local-6989586621679584670"><span class="annot"><span class="annottext">ds :: [((VKeyGenesis, VKey), Int)]
</span><a href="#local-6989586621679584670"><span class="hs-identifier hs-var hs-var">ds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(VKeyGenesis, VKey)] -&gt; [((VKeyGenesis, VKey), Int)]
forall a. Ord a =&gt; [a] -&gt; [(a, Int)]
</span><a href="../../../../Unique/html/src"><span class="hs-identifier hs-var">count</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(DCert -&gt; (VKeyGenesis, VKey)) -&gt; [DCert] -&gt; [(VKeyGenesis, VKey)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; (VKeyGenesis, VKey)
</span><a href="Byron.Spec.Ledger.Delegation.html#delegatorDelegate"><span class="hs-identifier hs-var">delegatorDelegate</span></a></span><span> </span><span class="annot"><span class="annottext">[DCert]
</span><a href="#local-6989586621679584671"><span class="hs-identifier hs-var">dcerts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-861"></span><span>
</span><span id="line-862"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#maxCertsPerBlock"><span class="hs-identifier hs-type">maxCertsPerBlock</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-863"></span><span id="maxCertsPerBlock"><span class="annot"><span class="annottext">maxCertsPerBlock :: [[DCert]] -&gt; Int
</span><a href="Byron.Spec.Ledger.Delegation.html#maxCertsPerBlock"><span class="hs-identifier hs-var hs-var">maxCertsPerBlock</span></a></span></span><span> </span><span id="local-6989586621679584668"><span class="annot"><span class="annottext">[[DCert]]
</span><a href="#local-6989586621679584668"><span class="hs-identifier hs-var">groupedCerts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-864"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[[DCert]]
</span><a href="#local-6989586621679584668"><span class="hs-identifier hs-var">groupedCerts</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-865"></span><span>    </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-866"></span><span>    </span><span class="annot"><span class="annottext">[[DCert]]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; Int
forall (t :: * -&gt; *) a. (Foldable t, Ord a) =&gt; t a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">List.maximum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[DCert] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">([DCert] -&gt; Int) -&gt; [[DCert]] -&gt; [Int]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[[DCert]]
</span><a href="#local-6989586621679584668"><span class="hs-identifier hs-var">groupedCerts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-867"></span><span>
</span><span id="line-868"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-869"></span><span class="hs-comment">-- Goblins instances</span><span>
</span><span id="line-870"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-871"></span><span>
</span><span id="line-872"></span><span id="local-6989586621679584661"><span id="local-6989586621679584663"><span id="local-6989586621679584667"><span class="hs-identifier">deriveGoblin</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">DCert</span></span></span></span><span>
</span><span id="line-873"></span><span>
</span><span id="line-874"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-875"></span><span class="hs-comment">-- AddShrinks instances</span><span>
</span><span id="line-876"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-877"></span><span>
</span><span id="line-878"></span><span id="local-6989586621679584656"><span class="hs-identifier">deriveAddShrinks</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">DCert</span></span><span>
</span><span id="line-879"></span><span>
</span><span id="line-880"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-881"></span><span class="hs-comment">-- SeedGoblin instances</span><span>
</span><span id="line-882"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-883"></span><span>
</span><span id="line-884"></span><span id="local-6989586621679584652"><span class="hs-identifier">deriveSeedGoblin</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">DSEnv</span></span><span>
</span><span id="line-885"></span><span id="local-6989586621679584648"><span class="hs-identifier">deriveSeedGoblin</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">DIState</span></span><span>
</span><span id="line-886"></span><span>
</span><span id="line-887"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-888"></span><span class="hs-comment">-- GoblinData &amp; goblin-tinkered SignalGenerators</span><span>
</span><span id="line-889"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-890"></span><span>
</span><span id="line-891"></span><span id="goblinGen_DELEG_SDelegSFailure_SDelegFailure_IsNotGenesisKey"><span id="goblinData_DELEG_SDelegSFailure_SDelegFailure_IsNotGenesisKey"><span id="goblinGen_DELEG_SDelegSFailure_SDelegFailure_IsAlreadyScheduled"><span id="goblinData_DELEG_SDelegSFailure_SDelegFailure_IsAlreadyScheduled"><span id="goblinGen_DELEG_SDelegSFailure_SDelegFailure_EpochPastNextEpoch"><span id="goblinData_DELEG_SDelegSFailure_SDelegFailure_EpochPastNextEpoch"><span id="goblinGen_DELEG_SDelegSFailure_SDelegFailure_EpochInThePast"><span id="goblinData_DELEG_SDelegSFailure_SDelegFailure_EpochInThePast"><span id="goblinGensDELEG"><span class="hs-identifier">mkGoblinGens</span><span>
</span><span id="line-892"></span><span>  </span><span class="hs-string">&quot;DELEG&quot;</span><span>
</span><span id="line-893"></span><span>  </span><span class="hs-special">[</span><span> </span><span class="hs-string">&quot;SDelegSFailure_SDelegFailure_EpochInThePast&quot;</span><span class="hs-special">,</span><span>
</span><span id="line-894"></span><span>    </span><span class="hs-string">&quot;SDelegSFailure_SDelegFailure_EpochPastNextEpoch&quot;</span><span class="hs-special">,</span><span>
</span><span id="line-895"></span><span>    </span><span class="hs-string">&quot;SDelegSFailure_SDelegFailure_IsAlreadyScheduled&quot;</span><span class="hs-special">,</span><span>
</span><span id="line-896"></span><span>    </span><span class="hs-string">&quot;SDelegSFailure_SDelegFailure_IsNotGenesisKey&quot;</span><span>
</span><span id="line-897"></span><span>  </span><span class="hs-special">]</span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-898"></span><span>
</span><span id="line-899"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#tamperedDcerts"><span class="hs-identifier hs-type">tamperedDcerts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DIEnv"><span class="hs-identifier hs-type">DIEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DIState"><span class="hs-identifier hs-type">DIState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../hedgehog/html/src"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-900"></span><span id="tamperedDcerts"><span class="annot"><span class="annottext">tamperedDcerts :: DSEnv -&gt; DIState -&gt; Gen [DCert]
</span><a href="Byron.Spec.Ledger.Delegation.html#tamperedDcerts"><span class="hs-identifier hs-var hs-var">tamperedDcerts</span></a></span></span><span> </span><span id="local-6989586621679584639"><span class="annot"><span class="annottext">DSEnv
</span><a href="#local-6989586621679584639"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621679584638"><span class="annot"><span class="annottext">DIState
</span><a href="#local-6989586621679584638"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-901"></span><span>  </span><span class="annot"><span class="annottext">[Gen [DCert]] -&gt; Gen [DCert]
forall (m :: * -&gt; *) a. MonadGen m =&gt; [m a] -&gt; m a
</span><a href="../../../../hedgehog/html/src"><span class="hs-identifier hs-var">Gen.choice</span></a></span><span>
</span><span id="line-902"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Range Int -&gt; GenT Identity DCert -&gt; Gen [DCert]
forall (m :: * -&gt; *) a. MonadGen m =&gt; Range Int -&gt; m a -&gt; m [a]
</span><a href="../../../../hedgehog/html/src"><span class="hs-identifier hs-var">Gen.list</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Range Int
forall a. a -&gt; a -&gt; Range a
</span><a href="../../../../hedgehog/html/src"><span class="hs-identifier hs-var">Range.constant</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment DELEG -&gt; GenT Identity DCert
</span><a href="Byron.Spec.Ledger.Delegation.html#randomDCertGen"><span class="hs-identifier hs-var">randomDCertGen</span></a></span><span> </span><span class="annot"><span class="annottext">Environment DELEG
DSEnv
</span><a href="#local-6989586621679584639"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-903"></span><span>      </span><span class="hs-keyword">do</span><span>
</span><span id="line-904"></span><span>        </span><span id="local-6989586621679584635"><span class="annot"><span class="annottext">DSEnv -&gt; DIState -&gt; Gen [DCert]
</span><a href="#local-6989586621679584635"><span class="hs-identifier hs-var">sg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[DSEnv -&gt; DIState -&gt; Gen [DCert]]
-&gt; GenT Identity (DSEnv -&gt; DIState -&gt; Gen [DCert])
forall (m :: * -&gt; *) a. MonadGen m =&gt; [a] -&gt; m a
</span><a href="../../../../hedgehog/html/src"><span class="hs-identifier hs-var">Gen.element</span></a></span><span> </span><span class="annot"><span class="annottext">[SignalGenerator DELEG]
[DSEnv -&gt; DIState -&gt; Gen [DCert]]
</span><a href="Byron.Spec.Ledger.Delegation.html#goblinGensDELEG"><span class="hs-identifier hs-var">goblinGensDELEG</span></a></span><span>
</span><span id="line-905"></span><span>        </span><span class="annot"><span class="annottext">DSEnv -&gt; DIState -&gt; Gen [DCert]
</span><a href="#local-6989586621679584635"><span class="hs-identifier hs-var">sg</span></a></span><span> </span><span class="annot"><span class="annottext">DSEnv
</span><a href="#local-6989586621679584639"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">DIState
</span><a href="#local-6989586621679584638"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-906"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-907"></span></pre></body></html>