<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Control.Monad.Freer.Internal</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">freer-simple-1.2.1.2: A friendly effect system for Haskell.</span><ul class="links" id="page-menu"><li><a href="src/Control.Monad.Freer.Internal.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) 2016 Allele Dev; 2017 Ixperta Solutions s.r.o.; 2017 Alexis King</td></tr><tr><th>License</th><td>BSD3</td></tr><tr><th>Maintainer</th><td>Alexis King &lt;lexi.lambda@gmail.com&gt;</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>GHC specific language extensions.</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Control.Monad.Freer.Internal</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Effect Monad</a><ul><li><a href="#g:2">Open Union</a></li><li><a href="#g:3">Fast Type-aligned Queue</a></li><li><a href="#g:4">Sending Arbitrary Effect</a></li><li><a href="#g:5">Lifting Effect Stacks</a></li></ul></li><li><a href="#g:6">Handling Effects</a><ul><li><a href="#g:7">Building Effect Handlers</a><ul><li><a href="#g:8">Low-level Functions for Building Effect Handlers</a></li></ul></li><li><a href="#g:9">Nondeterminism Effect</a></li></ul></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Internal machinery for this effects library. This includes:</p><ul><li><code><a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a></code> data type, for expressing effects.</li><li><code><a href="Control-Monad-Freer-Internal.html#t:NonDet" title="Control.Monad.Freer.Internal">NonDet</a></code> data type, for nondeterministic effects.</li><li>Functions for facilitating the construction of effects and their handlers.</li></ul><p>Using <a href="http://okmij.org/ftp/Haskell/extensible/Eff1.hs">http://okmij.org/ftp/Haskell/extensible/Eff1.hs</a> as a starting point.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Eff">Eff</a> effs a<ul class="subs"><li>= <a href="#v:Val">Val</a> a</li><li>| <span class="keyword">forall</span> b. <a href="#v:E">E</a> (<a href="Data-OpenUnion.html#t:Union" title="Data.OpenUnion">Union</a> effs b) (<a href="Control-Monad-Freer-Internal.html#t:Arrs" title="Control.Monad.Freer.Internal">Arrs</a> effs b a)</li></ul></li><li class="src short"><span class="keyword">type</span> <a href="#t:Arr">Arr</a> effs a b = a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b</li><li class="src short"><span class="keyword">type</span> <a href="#t:Arrs">Arrs</a> effs a b = <a href="Data-FTCQueue.html#t:FTCQueue" title="Data.FTCQueue">FTCQueue</a> (<a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs) a b</li><li class="src short">module <a href="Data-OpenUnion.html">Data.OpenUnion</a></li><li class="src short">module <a href="Data-FTCQueue.html">Data.FTCQueue</a></li><li class="src short"><a href="#v:send">send</a> :: <a href="Data-OpenUnion.html#t:Member" title="Data.OpenUnion">Member</a> eff effs =&gt; eff a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs a</li><li class="src short"><a href="#v:sendM">sendM</a> :: (<a href="../../ghc/html/libraries/base-4.14.3.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="Data-OpenUnion.html#t:LastMember" title="Data.OpenUnion">LastMember</a> m effs) =&gt; m a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs a</li><li class="src short"><a href="#v:raise">raise</a> :: <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> (e ': effs) a</li><li class="src short"><a href="#v:run">run</a> :: <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> '[] a -&gt; a</li><li class="src short"><a href="#v:runM">runM</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> '[m] a -&gt; m a</li><li class="src short"><a href="#v:handleRelay">handleRelay</a> :: (a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b) -&gt; (<span class="keyword">forall</span> v. eff v -&gt; <a href="Control-Monad-Freer-Internal.html#t:Arr" title="Control.Monad.Freer.Internal">Arr</a> effs v b -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b) -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> (eff ': effs) a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b</li><li class="src short"><a href="#v:handleRelayS">handleRelayS</a> :: s -&gt; (s -&gt; a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b) -&gt; (<span class="keyword">forall</span> v. s -&gt; eff v -&gt; (s -&gt; <a href="Control-Monad-Freer-Internal.html#t:Arr" title="Control.Monad.Freer.Internal">Arr</a> effs v b) -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b) -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> (eff ': effs) a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b</li><li class="src short"><a href="#v:interpose">interpose</a> :: <a href="Data-OpenUnion.html#t:Member" title="Data.OpenUnion">Member</a> eff effs =&gt; (a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b) -&gt; (<span class="keyword">forall</span> v. eff v -&gt; <a href="Control-Monad-Freer-Internal.html#t:Arr" title="Control.Monad.Freer.Internal">Arr</a> effs v b -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b) -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b</li><li class="src short"><a href="#v:interposeS">interposeS</a> :: <a href="Data-OpenUnion.html#t:Member" title="Data.OpenUnion">Member</a> eff effs =&gt; s -&gt; (s -&gt; a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b) -&gt; (<span class="keyword">forall</span> v. s -&gt; eff v -&gt; (s -&gt; <a href="Control-Monad-Freer-Internal.html#t:Arr" title="Control.Monad.Freer.Internal">Arr</a> effs v b) -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b) -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b</li><li class="src short"><a href="#v:replaceRelay">replaceRelay</a> :: (a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> (v ': effs) w) -&gt; (<span class="keyword">forall</span> x. t x -&gt; <a href="Control-Monad-Freer-Internal.html#t:Arr" title="Control.Monad.Freer.Internal">Arr</a> (v ': effs) x w -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> (v ': effs) w) -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> (t ': effs) a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> (v ': effs) w</li><li class="src short"><a href="#v:replaceRelayS">replaceRelayS</a> :: s -&gt; (s -&gt; a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> (v ': effs) w) -&gt; (<span class="keyword">forall</span> x. s -&gt; t x -&gt; (s -&gt; <a href="Control-Monad-Freer-Internal.html#t:Arr" title="Control.Monad.Freer.Internal">Arr</a> (v ': effs) x w) -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> (v ': effs) w) -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> (t ': effs) a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> (v ': effs) w</li><li class="src short"><a href="#v:replaceRelayN">replaceRelayN</a> :: <span class="keyword">forall</span> gs t a effs w. <a href="Data-OpenUnion.html#t:Weakens" title="Data.OpenUnion">Weakens</a> gs =&gt; (a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> (gs <a href="Data-OpenUnion.html#t::-43--43-:" title="Data.OpenUnion">:++:</a> effs) w) -&gt; (<span class="keyword">forall</span> x. t x -&gt; <a href="Control-Monad-Freer-Internal.html#t:Arr" title="Control.Monad.Freer.Internal">Arr</a> (gs <a href="Data-OpenUnion.html#t::-43--43-:" title="Data.OpenUnion">:++:</a> effs) x w -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> (gs <a href="Data-OpenUnion.html#t::-43--43-:" title="Data.OpenUnion">:++:</a> effs) w) -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> (t ': effs) a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> (gs <a href="Data-OpenUnion.html#t::-43--43-:" title="Data.OpenUnion">:++:</a> effs) w</li><li class="src short"><a href="#v:qApp">qApp</a> :: <a href="Control-Monad-Freer-Internal.html#t:Arrs" title="Control.Monad.Freer.Internal">Arrs</a> effs b w -&gt; b -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs w</li><li class="src short"><a href="#v:qComp">qComp</a> :: <a href="Control-Monad-Freer-Internal.html#t:Arrs" title="Control.Monad.Freer.Internal">Arrs</a> effs a b -&gt; (<a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs' c) -&gt; <a href="Control-Monad-Freer-Internal.html#t:Arr" title="Control.Monad.Freer.Internal">Arr</a> effs' a c</li><li class="src short"><span class="keyword">data</span> <a href="#t:NonDet">NonDet</a> a <span class="keyword">where</span><ul class="subs"><li><a href="#v:MZero">MZero</a> :: <a href="Control-Monad-Freer-Internal.html#t:NonDet" title="Control.Monad.Freer.Internal">NonDet</a> a</li><li><a href="#v:MPlus">MPlus</a> :: <a href="Control-Monad-Freer-Internal.html#t:NonDet" title="Control.Monad.Freer.Internal">NonDet</a> <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li></ul></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Effect Monad</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Eff" class="def">Eff</a> effs a <a href="src/Control.Monad.Freer.Internal.html#Eff" class="link">Source</a> <a href="#t:Eff" class="selflink">#</a></p><div class="doc"><p>The <code><a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a></code> monad provides the implementation of a computation that performs
 an arbitrary set of algebraic effects. In <code><code><a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a></code> effs a</code>, <code>effs</code> is a
 type-level list that contains all the effects that the computation may
 perform. For example, a computation that produces an <code><a href="../../ghc/html/libraries/base-4.14.3.0/Prelude.html#t:Integer" title="Prelude">Integer</a></code> by consuming a
 <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a></code> from the global environment and acting upon a single mutable cell
 containing a <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></code> would have the following type:</p><pre><code><a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a></code> '[<code><a href="Control-Monad-Freer-Reader.html#v:Reader" title="Control.Monad.Freer.Reader">Reader</a></code> <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a></code>, <code><a href="Control-Monad-Freer-State.html#v:State" title="Control.Monad.Freer.State">State</a></code> <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></code>] <code><a href="../../ghc/html/libraries/base-4.14.3.0/Prelude.html#t:Integer" title="Prelude">Integer</a></code>
</pre><p>Normally, a concrete list of effects is not used to parameterize <code><a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a></code>.
 Instead, the <code><a href="Data-OpenUnion.html#t:Member" title="Data.OpenUnion">Member</a></code> or <code><a href="Data-OpenUnion.html#t:Members" title="Data.OpenUnion">Members</a></code> constraints are used to express
 constraints on the list of effects without coupling a computation to a
 concrete list of effects. For example, the above example would more commonly
 be expressed with the following type:</p><pre><code><a href="Data-OpenUnion.html#t:Members" title="Data.OpenUnion">Members</a></code> '[<code><a href="Control-Monad-Freer-Reader.html#v:Reader" title="Control.Monad.Freer.Reader">Reader</a></code> <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a></code>, <code><a href="Control-Monad-Freer-State.html#v:State" title="Control.Monad.Freer.State">State</a></code> <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></code>] effs =&gt; <code><a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a></code> effs <code><a href="../../ghc/html/libraries/base-4.14.3.0/Prelude.html#t:Integer" title="Prelude">Integer</a></code>
</pre><p>This abstraction allows the computation to be used in functions that may
 perform other effects, and it also allows the effects to be handled in any
 order.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Val" class="def">Val</a> a</td><td class="doc"><p>Pure value (<code><code><a href="../../ghc/html/libraries/base-4.14.3.0/Control-Monad.html#v:return" title="Control.Monad">return</a></code> = <code><a href="../../ghc/html/libraries/base-4.14.3.0/Control-Applicative.html#v:pure" title="Control.Applicative">pure</a></code> = <code><a href="Control-Monad-Freer-Internal.html#v:Val" title="Control.Monad.Freer.Internal">Val</a></code></code>).</p></td></tr><tr><td class="src"><span class="keyword">forall</span> b. <a id="v:E" class="def">E</a> (<a href="Data-OpenUnion.html#t:Union" title="Data.OpenUnion">Union</a> effs b) (<a href="Control-Monad-Freer-Internal.html#t:Arrs" title="Control.Monad.Freer.Internal">Arrs</a> effs b a)</td><td class="doc"><p>Sending a request of type <code>Union effs</code> with the continuation
 <code><code><a href="Control-Monad-Freer-Internal.html#t:Arrs" title="Control.Monad.Freer.Internal">Arrs</a></code> r b a</code>.</p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Eff">Instances</h4><details id="i:Eff" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Eff:MonadBase:1"></span> (<a href="../../transformers-base/html/Control-Monad-Base.html#t:MonadBase" title="Control.Monad.Base">MonadBase</a> b m, <a href="Data-OpenUnion.html#t:LastMember" title="Data.OpenUnion">LastMember</a> m effs) =&gt; <a href="../../transformers-base/html/Control-Monad-Base.html#t:MonadBase" title="Control.Monad.Base">MonadBase</a> b (<a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs)</span> <a href="src/Control.Monad.Freer.Internal.html#line-156" class="link">Source</a> <a href="#t:Eff" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Eff:MonadBase:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Freer-Internal.html">Control.Monad.Freer.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:liftBase">liftBase</a> :: b &#945; -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs &#945; <a href="../../transformers-base/html/src" class="link">Source</a> <a href="#v:liftBase" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Eff:Monad:2"></span> <a href="../../ghc/html/libraries/base-4.14.3.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> (<a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs)</span> <a href="src/Control.Monad.Freer.Internal.html#line-151" class="link">Source</a> <a href="#t:Eff" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Eff:Monad:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Freer-Internal.html">Control.Monad.Freer.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-62--62--61-">(&gt;&gt;=)</a> :: <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs a -&gt; (a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b) -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:-62--62--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62--62-">(&gt;&gt;)</a> :: <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:-62--62-" class="selflink">#</a></p><p class="src"><a href="#v:return">return</a> :: a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs a <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:return" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Eff:Functor:3"></span> <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> (<a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs)</span> <a href="src/Control.Monad.Freer.Internal.html#line-137" class="link">Source</a> <a href="#t:Eff" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Eff:Functor:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Freer-Internal.html">Control.Monad.Freer.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs a <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Eff:Applicative:4"></span> <a href="../../ghc/html/libraries/base-4.14.3.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> (<a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs)</span> <a href="src/Control.Monad.Freer.Internal.html#line-142" class="link">Source</a> <a href="#t:Eff" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Eff:Applicative:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Freer-Internal.html">Control.Monad.Freer.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs a <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:pure" class="selflink">#</a></p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs (a -&gt; b) -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:-60--42--62-" class="selflink">#</a></p><p class="src"><a href="#v:liftA2">liftA2</a> :: (a -&gt; b -&gt; c) -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs c <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:liftA2" class="selflink">#</a></p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:-42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs a <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:-60--42-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Eff:MonadIO:5"></span> (<a href="../../ghc/html/libraries/base-4.14.3.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="Data-OpenUnion.html#t:LastMember" title="Data.OpenUnion">LastMember</a> m effs) =&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> (<a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs)</span> <a href="src/Control.Monad.Freer.Internal.html#line-160" class="link">Source</a> <a href="#t:Eff" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Eff:MonadIO:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Freer-Internal.html">Control.Monad.Freer.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:liftIO">liftIO</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs a <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:liftIO" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Eff:Alternative:6"></span> <a href="Data-OpenUnion.html#t:Member" title="Data.OpenUnion">Member</a> <a href="Control-Monad-Freer-Internal.html#t:NonDet" title="Control.Monad.Freer.Internal">NonDet</a> effs =&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Control-Applicative.html#t:Alternative" title="Control.Applicative">Alternative</a> (<a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs)</span> <a href="src/Control.Monad.Freer.Internal.html#line-364" class="link">Source</a> <a href="#t:Eff" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Eff:Alternative:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Freer-Internal.html">Control.Monad.Freer.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:empty">empty</a> :: <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs a <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:empty" class="selflink">#</a></p><p class="src"><a href="#v:-60--124--62-">(&lt;|&gt;)</a> :: <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs a <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:-60--124--62-" class="selflink">#</a></p><p class="src"><a href="#v:some">some</a> :: <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs [a] <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:some" class="selflink">#</a></p><p class="src"><a href="#v:many">many</a> :: <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs [a] <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:many" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Eff:MonadPlus:7"></span> <a href="Data-OpenUnion.html#t:Member" title="Data.OpenUnion">Member</a> <a href="Control-Monad-Freer-Internal.html#t:NonDet" title="Control.Monad.Freer.Internal">NonDet</a> effs =&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Control-Monad.html#t:MonadPlus" title="Control.Monad">MonadPlus</a> (<a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs)</span> <a href="src/Control.Monad.Freer.Internal.html#line-368" class="link">Source</a> <a href="#t:Eff" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Eff:MonadPlus:7"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Freer-Internal.html">Control.Monad.Freer.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mzero">mzero</a> :: <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs a <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:mzero" class="selflink">#</a></p><p class="src"><a href="#v:mplus">mplus</a> :: <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs a <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:mplus" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Arr" class="def">Arr</a> effs a b = a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b <a href="src/Control.Monad.Freer.Internal.html#Arr" class="link">Source</a> <a href="#t:Arr" class="selflink">#</a></p><div class="doc"><p>Effectful arrow type: a function from <code>a :: *</code> to <code>b :: *</code> that also does
 effects denoted by <code>effs :: [* -&gt; *]</code>.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Arrs" class="def">Arrs</a> effs a b = <a href="Data-FTCQueue.html#t:FTCQueue" title="Data.FTCQueue">FTCQueue</a> (<a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs) a b <a href="src/Control.Monad.Freer.Internal.html#Arrs" class="link">Source</a> <a href="#t:Arrs" class="selflink">#</a></p><div class="doc"><p>An effectful function from <code>a :: *</code> to <code>b :: *</code> that is a composition of
 several effectful functions. The paremeter <code>effs :: [* -&gt; *]</code> describes the
 overall effect. The composition members are accumulated in a type-aligned
 queue.</p></div></div><a href="#g:2" id="g:2"><h2>Open Union</h2></a><div class="doc"><p>Open Union (type-indexed co-product) of effects.</p></div><div class="top"><p class="src">module <a href="Data-OpenUnion.html">Data.OpenUnion</a></p></div><a href="#g:3" id="g:3"><h2>Fast Type-aligned Queue</h2></a><div class="doc"><p>Fast type-aligned queue optimized to effectful functions of type
 <code>(a -&gt; m b)</code>.</p></div><div class="top"><p class="src">module <a href="Data-FTCQueue.html">Data.FTCQueue</a></p></div><a href="#g:4" id="g:4"><h2>Sending Arbitrary Effect</h2></a><div class="top"><p class="src"><a id="v:send" class="def">send</a> :: <a href="Data-OpenUnion.html#t:Member" title="Data.OpenUnion">Member</a> eff effs =&gt; eff a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs a <a href="src/Control.Monad.Freer.Internal.html#send" class="link">Source</a> <a href="#v:send" class="selflink">#</a></p><div class="doc"><p>&#8220;Sends&#8221; an effect, which should be a value defined as part of an effect
 algebra (see the module documentation for <a href="Control-Monad-Freer.html">Control.Monad.Freer</a>), to an
 effectful computation. This is used to connect the definition of an effect to
 the <code><a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a></code> monad so that it can be used and handled.</p></div></div><div class="top"><p class="src"><a id="v:sendM" class="def">sendM</a> :: (<a href="../../ghc/html/libraries/base-4.14.3.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="Data-OpenUnion.html#t:LastMember" title="Data.OpenUnion">LastMember</a> m effs) =&gt; m a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs a <a href="src/Control.Monad.Freer.Internal.html#sendM" class="link">Source</a> <a href="#v:sendM" class="selflink">#</a></p><div class="doc"><p>Identical to <code><a href="Control-Monad-Freer-Internal.html#v:send" title="Control.Monad.Freer.Internal">send</a></code>, but specialized to the final effect in <code>effs</code> to
 assist type inference. This is useful for running actions in a monad
 transformer stack used in conjunction with <code><a href="Control-Monad-Freer-Internal.html#v:runM" title="Control.Monad.Freer.Internal">runM</a></code>.</p></div></div><a href="#g:5" id="g:5"><h2>Lifting Effect Stacks</h2></a><div class="top"><p class="src"><a id="v:raise" class="def">raise</a> :: <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> (e ': effs) a <a href="src/Control.Monad.Freer.Internal.html#raise" class="link">Source</a> <a href="#v:raise" class="selflink">#</a></p><div class="doc"><p>Embeds a less-constrained <code><a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a></code> into a more-constrained one. Analogous to
 MTL's <code>lift</code>.</p></div></div><a href="#g:6" id="g:6"><h1>Handling Effects</h1></a><div class="top"><p class="src"><a id="v:run" class="def">run</a> :: <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> '[] a -&gt; a <a href="src/Control.Monad.Freer.Internal.html#run" class="link">Source</a> <a href="#v:run" class="selflink">#</a></p><div class="doc"><p>Runs a pure <code><a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a></code> computation, since an <code><a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a></code> computation that performs no
 effects (i.e. has no effects in its type-level list) is guaranteed to be
 pure. This is usually used as the final step of running an effectful
 computation, after all other effects have been discharged using effect
 handlers.</p><p>Typically, this function is composed as follows:</p><pre>someProgram
  <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-Function.html#v:-38-" title="Data.Function">&amp;</a></code> runEff1 eff1Arg
  <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-Function.html#v:-38-" title="Data.Function">&amp;</a></code> runEff2 eff2Arg1 eff2Arg2
  <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-Function.html#v:-38-" title="Data.Function">&amp;</a></code> <code><a href="Control-Monad-Freer-Internal.html#v:run" title="Control.Monad.Freer.Internal">run</a></code>
</pre></div></div><div class="top"><p class="src"><a id="v:runM" class="def">runM</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> '[m] a -&gt; m a <a href="src/Control.Monad.Freer.Internal.html#runM" class="link">Source</a> <a href="#v:runM" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Control-Monad-Freer-Internal.html#v:run" title="Control.Monad.Freer.Internal">run</a></code>, <code><a href="Control-Monad-Freer-Internal.html#v:runM" title="Control.Monad.Freer.Internal">runM</a></code> runs an <code><a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a></code> computation and extracts the result.
 <em>Unlike</em> <code><a href="Control-Monad-Freer-Internal.html#v:run" title="Control.Monad.Freer.Internal">run</a></code>, <code><a href="Control-Monad-Freer-Internal.html#v:runM" title="Control.Monad.Freer.Internal">runM</a></code> allows a single effect to remain within the type-level
 list, which must be a monad. The value returned is a computation in that
 monad, which is useful in conjunction with <code><a href="Control-Monad-Freer-Internal.html#v:sendM" title="Control.Monad.Freer.Internal">sendM</a></code> or <code><a href="../../transformers-base/html/Control-Monad-Base.html#v:liftBase" title="Control.Monad.Base">liftBase</a></code> for plugging
 in traditional transformer stacks.</p></div></div><a href="#g:7" id="g:7"><h2>Building Effect Handlers</h2></a><div class="top"><p class="src"><a id="v:handleRelay" class="def">handleRelay</a> <a href="src/Control.Monad.Freer.Internal.html#handleRelay" class="link">Source</a> <a href="#v:handleRelay" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b)</td><td class="doc"><p>Handle a pure value.</p></td></tr><tr><td class="src">-&gt; (<span class="keyword">forall</span> v. eff v -&gt; <a href="Control-Monad-Freer-Internal.html#t:Arr" title="Control.Monad.Freer.Internal">Arr</a> effs v b -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b)</td><td class="doc"><p>Handle a request for effect of type <code>eff :: * -&gt; *</code>.</p></td></tr><tr><td class="src">-&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> (eff ': effs) a</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b</td><td class="doc"><p>Result with effects of type <code>eff :: * -&gt; *</code> handled.</p></td></tr></table></div><div class="doc"><p>Given a request, either handle it or relay it.</p></div></div><div class="top"><p class="src"><a id="v:handleRelayS" class="def">handleRelayS</a> <a href="src/Control.Monad.Freer.Internal.html#handleRelayS" class="link">Source</a> <a href="#v:handleRelayS" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: s</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; (s -&gt; a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b)</td><td class="doc"><p>Handle a pure value.</p></td></tr><tr><td class="src">-&gt; (<span class="keyword">forall</span> v. s -&gt; eff v -&gt; (s -&gt; <a href="Control-Monad-Freer-Internal.html#t:Arr" title="Control.Monad.Freer.Internal">Arr</a> effs v b) -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b)</td><td class="doc"><p>Handle a request for effect of type <code>eff :: * -&gt; *</code>.</p></td></tr><tr><td class="src">-&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> (eff ': effs) a</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b</td><td class="doc"><p>Result with effects of type <code>eff :: * -&gt; *</code> handled.</p></td></tr></table></div><div class="doc"><p>Parameterized <code><a href="Control-Monad-Freer-Internal.html#v:handleRelay" title="Control.Monad.Freer.Internal">handleRelay</a></code>. Allows sending along some state of type
 <code>s :: *</code> to be handled for the target effect, or relayed to a handler that
 can- handle the target effect.</p></div></div><div class="top"><p class="src"><a id="v:interpose" class="def">interpose</a> :: <a href="Data-OpenUnion.html#t:Member" title="Data.OpenUnion">Member</a> eff effs =&gt; (a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b) -&gt; (<span class="keyword">forall</span> v. eff v -&gt; <a href="Control-Monad-Freer-Internal.html#t:Arr" title="Control.Monad.Freer.Internal">Arr</a> effs v b -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b) -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b <a href="src/Control.Monad.Freer.Internal.html#interpose" class="link">Source</a> <a href="#v:interpose" class="selflink">#</a></p><div class="doc"><p>Intercept the request and possibly reply to it, but leave it unhandled.</p></div></div><div class="top"><p class="src"><a id="v:interposeS" class="def">interposeS</a> :: <a href="Data-OpenUnion.html#t:Member" title="Data.OpenUnion">Member</a> eff effs =&gt; s -&gt; (s -&gt; a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b) -&gt; (<span class="keyword">forall</span> v. s -&gt; eff v -&gt; (s -&gt; <a href="Control-Monad-Freer-Internal.html#t:Arr" title="Control.Monad.Freer.Internal">Arr</a> effs v b) -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b) -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b <a href="src/Control.Monad.Freer.Internal.html#interposeS" class="link">Source</a> <a href="#v:interposeS" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Control-Monad-Freer-Internal.html#v:interpose" title="Control.Monad.Freer.Internal">interpose</a></code>, but with support for an explicit state to help implement
 the interpreter.</p></div></div><div class="top"><p class="src"><a id="v:replaceRelay" class="def">replaceRelay</a> :: (a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> (v ': effs) w) -&gt; (<span class="keyword">forall</span> x. t x -&gt; <a href="Control-Monad-Freer-Internal.html#t:Arr" title="Control.Monad.Freer.Internal">Arr</a> (v ': effs) x w -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> (v ': effs) w) -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> (t ': effs) a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> (v ': effs) w <a href="src/Control.Monad.Freer.Internal.html#replaceRelay" class="link">Source</a> <a href="#v:replaceRelay" class="selflink">#</a></p><div class="doc"><p>Interpret an effect by transforming it into another effect on top of the
 stack. The primary use case of this function is allow interpreters to be
 defined in terms of other ones without leaking intermediary implementation
 details through the type signature.</p></div></div><div class="top"><p class="src"><a id="v:replaceRelayS" class="def">replaceRelayS</a> :: s -&gt; (s -&gt; a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> (v ': effs) w) -&gt; (<span class="keyword">forall</span> x. s -&gt; t x -&gt; (s -&gt; <a href="Control-Monad-Freer-Internal.html#t:Arr" title="Control.Monad.Freer.Internal">Arr</a> (v ': effs) x w) -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> (v ': effs) w) -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> (t ': effs) a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> (v ': effs) w <a href="src/Control.Monad.Freer.Internal.html#replaceRelayS" class="link">Source</a> <a href="#v:replaceRelayS" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Control-Monad-Freer-Internal.html#v:replaceRelay" title="Control.Monad.Freer.Internal">replaceRelay</a></code>, but with support for an explicit state to help
 implement the interpreter.</p></div></div><div class="top"><p class="src"><a id="v:replaceRelayN" class="def">replaceRelayN</a> :: <span class="keyword">forall</span> gs t a effs w. <a href="Data-OpenUnion.html#t:Weakens" title="Data.OpenUnion">Weakens</a> gs =&gt; (a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> (gs <a href="Data-OpenUnion.html#t::-43--43-:" title="Data.OpenUnion">:++:</a> effs) w) -&gt; (<span class="keyword">forall</span> x. t x -&gt; <a href="Control-Monad-Freer-Internal.html#t:Arr" title="Control.Monad.Freer.Internal">Arr</a> (gs <a href="Data-OpenUnion.html#t::-43--43-:" title="Data.OpenUnion">:++:</a> effs) x w -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> (gs <a href="Data-OpenUnion.html#t::-43--43-:" title="Data.OpenUnion">:++:</a> effs) w) -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> (t ': effs) a -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> (gs <a href="Data-OpenUnion.html#t::-43--43-:" title="Data.OpenUnion">:++:</a> effs) w <a href="src/Control.Monad.Freer.Internal.html#replaceRelayN" class="link">Source</a> <a href="#v:replaceRelayN" class="selflink">#</a></p></div><a href="#g:8" id="g:8"><h3>Low-level Functions for Building Effect Handlers</h3></a><div class="top"><p class="src"><a id="v:qApp" class="def">qApp</a> :: <a href="Control-Monad-Freer-Internal.html#t:Arrs" title="Control.Monad.Freer.Internal">Arrs</a> effs b w -&gt; b -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs w <a href="src/Control.Monad.Freer.Internal.html#qApp" class="link">Source</a> <a href="#v:qApp" class="selflink">#</a></p><div class="doc"><p>Function application in the context of an array of effects,
 <code><code><a href="Control-Monad-Freer-Internal.html#t:Arrs" title="Control.Monad.Freer.Internal">Arrs</a></code> effs b w</code>.</p></div></div><div class="top"><p class="src"><a id="v:qComp" class="def">qComp</a> :: <a href="Control-Monad-Freer-Internal.html#t:Arrs" title="Control.Monad.Freer.Internal">Arrs</a> effs a b -&gt; (<a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs b -&gt; <a href="Control-Monad-Freer-Internal.html#t:Eff" title="Control.Monad.Freer.Internal">Eff</a> effs' c) -&gt; <a href="Control-Monad-Freer-Internal.html#t:Arr" title="Control.Monad.Freer.Internal">Arr</a> effs' a c <a href="src/Control.Monad.Freer.Internal.html#qComp" class="link">Source</a> <a href="#v:qComp" class="selflink">#</a></p><div class="doc"><p>Composition of effectful arrows (<code><a href="Control-Monad-Freer-Internal.html#t:Arrs" title="Control.Monad.Freer.Internal">Arrs</a></code>). Allows for the caller to change
 the effect environment, as well.</p></div></div><a href="#g:9" id="g:9"><h2>Nondeterminism Effect</h2></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:NonDet" class="def">NonDet</a> a <span class="keyword">where</span> <a href="src/Control.Monad.Freer.Internal.html#NonDet" class="link">Source</a> <a href="#t:NonDet" class="selflink">#</a></p><div class="doc"><p>A data type for representing nondeterminstic choice.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:MZero" class="def">MZero</a> :: <a href="Control-Monad-Freer-Internal.html#t:NonDet" title="Control.Monad.Freer.Internal">NonDet</a> a</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:MPlus" class="def">MPlus</a> :: <a href="Control-Monad-Freer-Internal.html#t:NonDet" title="Control.Monad.Freer.Internal">NonDet</a> <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.2</p></div></body></html>