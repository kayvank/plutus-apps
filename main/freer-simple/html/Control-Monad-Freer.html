<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Control.Monad.Freer</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">freer-simple-1.2.1.2: A friendly effect system for Haskell.</span><ul class="links" id="page-menu"><li><a href="src/Control.Monad.Freer.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) 2016 Allele Dev; 2017 Ixperta Solutions s.r.o.; 2017 Alexis King</td></tr><tr><th>License</th><td>BSD3</td></tr><tr><th>Maintainer</th><td>Alexis King &lt;lexi.lambda@gmail.com&gt;</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>GHC specific language extensions.</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Control.Monad.Freer</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Effect Monad</a><ul><li><a href="#g:2">Effect Constraints</a></li><li><a href="#g:3">Sending Arbitrary Effects</a></li><li><a href="#g:4">Lifting Effect Stacks</a></li></ul></li><li><a href="#g:5">Handling Effects</a><ul><li><a href="#g:6">Running the Eff monad</a></li><li><a href="#g:7">Building Effect Handlers</a><ul><li><a href="#g:8">Basic effect handlers</a></li><li><a href="#g:9">Derived effect handlers</a></li><li><a href="#g:10">Monadic effect handlers</a></li><li><a href="#g:11">Advanced effect handlers</a></li></ul></li></ul></li><li><a href="#g:12">Re-exported bindings</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This library is an implementation of an <em>extensible effect system</em> for Haskell,
a general-purpose way of tracking effects at the type level and handling them in
different ways. The concept of an &#8220;effect&#8221; is very general: it encompasses the
things most people consider side-effects, like generating random values,
interacting with the file system, and mutating state, but it also includes
things like access to an immutable global environment and exception handling.</p><p>Traditional Haskell tracks and composes effects using <em>monad transformers</em>,
which involves modeling each effects using what is conceptually a separate
monad. In contrast, <code>freer-simple</code> provides exactly <strong>one</strong> monad, <code><a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a></code>,
parameterized by a type-level list of effects. For example, a computation that
produces an <code><a href="../../ghc/html/libraries/base-4.14.3.0/Prelude.html#t:Integer" title="Prelude">Integer</a></code> by consuming a <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a></code> from the global environment and
acting upon a single mutable cell containing a <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></code> would have the following
type:</p><pre><code><a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a></code> '[<code><a href="Control-Monad-Freer-Reader.html#v:Reader" title="Control.Monad.Freer.Reader">Reader</a></code> <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a></code>, <code><a href="Control-Monad-Freer-State.html#v:State" title="Control.Monad.Freer.State">State</a></code> <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></code>] <code><a href="../../ghc/html/libraries/base-4.14.3.0/Prelude.html#t:Integer" title="Prelude">Integer</a></code>
</pre><p>For comparison, this is the equivalent stack of monad transformers:</p><pre>ReaderT <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a></code> (State <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></code>) <code><a href="../../ghc/html/libraries/base-4.14.3.0/Prelude.html#t:Integer" title="Prelude">Integer</a></code>
</pre><p>However, this is slightly misleading: the example with <code><a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a></code> is actually
<em>more general</em> than the corresponding example using transformers because the
implementations of effects are not <em>concrete</em>. While <code>StateT</code> specifies a
<em>specific</em> implementation of a pseudo-mutable cell,
<code><a href="Control-Monad-Freer-State.html#v:State" title="Control.Monad.Freer.State">State</a></code> is merely an interface with a set of available
operations. Using <code><a href="Control-Monad-Freer-State.html#v:runState" title="Control.Monad.Freer.State">runState</a></code> will &#8220;run&#8221; the
<code><a href="Control-Monad-Freer-State.html#v:State" title="Control.Monad.Freer.State">State</a></code> effect much the same way that <code>StateT</code> does,
but a hypothetical handler function <code>runStateTVar</code> could implement the state in
terms of a STM <code><a href="../../stm/html/Control-Concurrent-STM.html#v:TVar" title="Control.Concurrent.STM">TVar</a></code>.</p><p>The <code>freer-simple</code> effect library is divided into three parts:</p><ol><li>First, <code>freer-simple</code> provides the <code><a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a></code> monad, an implementation of
     extensible effects that allows effects to be tracked at the type level and
     interleaved at runtime.</li><li>Second, it provides a built-in library of common effects, such as
     <code><a href="Control-Monad-Freer-Reader.html#v:Reader" title="Control.Monad.Freer.Reader">Reader</a></code>, <code><a href="Control-Monad-Freer-Writer.html#v:Writer" title="Control.Monad.Freer.Writer">Writer</a></code>,
     <code><a href="Control-Monad-Freer-State.html#v:State" title="Control.Monad.Freer.State">State</a></code>, and <code><a href="Control-Monad-Freer-Error.html#v:Error" title="Control.Monad.Freer.Error">Error</a></code>.
     These effects can be used with <code><a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a></code> out of the box with an interface that
     is similar to the equivalent monad transformers.</li><li>Third, it provides a set of combinators for implementing your <em>own</em>
     effects, which can either be implemented entirely independently, in terms
     of other existing effects, or even in terms of existing monads, making it
     possible to use <code>freer-simple</code> with existing monad transformer stacks.</li></ol><p>One of the core ideas of <code>freer-simple</code> is that <em>most</em> effects that occur in
practical applications are really different incarnations of a small set of
fundamental effect types. Therefore, while it&#8217;s possible to write new effect
handlers entirely from scratch, it&#8217;s more common that you will wish to define
new effects in terms of other effects. <code>freer-simple</code> makes this possible by
providing the <code><a href="Control-Monad-Freer.html#v:reinterpret" title="Control.Monad.Freer">reinterpret</a></code> function, which allows <em>translating</em> an effect into
another one.</p><p>For example, imagine an effect that represents interactions with a file system:</p><pre>data FileSystem r where
  ReadFile :: <code><a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></code> -&gt; FileSystem <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a></code>
  WriteFile :: <code><a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></code> -&gt; <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a></code> -&gt; FileSystem ()
</pre><p>An implementation that uses the real file system would, of course, be
implemented in terms of <code><a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a></code>. An alternate implementation, however, might be
implemented in-memory in terms of <code><a href="Control-Monad-Freer-State.html#v:State" title="Control.Monad.Freer.State">State</a></code>. With
<code><a href="Control-Monad-Freer.html#v:reinterpret" title="Control.Monad.Freer">reinterpret</a></code>, this implementation is trivial:</p><pre>runInMemoryFileSystem :: [(<code><a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></code>, <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a></code>)] -&gt; <code><a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a></code> (FileSystem ': effs) <code><a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a></code> <code><a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a></code> effs
runInMemoryFileSystem initVfs = <code><a href="Control-Monad-Freer-State.html#v:evalState" title="Control.Monad.Freer.State">evalState</a></code> initVfs <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-Function.html#v:." title="Data.Function">.</a></code> fsToState where
  fsToState :: <code><a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a></code> (FileSystem ': effs) <code><a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a></code> <code><a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a></code> (<code><a href="Control-Monad-Freer-State.html#v:State" title="Control.Monad.Freer.State">State</a></code> [(<code><a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></code>, <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a></code>)] ': effs)
  fsToState = <code><a href="Control-Monad-Freer.html#v:reinterpret" title="Control.Monad.Freer">reinterpret</a></code> <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-Function.html#v:-36-" title="Data.Function">$</a></code> case
    ReadFile path -&gt; <code><a href="Control-Monad-Freer-State.html#v:get" title="Control.Monad.Freer.State">get</a></code> <code><a href="../../ghc/html/libraries/base-4.14.3.0/Control-Monad.html#v:-62--62--61-" title="Control.Monad">&gt;&gt;=</a></code> \vfs -&gt; case <code><a href="../../ghc/html/libraries/base-4.14.3.0/GHC-List.html#v:lookup" title="GHC.List">lookup</a></code> path vfs of
      <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-Maybe.html#v:Just" title="Data.Maybe">Just</a></code> contents -&gt; <code><a href="../../ghc/html/libraries/base-4.14.3.0/Control-Applicative.html#v:pure" title="Control.Applicative">pure</a></code> contents
      <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> -&gt; <code><a href="../../ghc/html/libraries/base-4.14.3.0/Prelude.html#v:error" title="Prelude">error</a></code> (&quot;readFile: no such file &quot; ++ path)
    WriteFile path contents -&gt; <code><a href="Control-Monad-Freer-State.html#v:modify" title="Control.Monad.Freer.State">modify</a></code> $ \vfs -&gt;
      (path, contents) : <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-List.html#v:deleteBy" title="Data.List">deleteBy</a></code> ((<code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-Eq.html#v:-61--61-" title="Data.Eq">==</a></code>) <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-Function.html#v:on" title="Data.Function">`on`</a></code> <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-Tuple.html#v:fst" title="Data.Tuple">fst</a></code>) (path, contents) vfs
</pre><p>This handler is easy to write, doesn&#8217;t require any knowledge of how
<code><a href="Control-Monad-Freer-State.html#v:State" title="Control.Monad.Freer.State">State</a></code> is implemented, is entirely encapsulated, and
is composable with all other effect handlers. This idea&#8212;making it easy to define
new effects in terms of existing ones&#8212;is the concept around which <code>freer-simple</code>
is based.</p><h1>Effect Algebras</h1><p>In <code>freer-simple</code>, effects are defined using <em>effect algebras</em>, which are
representations of an effect&#8217;s operations as a generalized algebraic datatype,
aka GADT. This might sound intimidating, but you really don&#8217;t need to know very
much at all about how GADTs work to use <code>freer-simple</code>; instead, you can just
learn the syntax entirely in terms of what it means for defining effects.</p><p>Consider the definition of the <code>FileSystem</code> effect from the above example:</p><pre>data FileSystem r where
  ReadFile :: <code><a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></code> -&gt; FileSystem <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a></code>
  WriteFile :: <code><a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></code> -&gt; <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a></code> -&gt; FileSystem ()
</pre><p>The first line, <code>data FileSystem r where</code>, defines a new effect. All effects
have at least one parameter, normally named <code>r</code>, which represents the <em>result</em>
or <em>return type</em> of the operation. For example, take a look at the type of
<code>ReadFile</code>:</p><pre>ReadFile :: <code><a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></code> -&gt; FileSystem <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a></code>
</pre><p>This is very similar to the type of <code><a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#v:readFile" title="System.IO">readFile</a></code> from the standard <a href="../../ghc/html/libraries/base-4.14.3.0/Prelude.html">Prelude</a>,
which has type <code><code><a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></code> -&gt; <code><a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a></code> <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a></code></code>. The only difference is that the
name of the effect, in this case <code>FileSystem</code>, replaces the use of the monad,
in this case <code><a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a></code>.</p><p>Also notice that <code>ReadFile</code> and <code>WriteFile</code> begin with capital letters. This is
because they are actually <em>data constructors</em>. This means that
<code>ReadFile &quot;foo.txt&quot;</code> actually constructs a <em>value</em> of type
<code>FileSystem <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a></code></code>, and this is useful, since it allows effect handlers like
<code>runInMemoryFileSystem</code> to pattern-match on the effect&#8217;s constructors and get
the values out.</p><p>To actually <em>use</em> our <code>FileSystem</code> effect, however, we have to write just a
little bit of glue to connect our effect definition to the <code><a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a></code> monad, which we
do using the <code><a href="Control-Monad-Freer.html#v:send" title="Control.Monad.Freer">send</a></code> function. We can write an ordinary function for each of the
<code>FileSystem</code> constructors that mechanically calls <code><a href="Control-Monad-Freer.html#v:send" title="Control.Monad.Freer">send</a></code>:</p><pre>readFile :: <code><a href="Control-Monad-Freer.html#t:Member" title="Control.Monad.Freer">Member</a></code> FileSystem effs =&gt; <code><a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></code> -&gt; <code><a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a></code> effs <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a></code>
readFile path = <code><a href="Control-Monad-Freer.html#v:send" title="Control.Monad.Freer">send</a></code> (ReadFile path)

writeFile :: <code><a href="Control-Monad-Freer.html#t:Member" title="Control.Monad.Freer">Member</a></code> FileSystem effs =&gt; <code><a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></code> -&gt; <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a></code> -&gt; <code><a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a></code> effs ()
writeFile path contents = <code><a href="Control-Monad-Freer.html#v:send" title="Control.Monad.Freer">send</a></code> (WriteFile path contents)
</pre><p>Notice the use of the <code><a href="Control-Monad-Freer.html#t:Member" title="Control.Monad.Freer">Member</a></code> constraint on these functions. This constraint
means that the <code>FileSystem</code> effect can be anywhere within the type-level list
represented by the <code>effs</code> variable. If the signature of <code><a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#v:readFile" title="System.IO">readFile</a></code> were more
concrete, like this:</p><pre>readFile :: <code><a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></code> -&gt; <code><a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a></code> '[FileSystem] <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a></code>
</pre><p>&#8230;then <code><a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#v:readFile" title="System.IO">readFile</a></code> would <em>only</em> be usable with an <code><a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a></code> computation that <em>only</em>
performed <code>FileSystem</code> effects, which isn&#8217;t especially useful.</p><p>Since writing these functions is entirely mechanical, they can be generated
automatically using Template Haskell; see <a href="Control-Monad-Freer-TH.html">Control.Monad.Freer.TH</a> for more
details.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Eff">Eff</a> effs a</li><li class="src short"><span class="keyword">class</span> <a href="Data-OpenUnion-Internal.html#t:FindElem" title="Data.OpenUnion.Internal">FindElem</a> eff effs =&gt; <a href="#t:Member">Member</a> (eff :: <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) effs</li><li class="src short"><span class="keyword">type family</span> <a href="#t:Members">Members</a> effs effs' :: <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">class</span> <a href="Control-Monad-Freer.html#t:Member" title="Control.Monad.Freer">Member</a> m effs =&gt; <a href="#t:LastMember">LastMember</a> m effs | effs -&gt; m</li><li class="src short"><a href="#v:send">send</a> :: <a href="Control-Monad-Freer.html#t:Member" title="Control.Monad.Freer">Member</a> eff effs =&gt; eff a -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs a</li><li class="src short"><a href="#v:sendM">sendM</a> :: (<a href="../../ghc/html/libraries/base-4.14.3.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="Control-Monad-Freer.html#t:LastMember" title="Control.Monad.Freer">LastMember</a> m effs) =&gt; m a -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs a</li><li class="src short"><a href="#v:raise">raise</a> :: <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs a -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (e ': effs) a</li><li class="src short"><a href="#v:run">run</a> :: <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> '[] a -&gt; a</li><li class="src short"><a href="#v:runM">runM</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> '[m] a -&gt; m a</li><li class="src short"><a href="#v:interpret">interpret</a> :: <span class="keyword">forall</span> eff effs. (eff <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs) -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (eff ': effs) <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs</li><li class="src short"><a href="#v:interpose">interpose</a> :: <span class="keyword">forall</span> eff effs. <a href="Control-Monad-Freer.html#t:Member" title="Control.Monad.Freer">Member</a> eff effs =&gt; (eff <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs) -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs</li><li class="src short"><a href="#v:subsume">subsume</a> :: <span class="keyword">forall</span> eff effs. <a href="Control-Monad-Freer.html#t:Member" title="Control.Monad.Freer">Member</a> eff effs =&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (eff ': effs) <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs</li><li class="src short"><a href="#v:reinterpret">reinterpret</a> :: <span class="keyword">forall</span> f g effs. (f <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (g ': effs)) -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (f ': effs) <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (g ': effs)</li><li class="src short"><a href="#v:reinterpret2">reinterpret2</a> :: <span class="keyword">forall</span> f g h effs. (f <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (g ': (h ': effs))) -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (f ': effs) <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (g ': (h ': effs))</li><li class="src short"><a href="#v:reinterpret3">reinterpret3</a> :: <span class="keyword">forall</span> f g h i effs. (f <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (g ': (h ': (i ': effs)))) -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (f ': effs) <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (g ': (h ': (i ': effs)))</li><li class="src short"><a href="#v:reinterpretN">reinterpretN</a> :: <span class="keyword">forall</span> gs f effs. <a href="Data-OpenUnion.html#t:Weakens" title="Data.OpenUnion">Weakens</a> gs =&gt; (f <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (gs <a href="Data-OpenUnion.html#t::-43--43-:" title="Data.OpenUnion">:++:</a> effs)) -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (f ': effs) <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (gs <a href="Data-OpenUnion.html#t::-43--43-:" title="Data.OpenUnion">:++:</a> effs)</li><li class="src short"><a href="#v:translate">translate</a> :: <span class="keyword">forall</span> f g effs. (f <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> g) -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (f ': effs) <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (g ': effs)</li><li class="src short"><a href="#v:interpretM">interpretM</a> :: <span class="keyword">forall</span> eff m effs. (<a href="../../ghc/html/libraries/base-4.14.3.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="Control-Monad-Freer.html#t:LastMember" title="Control.Monad.Freer">LastMember</a> m effs) =&gt; (eff <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> m) -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (eff ': effs) <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs</li><li class="src short"><a href="#v:interpretWith">interpretWith</a> :: <span class="keyword">forall</span> eff effs b. (<span class="keyword">forall</span> v. eff v -&gt; (v -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs b) -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs b) -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (eff ': effs) b -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs b</li><li class="src short"><a href="#v:interposeWith">interposeWith</a> :: <span class="keyword">forall</span> eff effs b. <a href="Control-Monad-Freer.html#t:Member" title="Control.Monad.Freer">Member</a> eff effs =&gt; (<span class="keyword">forall</span> v. eff v -&gt; (v -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs b) -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs b) -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs b -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs b</li><li class="src short"><span class="keyword">type</span> <a href="#t:-126--62-">(~&gt;)</a> (f :: k -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) (g :: k -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) = <span class="keyword">forall</span> (x :: k). f x -&gt; g x</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Effect Monad</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Eff" class="def">Eff</a> effs a <a href="src/Control.Monad.Freer.Internal.html#Eff" class="link">Source</a> <a href="#t:Eff" class="selflink">#</a></p><div class="doc"><p>The <code><a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a></code> monad provides the implementation of a computation that performs
 an arbitrary set of algebraic effects. In <code><code><a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a></code> effs a</code>, <code>effs</code> is a
 type-level list that contains all the effects that the computation may
 perform. For example, a computation that produces an <code><a href="../../ghc/html/libraries/base-4.14.3.0/Prelude.html#t:Integer" title="Prelude">Integer</a></code> by consuming a
 <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a></code> from the global environment and acting upon a single mutable cell
 containing a <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></code> would have the following type:</p><pre><code><a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a></code> '[<code><a href="Control-Monad-Freer-Reader.html#v:Reader" title="Control.Monad.Freer.Reader">Reader</a></code> <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a></code>, <code><a href="Control-Monad-Freer-State.html#v:State" title="Control.Monad.Freer.State">State</a></code> <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></code>] <code><a href="../../ghc/html/libraries/base-4.14.3.0/Prelude.html#t:Integer" title="Prelude">Integer</a></code>
</pre><p>Normally, a concrete list of effects is not used to parameterize <code><a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a></code>.
 Instead, the <code><a href="Control-Monad-Freer.html#t:Member" title="Control.Monad.Freer">Member</a></code> or <code><a href="Control-Monad-Freer.html#t:Members" title="Control.Monad.Freer">Members</a></code> constraints are used to express
 constraints on the list of effects without coupling a computation to a
 concrete list of effects. For example, the above example would more commonly
 be expressed with the following type:</p><pre><code><a href="Control-Monad-Freer.html#t:Members" title="Control.Monad.Freer">Members</a></code> '[<code><a href="Control-Monad-Freer-Reader.html#v:Reader" title="Control.Monad.Freer.Reader">Reader</a></code> <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a></code>, <code><a href="Control-Monad-Freer-State.html#v:State" title="Control.Monad.Freer.State">State</a></code> <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></code>] effs =&gt; <code><a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a></code> effs <code><a href="../../ghc/html/libraries/base-4.14.3.0/Prelude.html#t:Integer" title="Prelude">Integer</a></code>
</pre><p>This abstraction allows the computation to be used in functions that may
 perform other effects, and it also allows the effects to be handled in any
 order.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Eff">Instances</h4><details id="i:Eff" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Eff:MonadBase:1"></span> (<a href="../../transformers-base/html/Control-Monad-Base.html#t:MonadBase" title="Control.Monad.Base">MonadBase</a> b m, <a href="Control-Monad-Freer.html#t:LastMember" title="Control.Monad.Freer">LastMember</a> m effs) =&gt; <a href="../../transformers-base/html/Control-Monad-Base.html#t:MonadBase" title="Control.Monad.Base">MonadBase</a> b (<a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs)</span> <a href="src/Control.Monad.Freer.Internal.html#line-156" class="link">Source</a> <a href="#t:Eff" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Eff:MonadBase:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Freer-Internal.html">Control.Monad.Freer.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:liftBase">liftBase</a> :: b &#945; -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs &#945; <a href="../../transformers-base/html/src" class="link">Source</a> <a href="#v:liftBase" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Eff:Monad:2"></span> <a href="../../ghc/html/libraries/base-4.14.3.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> (<a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs)</span> <a href="src/Control.Monad.Freer.Internal.html#line-151" class="link">Source</a> <a href="#t:Eff" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Eff:Monad:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Freer-Internal.html">Control.Monad.Freer.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-62--62--61-">(&gt;&gt;=)</a> :: <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs a -&gt; (a -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs b) -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs b <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:-62--62--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62--62-">(&gt;&gt;)</a> :: <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs a -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs b -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs b <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:-62--62-" class="selflink">#</a></p><p class="src"><a href="#v:return">return</a> :: a -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs a <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:return" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Eff:Functor:3"></span> <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> (<a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs)</span> <a href="src/Control.Monad.Freer.Internal.html#line-137" class="link">Source</a> <a href="#t:Eff" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Eff:Functor:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Freer-Internal.html">Control.Monad.Freer.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs a -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs b <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs b -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs a <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Eff:Applicative:4"></span> <a href="../../ghc/html/libraries/base-4.14.3.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> (<a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs)</span> <a href="src/Control.Monad.Freer.Internal.html#line-142" class="link">Source</a> <a href="#t:Eff" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Eff:Applicative:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Freer-Internal.html">Control.Monad.Freer.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs a <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:pure" class="selflink">#</a></p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs (a -&gt; b) -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs a -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs b <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:-60--42--62-" class="selflink">#</a></p><p class="src"><a href="#v:liftA2">liftA2</a> :: (a -&gt; b -&gt; c) -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs a -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs b -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs c <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:liftA2" class="selflink">#</a></p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs a -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs b -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs b <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:-42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs a -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs b -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs a <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:-60--42-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Eff:MonadIO:5"></span> (<a href="../../ghc/html/libraries/base-4.14.3.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="Control-Monad-Freer.html#t:LastMember" title="Control.Monad.Freer">LastMember</a> m effs) =&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> (<a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs)</span> <a href="src/Control.Monad.Freer.Internal.html#line-160" class="link">Source</a> <a href="#t:Eff" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Eff:MonadIO:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Freer-Internal.html">Control.Monad.Freer.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:liftIO">liftIO</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a> a -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs a <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:liftIO" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Eff:Alternative:6"></span> <a href="Control-Monad-Freer.html#t:Member" title="Control.Monad.Freer">Member</a> <a href="Control-Monad-Freer-NonDet.html#t:NonDet" title="Control.Monad.Freer.NonDet">NonDet</a> effs =&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Control-Applicative.html#t:Alternative" title="Control.Applicative">Alternative</a> (<a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs)</span> <a href="src/Control.Monad.Freer.Internal.html#line-364" class="link">Source</a> <a href="#t:Eff" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Eff:Alternative:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Freer-Internal.html">Control.Monad.Freer.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:empty">empty</a> :: <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs a <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:empty" class="selflink">#</a></p><p class="src"><a href="#v:-60--124--62-">(&lt;|&gt;)</a> :: <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs a -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs a -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs a <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:-60--124--62-" class="selflink">#</a></p><p class="src"><a href="#v:some">some</a> :: <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs a -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs [a] <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:some" class="selflink">#</a></p><p class="src"><a href="#v:many">many</a> :: <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs a -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs [a] <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:many" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Eff:MonadPlus:7"></span> <a href="Control-Monad-Freer.html#t:Member" title="Control.Monad.Freer">Member</a> <a href="Control-Monad-Freer-NonDet.html#t:NonDet" title="Control.Monad.Freer.NonDet">NonDet</a> effs =&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Control-Monad.html#t:MonadPlus" title="Control.Monad">MonadPlus</a> (<a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs)</span> <a href="src/Control.Monad.Freer.Internal.html#line-368" class="link">Source</a> <a href="#t:Eff" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Eff:MonadPlus:7"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Monad-Freer-Internal.html">Control.Monad.Freer.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mzero">mzero</a> :: <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs a <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:mzero" class="selflink">#</a></p><p class="src"><a href="#v:mplus">mplus</a> :: <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs a -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs a -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs a <a href="../../ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:mplus" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:2" id="g:2"><h2>Effect Constraints</h2></a><div class="doc"><p>As mentioned in the documentation for <code><a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a></code>, it&#8217;s rare to actually
 specify a concrete list of effects for an <code><a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a></code> computation, since that
 has two significant downsides:</p><ol><li>It couples the computation to that <em>specific</em> list of effects, so it
      cannot be used in functions that perform a strict superset of
      effects.</li><li>It forces the effects to be handled in a particular order, which
      can make handler code brittle when the list of effects is changed.</li></ol><p>Fortunately, these restrictions are easily avoided by using
 <em>effect constraints</em>, such as <code><a href="Control-Monad-Freer.html#t:Member" title="Control.Monad.Freer">Member</a></code> or <code><a href="Control-Monad-Freer.html#t:Members" title="Control.Monad.Freer">Members</a></code>, which decouple a
 computation from a particular concrete list of effects.</p></div><div class="top"><p class="src"><span class="keyword">class</span> <a href="Data-OpenUnion-Internal.html#t:FindElem" title="Data.OpenUnion.Internal">FindElem</a> eff effs =&gt; <a id="t:Member" class="def">Member</a> (eff :: <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) effs <a href="src/Data.OpenUnion.Internal.html#Member" class="link">Source</a> <a href="#t:Member" class="selflink">#</a></p><div class="doc"><p>A constraint that requires that a particular effect, <code>eff</code>, is a member of
 the type-level list <code>effs</code>. This is used to parameterize an
 <code><a href="Control-Monad-Freer.html#v:Eff" title="Control.Monad.Freer">Eff</a></code> computation over an arbitrary list of effects, so
 long as <code>eff</code> is <em>somewhere</em> in the list.</p><p>For example, a computation that only needs access to a cell of mutable state
 containing an <code><a href="../../ghc/html/libraries/base-4.14.3.0/Prelude.html#t:Integer" title="Prelude">Integer</a></code> would likely use the following type:</p><pre><code><a href="Control-Monad-Freer.html#t:Member" title="Control.Monad.Freer">Member</a></code> (<code><a href="Control-Monad-Freer-State.html#v:State" title="Control.Monad.Freer.State">State</a></code> <code><a href="../../ghc/html/libraries/base-4.14.3.0/Prelude.html#t:Integer" title="Prelude">Integer</a></code>) effs =&gt; <code><a href="Control-Monad-Freer.html#v:Eff" title="Control.Monad.Freer">Eff</a></code> effs ()
</pre></div><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src"><a href="Data-OpenUnion.html#v:inj" title="Data.OpenUnion">inj</a>, <a href="Data-OpenUnion.html#v:prj" title="Data.OpenUnion">prj</a></p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Member">Instances</h4><details id="i:Member" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Member:Member:1"></span> (<a href="Data-OpenUnion-Internal.html#t:FindElem" title="Data.OpenUnion.Internal">FindElem</a> t r, <a href="Data-OpenUnion-Internal.html#t:IfNotFound" title="Data.OpenUnion.Internal">IfNotFound</a> t r r) =&gt; <a href="Control-Monad-Freer.html#t:Member" title="Control.Monad.Freer">Member</a> t r</span> <a href="src/Data.OpenUnion.Internal.html#line-160" class="link">Source</a> <a href="#t:Member" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Member:Member:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Data-OpenUnion-Internal.html">Data.OpenUnion.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:inj">inj</a> :: t a -&gt; <a href="Data-OpenUnion.html#t:Union" title="Data.OpenUnion">Union</a> r a <a href="src/Data.OpenUnion.Internal.html#inj" class="link">Source</a> <a href="#v:inj" class="selflink">#</a></p><p class="src"><a href="#v:prj">prj</a> :: <a href="Data-OpenUnion.html#t:Union" title="Data.OpenUnion">Union</a> r a -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (t a) <a href="src/Data.OpenUnion.Internal.html#prj" class="link">Source</a> <a href="#v:prj" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:Members" class="def">Members</a> effs effs' :: <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> <span class="keyword">where ...</span> <a href="src/Data.OpenUnion.html#Members" class="link">Source</a> <a href="#t:Members" class="selflink">#</a></p><div class="doc"><p>A shorthand constraint that represents a combination of multiple <code><a href="Control-Monad-Freer.html#t:Member" title="Control.Monad.Freer">Member</a></code>
 constraints. That is, the following <code><a href="Control-Monad-Freer.html#t:Members" title="Control.Monad.Freer">Members</a></code> constraint:</p><pre><code><a href="Control-Monad-Freer.html#t:Members" title="Control.Monad.Freer">Members</a></code> '[Foo, Bar, Baz] effs
</pre><p>&#8230;is equivalent to the following set of <code><a href="Control-Monad-Freer.html#t:Member" title="Control.Monad.Freer">Member</a></code> constraints:</p><pre>(<code><a href="Control-Monad-Freer.html#t:Member" title="Control.Monad.Freer">Member</a></code> Foo effs, <code><a href="Control-Monad-Freer.html#t:Member" title="Control.Monad.Freer">Member</a></code> Bar effs, <code><a href="Control-Monad-Freer.html#t:Member" title="Control.Monad.Freer">Member</a></code> baz effs)
</pre><p>Note that, since each effect is translated into a separate <code><a href="Control-Monad-Freer.html#t:Member" title="Control.Monad.Freer">Member</a></code>
 constraint, the order of the effects does <em>not</em> matter.</p></div><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Control-Monad-Freer.html#t:Members" title="Control.Monad.Freer">Members</a> (eff ': effs) effs' = (<a href="Control-Monad-Freer.html#t:Member" title="Control.Monad.Freer">Member</a> eff effs', <a href="Control-Monad-Freer.html#t:Members" title="Control.Monad.Freer">Members</a> effs effs')</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Control-Monad-Freer.html#t:Members" title="Control.Monad.Freer">Members</a> '[] effs' = ()</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a href="Control-Monad-Freer.html#t:Member" title="Control.Monad.Freer">Member</a> m effs =&gt; <a id="t:LastMember" class="def">LastMember</a> m effs | effs -&gt; m <a href="src/Data.OpenUnion.html#LastMember" class="link">Source</a> <a href="#t:LastMember" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Control-Monad-Freer.html#t:Member" title="Control.Monad.Freer">Member</a></code>, <code><code><a href="Control-Monad-Freer.html#t:LastMember" title="Control.Monad.Freer">LastMember</a></code> eff effs</code> is a constraint that requires that
 <code>eff</code> is in the type-level list <code>effs</code>. However, <em>unlike</em> <code><a href="Control-Monad-Freer.html#t:Member" title="Control.Monad.Freer">Member</a></code>,
 <code><a href="Control-Monad-Freer.html#t:LastMember" title="Control.Monad.Freer">LastMember</a></code> requires <code>m</code> be the <strong>final</strong> effect in <code>effs</code>.</p><p>Generally, this is not especially useful, since it is preferable for
 computations to be agnostic to the order of effects, but it is quite useful
 in combination with <code><a href="Control-Monad-Freer.html#v:sendM" title="Control.Monad.Freer">sendM</a></code> or
 <code><a href="../../transformers-base/html/Control-Monad-Base.html#v:liftBase" title="Control.Monad.Base">liftBase</a></code> to embed ordinary monadic effects within an
 <code><a href="Control-Monad-Freer.html#v:Eff" title="Control.Monad.Freer">Eff</a></code> computation.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:LastMember">Instances</h4><details id="i:LastMember" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:LastMember:LastMember:1"></span> <a href="Control-Monad-Freer.html#t:LastMember" title="Control.Monad.Freer">LastMember</a> m '[m]</span> <a href="src/Data.OpenUnion.html#line-75" class="link">Source</a> <a href="#t:LastMember" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:LastMember:LastMember:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Data-OpenUnion.html">Data.OpenUnion</a></p></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:LastMember:LastMember:2"></span> <a href="Control-Monad-Freer.html#t:LastMember" title="Control.Monad.Freer">LastMember</a> m effs =&gt; <a href="Control-Monad-Freer.html#t:LastMember" title="Control.Monad.Freer">LastMember</a> m (eff ': effs)</span> <a href="src/Data.OpenUnion.html#line-74" class="link">Source</a> <a href="#t:LastMember" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:LastMember:LastMember:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Data-OpenUnion.html">Data.OpenUnion</a></p></details></td></tr></table></details></div></div><a href="#g:3" id="g:3"><h2>Sending Arbitrary Effects</h2></a><div class="top"><p class="src"><a id="v:send" class="def">send</a> :: <a href="Control-Monad-Freer.html#t:Member" title="Control.Monad.Freer">Member</a> eff effs =&gt; eff a -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs a <a href="src/Control.Monad.Freer.Internal.html#send" class="link">Source</a> <a href="#v:send" class="selflink">#</a></p><div class="doc"><p>&#8220;Sends&#8221; an effect, which should be a value defined as part of an effect
 algebra (see the module documentation for <a href="Control-Monad-Freer.html">Control.Monad.Freer</a>), to an
 effectful computation. This is used to connect the definition of an effect to
 the <code><a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a></code> monad so that it can be used and handled.</p></div></div><div class="top"><p class="src"><a id="v:sendM" class="def">sendM</a> :: (<a href="../../ghc/html/libraries/base-4.14.3.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="Control-Monad-Freer.html#t:LastMember" title="Control.Monad.Freer">LastMember</a> m effs) =&gt; m a -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs a <a href="src/Control.Monad.Freer.Internal.html#sendM" class="link">Source</a> <a href="#v:sendM" class="selflink">#</a></p><div class="doc"><p>Identical to <code><a href="Control-Monad-Freer.html#v:send" title="Control.Monad.Freer">send</a></code>, but specialized to the final effect in <code>effs</code> to
 assist type inference. This is useful for running actions in a monad
 transformer stack used in conjunction with <code><a href="Control-Monad-Freer.html#v:runM" title="Control.Monad.Freer">runM</a></code>.</p></div></div><a href="#g:4" id="g:4"><h2>Lifting Effect Stacks</h2></a><div class="top"><p class="src"><a id="v:raise" class="def">raise</a> :: <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs a -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (e ': effs) a <a href="src/Control.Monad.Freer.Internal.html#raise" class="link">Source</a> <a href="#v:raise" class="selflink">#</a></p><div class="doc"><p>Embeds a less-constrained <code><a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a></code> into a more-constrained one. Analogous to
 MTL's <code>lift</code>.</p></div></div><a href="#g:5" id="g:5"><h1>Handling Effects</h1></a><div class="doc"><p>Once an effectful computation has been produced, it needs to somehow be
 executed. This is where <em>effect handlers</em> come in. Each effect can have
 an arbitrary number of different effect handlers, which can be used to
 interpret the same effects in different ways. For example, it is often
 useful to have two effect handlers: one that uses <code><a href="Control-Monad-Freer.html#v:sendM" title="Control.Monad.Freer">sendM</a></code> and
 <code><a href="Control-Monad-Freer.html#v:interpretM" title="Control.Monad.Freer">interpretM</a></code> to interpret the effect in <code><a href="../../ghc/html/libraries/base-4.14.3.0/System-IO.html#t:IO" title="System.IO">IO</a></code>, and another that uses
 <code><a href="Control-Monad-Freer.html#v:interpret" title="Control.Monad.Freer">interpret</a></code>, <code><a href="Control-Monad-Freer.html#v:reinterpret" title="Control.Monad.Freer">reinterpret</a></code>, or <code><a href="Control-Monad-Freer.html#v:translate" title="Control.Monad.Freer">translate</a></code> to interpret the effect in an
 entirely pure way for the purposes of testing.</p><p>This module doesn&#8217;t provide any effects or effect handlers (those are in
 their own modules, like <a href="Control-Monad-Freer-Reader.html">Control.Monad.Freer.Reader</a> and
 <a href="Control-Monad-Freer-Error.html">Control.Monad.Freer.Error</a>), but it <em>does</em> provide a set of combinators
 for constructing new effect handlers. It also provides the <code><a href="Control-Monad-Freer.html#v:run" title="Control.Monad.Freer">run</a></code> and
 <code><a href="Control-Monad-Freer.html#v:runM" title="Control.Monad.Freer">runM</a></code> functions for extracting the actual result of an effectful
 computation once all effects have been handled.</p></div><a href="#g:6" id="g:6"><h2>Running the Eff monad</h2></a><div class="top"><p class="src"><a id="v:run" class="def">run</a> :: <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> '[] a -&gt; a <a href="src/Control.Monad.Freer.Internal.html#run" class="link">Source</a> <a href="#v:run" class="selflink">#</a></p><div class="doc"><p>Runs a pure <code><a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a></code> computation, since an <code><a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a></code> computation that performs no
 effects (i.e. has no effects in its type-level list) is guaranteed to be
 pure. This is usually used as the final step of running an effectful
 computation, after all other effects have been discharged using effect
 handlers.</p><p>Typically, this function is composed as follows:</p><pre>someProgram
  <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-Function.html#v:-38-" title="Data.Function">&amp;</a></code> runEff1 eff1Arg
  <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-Function.html#v:-38-" title="Data.Function">&amp;</a></code> runEff2 eff2Arg1 eff2Arg2
  <code><a href="../../ghc/html/libraries/base-4.14.3.0/Data-Function.html#v:-38-" title="Data.Function">&amp;</a></code> <code><a href="Control-Monad-Freer.html#v:run" title="Control.Monad.Freer">run</a></code>
</pre></div></div><div class="top"><p class="src"><a id="v:runM" class="def">runM</a> :: <a href="../../ghc/html/libraries/base-4.14.3.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> '[m] a -&gt; m a <a href="src/Control.Monad.Freer.Internal.html#runM" class="link">Source</a> <a href="#v:runM" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Control-Monad-Freer.html#v:run" title="Control.Monad.Freer">run</a></code>, <code><a href="Control-Monad-Freer.html#v:runM" title="Control.Monad.Freer">runM</a></code> runs an <code><a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a></code> computation and extracts the result.
 <em>Unlike</em> <code><a href="Control-Monad-Freer.html#v:run" title="Control.Monad.Freer">run</a></code>, <code><a href="Control-Monad-Freer.html#v:runM" title="Control.Monad.Freer">runM</a></code> allows a single effect to remain within the type-level
 list, which must be a monad. The value returned is a computation in that
 monad, which is useful in conjunction with <code><a href="Control-Monad-Freer.html#v:sendM" title="Control.Monad.Freer">sendM</a></code> or <code><a href="../../transformers-base/html/Control-Monad-Base.html#v:liftBase" title="Control.Monad.Base">liftBase</a></code> for plugging
 in traditional transformer stacks.</p></div></div><a href="#g:7" id="g:7"><h2>Building Effect Handlers</h2></a><a href="#g:8" id="g:8"><h3>Basic effect handlers</h3></a><div class="top"><p class="src"><a id="v:interpret" class="def">interpret</a> :: <span class="keyword">forall</span> eff effs. (eff <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs) -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (eff ': effs) <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs <a href="src/Control.Monad.Freer.html#interpret" class="link">Source</a> <a href="#v:interpret" class="selflink">#</a></p><div class="doc"><p>The simplest way to produce an effect handler. Given a natural
 transformation from some effect <code>eff</code> to some effectful computation with
 effects <code>effs</code>, produces a natural transformation from <code><code><a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a></code> (eff ': effs)</code>
 to <code><code><a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a></code> effs</code>.</p></div></div><div class="top"><p class="src"><a id="v:interpose" class="def">interpose</a> :: <span class="keyword">forall</span> eff effs. <a href="Control-Monad-Freer.html#t:Member" title="Control.Monad.Freer">Member</a> eff effs =&gt; (eff <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs) -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs <a href="src/Control.Monad.Freer.html#interpose" class="link">Source</a> <a href="#v:interpose" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Control-Monad-Freer.html#v:interpret" title="Control.Monad.Freer">interpret</a></code>, but instead of handling the effect, allows responding to
 the effect while leaving it unhandled.</p></div></div><div class="top"><p class="src"><a id="v:subsume" class="def">subsume</a> :: <span class="keyword">forall</span> eff effs. <a href="Control-Monad-Freer.html#t:Member" title="Control.Monad.Freer">Member</a> eff effs =&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (eff ': effs) <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs <a href="src/Control.Monad.Freer.html#subsume" class="link">Source</a> <a href="#v:subsume" class="selflink">#</a></p><div class="doc"><p>Interprets an effect in terms of another identical effect. This can be used
 to eliminate duplicate effects.</p></div></div><a href="#g:9" id="g:9"><h3>Derived effect handlers</h3></a><div class="top"><p class="src"><a id="v:reinterpret" class="def">reinterpret</a> :: <span class="keyword">forall</span> f g effs. (f <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (g ': effs)) -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (f ': effs) <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (g ': effs) <a href="src/Control.Monad.Freer.html#reinterpret" class="link">Source</a> <a href="#v:reinterpret" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Control-Monad-Freer.html#v:interpret" title="Control.Monad.Freer">interpret</a></code>, but instead of removing the interpreted effect <code>f</code>,
 reencodes it in some new effect <code>g</code>.</p></div></div><div class="top"><p class="src"><a id="v:reinterpret2" class="def">reinterpret2</a> :: <span class="keyword">forall</span> f g h effs. (f <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (g ': (h ': effs))) -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (f ': effs) <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (g ': (h ': effs)) <a href="src/Control.Monad.Freer.html#reinterpret2" class="link">Source</a> <a href="#v:reinterpret2" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Control-Monad-Freer.html#v:reinterpret" title="Control.Monad.Freer">reinterpret</a></code>, but encodes the <code>f</code> effect in <em>two</em> new effects instead
 of just one.</p></div></div><div class="top"><p class="src"><a id="v:reinterpret3" class="def">reinterpret3</a> :: <span class="keyword">forall</span> f g h i effs. (f <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (g ': (h ': (i ': effs)))) -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (f ': effs) <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (g ': (h ': (i ': effs))) <a href="src/Control.Monad.Freer.html#reinterpret3" class="link">Source</a> <a href="#v:reinterpret3" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Control-Monad-Freer.html#v:reinterpret" title="Control.Monad.Freer">reinterpret</a></code>, but encodes the <code>f</code> effect in <em>three</em> new effects
 instead of just one.</p></div></div><div class="top"><p class="src"><a id="v:reinterpretN" class="def">reinterpretN</a> :: <span class="keyword">forall</span> gs f effs. <a href="Data-OpenUnion.html#t:Weakens" title="Data.OpenUnion">Weakens</a> gs =&gt; (f <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (gs <a href="Data-OpenUnion.html#t::-43--43-:" title="Data.OpenUnion">:++:</a> effs)) -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (f ': effs) <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (gs <a href="Data-OpenUnion.html#t::-43--43-:" title="Data.OpenUnion">:++:</a> effs) <a href="src/Control.Monad.Freer.html#reinterpretN" class="link">Source</a> <a href="#v:reinterpretN" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Control-Monad-Freer.html#v:interpret" title="Control.Monad.Freer">interpret</a></code>, <code><a href="Control-Monad-Freer.html#v:reinterpret" title="Control.Monad.Freer">reinterpret</a></code>, <code><a href="Control-Monad-Freer.html#v:reinterpret2" title="Control.Monad.Freer">reinterpret2</a></code>, and <code><a href="Control-Monad-Freer.html#v:reinterpret3" title="Control.Monad.Freer">reinterpret3</a></code>, but
 allows the result to have any number of additional effects instead of simply
 0-3. The problem is that this completely breaks type inference, so you will
 have to explicitly pick <code>gs</code> using <code>TypeApplications</code>. Prefer <code><a href="Control-Monad-Freer.html#v:interpret" title="Control.Monad.Freer">interpret</a></code>,
 <code><a href="Control-Monad-Freer.html#v:reinterpret" title="Control.Monad.Freer">reinterpret</a></code>, <code><a href="Control-Monad-Freer.html#v:reinterpret2" title="Control.Monad.Freer">reinterpret2</a></code>, or <code><a href="Control-Monad-Freer.html#v:reinterpret3" title="Control.Monad.Freer">reinterpret3</a></code> where possible.</p></div></div><div class="top"><p class="src"><a id="v:translate" class="def">translate</a> :: <span class="keyword">forall</span> f g effs. (f <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> g) -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (f ': effs) <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (g ': effs) <a href="src/Control.Monad.Freer.html#translate" class="link">Source</a> <a href="#v:translate" class="selflink">#</a></p><div class="doc"><p>Runs an effect by translating it into another effect. This is effectively a
 more restricted form of <code><a href="Control-Monad-Freer.html#v:reinterpret" title="Control.Monad.Freer">reinterpret</a></code>, since both produce a natural
 transformation from <code><code><a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a></code> (f ': effs)</code> to <code><code><a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a></code> (g ': effs)</code> for some
 effects <code>f</code> and <code>g</code>, but <code><a href="Control-Monad-Freer.html#v:translate" title="Control.Monad.Freer">translate</a></code> does not permit using any of the other
 effects in the implementation of the interpreter.</p><p>In practice, this difference in functionality is not particularly useful, and
 <code><a href="Control-Monad-Freer.html#v:reinterpret" title="Control.Monad.Freer">reinterpret</a></code> easily subsumes all of the functionality of <code><a href="Control-Monad-Freer.html#v:translate" title="Control.Monad.Freer">translate</a></code>, but
 the way <code><a href="Control-Monad-Freer.html#v:translate" title="Control.Monad.Freer">translate</a></code> restricts the result leads to much better type inference.</p><pre><code><a href="Control-Monad-Freer.html#v:translate" title="Control.Monad.Freer">translate</a></code> f = <code><a href="Control-Monad-Freer.html#v:reinterpret" title="Control.Monad.Freer">reinterpret</a></code> (<code><a href="Control-Monad-Freer.html#v:send" title="Control.Monad.Freer">send</a></code> . f)
</pre></div></div><a href="#g:10" id="g:10"><h3>Monadic effect handlers</h3></a><div class="top"><p class="src"><a id="v:interpretM" class="def">interpretM</a> :: <span class="keyword">forall</span> eff m effs. (<a href="../../ghc/html/libraries/base-4.14.3.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="Control-Monad-Freer.html#t:LastMember" title="Control.Monad.Freer">LastMember</a> m effs) =&gt; (eff <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> m) -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (eff ': effs) <a href="Control-Monad-Freer.html#t:-126--62-" title="Control.Monad.Freer">~&gt;</a> <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs <a href="src/Control.Monad.Freer.html#interpretM" class="link">Source</a> <a href="#v:interpretM" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Control-Monad-Freer.html#v:interpret" title="Control.Monad.Freer">interpret</a></code>, this function runs an effect without introducing another
 one. Like <code><a href="Control-Monad-Freer.html#v:translate" title="Control.Monad.Freer">translate</a></code>, this function runs an effect by translating it into
 another effect in isolation, without access to the other effects in <code>effs</code>.
 Unlike either of those functions, however, this runs the effect in a final
 monad in <code>effs</code>, intended to be run with <code><a href="Control-Monad-Freer.html#v:runM" title="Control.Monad.Freer">runM</a></code>.</p><pre><code><a href="Control-Monad-Freer.html#v:interpretM" title="Control.Monad.Freer">interpretM</a></code> f = <code><a href="Control-Monad-Freer.html#v:interpret" title="Control.Monad.Freer">interpret</a></code> (<code><a href="Control-Monad-Freer.html#v:sendM" title="Control.Monad.Freer">sendM</a></code> . f)
</pre></div></div><a href="#g:11" id="g:11"><h3>Advanced effect handlers</h3></a><div class="top"><p class="src"><a id="v:interpretWith" class="def">interpretWith</a> :: <span class="keyword">forall</span> eff effs b. (<span class="keyword">forall</span> v. eff v -&gt; (v -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs b) -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs b) -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> (eff ': effs) b -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs b <a href="src/Control.Monad.Freer.html#interpretWith" class="link">Source</a> <a href="#v:interpretWith" class="selflink">#</a></p><div class="doc"><p>A highly general way of handling an effect. Like <code><a href="Control-Monad-Freer.html#v:interpret" title="Control.Monad.Freer">interpret</a></code>, but
 explicitly passes the <em>continuation</em>, a function of type <code>v -&gt; <code><a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a></code> effs b</code>,
 to the handler function. Most handlers invoke this continuation to resume the
 computation with a particular value as the result, but some handlers may
 return a value without resumption, effectively aborting the computation to
 the point where the handler is invoked. This is useful for implementing
 things like <code><a href="Control-Monad-Freer-Error.html#v:catchError" title="Control.Monad.Freer.Error">catchError</a></code>, for example.</p><pre><code><a href="Control-Monad-Freer.html#v:interpret" title="Control.Monad.Freer">interpret</a></code> f = <code><a href="Control-Monad-Freer.html#v:interpretWith" title="Control.Monad.Freer">interpretWith</a></code> (e -&gt; (f e <code><a href="../../ghc/html/libraries/base-4.14.3.0/Control-Monad.html#v:-62--62--61-" title="Control.Monad">&gt;&gt;=</a></code>))
</pre></div></div><div class="top"><p class="src"><a id="v:interposeWith" class="def">interposeWith</a> :: <span class="keyword">forall</span> eff effs b. <a href="Control-Monad-Freer.html#t:Member" title="Control.Monad.Freer">Member</a> eff effs =&gt; (<span class="keyword">forall</span> v. eff v -&gt; (v -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs b) -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs b) -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs b -&gt; <a href="Control-Monad-Freer.html#t:Eff" title="Control.Monad.Freer">Eff</a> effs b <a href="src/Control.Monad.Freer.html#interposeWith" class="link">Source</a> <a href="#v:interposeWith" class="selflink">#</a></p><div class="doc"><p>Combines the interposition behavior of <code><a href="Control-Monad-Freer.html#v:interpose" title="Control.Monad.Freer">interpose</a></code> with the
 continuation-passing capabilities of <code><a href="Control-Monad-Freer.html#v:interpretWith" title="Control.Monad.Freer">interpretWith</a></code>.</p><pre><code><a href="Control-Monad-Freer.html#v:interpose" title="Control.Monad.Freer">interpose</a></code> f = <code><a href="Control-Monad-Freer.html#v:interposeWith" title="Control.Monad.Freer">interposeWith</a></code> (e -&gt; (f e <code><a href="../../ghc/html/libraries/base-4.14.3.0/Control-Monad.html#v:-62--62--61-" title="Control.Monad">&gt;&gt;=</a></code>))
</pre></div></div><a href="#g:12" id="g:12"><h1>Re-exported bindings</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:-126--62-" class="def">(~&gt;)</a> (f :: k -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) (g :: k -&gt; <a href="../../ghc/html/libraries/base-4.14.3.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) = <span class="keyword">forall</span> (x :: k). f x -&gt; g x <span class="fixity">infixr 0</span><span class="rightedge"></span> <a href="../../natural-transformation/html/src" class="link">Source</a> <a href="#t:-126--62-" class="selflink">#</a></p><div class="doc"><p>A natural transformation from <code>f</code> to <code>g</code>.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.2</p></div></body></html>