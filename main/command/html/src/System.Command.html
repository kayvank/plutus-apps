<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span id="%24con2tag_FZCFKMsgukOL143N4FBgUl"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances, TypeSynonymInstances, TypeOperators #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">System.Command</span><span>
</span><span id="line-4"></span><span class="hs-special">(</span><span> </span><span class="annot"><a href="System.Command.html#command"><span class="hs-identifier">command</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Command.html#command_"><span class="hs-identifier">command_</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Command.html#cmd"><span class="hs-identifier">cmd</span></a></span><span>
</span><span id="line-5"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Command.html#Stdout"><span class="hs-identifier">Stdout</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Command.html#Stderr"><span class="hs-identifier">Stderr</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Command.html#Exit"><span class="hs-identifier">Exit</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-6"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Command.html#CmdResult"><span class="hs-identifier">CmdResult</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Command.html#CmdOption"><span class="hs-identifier">CmdOption</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-7"></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-8"></span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Arrow</span></a></span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Concurrent</span></a></span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/deepseq-1.4.4.0/src"><span class="hs-identifier">Control.DeepSeq</span></a></span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Exception</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">C</span></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Monad</span></a></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Either</span></a></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Foreign.C.Error</span></a></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">System.Exit</span></a></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">System.IO</span></a></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../process/html/src"><span class="hs-identifier">System.Process</span></a></span><span>
</span><span id="line-19"></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">GHC.IO.Exception</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">IOErrorType</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">IOException</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span class="hs-comment">---------------------------------------------------------------------</span><span>
</span><span id="line-24"></span><span class="hs-comment">-- ACTUAL EXECUTION</span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span class="hs-comment">-- | Options passed to 'command' or 'cmd' to control how processes are executed.</span><span>
</span><span id="line-27"></span><span class="hs-keyword">data</span><span> </span><span id="CmdOption"><span class="annot"><a href="System.Command.html#CmdOption"><span class="hs-identifier hs-var">CmdOption</span></a></span></span><span>
</span><span id="line-28"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="Cwd"><span class="annot"><a href="System.Command.html#Cwd"><span class="hs-identifier hs-var">Cwd</span></a></span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-comment">-- ^ Change the current directory in the spawned process. By default uses this processes current directory.</span><span>
</span><span id="line-29"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="Env"><span class="annot"><a href="System.Command.html#Env"><span class="hs-identifier hs-var">Env</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">,</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- ^ Change the environment variables in the spawned process. By default uses this processes environment.</span><span>
</span><span id="line-30"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="Stdin"><span class="annot"><a href="System.Command.html#Stdin"><span class="hs-identifier hs-var">Stdin</span></a></span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-comment">-- ^ Given as the @stdin@ of the spawned process. By default no @stdin@ is given.</span><span>
</span><span id="line-31"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="Shell"><span class="annot"><a href="System.Command.html#Shell"><span class="hs-identifier hs-var">Shell</span></a></span></span><span> </span><span class="hs-comment">-- ^ Pass the command to the shell without escaping - any arguments will be joined with spaces. By default arguments are escaped properly.</span><span>
</span><span id="line-32"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="BinaryPipes"><span class="annot"><a href="System.Command.html#BinaryPipes"><span class="hs-identifier hs-var">BinaryPipes</span></a></span></span><span> </span><span class="hs-comment">-- ^ Treat the @stdin@\/@stdout@\/@stderr@ messages as binary. By default streams use text encoding.</span><span>
</span><span id="line-33"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="Traced"><span class="annot"><a href="System.Command.html#Traced"><span class="hs-identifier hs-var">Traced</span></a></span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-comment">-- ^ Name to use with 'traced', or @\&quot;\&quot;@ for no tracing. By default traces using the name of the executable.</span><span>
</span><span id="line-34"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="WithStderr"><span class="annot"><a href="System.Command.html#WithStderr"><span class="hs-identifier hs-var">WithStderr</span></a></span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span> </span><span class="hs-comment">-- ^ Should I include the @stderr@ in the exception if the command fails? Defaults to 'True'.</span><span>
</span><span id="line-35"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="EchoStdout"><span class="annot"><a href="System.Command.html#EchoStdout"><span class="hs-identifier hs-var">EchoStdout</span></a></span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span> </span><span class="hs-comment">-- ^ Should I echo the @stdout@? Defaults to 'True' unless a 'Stdout' result is required.</span><span>
</span><span id="line-36"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="EchoStderr"><span class="annot"><a href="System.Command.html#EchoStderr"><span class="hs-identifier hs-var">EchoStderr</span></a></span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span> </span><span class="hs-comment">-- ^ Should I echo the @stderr@? Defaults to 'True' unless a 'Stderr' result is required.</span><span>
</span><span id="line-37"></span><span>      </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679037944"><span id="local-6989586621679037946"><span class="annot"><span class="annottext">CmdOption -&gt; CmdOption -&gt; Bool
(CmdOption -&gt; CmdOption -&gt; Bool)
-&gt; (CmdOption -&gt; CmdOption -&gt; Bool) -&gt; Eq CmdOption
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: CmdOption -&gt; CmdOption -&gt; Bool
$c/= :: CmdOption -&gt; CmdOption -&gt; Bool
== :: CmdOption -&gt; CmdOption -&gt; Bool
$c== :: CmdOption -&gt; CmdOption -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span id="local-6989586621679037928"><span id="local-6989586621679037930"><span id="local-6989586621679037932"><span id="local-6989586621679037934"><span id="local-6989586621679037936"><span id="local-6989586621679037938"><span id="local-6989586621679037940"><span class="annot"><span class="annottext">Eq CmdOption
Eq CmdOption
-&gt; (CmdOption -&gt; CmdOption -&gt; Ordering)
-&gt; (CmdOption -&gt; CmdOption -&gt; Bool)
-&gt; (CmdOption -&gt; CmdOption -&gt; Bool)
-&gt; (CmdOption -&gt; CmdOption -&gt; Bool)
-&gt; (CmdOption -&gt; CmdOption -&gt; Bool)
-&gt; (CmdOption -&gt; CmdOption -&gt; CmdOption)
-&gt; (CmdOption -&gt; CmdOption -&gt; CmdOption)
-&gt; Ord CmdOption
CmdOption -&gt; CmdOption -&gt; Bool
CmdOption -&gt; CmdOption -&gt; Ordering
CmdOption -&gt; CmdOption -&gt; CmdOption
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: CmdOption -&gt; CmdOption -&gt; CmdOption
$cmin :: CmdOption -&gt; CmdOption -&gt; CmdOption
max :: CmdOption -&gt; CmdOption -&gt; CmdOption
$cmax :: CmdOption -&gt; CmdOption -&gt; CmdOption
&gt;= :: CmdOption -&gt; CmdOption -&gt; Bool
$c&gt;= :: CmdOption -&gt; CmdOption -&gt; Bool
&gt; :: CmdOption -&gt; CmdOption -&gt; Bool
$c&gt; :: CmdOption -&gt; CmdOption -&gt; Bool
&lt;= :: CmdOption -&gt; CmdOption -&gt; Bool
$c&lt;= :: CmdOption -&gt; CmdOption -&gt; Bool
&lt; :: CmdOption -&gt; CmdOption -&gt; Bool
$c&lt; :: CmdOption -&gt; CmdOption -&gt; Bool
compare :: CmdOption -&gt; CmdOption -&gt; Ordering
$ccompare :: CmdOption -&gt; CmdOption -&gt; Ordering
$cp1Ord :: Eq CmdOption
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span id="local-6989586621679037921"><span id="local-6989586621679037923"><span id="local-6989586621679037925"><span class="annot"><span class="annottext">Int -&gt; CmdOption -&gt; ShowS
[CmdOption] -&gt; ShowS
CmdOption -&gt; String
(Int -&gt; CmdOption -&gt; ShowS)
-&gt; (CmdOption -&gt; String)
-&gt; ([CmdOption] -&gt; ShowS)
-&gt; Show CmdOption
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [CmdOption] -&gt; ShowS
$cshowList :: [CmdOption] -&gt; ShowS
show :: CmdOption -&gt; String
$cshow :: CmdOption -&gt; String
showsPrec :: Int -&gt; CmdOption -&gt; ShowS
$cshowsPrec :: Int -&gt; CmdOption -&gt; ShowS
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span>
</span><span id="line-39"></span><span class="hs-keyword">data</span><span> </span><span id="Result"><span class="annot"><a href="System.Command.html#Result"><span class="hs-identifier hs-var">Result</span></a></span></span><span>
</span><span id="line-40"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="ResultStdout"><span class="annot"><a href="System.Command.html#ResultStdout"><span class="hs-identifier hs-var">ResultStdout</span></a></span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-41"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="ResultStderr"><span class="annot"><a href="System.Command.html#ResultStderr"><span class="hs-identifier hs-var">ResultStderr</span></a></span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-42"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="ResultCode"><span class="annot"><a href="System.Command.html#ResultCode"><span class="hs-identifier hs-var">ResultCode</span></a></span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">ExitCode</span></a></span><span>
</span><span id="line-43"></span><span>      </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679037913"><span id="local-6989586621679037915"><span class="annot"><span class="annottext">Result -&gt; Result -&gt; Bool
(Result -&gt; Result -&gt; Bool)
-&gt; (Result -&gt; Result -&gt; Bool) -&gt; Eq Result
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Result -&gt; Result -&gt; Bool
$c/= :: Result -&gt; Result -&gt; Bool
== :: Result -&gt; Result -&gt; Bool
$c== :: Result -&gt; Result -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span class="annot"><a href="System.Command.html#commandExplicit"><span class="hs-identifier hs-type">commandExplicit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="System.Command.html#CmdOption"><span class="hs-identifier hs-type">CmdOption</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="System.Command.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="System.Command.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-47"></span><span id="commandExplicit"><span class="annot"><span class="annottext">commandExplicit :: String
-&gt; [CmdOption] -&gt; [Result] -&gt; String -&gt; [String] -&gt; IO [Result]
</span><a href="System.Command.html#commandExplicit"><span class="hs-identifier hs-var hs-var">commandExplicit</span></a></span></span><span> </span><span id="local-6989586621679037911"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037911"><span class="hs-identifier hs-var">funcName</span></a></span></span><span> </span><span id="local-6989586621679037910"><span class="annot"><span class="annottext">[CmdOption]
</span><a href="#local-6989586621679037910"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621679037909"><span class="annot"><span class="annottext">[Result]
</span><a href="#local-6989586621679037909"><span class="hs-identifier hs-var">results</span></a></span></span><span> </span><span id="local-6989586621679037908"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037908"><span class="hs-identifier hs-var">exe</span></a></span></span><span> </span><span id="local-6989586621679037907"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679037907"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-48"></span><span class="hs-comment">-- BEGIN COPIED</span><span>
</span><span id="line-49"></span><span class="hs-comment">-- Originally from readProcessWithExitCode with as few changes as possible</span><span>
</span><span id="line-50"></span><span>    </span><span class="annot"><span class="annottext">((forall a. IO a -&gt; IO a) -&gt; IO [Result]) -&gt; IO [Result]
forall b. ((forall a. IO a -&gt; IO a) -&gt; IO b) -&gt; IO b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mask</span></a></span><span> </span><span class="annot"><span class="annottext">(((forall a. IO a -&gt; IO a) -&gt; IO [Result]) -&gt; IO [Result])
-&gt; ((forall a. IO a -&gt; IO a) -&gt; IO [Result]) -&gt; IO [Result]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679037905"><span class="annot"><span class="annottext">forall a. IO a -&gt; IO a
</span><a href="#local-6989586621679037905"><span class="hs-identifier hs-var">restore</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-51"></span><span>      </span><span id="local-6989586621679037904"><span class="annot"><span class="annottext">Either
  SomeException
  (Maybe Handle, Maybe Handle, Maybe Handle, ProcessHandle)
</span><a href="#local-6989586621679037904"><span class="hs-identifier hs-var">ans</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (Maybe Handle, Maybe Handle, Maybe Handle, ProcessHandle)
-&gt; IO
     (Either
        SomeException
        (Maybe Handle, Maybe Handle, Maybe Handle, ProcessHandle))
forall e a. Exception e =&gt; IO a -&gt; IO (Either e a)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">try</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Maybe Handle, Maybe Handle, Maybe Handle, ProcessHandle)
 -&gt; IO
      (Either
         SomeException
         (Maybe Handle, Maybe Handle, Maybe Handle, ProcessHandle)))
-&gt; IO (Maybe Handle, Maybe Handle, Maybe Handle, ProcessHandle)
-&gt; IO
     (Either
        SomeException
        (Maybe Handle, Maybe Handle, Maybe Handle, ProcessHandle))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CreateProcess
-&gt; IO (Maybe Handle, Maybe Handle, Maybe Handle, ProcessHandle)
</span><a href="../../../../process/html/src"><span class="hs-identifier hs-var">createProcess</span></a></span><span> </span><span class="annot"><span class="annottext">CreateProcess
</span><a href="#local-6989586621679037901"><span class="hs-identifier hs-var">cp</span></a></span><span>
</span><span id="line-52"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621679037900"><span class="annot"><span class="annottext">Maybe Handle
</span><a href="#local-6989586621679037900"><span class="hs-identifier hs-var">m'inh</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679037899"><span class="annot"><span class="annottext">Maybe Handle
</span><a href="#local-6989586621679037899"><span class="hs-identifier hs-var">m'outh</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679037898"><span class="annot"><span class="annottext">Maybe Handle
</span><a href="#local-6989586621679037898"><span class="hs-identifier hs-var">m'errh</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679037897"><span class="annot"><span class="annottext">ProcessHandle
</span><a href="#local-6989586621679037897"><span class="hs-identifier hs-var">pid</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either
  SomeException
  (Maybe Handle, Maybe Handle, Maybe Handle, ProcessHandle)
</span><a href="#local-6989586621679037904"><span class="hs-identifier hs-var">ans</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-53"></span><span>          </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621679037896"><span class="annot"><span class="annottext">(Maybe Handle, Maybe Handle, Maybe Handle, ProcessHandle)
</span><a href="#local-6989586621679037896"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Maybe Handle, Maybe Handle, Maybe Handle, ProcessHandle)
-&gt; IO (Maybe Handle, Maybe Handle, Maybe Handle, ProcessHandle)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Handle, Maybe Handle, Maybe Handle, ProcessHandle)
</span><a href="#local-6989586621679037896"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-54"></span><span>          </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621679037895"><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679037895"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-55"></span><span>              </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679037894"><span class="annot"><span class="annottext">msg :: String
</span><a href="#local-6989586621679037894"><span class="hs-identifier hs-var hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;System.Command.&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037911"><span class="hs-identifier hs-var">funcName</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, system command failed\n&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-56"></span><span>                        </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Command: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; String
</span><a href="System.Command.html#saneCommandForUser"><span class="hs-identifier hs-var">saneCommandForUser</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037908"><span class="hs-identifier hs-var">exe</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679037907"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\n&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-57"></span><span>                        </span><span class="annot"><span class="annottext">SomeException -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679037895"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">SomeException</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span>              </span><span class="annot"><span class="annottext">String
-&gt; IO (Maybe Handle, Maybe Handle, Maybe Handle, ProcessHandle)
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037894"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679037890"><span class="annot"><span class="annottext">close :: Maybe Handle -&gt; IO ()
</span><a href="#local-6989586621679037890"><span class="hs-identifier hs-var hs-var">close</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; (Handle -&gt; IO ()) -&gt; Maybe Handle -&gt; IO ()
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Handle -&gt; IO ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">hClose</span></a></span><span>
</span><span id="line-61"></span><span>      </span><span class="annot"><span class="annottext">(IO [Result] -&gt; IO ExitCode -&gt; IO [Result])
-&gt; IO ExitCode -&gt; IO [Result] -&gt; IO [Result]
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">IO [Result] -&gt; IO ExitCode -&gt; IO [Result]
forall a b. IO a -&gt; IO b -&gt; IO a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">onException</span></a></span><span>
</span><span id="line-62"></span><span>        </span><span class="hs-special">(</span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">Maybe Handle -&gt; IO ()
</span><a href="#local-6989586621679037890"><span class="hs-identifier hs-var">close</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Handle
</span><a href="#local-6989586621679037900"><span class="hs-identifier hs-var">m'inh</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Maybe Handle -&gt; IO ()
</span><a href="#local-6989586621679037890"><span class="hs-identifier hs-var">close</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Handle
</span><a href="#local-6989586621679037899"><span class="hs-identifier hs-var">m'outh</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Maybe Handle -&gt; IO ()
</span><a href="#local-6989586621679037890"><span class="hs-identifier hs-var">close</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Handle
</span><a href="#local-6989586621679037898"><span class="hs-identifier hs-var">m'errh</span></a></span><span>
</span><span id="line-63"></span><span>            </span><span class="annot"><span class="annottext">ProcessHandle -&gt; IO ()
</span><a href="../../../../process/html/src"><span class="hs-identifier hs-var">terminateProcess</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessHandle
</span><a href="#local-6989586621679037897"><span class="hs-identifier hs-var">pid</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">ProcessHandle -&gt; IO ExitCode
</span><a href="../../../../process/html/src"><span class="hs-identifier hs-var">waitForProcess</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessHandle
</span><a href="#local-6989586621679037897"><span class="hs-identifier hs-var">pid</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO [Result] -&gt; IO [Result]) -&gt; IO [Result] -&gt; IO [Result]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">IO [Result] -&gt; IO [Result]
forall a. IO a -&gt; IO a
</span><a href="#local-6989586621679037905"><span class="hs-identifier hs-var">restore</span></a></span><span> </span><span class="annot"><span class="annottext">(IO [Result] -&gt; IO [Result]) -&gt; IO [Result] -&gt; IO [Result]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-64"></span><span>
</span><span id="line-65"></span><span>        </span><span class="hs-comment">-- set pipes to binary if appropriate</span><span>
</span><span id="line-66"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmdOption
</span><a href="System.Command.html#BinaryPipes"><span class="hs-identifier hs-var">BinaryPipes</span></a></span><span> </span><span class="annot"><span class="annottext">CmdOption -&gt; [CmdOption] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`elem`</span></a></span><span> </span><span class="annot"><span class="annottext">[CmdOption]
</span><a href="#local-6989586621679037910"><span class="hs-identifier hs-var">opts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-67"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679037881"><span class="annot"><span class="annottext">bin :: Maybe Handle -&gt; IO ()
</span><a href="#local-6989586621679037881"><span class="hs-identifier hs-var hs-var">bin</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; (Handle -&gt; IO ()) -&gt; Maybe Handle -&gt; IO ()
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Handle -&gt; Bool -&gt; IO ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`hSetBinaryMode`</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span>            </span><span class="annot"><span class="annottext">Maybe Handle -&gt; IO ()
</span><a href="#local-6989586621679037881"><span class="hs-identifier hs-var">bin</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Handle
</span><a href="#local-6989586621679037900"><span class="hs-identifier hs-var">m'inh</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Maybe Handle -&gt; IO ()
</span><a href="#local-6989586621679037881"><span class="hs-identifier hs-var">bin</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Handle
</span><a href="#local-6989586621679037899"><span class="hs-identifier hs-var">m'outh</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Maybe Handle -&gt; IO ()
</span><a href="#local-6989586621679037881"><span class="hs-identifier hs-var">bin</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Handle
</span><a href="#local-6989586621679037898"><span class="hs-identifier hs-var">m'errh</span></a></span><span>
</span><span id="line-69"></span><span>
</span><span id="line-70"></span><span>        </span><span class="hs-comment">-- fork off a thread to start consuming stdout</span><span>
</span><span id="line-71"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679037879"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037879"><span class="hs-identifier hs-var">out</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679037878"><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679037878"><span class="hs-identifier hs-var">waitOut</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679037877"><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679037877"><span class="hs-identifier hs-var">waitOutEcho</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Handle
</span><a href="#local-6989586621679037899"><span class="hs-identifier hs-var">m'outh</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-72"></span><span>            </span><span class="annot"><span class="annottext">Maybe Handle
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(String, IO (), IO ()) -&gt; IO (String, IO (), IO ())
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span>            </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679037876"><span class="annot"><span class="annottext">Handle
</span><a href="#local-6989586621679037876"><span class="hs-identifier hs-var">outh</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-74"></span><span>                </span><span id="local-6989586621679037875"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037875"><span class="hs-identifier hs-var">out</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Handle -&gt; IO String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">hGetContents</span></a></span><span> </span><span class="annot"><span class="annottext">Handle
</span><a href="#local-6989586621679037876"><span class="hs-identifier hs-var">outh</span></a></span><span>
</span><span id="line-75"></span><span>                </span><span id="local-6989586621679037873"><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679037873"><span class="hs-identifier hs-var">waitOut</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IO (IO ())
forall a. IO a -&gt; IO (IO a)
</span><a href="System.Command.html#forkWait"><span class="hs-identifier hs-var">forkWait</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO (IO ())) -&gt; IO () -&gt; IO (IO ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall a. a -&gt; IO a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">C.evaluate</span></a></span><span> </span><span class="annot"><span class="annottext">(() -&gt; IO ()) -&gt; () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../../../../ghc/html/libraries/deepseq-1.4.4.0/src"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037875"><span class="hs-identifier hs-var">out</span></a></span><span>
</span><span id="line-76"></span><span>                </span><span id="local-6989586621679037869"><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679037869"><span class="hs-identifier hs-var">waitOutEcho</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679037868"><span class="hs-identifier hs-var">stdoutEcho</span></a></span><span>
</span><span id="line-77"></span><span>                                 </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IO (IO ())
forall a. IO a -&gt; IO (IO a)
</span><a href="System.Command.html#forkWait"><span class="hs-identifier hs-var">forkWait</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Handle -&gt; String -&gt; IO ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">hPutStr</span></a></span><span> </span><span class="annot"><span class="annottext">Handle
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">stdout</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037875"><span class="hs-identifier hs-var">out</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span>                                 </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IO (IO ())
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span>                </span><span class="annot"><span class="annottext">(String, IO (), IO ()) -&gt; IO (String, IO (), IO ())
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037875"><span class="hs-identifier hs-var">out</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679037873"><span class="hs-identifier hs-var">waitOut</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679037869"><span class="hs-identifier hs-var">waitOutEcho</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span>        </span><span class="hs-comment">-- fork off a thread to start consuming stderr</span><span>
</span><span id="line-82"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679037865"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037865"><span class="hs-identifier hs-var">err</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679037864"><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679037864"><span class="hs-identifier hs-var">waitErr</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679037863"><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679037863"><span class="hs-identifier hs-var">waitErrEcho</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Handle
</span><a href="#local-6989586621679037898"><span class="hs-identifier hs-var">m'errh</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-83"></span><span>            </span><span class="annot"><span class="annottext">Maybe Handle
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(String, IO (), IO ()) -&gt; IO (String, IO (), IO ())
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span>            </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679037862"><span class="annot"><span class="annottext">Handle
</span><a href="#local-6989586621679037862"><span class="hs-identifier hs-var">errh</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-85"></span><span>                </span><span id="local-6989586621679037861"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037861"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Handle -&gt; IO String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">hGetContents</span></a></span><span> </span><span class="annot"><span class="annottext">Handle
</span><a href="#local-6989586621679037862"><span class="hs-identifier hs-var">errh</span></a></span><span>
</span><span id="line-86"></span><span>                </span><span id="local-6989586621679037860"><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679037860"><span class="hs-identifier hs-var">waitErr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IO (IO ())
forall a. IO a -&gt; IO (IO a)
</span><a href="System.Command.html#forkWait"><span class="hs-identifier hs-var">forkWait</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO (IO ())) -&gt; IO () -&gt; IO (IO ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall a. a -&gt; IO a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">C.evaluate</span></a></span><span> </span><span class="annot"><span class="annottext">(() -&gt; IO ()) -&gt; () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../../../../ghc/html/libraries/deepseq-1.4.4.0/src"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037861"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-87"></span><span>                </span><span id="local-6989586621679037859"><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679037859"><span class="hs-identifier hs-var">waitErrEcho</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679037858"><span class="hs-identifier hs-var">stderrEcho</span></a></span><span>
</span><span id="line-88"></span><span>                                 </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IO (IO ())
forall a. IO a -&gt; IO (IO a)
</span><a href="System.Command.html#forkWait"><span class="hs-identifier hs-var">forkWait</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Handle -&gt; String -&gt; IO ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">hPutStr</span></a></span><span> </span><span class="annot"><span class="annottext">Handle
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">stderr</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037861"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-89"></span><span>                                 </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IO (IO ())
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-90"></span><span>                </span><span class="annot"><span class="annottext">(String, IO (), IO ()) -&gt; IO (String, IO (), IO ())
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037861"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679037860"><span class="hs-identifier hs-var">waitErr</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679037859"><span class="hs-identifier hs-var">waitErrEcho</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span>        </span><span class="hs-comment">-- now write and flush any input</span><span>
</span><span id="line-93"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679037856"><span class="annot"><span class="annottext">writeInput :: IO ()
</span><a href="#local-6989586621679037856"><span class="hs-identifier hs-var hs-var">writeInput</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-94"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Handle
</span><a href="#local-6989586621679037900"><span class="hs-identifier hs-var">m'inh</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-95"></span><span>                  </span><span class="annot"><span class="annottext">Maybe Handle
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span>                  </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679037855"><span class="annot"><span class="annottext">Handle
</span><a href="#local-6989586621679037855"><span class="hs-identifier hs-var">inh</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-97"></span><span>                      </span><span class="annot"><span class="annottext">Handle -&gt; String -&gt; IO ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">hPutStr</span></a></span><span> </span><span class="annot"><span class="annottext">Handle
</span><a href="#local-6989586621679037855"><span class="hs-identifier hs-var">inh</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037854"><span class="hs-identifier hs-var">input</span></a></span><span>
</span><span id="line-98"></span><span>                      </span><span class="annot"><span class="annottext">Handle -&gt; IO ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">hFlush</span></a></span><span> </span><span class="annot"><span class="annottext">Handle
</span><a href="#local-6989586621679037855"><span class="hs-identifier hs-var">inh</span></a></span><span>
</span><span id="line-99"></span><span>                      </span><span class="annot"><span class="annottext">Handle -&gt; IO ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">hClose</span></a></span><span> </span><span class="annot"><span class="annottext">Handle
</span><a href="#local-6989586621679037855"><span class="hs-identifier hs-var">inh</span></a></span><span>
</span><span id="line-100"></span><span>
</span><span id="line-101"></span><span>        </span><span class="annot"><span class="annottext">IO () -&gt; (IOException -&gt; IO ()) -&gt; IO ()
forall e a. Exception e =&gt; IO a -&gt; (e -&gt; IO a) -&gt; IO a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">C.catch</span></a></span><span> </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679037856"><span class="hs-identifier hs-var">writeInput</span></a></span><span> </span><span class="annot"><span class="annottext">((IOException -&gt; IO ()) -&gt; IO ())
-&gt; (IOException -&gt; IO ()) -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679037851"><span class="annot"><span class="annottext">IOException
</span><a href="#local-6989586621679037851"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">IOException
</span><a href="#local-6989586621679037851"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-102"></span><span>          </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">IOError</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ioe_type :: IOException -&gt; IOErrorType
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">ioe_type</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IOErrorType
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">ResourceVanished</span></a></span><span>
</span><span id="line-103"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ioe_errno :: IOException -&gt; Maybe CInt
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">ioe_errno</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679037846"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679037846"><span class="hs-identifier hs-var">ioe</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-104"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">CInt -&gt; Errno
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Errno</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679037846"><span class="hs-identifier hs-var">ioe</span></a></span><span> </span><span class="annot"><span class="annottext">Errno -&gt; Errno -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Errno
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">ePIPE</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-105"></span><span>          </span><span class="annot"><span class="annottext">IOException
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IOException -&gt; IO ()
forall e a. Exception e =&gt; e -&gt; IO a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">throwIO</span></a></span><span> </span><span class="annot"><span class="annottext">IOException
</span><a href="#local-6989586621679037851"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-106"></span><span>
</span><span id="line-107"></span><span>        </span><span class="hs-comment">-- wait on the output</span><span>
</span><span id="line-108"></span><span>        </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679037878"><span class="hs-identifier hs-var">waitOut</span></a></span><span>
</span><span id="line-109"></span><span>        </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679037864"><span class="hs-identifier hs-var">waitErr</span></a></span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span>        </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679037877"><span class="hs-identifier hs-var">waitOutEcho</span></a></span><span>
</span><span id="line-112"></span><span>        </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679037863"><span class="hs-identifier hs-var">waitErrEcho</span></a></span><span>
</span><span id="line-113"></span><span>
</span><span id="line-114"></span><span>        </span><span class="annot"><span class="annottext">Maybe Handle -&gt; IO ()
</span><a href="#local-6989586621679037890"><span class="hs-identifier hs-var">close</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Handle
</span><a href="#local-6989586621679037899"><span class="hs-identifier hs-var">m'outh</span></a></span><span>
</span><span id="line-115"></span><span>        </span><span class="annot"><span class="annottext">Maybe Handle -&gt; IO ()
</span><a href="#local-6989586621679037890"><span class="hs-identifier hs-var">close</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Handle
</span><a href="#local-6989586621679037898"><span class="hs-identifier hs-var">m'errh</span></a></span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span>        </span><span class="hs-comment">-- wait on the process</span><span>
</span><span id="line-118"></span><span>        </span><span id="local-6989586621679037842"><span class="annot"><span class="annottext">ExitCode
</span><a href="#local-6989586621679037842"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ProcessHandle -&gt; IO ExitCode
</span><a href="../../../../process/html/src"><span class="hs-identifier hs-var">waitForProcess</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessHandle
</span><a href="#local-6989586621679037897"><span class="hs-identifier hs-var">pid</span></a></span><span>
</span><span id="line-119"></span><span class="hs-comment">-- END COPIED</span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExitCode -&gt; Result
</span><a href="System.Command.html#ResultCode"><span class="hs-identifier hs-var">ResultCode</span></a></span><span> </span><span class="annot"><span class="annottext">ExitCode
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">ExitSuccess</span></a></span><span> </span><span class="annot"><span class="annottext">Result -&gt; [Result] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`notElem`</span></a></span><span> </span><span class="annot"><span class="annottext">[Result]
</span><a href="#local-6989586621679037909"><span class="hs-identifier hs-var">results</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">ExitCode
</span><a href="#local-6989586621679037842"><span class="hs-identifier hs-var">ex</span></a></span><span> </span><span class="annot"><span class="annottext">ExitCode -&gt; ExitCode -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">/=</span></a></span><span> </span><span class="annot"><span class="annottext">ExitCode
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">ExitSuccess</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-122"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679037837"><span class="annot"><span class="annottext">msg :: String
</span><a href="#local-6989586621679037837"><span class="hs-identifier hs-var hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;System.Command.&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037911"><span class="hs-identifier hs-var">funcName</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, system command failed\n&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-123"></span><span>                      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Command: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; String
</span><a href="System.Command.html#saneCommandForUser"><span class="hs-identifier hs-var">saneCommandForUser</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037908"><span class="hs-identifier hs-var">exe</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679037907"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\n&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-124"></span><span>                      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Exit code: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ExitCode
</span><a href="#local-6989586621679037842"><span class="hs-identifier hs-var">ex</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">ExitFailure</span></a></span><span> </span><span id="local-6989586621679037835"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679037835"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679037835"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">ExitCode
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\n&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-125"></span><span>                      </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">not</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679037833"><span class="hs-identifier hs-var">stderrThrow</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Stderr not captured because ErrorsWithoutStderr was used&quot;</span></span><span>
</span><span id="line-126"></span><span>                       </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">String -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037865"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Stderr was empty&quot;</span></span><span>
</span><span id="line-127"></span><span>                       </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Stderr:\n&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">unlines</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(String -&gt; Bool) -&gt; [String] -&gt; [String]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">dropWhile</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; [String]) -&gt; [String] -&gt; [String]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; [String]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">lines</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037865"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-128"></span><span>            </span><span class="annot"><span class="annottext">String -&gt; IO ()
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037837"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-129"></span><span>
</span><span id="line-130"></span><span>        </span><span class="annot"><span class="annottext">[Result] -&gt; IO [Result]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">([Result] -&gt; IO [Result]) -&gt; [Result] -&gt; IO [Result]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">((Result -&gt; Result) -&gt; [Result] -&gt; [Result])
-&gt; [Result] -&gt; (Result -&gt; Result) -&gt; [Result]
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">(Result -&gt; Result) -&gt; [Result] -&gt; [Result]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">[Result]
</span><a href="#local-6989586621679037909"><span class="hs-identifier hs-var">results</span></a></span><span> </span><span class="annot"><span class="annottext">((Result -&gt; Result) -&gt; [Result]) -&gt; (Result -&gt; Result) -&gt; [Result]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679037828"><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679037828"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621679037828"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-131"></span><span>            </span><span class="annot"><a href="System.Command.html#ResultStdout"><span class="hs-identifier hs-type">ResultStdout</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Result
</span><a href="System.Command.html#ResultStdout"><span class="hs-identifier hs-var">ResultStdout</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037879"><span class="hs-identifier hs-var">out</span></a></span><span>
</span><span id="line-132"></span><span>            </span><span class="annot"><a href="System.Command.html#ResultStderr"><span class="hs-identifier hs-type">ResultStderr</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Result
</span><a href="System.Command.html#ResultStderr"><span class="hs-identifier hs-var">ResultStderr</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037865"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-133"></span><span>            </span><span class="annot"><a href="System.Command.html#ResultCode"><span class="hs-identifier hs-type">ResultCode</span></a></span><span>   </span><span class="annot"><span class="annottext">ExitCode
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ExitCode -&gt; Result
</span><a href="System.Command.html#ResultCode"><span class="hs-identifier hs-var">ResultCode</span></a></span><span> </span><span class="annot"><span class="annottext">ExitCode
</span><a href="#local-6989586621679037842"><span class="hs-identifier hs-var">ex</span></a></span><span>
</span><span id="line-134"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-135"></span><span>        </span><span id="local-6989586621679037854"><span class="annot"><span class="annottext">input :: String
</span><a href="#local-6989586621679037854"><span class="hs-identifier hs-var hs-var">input</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
forall a. [a] -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">last</span></a></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; String) -&gt; [String] -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; [String]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037826"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="System.Command.html#Stdin"><span class="hs-identifier hs-type">Stdin</span></a></span><span> </span><span id="local-6989586621679037826"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037826"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[CmdOption]
</span><a href="#local-6989586621679037910"><span class="hs-identifier hs-var">opts</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span>        </span><span class="hs-comment">-- what should I do with these handles</span><span>
</span><span id="line-138"></span><span>        </span><span id="local-6989586621679037825"><span class="annot"><span class="annottext">binary :: Bool
</span><a href="#local-6989586621679037825"><span class="hs-identifier hs-var hs-var">binary</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmdOption
</span><a href="System.Command.html#BinaryPipes"><span class="hs-identifier hs-var">BinaryPipes</span></a></span><span> </span><span class="annot"><span class="annottext">CmdOption -&gt; [CmdOption] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`elem`</span></a></span><span> </span><span class="annot"><span class="annottext">[CmdOption]
</span><a href="#local-6989586621679037910"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-139"></span><span>        </span><span id="local-6989586621679037868"><span class="annot"><span class="annottext">stdoutEcho :: Bool
</span><a href="#local-6989586621679037868"><span class="hs-identifier hs-var hs-var">stdoutEcho</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Bool] -&gt; Bool
forall a. [a] -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">last</span></a></span><span> </span><span class="annot"><span class="annottext">([Bool] -&gt; Bool) -&gt; [Bool] -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Result
</span><a href="System.Command.html#ResultStdout"><span class="hs-identifier hs-var">ResultStdout</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">Result -&gt; [Result] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`notElem`</span></a></span><span> </span><span class="annot"><span class="annottext">[Result]
</span><a href="#local-6989586621679037909"><span class="hs-identifier hs-var">results</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; [Bool] -&gt; [Bool]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679037824"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="System.Command.html#EchoStdout"><span class="hs-identifier hs-type">EchoStdout</span></a></span><span> </span><span id="local-6989586621679037824"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679037824"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[CmdOption]
</span><a href="#local-6989586621679037910"><span class="hs-identifier hs-var">opts</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-140"></span><span>        </span><span id="local-6989586621679037823"><span class="annot"><span class="annottext">stdoutCapture :: Bool
</span><a href="#local-6989586621679037823"><span class="hs-identifier hs-var hs-var">stdoutCapture</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Result
</span><a href="System.Command.html#ResultStdout"><span class="hs-identifier hs-var">ResultStdout</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">Result -&gt; [Result] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`elem`</span></a></span><span> </span><span class="annot"><span class="annottext">[Result]
</span><a href="#local-6989586621679037909"><span class="hs-identifier hs-var">results</span></a></span><span>
</span><span id="line-141"></span><span>        </span><span id="local-6989586621679037858"><span class="annot"><span class="annottext">stderrEcho :: Bool
</span><a href="#local-6989586621679037858"><span class="hs-identifier hs-var hs-var">stderrEcho</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Bool] -&gt; Bool
forall a. [a] -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">last</span></a></span><span> </span><span class="annot"><span class="annottext">([Bool] -&gt; Bool) -&gt; [Bool] -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Result
</span><a href="System.Command.html#ResultStderr"><span class="hs-identifier hs-var">ResultStderr</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">Result -&gt; [Result] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`notElem`</span></a></span><span> </span><span class="annot"><span class="annottext">[Result]
</span><a href="#local-6989586621679037909"><span class="hs-identifier hs-var">results</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; [Bool] -&gt; [Bool]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679037822"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="System.Command.html#EchoStderr"><span class="hs-identifier hs-type">EchoStderr</span></a></span><span> </span><span id="local-6989586621679037822"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679037822"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[CmdOption]
</span><a href="#local-6989586621679037910"><span class="hs-identifier hs-var">opts</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-142"></span><span>        </span><span id="local-6989586621679037833"><span class="annot"><span class="annottext">stderrThrow :: Bool
</span><a href="#local-6989586621679037833"><span class="hs-identifier hs-var hs-var">stderrThrow</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Bool] -&gt; Bool
forall a. [a] -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">last</span></a></span><span> </span><span class="annot"><span class="annottext">([Bool] -&gt; Bool) -&gt; [Bool] -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; [Bool] -&gt; [Bool]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679037821"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="System.Command.html#WithStderr"><span class="hs-identifier hs-type">WithStderr</span></a></span><span> </span><span id="local-6989586621679037821"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679037821"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[CmdOption]
</span><a href="#local-6989586621679037910"><span class="hs-identifier hs-var">opts</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-143"></span><span>        </span><span id="local-6989586621679037820"><span class="annot"><span class="annottext">stderrCapture :: Bool
</span><a href="#local-6989586621679037820"><span class="hs-identifier hs-var hs-var">stderrCapture</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Result
</span><a href="System.Command.html#ResultStderr"><span class="hs-identifier hs-var">ResultStderr</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">Result -&gt; [Result] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`elem`</span></a></span><span> </span><span class="annot"><span class="annottext">[Result]
</span><a href="#local-6989586621679037909"><span class="hs-identifier hs-var">results</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">||</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679037833"><span class="hs-identifier hs-var">stderrThrow</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">ExitCode -&gt; Result
</span><a href="System.Command.html#ResultCode"><span class="hs-identifier hs-var">ResultCode</span></a></span><span> </span><span class="annot"><span class="annottext">ExitCode
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">ExitSuccess</span></a></span><span> </span><span class="annot"><span class="annottext">Result -&gt; [Result] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`notElem`</span></a></span><span> </span><span class="annot"><span class="annottext">[Result]
</span><a href="#local-6989586621679037909"><span class="hs-identifier hs-var">results</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span>
</span><span id="line-145"></span><span>        </span><span id="local-6989586621679037818"><span class="annot"><span class="annottext">cp0 :: CreateProcess
</span><a href="#local-6989586621679037818"><span class="hs-identifier hs-var hs-var">cp0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">CmdOption
</span><a href="System.Command.html#Shell"><span class="hs-identifier hs-var">Shell</span></a></span><span> </span><span class="annot"><span class="annottext">CmdOption -&gt; [CmdOption] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">`elem`</span></a></span><span> </span><span class="annot"><span class="annottext">[CmdOption]
</span><a href="#local-6989586621679037910"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String -&gt; CreateProcess
</span><a href="../../../../process/html/src"><span class="hs-identifier hs-var">shell</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; CreateProcess) -&gt; String -&gt; CreateProcess
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">unwords</span></a></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; String) -&gt; [String] -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037908"><span class="hs-identifier hs-var">exe</span></a></span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; [String]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-var">:</span></a></span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679037907"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; CreateProcess
</span><a href="../../../../process/html/src"><span class="hs-identifier hs-var">proc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037908"><span class="hs-identifier hs-var">exe</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679037907"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-146"></span><span>            </span><span class="hs-special">{</span><span class="annot"><span class="annottext">std_out :: StdStream
</span><a href="../../../../process/html/src"><span class="hs-identifier hs-var">std_out</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679037825"><span class="hs-identifier hs-var">binary</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">||</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679037823"><span class="hs-identifier hs-var">stdoutCapture</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">||</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">not</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679037868"><span class="hs-identifier hs-var">stdoutEcho</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">StdStream
</span><a href="../../../../process/html/src"><span class="hs-identifier hs-var">CreatePipe</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">StdStream
</span><a href="../../../../process/html/src"><span class="hs-identifier hs-var">Inherit</span></a></span><span>
</span><span id="line-147"></span><span>            </span><span class="hs-special">,</span><span class="annot"><span class="annottext">std_err :: StdStream
</span><a href="../../../../process/html/src"><span class="hs-identifier hs-var">std_err</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679037825"><span class="hs-identifier hs-var">binary</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">||</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679037820"><span class="hs-identifier hs-var">stderrCapture</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">||</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">not</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679037858"><span class="hs-identifier hs-var">stderrEcho</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">StdStream
</span><a href="../../../../process/html/src"><span class="hs-identifier hs-var">CreatePipe</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">StdStream
</span><a href="../../../../process/html/src"><span class="hs-identifier hs-var">Inherit</span></a></span><span>
</span><span id="line-148"></span><span>            </span><span class="hs-special">,</span><span class="annot"><span class="annottext">std_in :: StdStream
</span><a href="../../../../process/html/src"><span class="hs-identifier hs-var">std_in</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">String -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037854"><span class="hs-identifier hs-var">input</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">StdStream
</span><a href="../../../../process/html/src"><span class="hs-identifier hs-var">Inherit</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">StdStream
</span><a href="../../../../process/html/src"><span class="hs-identifier hs-var">CreatePipe</span></a></span><span>
</span><span id="line-149"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-150"></span><span>        </span><span id="local-6989586621679037901"><span class="annot"><span class="annottext">cp :: CreateProcess
</span><a href="#local-6989586621679037901"><span class="hs-identifier hs-var hs-var">cp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CreateProcess -&gt; CmdOption -&gt; CreateProcess)
-&gt; CreateProcess -&gt; [CmdOption] -&gt; CreateProcess
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">foldl</span></a></span><span> </span><span class="annot"><span class="annottext">CreateProcess -&gt; CmdOption -&gt; CreateProcess
</span><a href="#local-6989586621679037808"><span class="hs-identifier hs-var">applyOpt</span></a></span><span> </span><span class="annot"><span class="annottext">CreateProcess
</span><a href="#local-6989586621679037818"><span class="hs-identifier hs-var">cp0</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">std_out :: StdStream
</span><a href="../../../../process/html/src"><span class="hs-identifier hs-var">std_out</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StdStream
</span><a href="../../../../process/html/src"><span class="hs-identifier hs-var">CreatePipe</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">std_err :: StdStream
</span><a href="../../../../process/html/src"><span class="hs-identifier hs-var">std_err</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StdStream
</span><a href="../../../../process/html/src"><span class="hs-identifier hs-var">CreatePipe</span></a></span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">[CmdOption]
</span><a href="#local-6989586621679037910"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-151"></span><span>        </span><span class="annot"><a href="#local-6989586621679037808"><span class="hs-identifier hs-type">applyOpt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../process/html/src"><span class="hs-identifier hs-type">CreateProcess</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="System.Command.html#CmdOption"><span class="hs-identifier hs-type">CmdOption</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../process/html/src"><span class="hs-identifier hs-type">CreateProcess</span></a></span><span>
</span><span id="line-152"></span><span>        </span><span id="local-6989586621679037808"><span class="annot"><span class="annottext">applyOpt :: CreateProcess -&gt; CmdOption -&gt; CreateProcess
</span><a href="#local-6989586621679037808"><span class="hs-identifier hs-var hs-var">applyOpt</span></a></span></span><span> </span><span id="local-6989586621679037807"><span class="annot"><span class="annottext">CreateProcess
</span><a href="#local-6989586621679037807"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Command.html#Cwd"><span class="hs-identifier hs-type">Cwd</span></a></span><span> </span><span id="local-6989586621679037806"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037806"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CreateProcess
</span><a href="#local-6989586621679037807"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">cwd :: Maybe String
</span><a href="../../../../process/html/src"><span class="hs-identifier hs-var">cwd</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037806"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Maybe String
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe String
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037806"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-153"></span><span>        </span><span class="annot"><a href="#local-6989586621679037808"><span class="hs-identifier hs-var">applyOpt</span></a></span><span> </span><span id="local-6989586621679037804"><span class="annot"><span class="annottext">CreateProcess
</span><a href="#local-6989586621679037804"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Command.html#Env"><span class="hs-identifier hs-type">Env</span></a></span><span> </span><span id="local-6989586621679037803"><span class="annot"><span class="annottext">[(String, String)]
</span><a href="#local-6989586621679037803"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CreateProcess
</span><a href="#local-6989586621679037804"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">env :: Maybe [(String, String)]
</span><a href="../../../../process/html/src"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(String, String)] -&gt; Maybe [(String, String)]
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">[(String, String)]
</span><a href="#local-6989586621679037803"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-154"></span><span>        </span><span class="annot"><a href="#local-6989586621679037808"><span class="hs-identifier hs-var">applyOpt</span></a></span><span> </span><span id="local-6989586621679037801"><span class="annot"><span class="annottext">CreateProcess
</span><a href="#local-6989586621679037801"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="annot"><span class="annottext">CmdOption
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CreateProcess
</span><a href="#local-6989586621679037801"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-155"></span><span>
</span><span id="line-156"></span><span>
</span><span id="line-157"></span><span class="hs-comment">-- Copied from System.Process</span><span>
</span><span id="line-158"></span><span id="local-6989586621679038039"><span class="annot"><a href="System.Command.html#forkWait"><span class="hs-identifier hs-type">forkWait</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038039"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679038039"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-159"></span><span id="forkWait"><span class="annot"><span class="annottext">forkWait :: IO a -&gt; IO (IO a)
</span><a href="System.Command.html#forkWait"><span class="hs-identifier hs-var hs-var">forkWait</span></a></span></span><span> </span><span id="local-6989586621679037800"><span class="annot"><span class="annottext">IO a
</span><a href="#local-6989586621679037800"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-160"></span><span>    </span><span id="local-6989586621679037799"><span class="annot"><span class="annottext">MVar (Either SomeException a)
</span><a href="#local-6989586621679037799"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (MVar (Either SomeException a))
forall a. IO (MVar a)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">newEmptyMVar</span></a></span><span>
</span><span id="line-161"></span><span>    </span><span class="annot"><span class="annottext">ThreadId
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((forall a. IO a -&gt; IO a) -&gt; IO ThreadId) -&gt; IO ThreadId
forall b. ((forall a. IO a -&gt; IO a) -&gt; IO b) -&gt; IO b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mask</span></a></span><span> </span><span class="annot"><span class="annottext">(((forall a. IO a -&gt; IO a) -&gt; IO ThreadId) -&gt; IO ThreadId)
-&gt; ((forall a. IO a -&gt; IO a) -&gt; IO ThreadId) -&gt; IO ThreadId
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679037797"><span class="annot"><span class="annottext">forall a. IO a -&gt; IO a
</span><a href="#local-6989586621679037797"><span class="hs-identifier hs-var">restore</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IO ThreadId
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">forkIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ThreadId) -&gt; IO () -&gt; IO ThreadId
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">IO a -&gt; IO (Either SomeException a)
forall e a. Exception e =&gt; IO a -&gt; IO (Either e a)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">try</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IO a -&gt; IO a
forall a. IO a -&gt; IO a
</span><a href="#local-6989586621679037797"><span class="hs-identifier hs-var">restore</span></a></span><span> </span><span class="annot"><span class="annottext">IO a
</span><a href="#local-6989586621679037800"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IO (Either SomeException a)
-&gt; (Either SomeException a -&gt; IO ()) -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">MVar (Either SomeException a) -&gt; Either SomeException a -&gt; IO ()
forall a. MVar a -&gt; a -&gt; IO ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">putMVar</span></a></span><span> </span><span class="annot"><span class="annottext">MVar (Either SomeException a)
</span><a href="#local-6989586621679037799"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-162"></span><span>    </span><span class="annot"><span class="annottext">IO a -&gt; IO (IO a)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MVar (Either SomeException a) -&gt; IO (Either SomeException a)
forall a. MVar a -&gt; IO a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">takeMVar</span></a></span><span> </span><span class="annot"><span class="annottext">MVar (Either SomeException a)
</span><a href="#local-6989586621679037799"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="annot"><span class="annottext">IO (Either SomeException a)
-&gt; (Either SomeException a -&gt; IO a) -&gt; IO a
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">(SomeException -&gt; IO a)
-&gt; (a -&gt; IO a) -&gt; Either SomeException a -&gt; IO a
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">either</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679037792"><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679037792"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; IO a
forall e a. Exception e =&gt; e -&gt; IO a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">throwIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679037792"><span class="hs-identifier hs-var">ex</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">SomeException</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-163"></span><span>
</span><span id="line-164"></span><span>
</span><span id="line-165"></span><span class="hs-comment">-- Like System.Process, but tweaked to show less escaping,</span><span>
</span><span id="line-166"></span><span class="hs-comment">-- Relies on relatively detailed internals of showCommandForUser.</span><span>
</span><span id="line-167"></span><span class="annot"><a href="System.Command.html#saneCommandForUser"><span class="hs-identifier hs-type">saneCommandForUser</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-168"></span><span id="saneCommandForUser"><span class="annot"><span class="annottext">saneCommandForUser :: String -&gt; [String] -&gt; String
</span><a href="System.Command.html#saneCommandForUser"><span class="hs-identifier hs-var hs-var">saneCommandForUser</span></a></span></span><span> </span><span id="local-6989586621679037791"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037791"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621679037790"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679037790"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">unwords</span></a></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; String) -&gt; [String] -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShowS -&gt; [String] -&gt; [String]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">ShowS
</span><a href="#local-6989586621679037789"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; [String]) -&gt; [String] -&gt; [String]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037791"><span class="hs-identifier hs-var">c</span></a></span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; [String]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-var">:</span></a></span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679037790"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-169"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-170"></span><span>        </span><span id="local-6989586621679037789"><span class="annot"><span class="annottext">f :: ShowS
</span><a href="#local-6989586621679037789"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679037788"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037788"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int -&gt; ShowS
forall a. Int -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">take</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037785"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; ShowS
forall a. Int -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">drop</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037785"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037788"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037788"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037785"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-171"></span><span>            </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679037785"><span class="annot"><span class="annottext">y :: String
</span><a href="#local-6989586621679037785"><span class="hs-identifier hs-var hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; String
</span><a href="../../../../process/html/src"><span class="hs-identifier hs-var">showCommandForUser</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037788"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-172"></span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span class="hs-comment">---------------------------------------------------------------------</span><span>
</span><span id="line-175"></span><span class="hs-comment">-- FIXED ARGUMENT WRAPPER</span><span>
</span><span id="line-176"></span><span>
</span><span id="line-177"></span><span class="hs-comment">-- | Collect the @stdout@ of the process.</span><span>
</span><span id="line-178"></span><span class="hs-comment">--   If you are collecting the @stdout@, it will not be echoed to the terminal, unless you include 'EchoStdout'.</span><span>
</span><span id="line-179"></span><span class="hs-keyword">newtype</span><span> </span><span id="Stdout"><span class="annot"><a href="System.Command.html#Stdout"><span class="hs-identifier hs-var">Stdout</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Stdout"><span class="annot"><a href="System.Command.html#Stdout"><span class="hs-identifier hs-var">Stdout</span></a></span></span><span> </span><span class="hs-special">{</span><span id="fromStdout"><span class="annot"><span class="annottext">Stdout -&gt; String
</span><a href="System.Command.html#fromStdout"><span class="hs-identifier hs-var hs-var">fromStdout</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-180"></span><span>
</span><span id="line-181"></span><span class="hs-comment">-- | Collect the @stderr@ of the process.</span><span>
</span><span id="line-182"></span><span class="hs-comment">--   If you are collecting the @stderr@, it will not be echoed to the terminal, unless you include 'EchoStderr'.</span><span>
</span><span id="line-183"></span><span class="hs-keyword">newtype</span><span> </span><span id="Stderr"><span class="annot"><a href="System.Command.html#Stderr"><span class="hs-identifier hs-var">Stderr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Stderr"><span class="annot"><a href="System.Command.html#Stderr"><span class="hs-identifier hs-var">Stderr</span></a></span></span><span> </span><span class="hs-special">{</span><span id="fromStderr"><span class="annot"><span class="annottext">Stderr -&gt; String
</span><a href="System.Command.html#fromStderr"><span class="hs-identifier hs-var hs-var">fromStderr</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-184"></span><span>
</span><span id="line-185"></span><span class="hs-comment">-- | Collect the 'ExitCode' of the process.</span><span>
</span><span id="line-186"></span><span class="hs-comment">--   If you do not collect the exit code, any 'ExitFailure' will cause an exception.</span><span>
</span><span id="line-187"></span><span class="hs-keyword">newtype</span><span> </span><span id="Exit"><span class="annot"><a href="System.Command.html#Exit"><span class="hs-identifier hs-var">Exit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Exit"><span class="annot"><a href="System.Command.html#Exit"><span class="hs-identifier hs-var">Exit</span></a></span></span><span> </span><span class="hs-special">{</span><span id="fromExit"><span class="annot"><span class="annottext">Exit -&gt; ExitCode
</span><a href="System.Command.html#fromExit"><span class="hs-identifier hs-var hs-var">fromExit</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">ExitCode</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-188"></span><span>
</span><span id="line-189"></span><span class="hs-comment">-- | A class for specifying what results you want to collect from a process.</span><span>
</span><span id="line-190"></span><span class="hs-comment">--   Values are formed of 'Stdout', 'Stderr', 'Exit' and tuples of those.</span><span>
</span><span id="line-191"></span><span class="hs-keyword">class</span><span> </span><span id="CmdResult"><span class="annot"><a href="System.Command.html#CmdResult"><span class="hs-identifier hs-var">CmdResult</span></a></span></span><span> </span><span id="local-6989586621679037998"><span class="annot"><a href="#local-6989586621679037998"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-192"></span><span>    </span><span class="hs-comment">-- Return a list of results (with the right type but dummy data)</span><span>
</span><span id="line-193"></span><span>    </span><span class="hs-comment">-- and a function to transform a populated set of results into a value</span><span>
</span><span id="line-194"></span><span>    </span><span id="cmdResult"><span class="annot"><a href="System.Command.html#cmdResult"><span class="hs-identifier hs-type">cmdResult</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="System.Command.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="System.Command.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679037998"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-195"></span><span>
</span><span id="line-196"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="System.Command.html#CmdResult"><span class="hs-identifier hs-type">CmdResult</span></a></span><span> </span><span class="annot"><a href="System.Command.html#Exit"><span class="hs-identifier hs-type">Exit</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-197"></span><span>    </span><span id="local-6989586621679037773"><span class="annot"><span class="annottext">cmdResult :: ([Result], [Result] -&gt; Exit)
</span><a href="#local-6989586621679037773"><span class="hs-identifier hs-var hs-var hs-var hs-var">cmdResult</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="annottext">ExitCode -&gt; Result
</span><a href="System.Command.html#ResultCode"><span class="hs-identifier hs-var">ResultCode</span></a></span><span> </span><span class="annot"><span class="annottext">(ExitCode -&gt; Result) -&gt; ExitCode -&gt; Result
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ExitCode
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">ExitSuccess</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-glyph">\</span><span class="hs-special">[</span><span class="annot"><a href="System.Command.html#ResultCode"><span class="hs-identifier hs-type">ResultCode</span></a></span><span> </span><span id="local-6989586621679037772"><span class="annot"><span class="annottext">ExitCode
</span><a href="#local-6989586621679037772"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ExitCode -&gt; Exit
</span><a href="System.Command.html#Exit"><span class="hs-identifier hs-var">Exit</span></a></span><span> </span><span class="annot"><span class="annottext">ExitCode
</span><a href="#local-6989586621679037772"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-198"></span><span>
</span><span id="line-199"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="System.Command.html#CmdResult"><span class="hs-identifier hs-type">CmdResult</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">ExitCode</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-200"></span><span>    </span><span id="local-6989586621679037770"><span class="annot"><span class="annottext">cmdResult :: ([Result], [Result] -&gt; ExitCode)
</span><a href="#local-6989586621679037770"><span class="hs-identifier hs-var hs-var hs-var hs-var">cmdResult</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="annottext">ExitCode -&gt; Result
</span><a href="System.Command.html#ResultCode"><span class="hs-identifier hs-var">ResultCode</span></a></span><span> </span><span class="annot"><span class="annottext">(ExitCode -&gt; Result) -&gt; ExitCode -&gt; Result
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ExitCode
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">ExitSuccess</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-glyph">\</span><span class="hs-special">[</span><span class="annot"><a href="System.Command.html#ResultCode"><span class="hs-identifier hs-type">ResultCode</span></a></span><span> </span><span id="local-6989586621679037769"><span class="annot"><span class="annottext">ExitCode
</span><a href="#local-6989586621679037769"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ExitCode
</span><a href="#local-6989586621679037769"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-201"></span><span>
</span><span id="line-202"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="System.Command.html#CmdResult"><span class="hs-identifier hs-type">CmdResult</span></a></span><span> </span><span class="annot"><a href="System.Command.html#Stdout"><span class="hs-identifier hs-type">Stdout</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-203"></span><span>    </span><span id="local-6989586621679037767"><span class="annot"><span class="annottext">cmdResult :: ([Result], [Result] -&gt; Stdout)
</span><a href="#local-6989586621679037767"><span class="hs-identifier hs-var hs-var hs-var hs-var">cmdResult</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; Result
</span><a href="System.Command.html#ResultStdout"><span class="hs-identifier hs-var">ResultStdout</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-glyph">\</span><span class="hs-special">[</span><span class="annot"><a href="System.Command.html#ResultStdout"><span class="hs-identifier hs-type">ResultStdout</span></a></span><span> </span><span id="local-6989586621679037766"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037766"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Stdout
</span><a href="System.Command.html#Stdout"><span class="hs-identifier hs-var">Stdout</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037766"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-204"></span><span>
</span><span id="line-205"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="System.Command.html#CmdResult"><span class="hs-identifier hs-type">CmdResult</span></a></span><span> </span><span class="annot"><a href="System.Command.html#Stderr"><span class="hs-identifier hs-type">Stderr</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-206"></span><span>    </span><span id="local-6989586621679037764"><span class="annot"><span class="annottext">cmdResult :: ([Result], [Result] -&gt; Stderr)
</span><a href="#local-6989586621679037764"><span class="hs-identifier hs-var hs-var hs-var hs-var">cmdResult</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; Result
</span><a href="System.Command.html#ResultStderr"><span class="hs-identifier hs-var">ResultStderr</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-glyph">\</span><span class="hs-special">[</span><span class="annot"><a href="System.Command.html#ResultStderr"><span class="hs-identifier hs-type">ResultStderr</span></a></span><span> </span><span id="local-6989586621679037763"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037763"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Stderr
</span><a href="System.Command.html#Stderr"><span class="hs-identifier hs-var">Stderr</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037763"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="System.Command.html#CmdResult"><span class="hs-identifier hs-type">CmdResult</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-209"></span><span>    </span><span id="local-6989586621679037761"><span class="annot"><span class="annottext">cmdResult :: ([Result], [Result] -&gt; ())
</span><a href="#local-6989586621679037761"><span class="hs-identifier hs-var hs-var hs-var hs-var">cmdResult</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-glyph">\</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-210"></span><span>
</span><span id="line-211"></span><span id="local-6989586621679037759"><span id="local-6989586621679037760"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Command.html#CmdResult"><span class="hs-identifier hs-type">CmdResult</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679037760"><span class="hs-identifier hs-type">x1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Command.html#CmdResult"><span class="hs-identifier hs-type">CmdResult</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679037759"><span class="hs-identifier hs-type">x2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="System.Command.html#CmdResult"><span class="hs-identifier hs-type">CmdResult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679037760"><span class="hs-identifier hs-type">x1</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679037759"><span class="hs-identifier hs-type">x2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-212"></span><span>    </span><span id="local-6989586621679037757"><span class="annot"><span class="annottext">cmdResult :: ([Result], [Result] -&gt; (x1, x2))
</span><a href="#local-6989586621679037757"><span class="hs-identifier hs-var hs-var hs-var hs-var">cmdResult</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Result]
</span><a href="#local-6989586621679037756"><span class="hs-identifier hs-var">a1</span></a></span><span class="annot"><span class="annottext">[Result] -&gt; [Result] -&gt; [Result]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span class="annot"><span class="annottext">[Result]
</span><a href="#local-6989586621679037755"><span class="hs-identifier hs-var">a2</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679037754"><span class="annot"><span class="annottext">[Result]
</span><a href="#local-6989586621679037754"><span class="hs-identifier hs-var">rs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679037753"><span class="annot"><span class="annottext">[Result]
</span><a href="#local-6989586621679037753"><span class="hs-identifier hs-var">r1</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679037752"><span class="annot"><span class="annottext">[Result]
</span><a href="#local-6989586621679037752"><span class="hs-identifier hs-var">r2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Result] -&gt; ([Result], [Result])
forall a. Int -&gt; [a] -&gt; ([a], [a])
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">splitAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Result] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[Result]
</span><a href="#local-6989586621679037756"><span class="hs-identifier hs-var">a1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Result]
</span><a href="#local-6989586621679037754"><span class="hs-identifier hs-var">rs</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Result] -&gt; x1
</span><a href="#local-6989586621679037750"><span class="hs-identifier hs-var">b1</span></a></span><span> </span><span class="annot"><span class="annottext">[Result]
</span><a href="#local-6989586621679037753"><span class="hs-identifier hs-var">r1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Result] -&gt; x2
</span><a href="#local-6989586621679037749"><span class="hs-identifier hs-var">b2</span></a></span><span> </span><span class="annot"><span class="annottext">[Result]
</span><a href="#local-6989586621679037752"><span class="hs-identifier hs-var">r2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-213"></span><span>        </span><span class="hs-keyword">where</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679037756"><span class="annot"><span class="annottext">[Result]
</span><a href="#local-6989586621679037756"><span class="hs-identifier hs-var">a1</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679037750"><span class="annot"><span class="annottext">[Result] -&gt; x1
</span><a href="#local-6989586621679037750"><span class="hs-identifier hs-var">b1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([Result], [Result] -&gt; x1)
forall a. CmdResult a =&gt; ([Result], [Result] -&gt; a)
</span><a href="System.Command.html#cmdResult"><span class="hs-identifier hs-var">cmdResult</span></a></span><span>
</span><span id="line-214"></span><span>              </span><span class="hs-special">(</span><span id="local-6989586621679037755"><span class="annot"><span class="annottext">[Result]
</span><a href="#local-6989586621679037755"><span class="hs-identifier hs-var">a2</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679037749"><span class="annot"><span class="annottext">[Result] -&gt; x2
</span><a href="#local-6989586621679037749"><span class="hs-identifier hs-var">b2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([Result], [Result] -&gt; x2)
forall a. CmdResult a =&gt; ([Result], [Result] -&gt; a)
</span><a href="System.Command.html#cmdResult"><span class="hs-identifier hs-var">cmdResult</span></a></span></span></span><span>
</span><span id="line-215"></span><span>
</span><span id="line-216"></span><span id="local-6989586621679037746"><span id="local-6989586621679037747"><span id="local-6989586621679037748"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Command.html#CmdResult"><span class="hs-identifier hs-type">CmdResult</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679037748"><span class="hs-identifier hs-type">x1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Command.html#CmdResult"><span class="hs-identifier hs-type">CmdResult</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679037747"><span class="hs-identifier hs-type">x2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Command.html#CmdResult"><span class="hs-identifier hs-type">CmdResult</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679037746"><span class="hs-identifier hs-type">x3</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="System.Command.html#CmdResult"><span class="hs-identifier hs-type">CmdResult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679037748"><span class="hs-identifier hs-type">x1</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679037747"><span class="hs-identifier hs-type">x2</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679037746"><span class="hs-identifier hs-type">x3</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-217"></span><span>    </span><span id="local-6989586621679037744"><span class="annot"><span class="annottext">cmdResult :: ([Result], [Result] -&gt; (x1, x2, x3))
</span><a href="#local-6989586621679037744"><span class="hs-identifier hs-var hs-var hs-var hs-var">cmdResult</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((x1, (x2, x3)) -&gt; (x1, x2, x3))
-&gt; ([Result], [Result] -&gt; (x1, x2, x3))
forall a c. CmdResult a =&gt; (a -&gt; c) -&gt; ([Result], [Result] -&gt; c)
</span><a href="#local-6989586621679037743"><span class="hs-identifier hs-var">cmdResultWith</span></a></span><span> </span><span class="annot"><span class="annottext">(((x1, (x2, x3)) -&gt; (x1, x2, x3))
 -&gt; ([Result], [Result] -&gt; (x1, x2, x3)))
-&gt; ((x1, (x2, x3)) -&gt; (x1, x2, x3))
-&gt; ([Result], [Result] -&gt; (x1, x2, x3))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679037742"><span class="annot"><span class="annottext">x1
</span><a href="#local-6989586621679037742"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span class="hs-special">(</span><span id="local-6989586621679037741"><span class="annot"><span class="annottext">x2
</span><a href="#local-6989586621679037741"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679037740"><span class="annot"><span class="annottext">x3
</span><a href="#local-6989586621679037740"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">x1
</span><a href="#local-6989586621679037742"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">x2
</span><a href="#local-6989586621679037741"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">x3
</span><a href="#local-6989586621679037740"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-218"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-219"></span><span>        </span><span id="local-6989586621679037743"><span class="annot"><span class="annottext">cmdResultWith :: (a -&gt; c) -&gt; ([Result], [Result] -&gt; c)
</span><a href="#local-6989586621679037743"><span class="hs-identifier hs-var hs-var">cmdResultWith</span></a></span></span><span> </span><span id="local-6989586621679037739"><span class="annot"><span class="annottext">a -&gt; c
</span><a href="#local-6989586621679037739"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(([Result] -&gt; a) -&gt; [Result] -&gt; c)
-&gt; ([Result], [Result] -&gt; a) -&gt; ([Result], [Result] -&gt; c)
forall (a :: * -&gt; * -&gt; *) b c d.
Arrow a =&gt;
a b c -&gt; a (d, b) (d, c)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">second</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; c
</span><a href="#local-6989586621679037739"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; c) -&gt; ([Result] -&gt; a) -&gt; [Result] -&gt; c
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Result], [Result] -&gt; a)
forall a. CmdResult a =&gt; ([Result], [Result] -&gt; a)
</span><a href="System.Command.html#cmdResult"><span class="hs-identifier hs-var">cmdResult</span></a></span></span></span></span><span>
</span><span id="line-220"></span><span>
</span><span id="line-221"></span><span>
</span><span id="line-222"></span><span class="hs-comment">-- | Execute a system command. Before running 'command' make sure you 'System.Command.need' any files</span><span>
</span><span id="line-223"></span><span class="hs-comment">--   that are required by the command.</span><span>
</span><span id="line-224"></span><span class="hs-comment">--</span><span>
</span><span id="line-225"></span><span class="hs-comment">--   This function takes a list of options (often just @[]@, see 'CmdOption' for the available</span><span>
</span><span id="line-226"></span><span class="hs-comment">--   options), the name of the executable (either a full name, or a program on the @$PATH@) and</span><span>
</span><span id="line-227"></span><span class="hs-comment">--   a list of arguments. The result is often @()@, but can be a tuple containg any of 'Stdout',</span><span>
</span><span id="line-228"></span><span class="hs-comment">--   'Stderr' and 'Exit'. Some examples:</span><span>
</span><span id="line-229"></span><span class="hs-comment">--</span><span>
</span><span id="line-230"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-231"></span><span class="hs-comment">-- 'command_' [] \&quot;gcc\&quot; [\&quot;-c\&quot;,\&quot;myfile.c\&quot;]                          -- compile a file, throwing an exception on failure</span><span>
</span><span id="line-232"></span><span class="hs-comment">-- 'Exit' c &lt;- 'command' [] \&quot;gcc\&quot; [\&quot;-c\&quot;,myfile]                     -- run a command, recording the exit code</span><span>
</span><span id="line-233"></span><span class="hs-comment">-- ('Exit' c, 'Stderr' err) &lt;- 'command' [] \&quot;gcc\&quot; [\&quot;-c\&quot;,\&quot;myfile.c\&quot;]   -- run a command, recording the exit code and error output</span><span>
</span><span id="line-234"></span><span class="hs-comment">-- 'Stdout' out &lt;- 'command' [] \&quot;gcc\&quot; [\&quot;-MM\&quot;,\&quot;myfile.c\&quot;]            -- run a command, recording the output</span><span>
</span><span id="line-235"></span><span class="hs-comment">-- 'command_' ['Cwd' \&quot;generated\&quot;] \&quot;gcc\&quot; [\&quot;-c\&quot;,myfile]               -- run a command in a directory</span><span>
</span><span id="line-236"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-237"></span><span class="hs-comment">--</span><span>
</span><span id="line-238"></span><span class="hs-comment">--   Unless you retrieve the 'ExitCode' using 'Exit', any 'ExitFailure' will throw an error, including</span><span>
</span><span id="line-239"></span><span class="hs-comment">--   the 'Stderr' in the exception message. If you capture the 'Stdout' or 'Stderr', that stream will not be echoed to the console,</span><span>
</span><span id="line-240"></span><span class="hs-comment">--   unless you use the option 'EchoStdout' or 'EchoStderr'.</span><span>
</span><span id="line-241"></span><span class="hs-comment">--</span><span>
</span><span id="line-242"></span><span class="hs-comment">--   If you use 'command' inside a @do@ block and do not use the result, you may get a compile-time error about being</span><span>
</span><span id="line-243"></span><span class="hs-comment">--   unable to deduce 'CmdResult'. To avoid this error, use 'command_'.</span><span>
</span><span id="line-244"></span><span id="local-6989586621679037736"><span class="annot"><a href="System.Command.html#command"><span class="hs-identifier hs-type">command</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="System.Command.html#CmdResult"><span class="hs-identifier hs-type">CmdResult</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679037736"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="System.Command.html#CmdOption"><span class="hs-identifier hs-type">CmdOption</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679037736"><span class="hs-identifier hs-type">r</span></a></span></span><span>
</span><span id="line-245"></span><span id="command"><span class="annot"><span class="annottext">command :: [CmdOption] -&gt; String -&gt; [String] -&gt; IO r
</span><a href="System.Command.html#command"><span class="hs-identifier hs-var hs-var">command</span></a></span></span><span> </span><span id="local-6989586621679037735"><span class="annot"><span class="annottext">[CmdOption]
</span><a href="#local-6989586621679037735"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621679037734"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037734"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679037733"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679037733"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([Result] -&gt; r) -&gt; IO [Result] -&gt; IO r
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">[Result] -&gt; r
</span><a href="#local-6989586621679037732"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">(IO [Result] -&gt; IO r) -&gt; IO [Result] -&gt; IO r
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
-&gt; [CmdOption] -&gt; [Result] -&gt; String -&gt; [String] -&gt; IO [Result]
</span><a href="System.Command.html#commandExplicit"><span class="hs-identifier hs-var">commandExplicit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;command&quot;</span></span><span> </span><span class="annot"><span class="annottext">[CmdOption]
</span><a href="#local-6989586621679037735"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">[Result]
</span><a href="#local-6989586621679037731"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037734"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679037733"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-246"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679037731"><span class="annot"><span class="annottext">[Result]
</span><a href="#local-6989586621679037731"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679037732"><span class="annot"><span class="annottext">[Result] -&gt; r
</span><a href="#local-6989586621679037732"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([Result], [Result] -&gt; r)
forall a. CmdResult a =&gt; ([Result], [Result] -&gt; a)
</span><a href="System.Command.html#cmdResult"><span class="hs-identifier hs-var">cmdResult</span></a></span><span>
</span><span id="line-247"></span><span>
</span><span id="line-248"></span><span class="hs-comment">-- | A version of 'command' where you do not require any results, used to avoid errors about being unable</span><span>
</span><span id="line-249"></span><span class="hs-comment">--   to deduce 'CmdResult'.</span><span>
</span><span id="line-250"></span><span class="annot"><a href="System.Command.html#command_"><span class="hs-identifier hs-type">command_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="System.Command.html#CmdOption"><span class="hs-identifier hs-type">CmdOption</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-251"></span><span id="command_"><span class="annot"><span class="annottext">command_ :: [CmdOption] -&gt; String -&gt; [String] -&gt; IO ()
</span><a href="System.Command.html#command_"><span class="hs-identifier hs-var hs-var">command_</span></a></span></span><span> </span><span id="local-6989586621679037730"><span class="annot"><span class="annottext">[CmdOption]
</span><a href="#local-6989586621679037730"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621679037729"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037729"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679037728"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679037728"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; [CmdOption] -&gt; [Result] -&gt; String -&gt; [String] -&gt; IO [Result]
</span><a href="System.Command.html#commandExplicit"><span class="hs-identifier hs-var">commandExplicit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;command_&quot;</span></span><span> </span><span class="annot"><span class="annottext">[CmdOption]
</span><a href="#local-6989586621679037730"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037729"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679037728"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">IO [Result] -&gt; IO () -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span class="hs-comment">---------------------------------------------------------------------</span><span>
</span><span id="line-255"></span><span class="hs-comment">-- VARIABLE ARGUMENT WRAPPER</span><span>
</span><span id="line-256"></span><span>
</span><span id="line-257"></span><span class="hs-keyword">type</span><span> </span><span id="local-6989586621679037727"><span class="annot"><a href="#local-6989586621679037727"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="%3A-%3E"><span class="annot"><a href="System.Command.html#%3A-%3E"><span class="hs-operator hs-var">:-&gt;</span></a></span></span><span> </span><span id="local-6989586621679037726"><span class="annot"><a href="#local-6989586621679037726"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679037727"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-258"></span><span>
</span><span id="line-259"></span><span>
</span><span id="line-260"></span><span class="hs-comment">-- | A variable arity version of 'command'.</span><span>
</span><span id="line-261"></span><span class="hs-comment">--</span><span>
</span><span id="line-262"></span><span class="hs-comment">-- * @String@ arguments are treated as whitespace separated arguments.</span><span>
</span><span id="line-263"></span><span class="hs-comment">--</span><span>
</span><span id="line-264"></span><span class="hs-comment">-- * @[String]@ arguments are treated as literal arguments.</span><span>
</span><span id="line-265"></span><span class="hs-comment">--</span><span>
</span><span id="line-266"></span><span class="hs-comment">-- * 'CmdOption' arguments are used as options.</span><span>
</span><span id="line-267"></span><span class="hs-comment">--</span><span>
</span><span id="line-268"></span><span class="hs-comment">--   To take the examples from 'command':</span><span>
</span><span id="line-269"></span><span class="hs-comment">--</span><span>
</span><span id="line-270"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-271"></span><span class="hs-comment">-- () &lt;- 'cmd' \&quot;gcc -c myfile.c\&quot;                                  -- compile a file, throwing an exception on failure</span><span>
</span><span id="line-272"></span><span class="hs-comment">-- 'Exit' c &lt;- 'cmd' \&quot;gcc -c\&quot; [myfile]                              -- run a command, recording the exit code</span><span>
</span><span id="line-273"></span><span class="hs-comment">-- ('Exit' c, 'Stderr' err) &lt;- 'cmd' \&quot;gcc -c myfile.c\&quot;                -- run a command, recording the exit code and error output</span><span>
</span><span id="line-274"></span><span class="hs-comment">-- 'Stdout' out &lt;- 'cmd' \&quot;gcc -MM myfile.c\&quot;                         -- run a command, recording the output</span><span>
</span><span id="line-275"></span><span class="hs-comment">-- 'cmd' ('Cwd' \&quot;generated\&quot;) \&quot;gcc -c\&quot; [myfile] :: 'IO' ()         -- run a command in a directory</span><span>
</span><span id="line-276"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-277"></span><span class="hs-comment">--</span><span>
</span><span id="line-278"></span><span class="hs-comment">--   When passing file arguments we use @[myfile]@ so that if the @myfile@ variable contains spaces they are properly escaped.</span><span>
</span><span id="line-279"></span><span class="hs-comment">--</span><span>
</span><span id="line-280"></span><span class="hs-comment">--   If you use 'cmd' inside a @do@ block and do not use the result, you may get a compile-time error about being</span><span>
</span><span id="line-281"></span><span class="hs-comment">--   unable to deduce 'CmdResult'. To avoid this error, bind the result to @()@, or include a type signature.</span><span>
</span><span id="line-282"></span><span id="local-6989586621679037724"><span id="local-6989586621679037725"><span class="annot"><a href="System.Command.html#cmd"><span class="hs-identifier hs-type">cmd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="System.Command.html#CmdArguments"><span class="hs-identifier hs-type">CmdArguments</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679037725"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679037725"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="System.Command.html#%3A-%3E"><span class="hs-operator hs-type">:-&gt;</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679037724"><span class="hs-identifier hs-type">r</span></a></span></span></span><span>
</span><span id="line-283"></span><span id="cmd"><span class="annot"><span class="annottext">cmd :: args :-&gt; IO r
</span><a href="System.Command.html#cmd"><span class="hs-identifier hs-var hs-var">cmd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Either CmdOption String] -&gt; args :-&gt; IO r
forall t. CmdArguments t =&gt; [Either CmdOption String] -&gt; t
</span><a href="System.Command.html#cmdArguments"><span class="hs-identifier hs-var">cmdArguments</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-284"></span><span>
</span><span id="line-285"></span><span class="hs-keyword">class</span><span> </span><span id="CmdArguments"><span class="annot"><a href="System.Command.html#CmdArguments"><span class="hs-identifier hs-var">CmdArguments</span></a></span></span><span> </span><span id="local-6989586621679037972"><span class="annot"><a href="#local-6989586621679037972"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="cmdArguments"><span class="annot"><a href="System.Command.html#cmdArguments"><span class="hs-identifier hs-type">cmdArguments</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="System.Command.html#CmdOption"><span class="hs-identifier hs-type">CmdOption</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679037972"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-286"></span><span id="local-6989586621679037721"><span id="local-6989586621679037722"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Command.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679037722"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Command.html#CmdArguments"><span class="hs-identifier hs-type">CmdArguments</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679037721"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="System.Command.html#CmdArguments"><span class="hs-identifier hs-type">CmdArguments</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679037722"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679037721"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-287"></span><span>    </span><span id="local-6989586621679037718"><span class="annot"><span class="annottext">cmdArguments :: [Either CmdOption String] -&gt; a -&gt; r
</span><a href="#local-6989586621679037718"><span class="hs-identifier hs-var hs-var hs-var hs-var">cmdArguments</span></a></span></span><span> </span><span id="local-6989586621679037717"><span class="annot"><span class="annottext">[Either CmdOption String]
</span><a href="#local-6989586621679037717"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span id="local-6989586621679037716"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679037716"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Either CmdOption String] -&gt; r
forall t. CmdArguments t =&gt; [Either CmdOption String] -&gt; t
</span><a href="System.Command.html#cmdArguments"><span class="hs-identifier hs-var">cmdArguments</span></a></span><span> </span><span class="annot"><span class="annottext">([Either CmdOption String] -&gt; r) -&gt; [Either CmdOption String] -&gt; r
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Either CmdOption String]
</span><a href="#local-6989586621679037717"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">[Either CmdOption String]
-&gt; [Either CmdOption String] -&gt; [Either CmdOption String]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; [Either CmdOption String]
forall a. Arg a =&gt; a -&gt; [Either CmdOption String]
</span><a href="System.Command.html#arg"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679037716"><span class="hs-identifier hs-var">x</span></a></span></span></span><span>
</span><span id="line-288"></span><span id="local-6989586621679037714"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="System.Command.html#CmdResult"><span class="hs-identifier hs-type">CmdResult</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679037714"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="System.Command.html#CmdArguments"><span class="hs-identifier hs-type">CmdArguments</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679037714"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-289"></span><span>    </span><span id="local-6989586621679037712"><span class="annot"><span class="annottext">cmdArguments :: [Either CmdOption String] -&gt; IO r
</span><a href="#local-6989586621679037712"><span class="hs-identifier hs-var hs-var hs-var hs-var">cmdArguments</span></a></span></span><span> </span><span id="local-6989586621679037711"><span class="annot"><span class="annottext">[Either CmdOption String]
</span><a href="#local-6989586621679037711"><span class="hs-identifier hs-var">exs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[Either CmdOption String] -&gt; ([CmdOption], [String])
forall a b. [Either a b] -&gt; ([a], [b])
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">partitionEithers</span></a></span><span> </span><span class="annot"><span class="annottext">[Either CmdOption String]
</span><a href="#local-6989586621679037711"><span class="hs-identifier hs-var">exs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-290"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679037709"><span class="annot"><span class="annottext">[CmdOption]
</span><a href="#local-6989586621679037709"><span class="hs-identifier hs-var">opts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679037708"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037708"><span class="hs-identifier hs-var">x</span></a></span></span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">:</span></a></span><span id="local-6989586621679037707"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679037707"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679037706"><span class="annot"><span class="annottext">[Result]
</span><a href="#local-6989586621679037706"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679037705"><span class="annot"><span class="annottext">[Result] -&gt; r
</span><a href="#local-6989586621679037705"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([Result], [Result] -&gt; r)
forall a. CmdResult a =&gt; ([Result], [Result] -&gt; a)
</span><a href="System.Command.html#cmdResult"><span class="hs-identifier hs-var">cmdResult</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">([Result] -&gt; r) -&gt; IO [Result] -&gt; IO r
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">[Result] -&gt; r
</span><a href="#local-6989586621679037705"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">(IO [Result] -&gt; IO r) -&gt; IO [Result] -&gt; IO r
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
-&gt; [CmdOption] -&gt; [Result] -&gt; String -&gt; [String] -&gt; IO [Result]
</span><a href="System.Command.html#commandExplicit"><span class="hs-identifier hs-var">commandExplicit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cmd&quot;</span></span><span> </span><span class="annot"><span class="annottext">[CmdOption]
</span><a href="#local-6989586621679037709"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">[Result]
</span><a href="#local-6989586621679037706"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679037708"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679037707"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-291"></span><span>        </span><span class="annot"><span class="annottext">([CmdOption], [String])
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO r
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Error, no executable or arguments given to System.Command.cmd&quot;</span></span></span><span>
</span><span id="line-292"></span><span>
</span><span id="line-293"></span><span class="hs-keyword">class</span><span> </span><span id="Arg"><span class="annot"><a href="System.Command.html#Arg"><span class="hs-identifier hs-var">Arg</span></a></span></span><span> </span><span id="local-6989586621679037967"><span class="annot"><a href="#local-6989586621679037967"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="arg"><span class="annot"><a href="System.Command.html#arg"><span class="hs-identifier hs-type">arg</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679037967"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="System.Command.html#CmdOption"><span class="hs-identifier hs-type">CmdOption</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-294"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="System.Command.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679037702"><span class="annot"><span class="annottext">arg :: String -&gt; [Either CmdOption String]
</span><a href="#local-6989586621679037702"><span class="hs-identifier hs-var hs-var hs-var hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(String -&gt; Either CmdOption String)
-&gt; [String] -&gt; [Either CmdOption String]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Either CmdOption String
forall a b. b -&gt; Either a b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; [Either CmdOption String])
-&gt; (String -&gt; [String]) -&gt; String -&gt; [Either CmdOption String]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; [String]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">words</span></a></span><span>
</span><span id="line-295"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="System.Command.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679037699"><span class="annot"><span class="annottext">arg :: [String] -&gt; [Either CmdOption String]
</span><a href="#local-6989586621679037699"><span class="hs-identifier hs-var hs-var hs-var hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(String -&gt; Either CmdOption String)
-&gt; [String] -&gt; [Either CmdOption String]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Either CmdOption String
forall a b. b -&gt; Either a b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Right</span></a></span><span>
</span><span id="line-296"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="System.Command.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="annot"><a href="System.Command.html#CmdOption"><span class="hs-identifier hs-type">CmdOption</span></a></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679037697"><span class="annot"><span class="annottext">arg :: CmdOption -&gt; [Either CmdOption String]
</span><a href="#local-6989586621679037697"><span class="hs-identifier hs-var hs-var hs-var hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Either CmdOption String -&gt; [Either CmdOption String]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Either CmdOption String -&gt; [Either CmdOption String])
-&gt; (CmdOption -&gt; Either CmdOption String)
-&gt; CmdOption
-&gt; [Either CmdOption String]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">CmdOption -&gt; Either CmdOption String
forall a b. a -&gt; Either a b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Left</span></a></span><span>
</span><span id="line-297"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="System.Command.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="System.Command.html#CmdOption"><span class="hs-identifier hs-type">CmdOption</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679037695"><span class="annot"><span class="annottext">arg :: [CmdOption] -&gt; [Either CmdOption String]
</span><a href="#local-6989586621679037695"><span class="hs-identifier hs-var hs-var hs-var hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CmdOption -&gt; Either CmdOption String)
-&gt; [CmdOption] -&gt; [Either CmdOption String]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">CmdOption -&gt; Either CmdOption String
forall a b. a -&gt; Either a b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Left</span></a></span><span>
</span><span id="line-298"></span></pre></body></html>